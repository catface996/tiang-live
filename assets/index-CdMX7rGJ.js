import{u as U,c as Y,j as e,d as m}from"./index-Ds4hQBUW.js";import{r as i,a9 as d,t as I,j as g,B as p,w as J,aa as _,ab as G,T as K,ac as S,n as W,o as X,d as C,C as o,S as j,e as w,ad as R,ae as $,i as f,a8 as Z,M as ee,af as N,ag as ae,l as B,Y as te,ah as se,ai as b,Q as re}from"./antd-Beg1odhe.js";import{s as ne}from"./index-Daowydkz.js";import{S as oe}from"./SearchFilterBar-o2SMI6sp.js";import"./vendor-DJG_os-6.js";const{Title:A,Paragraph:ce}=K,{Option:le}=B,ie=m.div`
  padding: 24px;
`,de=m.div`
  margin-bottom: 24px;
`,y=m(f)`
  .ant-card-body {
    padding: 16px;
  }
`,ge=m(f)`
  height: 100%;
  cursor: pointer;
  
  .ant-card-body {
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 16px;
  }
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
`,me=m.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 0;
`,xe=m.div`
  display: flex;
  flex-wrap: wrap;
  margin: -4px; /* 负边距抵消子元素的边距 */
  
  .ant-tag {
    margin: 4px !important; /* 所有方向统一4px边距，总间距为8px */
  }
`,be=()=>{const{t:a}=U(["tags","common"]),{currentTheme:ue}=Y(s=>s.theme),[F,he]=i.useState(!1),[P,h]=i.useState(!1),[T,k]=i.useState(null),[M,q]=i.useState(""),[O,E]=i.useState("all"),[c]=d.useForm();i.useEffect(()=>{ne(a("tags:title"))},[a]);const r=[{key:"1",name:"生产环境",color:"#f5222d",category:"environment",description:"标识生产环境相关的资源",usageCount:156,createdAt:"2024-06-10"},{key:"2",name:"测试环境",color:"#faad14",category:"environment",description:"标识测试环境相关的资源",usageCount:89,createdAt:"2024-06-10"},{key:"3",name:"核心业务",color:"#1890ff",category:"business",description:"标识核心业务相关的组件",usageCount:234,createdAt:"2024-06-08"},{key:"4",name:"高可用",color:"#52c41a",category:"feature",description:"标识具有高可用特性的服务",usageCount:67,createdAt:"2024-06-05"},{key:"5",name:"微服务",color:"#722ed1",category:"architecture",description:"标识微服务架构组件",usageCount:123,createdAt:"2024-06-03"},{key:"6",name:"数据库",color:"#13c2c2",category:"component",description:"标识数据库相关组件",usageCount:45,createdAt:"2024-06-01"}],x={environment:{name:"环境",icon:e.jsx(w,{}),color:"#1890ff"},business:{name:"业务",icon:e.jsx($,{}),color:"#52c41a"},feature:{name:"特性",icon:e.jsx(R,{}),color:"#faad14"},architecture:{name:"架构",icon:e.jsx(se,{}),color:"#722ed1"},component:{name:"组件",icon:e.jsx(te,{}),color:"#13c2c2"}},V=()=>{k(null),c.resetFields(),h(!0)},v=s=>{k(s),c.setFieldsValue({name:s.name,color:s.color,category:s.category,description:s.description}),h(!0)},z=s=>{b.success(a("tags:messages.deleteSuccess"))},D=async()=>{try{const s=await c.validateFields();T?b.success(a("tags:messages.updateSuccess")):b.success(a("tags:messages.createSuccess")),h(!1),c.resetFields()}catch(s){console.error("表单验证失败:",s)}},L=()=>{h(!1),c.resetFields()},H=[{title:a("tags:table.tagName"),dataIndex:"name",key:"name",render:(s,t)=>e.jsx(I,{color:t.color,children:s})},{title:a("tags:table.category"),dataIndex:"category",key:"category",render:s=>{const t=x[s];return e.jsxs(g,{children:[t==null?void 0:t.icon,e.jsx("span",{children:(t==null?void 0:t.name)||s})]})}},{title:a("tags:table.description"),dataIndex:"description",key:"description",ellipsis:!0},{title:a("tags:table.usageCount"),dataIndex:"usageCount",key:"usageCount",render:s=>e.jsx("span",{children:s})},{title:a("tags:table.createTime"),dataIndex:"createdAt",key:"createdAt"},{title:a("tags:table.actions"),key:"action",render:(s,t)=>e.jsxs(g,{children:[e.jsx(p,{type:"link",icon:e.jsx(J,{}),size:"small",onClick:()=>v(t),children:a("tags:actions.edit")}),e.jsx(_,{title:a("tags:actions.deleteConfirm"),description:a("tags:actions.deleteDescription"),onConfirm:()=>z(t.key),okText:a("common:confirm"),cancelText:a("common:cancel"),children:e.jsx(p,{type:"link",icon:e.jsx(G,{}),size:"small",danger:!0,children:a("tags:actions.delete")})})]})}],Q=()=>{const s=r.reduce((t,n)=>(t[n.category]||(t[n.category]=[]),t[n.category].push(n),t),{});return Object.entries(s).map(([t,n])=>{const l=x[t];return e.jsx(o,{xs:24,md:12,lg:8,children:e.jsxs(ge,{className:`category-${t.toLowerCase()}`,children:[e.jsxs(me,{children:[e.jsxs(g,{children:[e.jsx("span",{className:"category-icon",children:l==null?void 0:l.icon}),e.jsx(A,{level:4,style:{margin:0},children:(l==null?void 0:l.name)||t})]}),e.jsx(re,{count:n.length})]}),e.jsx(xe,{children:n.map(u=>e.jsxs(I,{color:u.color,style:{cursor:"pointer"},onClick:()=>v(u),children:[u.name," (",u.usageCount,")"]},u.key))})]})},t)})};return e.jsxs(ie,{className:"tag-management-page",children:[e.jsxs(de,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[e.jsx(A,{level:2,style:{margin:0},children:e.jsxs(g,{children:[e.jsx(S,{}),a("tags:title")]})}),e.jsxs(g,{children:[e.jsx(p,{icon:e.jsx(W,{}),children:a("common:refresh")}),e.jsx(p,{type:"primary",icon:e.jsx(X,{}),onClick:V,children:a("tags:createTag")})]})]}),e.jsx(ce,{style:{marginTop:0,marginBottom:0},children:a("tags:subtitle")})]}),e.jsxs(C,{gutter:[16,16],style:{marginBottom:24},children:[e.jsx(o,{xs:24,sm:12,md:6,children:e.jsx(y,{className:"tag-stats-primary",children:e.jsx(j,{title:a("tags:stats.totalTags"),value:r.length,prefix:e.jsx(S,{})})})}),e.jsx(o,{xs:24,sm:12,md:6,children:e.jsx(y,{className:"tag-stats-success",children:e.jsx(j,{title:a("tags:stats.categoryCount"),value:Object.keys(x).length,prefix:e.jsx(w,{})})})}),e.jsx(o,{xs:24,sm:12,md:6,children:e.jsx(y,{className:"tag-stats-warning",children:e.jsx(j,{title:a("tags:stats.totalUsage"),value:r.reduce((s,t)=>s+t.usageCount,0),prefix:e.jsx(R,{})})})}),e.jsx(o,{xs:24,sm:12,md:6,children:e.jsx(y,{className:"tag-stats-purple",children:e.jsx(j,{title:a("tags:stats.averageUsage"),value:Math.round(r.reduce((s,t)=>s+t.usageCount,0)/r.length),prefix:e.jsx($,{})})})})]}),e.jsx(f,{title:a("tags:categoryDisplay.title"),style:{marginBottom:24},children:e.jsx(C,{gutter:[16,16],children:Q()})}),e.jsx(oe,{searchValue:M,onSearchChange:q,searchPlaceholder:a("tags:search.placeholder"),filters:[{key:"category",value:O,onChange:E,placeholder:a("tags:search.category"),width:120,options:[{value:"all",label:a("tags:search.allCategories")},...Object.entries(x).map(([s,t])=>({value:s,label:t.name}))]}],onRefresh:()=>window.location.reload(),style:{marginBottom:24}}),e.jsx(f,{title:a("tags:table.title"),children:e.jsx(Z,{columns:H,dataSource:r,loading:F,pagination:{total:r.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(s,t)=>`第 ${t[0]}-${t[1]} 条，共 ${s} 条记录`}})}),e.jsx(ee,{title:a(T?"tags:editTitle":"tags:createTitle"),open:P,onOk:D,onCancel:L,width:600,children:e.jsxs(d,{form:c,layout:"vertical",initialValues:{color:"#1890ff",category:"business"},children:[e.jsx(d.Item,{name:"name",label:a("tags:form.tagName"),rules:[{required:!0,message:a("tags:form.tagNameRequired")},{max:20,message:a("validation.maxLength",{max:20})}],children:e.jsx(N,{placeholder:a("tags:form.tagNamePlaceholder")})}),e.jsxs(C,{gutter:16,children:[e.jsx(o,{span:12,children:e.jsx(d.Item,{name:"color",label:a("tags:form.color"),rules:[{required:!0,message:a("tags:form.colorRequired")}],children:e.jsx(ae,{showText:!0})})}),e.jsx(o,{span:12,children:e.jsx(d.Item,{name:"category",label:a("tags:form.category"),rules:[{required:!0,message:a("tags:form.categoryRequired")}],children:e.jsx(B,{placeholder:a("tags:form.categoryPlaceholder"),children:Object.entries(x).map(([s,t])=>e.jsx(le,{value:s,children:e.jsxs(g,{children:[t.icon,t.name]})},s))})})})]}),e.jsx(d.Item,{name:"description",label:a("tags:form.description"),rules:[{required:!0,message:a("tags:form.descriptionRequired")},{max:100,message:a("validation.maxLength",{max:100})}],children:e.jsx(N.TextArea,{rows:3,placeholder:a("tags:form.descriptionPlaceholder")})})]})})]})};export{be as default};

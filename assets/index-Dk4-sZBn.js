import{a as n,j as e}from"./react-D_ZWy-Ho.js";import{u as me,aC as d,c as pe,S as h,q as ue,B as b,ai as xe,aa as he,U as m,V as o,W as j,bl as M,K as A,Y as V,aQ as K,aF as L,az as S,a1 as C,bm as je,bg as ge,ap as ye,ax as i,a3 as u,au as P,_ as g,d as f,X as ve,aG as be,p as fe,an as Te,T as q,a8 as ke,a9 as Pe,ah as R}from"./react-dom-GpeNoQsX.js";import{s as Ie}from"./index-Daowydkz.js";import{S as Se}from"./SearchFilterBar-Lz3VU8LA.js";import"./vendor-VHja5XRA.js";import"./cytoscape-DXzeTOL3.js";import"./media-BPG7piku.js";import"./lodash-D08E6HgQ.js";import"./redux-CiqK6azd.js";import"./echarts-core-CW0Gv0IT.js";import"./antd-icons-CI4I6I7B.js";import"./dayjs-CrhenB4N.js";import"./emotion-BhZTwsuK.js";const Me=[{id:"1",name:"GPT-4 Turbo",provider:"OpenAI",modelType:"llm",version:"gpt-4-1106-preview",apiEndpoint:"https://api.openai.com/v1/chat/completions",apiKey:"sk-*********************",maxTokens:4096,temperature:.7,topP:1,frequencyPenalty:0,presencePenalty:0,status:"active",description:"models.mockData.gpt4Description",capabilities:["models.capabilities.textGeneration","models.capabilities.codeGeneration","models.capabilities.qaDialog","models.capabilities.textAnalysis","models.capabilities.translation"],pricing:{inputTokens:.01,outputTokens:.03,currency:"USD"},limits:{requestsPerMinute:500,tokensPerMinute:15e4,dailyLimit:1e6},createdBy:"models.mockData.systemAdmin",createdAt:"2024-01-15 10:30:00",lastModified:"2024-01-20 14:25:00",lastUsed:"2024-01-20 16:45:00",usageCount:15420},{id:"2",name:"Claude-3 Sonnet",provider:"Anthropic",modelType:"llm",version:"claude-3-sonnet-20240229",apiEndpoint:"https://api.anthropic.com/v1/messages",apiKey:"sk-ant-*********************",maxTokens:4096,temperature:.8,topP:1,frequencyPenalty:0,presencePenalty:0,status:"active",description:"models.mockData.claudeDescription",capabilities:["models.capabilities.textGeneration","models.capabilities.codeAnalysis","models.capabilities.logicalReasoning","models.capabilities.mathCalculation","models.capabilities.documentAnalysis"],pricing:{inputTokens:.003,outputTokens:.015,currency:"USD"},limits:{requestsPerMinute:1e3,tokensPerMinute:2e5,dailyLimit:2e6},createdBy:"models.mockData.systemAdmin",createdAt:"2024-01-10 09:15:00",lastModified:"2024-01-18 11:20:00",lastUsed:"2024-01-20 15:30:00",usageCount:8750},{id:"3",name:"Text-Embedding-3-Large",provider:"OpenAI",modelType:"embedding",version:"text-embedding-3-large",apiEndpoint:"https://api.openai.com/v1/embeddings",apiKey:"sk-*********************",maxTokens:8191,temperature:0,topP:1,frequencyPenalty:0,presencePenalty:0,status:"active",description:"models.mockData.embeddingDescription",capabilities:["models.capabilities.textEmbedding","models.capabilities.semanticSearch","models.capabilities.similarityCalculation","models.capabilities.clusterAnalysis"],pricing:{inputTokens:1e-4,outputTokens:0,currency:"USD"},limits:{requestsPerMinute:3e3,tokensPerMinute:1e6,dailyLimit:1e7},createdBy:"models.mockData.systemAdmin",createdAt:"2024-01-12 14:45:00",lastModified:"2024-01-19 16:10:00",lastUsed:"2024-01-20 17:20:00",usageCount:25680},{id:"4",name:"Gemini Pro",provider:"Google",modelType:"llm",version:"gemini-pro",apiEndpoint:"https://generativelanguage.googleapis.com/v1/models/gemini-pro:generateContent",apiKey:"AIza*********************",maxTokens:2048,temperature:.9,topP:1,frequencyPenalty:0,presencePenalty:0,status:"testing",description:"models.mockData.geminiDescription",capabilities:["models.capabilities.textGeneration","models.capabilities.multimodalUnderstanding","models.capabilities.creativeWriting","models.capabilities.codeGeneration"],pricing:{inputTokens:5e-4,outputTokens:.0015,currency:"USD"},limits:{requestsPerMinute:60,tokensPerMinute:32e3,dailyLimit:1e5},createdBy:"models.mockData.systemAdmin",createdAt:"2024-01-08 16:20:00",lastModified:"2024-01-17 13:45:00",lastUsed:"2024-01-20 12:15:00",usageCount:3240}],Ae={models:Me},{Title:qe,Paragraph:H,Text:Re}=pe,{Option:p}=C,{TextArea:Ce}=S,Be=f.div`
  padding: 24px;
`,De=f.div`
  margin-bottom: 24px;
`,I=f(g)`
  .ant-card-body {
    padding: 16px;
  }
`,ze=f(g)`
  height: 100%;
  transition: all 0.3s ease;
  cursor: pointer;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
`;f.div`
  background: #fafafa;
  padding: 16px;
  border-radius: 6px;
  margin-bottom: 16px;
`;const Xe=()=>{var U,$,F,G,O;const{t:s}=me(),[we,Ee]=n.useState(!1),[N,T]=n.useState(!1),[W,B]=n.useState(!1),[D,z]=n.useState(null),[l,Y]=n.useState(null),[Q,X]=n.useState(""),[_,J]=n.useState("all"),[Z,ee]=n.useState("all"),[se,te]=n.useState("all"),[y]=d.useForm();n.useEffect(()=>{Ie(s("models.title"))},[s]);const x=Ae.models.map(t=>({...t,description:s(t.description),capabilities:t.capabilities.map(a=>s(a)),createdBy:s(t.createdBy)})),k={OpenAI:{color:"green",icon:e.jsx(M,{})},Anthropic:{color:"blue",icon:e.jsx(fe,{})},Google:{color:"red",icon:e.jsx(be,{})},Azure:{color:"cyan",icon:e.jsx(ve,{})}},v={llm:{name:s("models.types.llm"),color:"blue",icon:e.jsx(M,{})},embedding:{name:s("models.types.embedding"),color:"green",icon:e.jsx(Te,{})},image:{name:s("models.types.image"),color:"orange",icon:e.jsx(K,{})},audio:{name:s("models.types.audio"),color:"purple",icon:e.jsx(V,{})}},w=t=>{const r={active:{color:"green",text:s("models.status.active")},inactive:{color:"red",text:s("models.status.inactive")},testing:{color:"orange",text:s("models.status.testing")}}[t];return e.jsx(u,{color:r.color,children:r.text})},le=()=>{z(null),y.resetFields(),T(!0)},ie=t=>{z(t),y.setFieldsValue({name:t.name,provider:t.provider,modelType:t.modelType,version:t.version,apiEndpoint:t.apiEndpoint,maxTokens:t.maxTokens,temperature:t.temperature,description:t.description}),T(!0)},E=t=>{Y(t),B(!0)},ae=t=>{R.success(s("models.alerts.testSuccess"))},oe=async()=>{try{const t=await y.validateFields();D?R.success(s("models.alerts.updateSuccess")):R.success(s("models.alerts.createSuccess")),T(!1),y.resetFields()}catch(t){console.error("表单验证失败:",t)}},re=()=>x.map(t=>{const a=k[t.provider],r=v[t.modelType];return e.jsx(o,{xs:24,sm:12,lg:8,xl:6,children:e.jsxs(ze,{title:e.jsxs(h,{children:[a==null?void 0:a.icon,e.jsx("span",{children:t.name}),w(t.status)]}),extra:e.jsxs(h,{children:[e.jsx(q,{title:s("models.testConnection"),children:e.jsx(b,{type:"link",icon:e.jsx(A,{}),size:"small",onClick:c=>{c.stopPropagation(),ae(t.id)}})}),e.jsx(q,{title:s("models.viewDetails"),children:e.jsx(b,{type:"link",icon:e.jsx(ke,{}),size:"small",onClick:c=>{c.stopPropagation(),E(t)}})}),e.jsx(q,{title:s("common.edit"),children:e.jsx(b,{type:"link",icon:e.jsx(Pe,{}),size:"small",onClick:c=>{c.stopPropagation(),ie(t)}})})]}),onClick:()=>E(t),children:[e.jsx("div",{style:{marginBottom:12},children:e.jsxs(h,{wrap:!0,children:[e.jsx(u,{color:a==null?void 0:a.color,icon:a==null?void 0:a.icon,children:t.provider}),e.jsx(u,{color:r==null?void 0:r.color,icon:r==null?void 0:r.icon,children:r==null?void 0:r.name})]})}),e.jsx(H,{ellipsis:{rows:2},style:{marginBottom:16,minHeight:40},children:t.description}),e.jsx("div",{style:{marginBottom:12},children:e.jsxs(m,{gutter:16,children:[e.jsx(o,{span:12,children:e.jsx(j,{title:s("models.stats.usageCount"),value:t.usageCount,valueStyle:{fontSize:14}})}),e.jsx(o,{span:12,children:e.jsx(j,{title:s("models.stats.maxTokens"),value:t.maxTokens,valueStyle:{fontSize:14}})})]})}),e.jsx("div",{style:{marginBottom:12},children:e.jsxs(h,{wrap:!0,children:[t.capabilities.slice(0,3).map(c=>e.jsx(u,{size:"small",children:c},c)),t.capabilities.length>3&&e.jsxs(u,{size:"small",children:["+",t.capabilities.length-3]})]})}),e.jsxs("div",{style:{fontSize:12,color:"#666"},children:[e.jsxs("div",{children:[s("models.stats.version"),": ",t.version]}),e.jsxs("div",{children:[s("models.stats.lastUsed"),": ",t.lastUsed]})]})]})},t.id)}),ne=x.filter(t=>t.status==="active").length,de=x.reduce((t,a)=>t+a.usageCount,0),ce=x.reduce((t,a)=>t+a.temperature,0)/x.length;return e.jsxs(Be,{children:[e.jsx(De,{children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx(qe,{className:"page-title",level:2,style:{margin:0},children:e.jsxs(h,{children:[e.jsx(ue,{}),s("systemSettings.models.title")]})}),e.jsx(H,{style:{marginTop:8,marginBottom:0,fontSize:16},children:s("systemSettings.models.subtitle")})]}),e.jsxs(h,{children:[e.jsx(b,{icon:e.jsx(xe,{}),children:s("common.refresh")}),e.jsx(b,{type:"primary",icon:e.jsx(he,{}),onClick:le,children:s("systemSettings.models.addModel")})]})]})}),e.jsxs(m,{gutter:16,style:{marginBottom:24},children:[e.jsx(o,{xs:24,sm:12,md:6,children:e.jsx(I,{children:e.jsx(j,{title:s("models.stats.totalModels"),value:x.length,suffix:s("models.stats.unit"),valueStyle:{color:"#1890ff"},prefix:e.jsx(M,{})})})}),e.jsx(o,{xs:24,sm:12,md:6,children:e.jsx(I,{children:e.jsx(j,{title:s("models.stats.activeModels"),value:ne,suffix:s("models.stats.unit"),valueStyle:{color:"#52c41a"},prefix:e.jsx(A,{})})})}),e.jsx(o,{xs:24,sm:12,md:6,children:e.jsx(I,{children:e.jsx(j,{title:s("models.stats.totalUsage"),value:de,valueStyle:{color:"#faad14"},prefix:e.jsx(V,{})})})}),e.jsx(o,{xs:24,sm:12,md:6,children:e.jsx(I,{children:e.jsx(j,{title:s("models.stats.avgTemperature"),value:ce.toFixed(1),valueStyle:{color:"#722ed1"},prefix:e.jsx(K,{})})})})]}),e.jsx(Se,{searchValue:Q,onSearchChange:X,searchPlaceholder:s("models.searchPlaceholder"),filters:[{key:"provider",value:_,onChange:J,placeholder:s("models.filterByProvider"),width:120,options:[{value:"all",label:s("models.providers.all")},...Object.entries(k).map(([t,a])=>({value:t,label:s(`models.providers.${t}`)}))]},{key:"type",value:Z,onChange:ee,placeholder:s("models.filterByType"),width:120,options:[{value:"all",label:s("common.all")},...Object.entries(v).map(([t,a])=>({value:t,label:a.name}))]},{key:"status",value:se,onChange:te,placeholder:s("models.filterByStatus"),width:100,options:[{value:"all",label:s("common.all")},{value:"active",label:s("models.status.active")},{value:"inactive",label:s("models.status.inactive")},{value:"testing",label:s("models.status.testing")}]}],onRefresh:()=>window.location.reload()}),e.jsx(m,{gutter:16,children:re()}),e.jsx(L,{title:s(D?"models.editModel":"models.createModel"),open:N,onOk:oe,onCancel:()=>T(!1),width:800,children:e.jsxs(d,{form:y,layout:"vertical",initialValues:{temperature:.7,topP:1,maxTokens:4096},children:[e.jsxs(m,{gutter:16,children:[e.jsx(o,{span:12,children:e.jsx(d.Item,{name:"name",label:s("models.form.name"),rules:[{required:!0,message:s("models.form.nameRequired")}],children:e.jsx(S,{placeholder:s("models.form.namePlaceholder")})})}),e.jsx(o,{span:12,children:e.jsx(d.Item,{name:"provider",label:s("models.form.provider"),rules:[{required:!0,message:s("models.form.providerRequired")}],children:e.jsxs(C,{placeholder:s("models.form.providerPlaceholder"),children:[e.jsx(p,{value:"OpenAI",children:s("models.providers.OpenAI")}),e.jsx(p,{value:"Anthropic",children:s("models.providers.Anthropic")}),e.jsx(p,{value:"Google",children:s("models.providers.Google")}),e.jsx(p,{value:"Azure",children:s("models.providers.Azure")})]})})})]}),e.jsxs(m,{gutter:16,children:[e.jsx(o,{span:12,children:e.jsx(d.Item,{name:"modelType",label:s("models.form.modelType"),rules:[{required:!0,message:s("models.form.typeRequired")}],children:e.jsxs(C,{placeholder:s("models.form.typePlaceholder"),children:[e.jsx(p,{value:"llm",children:s("models.types.llm")}),e.jsx(p,{value:"embedding",children:s("models.types.embedding")}),e.jsx(p,{value:"image",children:s("models.types.image")}),e.jsx(p,{value:"audio",children:s("models.types.audio")})]})})}),e.jsx(o,{span:12,children:e.jsx(d.Item,{name:"version",label:s("models.form.version"),rules:[{required:!0,message:s("models.form.versionRequired")}],children:e.jsx(S,{placeholder:s("models.form.versionPlaceholder")})})})]}),e.jsx(d.Item,{name:"apiEndpoint",label:s("models.form.apiEndpoint"),rules:[{required:!0,message:s("models.form.endpointRequired")}],children:e.jsx(S,{placeholder:s("models.form.endpointPlaceholder")})}),e.jsxs(m,{gutter:16,children:[e.jsx(o,{span:12,children:e.jsx(d.Item,{name:"maxTokens",label:s("models.form.maxTokens"),rules:[{required:!0,message:s("models.form.maxTokensRequired")}],children:e.jsx(je,{min:1,max:128e3,style:{width:"100%"},placeholder:s("models.form.maxTokensPlaceholder")})})}),e.jsx(o,{span:12,children:e.jsx(d.Item,{name:"temperature",label:s("models.form.temperature"),rules:[{required:!0,message:s("models.form.temperatureRequired")}],children:e.jsx(ge,{min:0,max:2,step:.1,marks:{0:"0",1:"1",2:"2"}})})})]}),e.jsx(d.Item,{name:"description",label:s("models.form.description"),rules:[{required:!0,message:s("models.form.descriptionRequired")}],children:e.jsx(Ce,{rows:3,placeholder:s("models.form.descriptionPlaceholder")})}),e.jsx(ye,{message:"提示",description:"API密钥等敏感信息将在保存后进行加密存储，请确保API端点的正确性。",type:"info",showIcon:!0,style:{marginTop:16}})]})}),e.jsx(L,{title:l==null?void 0:l.name,open:W,onCancel:()=>B(!1),footer:null,width:1e3,style:{top:20},children:l&&e.jsxs("div",{children:[e.jsxs(i,{bordered:!0,column:2,style:{marginBottom:24},children:[e.jsx(i.Item,{label:s("models.detail.name"),span:2,children:l.name}),e.jsx(i.Item,{label:s("models.detail.provider"),children:e.jsx(u,{color:(U=k[l.provider])==null?void 0:U.color,icon:($=k[l.provider])==null?void 0:$.icon,children:l.provider})}),e.jsx(i.Item,{label:s("models.detail.type"),children:e.jsx(u,{color:(F=v[l.modelType])==null?void 0:F.color,icon:(G=v[l.modelType])==null?void 0:G.icon,children:(O=v[l.modelType])==null?void 0:O.name})}),e.jsx(i.Item,{label:s("models.detail.version"),children:l.version}),e.jsx(i.Item,{label:s("models.detail.status"),children:w(l.status)}),e.jsx(i.Item,{label:s("models.detail.apiEndpoint"),span:2,children:e.jsx(Re,{code:!0,children:l.apiEndpoint})}),e.jsxs(i.Item,{label:s("models.detail.usageCount"),children:[l.usageCount,s("models.stats.requestUnit")]}),e.jsx(i.Item,{label:s("models.detail.lastUsed"),children:l.lastUsed}),e.jsx(i.Item,{label:s("models.detail.createdBy"),children:l.createdBy}),e.jsx(i.Item,{label:s("models.detail.createdAt"),children:l.createdAt}),e.jsx(i.Item,{label:s("models.detail.description"),span:2,children:l.description})]}),e.jsxs(P,{defaultActiveKey:"parameters",children:[e.jsx(P.TabPane,{tab:s("models.detail.parameters"),children:e.jsxs(m,{gutter:16,children:[e.jsx(o,{span:12,children:e.jsx(g,{title:s("models.detail.parameters"),size:"small",children:e.jsxs(i,{column:1,size:"small",children:[e.jsx(i.Item,{label:s("models.detail.maxTokens"),children:l.maxTokens}),e.jsx(i.Item,{label:s("models.detail.temperature"),children:l.temperature}),e.jsx(i.Item,{label:s("models.detail.topP"),children:l.topP}),e.jsx(i.Item,{label:s("models.detail.frequencyPenalty"),children:l.frequencyPenalty}),e.jsx(i.Item,{label:s("models.detail.presencePenalty"),children:l.presencePenalty})]})})}),e.jsx(o,{span:12,children:e.jsx(g,{title:s("models.detail.limits"),size:"small",children:e.jsxs(i,{column:1,size:"small",children:[e.jsx(i.Item,{label:s("models.detail.requestsPerMinute"),children:l.limits.requestsPerMinute}),e.jsx(i.Item,{label:s("models.detail.tokensPerMinute"),children:l.limits.tokensPerMinute}),e.jsx(i.Item,{label:s("models.detail.dailyLimit"),children:l.limits.dailyLimit})]})})})]})},"parameters"),e.jsx(P.TabPane,{tab:s("models.detail.capabilities"),children:e.jsx(m,{gutter:16,children:l.capabilities.map(t=>e.jsx(o,{xs:24,sm:12,lg:8,children:e.jsx(g,{size:"small",style:{marginBottom:16},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(A,{style:{color:"#52c41a",fontSize:24,marginBottom:8}}),e.jsx("div",{children:t})]})})},t))})},"capabilities"),e.jsx(P.TabPane,{tab:s("models.detail.pricing"),children:e.jsx(g,{title:s("models.detail.pricingDetails"),size:"small",children:e.jsxs(i,{column:2,size:"small",children:[e.jsxs(i.Item,{label:s("models.detail.inputTokenPrice"),children:["$",l.pricing.inputTokens," / 1K tokens"]}),e.jsxs(i.Item,{label:s("models.detail.outputTokenPrice"),children:["$",l.pricing.outputTokens," / 1K tokens"]}),e.jsx(i.Item,{label:s("models.detail.currency"),children:l.pricing.currency})]})})},"pricing")]})]})})]})};export{Xe as default};

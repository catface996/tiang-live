import{b as Y,d as C}from"./transform-CtUPqxAi.js";function yt(t,n){var e,o=1;t==null&&(t=0),n==null&&(n=0);function a(){var r,l=e.length,c,_=0,f=0;for(r=0;r<l;++r)c=e[r],_+=c.x,f+=c.y;for(_=(_/l-t)*o,f=(f/l-n)*o,r=0;r<l;++r)c=e[r],c.x-=_,c.y-=f}return a.initialize=function(r){e=r},a.x=function(r){return arguments.length?(t=+r,a):t},a.y=function(r){return arguments.length?(n=+r,a):n},a.strength=function(r){return arguments.length?(o=+r,a):o},a}function G(t){const n=+this._x.call(null,t),e=+this._y.call(null,t);return X(this.cover(n,e),n,e,t)}function X(t,n,e,o){if(isNaN(n)||isNaN(e))return t;var a,r=t._root,l={data:o},c=t._x0,_=t._y0,f=t._x1,y=t._y1,w,x,h,p,u,i,s,g;if(!r)return t._root=l,t;for(;r.length;)if((u=n>=(w=(c+f)/2))?c=w:f=w,(i=e>=(x=(_+y)/2))?_=x:y=x,a=r,!(r=r[s=i<<1|u]))return a[s]=l,t;if(h=+t._x.call(null,r.data),p=+t._y.call(null,r.data),n===h&&e===p)return l.next=r,a?a[s]=l:t._root=l,t;do a=a?a[s]=new Array(4):t._root=new Array(4),(u=n>=(w=(c+f)/2))?c=w:f=w,(i=e>=(x=(_+y)/2))?_=x:y=x;while((s=i<<1|u)===(g=(p>=x)<<1|h>=w));return a[g]=r,a[s]=l,t}function H(t){var n,e,o=t.length,a,r,l=new Array(o),c=new Array(o),_=1/0,f=1/0,y=-1/0,w=-1/0;for(e=0;e<o;++e)isNaN(a=+this._x.call(null,n=t[e]))||isNaN(r=+this._y.call(null,n))||(l[e]=a,c[e]=r,a<_&&(_=a),a>y&&(y=a),r<f&&(f=r),r>w&&(w=r));if(_>y||f>w)return this;for(this.cover(_,f).cover(y,w),e=0;e<o;++e)X(this,l[e],c[e],t[e]);return this}function J(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,o=this._y0,a=this._x1,r=this._y1;if(isNaN(e))a=(e=Math.floor(t))+1,r=(o=Math.floor(n))+1;else{for(var l=a-e||1,c=this._root,_,f;e>t||t>=a||o>n||n>=r;)switch(f=(n<o)<<1|t<e,_=new Array(4),_[f]=c,c=_,l*=2,f){case 0:a=e+l,r=o+l;break;case 1:e=a-l,r=o+l;break;case 2:a=e+l,o=r-l;break;case 3:e=a-l,o=r-l;break}this._root&&this._root.length&&(this._root=c)}return this._x0=e,this._y0=o,this._x1=a,this._y1=r,this}function K(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function L(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function z(t,n,e,o,a){this.node=t,this.x0=n,this.y0=e,this.x1=o,this.y1=a}function O(t,n,e){var o,a=this._x0,r=this._y0,l,c,_,f,y=this._x1,w=this._y1,x=[],h=this._root,p,u;for(h&&x.push(new z(h,a,r,y,w)),e==null?e=1/0:(a=t-e,r=n-e,y=t+e,w=n+e,e*=e);p=x.pop();)if(!(!(h=p.node)||(l=p.x0)>y||(c=p.y0)>w||(_=p.x1)<a||(f=p.y1)<r))if(h.length){var i=(l+_)/2,s=(c+f)/2;x.push(new z(h[3],i,s,_,f),new z(h[2],l,s,i,f),new z(h[1],i,c,_,s),new z(h[0],l,c,i,s)),(u=(n>=s)<<1|t>=i)&&(p=x[x.length-1],x[x.length-1]=x[x.length-1-u],x[x.length-1-u]=p)}else{var g=t-+this._x.call(null,h.data),d=n-+this._y.call(null,h.data),v=g*g+d*d;if(v<e){var N=Math.sqrt(e=v);a=t-N,r=n-N,y=t+N,w=n+N,o=h.data}}return o}function U(t){if(isNaN(y=+this._x.call(null,t))||isNaN(w=+this._y.call(null,t)))return this;var n,e=this._root,o,a,r,l=this._x0,c=this._y0,_=this._x1,f=this._y1,y,w,x,h,p,u,i,s;if(!e)return this;if(e.length)for(;;){if((p=y>=(x=(l+_)/2))?l=x:_=x,(u=w>=(h=(c+f)/2))?c=h:f=h,n=e,!(e=e[i=u<<1|p]))return this;if(!e.length)break;(n[i+1&3]||n[i+2&3]||n[i+3&3])&&(o=n,s=i)}for(;e.data!==t;)if(a=e,!(e=e.next))return this;return(r=e.next)&&delete e.next,a?(r?a.next=r:delete a.next,this):n?(r?n[i]=r:delete n[i],(e=n[0]||n[1]||n[2]||n[3])&&e===(n[3]||n[2]||n[1]||n[0])&&!e.length&&(o?o[s]=e:this._root=e),this):(this._root=r,this)}function V(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this}function W(){return this._root}function Z(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function q(t){var n=[],e,o=this._root,a,r,l,c,_;for(o&&n.push(new z(o,this._x0,this._y0,this._x1,this._y1));e=n.pop();)if(!t(o=e.node,r=e.x0,l=e.y0,c=e.x1,_=e.y1)&&o.length){var f=(r+c)/2,y=(l+_)/2;(a=o[3])&&n.push(new z(a,f,y,c,_)),(a=o[2])&&n.push(new z(a,r,y,f,_)),(a=o[1])&&n.push(new z(a,f,l,c,y)),(a=o[0])&&n.push(new z(a,r,l,f,y))}return this}function k(t){var n=[],e=[],o;for(this._root&&n.push(new z(this._root,this._x0,this._y0,this._x1,this._y1));o=n.pop();){var a=o.node;if(a.length){var r,l=o.x0,c=o.y0,_=o.x1,f=o.y1,y=(l+_)/2,w=(c+f)/2;(r=a[0])&&n.push(new z(r,l,c,y,w)),(r=a[1])&&n.push(new z(r,y,c,_,w)),(r=a[2])&&n.push(new z(r,l,w,y,f)),(r=a[3])&&n.push(new z(r,y,w,_,f))}e.push(o)}for(;o=e.pop();)t(o.node,o.x0,o.y0,o.x1,o.y1);return this}function tt(t){return t[0]}function nt(t){return arguments.length?(this._x=t,this):this._x}function et(t){return t[1]}function it(t){return arguments.length?(this._y=t,this):this._y}function Q(t,n,e){var o=new T(n??tt,e??et,NaN,NaN,NaN,NaN);return t==null?o:o.addAll(t)}function T(t,n,e,o,a,r){this._x=t,this._y=n,this._x0=e,this._y0=o,this._x1=a,this._y1=r,this._root=void 0}function $(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var b=Q.prototype=T.prototype;b.copy=function(){var t=new T(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,e,o;if(!n)return t;if(!n.length)return t._root=$(n),t;for(e=[{source:n,target:t._root=new Array(4)}];n=e.pop();)for(var a=0;a<4;++a)(o=n.source[a])&&(o.length?e.push({source:o,target:n.target[a]=new Array(4)}):n.target[a]=$(o));return t};b.add=G;b.addAll=H;b.cover=J;b.data=K;b.extent=L;b.find=O;b.remove=U;b.removeAll=V;b.root=W;b.size=Z;b.visit=q;b.visitAfter=k;b.x=nt;b.y=it;function P(t){return function(){return t}}function B(t){return(t()-.5)*1e-6}function rt(t){return t.x+t.vx}function ft(t){return t.y+t.vy}function xt(t){var n,e,o,a=1,r=1;typeof t!="function"&&(t=P(t==null?1:+t));function l(){for(var f,y=n.length,w,x,h,p,u,i,s=0;s<r;++s)for(w=Q(n,rt,ft).visitAfter(c),f=0;f<y;++f)x=n[f],u=e[x.index],i=u*u,h=x.x+x.vx,p=x.y+x.vy,w.visit(g);function g(d,v,N,A,I){var m=d.data,j=d.r,M=u+j;if(m){if(m.index>x.index){var E=h-m.x-m.vx,S=p-m.y-m.vy,D=E*E+S*S;D<M*M&&(E===0&&(E=B(o),D+=E*E),S===0&&(S=B(o),D+=S*S),D=(M-(D=Math.sqrt(D)))/D*a,x.vx+=(E*=D)*(M=(j*=j)/(i+j)),x.vy+=(S*=D)*M,m.vx-=E*(M=1-M),m.vy-=S*M)}return}return v>h+M||A<h-M||N>p+M||I<p-M}}function c(f){if(f.data)return f.r=e[f.data.index];for(var y=f.r=0;y<4;++y)f[y]&&f[y].r>f.r&&(f.r=f[y].r)}function _(){if(n){var f,y=n.length,w;for(e=new Array(y),f=0;f<y;++f)w=n[f],e[w.index]=+t(w,f,n)}}return l.initialize=function(f,y){n=f,o=y,_()},l.iterations=function(f){return arguments.length?(r=+f,l):r},l.strength=function(f){return arguments.length?(a=+f,l):a},l.radius=function(f){return arguments.length?(t=typeof f=="function"?f:P(+f),_(),l):t},l}function at(t){return t.index}function F(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}function _t(t){var n=at,e=w,o,a=P(30),r,l,c,_,f,y=1;t==null&&(t=[]);function w(i){return 1/Math.min(c[i.source.index],c[i.target.index])}function x(i){for(var s=0,g=t.length;s<y;++s)for(var d=0,v,N,A,I,m,j,M;d<g;++d)v=t[d],N=v.source,A=v.target,I=A.x+A.vx-N.x-N.vx||B(f),m=A.y+A.vy-N.y-N.vy||B(f),j=Math.sqrt(I*I+m*m),j=(j-r[d])/j*i*o[d],I*=j,m*=j,A.vx-=I*(M=_[d]),A.vy-=m*M,N.vx+=I*(M=1-M),N.vy+=m*M}function h(){if(l){var i,s=l.length,g=t.length,d=new Map(l.map((N,A)=>[n(N,A,l),N])),v;for(i=0,c=new Array(s);i<g;++i)v=t[i],v.index=i,typeof v.source!="object"&&(v.source=F(d,v.source)),typeof v.target!="object"&&(v.target=F(d,v.target)),c[v.source.index]=(c[v.source.index]||0)+1,c[v.target.index]=(c[v.target.index]||0)+1;for(i=0,_=new Array(g);i<g;++i)v=t[i],_[i]=c[v.source.index]/(c[v.source.index]+c[v.target.index]);o=new Array(g),p(),r=new Array(g),u()}}function p(){if(l)for(var i=0,s=t.length;i<s;++i)o[i]=+e(t[i],i,t)}function u(){if(l)for(var i=0,s=t.length;i<s;++i)r[i]=+a(t[i],i,t)}return x.initialize=function(i,s){l=i,f=s,h()},x.links=function(i){return arguments.length?(t=i,h(),x):t},x.id=function(i){return arguments.length?(n=i,x):n},x.iterations=function(i){return arguments.length?(y=+i,x):y},x.strength=function(i){return arguments.length?(e=typeof i=="function"?i:P(+i),p(),x):e},x.distance=function(i){return arguments.length?(a=typeof i=="function"?i:P(+i),u(),x):a},x}const ot=1664525,ut=1013904223,R=4294967296;function ht(){let t=1;return()=>(t=(ot*t+ut)%R)/R}function st(t){return t.x}function lt(t){return t.y}var ct=10,gt=Math.PI*(3-Math.sqrt(5));function pt(t){var n,e=1,o=.001,a=1-Math.pow(o,1/300),r=0,l=.6,c=new Map,_=Y(w),f=C("tick","end"),y=ht();t==null&&(t=[]);function w(){x(),f.call("tick",n),e<o&&(_.stop(),f.call("end",n))}function x(u){var i,s=t.length,g;u===void 0&&(u=1);for(var d=0;d<u;++d)for(e+=(r-e)*a,c.forEach(function(v){v(e)}),i=0;i<s;++i)g=t[i],g.fx==null?g.x+=g.vx*=l:(g.x=g.fx,g.vx=0),g.fy==null?g.y+=g.vy*=l:(g.y=g.fy,g.vy=0);return n}function h(){for(var u=0,i=t.length,s;u<i;++u){if(s=t[u],s.index=u,s.fx!=null&&(s.x=s.fx),s.fy!=null&&(s.y=s.fy),isNaN(s.x)||isNaN(s.y)){var g=ct*Math.sqrt(.5+u),d=u*gt;s.x=g*Math.cos(d),s.y=g*Math.sin(d)}(isNaN(s.vx)||isNaN(s.vy))&&(s.vx=s.vy=0)}}function p(u){return u.initialize&&u.initialize(t,y),u}return h(),n={tick:x,restart:function(){return _.restart(w),n},stop:function(){return _.stop(),n},nodes:function(u){return arguments.length?(t=u,h(),c.forEach(p),n):t},alpha:function(u){return arguments.length?(e=+u,n):e},alphaMin:function(u){return arguments.length?(o=+u,n):o},alphaDecay:function(u){return arguments.length?(a=+u,n):+a},alphaTarget:function(u){return arguments.length?(r=+u,n):r},velocityDecay:function(u){return arguments.length?(l=1-u,n):1-l},randomSource:function(u){return arguments.length?(y=u,c.forEach(p),n):y},force:function(u,i){return arguments.length>1?(i==null?c.delete(u):c.set(u,p(i)),n):c.get(u)},find:function(u,i,s){var g=0,d=t.length,v,N,A,I,m;for(s==null?s=1/0:s*=s,g=0;g<d;++g)I=t[g],v=u-I.x,N=i-I.y,A=v*v+N*N,A<s&&(m=I,s=A);return m},on:function(u,i){return arguments.length>1?(f.on(u,i),n):f.on(u)}}}function wt(){var t,n,e,o,a=P(-30),r,l=1,c=1/0,_=.81;function f(h){var p,u=t.length,i=Q(t,st,lt).visitAfter(w);for(o=h,p=0;p<u;++p)n=t[p],i.visit(x)}function y(){if(t){var h,p=t.length,u;for(r=new Array(p),h=0;h<p;++h)u=t[h],r[u.index]=+a(u,h,t)}}function w(h){var p=0,u,i,s=0,g,d,v;if(h.length){for(g=d=v=0;v<4;++v)(u=h[v])&&(i=Math.abs(u.value))&&(p+=u.value,s+=i,g+=i*u.x,d+=i*u.y);h.x=g/s,h.y=d/s}else{u=h,u.x=u.data.x,u.y=u.data.y;do p+=r[u.data.index];while(u=u.next)}h.value=p}function x(h,p,u,i){if(!h.value)return!0;var s=h.x-n.x,g=h.y-n.y,d=i-p,v=s*s+g*g;if(d*d/_<v)return v<c&&(s===0&&(s=B(e),v+=s*s),g===0&&(g=B(e),v+=g*g),v<l&&(v=Math.sqrt(l*v)),n.vx+=s*h.value*o/v,n.vy+=g*h.value*o/v),!0;if(h.length||v>=c)return;(h.data!==n||h.next)&&(s===0&&(s=B(e),v+=s*s),g===0&&(g=B(e),v+=g*g),v<l&&(v=Math.sqrt(l*v)));do h.data!==n&&(d=r[h.data.index]*o/v,n.vx+=s*d,n.vy+=g*d);while(h=h.next)}return f.initialize=function(h,p){t=h,e=p,y()},f.strength=function(h){return arguments.length?(a=typeof h=="function"?h:P(+h),y(),f):a},f.distanceMin=function(h){return arguments.length?(l=h*h,f):Math.sqrt(l)},f.distanceMax=function(h){return arguments.length?(c=h*h,f):Math.sqrt(c)},f.theta=function(h){return arguments.length?(_=h*h,f):Math.sqrt(_)},f}export{xt as a,yt as c,_t as l,wt as m,pt as s};

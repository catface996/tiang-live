import{s as G,d as Z,t as nt}from"./transform-DnhttqEe.js";function et(t){let n;for(;n=t.sourceEvent;)t=n;return t}function O(t,n){if(t=et(t),n===void 0&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]}if(n.getBoundingClientRect){var a=n.getBoundingClientRect();return[t.clientX-a.left-n.clientLeft,t.clientY-a.top-n.clientTop]}}return[t.pageX,t.pageY]}const rt={passive:!1},Y={capture:!0,passive:!1};function V(t){t.stopImmediatePropagation()}function X(t){t.preventDefault(),t.stopImmediatePropagation()}function it(t){var n=t.document.documentElement,e=G(t).on("dragstart.drag",X,Y);"onselectstart"in n?e.on("selectstart.drag",X,Y):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function ut(t,n){var e=t.document.documentElement,i=G(t).on("dragstart.drag",null);n&&(i.on("click.drag",X,Y),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in e?i.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const C=t=>()=>t;function $(t,{sourceEvent:n,subject:e,target:i,identifier:a,active:f,x:h,y:v,dx:p,dy:o,dispatch:y}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:f,enumerable:!0,configurable:!0},x:{value:h,enumerable:!0,configurable:!0},y:{value:v,enumerable:!0,configurable:!0},dx:{value:p,enumerable:!0,configurable:!0},dy:{value:o,enumerable:!0,configurable:!0},_:{value:y}})}$.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function at(t){return!t.ctrlKey&&!t.button}function ot(){return this.parentNode}function st(t,n){return n??{x:t.x,y:t.y}}function ft(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ct(){var t=at,n=ot,e=st,i=ft,a={},f=Z("start","drag","end"),h=0,v,p,o,y,m=0;function g(r){r.on("mousedown.drag",l).filter(i).on("touchstart.drag",u).on("touchmove.drag",c,rt).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(r,_){if(!(y||!t.call(this,r,_))){var b=w(this,n.call(this,r,_),r,_,"mouse");b&&(G(r.view).on("mousemove.drag",d,Y).on("mouseup.drag",s,Y),it(r.view),V(r),o=!1,v=r.clientX,p=r.clientY,b("start",r))}}function d(r){if(X(r),!o){var _=r.clientX-v,b=r.clientY-p;o=_*_+b*b>m}a.mouse("drag",r)}function s(r){G(r.view).on("mousemove.drag mouseup.drag",null),ut(r.view,o),X(r),a.mouse("end",r)}function u(r,_){if(t.call(this,r,_)){var b=r.changedTouches,M=n.call(this,r,_),N=b.length,E,A;for(E=0;E<N;++E)(A=w(this,M,r,_,b[E].identifier,b[E]))&&(V(r),A("start",r,b[E]))}}function c(r){var _=r.changedTouches,b=_.length,M,N;for(M=0;M<b;++M)(N=a[_[M].identifier])&&(X(r),N("drag",r,_[M]))}function x(r){var _=r.changedTouches,b=_.length,M,N;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),M=0;M<b;++M)(N=a[_[M].identifier])&&(V(r),N("end",r,_[M]))}function w(r,_,b,M,N,E){var A=f.copy(),T=O(E||b,_),D,S,B;if((B=e.call(r,new $("beforestart",{sourceEvent:b,target:g,identifier:N,active:h,x:T[0],y:T[1],dx:0,dy:0,dispatch:A}),M))!=null)return D=B.x-T[0]||0,S=B.y-T[1]||0,function q(R,K,tt){var L=T,U;switch(R){case"start":a[N]=q,U=h++;break;case"end":delete a[N],--h;case"drag":T=O(tt||K,_),U=h;break}A.call(R,r,new $(R,{sourceEvent:K,subject:B,target:g,identifier:N,active:U,x:T[0]+D,y:T[1]+S,dx:T[0]-L[0],dy:T[1]-L[1],dispatch:A}),M)}}return g.filter=function(r){return arguments.length?(t=typeof r=="function"?r:C(!!r),g):t},g.container=function(r){return arguments.length?(n=typeof r=="function"?r:C(r),g):n},g.subject=function(r){return arguments.length?(e=typeof r=="function"?r:C(r),g):e},g.touchable=function(r){return arguments.length?(i=typeof r=="function"?r:C(!!r),g):i},g.on=function(){var r=f.on.apply(f,arguments);return r===f?g:r},g.clickDistance=function(r){return arguments.length?(m=(r=+r)*r,g):Math.sqrt(m)},g}function lt(t){const n=+this._x.call(null,t),e=+this._y.call(null,t);return k(this.cover(n,e),n,e,t)}function k(t,n,e,i){if(isNaN(n)||isNaN(e))return t;var a,f=t._root,h={data:i},v=t._x0,p=t._y0,o=t._x1,y=t._y1,m,g,l,d,s,u,c,x;if(!f)return t._root=h,t;for(;f.length;)if((s=n>=(m=(v+o)/2))?v=m:o=m,(u=e>=(g=(p+y)/2))?p=g:y=g,a=f,!(f=f[c=u<<1|s]))return a[c]=h,t;if(l=+t._x.call(null,f.data),d=+t._y.call(null,f.data),n===l&&e===d)return h.next=f,a?a[c]=h:t._root=h,t;do a=a?a[c]=new Array(4):t._root=new Array(4),(s=n>=(m=(v+o)/2))?v=m:o=m,(u=e>=(g=(p+y)/2))?p=g:y=g;while((c=u<<1|s)===(x=(d>=g)<<1|l>=m));return a[x]=f,a[c]=h,t}function ct(t){var n,e,i=t.length,a,f,h=new Array(i),v=new Array(i),p=1/0,o=1/0,y=-1/0,m=-1/0;for(e=0;e<i;++e)isNaN(a=+this._x.call(null,n=t[e]))||isNaN(f=+this._y.call(null,n))||(h[e]=a,v[e]=f,a<p&&(p=a),a>y&&(y=a),f<o&&(o=f),f>m&&(m=f));if(p>y||o>m)return this;for(this.cover(p,o).cover(y,m),e=0;e<i;++e)k(this,h[e],v[e],t[e]);return this}function ht(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,i=this._y0,a=this._x1,f=this._y1;if(isNaN(e))a=(e=Math.floor(t))+1,f=(i=Math.floor(n))+1;else{for(var h=a-e||1,v=this._root,p,o;e>t||t>=a||i>n||n>=f;)switch(o=(n<i)<<1|t<e,p=new Array(4),p[o]=v,v=p,h*=2,o){case 0:a=e+h,f=i+h;break;case 1:e=a-h,f=i+h;break;case 2:a=e+h,i=f-h;break;case 3:e=a-h,i=f-h;break}this._root&&this._root.length&&(this._root=v)}return this._x0=e,this._y0=i,this._x1=a,this._y1=f,this}function gt(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function yt(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function j(t,n,e,i,a){this.node=t,this.x0=n,this.y0=e,this.x1=i,this.y1=a}function vt(t,n,e){var i,a=this._x0,f=this._y0,h,v,p,o,y=this._x1,m=this._y1,g=[],l=this._root,d,s;for(l&&g.push(new j(l,a,f,y,m)),e==null?e=1/0:(a=t-e,f=n-e,y=t+e,m=n+e,e*=e);d=g.pop();)if(!(!(l=d.node)||(h=d.x0)>y||(v=d.y0)>m||(p=d.x1)<a||(o=d.y1)<f))if(l.length){var u=(h+p)/2,c=(v+o)/2;g.push(new j(l[3],u,c,p,o),new j(l[2],h,c,u,o),new j(l[1],u,v,p,c),new j(l[0],h,v,u,c)),(s=(n>=c)<<1|t>=u)&&(d=g[g.length-1],g[g.length-1]=g[g.length-1-s],g[g.length-1-s]=d)}else{var x=t-+this._x.call(null,l.data),w=n-+this._y.call(null,l.data),r=x*x+w*w;if(r<e){var _=Math.sqrt(e=r);a=t-_,f=n-_,y=t+_,m=n+_,i=l.data}}return i}function xt(t){if(isNaN(y=+this._x.call(null,t))||isNaN(m=+this._y.call(null,t)))return this;var n,e=this._root,i,a,f,h=this._x0,v=this._y0,p=this._x1,o=this._y1,y,m,g,l,d,s,u,c;if(!e)return this;if(e.length)for(;;){if((d=y>=(g=(h+p)/2))?h=g:p=g,(s=m>=(l=(v+o)/2))?v=l:o=l,n=e,!(e=e[u=s<<1|d]))return this;if(!e.length)break;(n[u+1&3]||n[u+2&3]||n[u+3&3])&&(i=n,c=u)}for(;e.data!==t;)if(a=e,!(e=e.next))return this;return(f=e.next)&&delete e.next,a?(f?a.next=f:delete a.next,this):n?(f?n[u]=f:delete n[u],(e=n[0]||n[1]||n[2]||n[3])&&e===(n[3]||n[2]||n[1]||n[0])&&!e.length&&(i?i[c]=e:this._root=e),this):(this._root=f,this)}function pt(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this}function dt(){return this._root}function mt(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function _t(t){var n=[],e,i=this._root,a,f,h,v,p;for(i&&n.push(new j(i,this._x0,this._y0,this._x1,this._y1));e=n.pop();)if(!t(i=e.node,f=e.x0,h=e.y0,v=e.x1,p=e.y1)&&i.length){var o=(f+v)/2,y=(h+p)/2;(a=i[3])&&n.push(new j(a,o,y,v,p)),(a=i[2])&&n.push(new j(a,f,y,o,p)),(a=i[1])&&n.push(new j(a,o,h,v,y)),(a=i[0])&&n.push(new j(a,f,h,o,y))}return this}function wt(t){var n=[],e=[],i;for(this._root&&n.push(new j(this._root,this._x0,this._y0,this._x1,this._y1));i=n.pop();){var a=i.node;if(a.length){var f,h=i.x0,v=i.y0,p=i.x1,o=i.y1,y=(h+p)/2,m=(v+o)/2;(f=a[0])&&n.push(new j(f,h,v,y,m)),(f=a[1])&&n.push(new j(f,y,v,p,m)),(f=a[2])&&n.push(new j(f,h,m,y,o)),(f=a[3])&&n.push(new j(f,y,m,p,o))}e.push(i)}for(;i=e.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this}function bt(t){return t[0]}function Nt(t){return arguments.length?(this._x=t,this):this._x}function Mt(t){return t[1]}function At(t){return arguments.length?(this._y=t,this):this._y}function F(t,n,e){var i=new Q(n??bt,e??Mt,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function Q(t,n,e,i,a,f){this._x=t,this._y=n,this._x0=e,this._y0=i,this._x1=a,this._y1=f,this._root=void 0}function H(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var z=F.prototype=Q.prototype;z.copy=function(){var t=new Q(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,e,i;if(!n)return t;if(!n.length)return t._root=H(n),t;for(e=[{source:n,target:t._root=new Array(4)}];n=e.pop();)for(var a=0;a<4;++a)(i=n.source[a])&&(i.length?e.push({source:i,target:n.target[a]=new Array(4)}):n.target[a]=H(i));return t};z.add=lt;z.addAll=ct;z.cover=ht;z.data=gt;z.extent=yt;z.find=vt;z.remove=xt;z.removeAll=pt;z.root=dt;z.size=mt;z.visit=_t;z.visitAfter=wt;z.x=Nt;z.y=At;function P(t){return function(){return t}}function I(t){return(t()-.5)*1e-6}function Et(t){return t.x+t.vx}function Tt(t){return t.y+t.vy}function Gt(t){var n,e,i,a=1,f=1;typeof t!="function"&&(t=P(t==null?1:+t));function h(){for(var o,y=n.length,m,g,l,d,s,u,c=0;c<f;++c)for(m=F(n,Et,Tt).visitAfter(v),o=0;o<y;++o)g=n[o],s=e[g.index],u=s*s,l=g.x+g.vx,d=g.y+g.vy,m.visit(x);function x(w,r,_,b,M){var N=w.data,E=w.r,A=s+E;if(N){if(N.index>g.index){var T=l-N.x-N.vx,D=d-N.y-N.vy,S=T*T+D*D;S<A*A&&(T===0&&(T=I(i),S+=T*T),D===0&&(D=I(i),S+=D*D),S=(A-(S=Math.sqrt(S)))/S*a,g.vx+=(T*=S)*(A=(E*=E)/(u+E)),g.vy+=(D*=S)*A,N.vx-=T*(A=1-A),N.vy-=D*A)}return}return r>l+A||b<l-A||_>d+A||M<d-A}}function v(o){if(o.data)return o.r=e[o.data.index];for(var y=o.r=0;y<4;++y)o[y]&&o[y].r>o.r&&(o.r=o[y].r)}function p(){if(n){var o,y=n.length,m;for(e=new Array(y),o=0;o<y;++o)m=n[o],e[m.index]=+t(m,o,n)}}return h.initialize=function(o,y){n=o,i=y,p()},h.iterations=function(o){return arguments.length?(f=+o,h):f},h.strength=function(o){return arguments.length?(a=+o,h):a},h.radius=function(o){return arguments.length?(t=typeof o=="function"?o:P(+o),p(),h):t},h}function jt(t){return t.index}function J(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}function Rt(t){var n=jt,e=m,i,a=P(30),f,h,v,p,o,y=1;t==null&&(t=[]);function m(u){return 1/Math.min(v[u.source.index],v[u.target.index])}function g(u){for(var c=0,x=t.length;c<y;++c)for(var w=0,r,_,b,M,N,E,A;w<x;++w)r=t[w],_=r.source,b=r.target,M=b.x+b.vx-_.x-_.vx||I(o),N=b.y+b.vy-_.y-_.vy||I(o),E=Math.sqrt(M*M+N*N),E=(E-f[w])/E*u*i[w],M*=E,N*=E,b.vx-=M*(A=p[w]),b.vy-=N*A,_.vx+=M*(A=1-A),_.vy+=N*A}function l(){if(h){var u,c=h.length,x=t.length,w=new Map(h.map((_,b)=>[n(_,b,h),_])),r;for(u=0,v=new Array(c);u<x;++u)r=t[u],r.index=u,typeof r.source!="object"&&(r.source=J(w,r.source)),typeof r.target!="object"&&(r.target=J(w,r.target)),v[r.source.index]=(v[r.source.index]||0)+1,v[r.target.index]=(v[r.target.index]||0)+1;for(u=0,p=new Array(x);u<x;++u)r=t[u],p[u]=v[r.source.index]/(v[r.source.index]+v[r.target.index]);i=new Array(x),d(),f=new Array(x),s()}}function d(){if(h)for(var u=0,c=t.length;u<c;++u)i[u]=+e(t[u],u,t)}function s(){if(h)for(var u=0,c=t.length;u<c;++u)f[u]=+a(t[u],u,t)}return g.initialize=function(u,c){h=u,o=c,l()},g.links=function(u){return arguments.length?(t=u,l(),g):t},g.id=function(u){return arguments.length?(n=u,g):n},g.iterations=function(u){return arguments.length?(y=+u,g):y},g.strength=function(u){return arguments.length?(e=typeof u=="function"?u:P(+u),d(),g):e},g.distance=function(u){return arguments.length?(a=typeof u=="function"?u:P(+u),s(),g):a},g}const zt=1664525,St=1013904223,W=4294967296;function Dt(){let t=1;return()=>(t=(zt*t+St)%W)/W}function It(t){return t.x}function Pt(t){return t.y}var Xt=10,Yt=Math.PI*(3-Math.sqrt(5));function Ut(t){var n,e=1,i=.001,a=1-Math.pow(i,1/300),f=0,h=.6,v=new Map,p=nt(m),o=Z("tick","end"),y=Dt();t==null&&(t=[]);function m(){g(),o.call("tick",n),e<i&&(p.stop(),o.call("end",n))}function g(s){var u,c=t.length,x;s===void 0&&(s=1);for(var w=0;w<s;++w)for(e+=(f-e)*a,v.forEach(function(r){r(e)}),u=0;u<c;++u)x=t[u],x.fx==null?x.x+=x.vx*=h:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=h:(x.y=x.fy,x.vy=0);return n}function l(){for(var s=0,u=t.length,c;s<u;++s){if(c=t[s],c.index=s,c.fx!=null&&(c.x=c.fx),c.fy!=null&&(c.y=c.fy),isNaN(c.x)||isNaN(c.y)){var x=Xt*Math.sqrt(.5+s),w=s*Yt;c.x=x*Math.cos(w),c.y=x*Math.sin(w)}(isNaN(c.vx)||isNaN(c.vy))&&(c.vx=c.vy=0)}}function d(s){return s.initialize&&s.initialize(t,y),s}return l(),n={tick:g,restart:function(){return p.restart(m),n},stop:function(){return p.stop(),n},nodes:function(s){return arguments.length?(t=s,l(),v.forEach(d),n):t},alpha:function(s){return arguments.length?(e=+s,n):e},alphaMin:function(s){return arguments.length?(i=+s,n):i},alphaDecay:function(s){return arguments.length?(a=+s,n):+a},alphaTarget:function(s){return arguments.length?(f=+s,n):f},velocityDecay:function(s){return arguments.length?(h=1-s,n):1-h},randomSource:function(s){return arguments.length?(y=s,v.forEach(d),n):y},force:function(s,u){return arguments.length>1?(u==null?v.delete(s):v.set(s,d(u)),n):v.get(s)},find:function(s,u,c){var x=0,w=t.length,r,_,b,M,N;for(c==null?c=1/0:c*=c,x=0;x<w;++x)M=t[x],r=s-M.x,_=u-M.y,b=r*r+_*_,b<c&&(N=M,c=b);return N},on:function(s,u){return arguments.length>1?(o.on(s,u),n):o.on(s)}}}function Vt(){var t,n,e,i,a=P(-30),f,h=1,v=1/0,p=.81;function o(l){var d,s=t.length,u=F(t,It,Pt).visitAfter(m);for(i=l,d=0;d<s;++d)n=t[d],u.visit(g)}function y(){if(t){var l,d=t.length,s;for(f=new Array(d),l=0;l<d;++l)s=t[l],f[s.index]=+a(s,l,t)}}function m(l){var d=0,s,u,c=0,x,w,r;if(l.length){for(x=w=r=0;r<4;++r)(s=l[r])&&(u=Math.abs(s.value))&&(d+=s.value,c+=u,x+=u*s.x,w+=u*s.y);l.x=x/c,l.y=w/c}else{s=l,s.x=s.data.x,s.y=s.data.y;do d+=f[s.data.index];while(s=s.next)}l.value=d}function g(l,d,s,u){if(!l.value)return!0;var c=l.x-n.x,x=l.y-n.y,w=u-d,r=c*c+x*x;if(w*w/p<r)return r<v&&(c===0&&(c=I(e),r+=c*c),x===0&&(x=I(e),r+=x*x),r<h&&(r=Math.sqrt(h*r)),n.vx+=c*l.value*i/r,n.vy+=x*l.value*i/r),!0;if(l.length||r>=v)return;(l.data!==n||l.next)&&(c===0&&(c=I(e),r+=c*c),x===0&&(x=I(e),r+=x*x),r<h&&(r=Math.sqrt(h*r)));do l.data!==n&&(w=f[l.data.index]*i/r,n.vx+=c*w,n.vy+=x*w);while(l=l.next)}return o.initialize=function(l,d){t=l,e=d,y()},o.strength=function(l){return arguments.length?(a=typeof l=="function"?l:P(+l),y(),o):a},o.distanceMin=function(l){return arguments.length?(h=l*l,o):Math.sqrt(h)},o.distanceMax=function(l){return arguments.length?(v=l*l,o):Math.sqrt(v)},o.theta=function(l){return arguments.length?(p=l*l,o):Math.sqrt(p)},o}export{it as a,Gt as c,Ct as d,Rt as l,Vt as m,O as p,Ut as s,ut as y};

import{u as Y,c as G,j as e,d as m}from"./index-BoaK5Cbd.js";import{r as i,ab as d,u as S,k as g,_ as I,B as p,x as K,ac as W,ad as X,T as Z,ae as w,o as ee,p as te,d as C,C as l,S as f,e as R,af as $,ag as M,j as y,a7 as ae,M as se,ah as A,ai as re,m as P,a0 as oe,aj as ne,ak as b}from"./antd-CAFIM9ev.js";import{s as le}from"./index-Daowydkz.js";import{S as ce}from"./SearchFilterBar-AJ-ixr8L.js";import"./vendor-DJG_os-6.js";const{Title:F,Paragraph:ie}=Z,{Option:de}=P,ge=m.div`
  padding: 24px;
`,me=m.div`
  margin-bottom: 24px;
`,j=m(y)`
  .ant-card-body {
    padding: 16px;
  }
`,ue=m(y)`
  height: 100%;
  transition: all 0.3s ease;
  cursor: pointer;
  
  .ant-card-body {
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 16px;
  }
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
`,xe=m.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 0;
`,he=m.div`
  display: flex;
  flex-wrap: wrap;
  margin: -4px; /* 负边距抵消子元素的边距 */
  
  .ant-tag {
    margin: 4px !important; /* 所有方向统一4px边距，总间距为8px */
  }
`,Te=()=>{const{t}=Y(["tags","common"]),{currentTheme:B}=G(a=>a.theme),q=B==="dark"?"#ffffff":"#1890ff",[O,fe]=i.useState(!1),[z,h]=i.useState(!1),[k,T]=i.useState(null),[D,E]=i.useState(""),[V,N]=i.useState("all"),[c]=d.useForm();i.useEffect(()=>{le(t("tags:title"))},[t]);const o=[{key:"1",name:"生产环境",color:"#f5222d",category:"environment",description:"标识生产环境相关的资源",usageCount:156,createdAt:"2024-06-10"},{key:"2",name:"测试环境",color:"#faad14",category:"environment",description:"标识测试环境相关的资源",usageCount:89,createdAt:"2024-06-10"},{key:"3",name:"核心业务",color:"#1890ff",category:"business",description:"标识核心业务相关的组件",usageCount:234,createdAt:"2024-06-08"},{key:"4",name:"高可用",color:"#52c41a",category:"feature",description:"标识具有高可用特性的服务",usageCount:67,createdAt:"2024-06-05"},{key:"5",name:"微服务",color:"#722ed1",category:"architecture",description:"标识微服务架构组件",usageCount:123,createdAt:"2024-06-03"},{key:"6",name:"数据库",color:"#13c2c2",category:"component",description:"标识数据库相关组件",usageCount:45,createdAt:"2024-06-01"}],u={environment:{name:"环境",icon:e.jsx(R,{}),color:"#1890ff"},business:{name:"业务",icon:e.jsx(M,{}),color:"#52c41a"},feature:{name:"特性",icon:e.jsx($,{}),color:"#faad14"},architecture:{name:"架构",icon:e.jsx(ne,{}),color:"#722ed1"},component:{name:"组件",icon:e.jsx(oe,{}),color:"#13c2c2"}},L=()=>{T(null),c.resetFields(),h(!0)},v=a=>{T(a),c.setFieldsValue({name:a.name,color:a.color,category:a.category,description:a.description}),h(!0)},U=a=>{b.success(t("tags:messages.deleteSuccess"))},H=async()=>{try{const a=await c.validateFields();k?b.success(t("tags:messages.updateSuccess")):b.success(t("tags:messages.createSuccess")),h(!1),c.resetFields()}catch(a){console.error("表单验证失败:",a)}},_=()=>{h(!1),c.resetFields()},J=[{title:t("tags:table.tagName"),dataIndex:"name",key:"name",render:(a,s)=>e.jsx(S,{color:s.color,style:{fontSize:14,padding:"4px 8px"},children:a})},{title:t("tags:table.category"),dataIndex:"category",key:"category",render:a=>{const s=u[a];return e.jsxs(g,{children:[s==null?void 0:s.icon,e.jsx("span",{children:(s==null?void 0:s.name)||a})]})}},{title:t("tags:table.description"),dataIndex:"description",key:"description",ellipsis:!0},{title:t("tags:table.usageCount"),dataIndex:"usageCount",key:"usageCount",render:a=>e.jsx(I,{count:a,style:{backgroundColor:"#52c41a"}})},{title:t("tags:table.createTime"),dataIndex:"createdAt",key:"createdAt"},{title:t("tags:table.actions"),key:"action",render:(a,s)=>e.jsxs(g,{children:[e.jsx(p,{type:"link",icon:e.jsx(K,{}),size:"small",onClick:()=>v(s),children:t("tags:actions.edit")}),e.jsx(W,{title:t("tags:actions.deleteConfirm"),description:t("tags:actions.deleteDescription"),onConfirm:()=>U(s.key),okText:t("common:confirm"),cancelText:t("common:cancel"),children:e.jsx(p,{type:"link",icon:e.jsx(X,{}),size:"small",danger:!0,children:t("tags:actions.delete")})})]})}],Q=()=>{const a=o.reduce((s,n)=>(s[n.category]||(s[n.category]=[]),s[n.category].push(n),s),{});return Object.entries(a).map(([s,n])=>{const r=u[s];return e.jsx(l,{xs:24,md:12,lg:8,children:e.jsxs(ue,{children:[e.jsxs(xe,{children:[e.jsxs(g,{children:[r==null?void 0:r.icon,e.jsx(F,{level:4,style:{margin:0},children:(r==null?void 0:r.name)||s})]}),e.jsx(I,{count:n.length,style:{backgroundColor:r==null?void 0:r.color}})]}),e.jsx(he,{children:n.map(x=>e.jsxs(S,{color:x.color,style:{cursor:"pointer"},onClick:()=>v(x),children:[x.name," (",x.usageCount,")"]},x.key))})]})},s)})};return e.jsxs(ge,{children:[e.jsx(me,{children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx(F,{level:2,style:{margin:0},children:e.jsxs(g,{children:[e.jsx(w,{style:{color:q}}),t("tags:title")]})}),e.jsx(ie,{style:{marginTop:8,marginBottom:0,fontSize:16},children:t("tags:subtitle")})]}),e.jsxs(g,{children:[e.jsx(p,{icon:e.jsx(ee,{}),children:t("common:refresh")}),e.jsx(p,{type:"primary",icon:e.jsx(te,{}),onClick:L,children:t("tags:createTag")})]})]})}),e.jsxs(C,{gutter:[16,16],style:{marginBottom:24},children:[e.jsx(l,{xs:24,sm:12,md:6,children:e.jsx(j,{children:e.jsx(f,{title:t("tags:stats.totalTags"),value:o.length,suffix:t("common:unit.count"),valueStyle:{color:"#1890ff"},prefix:e.jsx(w,{})})})}),e.jsx(l,{xs:24,sm:12,md:6,children:e.jsx(j,{children:e.jsx(f,{title:t("tags:stats.categoryCount"),value:Object.keys(u).length,suffix:t("common:unit.count"),valueStyle:{color:"#52c41a"},prefix:e.jsx(R,{})})})}),e.jsx(l,{xs:24,sm:12,md:6,children:e.jsx(j,{children:e.jsx(f,{title:t("tags:stats.totalUsage"),value:o.reduce((a,s)=>a+s.usageCount,0),suffix:t("common:unit.times"),valueStyle:{color:"#faad14"},prefix:e.jsx($,{})})})}),e.jsx(l,{xs:24,sm:12,md:6,children:e.jsx(j,{children:e.jsx(f,{title:t("tags:stats.averageUsage"),value:Math.round(o.reduce((a,s)=>a+s.usageCount,0)/o.length),suffix:t("tags:stats.averageUsageSuffix"),valueStyle:{color:"#722ed1"},prefix:e.jsx(M,{})})})})]}),e.jsx(y,{title:t("tags:categoryDisplay.title"),style:{marginBottom:24},children:e.jsx(C,{gutter:[16,16],children:Q()})}),e.jsx(ce,{searchValue:D,onSearchChange:E,searchPlaceholder:t("tags:search.placeholder"),filters:[{key:"category",value:V,onChange:N,placeholder:t("tags:search.category"),width:120,options:[{value:"all",label:t("tags:search.allCategories")},...Object.entries(u).map(([a,s])=>({value:a,label:s.name}))]}],onRefresh:()=>window.location.reload(),style:{marginBottom:24}}),e.jsx(y,{title:t("tags:table.title"),children:e.jsx(ae,{columns:J,dataSource:o,loading:O,pagination:{total:o.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(a,s)=>`第 ${s[0]}-${s[1]} 条，共 ${a} 条记录`}})}),e.jsx(se,{title:t(k?"tags:editTitle":"tags:createTitle"),open:z,onOk:H,onCancel:_,width:600,children:e.jsxs(d,{form:c,layout:"vertical",initialValues:{color:"#1890ff",category:"business"},children:[e.jsx(d.Item,{name:"name",label:t("tags:form.tagName"),rules:[{required:!0,message:t("tags:form.tagNameRequired")},{max:20,message:t("validation.maxLength",{max:20})}],children:e.jsx(A,{placeholder:t("tags:form.tagNamePlaceholder")})}),e.jsxs(C,{gutter:16,children:[e.jsx(l,{span:12,children:e.jsx(d.Item,{name:"color",label:t("tags:form.color"),rules:[{required:!0,message:t("tags:form.colorRequired")}],children:e.jsx(re,{showText:!0})})}),e.jsx(l,{span:12,children:e.jsx(d.Item,{name:"category",label:t("tags:form.category"),rules:[{required:!0,message:t("tags:form.categoryRequired")}],children:e.jsx(P,{placeholder:t("tags:form.categoryPlaceholder"),children:Object.entries(u).map(([a,s])=>e.jsx(de,{value:a,children:e.jsxs(g,{children:[s.icon,s.name]})},a))})})})]}),e.jsx(d.Item,{name:"description",label:t("tags:form.description"),rules:[{required:!0,message:t("tags:form.descriptionRequired")},{max:100,message:t("validation.maxLength",{max:100})}],children:e.jsx(A.TextArea,{rows:3,placeholder:t("tags:form.descriptionPlaceholder")})})]})})]})};export{Te as default};

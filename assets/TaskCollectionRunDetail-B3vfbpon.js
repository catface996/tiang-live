import{j as e,d,a as ye,u as ge}from"./index-BoaK5Cbd.js";import{r as x,Q as Y,d as U,C as u,S as V,b3 as te,T as J,u as P,ao as ae,g as xe,L as M,j as _,_ as q,v as fe,b4 as je,aL as X,a0 as Z,l as oe,aP as le,a5 as ce,au as de,aa as me,X as ee,b5 as he,a as K,b6 as _e,b7 as Se,b8 as be,b9 as ve,y as j,k as Q,a9 as se,ak as Te,O as we,P as ke,B as ie,o as Le,ag as Ie}from"./antd-CAFIM9ev.js";import{s as Re}from"./index-Daowydkz.js";import{B as Ce}from"./Breadcrumb-Bi6Eb3lZ.js";import{s as w}from"./transform-HhklBjSi.js";import{d as Ne}from"./drag-CBGjPDUz.js";import"./vendor-DJG_os-6.js";const ze=JSON.parse('[{"nodeId":"scenario_001","nodeName":"ç”¨æˆ·è´­ä¹°æµç¨‹","nodeType":"ä¸šåŠ¡åœºæ™¯","status":"running","executionTime":{"startTime":"2024-06-25 09:00:00","endTime":null,"totalDuration":null},"actions":[{"id":"scenario_001_monitor","name":"åœºæ™¯ç›‘æŽ§","description":"ç›‘æŽ§ç”¨æˆ·è´­ä¹°æµç¨‹çš„æ‰§è¡ŒçŠ¶æ€","type":"monitoring","status":"success","startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:01:00","duration":60,"metrics":[{"id":"conversion_rate","name":"è½¬åŒ–çŽ‡","description":"ä¸šåŠ¡è½¬åŒ–çŽ‡","unit":"%","healthyRange":{"min":15,"max":100,"description":"è½¬åŒ–çŽ‡åº”ä¿æŒåœ¨15.0-100.0%èŒƒå›´å†…"},"actualValue":18.22200729415433,"health":"healthy","healthScore":90,"timestamp":"2024-06-25 10:00:00"},{"id":"response_time","name":"å“åº”æ—¶é—´","description":"å¹³å‡å“åº”æ—¶é—´","unit":"ms","healthyRange":{"min":0,"max":500,"description":"å“åº”æ—¶é—´åº”ä¿æŒåœ¨0-500msèŒƒå›´å†…"},"actualValue":291.1252914653309,"health":"healthy","healthScore":96,"timestamp":"2024-06-25 10:00:00"}],"overallScore":89,"summary":"åœºæ™¯ç›‘æŽ§æ‰§è¡Œå®Œæˆï¼Œæ‰€æœ‰æŒ‡æ ‡æ­£å¸¸"}],"analysis":{"overallHealthScore":86,"riskLevel":"low","keyFindings":["ç”¨æˆ·è´­ä¹°æµç¨‹è¿è¡ŒçŠ¶æ€è‰¯å¥½","æ‰€æœ‰å…³é”®æŒ‡æ ‡åœ¨æ­£å¸¸èŒƒå›´å†…","æ€§èƒ½è¡¨çŽ°ç¨³å®š"],"performanceSummary":"ç”¨æˆ·è´­ä¹°æµç¨‹æ•´ä½“æ€§èƒ½è¡¨çŽ°ä¼˜ç§€","securitySummary":"å®‰å…¨æ£€æŸ¥é€šè¿‡ï¼Œæ— å®‰å…¨é£Žé™©","recommendations":[{"priority":"medium","category":"æ€§èƒ½ä¼˜åŒ–","title":"ä¼˜åŒ–ç”¨æˆ·è´­ä¹°æµç¨‹æ€§èƒ½","description":"å»ºè®®å¯¹ç”¨æˆ·è´­ä¹°æµç¨‹è¿›è¡Œæ€§èƒ½è°ƒä¼˜","estimatedImpact":"é¢„è®¡å¯æå‡10-15%çš„æ€§èƒ½"}]},"lastUpdated":"2024-06-25 10:00:00","layer":"L5","category":"business_scenario"},{"nodeId":"scenario_002","nodeName":"è®¢å•å±¥çº¦åœºæ™¯","nodeType":"ä¸šåŠ¡åœºæ™¯","status":"completed","executionTime":{"startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:05:00","totalDuration":300},"actions":[{"id":"scenario_002_monitor","name":"åœºæ™¯ç›‘æŽ§","description":"ç›‘æŽ§è®¢å•å±¥çº¦åœºæ™¯çš„æ‰§è¡ŒçŠ¶æ€","type":"monitoring","status":"success","startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:01:00","duration":60,"metrics":[{"id":"conversion_rate","name":"è½¬åŒ–çŽ‡","description":"ä¸šåŠ¡è½¬åŒ–çŽ‡","unit":"%","healthyRange":{"min":15,"max":100,"description":"è½¬åŒ–çŽ‡åº”ä¿æŒåœ¨15.0-100.0%èŒƒå›´å†…"},"actualValue":24.581853400856055,"health":"healthy","healthScore":85,"timestamp":"2024-06-25 10:00:00"},{"id":"response_time","name":"å“åº”æ—¶é—´","description":"å¹³å‡å“åº”æ—¶é—´","unit":"ms","healthyRange":{"min":0,"max":500,"description":"å“åº”æ—¶é—´åº”ä¿æŒåœ¨0-500msèŒƒå›´å†…"},"actualValue":216.73436130720938,"health":"healthy","healthScore":91,"timestamp":"2024-06-25 10:00:00"}],"overallScore":95,"summary":"åœºæ™¯ç›‘æŽ§æ‰§è¡Œå®Œæˆï¼Œæ‰€æœ‰æŒ‡æ ‡æ­£å¸¸"}],"analysis":{"overallHealthScore":87,"riskLevel":"low","keyFindings":["è®¢å•å±¥çº¦åœºæ™¯è¿è¡ŒçŠ¶æ€è‰¯å¥½","æ‰€æœ‰å…³é”®æŒ‡æ ‡åœ¨æ­£å¸¸èŒƒå›´å†…","æ€§èƒ½è¡¨çŽ°ç¨³å®š"],"performanceSummary":"è®¢å•å±¥çº¦åœºæ™¯æ•´ä½“æ€§èƒ½è¡¨çŽ°ä¼˜ç§€","securitySummary":"å®‰å…¨æ£€æŸ¥é€šè¿‡ï¼Œæ— å®‰å…¨é£Žé™©","recommendations":[{"priority":"medium","category":"æ€§èƒ½ä¼˜åŒ–","title":"ä¼˜åŒ–è®¢å•å±¥çº¦åœºæ™¯æ€§èƒ½","description":"å»ºè®®å¯¹è®¢å•å±¥çº¦åœºæ™¯è¿›è¡Œæ€§èƒ½è°ƒä¼˜","estimatedImpact":"é¢„è®¡å¯æå‡10-15%çš„æ€§èƒ½"}]},"lastUpdated":"2024-06-25 10:00:00","layer":"L5","category":"business_scenario"},{"nodeId":"chain_001","nodeName":"ç”¨æˆ·æ³¨å†Œé“¾è·¯","nodeType":"ä¸šåŠ¡é“¾è·¯","status":"completed","executionTime":{"startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:05:00","totalDuration":300},"actions":[{"id":"chain_001_trace","name":"é“¾è·¯è¿½è¸ª","description":"è¿½è¸ªç”¨æˆ·æ³¨å†Œé“¾è·¯çš„æ‰§è¡Œè·¯å¾„","type":"tracing","status":"success","startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:01:00","duration":60,"metrics":[{"id":"throughput","name":"åžåé‡","description":"æ¯ç§’å¤„ç†è¯·æ±‚æ•°","unit":"req/s","healthyRange":{"min":100,"max":1000,"description":"åžåé‡åº”ä¿æŒåœ¨100-1000req/sèŒƒå›´å†…"},"actualValue":596.2446982250688,"health":"healthy","healthScore":88,"timestamp":"2024-06-25 10:00:00"},{"id":"error_rate","name":"é”™è¯¯çŽ‡","description":"è¯·æ±‚é”™è¯¯çŽ‡","unit":"%","healthyRange":{"min":0,"max":5,"description":"é”™è¯¯çŽ‡åº”ä¿æŒåœ¨0-5%èŒƒå›´å†…"},"actualValue":1.6031479221701515,"health":"healthy","healthScore":84,"timestamp":"2024-06-25 10:00:00"}],"overallScore":95,"summary":"é“¾è·¯è¿½è¸ªæ‰§è¡Œå®Œæˆï¼Œæ‰€æœ‰æŒ‡æ ‡æ­£å¸¸"}],"analysis":{"overallHealthScore":95,"riskLevel":"low","keyFindings":["ç”¨æˆ·æ³¨å†Œé“¾è·¯è¿è¡ŒçŠ¶æ€è‰¯å¥½","æ‰€æœ‰å…³é”®æŒ‡æ ‡åœ¨æ­£å¸¸èŒƒå›´å†…","æ€§èƒ½è¡¨çŽ°ç¨³å®š"],"performanceSummary":"ç”¨æˆ·æ³¨å†Œé“¾è·¯æ•´ä½“æ€§èƒ½è¡¨çŽ°ä¼˜ç§€","securitySummary":"å®‰å…¨æ£€æŸ¥é€šè¿‡ï¼Œæ— å®‰å…¨é£Žé™©","recommendations":[{"priority":"medium","category":"æ€§èƒ½ä¼˜åŒ–","title":"ä¼˜åŒ–ç”¨æˆ·æ³¨å†Œé“¾è·¯æ€§èƒ½","description":"å»ºè®®å¯¹ç”¨æˆ·æ³¨å†Œé“¾è·¯è¿›è¡Œæ€§èƒ½è°ƒä¼˜","estimatedImpact":"é¢„è®¡å¯æå‡10-15%çš„æ€§èƒ½"}]},"lastUpdated":"2024-06-25 10:00:00","layer":"L4","category":"business_chain"},{"nodeId":"chain_002","nodeName":"æ”¯ä»˜å¤„ç†é“¾è·¯","nodeType":"ä¸šåŠ¡é“¾è·¯","status":"running","executionTime":{"startTime":"2024-06-25 09:00:00","endTime":null,"totalDuration":null},"actions":[{"id":"chain_002_trace","name":"é“¾è·¯è¿½è¸ª","description":"è¿½è¸ªæ”¯ä»˜å¤„ç†é“¾è·¯çš„æ‰§è¡Œè·¯å¾„","type":"tracing","status":"success","startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:01:00","duration":60,"metrics":[{"id":"throughput","name":"åžåé‡","description":"æ¯ç§’å¤„ç†è¯·æ±‚æ•°","unit":"req/s","healthyRange":{"min":100,"max":1000,"description":"åžåé‡åº”ä¿æŒåœ¨100-1000req/sèŒƒå›´å†…"},"actualValue":735.0352860273437,"health":"healthy","healthScore":98,"timestamp":"2024-06-25 10:00:00"},{"id":"error_rate","name":"é”™è¯¯çŽ‡","description":"è¯·æ±‚é”™è¯¯çŽ‡","unit":"%","healthyRange":{"min":0,"max":5,"description":"é”™è¯¯çŽ‡åº”ä¿æŒåœ¨0-5%èŒƒå›´å†…"},"actualValue":0.5772519002577102,"health":"healthy","healthScore":91,"timestamp":"2024-06-25 10:00:00"}],"overallScore":80,"summary":"é“¾è·¯è¿½è¸ªæ‰§è¡Œå®Œæˆï¼Œæ‰€æœ‰æŒ‡æ ‡æ­£å¸¸"}],"analysis":{"overallHealthScore":90,"riskLevel":"low","keyFindings":["æ”¯ä»˜å¤„ç†é“¾è·¯è¿è¡ŒçŠ¶æ€è‰¯å¥½","æ‰€æœ‰å…³é”®æŒ‡æ ‡åœ¨æ­£å¸¸èŒƒå›´å†…","æ€§èƒ½è¡¨çŽ°ç¨³å®š"],"performanceSummary":"æ”¯ä»˜å¤„ç†é“¾è·¯æ•´ä½“æ€§èƒ½è¡¨çŽ°ä¼˜ç§€","securitySummary":"å®‰å…¨æ£€æŸ¥é€šè¿‡ï¼Œæ— å®‰å…¨é£Žé™©","recommendations":[{"priority":"medium","category":"æ€§èƒ½ä¼˜åŒ–","title":"ä¼˜åŒ–æ”¯ä»˜å¤„ç†é“¾è·¯æ€§èƒ½","description":"å»ºè®®å¯¹æ”¯ä»˜å¤„ç†é“¾è·¯è¿›è¡Œæ€§èƒ½è°ƒä¼˜","estimatedImpact":"é¢„è®¡å¯æå‡10-15%çš„æ€§èƒ½"}]},"lastUpdated":"2024-06-25 10:00:00","layer":"L4","category":"business_chain"},{"nodeId":"chain_003","nodeName":"åº“å­˜ç®¡ç†é“¾è·¯","nodeType":"ä¸šåŠ¡é“¾è·¯","status":"pending","executionTime":{"startTime":"2024-06-25 09:00:00","endTime":null,"totalDuration":null},"actions":[{"id":"chain_003_trace","name":"é“¾è·¯è¿½è¸ª","description":"è¿½è¸ªåº“å­˜ç®¡ç†é“¾è·¯çš„æ‰§è¡Œè·¯å¾„","type":"tracing","status":"success","startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:01:00","duration":60,"metrics":[{"id":"throughput","name":"åžåé‡","description":"æ¯ç§’å¤„ç†è¯·æ±‚æ•°","unit":"req/s","healthyRange":{"min":100,"max":1000,"description":"åžåé‡åº”ä¿æŒåœ¨100-1000req/sèŒƒå›´å†…"},"actualValue":682.2195172277242,"health":"healthy","healthScore":89,"timestamp":"2024-06-25 10:00:00"},{"id":"error_rate","name":"é”™è¯¯çŽ‡","description":"è¯·æ±‚é”™è¯¯çŽ‡","unit":"%","healthyRange":{"min":0,"max":5,"description":"é”™è¯¯çŽ‡åº”ä¿æŒåœ¨0-5%èŒƒå›´å†…"},"actualValue":1.525790585008097,"health":"healthy","healthScore":94,"timestamp":"2024-06-25 10:00:00"}],"overallScore":80,"summary":"é“¾è·¯è¿½è¸ªæ‰§è¡Œå®Œæˆï¼Œæ‰€æœ‰æŒ‡æ ‡æ­£å¸¸"}],"analysis":{"overallHealthScore":94,"riskLevel":"low","keyFindings":["åº“å­˜ç®¡ç†é“¾è·¯è¿è¡ŒçŠ¶æ€è‰¯å¥½","æ‰€æœ‰å…³é”®æŒ‡æ ‡åœ¨æ­£å¸¸èŒƒå›´å†…","æ€§èƒ½è¡¨çŽ°ç¨³å®š"],"performanceSummary":"åº“å­˜ç®¡ç†é“¾è·¯æ•´ä½“æ€§èƒ½è¡¨çŽ°ä¼˜ç§€","securitySummary":"å®‰å…¨æ£€æŸ¥é€šè¿‡ï¼Œæ— å®‰å…¨é£Žé™©","recommendations":[{"priority":"medium","category":"æ€§èƒ½ä¼˜åŒ–","title":"ä¼˜åŒ–åº“å­˜ç®¡ç†é“¾è·¯æ€§èƒ½","description":"å»ºè®®å¯¹åº“å­˜ç®¡ç†é“¾è·¯è¿›è¡Œæ€§èƒ½è°ƒä¼˜","estimatedImpact":"é¢„è®¡å¯æå‡10-15%çš„æ€§èƒ½"}]},"lastUpdated":"2024-06-25 10:00:00","layer":"L4","category":"business_chain"},{"nodeId":"system_001","nodeName":"ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ","nodeType":"ä¸šåŠ¡ç³»ç»Ÿ","status":"completed","executionTime":{"startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:05:00","totalDuration":300},"actions":[{"id":"system_001_health","name":"å¥åº·æ£€æŸ¥","description":"æ£€æŸ¥ç”¨æˆ·ç®¡ç†ç³»ç»Ÿçš„å¥åº·çŠ¶æ€","type":"health_check","status":"success","startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:01:00","duration":60,"metrics":[{"id":"cpu_usage","name":"CPUä½¿ç”¨çŽ‡","description":"ç³»ç»ŸCPUä½¿ç”¨çŽ‡","unit":"%","healthyRange":{"min":0,"max":80,"description":"CPUä½¿ç”¨çŽ‡åº”ä¿æŒåœ¨0-80%èŒƒå›´å†…"},"actualValue":25.026558023102965,"health":"healthy","healthScore":88,"timestamp":"2024-06-25 10:00:00"},{"id":"memory_usage","name":"å†…å­˜ä½¿ç”¨çŽ‡","description":"ç³»ç»Ÿå†…å­˜ä½¿ç”¨çŽ‡","unit":"%","healthyRange":{"min":0,"max":80,"description":"å†…å­˜ä½¿ç”¨çŽ‡åº”ä¿æŒåœ¨0-80%èŒƒå›´å†…"},"actualValue":60.147483695284464,"health":"healthy","healthScore":98,"timestamp":"2024-06-25 10:00:00"}],"overallScore":89,"summary":"å¥åº·æ£€æŸ¥æ‰§è¡Œå®Œæˆï¼Œæ‰€æœ‰æŒ‡æ ‡æ­£å¸¸"}],"analysis":{"overallHealthScore":92,"riskLevel":"low","keyFindings":["ç”¨æˆ·ç®¡ç†ç³»ç»Ÿè¿è¡ŒçŠ¶æ€è‰¯å¥½","æ‰€æœ‰å…³é”®æŒ‡æ ‡åœ¨æ­£å¸¸èŒƒå›´å†…","æ€§èƒ½è¡¨çŽ°ç¨³å®š"],"performanceSummary":"ç”¨æˆ·ç®¡ç†ç³»ç»Ÿæ•´ä½“æ€§èƒ½è¡¨çŽ°ä¼˜ç§€","securitySummary":"å®‰å…¨æ£€æŸ¥é€šè¿‡ï¼Œæ— å®‰å…¨é£Žé™©","recommendations":[{"priority":"medium","category":"æ€§èƒ½ä¼˜åŒ–","title":"ä¼˜åŒ–ç”¨æˆ·ç®¡ç†ç³»ç»Ÿæ€§èƒ½","description":"å»ºè®®å¯¹ç”¨æˆ·ç®¡ç†ç³»ç»Ÿè¿›è¡Œæ€§èƒ½è°ƒä¼˜","estimatedImpact":"é¢„è®¡å¯æå‡10-15%çš„æ€§èƒ½"}]},"lastUpdated":"2024-06-25 10:00:00","layer":"L3","category":"business_system"},{"nodeId":"system_002","nodeName":"è®¢å•ç®¡ç†ç³»ç»Ÿ","nodeType":"ä¸šåŠ¡ç³»ç»Ÿ","status":"running","executionTime":{"startTime":"2024-06-25 09:00:00","endTime":null,"totalDuration":null},"actions":[{"id":"system_002_health","name":"å¥åº·æ£€æŸ¥","description":"æ£€æŸ¥è®¢å•ç®¡ç†ç³»ç»Ÿçš„å¥åº·çŠ¶æ€","type":"health_check","status":"success","startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:01:00","duration":60,"metrics":[{"id":"cpu_usage","name":"CPUä½¿ç”¨çŽ‡","description":"ç³»ç»ŸCPUä½¿ç”¨çŽ‡","unit":"%","healthyRange":{"min":0,"max":80,"description":"CPUä½¿ç”¨çŽ‡åº”ä¿æŒåœ¨0-80%èŒƒå›´å†…"},"actualValue":49.19334852220004,"health":"healthy","healthScore":81,"timestamp":"2024-06-25 10:00:00"},{"id":"memory_usage","name":"å†…å­˜ä½¿ç”¨çŽ‡","description":"ç³»ç»Ÿå†…å­˜ä½¿ç”¨çŽ‡","unit":"%","healthyRange":{"min":0,"max":80,"description":"å†…å­˜ä½¿ç”¨çŽ‡åº”ä¿æŒåœ¨0-80%èŒƒå›´å†…"},"actualValue":47.78916265698895,"health":"healthy","healthScore":78,"timestamp":"2024-06-25 10:00:00"}],"overallScore":83,"summary":"å¥åº·æ£€æŸ¥æ‰§è¡Œå®Œæˆï¼Œæ‰€æœ‰æŒ‡æ ‡æ­£å¸¸"}],"analysis":{"overallHealthScore":94,"riskLevel":"low","keyFindings":["è®¢å•ç®¡ç†ç³»ç»Ÿè¿è¡ŒçŠ¶æ€è‰¯å¥½","æ‰€æœ‰å…³é”®æŒ‡æ ‡åœ¨æ­£å¸¸èŒƒå›´å†…","æ€§èƒ½è¡¨çŽ°ç¨³å®š"],"performanceSummary":"è®¢å•ç®¡ç†ç³»ç»Ÿæ•´ä½“æ€§èƒ½è¡¨çŽ°ä¼˜ç§€","securitySummary":"å®‰å…¨æ£€æŸ¥é€šè¿‡ï¼Œæ— å®‰å…¨é£Žé™©","recommendations":[{"priority":"medium","category":"æ€§èƒ½ä¼˜åŒ–","title":"ä¼˜åŒ–è®¢å•ç®¡ç†ç³»ç»Ÿæ€§èƒ½","description":"å»ºè®®å¯¹è®¢å•ç®¡ç†ç³»ç»Ÿè¿›è¡Œæ€§èƒ½è°ƒä¼˜","estimatedImpact":"é¢„è®¡å¯æå‡10-15%çš„æ€§èƒ½"}]},"lastUpdated":"2024-06-25 10:00:00","layer":"L3","category":"business_system"},{"nodeId":"system_003","nodeName":"æ”¯ä»˜ç³»ç»Ÿ","nodeType":"ä¸šåŠ¡ç³»ç»Ÿ","status":"completed","executionTime":{"startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:05:00","totalDuration":300},"actions":[{"id":"system_003_health","name":"å¥åº·æ£€æŸ¥","description":"æ£€æŸ¥æ”¯ä»˜ç³»ç»Ÿçš„å¥åº·çŠ¶æ€","type":"health_check","status":"success","startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:01:00","duration":60,"metrics":[{"id":"cpu_usage","name":"CPUä½¿ç”¨çŽ‡","description":"ç³»ç»ŸCPUä½¿ç”¨çŽ‡","unit":"%","healthyRange":{"min":0,"max":80,"description":"CPUä½¿ç”¨çŽ‡åº”ä¿æŒåœ¨0-80%èŒƒå›´å†…"},"actualValue":41.45186320036039,"health":"healthy","healthScore":85,"timestamp":"2024-06-25 10:00:00"},{"id":"memory_usage","name":"å†…å­˜ä½¿ç”¨çŽ‡","description":"ç³»ç»Ÿå†…å­˜ä½¿ç”¨çŽ‡","unit":"%","healthyRange":{"min":0,"max":80,"description":"å†…å­˜ä½¿ç”¨çŽ‡åº”ä¿æŒåœ¨0-80%èŒƒå›´å†…"},"actualValue":69.5111379548838,"health":"healthy","healthScore":82,"timestamp":"2024-06-25 10:00:00"}],"overallScore":91,"summary":"å¥åº·æ£€æŸ¥æ‰§è¡Œå®Œæˆï¼Œæ‰€æœ‰æŒ‡æ ‡æ­£å¸¸"}],"analysis":{"overallHealthScore":87,"riskLevel":"low","keyFindings":["æ”¯ä»˜ç³»ç»Ÿè¿è¡ŒçŠ¶æ€è‰¯å¥½","æ‰€æœ‰å…³é”®æŒ‡æ ‡åœ¨æ­£å¸¸èŒƒå›´å†…","æ€§èƒ½è¡¨çŽ°ç¨³å®š"],"performanceSummary":"æ”¯ä»˜ç³»ç»Ÿæ•´ä½“æ€§èƒ½è¡¨çŽ°ä¼˜ç§€","securitySummary":"å®‰å…¨æ£€æŸ¥é€šè¿‡ï¼Œæ— å®‰å…¨é£Žé™©","recommendations":[{"priority":"medium","category":"æ€§èƒ½ä¼˜åŒ–","title":"ä¼˜åŒ–æ”¯ä»˜ç³»ç»Ÿæ€§èƒ½","description":"å»ºè®®å¯¹æ”¯ä»˜ç³»ç»Ÿè¿›è¡Œæ€§èƒ½è°ƒä¼˜","estimatedImpact":"é¢„è®¡å¯æå‡10-15%çš„æ€§èƒ½"}]},"lastUpdated":"2024-06-25 10:00:00","layer":"L3","category":"business_system"},{"nodeId":"system_004","nodeName":"åº“å­˜ç³»ç»Ÿ","nodeType":"ä¸šåŠ¡ç³»ç»Ÿ","status":"failed","executionTime":{"startTime":"2024-06-25 09:00:00","endTime":null,"totalDuration":null},"actions":[{"id":"system_004_health","name":"å¥åº·æ£€æŸ¥","description":"æ£€æŸ¥åº“å­˜ç³»ç»Ÿçš„å¥åº·çŠ¶æ€å’Œæ•°æ®ä¸€è‡´æ€§","type":"health_check","status":"error","startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:02:30","duration":150,"metrics":[{"id":"cpu_usage","name":"CPUä½¿ç”¨çŽ‡","description":"ç³»ç»ŸCPUä½¿ç”¨çŽ‡å¼‚å¸¸åé«˜","unit":"%","healthyRange":{"min":0,"max":80,"description":"CPUä½¿ç”¨çŽ‡åº”ä¿æŒåœ¨80%ä»¥ä¸‹"},"actualValue":92.5,"health":"critical","healthScore":25,"timestamp":"2024-06-25 09:02:30"},{"id":"memory_usage","name":"å†…å­˜ä½¿ç”¨çŽ‡","description":"ç³»ç»Ÿå†…å­˜ä½¿ç”¨çŽ‡è¿‡é«˜ï¼Œå¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼","unit":"%","healthyRange":{"min":0,"max":80,"description":"å†…å­˜ä½¿ç”¨çŽ‡åº”ä¿æŒåœ¨80%ä»¥ä¸‹"},"actualValue":87.3,"health":"critical","healthScore":30,"timestamp":"2024-06-25 09:02:30"},{"id":"db_connection_pool","name":"æ•°æ®åº“è¿žæŽ¥æ± ","description":"æ•°æ®åº“è¿žæŽ¥æ± è€—å°½ï¼Œå½±å“åº“å­˜æŸ¥è¯¢æ€§èƒ½","unit":"ä¸ª","healthyRange":{"min":5,"max":100,"description":"å¯ç”¨è¿žæŽ¥æ•°åº”ä¿æŒåœ¨5ä¸ªä»¥ä¸Š"},"actualValue":2,"health":"critical","healthScore":15,"timestamp":"2024-06-25 09:02:30"}],"overallScore":23,"summary":"åº“å­˜ç³»ç»Ÿå‡ºçŽ°ä¸¥é‡å¼‚å¸¸ï¼ŒCPUå’Œå†…å­˜ä½¿ç”¨çŽ‡è¿‡é«˜ï¼Œæ•°æ®åº“è¿žæŽ¥æ± è€—å°½"},{"id":"system_004_sync","name":"åº“å­˜åŒæ­¥æ£€æŸ¥","description":"æ£€æŸ¥åº“å­˜æ•°æ®åœ¨å„ä¸ªç³»ç»Ÿé—´çš„åŒæ­¥çŠ¶æ€","type":"data_sync","status":"error","startTime":"2024-06-25 09:03:00","endTime":"2024-06-25 09:04:00","duration":60,"metrics":[{"id":"sync_delay","name":"åŒæ­¥å»¶è¿Ÿ","description":"åº“å­˜æ•°æ®åŒæ­¥å»¶è¿Ÿæ—¶é—´","unit":"ç§’","healthyRange":{"min":0,"max":30,"description":"åŒæ­¥å»¶è¿Ÿåº”æŽ§åˆ¶åœ¨30ç§’ä»¥å†…"},"actualValue":125,"health":"critical","healthScore":20,"timestamp":"2024-06-25 09:04:00"}],"overallScore":20,"summary":"åº“å­˜æ•°æ®åŒæ­¥ä¸¥é‡æ»žåŽï¼Œå¯èƒ½å¯¼è‡´è¶…å–é—®é¢˜"}],"analysis":{"overallHealthScore":22,"riskLevel":"critical","keyFindings":["ç³»ç»Ÿèµ„æºä½¿ç”¨çŽ‡ä¸¥é‡è¶…æ ‡ï¼ŒCPUè¾¾92.5%ï¼Œå†…å­˜è¾¾87.3%","æ•°æ®åº“è¿žæŽ¥æ± è€—å°½ï¼Œä»…å‰©2ä¸ªå¯ç”¨è¿žæŽ¥","åº“å­˜æ•°æ®åŒæ­¥å»¶è¿Ÿ125ç§’ï¼Œè¿œè¶…æ­£å¸¸èŒƒå›´","å­˜åœ¨å†…å­˜æ³„æ¼é£Žé™©ï¼Œç³»ç»Ÿç¨³å®šæ€§å ªå¿§"],"performanceSummary":"åº“å­˜ç³»ç»Ÿæ€§èƒ½ä¸¥é‡æ¶åŒ–ï¼Œå“åº”æ—¶é—´è¶…è¿‡5ç§’ï¼Œéƒ¨åˆ†è¯·æ±‚è¶…æ—¶å¤±è´¥","securitySummary":"ç³»ç»Ÿå¼‚å¸¸å¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ï¼Œå­˜åœ¨ä¸šåŠ¡é£Žé™©","recommendations":[{"priority":"critical","category":"ç´§æ€¥ä¿®å¤","title":"ç«‹å³é‡å¯åº“å­˜ç³»ç»ŸæœåŠ¡","description":"ç³»ç»Ÿèµ„æºè€—å°½ï¼Œå»ºè®®ç«‹å³é‡å¯æœåŠ¡å¹¶æŽ’æŸ¥å†…å­˜æ³„æ¼é—®é¢˜","estimatedImpact":"é¢„è®¡å¯æ¢å¤ç³»ç»Ÿæ­£å¸¸è¿è¡Œï¼Œä½†éœ€è¦æŒç»­ç›‘æŽ§"},{"priority":"high","category":"æ€§èƒ½ä¼˜åŒ–","title":"ä¼˜åŒ–æ•°æ®åº“è¿žæŽ¥æ± é…ç½®","description":"å¢žåŠ æ•°æ®åº“è¿žæŽ¥æ± å¤§å°ï¼Œä¼˜åŒ–è¿žæŽ¥å¤ç”¨ç­–ç•¥","estimatedImpact":"é¢„è®¡å¯æå‡50%çš„å¹¶å‘å¤„ç†èƒ½åŠ›"},{"priority":"high","category":"æ•°æ®ä¸€è‡´æ€§","title":"ä¿®å¤åº“å­˜åŒæ­¥æœºåˆ¶","description":"æŽ’æŸ¥åŒæ­¥å»¶è¿ŸåŽŸå› ï¼Œä¼˜åŒ–æ•°æ®åŒæ­¥ç®—æ³•","estimatedImpact":"é¢„è®¡å¯å°†åŒæ­¥å»¶è¿Ÿé™ä½Žè‡³10ç§’ä»¥å†…"}]},"lastUpdated":"2024-06-25 10:00:00","layer":"L3","category":"business_system"},{"nodeId":"middleware_001","nodeName":"APIç½‘å…³","nodeType":"ä¸­é—´ä»¶","status":"completed","executionTime":{"startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:05:00","totalDuration":300},"actions":[{"id":"middleware_001_monitor","name":"ä¸­é—´ä»¶ç›‘æŽ§","description":"ç›‘æŽ§APIç½‘å…³çš„è¿è¡ŒçŠ¶æ€","type":"monitoring","status":"success","startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:01:00","duration":60,"metrics":[{"id":"availability","name":"å¯ç”¨æ€§","description":"æœåŠ¡å¯ç”¨æ€§","unit":"%","healthyRange":{"min":99,"max":100,"description":"å¯ç”¨æ€§åº”ä¿æŒåœ¨99.0-100.0%èŒƒå›´å†…"},"actualValue":99.54242768910133,"health":"healthy","healthScore":86,"timestamp":"2024-06-25 10:00:00"},{"id":"connection_count","name":"è¿žæŽ¥æ•°","description":"å½“å‰è¿žæŽ¥æ•°","unit":"ä¸ª","healthyRange":{"min":0,"max":1000,"description":"è¿žæŽ¥æ•°åº”ä¿æŒåœ¨0-1000ä¸ªèŒƒå›´å†…"},"actualValue":282,"health":"healthy","healthScore":86,"timestamp":"2024-06-25 10:00:00"}],"overallScore":89,"summary":"ä¸­é—´ä»¶ç›‘æŽ§æ‰§è¡Œå®Œæˆï¼Œæ‰€æœ‰æŒ‡æ ‡æ­£å¸¸"}],"analysis":{"overallHealthScore":95,"riskLevel":"low","keyFindings":["APIç½‘å…³è¿è¡ŒçŠ¶æ€è‰¯å¥½","æ‰€æœ‰å…³é”®æŒ‡æ ‡åœ¨æ­£å¸¸èŒƒå›´å†…","æ€§èƒ½è¡¨çŽ°ç¨³å®š"],"performanceSummary":"APIç½‘å…³æ•´ä½“æ€§èƒ½è¡¨çŽ°ä¼˜ç§€","securitySummary":"å®‰å…¨æ£€æŸ¥é€šè¿‡ï¼Œæ— å®‰å…¨é£Žé™©","recommendations":[{"priority":"medium","category":"æ€§èƒ½ä¼˜åŒ–","title":"ä¼˜åŒ–APIç½‘å…³æ€§èƒ½","description":"å»ºè®®å¯¹APIç½‘å…³è¿›è¡Œæ€§èƒ½è°ƒä¼˜","estimatedImpact":"é¢„è®¡å¯æå‡10-15%çš„æ€§èƒ½"}]},"lastUpdated":"2024-06-25 10:00:00","layer":"L2","category":"middleware"},{"nodeId":"middleware_002","nodeName":"Redisç¼“å­˜","nodeType":"ä¸­é—´ä»¶","status":"running","executionTime":{"startTime":"2024-06-25 09:00:00","endTime":null,"totalDuration":null},"actions":[{"id":"middleware_002_monitor","name":"ç¼“å­˜ç›‘æŽ§","description":"ç›‘æŽ§Redisç¼“å­˜çš„è¿è¡ŒçŠ¶æ€å’Œæ€§èƒ½æŒ‡æ ‡","type":"monitoring","status":"success","startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:01:00","duration":60,"metrics":[{"id":"hit_rate","name":"ç¼“å­˜å‘½ä¸­çŽ‡","description":"Redisç¼“å­˜å‘½ä¸­çŽ‡","unit":"%","healthyRange":{"min":85,"max":100,"description":"ç¼“å­˜å‘½ä¸­çŽ‡åº”ä¿æŒåœ¨85%ä»¥ä¸Š"},"actualValue":94.2,"health":"healthy","healthScore":94,"timestamp":"2024-06-25 09:01:00"},{"id":"memory_usage","name":"å†…å­˜ä½¿ç”¨çŽ‡","description":"Rediså†…å­˜ä½¿ç”¨æƒ…å†µ","unit":"%","healthyRange":{"min":0,"max":80,"description":"å†…å­˜ä½¿ç”¨çŽ‡åº”æŽ§åˆ¶åœ¨80%ä»¥ä¸‹"},"actualValue":67.8,"health":"healthy","healthScore":85,"timestamp":"2024-06-25 09:01:00"},{"id":"connection_count","name":"è¿žæŽ¥æ•°","description":"å½“å‰æ´»è·ƒè¿žæŽ¥æ•°","unit":"ä¸ª","healthyRange":{"min":0,"max":1000,"description":"è¿žæŽ¥æ•°åº”æŽ§åˆ¶åœ¨1000ä»¥å†…"},"actualValue":245,"health":"healthy","healthScore":90,"timestamp":"2024-06-25 09:01:00"}],"overallScore":90,"summary":"Redisç¼“å­˜è¿è¡ŒçŠ¶æ€è‰¯å¥½ï¼Œå‘½ä¸­çŽ‡å’Œæ€§èƒ½æŒ‡æ ‡å‡æ­£å¸¸"}],"analysis":{"overallHealthScore":90,"riskLevel":"low","keyFindings":["ç¼“å­˜å‘½ä¸­çŽ‡94.2%ï¼Œæ˜¾è‘—æå‡äº†ç³»ç»Ÿå“åº”é€Ÿåº¦","å†…å­˜ä½¿ç”¨çŽ‡67.8%ï¼Œåœ¨å®‰å…¨èŒƒå›´å†…","è¿žæŽ¥æ•°245ä¸ªï¼Œè´Ÿè½½é€‚ä¸­","æ— æ…¢æŸ¥è¯¢å’Œé˜»å¡žæ“ä½œ"],"performanceSummary":"Redisç¼“å­˜æ•´ä½“æ€§èƒ½è¡¨çŽ°ä¼˜ç§€","securitySummary":"å®‰å…¨æ£€æŸ¥é€šè¿‡ï¼Œæ— å®‰å…¨é£Žé™©","recommendations":[{"priority":"medium","category":"æ€§èƒ½ä¼˜åŒ–","title":"ä¼˜åŒ–Redisç¼“å­˜æ€§èƒ½","description":"å»ºè®®å¯¹Redisç¼“å­˜è¿›è¡Œæ€§èƒ½è°ƒä¼˜","estimatedImpact":"é¢„è®¡å¯æå‡10-15%çš„æ€§èƒ½"}]},"lastUpdated":"2024-06-25 10:00:00","layer":"L2","category":"middleware"},{"nodeId":"middleware_003","nodeName":"æ¶ˆæ¯é˜Ÿåˆ—","nodeType":"ä¸­é—´ä»¶","status":"completed","executionTime":{"startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:05:00","totalDuration":300},"actions":[{"id":"middleware_003_monitor","name":"ä¸­é—´ä»¶ç›‘æŽ§","description":"ç›‘æŽ§æ¶ˆæ¯é˜Ÿåˆ—çš„è¿è¡ŒçŠ¶æ€","type":"monitoring","status":"success","startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:01:00","duration":60,"metrics":[{"id":"availability","name":"å¯ç”¨æ€§","description":"æœåŠ¡å¯ç”¨æ€§","unit":"%","healthyRange":{"min":99,"max":100,"description":"å¯ç”¨æ€§åº”ä¿æŒåœ¨99.0-100.0%èŒƒå›´å†…"},"actualValue":99.7677570783947,"health":"healthy","healthScore":91,"timestamp":"2024-06-25 10:00:00"},{"id":"connection_count","name":"è¿žæŽ¥æ•°","description":"å½“å‰è¿žæŽ¥æ•°","unit":"ä¸ª","healthyRange":{"min":0,"max":1000,"description":"è¿žæŽ¥æ•°åº”ä¿æŒåœ¨0-1000ä¸ªèŒƒå›´å†…"},"actualValue":433,"health":"healthy","healthScore":79,"timestamp":"2024-06-25 10:00:00"}],"overallScore":87,"summary":"ä¸­é—´ä»¶ç›‘æŽ§æ‰§è¡Œå®Œæˆï¼Œæ‰€æœ‰æŒ‡æ ‡æ­£å¸¸"}],"analysis":{"overallHealthScore":92,"riskLevel":"low","keyFindings":["æ¶ˆæ¯é˜Ÿåˆ—è¿è¡ŒçŠ¶æ€è‰¯å¥½","æ‰€æœ‰å…³é”®æŒ‡æ ‡åœ¨æ­£å¸¸èŒƒå›´å†…","æ€§èƒ½è¡¨çŽ°ç¨³å®š"],"performanceSummary":"æ¶ˆæ¯é˜Ÿåˆ—æ•´ä½“æ€§èƒ½è¡¨çŽ°ä¼˜ç§€","securitySummary":"å®‰å…¨æ£€æŸ¥é€šè¿‡ï¼Œæ— å®‰å…¨é£Žé™©","recommendations":[{"priority":"medium","category":"æ€§èƒ½ä¼˜åŒ–","title":"ä¼˜åŒ–æ¶ˆæ¯é˜Ÿåˆ—æ€§èƒ½","description":"å»ºè®®å¯¹æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œæ€§èƒ½è°ƒä¼˜","estimatedImpact":"é¢„è®¡å¯æå‡10-15%çš„æ€§èƒ½"}]},"lastUpdated":"2024-06-25 10:00:00","layer":"L2","category":"middleware"},{"nodeId":"middleware_004","nodeName":"é…ç½®ä¸­å¿ƒ","nodeType":"ä¸­é—´ä»¶","status":"completed","executionTime":{"startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:05:00","totalDuration":300},"actions":[{"id":"middleware_004_monitor","name":"ä¸­é—´ä»¶ç›‘æŽ§","description":"ç›‘æŽ§é…ç½®ä¸­å¿ƒçš„è¿è¡ŒçŠ¶æ€","type":"monitoring","status":"success","startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:01:00","duration":60,"metrics":[{"id":"availability","name":"å¯ç”¨æ€§","description":"æœåŠ¡å¯ç”¨æ€§","unit":"%","healthyRange":{"min":99,"max":100,"description":"å¯ç”¨æ€§åº”ä¿æŒåœ¨99.0-100.0%èŒƒå›´å†…"},"actualValue":99.6778886894594,"health":"healthy","healthScore":91,"timestamp":"2024-06-25 10:00:00"},{"id":"connection_count","name":"è¿žæŽ¥æ•°","description":"å½“å‰è¿žæŽ¥æ•°","unit":"ä¸ª","healthyRange":{"min":0,"max":1000,"description":"è¿žæŽ¥æ•°åº”ä¿æŒåœ¨0-1000ä¸ªèŒƒå›´å†…"},"actualValue":245,"health":"healthy","healthScore":77,"timestamp":"2024-06-25 10:00:00"}],"overallScore":95,"summary":"ä¸­é—´ä»¶ç›‘æŽ§æ‰§è¡Œå®Œæˆï¼Œæ‰€æœ‰æŒ‡æ ‡æ­£å¸¸"}],"analysis":{"overallHealthScore":90,"riskLevel":"low","keyFindings":["é…ç½®ä¸­å¿ƒè¿è¡ŒçŠ¶æ€è‰¯å¥½","æ‰€æœ‰å…³é”®æŒ‡æ ‡åœ¨æ­£å¸¸èŒƒå›´å†…","æ€§èƒ½è¡¨çŽ°ç¨³å®š"],"performanceSummary":"é…ç½®ä¸­å¿ƒæ•´ä½“æ€§èƒ½è¡¨çŽ°ä¼˜ç§€","securitySummary":"å®‰å…¨æ£€æŸ¥é€šè¿‡ï¼Œæ— å®‰å…¨é£Žé™©","recommendations":[{"priority":"medium","category":"æ€§èƒ½ä¼˜åŒ–","title":"ä¼˜åŒ–é…ç½®ä¸­å¿ƒæ€§èƒ½","description":"å»ºè®®å¯¹é…ç½®ä¸­å¿ƒè¿›è¡Œæ€§èƒ½è°ƒä¼˜","estimatedImpact":"é¢„è®¡å¯æå‡10-15%çš„æ€§èƒ½"}]},"lastUpdated":"2024-06-25 10:00:00","layer":"L2","category":"middleware"},{"nodeId":"infra_001","nodeName":"Kubernetesé›†ç¾¤","nodeType":"åŸºç¡€è®¾æ–½","status":"completed","executionTime":{"startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:05:00","totalDuration":300},"actions":[{"id":"infra_001_infra","name":"åŸºç¡€è®¾æ–½æ£€æŸ¥","description":"æ£€æŸ¥Kubernetesé›†ç¾¤çš„åŸºç¡€è®¾æ–½çŠ¶æ€","type":"infrastructure","status":"success","startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:01:00","duration":60,"metrics":[{"id":"disk_usage","name":"ç£ç›˜ä½¿ç”¨çŽ‡","description":"ç£ç›˜ç©ºé—´ä½¿ç”¨çŽ‡","unit":"%","healthyRange":{"min":0,"max":85,"description":"ç£ç›˜ä½¿ç”¨çŽ‡åº”ä¿æŒåœ¨0-85%èŒƒå›´å†…"},"actualValue":63.60984416856813,"health":"healthy","healthScore":94,"timestamp":"2024-06-25 10:00:00"},{"id":"network_io","name":"ç½‘ç»œIO","description":"ç½‘ç»œIOåžåé‡","unit":"MB/s","healthyRange":{"min":0,"max":1000,"description":"ç½‘ç»œIOåº”ä¿æŒåœ¨0-1000MB/sèŒƒå›´å†…"},"actualValue":114.45936758587031,"health":"healthy","healthScore":94,"timestamp":"2024-06-25 10:00:00"}],"overallScore":81,"summary":"åŸºç¡€è®¾æ–½æ£€æŸ¥æ‰§è¡Œå®Œæˆï¼Œæ‰€æœ‰æŒ‡æ ‡æ­£å¸¸"}],"analysis":{"overallHealthScore":87,"riskLevel":"low","keyFindings":["Kubernetesé›†ç¾¤è¿è¡ŒçŠ¶æ€è‰¯å¥½","æ‰€æœ‰å…³é”®æŒ‡æ ‡åœ¨æ­£å¸¸èŒƒå›´å†…","æ€§èƒ½è¡¨çŽ°ç¨³å®š"],"performanceSummary":"Kubernetesé›†ç¾¤æ•´ä½“æ€§èƒ½è¡¨çŽ°ä¼˜ç§€","securitySummary":"å®‰å…¨æ£€æŸ¥é€šè¿‡ï¼Œæ— å®‰å…¨é£Žé™©","recommendations":[{"priority":"medium","category":"æ€§èƒ½ä¼˜åŒ–","title":"ä¼˜åŒ–Kubernetesé›†ç¾¤æ€§èƒ½","description":"å»ºè®®å¯¹Kubernetesé›†ç¾¤è¿›è¡Œæ€§èƒ½è°ƒä¼˜","estimatedImpact":"é¢„è®¡å¯æå‡10-15%çš„æ€§èƒ½"}]},"lastUpdated":"2024-06-25 10:00:00","layer":"L1","category":"infrastructure"},{"nodeId":"infra_002","nodeName":"MySQLæ•°æ®åº“","nodeType":"åŸºç¡€è®¾æ–½","status":"running","executionTime":{"startTime":"2024-06-25 09:00:00","endTime":null,"totalDuration":null},"actions":[{"id":"infra_002_performance","name":"æ•°æ®åº“æ€§èƒ½æ£€æŸ¥","description":"æ£€æŸ¥MySQLæ•°æ®åº“çš„æ€§èƒ½æŒ‡æ ‡å’Œè¿è¡ŒçŠ¶æ€","type":"performance_check","status":"success","startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:02:00","duration":120,"metrics":[{"id":"qps","name":"æ¯ç§’æŸ¥è¯¢æ•°","description":"æ•°æ®åº“æ¯ç§’å¤„ç†çš„æŸ¥è¯¢æ•°é‡","unit":"queries/s","healthyRange":{"min":0,"max":5000,"description":"QPSåº”æŽ§åˆ¶åœ¨5000ä»¥å†…"},"actualValue":1247,"health":"healthy","healthScore":88,"timestamp":"2024-06-25 09:02:00"},{"id":"slow_query_rate","name":"æ…¢æŸ¥è¯¢çŽ‡","description":"æ‰§è¡Œæ—¶é—´è¶…è¿‡1ç§’çš„æŸ¥è¯¢æ¯”ä¾‹","unit":"%","healthyRange":{"min":0,"max":5,"description":"æ…¢æŸ¥è¯¢çŽ‡åº”æŽ§åˆ¶åœ¨5%ä»¥ä¸‹"},"actualValue":2.3,"health":"healthy","healthScore":85,"timestamp":"2024-06-25 09:02:00"},{"id":"connection_usage","name":"è¿žæŽ¥ä½¿ç”¨çŽ‡","description":"æ•°æ®åº“è¿žæŽ¥æ± ä½¿ç”¨çŽ‡","unit":"%","healthyRange":{"min":0,"max":80,"description":"è¿žæŽ¥ä½¿ç”¨çŽ‡åº”æŽ§åˆ¶åœ¨80%ä»¥ä¸‹"},"actualValue":45.6,"health":"healthy","healthScore":92,"timestamp":"2024-06-25 09:02:00"}],"overallScore":88,"summary":"MySQLæ•°æ®åº“è¿è¡Œç¨³å®šï¼Œæ€§èƒ½æŒ‡æ ‡è‰¯å¥½"}],"analysis":{"overallHealthScore":92,"riskLevel":"low","keyFindings":["æ•°æ®åº“QPSä¸º1247ï¼Œå¤„ç†èƒ½åŠ›å……è¶³","æ…¢æŸ¥è¯¢çŽ‡2.3%ï¼Œåœ¨åˆç†èŒƒå›´å†…","è¿žæŽ¥ä½¿ç”¨çŽ‡45.6%ï¼Œèµ„æºåˆ©ç”¨åˆç†","ä¸»ä»Žå¤åˆ¶å»¶è¿Ÿå°äºŽ1ç§’"],"performanceSummary":"MySQLæ•°æ®åº“æ•´ä½“æ€§èƒ½è¡¨çŽ°ä¼˜ç§€","securitySummary":"å®‰å…¨æ£€æŸ¥é€šè¿‡ï¼Œæ— å®‰å…¨é£Žé™©","recommendations":[{"priority":"medium","category":"æ€§èƒ½ä¼˜åŒ–","title":"ä¼˜åŒ–MySQLæ•°æ®åº“æ€§èƒ½","description":"å»ºè®®å¯¹MySQLæ•°æ®åº“è¿›è¡Œæ€§èƒ½è°ƒä¼˜","estimatedImpact":"é¢„è®¡å¯æå‡10-15%çš„æ€§èƒ½"}]},"lastUpdated":"2024-06-25 10:00:00","layer":"L1","category":"infrastructure"},{"nodeId":"infra_003","nodeName":"è´Ÿè½½å‡è¡¡å™¨","nodeType":"åŸºç¡€è®¾æ–½","status":"completed","executionTime":{"startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:05:00","totalDuration":300},"actions":[{"id":"infra_003_infra","name":"åŸºç¡€è®¾æ–½æ£€æŸ¥","description":"æ£€æŸ¥è´Ÿè½½å‡è¡¡å™¨çš„åŸºç¡€è®¾æ–½çŠ¶æ€","type":"infrastructure","status":"success","startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:01:00","duration":60,"metrics":[{"id":"disk_usage","name":"ç£ç›˜ä½¿ç”¨çŽ‡","description":"ç£ç›˜ç©ºé—´ä½¿ç”¨çŽ‡","unit":"%","healthyRange":{"min":0,"max":85,"description":"ç£ç›˜ä½¿ç”¨çŽ‡åº”ä¿æŒåœ¨0-85%èŒƒå›´å†…"},"actualValue":48.182034630417974,"health":"healthy","healthScore":92,"timestamp":"2024-06-25 10:00:00"},{"id":"network_io","name":"ç½‘ç»œIO","description":"ç½‘ç»œIOåžåé‡","unit":"MB/s","healthyRange":{"min":0,"max":1000,"description":"ç½‘ç»œIOåº”ä¿æŒåœ¨0-1000MB/sèŒƒå›´å†…"},"actualValue":140.40376593840858,"health":"healthy","healthScore":87,"timestamp":"2024-06-25 10:00:00"}],"overallScore":94,"summary":"åŸºç¡€è®¾æ–½æ£€æŸ¥æ‰§è¡Œå®Œæˆï¼Œæ‰€æœ‰æŒ‡æ ‡æ­£å¸¸"}],"analysis":{"overallHealthScore":95,"riskLevel":"low","keyFindings":["è´Ÿè½½å‡è¡¡å™¨è¿è¡ŒçŠ¶æ€è‰¯å¥½","æ‰€æœ‰å…³é”®æŒ‡æ ‡åœ¨æ­£å¸¸èŒƒå›´å†…","æ€§èƒ½è¡¨çŽ°ç¨³å®š"],"performanceSummary":"è´Ÿè½½å‡è¡¡å™¨æ•´ä½“æ€§èƒ½è¡¨çŽ°ä¼˜ç§€","securitySummary":"å®‰å…¨æ£€æŸ¥é€šè¿‡ï¼Œæ— å®‰å…¨é£Žé™©","recommendations":[{"priority":"medium","category":"æ€§èƒ½ä¼˜åŒ–","title":"ä¼˜åŒ–è´Ÿè½½å‡è¡¡å™¨æ€§èƒ½","description":"å»ºè®®å¯¹è´Ÿè½½å‡è¡¡å™¨è¿›è¡Œæ€§èƒ½è°ƒä¼˜","estimatedImpact":"é¢„è®¡å¯æå‡10-15%çš„æ€§èƒ½"}]},"lastUpdated":"2024-06-25 10:00:00","layer":"L1","category":"infrastructure"},{"nodeId":"infra_004","nodeName":"å­˜å‚¨ç³»ç»Ÿ","nodeType":"åŸºç¡€è®¾æ–½","status":"completed","executionTime":{"startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:05:00","totalDuration":300},"actions":[{"id":"infra_004_infra","name":"åŸºç¡€è®¾æ–½æ£€æŸ¥","description":"æ£€æŸ¥å­˜å‚¨ç³»ç»Ÿçš„åŸºç¡€è®¾æ–½çŠ¶æ€","type":"infrastructure","status":"success","startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:01:00","duration":60,"metrics":[{"id":"disk_usage","name":"ç£ç›˜ä½¿ç”¨çŽ‡","description":"ç£ç›˜ç©ºé—´ä½¿ç”¨çŽ‡","unit":"%","healthyRange":{"min":0,"max":85,"description":"ç£ç›˜ä½¿ç”¨çŽ‡åº”ä¿æŒåœ¨0-85%èŒƒå›´å†…"},"actualValue":44.708948940532636,"health":"healthy","healthScore":77,"timestamp":"2024-06-25 10:00:00"},{"id":"network_io","name":"ç½‘ç»œIO","description":"ç½‘ç»œIOåžåé‡","unit":"MB/s","healthyRange":{"min":0,"max":1000,"description":"ç½‘ç»œIOåº”ä¿æŒåœ¨0-1000MB/sèŒƒå›´å†…"},"actualValue":52.851073520329365,"health":"healthy","healthScore":94,"timestamp":"2024-06-25 10:00:00"}],"overallScore":84,"summary":"åŸºç¡€è®¾æ–½æ£€æŸ¥æ‰§è¡Œå®Œæˆï¼Œæ‰€æœ‰æŒ‡æ ‡æ­£å¸¸"}],"analysis":{"overallHealthScore":87,"riskLevel":"low","keyFindings":["å­˜å‚¨ç³»ç»Ÿè¿è¡ŒçŠ¶æ€è‰¯å¥½","æ‰€æœ‰å…³é”®æŒ‡æ ‡åœ¨æ­£å¸¸èŒƒå›´å†…","æ€§èƒ½è¡¨çŽ°ç¨³å®š"],"performanceSummary":"å­˜å‚¨ç³»ç»Ÿæ•´ä½“æ€§èƒ½è¡¨çŽ°ä¼˜ç§€","securitySummary":"å®‰å…¨æ£€æŸ¥é€šè¿‡ï¼Œæ— å®‰å…¨é£Žé™©","recommendations":[{"priority":"medium","category":"æ€§èƒ½ä¼˜åŒ–","title":"ä¼˜åŒ–å­˜å‚¨ç³»ç»Ÿæ€§èƒ½","description":"å»ºè®®å¯¹å­˜å‚¨ç³»ç»Ÿè¿›è¡Œæ€§èƒ½è°ƒä¼˜","estimatedImpact":"é¢„è®¡å¯æå‡10-15%çš„æ€§èƒ½"}]},"lastUpdated":"2024-06-25 10:00:00","layer":"L1","category":"infrastructure"},{"nodeId":"infra_005","nodeName":"ç½‘ç»œè®¾å¤‡","nodeType":"åŸºç¡€è®¾æ–½","status":"completed","executionTime":{"startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:05:00","totalDuration":300},"actions":[{"id":"infra_005_infra","name":"åŸºç¡€è®¾æ–½æ£€æŸ¥","description":"æ£€æŸ¥ç½‘ç»œè®¾å¤‡çš„åŸºç¡€è®¾æ–½çŠ¶æ€","type":"infrastructure","status":"success","startTime":"2024-06-25 09:00:00","endTime":"2024-06-25 09:01:00","duration":60,"metrics":[{"id":"disk_usage","name":"ç£ç›˜ä½¿ç”¨çŽ‡","description":"ç£ç›˜ç©ºé—´ä½¿ç”¨çŽ‡","unit":"%","healthyRange":{"min":0,"max":85,"description":"ç£ç›˜ä½¿ç”¨çŽ‡åº”ä¿æŒåœ¨0-85%èŒƒå›´å†…"},"actualValue":46.85077074601017,"health":"healthy","healthScore":79,"timestamp":"2024-06-25 10:00:00"},{"id":"network_io","name":"ç½‘ç»œIO","description":"ç½‘ç»œIOåžåé‡","unit":"MB/s","healthyRange":{"min":0,"max":1000,"description":"ç½‘ç»œIOåº”ä¿æŒåœ¨0-1000MB/sèŒƒå›´å†…"},"actualValue":50.67405822897634,"health":"healthy","healthScore":79,"timestamp":"2024-06-25 10:00:00"}],"overallScore":82,"summary":"åŸºç¡€è®¾æ–½æ£€æŸ¥æ‰§è¡Œå®Œæˆï¼Œæ‰€æœ‰æŒ‡æ ‡æ­£å¸¸"}],"analysis":{"overallHealthScore":88,"riskLevel":"low","keyFindings":["ç½‘ç»œè®¾å¤‡è¿è¡ŒçŠ¶æ€è‰¯å¥½","æ‰€æœ‰å…³é”®æŒ‡æ ‡åœ¨æ­£å¸¸èŒƒå›´å†…","æ€§èƒ½è¡¨çŽ°ç¨³å®š"],"performanceSummary":"ç½‘ç»œè®¾å¤‡æ•´ä½“æ€§èƒ½è¡¨çŽ°ä¼˜ç§€","securitySummary":"å®‰å…¨æ£€æŸ¥é€šè¿‡ï¼Œæ— å®‰å…¨é£Žé™©","recommendations":[{"priority":"medium","category":"æ€§èƒ½ä¼˜åŒ–","title":"ä¼˜åŒ–ç½‘ç»œè®¾å¤‡æ€§èƒ½","description":"å»ºè®®å¯¹ç½‘ç»œè®¾å¤‡è¿›è¡Œæ€§èƒ½è°ƒä¼˜","estimatedImpact":"é¢„è®¡å¯æå‡10-15%çš„æ€§èƒ½"}]},"lastUpdated":"2024-06-25 10:00:00","layer":"L1","category":"infrastructure"}]'),Pe={healthy:{color:"#52c41a",label:"å¥åº·",description:"æŒ‡æ ‡æ­£å¸¸ï¼Œè¿è¡Œè‰¯å¥½"},warning:{color:"#faad14",label:"è­¦å‘Š",description:"æŒ‡æ ‡å¼‚å¸¸ï¼Œéœ€è¦å…³æ³¨"},critical:{color:"#ff4d4f",label:"ä¸¥é‡",description:"æŒ‡æ ‡ä¸¥é‡å¼‚å¸¸ï¼Œéœ€è¦ç«‹å³å¤„ç†"},unknown:{color:"#d9d9d9",label:"æœªçŸ¥",description:"æ— æ³•èŽ·å–æŒ‡æ ‡çŠ¶æ€"}},$e={health_check:{name:"å¥åº·æ£€æŸ¥",icon:"heart",color:"#52c41a",description:"æ£€æŸ¥æœåŠ¡åŸºç¡€å¥åº·çŠ¶æ€"},monitoring:{name:"ç›‘æŽ§æ£€æŸ¥",icon:"bar-chart",color:"#1890ff",description:"å®žæ—¶ç›‘æŽ§ç³»ç»ŸçŠ¶æ€"},performance_check:{name:"æ€§èƒ½æ£€æŸ¥",icon:"dashboard",color:"#722ed1",description:"åˆ†æžæ€§èƒ½æŒ‡æ ‡å’Œèµ„æºä½¿ç”¨"},tracing:{name:"é“¾è·¯è¿½è¸ª",icon:"node-index",color:"#13c2c2",description:"è¿½è¸ªè¯·æ±‚é“¾è·¯å’Œè°ƒç”¨å…³ç³»"},data_sync:{name:"æ•°æ®åŒæ­¥",icon:"sync",color:"#fa8c16",description:"æ£€æŸ¥æ•°æ®åŒæ­¥çŠ¶æ€"},infrastructure:{name:"åŸºç¡€è®¾æ–½",icon:"cluster",color:"#eb2f96",description:"æ£€æŸ¥åŸºç¡€è®¾æ–½çŠ¶æ€"},analysis:{name:"åˆ†æžæ£€æŸ¥",icon:"line-chart",color:"#52c41a",description:"æ·±åº¦åˆ†æžç³»ç»ŸæŒ‡æ ‡"}},Ve={low:{color:"#52c41a",label:"ä½Žé£Žé™©",description:"ç³»ç»Ÿè¿è¡Œæ­£å¸¸ï¼Œé£Žé™©è¾ƒä½Ž"},medium:{color:"#faad14",label:"ä¸­ç­‰é£Žé™©",description:"å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œéœ€è¦å…³æ³¨"},high:{color:"#ff7a45",label:"é«˜é£Žé™©",description:"å­˜åœ¨ä¸¥é‡é—®é¢˜ï¼Œéœ€è¦åŠæ—¶å¤„ç†"},critical:{color:"#ff4d4f",label:"ä¸¥é‡é£Žé™©",description:"ç³»ç»Ÿå¼‚å¸¸ï¼Œéœ€è¦ç«‹å³å¤„ç†"}},D={diagnosticReports:ze,metricHealthLevels:Pe,actionTypes:$e,riskLevels:Ve},{Title:H,Text:g,Paragraph:ne}=J,Ue=d(_)`
  margin-bottom: 16px;
  
  .ant-card-head {
    padding: 12px 16px;
    min-height: auto;
  }
  
  .ant-card-body {
    padding: 16px;
  }
`,De=d(_)`
  margin-bottom: 12px;
  border: 1px solid #f0f0f0;
  
  .ant-card-body {
    padding: 12px;
  }
`,He=d.div`
  padding: 16px;
  border-radius: 8px;
  background: ${o=>o.score>=90?"linear-gradient(135deg, #f6ffed 0%, #d9f7be 100%)":o.score>=70?"linear-gradient(135deg, #fffbe6 0%, #fff1b8 100%)":"linear-gradient(135deg, #fff2f0 0%, #ffccc7 100%)"};
  border: 1px solid ${o=>o.score>=90?"#b7eb8f":o.score>=70?"#ffe58f":"#ffa39e"};
`,Ee=({nodeIds:o})=>{const[n,v]=x.useState([]),[y,i]=x.useState(!0),L=x.useMemo(()=>o,[JSON.stringify(o)]),$=x.useCallback(async()=>{i(!0);try{await new Promise(a=>setTimeout(a,300));let t=D.diagnosticReports;if(L&&L.length>0){const a=D.diagnosticReports.filter(s=>L.includes(s.nodeId));a.length>0&&(t=a)}v(t)}catch(t){console.error("åŠ è½½è¯Šæ–­æŠ¥å‘Šå¤±è´¥:",t)}finally{i(!1)}},[L]);x.useEffect(()=>{$()},[$]);const l=t=>{var a;return((a=D.metricHealthLevels[t])==null?void 0:a.color)||"#d9d9d9"},r=t=>({ä¸šåŠ¡åœºæ™¯:"purple",ä¸šåŠ¡é“¾è·¯:"blue",ä¸šåŠ¡ç³»ç»Ÿ:"green",ä¸­é—´ä»¶:"orange",åŸºç¡€è®¾æ–½:"red",entity:"blue",sequence:"green"})[t]||"default",h=t=>{let a=0;t.actions.forEach(m=>{m.metrics&&m.metrics.forEach(k=>{(k.health==="critical"||k.health==="warning")&&a++})});const s=t.actions.filter(m=>m.status==="error"||m.status==="failed");return a+=s.length,(t.analysis.riskLevel==="high"||t.analysis.riskLevel==="critical")&&(a+=1),a},f=t=>{const a=l(t);switch(t){case"healthy":return e.jsx(K,{style:{color:a}});case"warning":return e.jsx(he,{style:{color:a}});case"critical":return e.jsx(ee,{style:{color:a}});default:return e.jsx(me,{style:{color:a}})}},T=t=>{const a=D.actionTypes[t],s=(a==null?void 0:a.color)||"#666";switch(t){case"health_check":return e.jsx(de,{style:{color:s}});case"performance_analysis":return e.jsx(ce,{style:{color:s}});case"fault_analysis":return e.jsx(le,{style:{color:s}});case"security_scan":return e.jsx(oe,{style:{color:s}});default:return e.jsx(Z,{style:{color:s}})}},S=t=>{switch(t){case"up":return e.jsx(be,{style:{color:"#ff4d4f"}});case"down":return e.jsx(Se,{style:{color:"#52c41a"}});case"stable":return e.jsx(_e,{style:{color:"#1890ff"}});default:return null}},b=t=>D.riskLevels[t]||{color:"#d9d9d9",label:"æœªçŸ¥",description:"æœªçŸ¥é£Žé™©ç­‰çº§"},I=t=>{var a;return e.jsxs(De,{size:"small",children:[e.jsxs(U,{gutter:16,align:"middle",children:[e.jsx(u,{span:8,children:e.jsxs("div",{children:[e.jsx(g,{strong:!0,children:t.name}),e.jsx("br",{}),e.jsx(g,{type:"secondary",style:{fontSize:12},children:t.description})]})}),e.jsx(u,{span:4,children:e.jsx(V,{title:"å®žé™…å€¼",value:t.actualValue,suffix:t.unit,valueStyle:{fontSize:16}})}),e.jsx(u,{span:6,children:e.jsxs("div",{children:[e.jsx(g,{type:"secondary",style:{fontSize:12},children:"å¥åº·èŒƒå›´"}),e.jsx("br",{}),e.jsx(g,{style:{fontSize:12},children:t.healthyRange.description})]})}),e.jsx(u,{span:3,children:e.jsxs("div",{style:{textAlign:"center"},children:[f(t.health),e.jsx("br",{}),e.jsx(g,{style:{fontSize:12,color:l(t.health)},children:((a=D.metricHealthLevels[t.health])==null?void 0:a.label)||"æœªçŸ¥"})]})}),e.jsx(u,{span:3,children:e.jsx(X,{type:"circle",size:40,percent:t.healthScore,strokeColor:l(t.health),format:()=>`${t.healthScore}`})})]}),t.trend&&e.jsxs("div",{style:{marginTop:8,fontSize:12,color:"#666",display:"flex",alignItems:"center",gap:4},children:[e.jsx("span",{children:"è¶‹åŠ¿:"}),S(t.trend),e.jsx("span",{children:t.trend==="up"?"ä¸Šå‡":t.trend==="down"?"ä¸‹é™":"ç¨³å®š"}),t.previousValue&&e.jsxs("span",{children:["(ä¸Šæ¬¡: ",t.previousValue,t.unit,")"]})]})]},t.id)},R=t=>e.jsxs(_,{size:"small",style:{marginBottom:16},children:[e.jsxs(U,{gutter:16,align:"middle",style:{marginBottom:16},children:[e.jsx(u,{span:2,children:T(t.type)}),e.jsxs(u,{span:10,children:[e.jsx(H,{level:5,style:{margin:0},children:t.name}),e.jsx(g,{type:"secondary",children:t.description})]}),e.jsx(u,{span:4,children:e.jsx(V,{title:"æ‰§è¡Œæ—¶é•¿",value:t.duration,suffix:"ç§’",valueStyle:{fontSize:14}})}),e.jsx(u,{span:4,children:e.jsx(V,{title:"æŒ‡æ ‡æ•°é‡",value:t.metrics.length,suffix:"é¡¹",valueStyle:{fontSize:14}})}),e.jsx(u,{span:4,children:e.jsx(X,{type:"circle",size:50,percent:t.overallScore,strokeColor:t.overallScore>=90?"#52c41a":t.overallScore>=70?"#faad14":"#ff4d4f",format:()=>`${t.overallScore}`})})]}),e.jsx(ae,{style:{margin:"12px 0"}}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(g,{strong:!0,children:"æ‰§è¡Œæ‘˜è¦: "}),e.jsx(g,{children:t.summary})]}),e.jsx(H,{level:5,children:"æŒ‡æ ‡æ£€æŸ¥è¯¦æƒ…"}),t.metrics.map(I)]},t.id),c=t=>e.jsx(M,{dataSource:t,renderItem:a=>e.jsx(M.Item,{children:e.jsx(_,{size:"small",style:{width:"100%"},children:e.jsxs(U,{gutter:16,align:"top",children:[e.jsx(u,{span:2,children:e.jsx(P,{color:a.priority==="high"?"red":a.priority==="medium"?"orange":"blue",children:a.priority==="high"?"é«˜":a.priority==="medium"?"ä¸­":"ä½Ž"})}),e.jsx(u,{span:3,children:e.jsx(P,{color:"purple",children:a.category==="performance"?"æ€§èƒ½":a.category==="security"?"å®‰å…¨":a.category==="reliability"?"å¯é æ€§":"ç»´æŠ¤"})}),e.jsx(u,{span:19,children:e.jsxs("div",{children:[e.jsx(g,{strong:!0,children:a.title}),e.jsx("br",{}),e.jsx(g,{type:"secondary",style:{fontSize:12},children:a.description}),e.jsx("br",{}),e.jsxs(g,{style:{fontSize:12,color:"#1890ff"},children:["é¢„æœŸå½±å“: ",a.estimatedImpact]})]})})]})})})});if(y)return e.jsx(Y,{message:"æ­£åœ¨åŠ è½½è¯Šæ–­æŠ¥å‘Š...",type:"info",showIcon:!0});if(!n||n.length===0)return e.jsx(Y,{message:"æš‚æ— è¯Šæ–­æŠ¥å‘Š",description:"èŠ‚ç‚¹æ‰§è¡Œå®ŒæˆåŽå°†ç”Ÿæˆè¯¦ç»†çš„è¯Šæ–­æŠ¥å‘Š",type:"info",showIcon:!0});const p=n.map((t,a)=>{const s=b(t.analysis.riskLevel);return{key:a.toString(),label:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx(q,{status:t.status==="completed"?"success":t.status==="running"?"processing":t.status==="failed"?"error":"default"}),e.jsx("span",{style:{fontWeight:"bold"},children:t.nodeName}),e.jsx(P,{color:r(t.nodeType),children:t.nodeType}),e.jsx(P,{color:s.color,children:s.label})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx(fe,{title:"æ•´ä½“å¥åº·è¯„åˆ†",children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx(te,{style:{color:"#faad14"}}),e.jsxs("span",{style:{fontSize:14,fontWeight:"bold"},children:[t.analysis.overallHealthScore,"/100"]})]})}),e.jsxs("span",{style:{fontSize:12,color:"#666"},children:["åŠ¨ä½œ: ",t.actions.length,"é¡¹"]}),e.jsxs("span",{style:{fontSize:12,color:"#666"},children:["å»ºè®®: ",t.analysis.recommendations.length,"æ¡"]}),e.jsxs("span",{style:{fontSize:12,color:h(t)>0?"#ff4d4f":"#666"},children:["é£Žé™©: ",h(t),"é¡¹"]})]})]}),children:e.jsxs(Ue,{children:[e.jsx(He,{score:t.analysis.overallHealthScore,children:e.jsxs(U,{gutter:16,align:"middle",children:[e.jsx(u,{span:8,children:e.jsx(V,{title:"æ•´ä½“å¥åº·è¯„åˆ†",value:t.analysis.overallHealthScore,suffix:"/100",valueStyle:{fontSize:32,fontWeight:"bold",color:t.analysis.overallHealthScore>=90?"#52c41a":t.analysis.overallHealthScore>=70?"#faad14":"#ff4d4f"},prefix:e.jsx(te,{})})}),e.jsxs(u,{span:8,children:[e.jsxs("div",{children:[e.jsx(g,{strong:!0,children:"é£Žé™©ç­‰çº§: "}),e.jsx(P,{color:s.color,style:{fontSize:14},children:s.label})]}),e.jsxs("div",{style:{marginTop:8},children:[e.jsx(g,{strong:!0,children:"æ‰§è¡Œæ—¶é•¿: "}),e.jsxs(g,{children:[t.executionTime.totalDuration||0,"ç§’"]})]})]}),e.jsx(u,{span:8,children:e.jsxs("div",{children:[e.jsx(g,{strong:!0,children:"æœ€åŽæ›´æ–°: "}),e.jsx(g,{type:"secondary",children:t.lastUpdated})]})})]})}),e.jsx(ae,{}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs(H,{level:5,children:[e.jsx(xe,{style:{color:"#faad14",marginRight:8}}),"å…³é”®å‘çŽ°"]}),e.jsx(M,{size:"small",dataSource:t.analysis.keyFindings,renderItem:m=>e.jsx(M.Item,{children:e.jsxs(g,{children:["â€¢ ",m]})})})]}),e.jsxs(U,{gutter:16,style:{marginBottom:24},children:[e.jsx(u,{span:12,children:e.jsx(_,{size:"small",title:"æ€§èƒ½æ‘˜è¦",children:e.jsx(ne,{style:{fontSize:13,margin:0},children:t.analysis.performanceSummary})})}),e.jsx(u,{span:12,children:e.jsx(_,{size:"small",title:"å®‰å…¨æ‘˜è¦",children:e.jsx(ne,{style:{fontSize:13,margin:0},children:t.analysis.securitySummary})})})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsx(H,{level:5,children:"è¯Šæ–­åŠ¨ä½œè¯¦æƒ…"}),t.actions.map(R)]}),e.jsxs("div",{children:[e.jsx(H,{level:5,children:"ä¼˜åŒ–å»ºè®®"}),c(t.analysis.recommendations)]})]})}});return e.jsx(je,{defaultActiveKey:["0"],ghost:!0,items:p})};var z=(o=>(o.PENDING="pending",o.RUNNING="running",o.COMPLETED="completed",o.FAILED="failed",o.SKIPPED="skipped",o))(z||{});const Me=d.div`
  width: 100%;
  height: 800px;
  border: 1px solid #d9d9d9;
  border-radius: 6px;
  background: #fafafa;
  position: relative;
  overflow: hidden;
  margin-top: 16px;
  
  svg {
    width: 100%;
    height: 100%;
  }
`,Be=d.div`
  position: absolute;
  top: 16px;
  right: 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  z-index: 10;
`,G=d.div`
  background: white;
  padding: 12px;
  border-radius: 6px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  min-width: 120px;
`,W=d.div`
  font-size: 12px;
  margin-bottom: 8px;
  font-weight: bold;
  display: flex;
  align-items: center;
  gap: 4px;
  
  &::before {
    content: 'â‹®â‹®';
    color: #ccc;
    font-size: 10px;
    line-height: 1;
  }
`,re=d.div`
  display: flex;
  flex-direction: column;
  gap: 4px;
`,C=d.div`
  display: flex;
  align-items: center;
  gap: 8px;
`,E=d.span`
  font-size: 14px;
`,Ae=d.div`
  width: 100%;
  margin-bottom: 16px;
  
  .ant-alert {
    border-radius: 8px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.03);
    border: 1px solid #d9ecff;
    
    .ant-alert-message {
      font-weight: 600;
      margin-bottom: 4px;
      color: #1890ff;
    }
    
    .ant-alert-description {
      line-height: 1.6;
      color: rgba(0, 0, 0, 0.65);
      margin: 0;
    }
    
    .ant-alert-icon {
      color: #1890ff;
    }
  }
  
  @media (max-width: 1200px) {
    .ant-alert {
      .ant-alert-description {
        font-size: 13px;
      }
    }
  }
  
  @media (max-width: 768px) {
    margin-bottom: 12px;
    
    .ant-alert {
      .ant-alert-message {
        font-size: 14px;
      }
      
      .ant-alert-description {
        font-size: 12px;
        line-height: 1.5;
      }
    }
  }
`,Fe=d.div`
  width: 100%;
  display: flex;
  flex-direction: column;
`,N=d.span`
  font-size: 11px;
`,Oe=d.div`
  display: flex;
  flex-direction: column;
  gap: 4px;
`,qe=d.div`
  display: flex;
  align-items: center;
  gap: 8px;
`,Ke=d.span`
  font-size: 11px;
  color: #666;
`,B=[{id:"L5",name:"L5 - ä¸šåŠ¡åœºæ™¯å±‚",level:5,color:"rgba(114, 46, 209, 0.1)",borderColor:"#722ed1",description:"ä¸šåŠ¡åœºæ™¯å’Œç”¨æˆ·ä½“éªŒå±‚é¢",height:120},{id:"L4",name:"L4 - ä¸šåŠ¡é“¾è·¯å±‚",level:4,color:"rgba(24, 144, 255, 0.1)",borderColor:"#1890ff",description:"ä¸šåŠ¡æµç¨‹å’Œé“¾è·¯å±‚é¢",height:120},{id:"L3",name:"L3 - ä¸šåŠ¡ç³»ç»Ÿå±‚",level:3,color:"rgba(82, 196, 26, 0.1)",borderColor:"#52c41a",description:"ä¸šåŠ¡åº”ç”¨å’Œç³»ç»Ÿå±‚é¢",height:120},{id:"L2",name:"L2 - ä¸­é—´ä»¶å±‚",level:2,color:"rgba(250, 173, 20, 0.1)",borderColor:"#faad14",description:"ä¸­é—´ä»¶å’ŒæœåŠ¡å±‚é¢",height:120},{id:"L1",name:"L1 - åŸºç¡€è®¾æ–½å±‚",level:1,color:"rgba(255, 77, 79, 0.1)",borderColor:"#ff4d4f",description:"åŸºç¡€è®¾æ–½å’Œèµ„æºå±‚é¢",height:120}],Qe=({nodes:o,onNodeClick:n})=>{const v=x.useRef(null),y=x.useMemo(()=>o,[JSON.stringify(o)]),i=(l,r,h)=>{const S=h-60-40,b=10,I=5-l.level,R=B.length,c=(S-b*(R-1))/R;return{x:20,y:80+I*(c+b),width:r-20*2,height:c,rx:8,ry:8}},L=(l,r)=>{if(l.length===0)return;const h=80,T=r.width-40*2;let S=h,b=(l.length-1)*S;b>T&&(S=Math.max(60,T/(l.length-1)),b=(l.length-1)*S);const I=r.x+(r.width-b)/2,R=r.y+r.height/2,c=Math.floor(T/h)+1;if(l.length<=c)l.forEach((p,t)=>{p.x=I+t*S,p.y=R});else{const p=Math.ceil(l.length/c),t=Math.max(80,(r.height-40)/p);l.forEach((a,s)=>{const m=Math.floor(s/c),k=s%c,ue=(Math.min(c,l.length-m*c)-1)*h,pe=r.x+(r.width-ue)/2;a.x=pe+k*h,a.y=r.y+40+m*t})}},$=()=>{if(!y||y.length===0||!v.current)return;const l=w(v.current);l.selectAll("*").remove();const r=1200,h=800,f=y.map(a=>({...a})),T=l.append("g"),S=new Map;B.forEach(a=>{S.set(a.id,f.filter(s=>s.layer===a.id))}),B.forEach(a=>{const s=i(a,r,h),m=S.get(a.id)||[];L(m,s);const k=T.append("g").attr("class",`layer-${a.id}`);k.append("rect").attr("x",s.x).attr("y",s.y).attr("width",s.width).attr("height",s.height).attr("rx",s.rx).attr("ry",s.ry).attr("fill",a.color).attr("stroke",a.borderColor).attr("stroke-width",2).attr("stroke-dasharray","8,4").attr("opacity",.8),k.append("text").attr("x",s.x+20).attr("y",s.y+25).attr("font-size","16px").attr("font-weight","bold").attr("fill",a.borderColor).text(a.name),k.append("text").attr("x",s.x+20).attr("y",s.y+45).attr("font-size","12px").attr("fill","#666").text(a.description),k.append("text").attr("x",s.x+s.width-100).attr("y",s.y+25).attr("font-size","12px").attr("fill","#666").text(`èŠ‚ç‚¹æ•°: ${m.length}`)});const b=[];f.forEach(a=>{a.dependencies&&a.dependencies.forEach(s=>{const m=f.find(k=>k.id===s);m&&b.push({source:m,target:a,type:"dependency"})})}),l.append("defs").append("marker").attr("id","dependency-arrow").attr("viewBox","0 -5 10 10").attr("refX",35).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("fill","#666");const R=T.append("g").selectAll("line").data(b).enter().append("line").attr("stroke","#666").attr("stroke-opacity",.6).attr("stroke-width",2).attr("stroke-dasharray","5,5").attr("marker-end","url(#dependency-arrow)").attr("x1",a=>a.source.x).attr("y1",a=>a.source.y).attr("x2",a=>a.target.x).attr("y2",a=>a.target.y),c=a=>{switch(a){case z.COMPLETED:return"#52c41a";case z.RUNNING:return"#1890ff";case z.FAILED:return"#ff4d4f";case z.PENDING:return"#d9d9d9";case z.SKIPPED:return"#faad14";default:return"#d9d9d9"}},p=a=>{switch(a.layer){case"L5":return"ðŸŽ¯";case"L4":return"ðŸ”—";case"L3":return"ðŸ’¼";case"L2":return"âš™ï¸";case"L1":return"ðŸ—ï¸";default:return a.type==="entity"?"ðŸ”§":"âš¡"}},t=T.append("g").selectAll("g").data(f).enter().append("g").attr("class","node").attr("transform",a=>`translate(${a.x},${a.y})`).style("cursor","grab").call(Ne().on("start",function(a,s){w(this).classed("dragging",!0),w(this).style("cursor","grabbing"),w(this).select("circle").transition().duration(100).attr("r",35).attr("stroke-width",4),a.sourceEvent.stopPropagation()}).on("drag",function(a,s){s.x=a.x,s.y=a.y,w(this).attr("transform",`translate(${s.x},${s.y})`),R.attr("x1",m=>m.source.x).attr("y1",m=>m.source.y).attr("x2",m=>m.target.x).attr("y2",m=>m.target.y)}).on("end",function(a,s){w(this).classed("dragging",!1),w(this).style("cursor","grab"),w(this).select("circle").transition().duration(200).attr("r",30).attr("stroke-width",3),setTimeout(()=>{a.sourceEvent.preventDefault=!1},100)}));t.append("circle").attr("r",30).attr("fill",a=>c(a.status)).attr("stroke","#fff").attr("stroke-width",3).attr("filter","drop-shadow(2px 2px 4px rgba(0,0,0,0.2))"),t.append("text").attr("text-anchor","middle").attr("dy","0.35em").attr("font-size","16px").text(a=>p(a)),t.append("text").attr("text-anchor","middle").attr("dy","3.8em").attr("font-size","12px").attr("fill","#333").attr("font-weight","500").text(a=>a.name),t.on("click",function(a,s){a.defaultPrevented||n&&n(s)}),t.on("mouseenter",function(a,s){w(this).classed("dragging")||w(this).select("circle").transition().duration(200).attr("r",35).attr("stroke-width",4)}).on("mouseleave",function(a,s){w(this).classed("dragging")||w(this).select("circle").transition().duration(200).attr("r",30).attr("stroke-width",3)})};return x.useEffect(()=>{$()},[y]),e.jsxs(Fe,{children:[e.jsx(Ae,{children:e.jsx(Y,{message:"åˆ†å±‚æ‹“æ‰‘è§†å›¾",description:"æŒ‰ç…§ä¸šåŠ¡å±‚çº§ä»Žä¸Šåˆ°ä¸‹å±•ç¤ºèŠ‚ç‚¹å…³ç³»ï¼šL5ä¸šåŠ¡åœºæ™¯å±‚ â†’ L4ä¸šåŠ¡é“¾è·¯å±‚ â†’ L3ä¸šåŠ¡ç³»ç»Ÿå±‚ â†’ L2ä¸­é—´ä»¶å±‚ â†’ L1åŸºç¡€è®¾æ–½å±‚ã€‚å¯ä»¥æ‹–æ‹½èŠ‚ç‚¹è°ƒæ•´ä½ç½®ï¼Œç‚¹å‡»èŠ‚ç‚¹æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ã€‚",type:"info",showIcon:!0})}),e.jsxs(Me,{children:[e.jsx("svg",{ref:v}),e.jsxs(Be,{children:[e.jsxs(G,{children:[e.jsx(W,{children:"æ‰§è¡ŒçŠ¶æ€"}),e.jsxs(re,{children:[e.jsxs(C,{children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:"#52c41a"}}),e.jsx(N,{children:"å·²å®Œæˆ"})]}),e.jsxs(C,{children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:"#1890ff"}}),e.jsx(N,{children:"è¿è¡Œä¸­"})]}),e.jsxs(C,{children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:"#d9d9d9"}}),e.jsx(N,{children:"ç­‰å¾…ä¸­"})]}),e.jsxs(C,{children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:"#ff4d4f"}}),e.jsx(N,{children:"å¤±è´¥"})]}),e.jsxs(C,{children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:"#faad14"}}),e.jsx(N,{children:"å·²è·³è¿‡"})]})]})]}),e.jsxs(G,{children:[e.jsx(W,{children:"ä¸šåŠ¡å±‚çº§"}),e.jsx(Oe,{children:B.map(l=>e.jsxs(qe,{children:[e.jsx("div",{style:{width:12,height:12,background:l.color,border:`1px solid ${l.borderColor}`,borderRadius:2}}),e.jsx(Ke,{children:l.name})]},l.id))})]}),e.jsxs(G,{children:[e.jsx(W,{children:"å›¾æ ‡è¯´æ˜Ž"}),e.jsxs(re,{children:[e.jsxs(C,{children:[e.jsx(E,{children:"ðŸŽ¯"}),e.jsx(N,{children:"ä¸šåŠ¡åœºæ™¯"})]}),e.jsxs(C,{children:[e.jsx(E,{children:"ðŸ”—"}),e.jsx(N,{children:"ä¸šåŠ¡é“¾è·¯"})]}),e.jsxs(C,{children:[e.jsx(E,{children:"ðŸ’¼"}),e.jsx(N,{children:"ä¸šåŠ¡ç³»ç»Ÿ"})]}),e.jsxs(C,{children:[e.jsx(E,{children:"âš™ï¸"}),e.jsx(N,{children:"ä¸­é—´ä»¶"})]}),e.jsxs(C,{children:[e.jsx(E,{children:"ðŸ—ï¸"}),e.jsx(N,{children:"åŸºç¡€è®¾æ–½"})]})]})]})]})]})]})},{Text:xt}=J,Ge=({visible:o,node:n,panels:v,allNodes:y,onClose:i})=>{var l;const L=r=>{switch(r){case"success":return e.jsx(K,{style:{color:"#52c41a"}});case"warning":return e.jsx(he,{style:{color:"#faad14"}});case"error":return e.jsx(ee,{style:{color:"#ff4d4f"}});default:return e.jsx(me,{style:{color:"#1890ff"}})}},$=r=>{switch(r){case"health_check":return e.jsx(de,{style:{color:"#52c41a"}});case"performance_analysis":return e.jsx(ce,{style:{color:"#1890ff"}});case"fault_analysis":return e.jsx(le,{style:{color:"#ff4d4f"}});case"security_scan":return e.jsx(oe,{style:{color:"#faad14"}});default:return e.jsx(Z,{style:{color:"#666"}})}};return n?e.jsx(ve,{title:`${n.name} - è¯¦ç»†ä¿¡æ¯`,placement:"right",width:600,open:o,onClose:i,children:e.jsxs("div",{children:[e.jsx(_,{title:"åŸºæœ¬ä¿¡æ¯",size:"small",style:{marginBottom:16},children:e.jsxs(j,{column:1,size:"small",children:[e.jsx(j.Item,{label:"èŠ‚ç‚¹åç§°",children:n.name}),e.jsx(j.Item,{label:"èŠ‚ç‚¹ç±»åž‹",children:e.jsx(P,{color:n.type==="entity"?"blue":"green",children:n.type==="entity"?"å®žä½“":"æ—¶åº"})}),e.jsx(j.Item,{label:"åˆ†ç±»",children:n.category}),e.jsx(j.Item,{label:"æ‰€å±žé¢æ¿",children:e.jsx(P,{color:"purple",children:(l=v.find(r=>r.id===n.panel))==null?void 0:l.name})}),e.jsx(j.Item,{label:"æ‰§è¡ŒçŠ¶æ€",children:e.jsx(q,{status:n.status==="completed"?"success":n.status==="running"?"processing":n.status==="failed"?"error":"default",text:n.status==="completed"?"å·²å®Œæˆ":n.status==="running"?"è¿è¡Œä¸­":n.status==="failed"?"å¤±è´¥":n.status==="pending"?"ç­‰å¾…ä¸­":"æœªçŸ¥"})}),e.jsx(j.Item,{label:"å¼€å§‹æ—¶é—´",children:n.startTime||"æœªå¼€å§‹"}),e.jsx(j.Item,{label:"ç»“æŸæ—¶é—´",children:n.endTime||"æœªç»“æŸ"}),e.jsx(j.Item,{label:"æ‰§è¡Œæ—¶é•¿",children:n.duration?`${n.duration}ç§’`:"æœªå®Œæˆ"})]})}),e.jsx(_,{title:"æ£€æŸ¥åŠ¨ä½œ",size:"small",style:{marginBottom:16},children:e.jsx(Q,{wrap:!0,children:n.actions.map(r=>e.jsx(P,{color:"blue",icon:$(r),children:r==="health_check"?"å¥åº·æ£€æŸ¥":r==="performance_analysis"?"æ€§èƒ½åˆ†æž":r==="fault_analysis"?"æ•…éšœåˆ†æž":r==="security_scan"?"å®‰å…¨æ‰«æ":r},r))})}),n.results&&n.results.length>0&&e.jsx(_,{title:"æ‰§è¡Œç»“æžœ",size:"small",children:e.jsx(se,{children:n.results.map((r,h)=>e.jsx(se.Item,{dot:L(r.status),children:e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:4},children:r.actionName}),e.jsx("div",{style:{color:"#666",marginBottom:4},children:r.message}),e.jsx("div",{style:{fontSize:12,color:"#999"},children:r.timestamp})]})},h))})}),n.dependencies&&n.dependencies.length>0&&e.jsx(_,{title:"ä¾èµ–èŠ‚ç‚¹",size:"small",style:{marginTop:16},children:e.jsx(Q,{wrap:!0,children:n.dependencies.map(r=>{const h=y.find(f=>f.id===r);return e.jsx(P,{color:(h==null?void 0:h.status)==="completed"?"green":"default",children:(h==null?void 0:h.name)||r},r)})})})]})}):null},We=[{id:"scenario_001",name:"ç”¨æˆ·è´­ä¹°æµç¨‹",type:"sequence",category:"business_scenario",layer:"L5",status:"running",actions:["åœºæ™¯ç›‘æŽ§","ç”¨æˆ·ä½“éªŒåˆ†æž"],dependencies:[]},{id:"scenario_002",name:"è®¢å•å±¥çº¦åœºæ™¯",type:"sequence",category:"business_scenario",layer:"L5",status:"completed",actions:["å±¥çº¦ç›‘æŽ§","å¼‚å¸¸å¤„ç†"],dependencies:[]},{id:"chain_001",name:"ç”¨æˆ·æ³¨å†Œé“¾è·¯",type:"sequence",category:"business_chain",layer:"L4",status:"completed",actions:["é“¾è·¯è¿½è¸ª","æ€§èƒ½ç›‘æŽ§"],dependencies:["scenario_001"]},{id:"chain_002",name:"æ”¯ä»˜å¤„ç†é“¾è·¯",type:"sequence",category:"business_chain",layer:"L4",status:"running",actions:["æ”¯ä»˜ç›‘æŽ§","é£ŽæŽ§æ£€æŸ¥"],dependencies:["scenario_001"]},{id:"chain_003",name:"åº“å­˜ç®¡ç†é“¾è·¯",type:"sequence",category:"business_chain",layer:"L4",status:"pending",actions:["åº“å­˜ç›‘æŽ§","è¡¥è´§é¢„è­¦"],dependencies:["scenario_002"]},{id:"system_001",name:"ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ",type:"entity",category:"business_system",layer:"L3",status:"completed",actions:["ç³»ç»Ÿå¥åº·æ£€æŸ¥","æŽ¥å£ç›‘æŽ§"],dependencies:["chain_001"]},{id:"system_002",name:"è®¢å•ç®¡ç†ç³»ç»Ÿ",type:"entity",category:"business_system",layer:"L3",status:"running",actions:["è®¢å•å¤„ç†ç›‘æŽ§","æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥"],dependencies:["chain_002","chain_003"]},{id:"system_003",name:"æ”¯ä»˜ç³»ç»Ÿ",type:"entity",category:"business_system",layer:"L3",status:"completed",actions:["æ”¯ä»˜ç½‘å…³æ£€æŸ¥","äº¤æ˜“ç›‘æŽ§"],dependencies:["chain_002"]},{id:"system_004",name:"åº“å­˜ç³»ç»Ÿ",type:"entity",category:"business_system",layer:"L3",status:"failed",actions:["åº“å­˜åŒæ­¥æ£€æŸ¥","é¢„è­¦æœºåˆ¶"],dependencies:["chain_003"]},{id:"middleware_001",name:"APIç½‘å…³",type:"entity",category:"middleware",layer:"L2",status:"completed",actions:["ç½‘å…³å¥åº·æ£€æŸ¥","é™æµç›‘æŽ§"],dependencies:["system_001","system_002","system_003"]},{id:"middleware_002",name:"Redisç¼“å­˜",type:"entity",category:"middleware",layer:"L2",status:"running",actions:["ç¼“å­˜å‘½ä¸­çŽ‡æ£€æŸ¥","å†…å­˜ä½¿ç”¨ç›‘æŽ§"],dependencies:["system_001","system_002"]},{id:"middleware_003",name:"æ¶ˆæ¯é˜Ÿåˆ—",type:"entity",category:"middleware",layer:"L2",status:"completed",actions:["é˜Ÿåˆ—ç§¯åŽ‹ç›‘æŽ§","æ¶ˆè´¹è€…çŠ¶æ€æ£€æŸ¥"],dependencies:["system_002","system_004"]},{id:"middleware_004",name:"é…ç½®ä¸­å¿ƒ",type:"entity",category:"middleware",layer:"L2",status:"completed",actions:["é…ç½®åŒæ­¥æ£€æŸ¥","ç‰ˆæœ¬ç®¡ç†"],dependencies:["system_001","system_002","system_003","system_004"]},{id:"infra_001",name:"Kubernetesé›†ç¾¤",type:"entity",category:"infrastructure",layer:"L1",status:"completed",actions:["é›†ç¾¤å¥åº·æ£€æŸ¥","èµ„æºä½¿ç”¨ç›‘æŽ§"],dependencies:["middleware_001","middleware_002","middleware_003"]},{id:"infra_002",name:"MySQLæ•°æ®åº“",type:"entity",category:"infrastructure",layer:"L1",status:"running",actions:["æ•°æ®åº“æ€§èƒ½æ£€æŸ¥","è¿žæŽ¥æ± ç›‘æŽ§"],dependencies:["middleware_002","middleware_004"]},{id:"infra_003",name:"è´Ÿè½½å‡è¡¡å™¨",type:"entity",category:"infrastructure",layer:"L1",status:"completed",actions:["è´Ÿè½½å‡è¡¡æ£€æŸ¥","å¥åº·èŠ‚ç‚¹ç›‘æŽ§"],dependencies:["middleware_001"]},{id:"infra_004",name:"å­˜å‚¨ç³»ç»Ÿ",type:"entity",category:"infrastructure",layer:"L1",status:"completed",actions:["å­˜å‚¨å®¹é‡æ£€æŸ¥","IOæ€§èƒ½ç›‘æŽ§"],dependencies:["middleware_003","middleware_004"]},{id:"infra_005",name:"ç½‘ç»œè®¾å¤‡",type:"entity",category:"infrastructure",layer:"L1",status:"completed",actions:["ç½‘ç»œè¿žé€šæ€§æ£€æŸ¥","å¸¦å®½ä½¿ç”¨ç›‘æŽ§"],dependencies:["middleware_001","middleware_002","middleware_003","middleware_004"]}],Ye={L5:"L5 - ä¸šåŠ¡åœºæ™¯å±‚",L4:"L4 - ä¸šåŠ¡é“¾è·¯å±‚",L3:"L3 - ä¸šåŠ¡ç³»ç»Ÿå±‚",L2:"L2 - ä¸­é—´ä»¶å±‚",L1:"L1 - åŸºç¡€è®¾æ–½å±‚"},Xe=o=>Ye[o]||o,Je=()=>We.map(o=>({...o,status:o.status})),Ze=o=>{const n={L5:{total:0,completed:0,running:0,failed:0,pending:0},L4:{total:0,completed:0,running:0,failed:0,pending:0},L3:{total:0,completed:0,running:0,failed:0,pending:0},L2:{total:0,completed:0,running:0,failed:0,pending:0},L1:{total:0,completed:0,running:0,failed:0,pending:0}};return o.forEach(v=>{const y=v.layer;if(n[y])switch(n[y].total++,v.status){case z.COMPLETED:n[y].completed++;break;case z.RUNNING:n[y].running++;break;case z.FAILED:n[y].failed++;break;case z.PENDING:n[y].pending++;break}}),n},et=d.div`
  padding: 16px;
  border: 1px solid #d9d9d9;
  border-radius: 8px;
  text-align: center;
  min-height: 120px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  background: #fafafa;
  transition: all 0.3s ease;
  cursor: default;

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    border-color: #1890ff;
  }
`,tt=d.div`
  font-size: 14px;
  font-weight: 600;
  margin-bottom: 12px;
  line-height: 1.3;
  color: #262626;
  word-break: break-word;
`,at=d.div`
  font-size: 14px;
  color: #1890ff;
  margin-bottom: 12px;
  font-weight: 500;
`,st=d.div`
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 8px;
  font-size: 12px;
  font-weight: 500;
`,A=d.div`
  color: ${o=>o.$statusColor};
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 4px;
  border-radius: 4px;
  background: ${o=>o.$bgColor};
`,it=d.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
`,nt=d.div`
  font-size: 12px;
  color: #8c8c8c;
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  margin-top: 4px;
`,F=d.span`
  display: flex;
  align-items: center;
  gap: 4px;
`,{Title:rt,Text:ot}=J,lt=d.div`
  padding: 24px;
`,O=d(_)`
  .ant-card-body {
    padding: 16px;
  }
  
  .ant-statistic {
    .ant-statistic-title {
      font-size: 12px;
      color: #666;
      margin-bottom: 8px;
    }
    
    .ant-statistic-content {
      font-size: 20px;
      font-weight: 600;
    }
  }
`,ft=()=>{const{runId:o}=ye(),{t:n}=ge(["tasks","common"]),[v,y]=x.useState(!1),[i,L]=x.useState(null),[$,l]=x.useState(null),[r,h]=x.useState(!1),[f,T]=x.useState(!0),[S,b]=x.useState([]);x.useEffect(()=>{Re("ä»»åŠ¡é›†åˆè¿è¡Œè¯¦æƒ…"),I()},[o]),x.useEffect(()=>{const c=Je();b(c)},[]),x.useEffect(()=>{let c;return f&&(i==null?void 0:i.status)==="running"&&(c=setInterval(()=>{I()},5e3)),()=>{c&&clearInterval(c)}},[f,i==null?void 0:i.status]);const I=async()=>{y(!0);try{await new Promise(p=>setTimeout(p,500)),L({id:o||"1",collectionId:"1",collectionName:"æ ¸å¿ƒæœåŠ¡ç›‘æŽ§ä»»åŠ¡",status:"running",startTime:"2024-06-24 13:00:00",totalNodes:8,completedNodes:5,failedNodes:1,successRate:75,createdBy:"è¿ç»´å·¥ç¨‹å¸ˆ",panels:[{id:"application_layer",name:"åº”ç”¨å±‚",level:1,color:"rgba(24, 144, 255, 0.1)",borderColor:"#1890ff",description:"åº”ç”¨æœåŠ¡å’Œä¸šåŠ¡é€»è¾‘å±‚"},{id:"service_layer",name:"æœåŠ¡å±‚",level:2,color:"rgba(82, 196, 26, 0.1)",borderColor:"#52c41a",description:"å¾®æœåŠ¡å’ŒAPIå±‚"},{id:"data_layer",name:"æ•°æ®å±‚",level:3,color:"rgba(250, 173, 20, 0.1)",borderColor:"#faad14",description:"æ•°æ®å­˜å‚¨å’Œç¼“å­˜å±‚"}],nodes:[{id:"node_1",name:"ç”¨æˆ·æœåŠ¡",type:"entity",category:"å¾®æœåŠ¡",panel:"service_layer",status:"completed",actions:["health_check","performance_analysis"],startTime:"2024-06-24 13:00:00",endTime:"2024-06-24 13:02:30",duration:150,dependencies:[],results:[{actionId:"health_check",actionName:"å¥åº·æ£€æŸ¥",status:"success",message:"æœåŠ¡è¿è¡Œæ­£å¸¸ï¼Œå“åº”æ—¶é—´ < 100ms",timestamp:"2024-06-24 13:01:00"},{actionId:"performance_analysis",actionName:"æ€§èƒ½åˆ†æž",status:"success",message:"CPUä½¿ç”¨çŽ‡: 45%, å†…å­˜ä½¿ç”¨çŽ‡: 60%",timestamp:"2024-06-24 13:02:30"}]},{id:"node_2",name:"è®¢å•æœåŠ¡",type:"entity",category:"å¾®æœåŠ¡",panel:"service_layer",status:"failed",actions:["health_check","fault_analysis"],startTime:"2024-06-24 13:00:00",endTime:"2024-06-24 13:03:00",duration:180,dependencies:["node_1"],results:[{actionId:"health_check",actionName:"å¥åº·æ£€æŸ¥",status:"error",message:"æœåŠ¡å“åº”è¶…æ—¶ï¼Œè¿žæŽ¥å¤±è´¥",timestamp:"2024-06-24 13:01:30"},{actionId:"fault_analysis",actionName:"æ•…éšœåˆ†æž",status:"warning",message:"æ£€æµ‹åˆ°å†…å­˜æ³„æ¼é£Žé™©",timestamp:"2024-06-24 13:03:00"}]},{id:"node_3",name:"æ”¯ä»˜æœåŠ¡",type:"entity",category:"å¾®æœåŠ¡",panel:"service_layer",status:"running",actions:["health_check","security_scan"],startTime:"2024-06-24 13:02:00",dependencies:["node_1"]},{id:"node_4",name:"ç”¨æˆ·ç™»å½•æµç¨‹",type:"sequence",category:"è®¤è¯æ—¶åº",panel:"application_layer",status:"completed",actions:["health_check"],startTime:"2024-06-24 13:00:30",endTime:"2024-06-24 13:01:45",duration:75,dependencies:[],results:[{actionId:"health_check",actionName:"å¥åº·æ£€æŸ¥",status:"success",message:"ç™»å½•æµç¨‹æ­£å¸¸ï¼Œå¹³å‡å“åº”æ—¶é—´ 2.3s",timestamp:"2024-06-24 13:01:45"}]},{id:"node_5",name:"è®¢å•åˆ›å»ºæµç¨‹",type:"sequence",category:"ä¸šåŠ¡æ—¶åº",panel:"application_layer",status:"completed",actions:["health_check","performance_analysis"],startTime:"2024-06-24 13:01:00",endTime:"2024-06-24 13:03:30",duration:150,dependencies:["node_1","node_2"],results:[{actionId:"health_check",actionName:"å¥åº·æ£€æŸ¥",status:"warning",message:"æµç¨‹æ‰§è¡ŒæˆåŠŸï¼Œä½†å“åº”æ—¶é—´è¾ƒæ…¢",timestamp:"2024-06-24 13:02:15"},{actionId:"performance_analysis",actionName:"æ€§èƒ½åˆ†æž",status:"success",message:"å¹³å‡å¤„ç†æ—¶é—´: 3.2sï¼ŒæˆåŠŸçŽ‡: 98%",timestamp:"2024-06-24 13:03:30"}]},{id:"node_6",name:"æ•°æ®åº“è¿žæŽ¥æ± ",type:"entity",category:"æ•°æ®åº“",panel:"data_layer",status:"pending",actions:["health_check"],dependencies:["node_3"]},{id:"node_7",name:"ç¼“å­˜é›†ç¾¤",type:"entity",category:"ç¼“å­˜",panel:"data_layer",status:"pending",actions:["health_check","performance_analysis"],dependencies:["node_3"]},{id:"node_8",name:"æ”¯ä»˜æµç¨‹",type:"sequence",category:"æ”¯ä»˜æ—¶åº",panel:"application_layer",status:"pending",actions:["health_check","security_scan"],dependencies:["node_3","node_6"]}],diagnosticReports:[{nodeId:"node_1",nodeName:"ç”¨æˆ·æœåŠ¡",nodeType:"entity",status:"completed",summary:{totalChecks:2,passedChecks:2,warningChecks:0,failedChecks:0},checks:[{id:"health_check",name:"å¥åº·æ£€æŸ¥",status:"success",message:"æœåŠ¡è¿è¡Œæ­£å¸¸ï¼Œå“åº”æ—¶é—´ < 100ms",timestamp:"2024-06-24 13:01:00",duration:60},{id:"performance_analysis",name:"æ€§èƒ½åˆ†æž",status:"success",message:"CPUä½¿ç”¨çŽ‡: 45%, å†…å­˜ä½¿ç”¨çŽ‡: 60%",timestamp:"2024-06-24 13:02:30",duration:90}],recommendations:["ç»§ç»­ä¿æŒå½“å‰é…ç½®","å»ºè®®å®šæœŸæ¸…ç†æ—¥å¿—æ–‡ä»¶"]},{nodeId:"node_2",nodeName:"è®¢å•æœåŠ¡",nodeType:"entity",status:"failed",summary:{totalChecks:2,passedChecks:0,warningChecks:1,failedChecks:1},checks:[{id:"health_check",name:"å¥åº·æ£€æŸ¥",status:"error",message:"æœåŠ¡å“åº”è¶…æ—¶ï¼Œè¿žæŽ¥å¤±è´¥",timestamp:"2024-06-24 13:01:30",duration:30},{id:"fault_analysis",name:"æ•…éšœåˆ†æž",status:"warning",message:"æ£€æµ‹åˆ°å†…å­˜æ³„æ¼é£Žé™©",timestamp:"2024-06-24 13:03:00",duration:150}],recommendations:["ç«‹å³é‡å¯æœåŠ¡å®žä¾‹","æ£€æŸ¥ç½‘ç»œè¿žæŽ¥é…ç½®","å¢žåŠ å†…å­˜ç›‘æŽ§å‘Šè­¦","ä¼˜åŒ–å†…å­˜ä½¿ç”¨ç­–ç•¥"]},{nodeId:"node_4",nodeName:"ç”¨æˆ·ç™»å½•æµç¨‹",nodeType:"sequence",status:"completed",summary:{totalChecks:1,passedChecks:1,warningChecks:0,failedChecks:0},checks:[{id:"health_check",name:"å¥åº·æ£€æŸ¥",status:"success",message:"ç™»å½•æµç¨‹æ­£å¸¸ï¼Œå¹³å‡å“åº”æ—¶é—´ 2.3s",timestamp:"2024-06-24 13:01:45",duration:75}],recommendations:["æµç¨‹è¿è¡Œæ­£å¸¸ï¼Œæ— éœ€è°ƒæ•´"]},{nodeId:"node_5",nodeName:"è®¢å•åˆ›å»ºæµç¨‹",nodeType:"sequence",status:"completed",summary:{totalChecks:2,passedChecks:1,warningChecks:1,failedChecks:0},checks:[{id:"health_check",name:"å¥åº·æ£€æŸ¥",status:"warning",message:"æµç¨‹æ‰§è¡ŒæˆåŠŸï¼Œä½†å“åº”æ—¶é—´è¾ƒæ…¢",timestamp:"2024-06-24 13:02:15",duration:135},{id:"performance_analysis",name:"æ€§èƒ½åˆ†æž",status:"success",message:"å¹³å‡å¤„ç†æ—¶é—´: 3.2sï¼ŒæˆåŠŸçŽ‡: 98%",timestamp:"2024-06-24 13:03:30",duration:15}],recommendations:["ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½","è€ƒè™‘å¢žåŠ ç¼“å­˜æœºåˆ¶","ç›‘æŽ§ç¬¬ä¸‰æ–¹APIå“åº”æ—¶é—´"]}]})}catch{Te.error("åŠ è½½è¿è¡Œè¯¦æƒ…å¤±è´¥")}finally{y(!1)}},R=c=>{const p={...c,panel:c.layer};l(p),h(!0)};return e.jsxs(lt,{children:[e.jsx(Ce,{items:[{title:"é¦–é¡µ",path:"/dashboard",icon:e.jsx(we,{})},{title:"ä»»åŠ¡é›†åˆ",path:"/task-management/task-collections",icon:e.jsx(ke,{})},{title:`${(i==null?void 0:i.collectionName)||"è¿è¡Œè¯¦æƒ…"}`,icon:e.jsx(Z,{})}]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:24},children:[e.jsxs("div",{children:[e.jsxs(rt,{level:2,style:{margin:0},children:[i==null?void 0:i.collectionName," - è¿è¡Œè¯¦æƒ…"]}),e.jsx("div",{style:{marginTop:8},children:e.jsxs(Q,{children:[e.jsx(q,{status:(i==null?void 0:i.status)==="running"?"processing":"success",text:(i==null?void 0:i.status)==="running"?"è¿è¡Œä¸­":"å·²å®Œæˆ"}),e.jsxs(ot,{type:"secondary",children:["è¿è¡ŒID: ",o]})]})})]}),e.jsxs(Q,{children:[e.jsx(ie,{icon:e.jsx(Le,{}),onClick:I,loading:v,children:"åˆ·æ–°"}),e.jsx(ie,{type:f?"primary":"default",onClick:()=>T(!f),children:f?"åœæ­¢è‡ªåŠ¨åˆ·æ–°":"å¼€å¯è‡ªåŠ¨åˆ·æ–°"})]})]}),i&&e.jsxs(e.Fragment,{children:[e.jsxs(U,{gutter:[16,16],style:{marginBottom:24},children:[e.jsx(u,{xs:12,sm:6,md:6,lg:6,xl:6,children:e.jsx(O,{children:e.jsx(V,{title:"æ€»èŠ‚ç‚¹æ•°",value:i.totalNodes,prefix:e.jsx(Ie,{}),valueStyle:{color:"#1890ff"}})})}),e.jsx(u,{xs:12,sm:6,md:6,lg:6,xl:6,children:e.jsx(O,{children:e.jsx(V,{title:"å·²å®Œæˆ",value:i.completedNodes,prefix:e.jsx(K,{}),valueStyle:{color:"#52c41a"}})})}),e.jsx(u,{xs:12,sm:6,md:6,lg:6,xl:6,children:e.jsx(O,{children:e.jsx(V,{title:"å¤±è´¥èŠ‚ç‚¹",value:i.failedNodes,prefix:e.jsx(ee,{}),valueStyle:{color:"#ff4d4f"}})})}),e.jsx(u,{xs:12,sm:6,md:6,lg:6,xl:6,children:e.jsx(O,{children:e.jsx(V,{title:"æˆåŠŸçŽ‡",value:i.successRate,suffix:"%",prefix:e.jsx(K,{}),valueStyle:{color:i.successRate>80?"#52c41a":"#faad14"}})})})]}),e.jsx(_,{title:e.jsxs(it,{children:[e.jsx("span",{children:"åˆ†å±‚æ‰§è¡Œç»Ÿè®¡"}),e.jsxs(nt,{children:[e.jsxs(F,{children:[e.jsx("span",{style:{color:"#52c41a"},children:"âœ“"})," å·²å®Œæˆ"]}),e.jsxs(F,{children:[e.jsx("span",{style:{color:"#1890ff"},children:"â—"})," è¿è¡Œä¸­"]}),e.jsxs(F,{children:[e.jsx("span",{style:{color:"#ff4d4f"},children:"âœ—"})," å¤±è´¥"]}),e.jsxs(F,{children:[e.jsx("span",{style:{color:"#8c8c8c"},children:"â—‹"})," å¾…æ‰§è¡Œ"]})]})]}),style:{marginBottom:24},children:e.jsx(U,{gutter:[16,16],children:Object.entries(Ze(S)).map(([c,p])=>e.jsx(u,{xs:24,sm:12,md:8,lg:6,xl:4,children:e.jsxs(et,{children:[e.jsx(tt,{children:Xe(c)}),e.jsxs(at,{children:["æ€»è®¡: ",p.total]}),e.jsxs(st,{children:[e.jsxs(A,{$statusColor:"#52c41a",$bgColor:"rgba(82, 196, 26, 0.1)",title:"å·²å®Œæˆ",children:["âœ“ ",p.completed]}),e.jsxs(A,{$statusColor:"#1890ff",$bgColor:"rgba(24, 144, 255, 0.1)",title:"è¿è¡Œä¸­",children:["â— ",p.running]}),e.jsxs(A,{$statusColor:"#ff4d4f",$bgColor:"rgba(255, 77, 79, 0.1)",title:"å¤±è´¥",children:["âœ— ",p.failed]}),e.jsxs(A,{$statusColor:"#8c8c8c",$bgColor:"rgba(140, 140, 140, 0.1)",title:"å¾…æ‰§è¡Œ",children:["â—‹ ",p.pending]})]})]})},c))})}),e.jsx(_,{title:"è¿è¡Œä¿¡æ¯",style:{marginBottom:24},children:e.jsxs(j,{column:3,children:[e.jsx(j.Item,{label:"å¼€å§‹æ—¶é—´",children:i.startTime}),e.jsx(j.Item,{label:"ç»“æŸæ—¶é—´",children:i.endTime||"è¿è¡Œä¸­..."}),e.jsx(j.Item,{label:"è¿è¡Œæ—¶é•¿",children:i.duration?`${i.duration}ç§’`:"è®¡ç®—ä¸­..."}),e.jsx(j.Item,{label:"åˆ›å»ºè€…",children:i.createdBy}),e.jsx(j.Item,{label:"è¿è¡ŒçŠ¶æ€",children:e.jsx(q,{status:i.status==="running"?"processing":"success",text:i.status==="running"?"è¿è¡Œä¸­":"å·²å®Œæˆ"})}),e.jsx(j.Item,{label:"è¿›åº¦",children:e.jsx(X,{percent:Math.round(i.completedNodes/i.totalNodes*100),size:"small"})})]})}),e.jsx(_,{title:"èŠ‚ç‚¹è¯Šæ–­æŠ¥å‘Š",style:{marginBottom:24},children:e.jsx(Ee,{nodeIds:i.nodes.map(c=>c.id)})}),e.jsx(_,{title:"èŠ‚ç‚¹æ‹“æ‰‘å…³ç³»",style:{marginBottom:24},children:e.jsx(Qe,{nodes:S,onNodeClick:R})}),e.jsx(Ge,{visible:r,node:$,panels:i.panels,allNodes:i.nodes,onClose:()=>h(!1)})]})]})};export{ft as default};

import{j as e,d as S,u as We,b as gt}from"./index-DWPu_TRF.js";import{j as R,B as k,w as Je,Q as De,T as J,e as Pe,aL as Te,U as yt,p as jt,aS as ft,aR as He,f as Ke,q as Ue,ax as et,Y as vt,i as D,t as o,S as E,aD as bt,r as w,X as tt,a7 as st,ba as nt,bb as it,bc as rt,bd as at,n as ge,be as _t,bf as wt,y as me,ae as ze,Z as Me,M as Ct,x as N,d as ae,C as I,aJ as Ae,o as Ne,V as St,b2 as kt,af as Tt,l as Ge,ao as zt,ar as Re,bh as It}from"./antd-DnS9M1TX.js";import{s as ot}from"./index-Daowydkz.js";import{s as Ie,i as lt}from"./transform-CtUPqxAi.js";import{z as ct,d as dt}from"./zoom-DKpi6doi.js";import{s as pt,l as xt,m as ht,c as ut,a as mt}from"./manyBody-_p2vrwJ2.js";import{E as Es,a as Ls}from"./EntityFormPage-DFjUT0x0.js";import"./vendor-DJG_os-6.js";const{Text:Rt}=J,Bt=S(D)`
  margin-bottom: 16px;
  border-radius: 8px;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
  
  .ant-card-head {
    border-bottom: 1px solid var(--border-color);
    padding: 12px 16px;
  }
  
  .ant-card-body {
    padding: 16px;
  }
`,$t=S.div`
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border-radius: 6px;
  color: white;
  font-size: 16px;
  margin-right: 8px;
`,pe=({entity:t,onClick:r,onEdit:h,children:v,extraActions:p})=>{const x=z=>({report:{icon:e.jsx(vt,{}),color:"#1890ff"},business_link:{icon:e.jsx(et,{}),color:"#52c41a"},business_system:{icon:e.jsx(Pe,{}),color:"#faad14"},api:{icon:e.jsx(Ue,{}),color:"#722ed1"},database:{icon:e.jsx(Ke,{}),color:"#f5222d"},table:{icon:e.jsx(He,{}),color:"#fa8c16"},middleware:{icon:e.jsx(ft,{}),color:"#13c2c2"},microservice:{icon:e.jsx(jt,{}),color:"#eb2f96"},scheduled_job:{icon:e.jsx(yt,{}),color:"#a0d911"},configuration:{icon:e.jsx(Te,{}),color:"#2f54eb"}})[z]||{icon:e.jsx(Pe,{}),color:"#8c8c8c"},T=z=>({active:"green",running:"green",inactive:"red",warning:"orange",pending:"blue"})[z]||"default",c=x(t.type);return e.jsx(Bt,{size:"small",onClick:()=>r==null?void 0:r(t),style:{cursor:"pointer"},title:e.jsxs(R,{children:[e.jsx($t,{style:{backgroundColor:c.color},children:c.icon}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:t.name}),e.jsx(Rt,{type:"secondary",style:{fontSize:"12px"},children:t.category})]})]}),extra:e.jsxs(R,{children:[e.jsx(k,{type:"text",size:"small",icon:e.jsx(Je,{}),onClick:z=>{z.stopPropagation(),h==null||h(t)},style:{color:"#1890ff"}}),p,e.jsx(De,{status:T(t.status),text:t.status})]}),children:v})},{Text:_e,Paragraph:Et}=J,Be=S.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
  
  &:last-child {
    margin-bottom: 0;
  }
`,Lt=({entity:t,onClick:r,onEdit:h})=>{var v,p,x,T,c;return e.jsxs(pe,{entity:t,onClick:r,onEdit:h,children:[e.jsx(Et,{ellipsis:{rows:2},style:{marginBottom:12},children:t.description}),e.jsxs(R,{direction:"vertical",style:{width:"100%"},children:[e.jsxs(Be,{children:[e.jsx(_e,{type:"secondary",children:"更新频率:"}),e.jsx(o,{color:"blue",children:t.updateFrequency})]}),e.jsxs(Be,{children:[e.jsx(_e,{type:"secondary",children:"负责人:"}),e.jsx(_e,{children:t.owner})]}),e.jsxs(Be,{children:[e.jsx(_e,{type:"secondary",children:"数据源:"}),e.jsx(R,{children:(v=t.dataSource)==null?void 0:v.map((z,u)=>e.jsx(o,{size:"small",children:z},u))})]}),e.jsxs("div",{style:{marginTop:12,display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:[e.jsx(E,{title:"查看次数",value:(p=t.metrics)==null?void 0:p.viewCount,valueStyle:{fontSize:"14px"}}),e.jsx(E,{title:"导出次数",value:(x=t.metrics)==null?void 0:x.exportCount,valueStyle:{fontSize:"14px"}}),e.jsx(E,{title:"加载时间",value:(T=t.metrics)==null?void 0:T.avgLoadTime,valueStyle:{fontSize:"14px"}})]})]}),e.jsx("div",{style:{marginTop:12},children:(c=t.tags)==null?void 0:c.map((z,u)=>e.jsx(o,{size:"small",style:{marginBottom:4},children:z},u))})]})},{Text:Fe,Paragraph:Pt}=J,Mt=S.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
  
  &:last-child {
    margin-bottom: 0;
  }
`,At=({entity:t,onClick:r,onEdit:h})=>{var v;return e.jsxs(pe,{entity:t,onClick:r,onEdit:h,children:[e.jsx(Pt,{ellipsis:{rows:2},style:{marginBottom:12},children:t.description}),e.jsxs(Mt,{children:[e.jsx(Fe,{type:"secondary",children:"负责人:"}),e.jsx(Fe,{children:t.owner})]}),e.jsx("div",{style:{marginTop:12},children:(v=t.tags)==null?void 0:v.map((p,x)=>e.jsx(o,{size:"small",style:{marginBottom:4},children:p},x))})]})},{Text:we,Paragraph:Nt}=J,Qe=S.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
  
  &:last-child {
    margin-bottom: 0;
  }
`,Gt=({entity:t,onClick:r,onEdit:h})=>{var v,p;return e.jsxs(pe,{entity:t,onClick:r,onEdit:h,extraActions:e.jsx(o,{color:"blue",children:t.version}),children:[e.jsx(Nt,{ellipsis:{rows:2},style:{marginBottom:12},children:t.description}),e.jsxs(R,{direction:"vertical",style:{width:"100%"},children:[e.jsxs(Qe,{children:[e.jsx(we,{type:"secondary",children:"负责人:"}),e.jsx(we,{children:t.owner})]}),e.jsxs(Qe,{children:[e.jsx(we,{type:"secondary",children:"技术栈:"}),e.jsx(R,{children:(v=t.techStack)==null?void 0:v.map((x,T)=>e.jsx(o,{size:"small",children:x},T))})]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx(we,{type:"secondary",style:{fontSize:"12px"},children:"健康度"}),e.jsx(bt,{percent:t.healthScore,size:"small",status:t.healthScore>80?"success":t.healthScore>60?"normal":"exception",style:{marginTop:4}})]})]}),e.jsx("div",{style:{marginTop:12},children:(p=t.tags)==null?void 0:p.map((x,T)=>e.jsx(o,{size:"small",style:{marginBottom:4},children:x},T))})]})},{Text:Ce,Paragraph:Wt}=J,Ye=S.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
  
  &:last-child {
    margin-bottom: 0;
  }
`,Dt=({entity:t,onClick:r,onEdit:h})=>{var p,x,T;const v=c=>({GET:"green",POST:"blue",PUT:"orange",DELETE:"red",PATCH:"purple"})[c]||"default";return e.jsxs(pe,{entity:t,onClick:r,onEdit:h,extraActions:e.jsx(o,{color:v(t.method),children:t.method}),children:[e.jsx(Wt,{ellipsis:{rows:2},style:{marginBottom:12},children:t.description}),e.jsxs(R,{direction:"vertical",style:{width:"100%"},children:[e.jsxs(Ye,{children:[e.jsx(Ce,{type:"secondary",children:"路径:"}),e.jsx(Ce,{code:!0,style:{fontSize:"12px"},children:t.path})]}),e.jsxs(Ye,{children:[e.jsx(Ce,{type:"secondary",children:"负责人:"}),e.jsx(Ce,{children:t.owner})]}),e.jsxs("div",{style:{marginTop:12,display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:8},children:[e.jsx(E,{title:"调用次数",value:(p=t.metrics)==null?void 0:p.callCount,valueStyle:{fontSize:"14px"}}),e.jsx(E,{title:"响应时间",value:(x=t.metrics)==null?void 0:x.avgResponseTime,suffix:"ms",valueStyle:{fontSize:"14px"}})]})]}),e.jsx("div",{style:{marginTop:12},children:(T=t.tags)==null?void 0:T.map((c,z)=>e.jsx(o,{size:"small",style:{marginBottom:4},children:c},z))})]})},{Text:Se,Paragraph:Ft}=J,Oe=S.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
  
  &:last-child {
    margin-bottom: 0;
  }
`,Qt=({entity:t,onClick:r,onEdit:h})=>{var v,p,x;return e.jsxs(pe,{entity:t,onClick:r,onEdit:h,extraActions:e.jsx(o,{color:"red",children:t.technology}),children:[e.jsx(Ft,{ellipsis:{rows:2},style:{marginBottom:12},children:t.description}),e.jsxs(R,{direction:"vertical",style:{width:"100%"},children:[e.jsxs(Oe,{children:[e.jsx(Se,{type:"secondary",children:"连接地址:"}),e.jsxs(Se,{code:!0,style:{fontSize:"12px"},children:[t.host,":",t.port]})]}),e.jsxs(Oe,{children:[e.jsx(Se,{type:"secondary",children:"负责人:"}),e.jsx(Se,{children:t.owner})]}),e.jsxs("div",{style:{marginTop:12,display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:8},children:[e.jsx(E,{title:"连接数",value:(v=t.metrics)==null?void 0:v.connectionCount,valueStyle:{fontSize:"14px"}}),e.jsx(E,{title:"存储大小",value:(p=t.metrics)==null?void 0:p.storageSize,suffix:"GB",valueStyle:{fontSize:"14px"}})]})]}),e.jsx("div",{style:{marginTop:12},children:(x=t.tags)==null?void 0:x.map((T,c)=>e.jsx(o,{size:"small",style:{marginBottom:4},children:T},c))})]})},{Text:ke,Paragraph:Yt}=J,qe=S.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
  
  &:last-child {
    margin-bottom: 0;
  }
`,Ot=({entity:t,onClick:r,onEdit:h})=>{var v;return e.jsxs(pe,{entity:t,onClick:r,onEdit:h,children:[e.jsx(Yt,{ellipsis:{rows:2},style:{marginBottom:12},children:t.description}),e.jsxs(qe,{children:[e.jsx(ke,{type:"secondary",children:"数据库:"}),e.jsx(ke,{children:t.database})]}),e.jsxs(qe,{children:[e.jsx(ke,{type:"secondary",children:"负责人:"}),e.jsx(ke,{children:t.owner})]}),e.jsx("div",{style:{marginTop:12},children:(v=t.tags)==null?void 0:v.map((p,x)=>e.jsx(o,{size:"small",style:{marginBottom:4},children:p},x))})]})},{Text:Xe,Paragraph:qt}=J,Xt=S.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
  
  &:last-child {
    margin-bottom: 0;
  }
`,Zt=({entity:t,onClick:r,onEdit:h})=>{var v;return e.jsxs(pe,{entity:t,onClick:r,onEdit:h,children:[e.jsx(qt,{ellipsis:{rows:2},style:{marginBottom:12},children:t.description}),e.jsxs(Xt,{children:[e.jsx(Xe,{type:"secondary",children:"负责人:"}),e.jsx(Xe,{children:t.owner})]}),e.jsx("div",{style:{marginTop:12},children:(v=t.tags)==null?void 0:v.map((p,x)=>e.jsx(o,{size:"small",style:{marginBottom:4},children:p},x))})]})},Vt=({entity:t,onClick:r,onEdit:h})=>(()=>{switch(t.type){case"report":return e.jsx(Lt,{entity:t,onClick:r,onEdit:h});case"business_link":return e.jsx(At,{entity:t,onClick:r,onEdit:h});case"business_system":return e.jsx(Gt,{entity:t,onClick:r,onEdit:h});case"api":return e.jsx(Dt,{entity:t,onClick:r,onEdit:h});case"database":return e.jsx(Qt,{entity:t,onClick:r,onEdit:h});case"table":return e.jsx(Ot,{entity:t,onClick:r,onEdit:h});case"middleware":case"microservice":case"scheduled_job":case"configuration":default:return e.jsx(Zt,{entity:t,onClick:r,onEdit:h})}})(),Jt=[{id:"business_scenario_plane",name:"业务场景平面",level:1,color:"#e6f7ff",borderColor:"#1890ff",description:"核心业务场景和用户旅程"},{id:"business_link_plane",name:"业务链路平面",level:2,color:"#f6ffed",borderColor:"#52c41a",description:"业务场景的具体执行链路"},{id:"application_plane",name:"应用平面",level:3,color:"#fff7e6",borderColor:"#faad14",description:"业务系统和应用服务层"},{id:"middleware_plane",name:"中间件平面",level:4,color:"#f9f0ff",borderColor:"#722ed1",description:"中间件和基础服务层"},{id:"infrastructure_plane",name:"基础设施平面",level:5,color:"#f0f8f8",borderColor:"#5F9EA0",description:"基础设施和资源层"}],Ht=[{id:"business_scenario_1",name:"电商下单场景",type:"business_scenario",level:1,plane:"business_scenario_plane",description:"用户在电商平台完成商品购买的完整流程",status:"active"},{id:"business_scenario_2",name:"支付结算场景",type:"business_scenario",level:1,plane:"business_scenario_plane",description:"处理用户支付和商户结算的完整业务场景",status:"active"},{id:"business_link_1",name:"用户下单链路",type:"business_link",level:2,plane:"business_link_plane",description:"从商品选择到订单确认的业务链路",status:"active"},{id:"business_link_2",name:"支付处理链路",type:"business_link",level:2,plane:"business_link_plane",description:"支付验证、扣款、确认的业务链路",status:"active"},{id:"business_link_3",name:"风控审核链路",type:"business_link",level:2,plane:"business_link_plane",description:"交易风险识别和安全审核链路",status:"active"},{id:"business_link_4",name:"资金结算链路",type:"business_link",level:2,plane:"business_link_plane",description:"商户资金结算和清分业务链路",status:"active"},{id:"system_1",name:"用户中心系统",type:"business_system",level:3,plane:"application_plane",description:"管理用户信息、认证、权限的核心系统",status:"running",version:"v2.1.0",instances:6},{id:"system_2",name:"商品管理系统",type:"business_system",level:3,plane:"application_plane",description:"商品信息、价格、促销管理系统",status:"running",version:"v1.8.2",instances:4},{id:"system_3",name:"订单管理系统",type:"business_system",level:3,plane:"application_plane",description:"订单生命周期管理的核心系统",status:"running",version:"v3.0.1",instances:8},{id:"system_4",name:"支付网关系统",type:"business_system",level:3,plane:"application_plane",description:"统一支付接入和路由系统",status:"running",version:"v1.9.3",instances:10},{id:"system_5",name:"钱包系统",type:"business_system",level:3,plane:"application_plane",description:"用户钱包余额和虚拟账户管理系统",status:"running",version:"v2.3.1",instances:8},{id:"system_6",name:"风控系统",type:"business_system",level:3,plane:"application_plane",description:"交易风险识别和反欺诈系统",status:"running",version:"v1.7.2",instances:6},{id:"system_7",name:"清结算系统",type:"business_system",level:3,plane:"application_plane",description:"资金清分和商户结算系统",status:"running",version:"v2.0.5",instances:4},{id:"system_8",name:"账务系统",type:"business_system",level:3,plane:"application_plane",description:"资金流水和账务记录系统",status:"running",version:"v1.5.8",instances:6},{id:"middleware_1",name:"API网关",type:"middleware",level:4,plane:"middleware_plane",description:"统一API接入、路由、限流、认证网关",status:"running",technology:"Kong",instances:6},{id:"middleware_2",name:"消息队列",type:"middleware",level:4,plane:"middleware_plane",description:"异步消息处理和事件驱动架构支撑",status:"running",technology:"RocketMQ",instances:9},{id:"middleware_3",name:"规则引擎",type:"middleware",level:4,plane:"middleware_plane",description:"风控规则和业务规则执行引擎",status:"running",technology:"Drools",instances:4},{id:"infrastructure_1",name:"Kubernetes集群",type:"infrastructure",level:5,plane:"infrastructure_plane",description:"容器编排和微服务运行平台",status:"running",nodes:24,region:"华东-1"},{id:"db_cluster_payment",name:"支付数据库集群",type:"infrastructure",level:5,plane:"infrastructure_plane",description:"支付交易专用高可用MySQL集群",status:"running",technology:"MySQL 8.0",nodes:10,config:"2主8从",region:"华东-1",databases:["payment_core","wallet_account","transaction_log"]},{id:"db_cluster_risk",name:"风控数据库集群",type:"infrastructure",level:5,plane:"infrastructure_plane",description:"风控数据和规则存储MySQL集群",status:"running",technology:"MySQL 8.0",nodes:6,config:"1主5从",region:"华东-1",databases:["risk_control","fraud_detection","rule_engine"]},{id:"db_cluster_settlement",name:"清结算数据库集群",type:"infrastructure",level:5,plane:"infrastructure_plane",description:"资金清算和结算数据MySQL集群",status:"running",technology:"MySQL 8.0",nodes:8,config:"2主6从",region:"华东-1",databases:["settlement_core","accounting_ledger","merchant_account"]}],Kt=[{source:"business_scenario_1",target:"business_link_1",type:"contains",strength:1},{source:"business_scenario_2",target:"business_link_2",type:"contains",strength:1},{source:"business_scenario_2",target:"business_link_3",type:"contains",strength:1},{source:"business_scenario_2",target:"business_link_4",type:"contains",strength:1},{source:"business_link_1",target:"system_1",type:"depends_on",strength:.9},{source:"business_link_1",target:"system_2",type:"depends_on",strength:.8},{source:"business_link_1",target:"system_3",type:"depends_on",strength:1},{source:"business_link_2",target:"system_4",type:"depends_on",strength:1},{source:"business_link_2",target:"system_5",type:"depends_on",strength:.9},{source:"business_link_3",target:"system_6",type:"depends_on",strength:1},{source:"business_link_4",target:"system_7",type:"depends_on",strength:1},{source:"business_link_4",target:"system_8",type:"depends_on",strength:.9},{source:"system_4",target:"middleware_1",type:"uses",strength:1},{source:"system_5",target:"middleware_1",type:"uses",strength:.9},{source:"system_6",target:"middleware_3",type:"uses",strength:1},{source:"system_7",target:"middleware_2",type:"uses",strength:.9},{source:"system_8",target:"middleware_2",type:"uses",strength:.8},{source:"middleware_1",target:"infrastructure_1",type:"runs_on",strength:1},{source:"middleware_2",target:"infrastructure_1",type:"runs_on",strength:1},{source:"middleware_3",target:"infrastructure_1",type:"runs_on",strength:1},{source:"system_4",target:"db_cluster_payment",type:"stores_in",strength:1},{source:"system_5",target:"db_cluster_payment",type:"stores_in",strength:1},{source:"system_6",target:"db_cluster_risk",type:"stores_in",strength:1},{source:"system_7",target:"db_cluster_settlement",type:"stores_in",strength:1},{source:"system_8",target:"db_cluster_settlement",type:"stores_in",strength:1}],Ut={title:"电商平台业务关系图谱",description:"从业务场景到基础设施的完整技术架构关系图",levels:[{level:1,name:"业务场景层",description:"核心业务场景和用户旅程",color:"#1890ff"},{level:2,name:"业务链路层",description:"业务场景的具体执行链路",color:"#52c41a"},{level:3,name:"业务系统层",description:"支撑业务链路的应用系统",color:"#faad14"},{level:4,name:"中间件层",description:"系统间通信和基础服务中间件",color:"#722ed1"},{level:5,name:"基础设施层",description:"底层计算、存储、网络基础设施",color:"#5F9EA0"}],relationTypes:[{type:"contains",description:"包含关系",color:"#1890ff",strokeWidth:3},{type:"depends_on",description:"依赖关系",color:"#52c41a",strokeWidth:2},{type:"uses",description:"使用关系",color:"#faad14",strokeWidth:2},{type:"runs_on",description:"运行关系",color:"#722ed1",strokeWidth:2},{type:"stores_in",description:"存储关系",color:"#f5222d",strokeWidth:1}]},es={planes:Jt,nodes:Ht,links:Kt,metadata:Ut},ts=S.div`
  width: 100%;
  height: 800px;
  border: 1px solid var(--border-color);
  border-radius: 8px;
  position: relative;
  background-color: var(--background-color);
  overflow: hidden;
`,ss=S.div`
  position: absolute;
  top: 16px;
  right: 16px;
  z-index: 10;
  background: var(--card-bg);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  padding: 8px;
  box-shadow: var(--card-shadow);
`,ns=S.div`
  position: absolute;
  top: 16px;
  left: 16px;
  z-index: 10;
  background: var(--card-bg);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  box-shadow: var(--card-shadow);
  max-width: 300px;
  transition: all 0.3s ease;
`,is=S.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px;
  border-bottom: 1px solid var(--border-color);
  cursor: pointer;
  user-select: none;

  &:hover {
    background-color: var(--hover-bg);
  }
`,rs=S.div`
  padding: ${t=>t.collapsed?"0":"12px"};
  max-height: ${t=>t.collapsed?"0":"400px"};
  overflow: hidden;
  transition: all 0.3s ease;
`,as=S.div`
  position: absolute;
  background: var(--card-bg);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  padding: 12px;
  box-shadow: var(--card-shadow);
  pointer-events: none;
  z-index: 20;
  max-width: 250px;
  font-size: 12px;
  line-height: 1.4;
`,os=()=>{var he;const{t}=We(["relationships","common"]),r=w.useRef(null),h=w.useRef(null),[v,p]=w.useState(!0),[x,T]=w.useState(null),[c,z]=w.useState(null),[u,q]=w.useState(null),[A,m]=w.useState(null),[U,L]=w.useState(!0),H=(a,C)=>({1:"#1890ff",2:"#52c41a",3:"#faad14",4:"#722ed1",5:"#5F9EA0"})[C]||"#8c8c8c",P=a=>({contains:"#1890ff",depends_on:"#52c41a",uses:"#faad14",runs_on:"#722ed1",stores_in:"#f5222d",logs_to:"#8c8c8c"})[a]||"#d9d9d9",ee=a=>({1:20,2:16,3:14,4:12,5:10})[a]||12,G=(a,C,M,g)=>{if(C.filter(F=>F.plane===a.id).length===0)return null;const $=g/5;return{x:50,y:(a.level-1)*$+50,width:M-100,height:$-20,rx:12,ry:12}},te=()=>{if(!r.current||!h.current||!c)return;const a=h.current,C=Ie(r.current),M=a.clientWidth,g=a.clientHeight;C.selectAll("*").remove(),C.attr("width",M).attr("height",g);const y=ct().scaleExtent([.1,3]).on("zoom",s=>{$.attr("transform",s.transform)});C.call(y);const $=C.append("g");$.append("g").attr("class","planes").selectAll("g").data(c.planes).enter().append("g").attr("class","plane").each(function(s){const l=G(s,c.nodes,M,g);if(!l)return;const B=Ie(this);B.append("rect").attr("x",l.x).attr("y",l.y).attr("width",l.width).attr("height",l.height).attr("rx",l.rx).attr("ry",l.ry).attr("fill",s.color).attr("stroke",s.borderColor).attr("stroke-width",2).attr("stroke-dasharray","5,5").attr("opacity",.3),B.append("text").attr("x",l.x+20).attr("y",l.y+25).attr("font-size","16px").attr("font-weight","bold").attr("fill",s.borderColor).text(s.name),B.append("text").attr("x",l.x+20).attr("y",l.y+45).attr("font-size","12px").attr("fill","var(--text-secondary)").text(s.description)});const j=pt(c.nodes).force("link",xt(c.links).id(s=>s.id).distance(s=>{const l=s.source.level,B=s.target.level;return Math.abs(l-B)===1?80:120}).strength(s=>s.strength)).force("charge",ht().strength(-200)).force("center",ut(M/2,g/2)).force("collision",mt().radius(s=>ee(s.level)+8)).force("plane",()=>{c.nodes.forEach(s=>{const l=c.planes.find(b=>b.id===s.plane);if(!l)return;const B=G(l,c.nodes,M,g);if(!B)return;const _=30,Z=B.x+_,Y=B.x+B.width-_,n=B.y+_+50,d=B.y+B.height-_;s.x<Z&&(s.x=Z),s.x>Y&&(s.x=Y),s.y<n&&(s.y=n),s.y>d&&(s.y=d)})}),F=$.append("defs");c.metadata.relationTypes.forEach(s=>{F.append("marker").attr("id",`arrow-${s.type}`).attr("viewBox","0 -5 10 10").attr("refX",15).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("fill",s.color)});const O=$.append("g").attr("class","links").selectAll("line").data(c.links).enter().append("line").attr("stroke",s=>P(s.type)).attr("stroke-width",s=>{const l=c.metadata.relationTypes.find(B=>B.type===s.type);return(l==null?void 0:l.strokeWidth)||1}).attr("stroke-opacity",.8).attr("marker-end",s=>`url(#arrow-${s.type})`),Q=$.append("g").attr("class","nodes").selectAll("g").data(c.nodes).enter().append("g").attr("class","node").call(dt().on("start",(s,l)=>{s.active||j.alphaTarget(.3).restart(),l.fx=l.x,l.fy=l.y}).on("drag",(s,l)=>{l.fx=s.x,l.fy=s.y}).on("end",(s,l)=>{s.active||j.alphaTarget(0);const B=c.planes.find(_=>_.id===l.plane);if(B){const _=G(B,c.nodes,M,g);if(_){const Y=_.x+30,n=_.x+_.width-30,d=_.y+30+50,b=_.y+_.height-30;l.fx<Y&&(l.fx=Y),l.fx>n&&(l.fx=n),l.fy<d&&(l.fy=d),l.fy>b&&(l.fy=b)}}}));Q.append("circle").attr("r",s=>ee(s.level)).attr("fill",s=>H(s.type,s.level)).attr("stroke","#fff").attr("stroke-width",2).style("cursor","pointer"),Q.append("text").text(s=>s.name).attr("x",0).attr("y",s=>ee(s.level)+15).attr("text-anchor","middle").attr("font-size","10px").attr("fill","var(--text-color)").style("pointer-events","none"),Q.on("mouseover",(s,l)=>{const B=new Set;B.add(l.id),c.links.forEach(_=>{const Z=typeof _.source=="string"?_.source:_.source.id,Y=typeof _.target=="string"?_.target:_.target.id;Z===l.id&&B.add(Y),Y===l.id&&B.add(Z)}),Q.style("opacity",_=>B.has(_.id)?1:.3),O.style("opacity",_=>{const Z=typeof _.source=="string"?_.source:_.source.id,Y=typeof _.target=="string"?_.target:_.target.id;return Z===l.id||Y===l.id?1:.1}),m({x:s.pageX+10,y:s.pageY-10,content:l})}).on("mouseout",()=>{Q.style("opacity",1),O.style("opacity",.8),m(null)}).on("click",(s,l)=>{q(l)}),j.on("tick",()=>{O.attr("x1",s=>s.source.x).attr("y1",s=>s.source.y).attr("x2",s=>s.target.x).attr("y2",s=>s.target.y),Q.attr("transform",s=>`translate(${s.x},${s.y})`)});const X=()=>{C.transition().call(y.scaleBy,1.5)},se=()=>{C.transition().call(y.scaleBy,1/1.5)},fe=()=>{C.transition().call(y.transform,lt)},ve=()=>{c.nodes.forEach(s=>{s.fx=null,s.fy=null}),j.alpha(1).restart()};r.current.zoomIn=X,r.current.zoomOut=se,r.current.resetZoom=fe,r.current.resetNodePositions=ve};w.useEffect(()=>{try{p(!0),z(es),T(null)}catch{T("Failed to load relationship data")}finally{p(!1)}},[]),w.useEffect(()=>{if(c&&!v){const a=setTimeout(()=>{te()},100);return()=>clearTimeout(a)}},[c,v]),w.useEffect(()=>{const a=()=>{c&&!v&&te()};return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[c,v]);const xe=()=>{var a,C;(C=(a=r.current)==null?void 0:a.zoomIn)==null||C.call(a)},oe=()=>{var a,C;(C=(a=r.current)==null?void 0:a.zoomOut)==null||C.call(a)},le=()=>{var a,C;(C=(a=r.current)==null?void 0:a.resetZoom)==null||C.call(a)},ce=()=>{var a,C;(C=(a=r.current)==null?void 0:a.resetNodePositions)==null||C.call(a)},de=()=>{te()};return v?e.jsx(D,{children:e.jsxs("div",{style:{textAlign:"center",padding:"100px 0"},children:[e.jsx(tt,{size:"large"}),e.jsx("div",{style:{marginTop:16},children:"Loading relationship graph..."})]})}):x?e.jsx(D,{children:e.jsx(st,{message:"Error",description:x,type:"error",showIcon:!0})}):e.jsxs(D,{title:t("relationships:businessRelationshipGraph"),style:{marginBottom:24},children:[e.jsxs(ts,{ref:h,children:[e.jsx("svg",{ref:r}),e.jsx(ss,{children:e.jsxs(R,{direction:"vertical",size:"small",children:[e.jsx(k,{size:"small",icon:e.jsx(nt,{}),onClick:xe,title:t("relationships:zoomIn")}),e.jsx(k,{size:"small",icon:e.jsx(it,{}),onClick:oe,title:t("relationships:zoomOut")}),e.jsx(k,{size:"small",icon:e.jsx(rt,{}),onClick:le,title:t("relationships:resetView")}),e.jsx(k,{size:"small",icon:e.jsx(at,{}),onClick:ce,title:t("relationships:resetNodePositions")}),e.jsx(k,{size:"small",icon:e.jsx(ge,{}),onClick:de,title:t("relationships:refreshGraph")})]})}),e.jsxs(ns,{children:[e.jsxs(is,{onClick:()=>L(!U),children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"14px"},children:t("relationships:legend")}),U?e.jsx(_t,{}):e.jsx(wt,{})]}),e.jsxs(rs,{collapsed:U,children:[e.jsxs("div",{style:{marginBottom:12},children:[e.jsxs("div",{style:{marginBottom:4,fontSize:"12px",fontWeight:"bold"},children:[t("relationships:planes"),":"]}),c==null?void 0:c.planes.map(a=>e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:2},children:[e.jsx("div",{style:{width:16,height:12,backgroundColor:a.color,border:`1px solid ${a.borderColor}`,borderRadius:2,marginRight:6}}),e.jsx("span",{style:{fontSize:"11px"},children:a.name})]},a.id))]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs("div",{style:{marginBottom:4,fontSize:"12px",fontWeight:"bold"},children:[t("relationships:nodeTypes"),":"]}),c==null?void 0:c.metadata.levels.map(a=>e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:2},children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:a.color,marginRight:6}}),e.jsx("span",{style:{fontSize:"11px"},children:a.name})]},a.level))]}),e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:4,fontSize:"12px",fontWeight:"bold"},children:[t("relationships:relationTypes"),":"]}),c==null?void 0:c.metadata.relationTypes.map(a=>e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:2},children:[e.jsx("div",{style:{width:16,height:2,backgroundColor:a.color,marginRight:6}}),e.jsx("span",{style:{fontSize:"11px"},children:a.description})]},a.type))]})]})]}),A&&e.jsxs(as,{style:{left:A.x,top:A.y},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:4},children:A.content.name}),e.jsxs("div",{style:{marginBottom:2},children:[t("relationships:type"),": ",A.content.type]}),e.jsxs("div",{style:{marginBottom:2},children:[t("relationships:level"),": ",A.content.level]}),e.jsxs("div",{style:{marginBottom:2},children:[t("relationships:plane"),": ",A.content.plane]}),e.jsxs("div",{style:{marginBottom:2},children:[t("relationships:status"),":",e.jsx(o,{color:A.content.status==="active"||A.content.status==="running"?"green":"red",size:"small",style:{marginLeft:4},children:A.content.status})]}),e.jsx("div",{style:{fontSize:"11px",color:"var(--text-secondary)"},children:A.content.description})]})]}),u&&e.jsx(D,{title:`${t("relationships:nodeDetails")}: ${u.name}`,size:"small",style:{marginTop:16},extra:e.jsx(k,{size:"small",onClick:()=>q(null),children:t("common:close")}),children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:16},children:[e.jsxs("div",{children:[e.jsxs("strong",{children:[t("relationships:basicInfo"),":"]}),e.jsxs("div",{children:["ID: ",u.id]}),e.jsxs("div",{children:[t("relationships:type"),": ",u.type]}),e.jsxs("div",{children:[t("relationships:level"),": ",u.level]}),e.jsxs("div",{children:[t("relationships:plane"),": ",u.plane]}),e.jsxs("div",{children:[t("relationships:status"),":"," ",e.jsx(o,{color:u.status==="active"||u.status==="running"?"green":"red",children:u.status})]})]}),e.jsxs("div",{children:[e.jsxs("strong",{children:[t("common:description"),":"]}),e.jsx("div",{children:u.description})]}),u.instances&&e.jsxs("div",{children:[e.jsx("strong",{children:"实例信息:"}),e.jsxs("div",{children:["实例数: ",u.instances]}),u.version&&e.jsxs("div",{children:["版本: ",u.version]}),u.technology&&e.jsxs("div",{children:["技术栈: ",u.technology]})]}),u.nodes&&e.jsxs("div",{children:[e.jsxs("strong",{children:[t("relationships:clusterInfo"),":"]}),e.jsxs("div",{children:[t("relationships:nodeCount"),": ",u.nodes]}),u.config&&e.jsxs("div",{children:[t("relationships:config"),": ",u.config]}),u.technology&&e.jsxs("div",{children:[t("relationships:technology"),": ",u.technology]}),u.region&&e.jsxs("div",{children:[t("relationships:region"),": ",u.region]})]}),u.databases&&e.jsxs("div",{children:[e.jsxs("strong",{children:[t("relationships:databases"),":"]}),e.jsx("div",{style:{marginTop:4},children:u.databases.map((a,C)=>e.jsx(o,{color:"blue",style:{marginBottom:4},children:a},C))})]}),u.metrics&&e.jsxs("div",{children:[e.jsx("strong",{children:"业务指标:"}),e.jsxs("div",{children:["日均量: ",(he=u.metrics.dailyVolume)==null?void 0:he.toLocaleString()]}),e.jsxs("div",{children:["成功率: ",u.metrics.successRate,"%"]})]})]})})]})},ls=[{id:"report_001",name:"日销售报表",type:"report",category:"业务报表",status:"active",description:"每日销售数据统计报表，包含订单量、销售额、转化率等关键指标",owner:"数据分析团队",updateFrequency:"每日",lastUpdated:"2024-12-17 08:00:00",dataSource:["order_center","payment_core"],metrics:{viewCount:1250,exportCount:89,avgLoadTime:"2.3s"},tags:["销售","日报","核心指标"]},{id:"report_002",name:"用户行为分析报表",type:"report",category:"用户报表",status:"active",description:"用户访问路径、停留时间、转化漏斗分析报表",owner:"产品运营团队",updateFrequency:"实时",lastUpdated:"2024-12-17 14:30:00",dataSource:["user_behavior","page_analytics"],metrics:{viewCount:890,exportCount:45,avgLoadTime:"1.8s"},tags:["用户行为","实时","转化分析"]},{id:"business_link_001",name:"用户注册链路",type:"business_link",category:"用户管理",status:"running",description:"用户从注册到激活的完整业务流程",owner:"用户中心团队",avgResponseTime:"850ms",successRate:98.5,dailyVolume:2500,dependencies:["user_service","sms_service","email_service"],sla:{responseTime:"< 1s",availability:"99.9%",errorRate:"< 0.1%"},tags:["用户注册","核心链路","高频"]},{id:"business_link_002",name:"订单支付链路",type:"business_link",category:"交易管理",status:"running",description:"从下单到支付完成的核心交易链路",owner:"交易团队",avgResponseTime:"1.2s",successRate:99.2,dailyVolume:15e3,dependencies:["order_service","payment_gateway","risk_control"],sla:{responseTime:"< 2s",availability:"99.95%",errorRate:"< 0.05%"},tags:["订单支付","核心链路","高可用"]},{id:"system_001",name:"用户中心系统",type:"business_system",category:"核心系统",status:"running",description:"统一用户管理、认证、权限控制系统",owner:"基础架构团队",version:"v2.1.0",instances:6,technology:"Spring Boot + MySQL",resources:{cpu:"24 cores",memory:"48GB",storage:"500GB"},metrics:{qps:5e3,responseTime:"120ms",errorRate:"0.02%"},tags:["用户管理","核心系统","微服务"]},{id:"system_002",name:"订单管理系统",type:"business_system",category:"核心系统",status:"running",description:"订单全生命周期管理系统",owner:"订单团队",version:"v3.0.1",instances:8,technology:"Spring Cloud + MySQL",resources:{cpu:"32 cores",memory:"64GB",storage:"1TB"},metrics:{qps:8e3,responseTime:"200ms",errorRate:"0.01%"},tags:["订单管理","核心系统","高并发"]},{id:"api_001",name:"用户登录接口",type:"api",category:"用户接口",status:"active",description:"用户登录认证接口，支持多种登录方式",owner:"用户中心团队",method:"POST",path:"/api/v1/user/login",version:"v1.2",responseTime:"95ms",qps:1200,successRate:99.8,rateLimit:"1000/min",authentication:"JWT Token",tags:["用户登录","高频接口","认证"]},{id:"api_002",name:"订单创建接口",type:"api",category:"交易接口",status:"active",description:"创建新订单的核心接口",owner:"订单团队",method:"POST",path:"/api/v1/order/create",version:"v2.0",responseTime:"180ms",qps:800,successRate:99.5,rateLimit:"500/min",authentication:"Bearer Token",tags:["订单创建","核心接口","交易"]},{id:"database_001",name:"用户数据库集群",type:"database",category:"MySQL集群",status:"running",description:"用户相关数据存储的MySQL主从集群",owner:"DBA团队",technology:"MySQL 8.0",config:"1主4从",nodes:5,storage:"2TB",connections:500,qps:15e3,region:"华东-1",backup:"每日全量+实时增量",tags:["用户数据","MySQL","主从集群"]},{id:"database_002",name:"订单数据库集群",type:"database",category:"MySQL集群",status:"running",description:"订单交易数据存储的MySQL分库分表集群",owner:"DBA团队",technology:"MySQL 8.0",config:"2主6从",nodes:8,storage:"5TB",connections:800,qps:25e3,region:"华东-1",backup:"每日全量+实时增量",tags:["订单数据","MySQL","分库分表"]},{id:"table_001",name:"用户基础信息表",type:"table",category:"用户表",status:"active",description:"存储用户基础信息的核心表",owner:"用户中心团队",database:"user_center",tableName:"user_basic_info",rowCount:5e6,dataSize:"2.5GB",indexCount:8,partitions:12,lastAnalyzed:"2024-12-17 02:00:00",growthRate:"1000/day",tags:["用户信息","核心表","大表"]},{id:"table_002",name:"订单主表",type:"table",category:"订单表",status:"active",description:"存储订单主要信息的核心表",owner:"订单团队",database:"order_center",tableName:"order_main",rowCount:2e7,dataSize:"15GB",indexCount:12,partitions:24,lastAnalyzed:"2024-12-17 01:30:00",growthRate:"5000/day",tags:["订单信息","核心表","分区表"]},{id:"middleware_001",name:"Redis缓存集群",type:"middleware",category:"缓存中间件",status:"running",description:"分布式缓存集群，提供高性能数据访问",owner:"基础架构团队",technology:"Redis 7.0",config:"3主6从",nodes:9,memory:"256GB",hitRate:95.8,qps:5e4,region:"华东-1",tags:["缓存","Redis","高性能"]},{id:"middleware_002",name:"消息队列集群",type:"middleware",category:"消息中间件",status:"running",description:"异步消息处理和事件驱动架构支撑",owner:"基础架构团队",technology:"RocketMQ",config:"3节点集群",nodes:3,topics:45,dailyMessages:1e7,storage:"1TB",region:"华东-1",tags:["消息队列","RocketMQ","异步处理"]},{id:"service_001",name:"用户认证服务",type:"microservice",category:"基础服务",status:"running",description:"提供统一用户认证和授权服务",owner:"用户中心团队",version:"v1.8.0",instances:4,language:"Java",framework:"Spring Boot",port:8080,healthCheck:"/health",metrics:{qps:2e3,responseTime:"80ms",errorRate:"0.01%"},tags:["认证服务","微服务","基础组件"]},{id:"job_001",name:"订单状态同步任务",type:"scheduled_job",category:"数据同步",status:"running",description:"定时同步订单状态到数据仓库",owner:"数据团队",schedule:"0 */5 * * * *",lastRun:"2024-12-17 14:25:00",nextRun:"2024-12-17 14:30:00",avgDuration:"45s",successRate:99.5,processedRecords:15e3,tags:["定时任务","数据同步","订单"]},{id:"config_001",name:"支付配置中心",type:"configuration",category:"业务配置",status:"active",description:"支付相关的配置参数管理",owner:"支付团队",configCount:156,environment:"production",lastModified:"2024-12-17 10:15:00",version:"v2.3.1",encrypted:!0,tags:["支付配置","配置中心","生产环境"]}],cs={entities:ls},{Title:$e,Paragraph:Ee}=J,{Search:ds}=Tt,{Option:W}=Ge,ps=S.div`
  padding: 24px;
`,xs=S.div`
  margin-bottom: 24px;
`,Ze=S.div`
  min-height: 500px;
`,ie=S(D)`
  .ant-card-body {
    padding: 16px;
  }
`,hs=S.div`
  margin-bottom: 24px;
  padding: 16px;
  background: var(--card-bg);
  border-radius: 8px;
  border: 1px solid var(--border-color);
`,us=S.div`
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
  gap: 16px;
`,Is=()=>{const{t}=We(["entities","common"]),r=gt(),[h,v]=w.useState("entities"),[p,x]=w.useState("all"),[T,c]=w.useState(""),[z,u]=w.useState("all"),[q,A]=w.useState("all"),[m,U]=w.useState(null),[L,H]=w.useState(!1),[P,ee]=w.useState([]);w.useEffect(()=>{ot(t("entities:title")),ee(cs.entities)},[t]);const G=()=>{r("/entities/create")},te=g=>{r(`/entities/edit/${g.id}`)},xe=g=>{v(g)},oe=g=>{U(g),H(!0)},le=()=>({total:P.length,active:P.filter(y=>y.status==="active"||y.status==="running").length,inactive:P.filter(y=>y.status==="inactive").length,warning:P.filter(y=>y.status==="warning").length}),ce=()=>{const g={};return P.forEach(y=>{g[y.type]=(g[y.type]||0)+1}),g},de=()=>{let g=P;return p!=="all"&&(g=g.filter(y=>y.type===p)),T&&(g=g.filter(y=>{var $;return y.name.toLowerCase().includes(T.toLowerCase())||y.description.toLowerCase().includes(T.toLowerCase())||(($=y.tags)==null?void 0:$.some(i=>i.toLowerCase().includes(T.toLowerCase())))})),z!=="all"&&(g=g.filter(y=>y.type===z)),q!=="all"&&(g=g.filter(y=>y.status===q)),g},he=()=>{const g=le(),y=de();return e.jsxs(Ze,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:24},children:[e.jsxs("div",{children:[e.jsx($e,{level:3,style:{margin:0},children:t("entities:title")}),e.jsx(Ee,{style:{marginTop:8,marginBottom:0},children:t("entities:subtitle")})]}),e.jsxs(R,{children:[e.jsx(k,{icon:e.jsx(Ae,{}),children:t("common:export")}),e.jsx(k,{icon:e.jsx(ge,{}),children:t("common:refresh")}),e.jsx(k,{type:"primary",icon:e.jsx(Ne,{}),onClick:G,children:t("entities:createEntity")})]})]}),e.jsxs(ae,{gutter:16,style:{marginBottom:24},children:[e.jsx(I,{xs:24,sm:12,md:6,children:e.jsx(ie,{className:"entity-stats-primary",children:e.jsx(E,{title:t("entities:stats.totalEntities"),value:g.total,suffix:t("common:unit.count"),prefix:e.jsx(Ke,{})})})}),e.jsx(I,{xs:24,sm:12,md:6,children:e.jsx(ie,{className:"entity-stats-success",children:e.jsx(E,{title:t("entities:stats.activeEntities"),value:g.active,suffix:t("common:unit.count"),prefix:e.jsx(Pe,{})})})}),e.jsx(I,{xs:24,sm:12,md:6,children:e.jsx(ie,{className:"entity-stats-warning",children:e.jsx(E,{title:t("entities:stats.warningEntities"),value:g.warning,suffix:t("common:unit.count"),prefix:e.jsx(St,{})})})}),e.jsx(I,{xs:24,sm:12,md:6,children:e.jsx(ie,{className:"entity-stats-error",children:e.jsx(E,{title:t("entities:stats.errorEntities"),value:g.inactive,suffix:t("common:unit.count"),prefix:e.jsx(kt,{})})})})]}),e.jsx("div",{style:{marginBottom:16},children:e.jsxs(R,{wrap:!0,children:[e.jsxs(o.CheckableTag,{checked:p==="all",onChange:()=>x("all"),children:["全部 (",g.total,")"]}),e.jsxs(o.CheckableTag,{checked:p==="report",onChange:()=>x("report"),children:["📊 ",t("entities:types.report")," (",M.report||0,")"]}),e.jsxs(o.CheckableTag,{checked:p==="business_link",onChange:()=>x("business_link"),children:["🔗 ",t("entities:types.businessLink")," (",M.business_link||0,")"]}),e.jsxs(o.CheckableTag,{checked:p==="business_system",onChange:()=>x("business_system"),children:["🏢 ",t("entities:types.businessSystem")," (",M.business_system||0,")"]}),e.jsxs(o.CheckableTag,{checked:p==="api",onChange:()=>x("api"),children:["🔌 ",t("entities:types.api")," (",M.api||0,")"]}),e.jsxs(o.CheckableTag,{checked:p==="database",onChange:()=>x("database"),children:["💾 ",t("entities:types.database")," (",M.database||0,")"]}),e.jsxs(o.CheckableTag,{checked:p==="table",onChange:()=>x("table"),children:["📋 ",t("entities:types.table")," (",M.table||0,")"]}),e.jsxs(o.CheckableTag,{checked:p==="middleware",onChange:()=>x("middleware"),children:["☁️ ",t("entities:types.middleware")," (",M.middleware||0,")"]}),e.jsxs(o.CheckableTag,{checked:p==="microservice",onChange:()=>x("microservice"),children:["🔧 ",t("entities:types.microservice")," (",M.microservice||0,")"]}),e.jsxs(o.CheckableTag,{checked:p==="scheduled_job",onChange:()=>x("scheduled_job"),children:["⏰ ",t("entities:types.scheduledJob")," (",M.scheduled_job||0,")"]}),e.jsxs(o.CheckableTag,{checked:p==="configuration",onChange:()=>x("configuration"),children:["⚙️ 配置 (",M.configuration||0,")"]})]})}),e.jsx(hs,{children:e.jsxs(ae,{gutter:16,align:"middle",children:[e.jsx(I,{flex:"auto",children:e.jsx(ds,{placeholder:t("entities:searchPlaceholder"),value:T,onChange:$=>c($.target.value),style:{width:"100%"},allowClear:!0})}),e.jsx(I,{children:e.jsxs(Ge,{value:z,onChange:u,style:{width:120},placeholder:t("entities:typeFilter"),children:[e.jsx(W,{value:"all",children:t("entities:allTypes")}),e.jsx(W,{value:"report",children:t("entities:types.report")}),e.jsx(W,{value:"business_link",children:t("entities:types.businessLink")}),e.jsx(W,{value:"business_system",children:t("entities:types.businessSystem")}),e.jsx(W,{value:"api",children:t("entities:types.api")}),e.jsx(W,{value:"database",children:t("entities:types.database")}),e.jsx(W,{value:"table",children:t("entities:types.table")}),e.jsx(W,{value:"middleware",children:t("entities:types.middleware")}),e.jsx(W,{value:"microservice",children:t("entities:types.microservice")}),e.jsx(W,{value:"scheduled_job",children:t("entities:types.scheduledJob")}),e.jsx(W,{value:"configuration",children:t("entities:types.configuration")})]})}),e.jsx(I,{children:e.jsxs(Ge,{value:q,onChange:A,style:{width:100},placeholder:"状态",children:[e.jsx(W,{value:"all",children:"所有状态"}),e.jsx(W,{value:"active",children:"活跃"}),e.jsx(W,{value:"running",children:"运行中"}),e.jsx(W,{value:"inactive",children:"停用"}),e.jsx(W,{value:"warning",children:"告警"})]})})]})}),y.length>0?e.jsx(us,{children:y.map($=>e.jsx(Vt,{entity:$,onClick:oe,onEdit:te},$.id))}):e.jsx(zt,{description:t("entities:noEntitiesFound"),style:{margin:"60px 0"}})]})},a=()=>{var g;return m?e.jsxs(Ct,{title:`${t("entities:entityDetail")}: ${m.name}`,open:L,onCancel:()=>H(!1),width:800,footer:[e.jsx(k,{onClick:()=>H(!1),children:t("common:close")},"close"),e.jsx(k,{type:"primary",icon:e.jsx(Je,{}),children:t("common:edit")},"edit")],children:[e.jsxs(N,{column:1,bordered:!0,size:"small",children:[e.jsx(N.Item,{label:t("entities:entityId"),children:m.id}),e.jsx(N.Item,{label:t("entities:entityName"),children:m.name}),e.jsx(N.Item,{label:t("entities:entityType"),children:e.jsx(o,{color:"blue",children:m.type})}),e.jsx(N.Item,{label:t("entities:category"),children:m.category}),e.jsx(N.Item,{label:"状态",children:e.jsx(De,{status:m.status==="active"||m.status==="running"?"success":"error",text:m.status})}),e.jsx(N.Item,{label:"描述",children:m.description}),e.jsx(N.Item,{label:"负责人",children:m.owner}),m.version&&e.jsx(N.Item,{label:"版本",children:m.version}),m.technology&&e.jsx(N.Item,{label:"技术栈",children:m.technology}),m.instances&&e.jsx(N.Item,{label:"实例数",children:m.instances}),m.method&&e.jsx(N.Item,{label:"请求方法",children:e.jsx(o,{color:m.method==="GET"?"green":"blue",children:m.method})}),m.path&&e.jsx(N.Item,{label:t("entities:apiPath"),children:e.jsx("code",{children:m.path})}),m.database&&e.jsx(N.Item,{label:t("entities:belongsToDatabase"),children:m.database}),m.tableName&&e.jsx(N.Item,{label:t("entities:tableName"),children:e.jsx("code",{children:m.tableName})}),e.jsx(N.Item,{label:"标签",children:e.jsx(R,{children:(g=m.tags)==null?void 0:g.map((y,$)=>e.jsx(o,{children:y},$))})})]}),m.metrics&&e.jsx(D,{title:"性能指标",size:"small",style:{marginTop:16},children:e.jsx(ae,{gutter:16,children:Object.entries(m.metrics).map(([y,$])=>e.jsx(I,{span:8,children:e.jsx(E,{title:y,value:$})},y))})}),m.sla&&e.jsx(D,{title:"SLA指标",size:"small",style:{marginTop:16},children:e.jsx(N,{column:1,size:"small",children:Object.entries(m.sla).map(([y,$])=>e.jsx(N.Item,{label:y,children:$},y))})})]}):null},C=()=>e.jsxs(Ze,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:24},children:[e.jsxs("div",{children:[e.jsx($e,{level:3,style:{margin:0},children:t("entities:relationshipGraph")}),e.jsx(Ee,{style:{marginTop:8,marginBottom:0},children:t("entities:relationshipGraphDesc")})]}),e.jsxs(R,{children:[e.jsx(k,{icon:e.jsx(Ae,{}),children:t("entities:exportGraph")}),e.jsx(k,{icon:e.jsx(Te,{}),children:t("entities:graphSettings")}),e.jsx(k,{icon:e.jsx(ge,{}),children:t("entities:refreshGraph")})]})]}),e.jsxs(ae,{gutter:16,style:{marginBottom:24},children:[e.jsx(I,{xs:24,sm:12,md:6,children:e.jsx(ie,{className:"entity-stats-primary",children:e.jsx(E,{title:t("entities:stats.totalRelations"),value:25,suffix:t("common:unitRelation"),prefix:e.jsx(et,{})})})}),e.jsx(I,{xs:24,sm:12,md:6,children:e.jsx(ie,{className:"entity-stats-success",children:e.jsx(E,{title:t("entities:stats.relationTypes"),value:5,suffix:t("common:unitType"),prefix:e.jsx(He,{})})})}),e.jsx(I,{xs:24,sm:12,md:6,children:e.jsx(ie,{className:"entity-stats-warning",children:e.jsx(E,{title:t("entities:stats.graphNodes"),value:21,suffix:t("common:unit.count"),prefix:e.jsx(ze,{})})})}),e.jsx(I,{xs:24,sm:12,md:6,children:e.jsx(ie,{className:"entity-stats-purple",children:e.jsx(E,{title:t("entities:stats.connectedSystems"),value:5,suffix:t("common:unit.count"),prefix:e.jsx(Ue,{})})})})]}),e.jsx(os,{})]}),M=ce();return e.jsxs(ps,{className:"entity-management-page",children:[e.jsx(xs,{children:e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:e.jsxs("div",{children:[e.jsx($e,{level:2,style:{margin:0},children:t("entities:title")}),e.jsx(Ee,{style:{marginTop:8,marginBottom:0,fontSize:16},children:t("entities:description")})]})})}),e.jsx(D,{children:e.jsxs(me,{activeKey:h,onChange:xe,size:"large",tabBarStyle:{marginBottom:24},children:[e.jsx(me.TabPane,{tab:e.jsxs(R,{children:[e.jsx(ze,{}),t("entities:title")]}),children:he()},"entities"),e.jsx(me.TabPane,{tab:e.jsxs(R,{children:[e.jsx(Me,{}),t("entities:relationshipGraph")]}),children:C()},"relationships")]})}),a()]})},ms=S.div`
  width: 100%;
  height: 800px;
  border: 1px solid var(--border-color);
  border-radius: 8px;
  position: relative;
  background-color: var(--background-color);
  overflow: hidden;
`,gs=S.div`
  position: absolute;
  top: 16px;
  right: 16px;
  z-index: 10;
  background: var(--card-bg);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  padding: 8px;
  box-shadow: var(--card-shadow);
`,ys=S.div`
  position: absolute;
  top: 16px;
  left: 16px;
  z-index: 10;
  background: var(--card-bg);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  padding: 12px;
  box-shadow: var(--card-shadow);
  max-width: 300px;
`,js=S.div`
  position: absolute;
  background: var(--card-bg);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  padding: 12px;
  box-shadow: var(--card-shadow);
  pointer-events: none;
  z-index: 20;
  max-width: 250px;
  font-size: 12px;
  line-height: 1.4;
`,fs=({planes:t,nodes:r,links:h,width:v,height:p=800,loading:x=!1,error:T=null,onNodeClick:c,onNodeHover:z,showLegend:u=!0,showControls:q=!0,className:A,style:m})=>{const{t:U}=We(["relationships","common"]),L=w.useRef(null),H=w.useRef(null),[P,ee]=w.useState(null),[G,te]=w.useState(null),xe=(i,j)=>({1:"#1890ff",2:"#52c41a",3:"#faad14",4:"#722ed1",5:"#5F9EA0"})[j]||"#8c8c8c",oe=i=>({contains:"#1890ff",depends_on:"#52c41a",uses:"#faad14",runs_on:"#722ed1",stores_in:"#f5222d",logs_to:"#8c8c8c"})[i]||"#d9d9d9",le=i=>({1:20,2:16,3:14,4:12,5:10})[i]||12,ce=(i,j,F,O)=>{if(j.filter(ve=>ve.plane===i.id).length===0)return null;const X=O/t.length;return{x:50,y:(i.level-1)*X+50,width:F-100,height:X-20,rx:12,ry:12}},de=()=>{if(!L.current||!H.current||!r.length)return;const i=H.current,j=Ie(L.current),F=v||i.clientWidth,O=p;j.selectAll("*").remove(),j.attr("width",F).attr("height",O);const Q=ct().scaleExtent([.1,3]).on("zoom",n=>{X.attr("transform",n.transform)});j.call(Q);const X=j.append("g");t.length>0&&X.append("g").attr("class","planes").selectAll("g").data(t).enter().append("g").attr("class","plane").each(function(d){const b=ce(d,r,F,O);if(!b)return;const f=Ie(this);f.append("rect").attr("x",b.x).attr("y",b.y).attr("width",b.width).attr("height",b.height).attr("rx",b.rx).attr("ry",b.ry).attr("fill",d.color).attr("stroke",d.borderColor).attr("stroke-width",2).attr("stroke-dasharray","5,5").attr("opacity",.3),f.append("text").attr("x",b.x+20).attr("y",b.y+25).attr("font-size","16px").attr("font-weight","bold").attr("fill",d.borderColor).text(d.name),f.append("text").attr("x",b.x+20).attr("y",b.y+45).attr("font-size","12px").attr("fill","var(--text-secondary)").text(d.description)});const se=pt(r).force("link",xt(h).id(n=>n.id).distance(n=>{const d=n.source.level,b=n.target.level;return Math.abs(d-b)===1?80:120}).strength(n=>n.strength)).force("charge",ht().strength(-200)).force("center",ut(F/2,O/2)).force("collision",mt().radius(n=>le(n.level)+8));t.length>0&&se.force("plane",()=>{r.forEach(n=>{const d=t.find(be=>be.id===n.plane);if(!d)return;const b=ce(d,r,F,O);if(!b)return;const f=30,ne=b.x+f,V=b.x+b.width-f,ye=b.y+f+50,je=b.y+b.height-f;n.x<ne&&(n.x=ne),n.x>V&&(n.x=V),n.y<ye&&(n.y=ye),n.y>je&&(n.y=je)})});const fe=X.append("defs");Array.from(new Set(h.map(n=>n.type))).forEach(n=>{fe.append("marker").attr("id",`arrow-${n}`).attr("viewBox","0 -5 10 10").attr("refX",15).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("fill",oe(n))});const s=X.append("g").attr("class","links").selectAll("line").data(h).enter().append("line").attr("stroke",n=>oe(n.type)).attr("stroke-width",2).attr("stroke-opacity",.8).attr("marker-end",n=>`url(#arrow-${n.type})`),l=X.append("g").attr("class","nodes").selectAll("g").data(r).enter().append("g").attr("class","node").call(dt().on("start",(n,d)=>{n.active||se.alphaTarget(.3).restart(),d.fx=d.x,d.fy=d.y}).on("drag",(n,d)=>{d.fx=n.x,d.fy=n.y}).on("end",(n,d)=>{if(n.active||se.alphaTarget(0),t.length>0){const b=t.find(f=>f.id===d.plane);if(b){const f=ce(b,r,F,O);if(f){const V=f.x+30,ye=f.x+f.width-30,je=f.y+30+50,be=f.y+f.height-30;d.fx<V&&(d.fx=V),d.fx>ye&&(d.fx=ye),d.fy<je&&(d.fy=je),d.fy>be&&(d.fy=be)}}}}));l.append("circle").attr("r",n=>le(n.level)).attr("fill",n=>xe(n.type,n.level)).attr("stroke","#fff").attr("stroke-width",2).style("cursor","pointer"),l.append("text").text(n=>n.name).attr("x",0).attr("y",n=>le(n.level)+15).attr("text-anchor","middle").attr("font-size","10px").attr("fill","var(--text-color)").style("pointer-events","none"),l.on("mouseover",(n,d)=>{const b=new Set;b.add(d.id),h.forEach(f=>{const ne=typeof f.source=="string"?f.source:f.source.id,V=typeof f.target=="string"?f.target:f.target.id;ne===d.id&&b.add(V),V===d.id&&b.add(ne)}),l.style("opacity",f=>b.has(f.id)?1:.3),s.style("opacity",f=>{const ne=typeof f.source=="string"?f.source:f.source.id,V=typeof f.target=="string"?f.target:f.target.id;return ne===d.id||V===d.id?1:.1}),te({x:n.pageX+10,y:n.pageY-10,content:d}),z==null||z(d)}).on("mouseout",()=>{l.style("opacity",1),s.style("opacity",.8),te(null),z==null||z(null)}).on("click",(n,d)=>{ee(d),c==null||c(d)}),se.on("tick",()=>{s.attr("x1",n=>n.source.x).attr("y1",n=>n.source.y).attr("x2",n=>n.target.x).attr("y2",n=>n.target.y),l.attr("transform",n=>`translate(${n.x},${n.y})`)});const B=()=>{j.transition().call(Q.scaleBy,1.5)},_=()=>{j.transition().call(Q.scaleBy,1/1.5)},Z=()=>{j.transition().call(Q.transform,lt)},Y=()=>{r.forEach(n=>{n.fx=null,n.fy=null}),se.alpha(1).restart()};L.current.zoomIn=B,L.current.zoomOut=_,L.current.resetZoom=Z,L.current.resetNodePositions=Y};w.useEffect(()=>{if(r.length>0&&!x){const i=setTimeout(()=>{de()},100);return()=>clearTimeout(i)}},[r,h,t,x,v,p]),w.useEffect(()=>{const i=()=>{r.length>0&&!x&&de()};return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[r,h,t,x]);const he=()=>{var i,j;(j=(i=L.current)==null?void 0:i.zoomIn)==null||j.call(i)},a=()=>{var i,j;(j=(i=L.current)==null?void 0:i.zoomOut)==null||j.call(i)},C=()=>{var i,j;(j=(i=L.current)==null?void 0:i.resetZoom)==null||j.call(i)},M=()=>{var i,j;(j=(i=L.current)==null?void 0:i.resetNodePositions)==null||j.call(i)},g=()=>{de()};if(x)return e.jsxs("div",{style:{textAlign:"center",padding:"100px 0",...m},className:A,children:[e.jsx(tt,{size:"large"}),e.jsx("div",{style:{marginTop:16},children:"Loading topology graph..."})]});if(T)return e.jsx("div",{style:m,className:A,children:e.jsx(st,{message:"Error",description:T,type:"error",showIcon:!0})});const y=Array.from(new Set(r.map(i=>i.level))).sort(),$=Array.from(new Set(h.map(i=>i.type)));return e.jsxs(ms,{ref:H,style:{height:p,...m},className:A,children:[e.jsx("svg",{ref:L}),q&&e.jsx(gs,{children:e.jsxs(R,{direction:"vertical",size:"small",children:[e.jsx(k,{size:"small",icon:e.jsx(nt,{}),onClick:he,title:"放大"}),e.jsx(k,{size:"small",icon:e.jsx(it,{}),onClick:a,title:"缩小"}),e.jsx(k,{size:"small",icon:e.jsx(rt,{}),onClick:C,title:"重置视图"}),e.jsx(k,{size:"small",icon:e.jsx(at,{}),onClick:M,title:"重置节点位置"}),e.jsx(k,{size:"small",icon:e.jsx(ge,{}),onClick:g,title:"刷新图表"})]})}),u&&e.jsxs(ys,{children:[e.jsx("div",{style:{marginBottom:12,fontWeight:"bold",fontSize:"14px"},children:"图例"}),t.length>0&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{marginBottom:4,fontSize:"12px",fontWeight:"bold"},children:"平面:"}),t.map(i=>e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:2},children:[e.jsx("div",{style:{width:16,height:12,backgroundColor:i.color,border:`1px solid ${i.borderColor}`,borderRadius:2,marginRight:6}}),e.jsx("span",{style:{fontSize:"11px"},children:i.name})]},i.id))]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("div",{style:{marginBottom:4,fontSize:"12px",fontWeight:"bold"},children:"节点层级:"}),y.map(i=>e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:2},children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:xe("",i),marginRight:6}}),e.jsxs("span",{style:{fontSize:"11px"},children:["层级 ",i]})]},i))]}),e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:4,fontSize:"12px",fontWeight:"bold"},children:"关系类型:"}),$.map(i=>e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:2},children:[e.jsx("div",{style:{width:16,height:2,backgroundColor:oe(i),marginRight:6}}),e.jsx("span",{style:{fontSize:"11px"},children:i})]},i))]})]}),G&&e.jsxs(js,{style:{left:G.x,top:G.y},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:4},children:G.content.name}),e.jsxs("div",{style:{marginBottom:2},children:["类型: ",G.content.type]}),e.jsxs("div",{style:{marginBottom:2},children:["层级: ",G.content.level]}),e.jsxs("div",{style:{marginBottom:2},children:["平面: ",G.content.plane]}),e.jsxs("div",{style:{marginBottom:2},children:["状态:",e.jsx(o,{color:G.content.status==="active"||G.content.status==="running"?"green":"red",size:"small",style:{marginLeft:4},children:G.content.status})]}),e.jsx("div",{style:{fontSize:"11px",color:"var(--text-secondary)"},children:G.content.description})]}),P&&e.jsx(D,{title:`节点详情: ${P.name}`,size:"small",style:{position:"absolute",bottom:16,left:16,right:16,maxHeight:"200px",overflow:"auto"},extra:e.jsx(k,{size:"small",onClick:()=>ee(null),children:"关闭"}),children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:16},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"基本信息:"}),e.jsxs("div",{children:["ID: ",P.id]}),e.jsxs("div",{children:["类型: ",P.type]}),e.jsxs("div",{children:["层级: ",P.level]}),e.jsxs("div",{children:["平面: ",P.plane]}),e.jsxs("div",{children:["状态:"," ",e.jsx(o,{color:P.status==="active"||P.status==="running"?"green":"red",children:P.status})]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"描述:"}),e.jsx("div",{children:P.description})]}),Object.keys(P).filter(i=>!["id","name","type","level","plane","description","status","x","y","fx","fy","vx","vy","index"].includes(i)).length>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"其他信息:"}),Object.entries(P).filter(([i])=>!["id","name","type","level","plane","description","status","x","y","fx","fy","vx","vy","index"].includes(i)).map(([i,j])=>e.jsxs("div",{children:[i,": ",typeof j=="object"?JSON.stringify(j):String(j)]},i))]})]})})]})},{Title:Le,Paragraph:K}=J,vs=S.div`
  padding: 24px;
`,bs=S.div`
  margin-bottom: 24px;
`,Ve=S.div`
  min-height: 500px;
`,re=S(D)`
  .ant-card-body {
    padding: 16px;
  }
`,ue=S(D)`
  height: 100%;

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
`,Rs=()=>{const[t,r]=w.useState("entities"),[h,v]=w.useState(!1),[p,x]=w.useState(null),[T]=w.useState([{id:"business_scenario_plane",name:"业务场景平面",level:1,color:"#e6f7ff",borderColor:"#1890ff",description:"核心业务场景和用户旅程"},{id:"business_link_plane",name:"业务链路平面",level:2,color:"#f6ffed",borderColor:"#52c41a",description:"业务场景的具体执行链路"},{id:"application_plane",name:"应用平面",level:3,color:"#fff7e6",borderColor:"#faad14",description:"业务系统和应用服务层"},{id:"middleware_plane",name:"中间件平面",level:4,color:"#f9f0ff",borderColor:"#722ed1",description:"中间件和基础服务层"},{id:"infrastructure_plane",name:"基础设施平面",level:5,color:"#f0f8f8",borderColor:"#5F9EA0",description:"基础设施和资源层"}]),[c]=w.useState([{id:"business_scenario_1",name:"电商下单场景",type:"business_scenario",level:1,plane:"business_scenario_plane",description:"用户在电商平台完成商品购买的完整流程",status:"active"},{id:"business_scenario_2",name:"支付结算场景",type:"business_scenario",level:1,plane:"business_scenario_plane",description:"处理用户支付和商户结算的完整业务场景",status:"active"},{id:"business_link_1",name:"用户下单链路",type:"business_link",level:2,plane:"business_link_plane",description:"从商品选择到订单确认的业务链路",status:"active"},{id:"system_1",name:"用户中心系统",type:"business_system",level:3,plane:"application_plane",description:"管理用户信息、认证、权限的核心系统",status:"running",version:"v2.1.0",instances:6},{id:"system_2",name:"商品管理系统",type:"business_system",level:3,plane:"application_plane",description:"商品信息、价格、促销管理系统",status:"running",version:"v1.8.2",instances:4}]),[z]=w.useState([{source:"business_scenario_1",target:"business_link_1",type:"contains",strength:.8},{source:"business_link_1",target:"system_1",type:"uses",strength:.6},{source:"business_link_1",target:"system_2",type:"uses",strength:.6}]);w.useEffect(()=>{ot("实体关系")},[]);const u=L=>{r(L)},q=L=>{console.log("Node clicked:",L)},A=L=>{console.log("Node hovered:",L)},m=()=>e.jsxs(Ve,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:24},children:[e.jsxs("div",{children:[e.jsx(Le,{level:3,style:{margin:0},children:"实体管理"}),e.jsx(K,{style:{marginTop:8,marginBottom:0},children:"管理系统中的各种实体对象，包括实体类型定义、实体实例创建和属性配置。"})]}),e.jsxs(R,{children:[e.jsx(k,{icon:e.jsx(Re,{}),children:"搜索"}),e.jsx(k,{icon:e.jsx(It,{}),children:"筛选"}),e.jsx(k,{icon:e.jsx(ge,{}),children:"刷新"}),e.jsx(k,{type:"primary",icon:e.jsx(Ne,{}),children:"创建实体"})]})]}),e.jsxs(ae,{gutter:16,style:{marginBottom:24},children:[e.jsx(I,{xs:24,sm:12,md:6,children:e.jsx(re,{children:e.jsx(E,{title:"实体类型",value:0,suffix:"个",valueStyle:{color:"#1890ff"}})})}),e.jsx(I,{xs:24,sm:12,md:6,children:e.jsx(re,{children:e.jsx(E,{title:"实体实例",value:0,suffix:"个",valueStyle:{color:"#52c41a"}})})}),e.jsx(I,{xs:24,sm:12,md:6,children:e.jsx(re,{children:e.jsx(E,{title:"活跃实体",value:0,suffix:"个",valueStyle:{color:"#faad14"}})})}),e.jsx(I,{xs:24,sm:12,md:6,children:e.jsx(re,{children:e.jsx(E,{title:"异常实体",value:0,suffix:"个",valueStyle:{color:"#f5222d"}})})})]}),e.jsxs(ae,{gutter:16,children:[e.jsx(I,{xs:24,md:12,lg:8,children:e.jsxs(ue,{title:e.jsxs(R,{children:[e.jsx(ze,{style:{color:"#1890ff"}}),"实体类型管理"]}),children:[e.jsx(K,{children:"定义和管理不同类型的实体，包括属性定义、约束规则和生命周期配置。"}),e.jsxs("div",{children:[e.jsx(o,{color:"blue",children:"类型定义"}),e.jsx(o,{color:"blue",children:"属性配置"}),e.jsx(o,{color:"blue",children:"约束规则"})]})]})}),e.jsx(I,{xs:24,md:12,lg:8,children:e.jsxs(ue,{title:e.jsxs(R,{children:[e.jsx(Ne,{style:{color:"#52c41a"}}),"实体实例管理"]}),children:[e.jsx(K,{children:"创建、编辑和管理具体的实体实例，支持批量操作和状态管理。"}),e.jsxs("div",{children:[e.jsx(o,{color:"green",children:"实例创建"}),e.jsx(o,{color:"green",children:"批量操作"}),e.jsx(o,{color:"green",children:"状态管理"})]})]})}),e.jsx(I,{xs:24,md:12,lg:8,children:e.jsxs(ue,{title:e.jsxs(R,{children:[e.jsx(Re,{style:{color:"#faad14"}}),"搜索与过滤"]}),children:[e.jsx(K,{children:"强大的搜索和过滤功能，支持多维度查询和高级筛选条件。"}),e.jsxs("div",{children:[e.jsx(o,{color:"orange",children:"全文搜索"}),e.jsx(o,{color:"orange",children:"高级筛选"}),e.jsx(o,{color:"orange",children:"快速定位"})]})]})})]})]}),U=()=>e.jsxs(Ve,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:24},children:[e.jsxs("div",{children:[e.jsx(Le,{level:3,style:{margin:0},children:"关系图谱"}),e.jsx(K,{style:{marginTop:8,marginBottom:0},children:"基于D3.js的交互式关系图谱，展示从业务场景到基础设施的完整技术架构关系。"})]}),e.jsxs(R,{children:[e.jsx(k,{icon:e.jsx(Ae,{}),children:"导出图谱"}),e.jsx(k,{icon:e.jsx(Te,{}),children:"图谱设置"}),e.jsx(k,{icon:e.jsx(ge,{}),children:"刷新图谱"})]})]}),e.jsxs(ae,{gutter:16,style:{marginBottom:24},children:[e.jsx(I,{xs:24,sm:12,md:6,children:e.jsx(re,{children:e.jsx(E,{title:"关系总数",value:25,suffix:"条",valueStyle:{color:"#1890ff"}})})}),e.jsx(I,{xs:24,sm:12,md:6,children:e.jsx(re,{children:e.jsx(E,{title:"关系类型",value:5,suffix:"种",valueStyle:{color:"#52c41a"}})})}),e.jsx(I,{xs:24,sm:12,md:6,children:e.jsx(re,{children:e.jsx(E,{title:"图谱节点",value:21,suffix:"个",valueStyle:{color:"#faad14"}})})}),e.jsx(I,{xs:24,sm:12,md:6,children:e.jsx(re,{children:e.jsx(E,{title:"支付系统",value:5,suffix:"个",valueStyle:{color:"#722ed1"}})})})]}),e.jsx(fs,{planes:T,nodes:c,links:z,loading:h,error:p,onNodeClick:q,onNodeHover:A,showLegend:!0,showControls:!0}),e.jsxs(ae,{gutter:16,style:{marginTop:24},children:[e.jsx(I,{xs:24,md:12,lg:8,children:e.jsxs(ue,{title:e.jsxs(R,{children:[e.jsx(Me,{style:{color:"#1890ff"}}),"多层级架构"]}),children:[e.jsx(K,{children:"展示从业务场景、业务链路、业务系统、中间件到基础设施的5层架构关系。"}),e.jsxs("div",{children:[e.jsx(o,{color:"blue",children:"业务场景"}),e.jsx(o,{color:"green",children:"业务链路"}),e.jsx(o,{color:"orange",children:"业务系统"}),e.jsx(o,{color:"purple",children:"中间件"}),e.jsx(o,{style:{color:"#5F9EA0",borderColor:"#5F9EA0"},children:"基础设施"})]})]})}),e.jsx(I,{xs:24,md:12,lg:8,children:e.jsxs(ue,{title:e.jsxs(R,{children:[e.jsx(Re,{style:{color:"#52c41a"}}),"交互式探索"]}),children:[e.jsx(K,{children:"展示完整的支付结算生态系统，包含支付网关、钱包、风控、清结算等核心系统。"}),e.jsxs("div",{children:[e.jsx(o,{color:"blue",children:"支付网关"}),e.jsx(o,{color:"green",children:"钱包系统"}),e.jsx(o,{color:"orange",children:"风控系统"}),e.jsx(o,{color:"purple",children:"清结算"}),e.jsx(o,{color:"red",children:"账务系统"})]})]})}),e.jsx(I,{xs:24,md:12,lg:8,children:e.jsxs(ue,{title:e.jsxs(R,{children:[e.jsx(Te,{style:{color:"#faad14"}}),"关系类型"]}),children:[e.jsx(K,{children:"支持包含、依赖、使用、运行、存储、日志等6种关系类型的可视化展示。"}),e.jsxs("div",{children:[e.jsx(o,{color:"orange",children:"包含关系"}),e.jsx(o,{color:"orange",children:"依赖关系"}),e.jsx(o,{color:"orange",children:"使用关系"}),e.jsx(o,{color:"orange",children:"运行关系"})]})]})})]})]});return e.jsxs(vs,{children:[e.jsx(bs,{children:e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:e.jsxs("div",{children:[e.jsxs(Le,{level:2,style:{margin:0},children:["实体关系",e.jsx(De,{count:"开发中",style:{backgroundColor:"#faad14",marginLeft:12,fontSize:12}})]}),e.jsx(K,{style:{marginTop:8,marginBottom:0,fontSize:16},children:"统一管理系统中的实体对象和它们之间的关系，提供完整的实体生命周期管理和关系可视化分析。"})]})})}),e.jsx(D,{children:e.jsxs(me,{activeKey:t,onChange:u,size:"large",tabBarStyle:{marginBottom:24},children:[e.jsx(me.TabPane,{tab:e.jsxs(R,{children:[e.jsx(ze,{}),"实体管理"]}),children:m()},"entities"),e.jsx(me.TabPane,{tab:e.jsxs(R,{children:[e.jsx(Me,{}),"关系图谱"]}),children:U()},"relationships")]})})]})};export{Es as EntityForm,Ls as EntityFormPage,Is as EntityManagement,Rs as EntityRelationship,Is as default};

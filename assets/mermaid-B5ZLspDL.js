var XS=Object.defineProperty;var KS=(e,t,r)=>t in e?XS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Dr=(e,t,r)=>KS(e,typeof t!="symbol"?t+"":t,r);import{by as Tt,bz as qt,bA as On,bB as ne,bC as Xt,bD as on,bE as Co,bF as QS,bG as ZS,bH as JS,bI as tE,bJ as eE,bK as Kn,bL as Q2,bM as Z2,bN as ee,bO as rE,bP as aE,bQ as iE,bR as Yg,bS as nE,bT as sE,bU as oE,bV as Vo,bW as zo,bX as Ia,bY as qo,bZ as Wo,b_ as lE,b$ as cE}from"./vendor-ClJIwLAB.js";import{s as J2,a as tx,c as ex,b as rx,m as ax,d as ix,e as uE,f as fp,g as nx,h as hE,i as dE,j as sx,k as fE,l as pE,n as gE,o as ox,p as lx,q as yE,r as vE,t as Ss,u as It,v as Ml,G as Eh,w as ai,x as cx,y as mE,z as xE,A as bE,B as Fl,C as wE,D as kE,E as K1,F as j1,H as TE,I as CE,J as SE,K as EE,L as _E,M as AE,N as LE,O as Q1,P as Z1,Q as J1,R as ty,S as ey,T as DE,U as So,V as ux,W as BE,X as ry,Y as RE,Z as IE,_ as PE,$ as NE,a0 as ME,a1 as FE,a2 as OE}from"./d3-C77K6LmW.js";import{F as Ug,y as $E,d as ay,E as VE}from"./lodash-BORto0-T.js";import{d as Vr,a as zE,b as qE,c as WE,g as hx}from"./dayjs-Bzorz0fL.js";if(typeof j2>"u")var j2={};if(typeof jS>"u")var jS={exports:j2};const GE="modulepreload",HE=function(e){return"/tiang-live/"+e},iy={},_e=function(t,r,a){let i=Promise.resolve();if(r&&r.length>0){let s=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=s(r.map(u=>{if(u=HE(u),u in iy)return;iy[u]=!0;const h=u.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const f=document.createElement("link");if(f.rel=h?"stylesheet":GE,h||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),h)return new Promise((p,y)=>{f.addEventListener("load",p),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function n(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&n(o.reason);return t().catch(n)})};var dx=Object.defineProperty,g=(e,t)=>dx(e,"name",{value:t,configurable:!0}),_h=(e,t)=>{for(var r in t)dx(e,r,{get:t[r],enumerable:!0})},gi={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},G={trace:g((...e)=>{},"trace"),debug:g((...e)=>{},"debug"),info:g((...e)=>{},"info"),warn:g((...e)=>{},"warn"),error:g((...e)=>{},"error"),fatal:g((...e)=>{},"fatal")},Xg=g(function(e="fatal"){let t=gi.fatal;typeof e=="string"?e.toLowerCase()in gi&&(t=gi[e]):typeof e=="number"&&(t=e),G.trace=()=>{},G.debug=()=>{},G.info=()=>{},G.warn=()=>{},G.error=()=>{},G.fatal=()=>{},t<=gi.fatal&&(G.fatal=console.error?console.error.bind(console,Ta("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",Ta("FATAL"))),t<=gi.error&&(G.error=console.error?console.error.bind(console,Ta("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",Ta("ERROR"))),t<=gi.warn&&(G.warn=console.warn?console.warn.bind(console,Ta("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",Ta("WARN"))),t<=gi.info&&(G.info=console.info?console.info.bind(console,Ta("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",Ta("INFO"))),t<=gi.debug&&(G.debug=console.debug?console.debug.bind(console,Ta("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Ta("DEBUG"))),t<=gi.trace&&(G.trace=console.debug?console.debug.bind(console,Ta("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Ta("TRACE")))},"setLogLevel"),Ta=g(e=>`%c${Vr().format("ss.SSS")} : ${e} : `,"format"),fx=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,Al=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,YE=/\s*%%.*\n/gm,Rs,px=(Rs=class extends Error{constructor(t){super(t),this.name="UnknownDiagramError"}},g(Rs,"UnknownDiagramError"),Rs),Eo={},Kg=g(function(e,t){e=e.replace(fx,"").replace(Al,"").replace(YE,`
`);for(const[r,{detector:a}]of Object.entries(Eo))if(a(e,t))return r;throw new px(`No diagram type detected matching given configuration for text: ${e}`)},"detectType"),gx=g((...e)=>{for(const{id:t,detector:r,loader:a}of e)yx(t,r,a)},"registerLazyLoadedDiagrams"),yx=g((e,t,r)=>{Eo[e]&&G.warn(`Detector with key ${e} already exists. Overwriting.`),Eo[e]={detector:t,loader:r},G.debug(`Detector with key ${e} added${r?" with loader":""}`)},"addDetector"),UE=g(e=>Eo[e].loader,"getDiagramLoader"),pp=g((e,t,{depth:r=2,clobber:a=!1}={})=>{const i={depth:r,clobber:a};return Array.isArray(t)&&!Array.isArray(e)?(t.forEach(n=>pp(e,n,i)),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach(n=>{e.includes(n)||e.push(n)}),e):e===void 0||r<=0?e!=null&&typeof e=="object"&&typeof t=="object"?Object.assign(e,t):t:(t!==void 0&&typeof e=="object"&&typeof t=="object"&&Object.keys(t).forEach(n=>{typeof t[n]=="object"&&(e[n]===void 0||typeof e[n]=="object")?(e[n]===void 0&&(e[n]=Array.isArray(t[n])?[]:{}),e[n]=pp(e[n],t[n],{depth:r-1,clobber:a})):(a||typeof e[n]!="object"&&typeof t[n]!="object")&&(e[n]=t[n])}),e)},"assignWithDepth"),fr=pp,Ah="#ffffff",Lh="#f2f2f2",jr=g((e,t)=>t?Tt(e,{s:-40,l:10}):Tt(e,{s:-40,l:-10}),"mkBorder"),Is,XE=(Is=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var r,a,i,n,s,o,l,u,h,d,f,p,y,v,m,x,b,w,C,T,k;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||Tt(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||Tt(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||jr(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||jr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||jr(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||jr(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||qt(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||qt(this.tertiaryColor),this.lineColor=this.lineColor||qt(this.background),this.arrowheadColor=this.arrowheadColor||qt(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?ne(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||ne(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||qt(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||Xt(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||ne(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||ne(this.mainBkg,10)):(this.rowOdd=this.rowOdd||Xt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||Xt(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Tt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Tt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Tt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Tt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Tt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Tt(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||Tt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Tt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Tt(this.primaryColor,{h:330}),this.darkMode)for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScale"+S]=ne(this["cScale"+S],75);else for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScale"+S]=ne(this["cScale"+S],25);for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScaleInv"+S]=this["cScaleInv"+S]||qt(this["cScale"+S]);for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this.darkMode?this["cScalePeer"+S]=this["cScalePeer"+S]||Xt(this["cScale"+S],10):this["cScalePeer"+S]=this["cScalePeer"+S]||ne(this["cScale"+S],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScaleLabel"+S]=this["cScaleLabel"+S]||this.scaleLabelColor;const t=this.darkMode?-4:-1;for(let S=0;S<5;S++)this["surface"+S]=this["surface"+S]||Tt(this.mainBkg,{h:180,s:-15,l:t*(5+S*3)}),this["surfacePeer"+S]=this["surfacePeer"+S]||Tt(this.mainBkg,{h:180,s:-15,l:t*(8+S*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||Tt(this.primaryColor,{h:64}),this.fillType3=this.fillType3||Tt(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||Tt(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||Tt(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||Tt(this.primaryColor,{h:128}),this.fillType7=this.fillType7||Tt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||Tt(this.primaryColor,{l:-10}),this.pie5=this.pie5||Tt(this.secondaryColor,{l:-10}),this.pie6=this.pie6||Tt(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||Tt(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||Tt(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||Tt(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||Tt(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||Tt(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||Tt(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:((r=this.radar)==null?void 0:r.axisColor)||this.lineColor,axisStrokeWidth:((a=this.radar)==null?void 0:a.axisStrokeWidth)||2,axisLabelFontSize:((i=this.radar)==null?void 0:i.axisLabelFontSize)||12,curveOpacity:((n=this.radar)==null?void 0:n.curveOpacity)||.5,curveStrokeWidth:((s=this.radar)==null?void 0:s.curveStrokeWidth)||2,graticuleColor:((o=this.radar)==null?void 0:o.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((l=this.radar)==null?void 0:l.graticuleStrokeWidth)||1,graticuleOpacity:((u=this.radar)==null?void 0:u.graticuleOpacity)||.3,legendBoxSize:((h=this.radar)==null?void 0:h.legendBoxSize)||12,legendFontSize:((d=this.radar)==null?void 0:d.legendFontSize)||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Tt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Tt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Tt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Tt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Tt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Tt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||on(this.quadrant1Fill)?Xt(this.quadrant1Fill):ne(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((f=this.xyChart)==null?void 0:f.backgroundColor)||this.background,titleColor:((p=this.xyChart)==null?void 0:p.titleColor)||this.primaryTextColor,xAxisTitleColor:((y=this.xyChart)==null?void 0:y.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((v=this.xyChart)==null?void 0:v.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((m=this.xyChart)==null?void 0:m.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((x=this.xyChart)==null?void 0:x.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((b=this.xyChart)==null?void 0:b.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((w=this.xyChart)==null?void 0:w.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((C=this.xyChart)==null?void 0:C.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((T=this.xyChart)==null?void 0:T.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((k=this.xyChart)==null?void 0:k.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?ne(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Tt(this.primaryColor,{h:-30}),this.git4=this.git4||Tt(this.primaryColor,{h:-60}),this.git5=this.git5||Tt(this.primaryColor,{h:-90}),this.git6=this.git6||Tt(this.primaryColor,{h:60}),this.git7=this.git7||Tt(this.primaryColor,{h:120}),this.darkMode?(this.git0=Xt(this.git0,25),this.git1=Xt(this.git1,25),this.git2=Xt(this.git2,25),this.git3=Xt(this.git3,25),this.git4=Xt(this.git4,25),this.git5=Xt(this.git5,25),this.git6=Xt(this.git6,25),this.git7=Xt(this.git7,25)):(this.git0=ne(this.git0,25),this.git1=ne(this.git1,25),this.git2=ne(this.git2,25),this.git3=ne(this.git3,25),this.git4=ne(this.git4,25),this.git5=ne(this.git5,25),this.git6=ne(this.git6,25),this.git7=ne(this.git7,25)),this.gitInv0=this.gitInv0||qt(this.git0),this.gitInv1=this.gitInv1||qt(this.git1),this.gitInv2=this.gitInv2||qt(this.git2),this.gitInv3=this.gitInv3||qt(this.git3),this.gitInv4=this.gitInv4||qt(this.git4),this.gitInv5=this.gitInv5||qt(this.git5),this.gitInv6=this.gitInv6||qt(this.git6),this.gitInv7=this.gitInv7||qt(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ah,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Lh}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(a=>{this[a]=t[a]}),this.updateColors(),r.forEach(a=>{this[a]=t[a]})}},g(Is,"Theme"),Is),KE=g(e=>{const t=new XE;return t.calculate(e),t},"getThemeVariables"),Ps,jE=(Ps=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=Xt(this.primaryColor,16),this.tertiaryColor=Tt(this.primaryColor,{h:-160}),this.primaryBorderColor=qt(this.background),this.secondaryBorderColor=jr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=jr(this.tertiaryColor,this.darkMode),this.primaryTextColor=qt(this.primaryColor),this.secondaryTextColor=qt(this.secondaryColor),this.tertiaryTextColor=qt(this.tertiaryColor),this.lineColor=qt(this.background),this.textColor=qt(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=Xt(qt("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=On(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=ne("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=ne(this.sectionBkgColor,10),this.taskBorderColor=On(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=On(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||Xt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||ne(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var t,r,a,i,n,s,o,l,u,h,d,f,p,y,v,m,x,b,w,C,T;this.secondBkg=Xt(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=Xt(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=Xt(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Tt(this.primaryColor,{h:64}),this.fillType3=Tt(this.secondaryColor,{h:64}),this.fillType4=Tt(this.primaryColor,{h:-64}),this.fillType5=Tt(this.secondaryColor,{h:-64}),this.fillType6=Tt(this.primaryColor,{h:128}),this.fillType7=Tt(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Tt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Tt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Tt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Tt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Tt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Tt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Tt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Tt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Tt(this.primaryColor,{h:330});for(let k=0;k<this.THEME_COLOR_LIMIT;k++)this["cScaleInv"+k]=this["cScaleInv"+k]||qt(this["cScale"+k]);for(let k=0;k<this.THEME_COLOR_LIMIT;k++)this["cScalePeer"+k]=this["cScalePeer"+k]||Xt(this["cScale"+k],10);for(let k=0;k<5;k++)this["surface"+k]=this["surface"+k]||Tt(this.mainBkg,{h:30,s:-30,l:-(-10+k*4)}),this["surfacePeer"+k]=this["surfacePeer"+k]||Tt(this.mainBkg,{h:30,s:-30,l:-(-7+k*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let k=0;k<this.THEME_COLOR_LIMIT;k++)this["cScaleLabel"+k]=this["cScaleLabel"+k]||this.scaleLabelColor;for(let k=0;k<this.THEME_COLOR_LIMIT;k++)this["pie"+k]=this["cScale"+k];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Tt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Tt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Tt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Tt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Tt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Tt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||on(this.quadrant1Fill)?Xt(this.quadrant1Fill):ne(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((a=this.xyChart)==null?void 0:a.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((s=this.xyChart)==null?void 0:s.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((u=this.xyChart)==null?void 0:u.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((h=this.xyChart)==null?void 0:h.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((d=this.xyChart)==null?void 0:d.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:((f=this.radar)==null?void 0:f.axisColor)||this.lineColor,axisStrokeWidth:((p=this.radar)==null?void 0:p.axisStrokeWidth)||2,axisLabelFontSize:((y=this.radar)==null?void 0:y.axisLabelFontSize)||12,curveOpacity:((v=this.radar)==null?void 0:v.curveOpacity)||.5,curveStrokeWidth:((m=this.radar)==null?void 0:m.curveStrokeWidth)||2,graticuleColor:((x=this.radar)==null?void 0:x.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((b=this.radar)==null?void 0:b.graticuleStrokeWidth)||1,graticuleOpacity:((w=this.radar)==null?void 0:w.graticuleOpacity)||.3,legendBoxSize:((C=this.radar)==null?void 0:C.legendBoxSize)||12,legendFontSize:((T=this.radar)==null?void 0:T.legendFontSize)||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?ne(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Xt(this.secondaryColor,20),this.git1=Xt(this.pie2||this.secondaryColor,20),this.git2=Xt(this.pie3||this.tertiaryColor,20),this.git3=Xt(this.pie4||Tt(this.primaryColor,{h:-30}),20),this.git4=Xt(this.pie5||Tt(this.primaryColor,{h:-60}),20),this.git5=Xt(this.pie6||Tt(this.primaryColor,{h:-90}),10),this.git6=Xt(this.pie7||Tt(this.primaryColor,{h:60}),10),this.git7=Xt(this.pie8||Tt(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||qt(this.git0),this.gitInv1=this.gitInv1||qt(this.git1),this.gitInv2=this.gitInv2||qt(this.git2),this.gitInv3=this.gitInv3||qt(this.git3),this.gitInv4=this.gitInv4||qt(this.git4),this.gitInv5=this.gitInv5||qt(this.git5),this.gitInv6=this.gitInv6||qt(this.git6),this.gitInv7=this.gitInv7||qt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||qt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||qt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Xt(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Xt(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(a=>{this[a]=t[a]}),this.updateColors(),r.forEach(a=>{this[a]=t[a]})}},g(Ps,"Theme"),Ps),QE=g(e=>{const t=new jE;return t.calculate(e),t},"getThemeVariables"),Ns,ZE=(Ns=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=Tt(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=Tt(this.primaryColor,{h:-160}),this.primaryBorderColor=jr(this.primaryColor,this.darkMode),this.secondaryBorderColor=jr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=jr(this.tertiaryColor,this.darkMode),this.primaryTextColor=qt(this.primaryColor),this.secondaryTextColor=qt(this.secondaryColor),this.tertiaryTextColor=qt(this.tertiaryColor),this.lineColor=qt(this.background),this.textColor=qt(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=On(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var t,r,a,i,n,s,o,l,u,h,d,f,p,y,v,m,x,b,w,C,T;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Tt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Tt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Tt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Tt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Tt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Tt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Tt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Tt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Tt(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||ne(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||ne(this.tertiaryColor,40);for(let k=0;k<this.THEME_COLOR_LIMIT;k++)this["cScale"+k]=ne(this["cScale"+k],10),this["cScalePeer"+k]=this["cScalePeer"+k]||ne(this["cScale"+k],25);for(let k=0;k<this.THEME_COLOR_LIMIT;k++)this["cScaleInv"+k]=this["cScaleInv"+k]||Tt(this["cScale"+k],{h:180});for(let k=0;k<5;k++)this["surface"+k]=this["surface"+k]||Tt(this.mainBkg,{h:30,l:-(5+k*5)}),this["surfacePeer"+k]=this["surfacePeer"+k]||Tt(this.mainBkg,{h:30,l:-(7+k*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||qt(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||qt(this.labelTextColor);for(let k=0;k<this.THEME_COLOR_LIMIT;k++)this["cScaleLabel"+k]=this["cScaleLabel"+k]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=Xt(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||Xt(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||Xt(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Tt(this.primaryColor,{h:64}),this.fillType3=Tt(this.secondaryColor,{h:64}),this.fillType4=Tt(this.primaryColor,{h:-64}),this.fillType5=Tt(this.secondaryColor,{h:-64}),this.fillType6=Tt(this.primaryColor,{h:128}),this.fillType7=Tt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||Tt(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||Tt(this.primaryColor,{l:-10}),this.pie5=this.pie5||Tt(this.secondaryColor,{l:-30}),this.pie6=this.pie6||Tt(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||Tt(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||Tt(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||Tt(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||Tt(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||Tt(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||Tt(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Tt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Tt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Tt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Tt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Tt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Tt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||on(this.quadrant1Fill)?Xt(this.quadrant1Fill):ne(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:((t=this.radar)==null?void 0:t.axisColor)||this.lineColor,axisStrokeWidth:((r=this.radar)==null?void 0:r.axisStrokeWidth)||2,axisLabelFontSize:((a=this.radar)==null?void 0:a.axisLabelFontSize)||12,curveOpacity:((i=this.radar)==null?void 0:i.curveOpacity)||.5,curveStrokeWidth:((n=this.radar)==null?void 0:n.curveStrokeWidth)||2,graticuleColor:((s=this.radar)==null?void 0:s.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((o=this.radar)==null?void 0:o.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((u=this.radar)==null?void 0:u.legendBoxSize)||12,legendFontSize:((h=this.radar)==null?void 0:h.legendFontSize)||12},this.xyChart={backgroundColor:((d=this.xyChart)==null?void 0:d.backgroundColor)||this.background,titleColor:((f=this.xyChart)==null?void 0:f.titleColor)||this.primaryTextColor,xAxisTitleColor:((p=this.xyChart)==null?void 0:p.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((y=this.xyChart)==null?void 0:y.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((v=this.xyChart)==null?void 0:v.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((m=this.xyChart)==null?void 0:m.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((x=this.xyChart)==null?void 0:x.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((b=this.xyChart)==null?void 0:b.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((w=this.xyChart)==null?void 0:w.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((C=this.xyChart)==null?void 0:C.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((T=this.xyChart)==null?void 0:T.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Tt(this.primaryColor,{h:-30}),this.git4=this.git4||Tt(this.primaryColor,{h:-60}),this.git5=this.git5||Tt(this.primaryColor,{h:-90}),this.git6=this.git6||Tt(this.primaryColor,{h:60}),this.git7=this.git7||Tt(this.primaryColor,{h:120}),this.darkMode?(this.git0=Xt(this.git0,25),this.git1=Xt(this.git1,25),this.git2=Xt(this.git2,25),this.git3=Xt(this.git3,25),this.git4=Xt(this.git4,25),this.git5=Xt(this.git5,25),this.git6=Xt(this.git6,25),this.git7=Xt(this.git7,25)):(this.git0=ne(this.git0,25),this.git1=ne(this.git1,25),this.git2=ne(this.git2,25),this.git3=ne(this.git3,25),this.git4=ne(this.git4,25),this.git5=ne(this.git5,25),this.git6=ne(this.git6,25),this.git7=ne(this.git7,25)),this.gitInv0=this.gitInv0||ne(qt(this.git0),25),this.gitInv1=this.gitInv1||qt(this.git1),this.gitInv2=this.gitInv2||qt(this.git2),this.gitInv3=this.gitInv3||qt(this.git3),this.gitInv4=this.gitInv4||qt(this.git4),this.gitInv5=this.gitInv5||qt(this.git5),this.gitInv6=this.gitInv6||qt(this.git6),this.gitInv7=this.gitInv7||qt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||qt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||qt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ah,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Lh}calculate(t){if(Object.keys(this).forEach(a=>{this[a]==="calculated"&&(this[a]=void 0)}),typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(a=>{this[a]=t[a]}),this.updateColors(),r.forEach(a=>{this[a]=t[a]})}},g(Ns,"Theme"),Ns),Dh=g(e=>{const t=new ZE;return t.calculate(e),t},"getThemeVariables"),Ms,JE=(Ms=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=Xt("#cde498",10),this.primaryBorderColor=jr(this.primaryColor,this.darkMode),this.secondaryBorderColor=jr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=jr(this.tertiaryColor,this.darkMode),this.primaryTextColor=qt(this.primaryColor),this.secondaryTextColor=qt(this.secondaryColor),this.tertiaryTextColor=qt(this.primaryColor),this.lineColor=qt(this.background),this.textColor=qt(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,r,a,i,n,s,o,l,u,h,d,f,p,y,v,m,x,b,w,C,T;this.actorBorder=ne(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Tt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Tt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Tt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Tt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Tt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Tt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Tt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Tt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Tt(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||ne(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||ne(this.tertiaryColor,40);for(let k=0;k<this.THEME_COLOR_LIMIT;k++)this["cScale"+k]=ne(this["cScale"+k],10),this["cScalePeer"+k]=this["cScalePeer"+k]||ne(this["cScale"+k],25);for(let k=0;k<this.THEME_COLOR_LIMIT;k++)this["cScaleInv"+k]=this["cScaleInv"+k]||Tt(this["cScale"+k],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let k=0;k<this.THEME_COLOR_LIMIT;k++)this["cScaleLabel"+k]=this["cScaleLabel"+k]||this.scaleLabelColor;for(let k=0;k<5;k++)this["surface"+k]=this["surface"+k]||Tt(this.mainBkg,{h:30,s:-30,l:-(5+k*5)}),this["surfacePeer"+k]=this["surfacePeer"+k]||Tt(this.mainBkg,{h:30,s:-30,l:-(8+k*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||Xt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||Xt(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Tt(this.primaryColor,{h:64}),this.fillType3=Tt(this.secondaryColor,{h:64}),this.fillType4=Tt(this.primaryColor,{h:-64}),this.fillType5=Tt(this.secondaryColor,{h:-64}),this.fillType6=Tt(this.primaryColor,{h:128}),this.fillType7=Tt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||Tt(this.primaryColor,{l:-30}),this.pie5=this.pie5||Tt(this.secondaryColor,{l:-30}),this.pie6=this.pie6||Tt(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||Tt(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||Tt(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||Tt(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||Tt(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||Tt(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||Tt(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Tt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Tt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Tt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Tt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Tt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Tt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||on(this.quadrant1Fill)?Xt(this.quadrant1Fill):ne(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:((t=this.radar)==null?void 0:t.axisColor)||this.lineColor,axisStrokeWidth:((r=this.radar)==null?void 0:r.axisStrokeWidth)||2,axisLabelFontSize:((a=this.radar)==null?void 0:a.axisLabelFontSize)||12,curveOpacity:((i=this.radar)==null?void 0:i.curveOpacity)||.5,curveStrokeWidth:((n=this.radar)==null?void 0:n.curveStrokeWidth)||2,graticuleColor:((s=this.radar)==null?void 0:s.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((o=this.radar)==null?void 0:o.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((u=this.radar)==null?void 0:u.legendBoxSize)||12,legendFontSize:((h=this.radar)==null?void 0:h.legendFontSize)||12},this.xyChart={backgroundColor:((d=this.xyChart)==null?void 0:d.backgroundColor)||this.background,titleColor:((f=this.xyChart)==null?void 0:f.titleColor)||this.primaryTextColor,xAxisTitleColor:((p=this.xyChart)==null?void 0:p.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((y=this.xyChart)==null?void 0:y.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((v=this.xyChart)==null?void 0:v.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((m=this.xyChart)==null?void 0:m.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((x=this.xyChart)==null?void 0:x.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((b=this.xyChart)==null?void 0:b.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((w=this.xyChart)==null?void 0:w.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((C=this.xyChart)==null?void 0:C.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((T=this.xyChart)==null?void 0:T.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Tt(this.primaryColor,{h:-30}),this.git4=this.git4||Tt(this.primaryColor,{h:-60}),this.git5=this.git5||Tt(this.primaryColor,{h:-90}),this.git6=this.git6||Tt(this.primaryColor,{h:60}),this.git7=this.git7||Tt(this.primaryColor,{h:120}),this.darkMode?(this.git0=Xt(this.git0,25),this.git1=Xt(this.git1,25),this.git2=Xt(this.git2,25),this.git3=Xt(this.git3,25),this.git4=Xt(this.git4,25),this.git5=Xt(this.git5,25),this.git6=Xt(this.git6,25),this.git7=Xt(this.git7,25)):(this.git0=ne(this.git0,25),this.git1=ne(this.git1,25),this.git2=ne(this.git2,25),this.git3=ne(this.git3,25),this.git4=ne(this.git4,25),this.git5=ne(this.git5,25),this.git6=ne(this.git6,25),this.git7=ne(this.git7,25)),this.gitInv0=this.gitInv0||qt(this.git0),this.gitInv1=this.gitInv1||qt(this.git1),this.gitInv2=this.gitInv2||qt(this.git2),this.gitInv3=this.gitInv3||qt(this.git3),this.gitInv4=this.gitInv4||qt(this.git4),this.gitInv5=this.gitInv5||qt(this.git5),this.gitInv6=this.gitInv6||qt(this.git6),this.gitInv7=this.gitInv7||qt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||qt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||qt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ah,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Lh}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(a=>{this[a]=t[a]}),this.updateColors(),r.forEach(a=>{this[a]=t[a]})}},g(Ms,"Theme"),Ms),t6=g(e=>{const t=new JE;return t.calculate(e),t},"getThemeVariables"),Fs,e6=(Fs=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=Xt(this.contrast,55),this.background="#ffffff",this.tertiaryColor=Tt(this.primaryColor,{h:-160}),this.primaryBorderColor=jr(this.primaryColor,this.darkMode),this.secondaryBorderColor=jr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=jr(this.tertiaryColor,this.darkMode),this.primaryTextColor=qt(this.primaryColor),this.secondaryTextColor=qt(this.secondaryColor),this.tertiaryTextColor=qt(this.tertiaryColor),this.lineColor=qt(this.background),this.textColor=qt(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||Xt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,r,a,i,n,s,o,l,u,h,d,f,p,y,v,m,x,b,w,C,T;this.secondBkg=Xt(this.contrast,55),this.border2=this.contrast,this.actorBorder=Xt(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let k=0;k<this.THEME_COLOR_LIMIT;k++)this["cScaleInv"+k]=this["cScaleInv"+k]||qt(this["cScale"+k]);for(let k=0;k<this.THEME_COLOR_LIMIT;k++)this.darkMode?this["cScalePeer"+k]=this["cScalePeer"+k]||Xt(this["cScale"+k],10):this["cScalePeer"+k]=this["cScalePeer"+k]||ne(this["cScale"+k],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let k=0;k<this.THEME_COLOR_LIMIT;k++)this["cScaleLabel"+k]=this["cScaleLabel"+k]||this.scaleLabelColor;for(let k=0;k<5;k++)this["surface"+k]=this["surface"+k]||Tt(this.mainBkg,{l:-(5+k*5)}),this["surfacePeer"+k]=this["surfacePeer"+k]||Tt(this.mainBkg,{l:-(8+k*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=Xt(this.contrast,30),this.sectionBkgColor2=Xt(this.contrast,30),this.taskBorderColor=ne(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=Xt(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=ne(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Tt(this.primaryColor,{h:64}),this.fillType3=Tt(this.secondaryColor,{h:64}),this.fillType4=Tt(this.primaryColor,{h:-64}),this.fillType5=Tt(this.secondaryColor,{h:-64}),this.fillType6=Tt(this.primaryColor,{h:128}),this.fillType7=Tt(this.secondaryColor,{h:128});for(let k=0;k<this.THEME_COLOR_LIMIT;k++)this["pie"+k]=this["cScale"+k];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Tt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Tt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Tt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Tt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Tt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Tt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||on(this.quadrant1Fill)?Xt(this.quadrant1Fill):ne(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((a=this.xyChart)==null?void 0:a.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((s=this.xyChart)==null?void 0:s.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((u=this.xyChart)==null?void 0:u.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((h=this.xyChart)==null?void 0:h.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((d=this.xyChart)==null?void 0:d.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:((f=this.radar)==null?void 0:f.axisColor)||this.lineColor,axisStrokeWidth:((p=this.radar)==null?void 0:p.axisStrokeWidth)||2,axisLabelFontSize:((y=this.radar)==null?void 0:y.axisLabelFontSize)||12,curveOpacity:((v=this.radar)==null?void 0:v.curveOpacity)||.5,curveStrokeWidth:((m=this.radar)==null?void 0:m.curveStrokeWidth)||2,graticuleColor:((x=this.radar)==null?void 0:x.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((b=this.radar)==null?void 0:b.graticuleStrokeWidth)||1,graticuleOpacity:((w=this.radar)==null?void 0:w.graticuleOpacity)||.3,legendBoxSize:((C=this.radar)==null?void 0:C.legendBoxSize)||12,legendFontSize:((T=this.radar)==null?void 0:T.legendFontSize)||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=ne(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||Tt(this.primaryColor,{h:-30}),this.git4=this.pie5||Tt(this.primaryColor,{h:-60}),this.git5=this.pie6||Tt(this.primaryColor,{h:-90}),this.git6=this.pie7||Tt(this.primaryColor,{h:60}),this.git7=this.pie8||Tt(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||qt(this.git0),this.gitInv1=this.gitInv1||qt(this.git1),this.gitInv2=this.gitInv2||qt(this.git2),this.gitInv3=this.gitInv3||qt(this.git3),this.gitInv4=this.gitInv4||qt(this.git4),this.gitInv5=this.gitInv5||qt(this.git5),this.gitInv6=this.gitInv6||qt(this.git6),this.gitInv7=this.gitInv7||qt(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ah,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Lh}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(a=>{this[a]=t[a]}),this.updateColors(),r.forEach(a=>{this[a]=t[a]})}},g(Fs,"Theme"),Fs),r6=g(e=>{const t=new e6;return t.calculate(e),t},"getThemeVariables"),_i={base:{getThemeVariables:KE},dark:{getThemeVariables:QE},default:{getThemeVariables:Dh},forest:{getThemeVariables:t6},neutral:{getThemeVariables:r6}},yi={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},vx={...yi,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF"},themeCSS:void 0,themeVariables:_i.default.getThemeVariables(),sequence:{...yi.sequence,messageFont:g(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:g(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:g(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...yi.gantt,tickInterval:void 0,useWidth:void 0},c4:{...yi.c4,useWidth:void 0,personFont:g(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),external_personFont:g(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:g(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:g(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:g(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:g(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:g(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:g(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:g(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:g(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:g(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:g(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:g(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:g(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:g(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:g(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:g(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:g(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:g(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:g(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:g(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:g(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...yi.pie,useWidth:984},xyChart:{...yi.xyChart,useWidth:void 0},requirement:{...yi.requirement,useWidth:void 0},packet:{...yi.packet},radar:{...yi.radar}},mx=g((e,t="")=>Object.keys(e).reduce((r,a)=>Array.isArray(e[a])?r:typeof e[a]=="object"&&e[a]!==null?[...r,t+a,...mx(e[a],"")]:[...r,t+a],[]),"keyify"),a6=new Set(mx(vx,"")),Ee=vx,Pu=g(e=>{if(G.debug("sanitizeDirective called with",e),!(typeof e!="object"||e==null)){if(Array.isArray(e)){e.forEach(t=>Pu(t));return}for(const t of Object.keys(e)){if(G.debug("Checking key",t),t.startsWith("__")||t.includes("proto")||t.includes("constr")||!a6.has(t)||e[t]==null){G.debug("sanitize deleting key: ",t),delete e[t];continue}if(typeof e[t]=="object"){G.debug("sanitizing object",t),Pu(e[t]);continue}const r=["themeCSS","fontFamily","altFontFamily"];for(const a of r)t.includes(a)&&(G.debug("sanitizing css option",t),e[t]=i6(e[t]))}if(e.themeVariables)for(const t of Object.keys(e.themeVariables)){const r=e.themeVariables[t];r!=null&&r.match&&!r.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[t]="")}G.debug("After sanitization",e)}},"sanitizeDirective"),i6=g(e=>{let t=0,r=0;for(const a of e){if(t<r)return"{ /* ERROR: Unbalanced CSS */ }";a==="{"?t++:a==="}"&&r++}return t!==r?"{ /* ERROR: Unbalanced CSS */ }":e},"sanitizeCss"),_o=Object.freeze(Ee),ia=fr({},_o),xx,Ao=[],Ll=fr({},_o),Bh=g((e,t)=>{let r=fr({},e),a={};for(const i of t)kx(i),a=fr(a,i);if(r=fr(r,a),a.theme&&a.theme in _i){const i=fr({},xx),n=fr(i.themeVariables||{},a.themeVariables);r.theme&&r.theme in _i&&(r.themeVariables=_i[r.theme].getThemeVariables(n))}return Ll=r,Tx(Ll),Ll},"updateCurrentConfig"),n6=g(e=>(ia=fr({},_o),ia=fr(ia,e),e.theme&&_i[e.theme]&&(ia.themeVariables=_i[e.theme].getThemeVariables(e.themeVariables)),Bh(ia,Ao),ia),"setSiteConfig"),s6=g(e=>{xx=fr({},e)},"saveConfigFromInitialize"),o6=g(e=>(ia=fr(ia,e),Bh(ia,Ao),ia),"updateSiteConfig"),bx=g(()=>fr({},ia),"getSiteConfig"),wx=g(e=>(Tx(e),fr(Ll,e),$e()),"setConfig"),$e=g(()=>fr({},Ll),"getConfig"),kx=g(e=>{e&&(["secure",...ia.secure??[]].forEach(t=>{Object.hasOwn(e,t)&&(G.debug(`Denied attempt to modify a secure key ${t}`,e[t]),delete e[t])}),Object.keys(e).forEach(t=>{t.startsWith("__")&&delete e[t]}),Object.keys(e).forEach(t=>{typeof e[t]=="string"&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],typeof e[t]=="object"&&kx(e[t])}))},"sanitize"),l6=g(e=>{var t;Pu(e),e.fontFamily&&!((t=e.themeVariables)!=null&&t.fontFamily)&&(e.themeVariables={...e.themeVariables,fontFamily:e.fontFamily}),Ao.push(e),Bh(ia,Ao)},"addDirective"),Nu=g((e=ia)=>{Ao=[],Bh(e,Ao)},"reset"),c6={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},ny={},u6=g(e=>{ny[e]||(G.warn(c6[e]),ny[e]=!0)},"issueWarning"),Tx=g(e=>{e&&(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&u6("LAZY_LOAD_DEPRECATED")},"checkConfig"),Go=/<br\s*\/?>/gi,h6=g(e=>e?Ex(e).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),d6=(()=>{let e=!1;return()=>{e||(Cx(),e=!0)}})();function Cx(){const e="data-temp-href-target";Co.addHook("beforeSanitizeAttributes",t=>{t instanceof Element&&t.tagName==="A"&&t.hasAttribute("target")&&t.setAttribute(e,t.getAttribute("target")??"")}),Co.addHook("afterSanitizeAttributes",t=>{t instanceof Element&&t.tagName==="A"&&t.hasAttribute(e)&&(t.setAttribute("target",t.getAttribute(e)??""),t.removeAttribute(e),t.getAttribute("target")==="_blank"&&t.setAttribute("rel","noopener"))})}g(Cx,"setupDompurifyHooks");var Sx=g(e=>(d6(),Co.sanitize(e)),"removeScript"),sy=g((e,t)=>{var r;if(((r=t.flowchart)==null?void 0:r.htmlLabels)!==!1){const a=t.securityLevel;a==="antiscript"||a==="strict"?e=Sx(e):a!=="loose"&&(e=Ex(e),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/=/g,"&equals;"),e=y6(e))}return e},"sanitizeMore"),qe=g((e,t)=>e&&(t.dompurifyConfig?e=Co.sanitize(sy(e,t),t.dompurifyConfig).toString():e=Co.sanitize(sy(e,t),{FORBID_TAGS:["style"]}).toString(),e),"sanitizeText"),f6=g((e,t)=>typeof e=="string"?qe(e,t):e.flat().map(r=>qe(r,t)),"sanitizeTextOrArray"),p6=g(e=>Go.test(e),"hasBreaks"),g6=g(e=>e.split(Go),"splitBreaks"),y6=g(e=>e.replace(/#br#/g,"<br/>"),"placeholderToBreak"),Ex=g(e=>e.replace(Go,"#br#"),"breakToPlaceholder"),v6=g(e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=t.replaceAll(/\(/g,"\\("),t=t.replaceAll(/\)/g,"\\)")),t},"getUrl"),Oe=g(e=>!(e===!1||["false","null","0"].includes(String(e).trim().toLowerCase())),"evaluate"),m6=g(function(...e){const t=e.filter(r=>!isNaN(r));return Math.max(...t)},"getMax"),x6=g(function(...e){const t=e.filter(r=>!isNaN(r));return Math.min(...t)},"getMin"),Vi=g(function(e){const t=e.split(/(,)/),r=[];for(let a=0;a<t.length;a++){let i=t[a];if(i===","&&a>0&&a+1<t.length){const n=t[a-1],s=t[a+1];b6(n,s)&&(i=n+","+s,a++,r.pop())}r.push(w6(i))}return r.join("")},"parseGenericTypes"),gp=g((e,t)=>Math.max(0,e.split(t).length-1),"countOccurrence"),b6=g((e,t)=>{const r=gp(e,"~"),a=gp(t,"~");return r===1&&a===1},"shouldCombineSets"),w6=g(e=>{const t=gp(e,"~");let r=!1;if(t<=1)return e;t%2!==0&&e.startsWith("~")&&(e=e.substring(1),r=!0);const a=[...e];let i=a.indexOf("~"),n=a.lastIndexOf("~");for(;i!==-1&&n!==-1&&i!==n;)a[i]="<",a[n]=">",i=a.indexOf("~"),n=a.lastIndexOf("~");return r&&a.unshift("~"),a.join("")},"processSet"),oy=g(()=>window.MathMLElement!==void 0,"isMathMLSupported"),yp=/\$\$(.*)\$\$/g,qr=g(e=>{var t;return(((t=e.match(yp))==null?void 0:t.length)??0)>0},"hasKatex"),lc=g(async(e,t)=>{e=await cc(e,t);const r=document.createElement("div");r.innerHTML=e,r.id="katex-temp",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0";const a=document.querySelector("body");a==null||a.insertAdjacentElement("beforeend",r);const i={width:r.clientWidth,height:r.clientHeight};return r.remove(),i},"calculateMathMLDimensions"),cc=g(async(e,t)=>{if(!qr(e))return e;if(!(oy()||t.legacyMathML||t.forceLegacyMathML))return e.replace(yp,"MathML is unsupported in this environment.");const{default:r}=await _e(async()=>{const{default:i}=await import("./math-DOuibLoa.js");return{default:i}},[]),a=t.forceLegacyMathML||!oy()&&t.legacyMathML?"htmlAndMathml":"mathml";return e.split(Go).map(i=>qr(i)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${i}</div>`:`<div>${i}</div>`).join("").replace(yp,(i,n)=>r.renderToString(n,{throwOnError:!0,displayMode:!0,output:a}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))},"renderKatex"),Mt={getRows:h6,sanitizeText:qe,sanitizeTextOrArray:f6,hasBreaks:p6,splitBreaks:g6,lineBreakRegex:Go,removeScript:Sx,getUrl:v6,evaluate:Oe,getMax:m6,getMin:x6},k6=g(function(e,t){for(let r of t)e.attr(r[0],r[1])},"d3Attrs"),T6=g(function(e,t,r){let a=new Map;return r?(a.set("width","100%"),a.set("style",`max-width: ${t}px;`)):(a.set("height",e),a.set("width",t)),a},"calculateSvgSizeAttrs"),da=g(function(e,t,r,a){const i=T6(t,r,a);k6(e,i)},"configureSvgSize"),Ho=g(function(e,t,r,a){const i=t.node().getBBox(),n=i.width,s=i.height;G.info(`SVG bounds: ${n}x${s}`,i);let o=0,l=0;G.info(`Graph bounds: ${o}x${l}`,e),o=n+r*2,l=s+r*2,G.info(`Calculated bounds: ${o}x${l}`),da(t,l,o,a);const u=`${i.x-r} ${i.y-r} ${i.width+2*r} ${i.height+2*r}`;t.attr("viewBox",u)},"setupGraphViewbox"),iu={},C6=g((e,t,r)=>{let a="";return e in iu&&iu[e]?a=iu[e](r):G.warn(`No theme found for ${e}`),` & {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
    fill: ${r.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${r.errorBkgColor};
  }
  & .error-text {
    fill: ${r.errorTextColor};
    stroke: ${r.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${r.lineColor};
    stroke: ${r.lineColor};
  }
  & .marker.cross {
    stroke: ${r.lineColor};
  }

  & svg {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
  }
   & p {
    margin: 0
   }

  ${a}

  ${t}
`},"getStyles"),S6=g((e,t)=>{t!==void 0&&(iu[e]=t)},"addStylesForDiagram"),E6=C6,jg={};_h(jg,{clear:()=>xr,getAccDescription:()=>_r,getAccTitle:()=>Sr,getDiagramTitle:()=>br,setAccDescription:()=>Er,setAccTitle:()=>vr,setDiagramTitle:()=>Mr});var Qg="",Zg="",Jg="",t0=g(e=>qe(e,$e()),"sanitizeText"),xr=g(()=>{Qg="",Jg="",Zg=""},"clear"),vr=g(e=>{Qg=t0(e).replace(/^\s+/g,"")},"setAccTitle"),Sr=g(()=>Qg,"getAccTitle"),Er=g(e=>{Jg=t0(e).replace(/\n\s+/g,`
`)},"setAccDescription"),_r=g(()=>Jg,"getAccDescription"),Mr=g(e=>{Zg=t0(e)},"setDiagramTitle"),br=g(()=>Zg,"getDiagramTitle"),ly=G,_6=Xg,dt=$e,vp=wx,_x=_o,e0=g(e=>qe(e,dt()),"sanitizeText"),Ax=Ho,A6=g(()=>jg,"getCommonDb"),Mu={},Fu=g((e,t,r)=>{var a;Mu[e]&&ly.warn(`Diagram with id ${e} already registered. Overwriting.`),Mu[e]=t,r&&yx(e,r),S6(e,t.styles),(a=t.injectUtils)==null||a.call(t,ly,_6,dt,e0,Ax,A6(),()=>{})},"registerDiagram"),mp=g(e=>{if(e in Mu)return Mu[e];throw new L6(e)},"getDiagram"),Os,L6=(Os=class extends Error{constructor(t){super(`Diagram ${t} not found.`)}},g(Os,"DiagramNotFoundError"),Os);function r0(e){return typeof e>"u"||e===null}g(r0,"isNothing");function Lx(e){return typeof e=="object"&&e!==null}g(Lx,"isObject");function Dx(e){return Array.isArray(e)?e:r0(e)?[]:[e]}g(Dx,"toArray");function Bx(e,t){var r,a,i,n;if(t)for(n=Object.keys(t),r=0,a=n.length;r<a;r+=1)i=n[r],e[i]=t[i];return e}g(Bx,"extend");function Rx(e,t){var r="",a;for(a=0;a<t;a+=1)r+=e;return r}g(Rx,"repeat");function Ix(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}g(Ix,"isNegativeZero");var D6=r0,B6=Lx,R6=Dx,I6=Rx,P6=Ix,N6=Bx,pr={isNothing:D6,isObject:B6,toArray:R6,repeat:I6,isNegativeZero:P6,extend:N6};function a0(e,t){var r="",a=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),a+" "+r):a}g(a0,"formatError");function Lo(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=a0(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}g(Lo,"YAMLException$1");Lo.prototype=Object.create(Error.prototype);Lo.prototype.constructor=Lo;Lo.prototype.toString=g(function(t){return this.name+": "+a0(this,t)},"toString");var oa=Lo;function nu(e,t,r,a,i){var n="",s="",o=Math.floor(i/2)-1;return a-t>o&&(n=" ... ",t=a-o+n.length),r-a>o&&(s=" ...",r=a+o-s.length),{str:n+e.slice(t,r).replace(/\t/g,"→")+s,pos:a-t+n.length}}g(nu,"getLine");function su(e,t){return pr.repeat(" ",t-e.length)+e}g(su,"padStart");function Px(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,a=[0],i=[],n,s=-1;n=r.exec(e.buffer);)i.push(n.index),a.push(n.index+n[0].length),e.position<=n.index&&s<0&&(s=a.length-2);s<0&&(s=a.length-1);var o="",l,u,h=Math.min(e.line+t.linesAfter,i.length).toString().length,d=t.maxLength-(t.indent+h+3);for(l=1;l<=t.linesBefore&&!(s-l<0);l++)u=nu(e.buffer,a[s-l],i[s-l],e.position-(a[s]-a[s-l]),d),o=pr.repeat(" ",t.indent)+su((e.line-l+1).toString(),h)+" | "+u.str+`
`+o;for(u=nu(e.buffer,a[s],i[s],e.position,d),o+=pr.repeat(" ",t.indent)+su((e.line+1).toString(),h)+" | "+u.str+`
`,o+=pr.repeat("-",t.indent+h+3+u.pos)+`^
`,l=1;l<=t.linesAfter&&!(s+l>=i.length);l++)u=nu(e.buffer,a[s+l],i[s+l],e.position-(a[s]-a[s+l]),d),o+=pr.repeat(" ",t.indent)+su((e.line+l+1).toString(),h)+" | "+u.str+`
`;return o.replace(/\n$/,"")}g(Px,"makeSnippet");var M6=Px,F6=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],O6=["scalar","sequence","mapping"];function Nx(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(a){t[String(a)]=r})}),t}g(Nx,"compileStyleAliases");function Mx(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(F6.indexOf(r)===-1)throw new oa('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=Nx(t.styleAliases||null),O6.indexOf(this.kind)===-1)throw new oa('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}g(Mx,"Type$1");var zr=Mx;function xp(e,t){var r=[];return e[t].forEach(function(a){var i=r.length;r.forEach(function(n,s){n.tag===a.tag&&n.kind===a.kind&&n.multi===a.multi&&(i=s)}),r[i]=a}),r}g(xp,"compileList");function Fx(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function a(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(g(a,"collectType"),t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(a);return e}g(Fx,"compileMap");function Ou(e){return this.extend(e)}g(Ou,"Schema$1");Ou.prototype.extend=g(function(t){var r=[],a=[];if(t instanceof zr)a.push(t);else if(Array.isArray(t))a=a.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(a=a.concat(t.explicit));else throw new oa("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(n){if(!(n instanceof zr))throw new oa("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(n.loadKind&&n.loadKind!=="scalar")throw new oa("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(n.multi)throw new oa("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),a.forEach(function(n){if(!(n instanceof zr))throw new oa("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Ou.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(a),i.compiledImplicit=xp(i,"implicit"),i.compiledExplicit=xp(i,"explicit"),i.compiledTypeMap=Fx(i.compiledImplicit,i.compiledExplicit),i},"extend");var $6=Ou,V6=new zr("tag:yaml.org,2002:str",{kind:"scalar",construct:g(function(e){return e!==null?e:""},"construct")}),z6=new zr("tag:yaml.org,2002:seq",{kind:"sequence",construct:g(function(e){return e!==null?e:[]},"construct")}),q6=new zr("tag:yaml.org,2002:map",{kind:"mapping",construct:g(function(e){return e!==null?e:{}},"construct")}),W6=new $6({explicit:[V6,z6,q6]});function Ox(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}g(Ox,"resolveYamlNull");function $x(){return null}g($x,"constructYamlNull");function Vx(e){return e===null}g(Vx,"isNull");var G6=new zr("tag:yaml.org,2002:null",{kind:"scalar",resolve:Ox,construct:$x,predicate:Vx,represent:{canonical:g(function(){return"~"},"canonical"),lowercase:g(function(){return"null"},"lowercase"),uppercase:g(function(){return"NULL"},"uppercase"),camelcase:g(function(){return"Null"},"camelcase"),empty:g(function(){return""},"empty")},defaultStyle:"lowercase"});function zx(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}g(zx,"resolveYamlBoolean");function qx(e){return e==="true"||e==="True"||e==="TRUE"}g(qx,"constructYamlBoolean");function Wx(e){return Object.prototype.toString.call(e)==="[object Boolean]"}g(Wx,"isBoolean");var H6=new zr("tag:yaml.org,2002:bool",{kind:"scalar",resolve:zx,construct:qx,predicate:Wx,represent:{lowercase:g(function(e){return e?"true":"false"},"lowercase"),uppercase:g(function(e){return e?"TRUE":"FALSE"},"uppercase"),camelcase:g(function(e){return e?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function Gx(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}g(Gx,"isHexCode");function Hx(e){return 48<=e&&e<=55}g(Hx,"isOctCode");function Yx(e){return 48<=e&&e<=57}g(Yx,"isDecCode");function Ux(e){if(e===null)return!1;var t=e.length,r=0,a=!1,i;if(!t)return!1;if(i=e[r],(i==="-"||i==="+")&&(i=e[++r]),i==="0"){if(r+1===t)return!0;if(i=e[++r],i==="b"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;a=!0}return a&&i!=="_"}if(i==="x"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!Gx(e.charCodeAt(r)))return!1;a=!0}return a&&i!=="_"}if(i==="o"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!Hx(e.charCodeAt(r)))return!1;a=!0}return a&&i!=="_"}}if(i==="_")return!1;for(;r<t;r++)if(i=e[r],i!=="_"){if(!Yx(e.charCodeAt(r)))return!1;a=!0}return!(!a||i==="_")}g(Ux,"resolveYamlInteger");function Xx(e){var t=e,r=1,a;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),a=t[0],(a==="-"||a==="+")&&(a==="-"&&(r=-1),t=t.slice(1),a=t[0]),t==="0")return 0;if(a==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}g(Xx,"constructYamlInteger");function Kx(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!pr.isNegativeZero(e)}g(Kx,"isInteger");var Y6=new zr("tag:yaml.org,2002:int",{kind:"scalar",resolve:Ux,construct:Xx,predicate:Kx,represent:{binary:g(function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},"binary"),octal:g(function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},"octal"),decimal:g(function(e){return e.toString(10)},"decimal"),hexadecimal:g(function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),U6=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function jx(e){return!(e===null||!U6.test(e)||e[e.length-1]==="_")}g(jx,"resolveYamlFloat");function Qx(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}g(Qx,"constructYamlFloat");var X6=/^[-+]?[0-9]+e/;function Zx(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(pr.isNegativeZero(e))return"-0.0";return r=e.toString(10),X6.test(r)?r.replace("e",".e"):r}g(Zx,"representYamlFloat");function Jx(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||pr.isNegativeZero(e))}g(Jx,"isFloat");var K6=new zr("tag:yaml.org,2002:float",{kind:"scalar",resolve:jx,construct:Qx,predicate:Jx,represent:Zx,defaultStyle:"lowercase"}),tb=W6.extend({implicit:[G6,H6,Y6,K6]}),j6=tb,eb=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),rb=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function ab(e){return e===null?!1:eb.exec(e)!==null||rb.exec(e)!==null}g(ab,"resolveYamlTimestamp");function ib(e){var t,r,a,i,n,s,o,l=0,u=null,h,d,f;if(t=eb.exec(e),t===null&&(t=rb.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],a=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,a,i));if(n=+t[4],s=+t[5],o=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(h=+t[10],d=+(t[11]||0),u=(h*60+d)*6e4,t[9]==="-"&&(u=-u)),f=new Date(Date.UTC(r,a,i,n,s,o,l)),u&&f.setTime(f.getTime()-u),f}g(ib,"constructYamlTimestamp");function nb(e){return e.toISOString()}g(nb,"representYamlTimestamp");var Q6=new zr("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:ab,construct:ib,instanceOf:Date,represent:nb});function sb(e){return e==="<<"||e===null}g(sb,"resolveYamlMerge");var Z6=new zr("tag:yaml.org,2002:merge",{kind:"scalar",resolve:sb}),i0=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function ob(e){if(e===null)return!1;var t,r,a=0,i=e.length,n=i0;for(r=0;r<i;r++)if(t=n.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;a+=6}return a%8===0}g(ob,"resolveYamlBinary");function lb(e){var t,r,a=e.replace(/[\r\n=]/g,""),i=a.length,n=i0,s=0,o=[];for(t=0;t<i;t++)t%4===0&&t&&(o.push(s>>16&255),o.push(s>>8&255),o.push(s&255)),s=s<<6|n.indexOf(a.charAt(t));return r=i%4*6,r===0?(o.push(s>>16&255),o.push(s>>8&255),o.push(s&255)):r===18?(o.push(s>>10&255),o.push(s>>2&255)):r===12&&o.push(s>>4&255),new Uint8Array(o)}g(lb,"constructYamlBinary");function cb(e){var t="",r=0,a,i,n=e.length,s=i0;for(a=0;a<n;a++)a%3===0&&a&&(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]),r=(r<<8)+e[a];return i=n%3,i===0?(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]):i===2?(t+=s[r>>10&63],t+=s[r>>4&63],t+=s[r<<2&63],t+=s[64]):i===1&&(t+=s[r>>2&63],t+=s[r<<4&63],t+=s[64],t+=s[64]),t}g(cb,"representYamlBinary");function ub(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}g(ub,"isBinary");var J6=new zr("tag:yaml.org,2002:binary",{kind:"scalar",resolve:ob,construct:lb,predicate:ub,represent:cb}),t_=Object.prototype.hasOwnProperty,e_=Object.prototype.toString;function hb(e){if(e===null)return!0;var t=[],r,a,i,n,s,o=e;for(r=0,a=o.length;r<a;r+=1){if(i=o[r],s=!1,e_.call(i)!=="[object Object]")return!1;for(n in i)if(t_.call(i,n))if(!s)s=!0;else return!1;if(!s)return!1;if(t.indexOf(n)===-1)t.push(n);else return!1}return!0}g(hb,"resolveYamlOmap");function db(e){return e!==null?e:[]}g(db,"constructYamlOmap");var r_=new zr("tag:yaml.org,2002:omap",{kind:"sequence",resolve:hb,construct:db}),a_=Object.prototype.toString;function fb(e){if(e===null)return!0;var t,r,a,i,n,s=e;for(n=new Array(s.length),t=0,r=s.length;t<r;t+=1){if(a=s[t],a_.call(a)!=="[object Object]"||(i=Object.keys(a),i.length!==1))return!1;n[t]=[i[0],a[i[0]]]}return!0}g(fb,"resolveYamlPairs");function pb(e){if(e===null)return[];var t,r,a,i,n,s=e;for(n=new Array(s.length),t=0,r=s.length;t<r;t+=1)a=s[t],i=Object.keys(a),n[t]=[i[0],a[i[0]]];return n}g(pb,"constructYamlPairs");var i_=new zr("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:fb,construct:pb}),n_=Object.prototype.hasOwnProperty;function gb(e){if(e===null)return!0;var t,r=e;for(t in r)if(n_.call(r,t)&&r[t]!==null)return!1;return!0}g(gb,"resolveYamlSet");function yb(e){return e!==null?e:{}}g(yb,"constructYamlSet");var s_=new zr("tag:yaml.org,2002:set",{kind:"mapping",resolve:gb,construct:yb}),vb=j6.extend({implicit:[Q6,Z6],explicit:[J6,r_,i_,s_]}),Qi=Object.prototype.hasOwnProperty,$u=1,mb=2,xb=3,Vu=4,wd=1,o_=2,cy=3,l_=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,c_=/[\x85\u2028\u2029]/,u_=/[,\[\]\{\}]/,bb=/^(?:!|!!|![a-z\-]+!)$/i,wb=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function bp(e){return Object.prototype.toString.call(e)}g(bp,"_class");function za(e){return e===10||e===13}g(za,"is_EOL");function Ui(e){return e===9||e===32}g(Ui,"is_WHITE_SPACE");function Qr(e){return e===9||e===32||e===10||e===13}g(Qr,"is_WS_OR_EOL");function Bn(e){return e===44||e===91||e===93||e===123||e===125}g(Bn,"is_FLOW_INDICATOR");function kb(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}g(kb,"fromHexCode");function Tb(e){return e===120?2:e===117?4:e===85?8:0}g(Tb,"escapedHexLen");function Cb(e){return 48<=e&&e<=57?e-48:-1}g(Cb,"fromDecimalCode");function wp(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}g(wp,"simpleEscapeSequence");function Sb(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}g(Sb,"charFromCodepoint");var Eb=new Array(256),_b=new Array(256);for(mn=0;mn<256;mn++)Eb[mn]=wp(mn)?1:0,_b[mn]=wp(mn);var mn;function Ab(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||vb,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}g(Ab,"State$1");function n0(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=M6(r),new oa(t,r)}g(n0,"generateError");function le(e,t){throw n0(e,t)}g(le,"throwError");function Ol(e,t){e.onWarning&&e.onWarning.call(null,n0(e,t))}g(Ol,"throwWarning");var uy={YAML:g(function(t,r,a){var i,n,s;t.version!==null&&le(t,"duplication of %YAML directive"),a.length!==1&&le(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(a[0]),i===null&&le(t,"ill-formed argument of the YAML directive"),n=parseInt(i[1],10),s=parseInt(i[2],10),n!==1&&le(t,"unacceptable YAML version of the document"),t.version=a[0],t.checkLineBreaks=s<2,s!==1&&s!==2&&Ol(t,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:g(function(t,r,a){var i,n;a.length!==2&&le(t,"TAG directive accepts exactly two arguments"),i=a[0],n=a[1],bb.test(i)||le(t,"ill-formed tag handle (first argument) of the TAG directive"),Qi.call(t.tagMap,i)&&le(t,'there is a previously declared suffix for "'+i+'" tag handle'),wb.test(n)||le(t,"ill-formed tag prefix (second argument) of the TAG directive");try{n=decodeURIComponent(n)}catch{le(t,"tag prefix is malformed: "+n)}t.tagMap[i]=n},"handleTagDirective")};function Ai(e,t,r,a){var i,n,s,o;if(t<r){if(o=e.input.slice(t,r),a)for(i=0,n=o.length;i<n;i+=1)s=o.charCodeAt(i),s===9||32<=s&&s<=1114111||le(e,"expected valid JSON character");else l_.test(o)&&le(e,"the stream contains non-printable characters");e.result+=o}}g(Ai,"captureSegment");function kp(e,t,r,a){var i,n,s,o;for(pr.isObject(r)||le(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,o=i.length;s<o;s+=1)n=i[s],Qi.call(t,n)||(t[n]=r[n],a[n]=!0)}g(kp,"mergeMappings");function Rn(e,t,r,a,i,n,s,o,l){var u,h;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,h=i.length;u<h;u+=1)Array.isArray(i[u])&&le(e,"nested arrays are not supported inside keys"),typeof i=="object"&&bp(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&bp(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),a==="tag:yaml.org,2002:merge")if(Array.isArray(n))for(u=0,h=n.length;u<h;u+=1)kp(e,t,n[u],r);else kp(e,t,n,r);else!e.json&&!Qi.call(r,i)&&Qi.call(t,i)&&(e.line=s||e.line,e.lineStart=o||e.lineStart,e.position=l||e.position,le(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:n}):t[i]=n,delete r[i];return t}g(Rn,"storeMappingPair");function Rh(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):le(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}g(Rh,"readLineBreak");function ir(e,t,r){for(var a=0,i=e.input.charCodeAt(e.position);i!==0;){for(;Ui(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(za(i))for(Rh(e),i=e.input.charCodeAt(e.position),a++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return r!==-1&&a!==0&&e.lineIndent<r&&Ol(e,"deficient indentation"),a}g(ir,"skipSeparationSpace");function uc(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||Qr(r)))}g(uc,"testDocumentSeparator");function Ih(e,t){t===1?e.result+=" ":t>1&&(e.result+=pr.repeat(`
`,t-1))}g(Ih,"writeFoldedLines");function Lb(e,t,r){var a,i,n,s,o,l,u,h,d=e.kind,f=e.result,p;if(p=e.input.charCodeAt(e.position),Qr(p)||Bn(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(i=e.input.charCodeAt(e.position+1),Qr(i)||r&&Bn(i)))return!1;for(e.kind="scalar",e.result="",n=s=e.position,o=!1;p!==0;){if(p===58){if(i=e.input.charCodeAt(e.position+1),Qr(i)||r&&Bn(i))break}else if(p===35){if(a=e.input.charCodeAt(e.position-1),Qr(a))break}else{if(e.position===e.lineStart&&uc(e)||r&&Bn(p))break;if(za(p))if(l=e.line,u=e.lineStart,h=e.lineIndent,ir(e,!1,-1),e.lineIndent>=t){o=!0,p=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=l,e.lineStart=u,e.lineIndent=h;break}}o&&(Ai(e,n,s,!1),Ih(e,e.line-l),n=s=e.position,o=!1),Ui(p)||(s=e.position+1),p=e.input.charCodeAt(++e.position)}return Ai(e,n,s,!1),e.result?!0:(e.kind=d,e.result=f,!1)}g(Lb,"readPlainScalar");function Db(e,t){var r,a,i;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,a=i=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(Ai(e,a,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)a=e.position,e.position++,i=e.position;else return!0;else za(r)?(Ai(e,a,i,!0),Ih(e,ir(e,!1,t)),a=i=e.position):e.position===e.lineStart&&uc(e)?le(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);le(e,"unexpected end of the stream within a single quoted scalar")}g(Db,"readSingleQuotedScalar");function Bb(e,t){var r,a,i,n,s,o;if(o=e.input.charCodeAt(e.position),o!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=a=e.position;(o=e.input.charCodeAt(e.position))!==0;){if(o===34)return Ai(e,r,e.position,!0),e.position++,!0;if(o===92){if(Ai(e,r,e.position,!0),o=e.input.charCodeAt(++e.position),za(o))ir(e,!1,t);else if(o<256&&Eb[o])e.result+=_b[o],e.position++;else if((s=Tb(o))>0){for(i=s,n=0;i>0;i--)o=e.input.charCodeAt(++e.position),(s=kb(o))>=0?n=(n<<4)+s:le(e,"expected hexadecimal character");e.result+=Sb(n),e.position++}else le(e,"unknown escape sequence");r=a=e.position}else za(o)?(Ai(e,r,a,!0),Ih(e,ir(e,!1,t)),r=a=e.position):e.position===e.lineStart&&uc(e)?le(e,"unexpected end of the document within a double quoted scalar"):(e.position++,a=e.position)}le(e,"unexpected end of the stream within a double quoted scalar")}g(Bb,"readDoubleQuotedScalar");function Rb(e,t){var r=!0,a,i,n,s=e.tag,o,l=e.anchor,u,h,d,f,p,y=Object.create(null),v,m,x,b;if(b=e.input.charCodeAt(e.position),b===91)h=93,p=!1,o=[];else if(b===123)h=125,p=!0,o={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),b=e.input.charCodeAt(++e.position);b!==0;){if(ir(e,!0,t),b=e.input.charCodeAt(e.position),b===h)return e.position++,e.tag=s,e.anchor=l,e.kind=p?"mapping":"sequence",e.result=o,!0;r?b===44&&le(e,"expected the node content, but found ','"):le(e,"missed comma between flow collection entries"),m=v=x=null,d=f=!1,b===63&&(u=e.input.charCodeAt(e.position+1),Qr(u)&&(d=f=!0,e.position++,ir(e,!0,t))),a=e.line,i=e.lineStart,n=e.position,Vn(e,t,$u,!1,!0),m=e.tag,v=e.result,ir(e,!0,t),b=e.input.charCodeAt(e.position),(f||e.line===a)&&b===58&&(d=!0,b=e.input.charCodeAt(++e.position),ir(e,!0,t),Vn(e,t,$u,!1,!0),x=e.result),p?Rn(e,o,y,m,v,x,a,i,n):d?o.push(Rn(e,null,y,m,v,x,a,i,n)):o.push(v),ir(e,!0,t),b=e.input.charCodeAt(e.position),b===44?(r=!0,b=e.input.charCodeAt(++e.position)):r=!1}le(e,"unexpected end of the stream within a flow collection")}g(Rb,"readFlowCollection");function Ib(e,t){var r,a,i=wd,n=!1,s=!1,o=t,l=0,u=!1,h,d;if(d=e.input.charCodeAt(e.position),d===124)a=!1;else if(d===62)a=!0;else return!1;for(e.kind="scalar",e.result="";d!==0;)if(d=e.input.charCodeAt(++e.position),d===43||d===45)wd===i?i=d===43?cy:o_:le(e,"repeat of a chomping mode identifier");else if((h=Cb(d))>=0)h===0?le(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?le(e,"repeat of an indentation width identifier"):(o=t+h-1,s=!0);else break;if(Ui(d)){do d=e.input.charCodeAt(++e.position);while(Ui(d));if(d===35)do d=e.input.charCodeAt(++e.position);while(!za(d)&&d!==0)}for(;d!==0;){for(Rh(e),e.lineIndent=0,d=e.input.charCodeAt(e.position);(!s||e.lineIndent<o)&&d===32;)e.lineIndent++,d=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>o&&(o=e.lineIndent),za(d)){l++;continue}if(e.lineIndent<o){i===cy?e.result+=pr.repeat(`
`,n?1+l:l):i===wd&&n&&(e.result+=`
`);break}for(a?Ui(d)?(u=!0,e.result+=pr.repeat(`
`,n?1+l:l)):u?(u=!1,e.result+=pr.repeat(`
`,l+1)):l===0?n&&(e.result+=" "):e.result+=pr.repeat(`
`,l):e.result+=pr.repeat(`
`,n?1+l:l),n=!0,s=!0,l=0,r=e.position;!za(d)&&d!==0;)d=e.input.charCodeAt(++e.position);Ai(e,r,e.position,!1)}return!0}g(Ib,"readBlockScalar");function Tp(e,t){var r,a=e.tag,i=e.anchor,n=[],s,o=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=n),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,le(e,"tab characters must not be used in indentation")),!(l!==45||(s=e.input.charCodeAt(e.position+1),!Qr(s))));){if(o=!0,e.position++,ir(e,!0,-1)&&e.lineIndent<=t){n.push(null),l=e.input.charCodeAt(e.position);continue}if(r=e.line,Vn(e,t,xb,!1,!0),n.push(e.result),ir(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&l!==0)le(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return o?(e.tag=a,e.anchor=i,e.kind="sequence",e.result=n,!0):!1}g(Tp,"readBlockSequence");function Pb(e,t,r){var a,i,n,s,o,l,u=e.tag,h=e.anchor,d={},f=Object.create(null),p=null,y=null,v=null,m=!1,x=!1,b;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=d),b=e.input.charCodeAt(e.position);b!==0;){if(!m&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,le(e,"tab characters must not be used in indentation")),a=e.input.charCodeAt(e.position+1),n=e.line,(b===63||b===58)&&Qr(a))b===63?(m&&(Rn(e,d,f,p,y,null,s,o,l),p=y=v=null),x=!0,m=!0,i=!0):m?(m=!1,i=!0):le(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,b=a;else{if(s=e.line,o=e.lineStart,l=e.position,!Vn(e,r,mb,!1,!0))break;if(e.line===n){for(b=e.input.charCodeAt(e.position);Ui(b);)b=e.input.charCodeAt(++e.position);if(b===58)b=e.input.charCodeAt(++e.position),Qr(b)||le(e,"a whitespace character is expected after the key-value separator within a block mapping"),m&&(Rn(e,d,f,p,y,null,s,o,l),p=y=v=null),x=!0,m=!1,i=!1,p=e.tag,y=e.result;else if(x)le(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=u,e.anchor=h,!0}else if(x)le(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=u,e.anchor=h,!0}if((e.line===n||e.lineIndent>t)&&(m&&(s=e.line,o=e.lineStart,l=e.position),Vn(e,t,Vu,!0,i)&&(m?y=e.result:v=e.result),m||(Rn(e,d,f,p,y,v,s,o,l),p=y=v=null),ir(e,!0,-1),b=e.input.charCodeAt(e.position)),(e.line===n||e.lineIndent>t)&&b!==0)le(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return m&&Rn(e,d,f,p,y,null,s,o,l),x&&(e.tag=u,e.anchor=h,e.kind="mapping",e.result=d),x}g(Pb,"readBlockMapping");function Nb(e){var t,r=!1,a=!1,i,n,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&le(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(r=!0,s=e.input.charCodeAt(++e.position)):s===33?(a=!0,i="!!",s=e.input.charCodeAt(++e.position)):i="!",t=e.position,r){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(n=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):le(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Qr(s);)s===33&&(a?le(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),bb.test(i)||le(e,"named tag handle cannot contain such characters"),a=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);n=e.input.slice(t,e.position),u_.test(n)&&le(e,"tag suffix cannot contain flow indicator characters")}n&&!wb.test(n)&&le(e,"tag name cannot contain such characters: "+n);try{n=decodeURIComponent(n)}catch{le(e,"tag name is malformed: "+n)}return r?e.tag=n:Qi.call(e.tagMap,i)?e.tag=e.tagMap[i]+n:i==="!"?e.tag="!"+n:i==="!!"?e.tag="tag:yaml.org,2002:"+n:le(e,'undeclared tag handle "'+i+'"'),!0}g(Nb,"readTagProperty");function Mb(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&le(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Qr(r)&&!Bn(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&le(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}g(Mb,"readAnchorProperty");function Fb(e){var t,r,a;if(a=e.input.charCodeAt(e.position),a!==42)return!1;for(a=e.input.charCodeAt(++e.position),t=e.position;a!==0&&!Qr(a)&&!Bn(a);)a=e.input.charCodeAt(++e.position);return e.position===t&&le(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),Qi.call(e.anchorMap,r)||le(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],ir(e,!0,-1),!0}g(Fb,"readAlias");function Vn(e,t,r,a,i){var n,s,o,l=1,u=!1,h=!1,d,f,p,y,v,m;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,n=s=o=Vu===r||xb===r,a&&ir(e,!0,-1)&&(u=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;Nb(e)||Mb(e);)ir(e,!0,-1)?(u=!0,o=n,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):o=!1;if(o&&(o=u||i),(l===1||Vu===r)&&($u===r||mb===r?v=t:v=t+1,m=e.position-e.lineStart,l===1?o&&(Tp(e,m)||Pb(e,m,v))||Rb(e,v)?h=!0:(s&&Ib(e,v)||Db(e,v)||Bb(e,v)?h=!0:Fb(e)?(h=!0,(e.tag!==null||e.anchor!==null)&&le(e,"alias node should not have any properties")):Lb(e,v,$u===r)&&(h=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(h=o&&Tp(e,m))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&le(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),d=0,f=e.implicitTypes.length;d<f;d+=1)if(y=e.implicitTypes[d],y.resolve(e.result)){e.result=y.construct(e.result),e.tag=y.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Qi.call(e.typeMap[e.kind||"fallback"],e.tag))y=e.typeMap[e.kind||"fallback"][e.tag];else for(y=null,p=e.typeMap.multi[e.kind||"fallback"],d=0,f=p.length;d<f;d+=1)if(e.tag.slice(0,p[d].tag.length)===p[d].tag){y=p[d];break}y||le(e,"unknown tag !<"+e.tag+">"),e.result!==null&&y.kind!==e.kind&&le(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+y.kind+'", not "'+e.kind+'"'),y.resolve(e.result,e.tag)?(e.result=y.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):le(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||h}g(Vn,"composeNode");function Ob(e){var t=e.position,r,a,i,n=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(ir(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(n=!0,s=e.input.charCodeAt(++e.position),r=e.position;s!==0&&!Qr(s);)s=e.input.charCodeAt(++e.position);for(a=e.input.slice(r,e.position),i=[],a.length<1&&le(e,"directive name must not be less than one character in length");s!==0;){for(;Ui(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!za(s));break}if(za(s))break;for(r=e.position;s!==0&&!Qr(s);)s=e.input.charCodeAt(++e.position);i.push(e.input.slice(r,e.position))}s!==0&&Rh(e),Qi.call(uy,a)?uy[a](e,a,i):Ol(e,'unknown document directive "'+a+'"')}if(ir(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,ir(e,!0,-1)):n&&le(e,"directives end mark is expected"),Vn(e,e.lineIndent-1,Vu,!1,!0),ir(e,!0,-1),e.checkLineBreaks&&c_.test(e.input.slice(t,e.position))&&Ol(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&uc(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,ir(e,!0,-1));return}if(e.position<e.length-1)le(e,"end of the stream or a document separator is expected");else return}g(Ob,"readDocument");function s0(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new Ab(e,t),a=e.indexOf("\0");for(a!==-1&&(r.position=a,le(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)Ob(r);return r.documents}g(s0,"loadDocuments");function h_(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var a=s0(e,r);if(typeof t!="function")return a;for(var i=0,n=a.length;i<n;i+=1)t(a[i])}g(h_,"loadAll$1");function $b(e,t){var r=s0(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new oa("expected a single document in the stream, but found more")}}g($b,"load$1");var d_=$b,f_={load:d_},Vb=Object.prototype.toString,zb=Object.prototype.hasOwnProperty,o0=65279,p_=9,$l=10,g_=13,y_=32,v_=33,m_=34,Cp=35,x_=37,b_=38,w_=39,k_=42,qb=44,T_=45,zu=58,C_=61,S_=62,E_=63,__=64,Wb=91,Gb=93,A_=96,Hb=123,L_=124,Yb=125,Hr={};Hr[0]="\\0";Hr[7]="\\a";Hr[8]="\\b";Hr[9]="\\t";Hr[10]="\\n";Hr[11]="\\v";Hr[12]="\\f";Hr[13]="\\r";Hr[27]="\\e";Hr[34]='\\"';Hr[92]="\\\\";Hr[133]="\\N";Hr[160]="\\_";Hr[8232]="\\L";Hr[8233]="\\P";var D_=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],B_=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Ub(e,t){var r,a,i,n,s,o,l;if(t===null)return{};for(r={},a=Object.keys(t),i=0,n=a.length;i<n;i+=1)s=a[i],o=String(t[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),l=e.compiledTypeMap.fallback[s],l&&zb.call(l.styleAliases,o)&&(o=l.styleAliases[o]),r[s]=o;return r}g(Ub,"compileStyleMap");function Xb(e){var t,r,a;if(t=e.toString(16).toUpperCase(),e<=255)r="x",a=2;else if(e<=65535)r="u",a=4;else if(e<=4294967295)r="U",a=8;else throw new oa("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+pr.repeat("0",a-t.length)+t}g(Xb,"encodeHex");var R_=1,Vl=2;function Kb(e){this.schema=e.schema||vb,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=pr.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=Ub(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Vl:R_,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}g(Kb,"State");function Sp(e,t){for(var r=pr.repeat(" ",t),a=0,i=-1,n="",s,o=e.length;a<o;)i=e.indexOf(`
`,a),i===-1?(s=e.slice(a),a=o):(s=e.slice(a,i+1),a=i+1),s.length&&s!==`
`&&(n+=r),n+=s;return n}g(Sp,"indentString");function qu(e,t){return`
`+pr.repeat(" ",e.indent*t)}g(qu,"generateNextLine");function jb(e,t){var r,a,i;for(r=0,a=e.implicitTypes.length;r<a;r+=1)if(i=e.implicitTypes[r],i.resolve(t))return!0;return!1}g(jb,"testImplicitResolving");function zl(e){return e===y_||e===p_}g(zl,"isWhitespace");function Do(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==o0||65536<=e&&e<=1114111}g(Do,"isPrintable");function Ep(e){return Do(e)&&e!==o0&&e!==g_&&e!==$l}g(Ep,"isNsCharOrWhitespace");function _p(e,t,r){var a=Ep(e),i=a&&!zl(e);return(r?a:a&&e!==qb&&e!==Wb&&e!==Gb&&e!==Hb&&e!==Yb)&&e!==Cp&&!(t===zu&&!i)||Ep(t)&&!zl(t)&&e===Cp||t===zu&&i}g(_p,"isPlainSafe");function Qb(e){return Do(e)&&e!==o0&&!zl(e)&&e!==T_&&e!==E_&&e!==zu&&e!==qb&&e!==Wb&&e!==Gb&&e!==Hb&&e!==Yb&&e!==Cp&&e!==b_&&e!==k_&&e!==v_&&e!==L_&&e!==C_&&e!==S_&&e!==w_&&e!==m_&&e!==x_&&e!==__&&e!==A_}g(Qb,"isPlainSafeFirst");function Zb(e){return!zl(e)&&e!==zu}g(Zb,"isPlainSafeLast");function bs(e,t){var r=e.charCodeAt(t),a;return r>=55296&&r<=56319&&t+1<e.length&&(a=e.charCodeAt(t+1),a>=56320&&a<=57343)?(r-55296)*1024+a-56320+65536:r}g(bs,"codePointAt");function l0(e){var t=/^\n* /;return t.test(e)}g(l0,"needIndentIndicator");var Jb=1,Ap=2,t4=3,e4=4,ps=5;function r4(e,t,r,a,i,n,s,o){var l,u=0,h=null,d=!1,f=!1,p=a!==-1,y=-1,v=Qb(bs(e,0))&&Zb(bs(e,e.length-1));if(t||s)for(l=0;l<e.length;u>=65536?l+=2:l++){if(u=bs(e,l),!Do(u))return ps;v=v&&_p(u,h,o),h=u}else{for(l=0;l<e.length;u>=65536?l+=2:l++){if(u=bs(e,l),u===$l)d=!0,p&&(f=f||l-y-1>a&&e[y+1]!==" ",y=l);else if(!Do(u))return ps;v=v&&_p(u,h,o),h=u}f=f||p&&l-y-1>a&&e[y+1]!==" "}return!d&&!f?v&&!s&&!i(e)?Jb:n===Vl?ps:Ap:r>9&&l0(e)?ps:s?n===Vl?ps:Ap:f?e4:t4}g(r4,"chooseScalarStyle");function a4(e,t,r,a,i){e.dump=function(){if(t.length===0)return e.quotingType===Vl?'""':"''";if(!e.noCompatMode&&(D_.indexOf(t)!==-1||B_.test(t)))return e.quotingType===Vl?'"'+t+'"':"'"+t+"'";var n=e.indent*Math.max(1,r),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-n),o=a||e.flowLevel>-1&&r>=e.flowLevel;function l(u){return jb(e,u)}switch(g(l,"testAmbiguity"),r4(t,o,e.indent,s,l,e.quotingType,e.forceQuotes&&!a,i)){case Jb:return t;case Ap:return"'"+t.replace(/'/g,"''")+"'";case t4:return"|"+Lp(t,e.indent)+Dp(Sp(t,n));case e4:return">"+Lp(t,e.indent)+Dp(Sp(i4(t,s),n));case ps:return'"'+n4(t)+'"';default:throw new oa("impossible error: invalid scalar style")}}()}g(a4,"writeScalar");function Lp(e,t){var r=l0(e)?String(t):"",a=e[e.length-1]===`
`,i=a&&(e[e.length-2]===`
`||e===`
`),n=i?"+":a?"":"-";return r+n+`
`}g(Lp,"blockHeader");function Dp(e){return e[e.length-1]===`
`?e.slice(0,-1):e}g(Dp,"dropEndingNewline");function i4(e,t){for(var r=/(\n+)([^\n]*)/g,a=function(){var u=e.indexOf(`
`);return u=u!==-1?u:e.length,r.lastIndex=u,Bp(e.slice(0,u),t)}(),i=e[0]===`
`||e[0]===" ",n,s;s=r.exec(e);){var o=s[1],l=s[2];n=l[0]===" ",a+=o+(!i&&!n&&l!==""?`
`:"")+Bp(l,t),i=n}return a}g(i4,"foldString");function Bp(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,a,i=0,n,s=0,o=0,l="";a=r.exec(e);)o=a.index,o-i>t&&(n=s>i?s:o,l+=`
`+e.slice(i,n),i=n+1),s=o;return l+=`
`,e.length-i>t&&s>i?l+=e.slice(i,s)+`
`+e.slice(s+1):l+=e.slice(i),l.slice(1)}g(Bp,"foldLine");function n4(e){for(var t="",r=0,a,i=0;i<e.length;r>=65536?i+=2:i++)r=bs(e,i),a=Hr[r],!a&&Do(r)?(t+=e[i],r>=65536&&(t+=e[i+1])):t+=a||Xb(r);return t}g(n4,"escapeString");function s4(e,t,r){var a="",i=e.tag,n,s,o;for(n=0,s=r.length;n<s;n+=1)o=r[n],e.replacer&&(o=e.replacer.call(r,String(n),o)),(si(e,t,o,!1,!1)||typeof o>"u"&&si(e,t,null,!1,!1))&&(a!==""&&(a+=","+(e.condenseFlow?"":" ")),a+=e.dump);e.tag=i,e.dump="["+a+"]"}g(s4,"writeFlowSequence");function Rp(e,t,r,a){var i="",n=e.tag,s,o,l;for(s=0,o=r.length;s<o;s+=1)l=r[s],e.replacer&&(l=e.replacer.call(r,String(s),l)),(si(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&si(e,t+1,null,!0,!0,!1,!0))&&((!a||i!=="")&&(i+=qu(e,t)),e.dump&&$l===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=n,e.dump=i||"[]"}g(Rp,"writeBlockSequence");function o4(e,t,r){var a="",i=e.tag,n=Object.keys(r),s,o,l,u,h;for(s=0,o=n.length;s<o;s+=1)h="",a!==""&&(h+=", "),e.condenseFlow&&(h+='"'),l=n[s],u=r[l],e.replacer&&(u=e.replacer.call(r,l,u)),si(e,t,l,!1,!1)&&(e.dump.length>1024&&(h+="? "),h+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),si(e,t,u,!1,!1)&&(h+=e.dump,a+=h));e.tag=i,e.dump="{"+a+"}"}g(o4,"writeFlowMapping");function l4(e,t,r,a){var i="",n=e.tag,s=Object.keys(r),o,l,u,h,d,f;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new oa("sortKeys must be a boolean or a function");for(o=0,l=s.length;o<l;o+=1)f="",(!a||i!=="")&&(f+=qu(e,t)),u=s[o],h=r[u],e.replacer&&(h=e.replacer.call(r,u,h)),si(e,t+1,u,!0,!0,!0)&&(d=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,d&&(e.dump&&$l===e.dump.charCodeAt(0)?f+="?":f+="? "),f+=e.dump,d&&(f+=qu(e,t)),si(e,t+1,h,!0,d)&&(e.dump&&$l===e.dump.charCodeAt(0)?f+=":":f+=": ",f+=e.dump,i+=f));e.tag=n,e.dump=i||"{}"}g(l4,"writeBlockMapping");function Ip(e,t,r){var a,i,n,s,o,l;for(i=r?e.explicitTypes:e.implicitTypes,n=0,s=i.length;n<s;n+=1)if(o=i[n],(o.instanceOf||o.predicate)&&(!o.instanceOf||typeof t=="object"&&t instanceof o.instanceOf)&&(!o.predicate||o.predicate(t))){if(r?o.multi&&o.representName?e.tag=o.representName(t):e.tag=o.tag:e.tag="?",o.represent){if(l=e.styleMap[o.tag]||o.defaultStyle,Vb.call(o.represent)==="[object Function]")a=o.represent(t,l);else if(zb.call(o.represent,l))a=o.represent[l](t,l);else throw new oa("!<"+o.tag+'> tag resolver accepts not "'+l+'" style');e.dump=a}return!0}return!1}g(Ip,"detectType");function si(e,t,r,a,i,n,s){e.tag=null,e.dump=r,Ip(e,r,!1)||Ip(e,r,!0);var o=Vb.call(e.dump),l=a,u;a&&(a=e.flowLevel<0||e.flowLevel>t);var h=o==="[object Object]"||o==="[object Array]",d,f;if(h&&(d=e.duplicates.indexOf(r),f=d!==-1),(e.tag!==null&&e.tag!=="?"||f||e.indent!==2&&t>0)&&(i=!1),f&&e.usedDuplicates[d])e.dump="*ref_"+d;else{if(h&&f&&!e.usedDuplicates[d]&&(e.usedDuplicates[d]=!0),o==="[object Object]")a&&Object.keys(e.dump).length!==0?(l4(e,t,e.dump,i),f&&(e.dump="&ref_"+d+e.dump)):(o4(e,t,e.dump),f&&(e.dump="&ref_"+d+" "+e.dump));else if(o==="[object Array]")a&&e.dump.length!==0?(e.noArrayIndent&&!s&&t>0?Rp(e,t-1,e.dump,i):Rp(e,t,e.dump,i),f&&(e.dump="&ref_"+d+e.dump)):(s4(e,t,e.dump),f&&(e.dump="&ref_"+d+" "+e.dump));else if(o==="[object String]")e.tag!=="?"&&a4(e,e.dump,t,n,l);else{if(o==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new oa("unacceptable kind of an object to dump "+o)}e.tag!==null&&e.tag!=="?"&&(u=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",e.dump=u+" "+e.dump)}return!0}g(si,"writeNode");function c4(e,t){var r=[],a=[],i,n;for(Wu(e,r,a),i=0,n=a.length;i<n;i+=1)t.duplicates.push(r[a[i]]);t.usedDuplicates=new Array(n)}g(c4,"getDuplicateReferences");function Wu(e,t,r){var a,i,n;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,n=e.length;i<n;i+=1)Wu(e[i],t,r);else for(a=Object.keys(e),i=0,n=a.length;i<n;i+=1)Wu(e[a[i]],t,r)}g(Wu,"inspectNode");function I_(e,t){t=t||{};var r=new Kb(t);r.noRefs||c4(e,r);var a=e;return r.replacer&&(a=r.replacer.call({"":a},"",a)),si(r,0,a,!0,!0)?r.dump+`
`:""}g(I_,"dump$1");function P_(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}g(P_,"renamed");var c0=tb,u0=f_.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var Ca={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:4};function dl(e,t){if(e===void 0||t===void 0)return{angle:0,deltaX:0,deltaY:0};e=Xe(e),t=Xe(t);const[r,a]=[e.x,e.y],[i,n]=[t.x,t.y],s=i-r,o=n-a;return{angle:Math.atan(o/s),deltaX:s,deltaY:o}}g(dl,"calculateDeltaAndAngle");var Xe=g(e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,"pointTransformer"),u4=g(e=>({x:g(function(t,r,a){let i=0;const n=Xe(a[0]).x<Xe(a[a.length-1]).x?"left":"right";if(r===0&&Object.hasOwn(Ca,e.arrowTypeStart)){const{angle:p,deltaX:y}=dl(a[0],a[1]);i=Ca[e.arrowTypeStart]*Math.cos(p)*(y>=0?1:-1)}else if(r===a.length-1&&Object.hasOwn(Ca,e.arrowTypeEnd)){const{angle:p,deltaX:y}=dl(a[a.length-1],a[a.length-2]);i=Ca[e.arrowTypeEnd]*Math.cos(p)*(y>=0?1:-1)}const s=Math.abs(Xe(t).x-Xe(a[a.length-1]).x),o=Math.abs(Xe(t).y-Xe(a[a.length-1]).y),l=Math.abs(Xe(t).x-Xe(a[0]).x),u=Math.abs(Xe(t).y-Xe(a[0]).y),h=Ca[e.arrowTypeStart],d=Ca[e.arrowTypeEnd],f=1;if(s<d&&s>0&&o<d){let p=d+f-s;p*=n==="right"?-1:1,i-=p}if(l<h&&l>0&&u<h){let p=h+f-l;p*=n==="right"?-1:1,i+=p}return Xe(t).x+i},"x"),y:g(function(t,r,a){let i=0;const n=Xe(a[0]).y<Xe(a[a.length-1]).y?"down":"up";if(r===0&&Object.hasOwn(Ca,e.arrowTypeStart)){const{angle:p,deltaY:y}=dl(a[0],a[1]);i=Ca[e.arrowTypeStart]*Math.abs(Math.sin(p))*(y>=0?1:-1)}else if(r===a.length-1&&Object.hasOwn(Ca,e.arrowTypeEnd)){const{angle:p,deltaY:y}=dl(a[a.length-1],a[a.length-2]);i=Ca[e.arrowTypeEnd]*Math.abs(Math.sin(p))*(y>=0?1:-1)}const s=Math.abs(Xe(t).y-Xe(a[a.length-1]).y),o=Math.abs(Xe(t).x-Xe(a[a.length-1]).x),l=Math.abs(Xe(t).y-Xe(a[0]).y),u=Math.abs(Xe(t).x-Xe(a[0]).x),h=Ca[e.arrowTypeStart],d=Ca[e.arrowTypeEnd],f=1;if(s<d&&s>0&&o<d){let p=d+f-s;p*=n==="up"?-1:1,i-=p}if(l<h&&l>0&&u<h){let p=h+f-l;p*=n==="up"?-1:1,i+=p}return Xe(t).y+i},"y")}),"getLineFunctionsWithOffset"),hc=g(({flowchart:e})=>{var i,n;const t=((i=e==null?void 0:e.subGraphTitleMargin)==null?void 0:i.top)??0,r=((n=e==null?void 0:e.subGraphTitleMargin)==null?void 0:n.bottom)??0,a=t+r;return{subGraphTitleTopMargin:t,subGraphTitleBottomMargin:r,subGraphTitleTotalMargin:a}},"getSubGraphTitleMargins"),h4={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},Pp=new Map,d4=new Map,f4=g(e=>{for(const t of e){if(!t.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(G.debug("Registering icon pack:",t.name),"loader"in t)d4.set(t.name,t.loader);else if("icons"in t)Pp.set(t.name,t.icons);else throw G.error("Invalid icon loader:",t),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),N_=g(async(e,t)=>{const r=tE(e,!0,t!==void 0);if(!r)throw new Error(`Invalid icon name: ${e}`);const a=r.prefix||t;if(!a)throw new Error(`Icon name must contain a prefix: ${e}`);let i=Pp.get(a);if(!i){const s=d4.get(a);if(!s)throw new Error(`Icon set not found: ${r.prefix}`);try{i={...await s(),prefix:a},Pp.set(a,i)}catch(o){throw G.error(o),new Error(`Failed to load icon set: ${r.prefix}`)}}const n=eE(i,r.name);if(!n)throw new Error(`Icon not found: ${e}`);return n},"getRegisteredIconData"),zn=g(async(e,t)=>{let r;try{r=await N_(e,t==null?void 0:t.fallbackPrefix)}catch(n){G.error(n),r=h4}const a=QS(r,t);return ZS(JS(a.body),a.attributes)},"getIconSVG"),p4="​",M_={curveBasis:Ss,curveBasisClosed:vE,curveBasisOpen:yE,curveBumpX:lx,curveBumpY:ox,curveBundle:gE,curveCardinalClosed:pE,curveCardinalOpen:fE,curveCardinal:sx,curveCatmullRomClosed:dE,curveCatmullRomOpen:hE,curveCatmullRom:nx,curveLinear:fp,curveLinearClosed:uE,curveMonotoneX:ix,curveMonotoneY:ax,curveNatural:rx,curveStep:ex,curveStepAfter:tx,curveStepBefore:J2},F_=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,O_=g(function(e,t){const r=g4(e,/(?:init\b)|(?:initialize\b)/);let a={};if(Array.isArray(r)){const s=r.map(o=>o.args);Pu(s),a=fr(a,[...s])}else a=r.args;if(!a)return;let i=Kg(e,t);const n="config";return a[n]!==void 0&&(i==="flowchart-v2"&&(i="flowchart"),a[i]=a[n],delete a[n]),a},"detectInit"),g4=g(function(e,t=null){var r,a;try{const i=new RegExp(`[%]{2}(?![{]${F_.source})(?=[}][%]{2}).*
`,"ig");e=e.trim().replace(i,"").replace(/'/gm,'"'),G.debug(`Detecting diagram directive${t!==null?" type:"+t:""} based on the text:${e}`);let n;const s=[];for(;(n=Al.exec(e))!==null;)if(n.index===Al.lastIndex&&Al.lastIndex++,n&&!t||t&&((r=n[1])!=null&&r.match(t))||t&&((a=n[2])!=null&&a.match(t))){const o=n[1]?n[1]:n[2],l=n[3]?n[3].trim():n[4]?JSON.parse(n[4].trim()):null;s.push({type:o,args:l})}return s.length===0?{type:e,args:null}:s.length===1?s[0]:s}catch(i){return G.error(`ERROR: ${i.message} - Unable to parse directive type: '${t}' based on the text: '${e}'`),{type:void 0,args:null}}},"detectDirective"),$_=g(function(e){return e.replace(Al,"")},"removeDirectives"),V_=g(function(e,t){for(const[r,a]of t.entries())if(a.match(e))return r;return-1},"isSubstringInArray");function h0(e,t){if(!e)return t;const r=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return M_[r]??t}g(h0,"interpolateToCurve");function y4(e,t){const r=e.trim();if(r)return t.securityLevel!=="loose"?Kn.sanitizeUrl(r):r}g(y4,"formatUrl");var z_=g((e,...t)=>{const r=e.split("."),a=r.length-1,i=r[a];let n=window;for(let s=0;s<a;s++)if(n=n[r[s]],!n){G.error(`Function name: ${e} not found in window`);return}n[i](...t)},"runFunc");function d0(e,t){return!e||!t?0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}g(d0,"distance");function v4(e){let t,r=0;e.forEach(i=>{r+=d0(i,t),t=i});const a=r/2;return f0(e,a)}g(v4,"traverseEdge");function m4(e){return e.length===1?e[0]:v4(e)}g(m4,"calcLabelPosition");var hy=g((e,t=2)=>{const r=Math.pow(10,t);return Math.round(e*r)/r},"roundNumber"),f0=g((e,t)=>{let r,a=t;for(const i of e){if(r){const n=d0(i,r);if(n===0)return r;if(n<a)a-=n;else{const s=a/n;if(s<=0)return r;if(s>=1)return{x:i.x,y:i.y};if(s>0&&s<1)return{x:hy((1-s)*r.x+s*i.x,5),y:hy((1-s)*r.y+s*i.y,5)}}}r=i}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),q_=g((e,t,r)=>{G.info(`our points ${JSON.stringify(t)}`),t[0]!==r&&(t=t.reverse());const i=f0(t,25),n=e?10:5,s=Math.atan2(t[0].y-i.y,t[0].x-i.x),o={x:0,y:0};return o.x=Math.sin(s)*n+(t[0].x+i.x)/2,o.y=-Math.cos(s)*n+(t[0].y+i.y)/2,o},"calcCardinalityPosition");function x4(e,t,r){const a=structuredClone(r);G.info("our points",a),t!=="start_left"&&t!=="start_right"&&a.reverse();const i=25+e,n=f0(a,i),s=10+e*.5,o=Math.atan2(a[0].y-n.y,a[0].x-n.x),l={x:0,y:0};return t==="start_left"?(l.x=Math.sin(o+Math.PI)*s+(a[0].x+n.x)/2,l.y=-Math.cos(o+Math.PI)*s+(a[0].y+n.y)/2):t==="end_right"?(l.x=Math.sin(o-Math.PI)*s+(a[0].x+n.x)/2-5,l.y=-Math.cos(o-Math.PI)*s+(a[0].y+n.y)/2-5):t==="end_left"?(l.x=Math.sin(o)*s+(a[0].x+n.x)/2-5,l.y=-Math.cos(o)*s+(a[0].y+n.y)/2-5):(l.x=Math.sin(o)*s+(a[0].x+n.x)/2,l.y=-Math.cos(o)*s+(a[0].y+n.y)/2),l}g(x4,"calcTerminalLabelPosition");function p0(e){let t="",r="";for(const a of e)a!==void 0&&(a.startsWith("color:")||a.startsWith("text-align:")?r=r+a+";":t=t+a+";");return{style:t,labelStyle:r}}g(p0,"getStylesFromArray");var dy=0,b4=g(()=>(dy++,"id-"+Math.random().toString(36).substr(2,12)+"-"+dy),"generateId");function w4(e){let t="";const r="0123456789abcdef",a=r.length;for(let i=0;i<e;i++)t+=r.charAt(Math.floor(Math.random()*a));return t}g(w4,"makeRandomHex");var k4=g(e=>w4(e.length),"random"),W_=g(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),G_=g(function(e,t){const r=t.text.replace(Mt.lineBreakRegex," "),[,a]=ln(t.fontSize),i=e.append("text");i.attr("x",t.x),i.attr("y",t.y),i.style("text-anchor",t.anchor),i.style("font-family",t.fontFamily),i.style("font-size",a),i.style("font-weight",t.fontWeight),i.attr("fill",t.fill),t.class!==void 0&&i.attr("class",t.class);const n=i.append("tspan");return n.attr("x",t.x+t.textMargin*2),n.attr("fill",t.fill),n.text(r),i},"drawSimpleText"),T4=Ug((e,t,r)=>{if(!e||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),Mt.lineBreakRegex.test(e)))return e;const a=e.split(" ").filter(Boolean),i=[];let n="";return a.forEach((s,o)=>{const l=Zr(`${s} `,r),u=Zr(n,r);if(l>t){const{hyphenatedStrings:f,remainingWord:p}=H_(s,t,"-",r);i.push(n,...f),n=p}else u+l>=t?(i.push(n),n=s):n=[n,s].filter(Boolean).join(" ");o+1===a.length&&i.push(n)}),i.filter(s=>s!=="").join(r.joinWith)},(e,t,r)=>`${e}${t}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`),H_=Ug((e,t,r="-",a)=>{a=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},a);const i=[...e],n=[];let s="";return i.forEach((o,l)=>{const u=`${s}${o}`;if(Zr(u,a)>=t){const d=l+1,f=i.length===d,p=`${u}${r}`;n.push(f?u:p),s=""}else s=u}),{hyphenatedStrings:n,remainingWord:s}},(e,t,r="-",a)=>`${e}${t}${r}${a.fontSize}${a.fontWeight}${a.fontFamily}`);function Gu(e,t){return g0(e,t).height}g(Gu,"calculateTextHeight");function Zr(e,t){return g0(e,t).width}g(Zr,"calculateTextWidth");var g0=Ug((e,t)=>{const{fontSize:r=12,fontFamily:a="Arial",fontWeight:i=400}=t;if(!e)return{width:0,height:0};const[,n]=ln(r),s=["sans-serif",a],o=e.split(Mt.lineBreakRegex),l=[],u=It("body");if(!u.remove)return{width:0,height:0,lineHeight:0};const h=u.append("svg");for(const f of s){let p=0;const y={width:0,height:0,lineHeight:0};for(const v of o){const m=W_();m.text=v||p4;const x=G_(h,m).style("font-size",n).style("font-weight",i).style("font-family",f),b=(x._groups||x)[0][0].getBBox();if(b.width===0&&b.height===0)throw new Error("svg element not in render tree");y.width=Math.round(Math.max(y.width,b.width)),p=Math.round(b.height),y.height+=p,y.lineHeight=Math.round(Math.max(y.lineHeight,p))}l.push(y)}h.remove();const d=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[d]},(e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`),$s,Y_=($s=class{constructor(t=!1,r){this.count=0,this.count=r?r.length:0,this.next=t?()=>this.count++:()=>Date.now()}},g($s,"InitIDGenerator"),$s),Nc,U_=g(function(e){return Nc=Nc||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),Nc.innerHTML=e,unescape(Nc.textContent)},"entityDecode");function y0(e){return"str"in e}g(y0,"isDetailedError");var X_=g((e,t,r,a)=>{var n;if(!a)return;const i=(n=e.node())==null?void 0:n.getBBox();i&&e.append("text").text(a).attr("text-anchor","middle").attr("x",i.x+i.width/2).attr("y",-r).attr("class",t)},"insertTitle"),ln=g(e=>{if(typeof e=="number")return[e,e+"px"];const t=parseInt(e??"",10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+"px"]:[t,e]},"parseFontSize");function Pa(e,t){return $E({},e,t)}g(Pa,"cleanAndMerge");var xe={assignWithDepth:fr,wrapLabel:T4,calculateTextHeight:Gu,calculateTextWidth:Zr,calculateTextDimensions:g0,cleanAndMerge:Pa,detectInit:O_,detectDirective:g4,isSubstringInArray:V_,interpolateToCurve:h0,calcLabelPosition:m4,calcCardinalityPosition:q_,calcTerminalLabelPosition:x4,formatUrl:y4,getStylesFromArray:p0,generateId:b4,random:k4,runFunc:z_,entityDecode:U_,insertTitle:X_,parseFontSize:ln,InitIDGenerator:Y_},K_=g(function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/classDef.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/#\w+;/g,function(r){const a=r.substring(1,r.length-1);return/^\+?\d+$/.test(a)?"ﬂ°°"+a+"¶ß":"ﬂ°"+a+"¶ß"}),t},"encodeEntities"),oi=g(function(e){return e.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},"decodeEntities"),Dl=g((e,t,{counter:r=0,prefix:a,suffix:i},n)=>n||`${a?`${a}_`:""}${e}_${t}_${r}${i?`_${i}`:""}`,"getEdgeId");function Jr(e){return e??null}g(Jr,"handleUndefinedAttr");function C4(e,{markdownAutoWrap:t}){const a=e.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),i=Z2(a);return t===!1?i.replace(/ /g,"&nbsp;"):i}g(C4,"preprocessMarkdown");function S4(e,t={}){const r=C4(e,t),a=Q2.lexer(r),i=[[]];let n=0;function s(o,l="normal"){o.type==="text"?o.text.split(`
`).forEach((h,d)=>{d!==0&&(n++,i.push([])),h.split(" ").forEach(f=>{f=f.replace(/&#39;/g,"'"),f&&i[n].push({content:f,type:l})})}):o.type==="strong"||o.type==="em"?o.tokens.forEach(u=>{s(u,o.type)}):o.type==="html"&&i[n].push({content:o.text,type:"normal"})}return g(s,"processNode"),a.forEach(o=>{var l;o.type==="paragraph"?(l=o.tokens)==null||l.forEach(u=>{s(u)}):o.type==="html"&&i[n].push({content:o.text,type:"normal"})}),i}g(S4,"markdownToLines");function E4(e,{markdownAutoWrap:t}={}){const r=Q2.lexer(e);function a(i){var n,s,o;return i.type==="text"?t===!1?i.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):i.text.replace(/\n */g,"<br/>"):i.type==="strong"?`<strong>${(n=i.tokens)==null?void 0:n.map(a).join("")}</strong>`:i.type==="em"?`<em>${(s=i.tokens)==null?void 0:s.map(a).join("")}</em>`:i.type==="paragraph"?`<p>${(o=i.tokens)==null?void 0:o.map(a).join("")}</p>`:i.type==="space"?"":i.type==="html"?`${i.text}`:i.type==="escape"?i.text:`Unsupported markdown: ${i.type}`}return g(a,"output"),r.map(a).join("")}g(E4,"markdownToHTML");function _4(e){return Intl.Segmenter?[...new Intl.Segmenter().segment(e)].map(t=>t.segment):[...e]}g(_4,"splitTextToChars");function A4(e,t){const r=_4(t.content);return v0(e,[],r,t.type)}g(A4,"splitWordToFitWidth");function v0(e,t,r,a){if(r.length===0)return[{content:t.join(""),type:a},{content:"",type:a}];const[i,...n]=r,s=[...t,i];return e([{content:s.join(""),type:a}])?v0(e,s,n,a):(t.length===0&&i&&(t.push(i),r.shift()),[{content:t.join(""),type:a},{content:r.join(""),type:a}])}g(v0,"splitWordToFitWidthRecursion");function L4(e,t){if(e.some(({content:r})=>r.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return Hu(e,t)}g(L4,"splitLineToFitWidth");function Hu(e,t,r=[],a=[]){if(e.length===0)return a.length>0&&r.push(a),r.length>0?r:[];let i="";e[0].content===" "&&(i=" ",e.shift());const n=e.shift()??{content:" ",type:"normal"},s=[...a];if(i!==""&&s.push({content:i,type:"normal"}),s.push(n),t(s))return Hu(e,t,r,s);if(a.length>0)r.push(a),e.unshift(n);else if(n.content){const[o,l]=A4(t,n);r.push([o]),l.content&&e.unshift(l)}return Hu(e,t,r)}g(Hu,"splitLineToFitWidthRecursion");function Np(e,t){t&&e.attr("style",t)}g(Np,"applyStyle");async function D4(e,t,r,a,i=!1){const n=e.append("foreignObject");n.attr("width",`${10*r}px`),n.attr("height",`${10*r}px`);const s=n.append("xhtml:div");let o=t.label;t.label&&qr(t.label)&&(o=await cc(t.label.replace(Mt.lineBreakRegex,`
`),dt()));const l=t.isNode?"nodeLabel":"edgeLabel",u=s.append("span");u.html(o),Np(u,t.labelStyle),u.attr("class",`${l} ${a}`),Np(s,t.labelStyle),s.style("display","table-cell"),s.style("white-space","nowrap"),s.style("line-height","1.5"),s.style("max-width",r+"px"),s.style("text-align","center"),s.attr("xmlns","http://www.w3.org/1999/xhtml"),i&&s.attr("class","labelBkg");let h=s.node().getBoundingClientRect();return h.width===r&&(s.style("display","table"),s.style("white-space","break-spaces"),s.style("width",r+"px"),h=s.node().getBoundingClientRect()),n.node()}g(D4,"addHtmlSpan");function Ph(e,t,r){return e.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",t*r-.1+"em").attr("dy",r+"em")}g(Ph,"createTspan");function B4(e,t,r){const a=e.append("text"),i=Ph(a,1,t);Nh(i,r);const n=i.node().getComputedTextLength();return a.remove(),n}g(B4,"computeWidthOfText");function R4(e,t,r){var s;const a=e.append("text"),i=Ph(a,1,t);Nh(i,[{content:r,type:"normal"}]);const n=(s=i.node())==null?void 0:s.getBoundingClientRect();return n&&a.remove(),n}g(R4,"computeDimensionOfText");function I4(e,t,r,a=!1){const n=t.append("g"),s=n.insert("rect").attr("class","background").attr("style","stroke: none"),o=n.append("text").attr("y","-10.1");let l=0;for(const u of r){const h=g(f=>B4(n,1.1,f)<=e,"checkWidth"),d=h(u)?[u]:L4(u,h);for(const f of d){const p=Ph(o,l,1.1);Nh(p,f),l++}}if(a){const u=o.node().getBBox(),h=2;return s.attr("x",u.x-h).attr("y",u.y-h).attr("width",u.width+2*h).attr("height",u.height+2*h),n.node()}else return o.node()}g(I4,"createFormattedText");function Nh(e,t){e.text(""),t.forEach((r,a)=>{const i=e.append("tspan").attr("font-style",r.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",r.type==="strong"?"bold":"normal");a===0?i.text(r.content):i.text(" "+r.content)})}g(Nh,"updateTextContentAndStyles");function m0(e){return e.replace(/fa[bklrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`)}g(m0,"replaceIconSubstring");var fa=g(async(e,t="",{style:r="",isTitle:a=!1,classes:i="",useHtmlLabels:n=!0,isNode:s=!0,width:o=200,addSvgBackground:l=!1}={},u)=>{if(G.debug("XYZ createText",t,r,a,i,n,s,"addSvgBackground: ",l),n){const h=E4(t,u),d=m0(oi(h)),f=t.replace(/\\\\/g,"\\"),p={isNode:s,label:qr(t)?f:d,labelStyle:r.replace("fill:","color:")};return await D4(e,p,o,i,l)}else{const h=t.replace(/<br\s*\/?>/g,"<br/>"),d=S4(h.replace("<br>","<br/>"),u),f=I4(o,e,d,t?l:!1);if(s){/stroke:/.exec(r)&&(r=r.replace("stroke:","lineColor:"));const p=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");It(f).attr("style",p)}else{const p=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");It(f).select("rect").attr("style",p.replace(/background:/g,"fill:"));const y=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");It(f).select("text").attr("style",y)}return f}},"createText"),ve=g(async(e,t,r)=>{var d,f;let a;const i=t.useHtmlLabels||Oe((d=dt())==null?void 0:d.htmlLabels);r?a=r:a="node default";const n=e.insert("g").attr("class",a).attr("id",t.domId||t.id),s=n.insert("g").attr("class","label").attr("style",Jr(t.labelStyle));let o;t.label===void 0?o="":o=typeof t.label=="string"?t.label:t.label[0];const l=await fa(s,qe(oi(o),dt()),{useHtmlLabels:i,width:t.width||((f=dt().flowchart)==null?void 0:f.wrappingWidth),cssClasses:"markdown-node-label",style:t.labelStyle,addSvgBackground:!!t.icon||!!t.img});let u=l.getBBox();const h=((t==null?void 0:t.padding)??0)/2;if(i){const p=l.children[0],y=It(l),v=p.getElementsByTagName("img");if(v){const m=o.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...v].map(x=>new Promise(b=>{function w(){if(x.style.display="flex",x.style.flexDirection="column",m){const C=dt().fontSize?dt().fontSize:window.getComputedStyle(document.body).fontSize,T=5,[k=Ee.fontSize]=ln(C),S=k*T+"px";x.style.minWidth=S,x.style.maxWidth=S}else x.style.width="100%";b(x)}g(w,"setupImage"),setTimeout(()=>{x.complete&&w()}),x.addEventListener("error",w),x.addEventListener("load",w)})))}u=p.getBoundingClientRect(),y.attr("width",u.width),y.attr("height",u.height)}return i?s.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"):s.attr("transform","translate(0, "+-u.height/2+")"),t.centerLabel&&s.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),s.insert("rect",":first-child"),{shapeSvg:n,bbox:u,halfPadding:h,label:s}},"labelHelper"),kd=g(async(e,t,r)=>{var l,u,h,d,f,p;const a=r.useHtmlLabels||Oe((u=(l=dt())==null?void 0:l.flowchart)==null?void 0:u.htmlLabels),i=e.insert("g").attr("class","label").attr("style",r.labelStyle||""),n=await fa(i,qe(oi(t),dt()),{useHtmlLabels:a,width:r.width||((d=(h=dt())==null?void 0:h.flowchart)==null?void 0:d.wrappingWidth),style:r.labelStyle,addSvgBackground:!!r.icon||!!r.img});let s=n.getBBox();const o=r.padding/2;if(Oe((p=(f=dt())==null?void 0:f.flowchart)==null?void 0:p.htmlLabels)){const y=n.children[0],v=It(n);s=y.getBoundingClientRect(),v.attr("width",s.width),v.attr("height",s.height)}return a?i.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"):i.attr("transform","translate(0, "+-s.height/2+")"),r.centerLabel&&i.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),i.insert("rect",":first-child"),{shapeSvg:e,bbox:s,halfPadding:o,label:i}},"insertLabel"),se=g((e,t)=>{const r=t.node().getBBox();e.width=r.width,e.height=r.height},"updateNodeBounds"),ge=g((e,t)=>(e.look==="handDrawn"?"rough-node":"node")+" "+e.cssClasses+" "+(t||""),"getNodeClasses");function Ae(e){const t=e.map((r,a)=>`${a===0?"M":"L"}${r.x},${r.y}`);return t.push("Z"),t.join(" ")}g(Ae,"createPathFromPoints");function Zi(e,t,r,a,i,n){const s=[],l=r-e,u=a-t,h=l/n,d=2*Math.PI/h,f=t+u/2;for(let p=0;p<=50;p++){const y=p/50,v=e+y*l,m=f+i*Math.sin(d*(v-e));s.push({x:v,y:m})}return s}g(Zi,"generateFullSineWavePoints");function x0(e,t,r,a,i,n){const s=[],o=i*Math.PI/180,h=(n*Math.PI/180-o)/(a-1);for(let d=0;d<a;d++){const f=o+d*h,p=e+r*Math.cos(f),y=t+r*Math.sin(f);s.push({x:-p,y:-y})}return s}g(x0,"generateCirclePoints");var j_=g((e,t)=>{var r=e.x,a=e.y,i=t.x-r,n=t.y-a,s=e.width/2,o=e.height/2,l,u;return Math.abs(n)*s>Math.abs(i)*o?(n<0&&(o=-o),l=n===0?0:o*i/n,u=o):(i<0&&(s=-s),l=s,u=i===0?0:s*n/i),{x:r+l,y:a+u}},"intersectRect"),Yo=j_;function P4(e,t){t&&e.attr("style",t)}g(P4,"applyStyle");async function N4(e){const t=It(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=t.append("xhtml:div");let a=e.label;e.label&&qr(e.label)&&(a=await cc(e.label.replace(Mt.lineBreakRegex,`
`),dt()));const i=e.isNode?"nodeLabel":"edgeLabel";return r.html('<span class="'+i+'" '+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+a+"</span>"),P4(r,e.labelStyle),r.style("display","inline-block"),r.style("padding-right","1px"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}g(N4,"addHtmlLabel");var Q_=g(async(e,t,r,a)=>{let i=e||"";if(typeof i=="object"&&(i=i[0]),Oe(dt().flowchart.htmlLabels)){i=i.replace(/\\n|\n/g,"<br />"),G.info("vertexText"+i);const n={isNode:a,label:oi(i).replace(/fa[blrs]?:fa-[\w-]+/g,o=>`<i class='${o.replace(":"," ")}'></i>`),labelStyle:t&&t.replace("fill:","color:")};return await N4(n)}else{const n=document.createElementNS("http://www.w3.org/2000/svg","text");n.setAttribute("style",t.replace("color:","fill:"));let s=[];typeof i=="string"?s=i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?s=i:s=[];for(const o of s){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),r?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=o.trim(),n.appendChild(l)}return n}},"createLabel"),In=Q_,Bi=g((e,t,r,a,i)=>["M",e+i,t,"H",e+r-i,"A",i,i,0,0,1,e+r,t+i,"V",t+a-i,"A",i,i,0,0,1,e+r-i,t+a,"H",e+i,"A",i,i,0,0,1,e,t+a-i,"V",t+i,"A",i,i,0,0,1,e+i,t,"Z"].join(" "),"createRoundedRectPathD"),Z_=g(e=>{const{handDrawnSeed:t}=dt();return{fill:e,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:e,seed:t}},"solidStateFill"),Uo=g(e=>{const t=J_([...e.cssCompiledStyles||[],...e.cssStyles||[]]);return{stylesMap:t,stylesArray:[...t]}},"compileStyles"),J_=g(e=>{const t=new Map;return e.forEach(r=>{const[a,i]=r.split(":");t.set(a.trim(),i==null?void 0:i.trim())}),t},"styles2Map"),M4=g(e=>e==="color"||e==="font-size"||e==="font-family"||e==="font-weight"||e==="font-style"||e==="text-decoration"||e==="text-align"||e==="text-transform"||e==="line-height"||e==="letter-spacing"||e==="word-spacing"||e==="text-shadow"||e==="text-overflow"||e==="white-space"||e==="word-wrap"||e==="word-break"||e==="overflow-wrap"||e==="hyphens","isLabelStyle"),oe=g(e=>{const{stylesArray:t}=Uo(e),r=[],a=[],i=[],n=[];return t.forEach(s=>{const o=s[0];M4(o)?r.push(s.join(":")+" !important"):(a.push(s.join(":")+" !important"),o.includes("stroke")&&i.push(s.join(":")+" !important"),o==="fill"&&n.push(s.join(":")+" !important"))}),{labelStyles:r.join(";"),nodeStyles:a.join(";"),stylesArray:t,borderStyles:i,backgroundStyles:n}},"styles2String"),ie=g((e,t)=>{var l;const{themeVariables:r,handDrawnSeed:a}=dt(),{nodeBorder:i,mainBkg:n}=r,{stylesMap:s}=Uo(e);return Object.assign({roughness:.7,fill:s.get("fill")||n,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:s.get("stroke")||i,seed:a,strokeWidth:((l=s.get("stroke-width"))==null?void 0:l.replace("px",""))||1.3,fillLineDash:[0,0]},t)},"userNodeOverrides"),F4=g(async(e,t)=>{G.info("Creating subgraph rect for ",t.id,t);const r=dt(),{themeVariables:a,handDrawnSeed:i}=r,{clusterBkg:n,clusterBorder:s}=a,{labelStyles:o,nodeStyles:l,borderStyles:u,backgroundStyles:h}=oe(t),d=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),f=Oe(r.flowchart.htmlLabels),p=d.insert("g").attr("class","cluster-label "),y=await fa(p,t.label,{style:t.labelStyle,useHtmlLabels:f,isNode:!0});let v=y.getBBox();if(Oe(r.flowchart.htmlLabels)){const S=y.children[0],L=It(y);v=S.getBoundingClientRect(),L.attr("width",v.width),L.attr("height",v.height)}const m=t.width<=v.width+t.padding?v.width+t.padding:t.width;t.width<=v.width+t.padding?t.diff=(m-t.width)/2-t.padding:t.diff=-t.padding;const x=t.height,b=t.x-m/2,w=t.y-x/2;G.trace("Data ",t,JSON.stringify(t));let C;if(t.look==="handDrawn"){const S=ee.svg(d),L=ie(t,{roughness:.7,fill:n,stroke:s,fillWeight:3,seed:i}),_=S.path(Bi(b,w,m,x,0),L);C=d.insert(()=>(G.debug("Rough node insert CXC",_),_),":first-child"),C.select("path:nth-child(2)").attr("style",u.join(";")),C.select("path").attr("style",h.join(";").replace("fill","stroke"))}else C=d.insert("rect",":first-child"),C.attr("style",l).attr("rx",t.rx).attr("ry",t.ry).attr("x",b).attr("y",w).attr("width",m).attr("height",x);const{subGraphTitleTopMargin:T}=hc(r);if(p.attr("transform",`translate(${t.x-v.width/2}, ${t.y-t.height/2+T})`),o){const S=p.select("span");S&&S.attr("style",o)}const k=C.node().getBBox();return t.offsetX=0,t.width=k.width,t.height=k.height,t.offsetY=v.height-t.padding/2,t.intersect=function(S){return Yo(t,S)},{cluster:d,labelBBox:v}},"rect"),tA=g((e,t)=>{const r=e.insert("g").attr("class","note-cluster").attr("id",t.id),a=r.insert("rect",":first-child"),i=0*t.padding,n=i/2;a.attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-t.width/2-n).attr("y",t.y-t.height/2-n).attr("width",t.width+i).attr("height",t.height+i).attr("fill","none");const s=a.node().getBBox();return t.width=s.width,t.height=s.height,t.intersect=function(o){return Yo(t,o)},{cluster:r,labelBBox:{width:0,height:0}}},"noteGroup"),eA=g(async(e,t)=>{const r=dt(),{themeVariables:a,handDrawnSeed:i}=r,{altBackground:n,compositeBackground:s,compositeTitleBackground:o,nodeBorder:l}=a,u=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-id",t.id).attr("data-look",t.look),h=u.insert("g",":first-child"),d=u.insert("g").attr("class","cluster-label");let f=u.append("rect");const p=d.node().appendChild(await In(t.label,t.labelStyle,void 0,!0));let y=p.getBBox();if(Oe(r.flowchart.htmlLabels)){const _=p.children[0],A=It(p);y=_.getBoundingClientRect(),A.attr("width",y.width),A.attr("height",y.height)}const v=0*t.padding,m=v/2,x=(t.width<=y.width+t.padding?y.width+t.padding:t.width)+v;t.width<=y.width+t.padding?t.diff=(x-t.width)/2-t.padding:t.diff=-t.padding;const b=t.height+v,w=t.height+v-y.height-6,C=t.x-x/2,T=t.y-b/2;t.width=x;const k=t.y-t.height/2-m+y.height+2;let S;if(t.look==="handDrawn"){const _=t.cssClasses.includes("statediagram-cluster-alt"),A=ee.svg(u),E=t.rx||t.ry?A.path(Bi(C,T,x,b,10),{roughness:.7,fill:o,fillStyle:"solid",stroke:l,seed:i}):A.rectangle(C,T,x,b,{seed:i});S=u.insert(()=>E,":first-child");const D=A.rectangle(C,k,x,w,{fill:_?n:s,fillStyle:_?"hachure":"solid",stroke:l,seed:i});S=u.insert(()=>E,":first-child"),f=u.insert(()=>D)}else S=h.insert("rect",":first-child"),S.attr("class","outer").attr("x",C).attr("y",T).attr("width",x).attr("height",b).attr("data-look",t.look),f.attr("class","inner").attr("x",C).attr("y",k).attr("width",x).attr("height",w);d.attr("transform",`translate(${t.x-y.width/2}, ${T+1-(Oe(r.flowchart.htmlLabels)?0:3)})`);const L=S.node().getBBox();return t.height=L.height,t.offsetX=0,t.offsetY=y.height-t.padding/2,t.labelBBox=y,t.intersect=function(_){return Yo(t,_)},{cluster:u,labelBBox:y}},"roundedWithTitle"),rA=g(async(e,t)=>{G.info("Creating subgraph rect for ",t.id,t);const r=dt(),{themeVariables:a,handDrawnSeed:i}=r,{clusterBkg:n,clusterBorder:s}=a,{labelStyles:o,nodeStyles:l,borderStyles:u,backgroundStyles:h}=oe(t),d=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),f=Oe(r.flowchart.htmlLabels),p=d.insert("g").attr("class","cluster-label "),y=await fa(p,t.label,{style:t.labelStyle,useHtmlLabels:f,isNode:!0,width:t.width});let v=y.getBBox();if(Oe(r.flowchart.htmlLabels)){const S=y.children[0],L=It(y);v=S.getBoundingClientRect(),L.attr("width",v.width),L.attr("height",v.height)}const m=t.width<=v.width+t.padding?v.width+t.padding:t.width;t.width<=v.width+t.padding?t.diff=(m-t.width)/2-t.padding:t.diff=-t.padding;const x=t.height,b=t.x-m/2,w=t.y-x/2;G.trace("Data ",t,JSON.stringify(t));let C;if(t.look==="handDrawn"){const S=ee.svg(d),L=ie(t,{roughness:.7,fill:n,stroke:s,fillWeight:4,seed:i}),_=S.path(Bi(b,w,m,x,t.rx),L);C=d.insert(()=>(G.debug("Rough node insert CXC",_),_),":first-child"),C.select("path:nth-child(2)").attr("style",u.join(";")),C.select("path").attr("style",h.join(";").replace("fill","stroke"))}else C=d.insert("rect",":first-child"),C.attr("style",l).attr("rx",t.rx).attr("ry",t.ry).attr("x",b).attr("y",w).attr("width",m).attr("height",x);const{subGraphTitleTopMargin:T}=hc(r);if(p.attr("transform",`translate(${t.x-v.width/2}, ${t.y-t.height/2+T})`),o){const S=p.select("span");S&&S.attr("style",o)}const k=C.node().getBBox();return t.offsetX=0,t.width=k.width,t.height=k.height,t.offsetY=v.height-t.padding/2,t.intersect=function(S){return Yo(t,S)},{cluster:d,labelBBox:v}},"kanbanSection"),aA=g((e,t)=>{const r=dt(),{themeVariables:a,handDrawnSeed:i}=r,{nodeBorder:n}=a,s=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-look",t.look),o=s.insert("g",":first-child"),l=0*t.padding,u=t.width+l;t.diff=-t.padding;const h=t.height+l,d=t.x-u/2,f=t.y-h/2;t.width=u;let p;if(t.look==="handDrawn"){const m=ee.svg(s).rectangle(d,f,u,h,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:n,seed:i});p=s.insert(()=>m,":first-child")}else p=o.insert("rect",":first-child"),p.attr("class","divider").attr("x",d).attr("y",f).attr("width",u).attr("height",h).attr("data-look",t.look);const y=p.node().getBBox();return t.height=y.height,t.offsetX=0,t.offsetY=0,t.intersect=function(v){return Yo(t,v)},{cluster:s,labelBBox:{}}},"divider"),iA=F4,nA={rect:F4,squareRect:iA,roundedWithTitle:eA,noteGroup:tA,divider:aA,kanbanSection:rA},O4=new Map,b0=g(async(e,t)=>{const r=t.shape||"rect",a=await nA[r](e,t);return O4.set(t.id,a),a},"insertCluster"),sA=g(()=>{O4=new Map},"clear");function $4(e,t){return e.intersect(t)}g($4,"intersectNode");var oA=$4;function V4(e,t,r,a){var i=e.x,n=e.y,s=i-a.x,o=n-a.y,l=Math.sqrt(t*t*o*o+r*r*s*s),u=Math.abs(t*r*s/l);a.x<i&&(u=-u);var h=Math.abs(t*r*o/l);return a.y<n&&(h=-h),{x:i+u,y:n+h}}g(V4,"intersectEllipse");var z4=V4;function q4(e,t,r){return z4(e,t,t,r)}g(q4,"intersectCircle");var lA=q4;function W4(e,t,r,a){var i,n,s,o,l,u,h,d,f,p,y,v,m,x,b;if(i=t.y-e.y,s=e.x-t.x,l=t.x*e.y-e.x*t.y,f=i*r.x+s*r.y+l,p=i*a.x+s*a.y+l,!(f!==0&&p!==0&&Mp(f,p))&&(n=a.y-r.y,o=r.x-a.x,u=a.x*r.y-r.x*a.y,h=n*e.x+o*e.y+u,d=n*t.x+o*t.y+u,!(h!==0&&d!==0&&Mp(h,d))&&(y=i*o-n*s,y!==0)))return v=Math.abs(y/2),m=s*u-o*l,x=m<0?(m-v)/y:(m+v)/y,m=n*l-i*u,b=m<0?(m-v)/y:(m+v)/y,{x,y:b}}g(W4,"intersectLine");function Mp(e,t){return e*t>0}g(Mp,"sameSign");var cA=W4;function G4(e,t,r){let a=e.x,i=e.y,n=[],s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(h){s=Math.min(s,h.x),o=Math.min(o,h.y)}):(s=Math.min(s,t.x),o=Math.min(o,t.y));let l=a-e.width/2-s,u=i-e.height/2-o;for(let h=0;h<t.length;h++){let d=t[h],f=t[h<t.length-1?h+1:0],p=cA(e,r,{x:l+d.x,y:u+d.y},{x:l+f.x,y:u+f.y});p&&n.push(p)}return n.length?(n.length>1&&n.sort(function(h,d){let f=h.x-r.x,p=h.y-r.y,y=Math.sqrt(f*f+p*p),v=d.x-r.x,m=d.y-r.y,x=Math.sqrt(v*v+m*m);return y<x?-1:y===x?0:1}),n[0]):e}g(G4,"intersectPolygon");var uA=G4,Zt={node:oA,circle:lA,ellipse:z4,polygon:uA,rect:Yo};function H4(e,t){const{labelStyles:r}=oe(t);t.labelStyle=r;const a=ge(t);let i=a;a||(i="anchor");const n=e.insert("g").attr("class",i).attr("id",t.domId||t.id),s=1,{cssStyles:o}=t,l=ee.svg(n),u=ie(t,{fill:"black",stroke:"none",fillStyle:"solid"});t.look!=="handDrawn"&&(u.roughness=0);const h=l.circle(0,0,s*2,u),d=n.insert(()=>h,":first-child");return d.attr("class","anchor").attr("style",Jr(o)),se(t,d),t.intersect=function(f){return G.info("Circle intersect",t,s,f),Zt.circle(t,s,f)},n}g(H4,"anchor");function Fp(e,t,r,a,i,n,s){const l=(e+r)/2,u=(t+a)/2,h=Math.atan2(a-t,r-e),d=(r-e)/2,f=(a-t)/2,p=d/i,y=f/n,v=Math.sqrt(p**2+y**2);if(v>1)throw new Error("The given radii are too small to create an arc between the points.");const m=Math.sqrt(1-v**2),x=l+m*n*Math.sin(h)*(s?-1:1),b=u-m*i*Math.cos(h)*(s?-1:1),w=Math.atan2((t-b)/n,(e-x)/i);let T=Math.atan2((a-b)/n,(r-x)/i)-w;s&&T<0&&(T+=2*Math.PI),!s&&T>0&&(T-=2*Math.PI);const k=[];for(let S=0;S<20;S++){const L=S/19,_=w+L*T,A=x+i*Math.cos(_),E=b+n*Math.sin(_);k.push({x:A,y:E})}return k}g(Fp,"generateArcPoints");async function Y4(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n}=await ve(e,t,ge(t)),s=n.width+t.padding+20,o=n.height+t.padding,l=o/2,u=l/(2.5+o/50),{cssStyles:h}=t,d=[{x:s/2,y:-o/2},{x:-s/2,y:-o/2},...Fp(-s/2,-o/2,-s/2,o/2,u,l,!1),{x:s/2,y:o/2},...Fp(s/2,o/2,s/2,-o/2,u,l,!0)],f=ee.svg(i),p=ie(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const y=Ae(d),v=f.path(y,p),m=i.insert(()=>v,":first-child");return m.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",h),a&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",a),m.attr("transform",`translate(${u/2}, 0)`),se(t,m),t.intersect=function(x){return Zt.polygon(t,d,x)},i}g(Y4,"bowTieRect");function Ri(e,t,r,a){return e.insert("polygon",":first-child").attr("points",a.map(function(i){return i.x+","+i.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+r/2+")")}g(Ri,"insertPolygonShape");async function U4(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n}=await ve(e,t,ge(t)),s=n.height+t.padding,o=12,l=n.width+t.padding+o,u=0,h=l,d=-s,f=0,p=[{x:u+o,y:d},{x:h,y:d},{x:h,y:f},{x:u,y:f},{x:u,y:d+o},{x:u+o,y:d}];let y;const{cssStyles:v}=t;if(t.look==="handDrawn"){const m=ee.svg(i),x=ie(t,{}),b=Ae(p),w=m.path(b,x);y=i.insert(()=>w,":first-child").attr("transform",`translate(${-l/2}, ${s/2})`),v&&y.attr("style",v)}else y=Ri(i,l,s,p);return a&&y.attr("style",a),se(t,y),t.intersect=function(m){return Zt.polygon(t,p,m)},i}g(U4,"card");function X4(e,t){const{nodeStyles:r}=oe(t);t.label="";const a=e.insert("g").attr("class",ge(t)).attr("id",t.domId??t.id),{cssStyles:i}=t,n=Math.max(28,t.width??0),s=[{x:0,y:n/2},{x:n/2,y:0},{x:0,y:-n/2},{x:-n/2,y:0}],o=ee.svg(a),l=ie(t,{});t.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const u=Ae(s),h=o.path(u,l),d=a.insert(()=>h,":first-child");return i&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",i),r&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",r),t.width=28,t.height=28,t.intersect=function(f){return Zt.polygon(t,s,f)},a}g(X4,"choice");async function K4(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n,halfPadding:s}=await ve(e,t,ge(t)),o=n.width/2+s;let l;const{cssStyles:u}=t;if(t.look==="handDrawn"){const h=ee.svg(i),d=ie(t,{}),f=h.circle(0,0,o*2,d);l=i.insert(()=>f,":first-child"),l.attr("class","basic label-container").attr("style",Jr(u))}else l=i.insert("circle",":first-child").attr("class","basic label-container").attr("style",a).attr("r",o).attr("cx",0).attr("cy",0);return se(t,l),t.intersect=function(h){return G.info("Circle intersect",t,o,h),Zt.circle(t,o,h)},i}g(K4,"circle");function j4(e){const t=Math.cos(Math.PI/4),r=Math.sin(Math.PI/4),a=e*2,i={x:a/2*t,y:a/2*r},n={x:-(a/2)*t,y:a/2*r},s={x:-(a/2)*t,y:-(a/2)*r},o={x:a/2*t,y:-(a/2)*r};return`M ${n.x},${n.y} L ${o.x},${o.y}
                   M ${i.x},${i.y} L ${s.x},${s.y}`}g(j4,"createLine");function Q4(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r,t.label="";const i=e.insert("g").attr("class",ge(t)).attr("id",t.domId??t.id),n=Math.max(30,(t==null?void 0:t.width)??0),{cssStyles:s}=t,o=ee.svg(i),l=ie(t,{});t.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const u=o.circle(0,0,n*2,l),h=j4(n),d=o.path(h,l),f=i.insert(()=>u,":first-child");return f.insert(()=>d),s&&t.look!=="handDrawn"&&f.selectAll("path").attr("style",s),a&&t.look!=="handDrawn"&&f.selectAll("path").attr("style",a),se(t,f),t.intersect=function(p){return G.info("crossedCircle intersect",t,{radius:n,point:p}),Zt.circle(t,n,p)},i}g(Q4,"crossedCircle");function xi(e,t,r,a=100,i=0,n=180){const s=[],o=i*Math.PI/180,h=(n*Math.PI/180-o)/(a-1);for(let d=0;d<a;d++){const f=o+d*h,p=e+r*Math.cos(f),y=t+r*Math.sin(f);s.push({x:-p,y:-y})}return s}g(xi,"generateCirclePoints");async function Z4(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n,label:s}=await ve(e,t,ge(t)),o=n.width+(t.padding??0),l=n.height+(t.padding??0),u=Math.max(5,l*.1),{cssStyles:h}=t,d=[...xi(o/2,-l/2,u,30,-90,0),{x:-o/2-u,y:u},...xi(o/2+u*2,-u,u,20,-180,-270),...xi(o/2+u*2,u,u,20,-90,-180),{x:-o/2-u,y:-l/2},...xi(o/2,l/2,u,20,0,90)],f=[{x:o/2,y:-l/2-u},{x:-o/2,y:-l/2-u},...xi(o/2,-l/2,u,20,-90,0),{x:-o/2-u,y:-u},...xi(o/2+o*.1,-u,u,20,-180,-270),...xi(o/2+o*.1,u,u,20,-90,-180),{x:-o/2-u,y:l/2},...xi(o/2,l/2,u,20,0,90),{x:-o/2,y:l/2+u},{x:o/2,y:l/2+u}],p=ee.svg(i),y=ie(t,{fill:"none"});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const m=Ae(d).replace("Z",""),x=p.path(m,y),b=Ae(f),w=p.path(b,{...y}),C=i.insert("g",":first-child");return C.insert(()=>w,":first-child").attr("stroke-opacity",0),C.insert(()=>x,":first-child"),C.attr("class","text"),h&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",h),a&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",a),C.attr("transform",`translate(${u}, 0)`),s.attr("transform",`translate(${-o/2+u-(n.x-(n.left??0))},${-l/2+(t.padding??0)/2-(n.y-(n.top??0))})`),se(t,C),t.intersect=function(T){return Zt.polygon(t,f,T)},i}g(Z4,"curlyBraceLeft");function bi(e,t,r,a=100,i=0,n=180){const s=[],o=i*Math.PI/180,h=(n*Math.PI/180-o)/(a-1);for(let d=0;d<a;d++){const f=o+d*h,p=e+r*Math.cos(f),y=t+r*Math.sin(f);s.push({x:p,y})}return s}g(bi,"generateCirclePoints");async function J4(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n,label:s}=await ve(e,t,ge(t)),o=n.width+(t.padding??0),l=n.height+(t.padding??0),u=Math.max(5,l*.1),{cssStyles:h}=t,d=[...bi(o/2,-l/2,u,20,-90,0),{x:o/2+u,y:-u},...bi(o/2+u*2,-u,u,20,-180,-270),...bi(o/2+u*2,u,u,20,-90,-180),{x:o/2+u,y:l/2},...bi(o/2,l/2,u,20,0,90)],f=[{x:-o/2,y:-l/2-u},{x:o/2,y:-l/2-u},...bi(o/2,-l/2,u,20,-90,0),{x:o/2+u,y:-u},...bi(o/2+u*2,-u,u,20,-180,-270),...bi(o/2+u*2,u,u,20,-90,-180),{x:o/2+u,y:l/2},...bi(o/2,l/2,u,20,0,90),{x:o/2,y:l/2+u},{x:-o/2,y:l/2+u}],p=ee.svg(i),y=ie(t,{fill:"none"});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const m=Ae(d).replace("Z",""),x=p.path(m,y),b=Ae(f),w=p.path(b,{...y}),C=i.insert("g",":first-child");return C.insert(()=>w,":first-child").attr("stroke-opacity",0),C.insert(()=>x,":first-child"),C.attr("class","text"),h&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",h),a&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",a),C.attr("transform",`translate(${-u}, 0)`),s.attr("transform",`translate(${-o/2+(t.padding??0)/2-(n.x-(n.left??0))},${-l/2+(t.padding??0)/2-(n.y-(n.top??0))})`),se(t,C),t.intersect=function(T){return Zt.polygon(t,f,T)},i}g(J4,"curlyBraceRight");function Br(e,t,r,a=100,i=0,n=180){const s=[],o=i*Math.PI/180,h=(n*Math.PI/180-o)/(a-1);for(let d=0;d<a;d++){const f=o+d*h,p=e+r*Math.cos(f),y=t+r*Math.sin(f);s.push({x:-p,y:-y})}return s}g(Br,"generateCirclePoints");async function t5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n,label:s}=await ve(e,t,ge(t)),o=n.width+(t.padding??0),l=n.height+(t.padding??0),u=Math.max(5,l*.1),{cssStyles:h}=t,d=[...Br(o/2,-l/2,u,30,-90,0),{x:-o/2-u,y:u},...Br(o/2+u*2,-u,u,20,-180,-270),...Br(o/2+u*2,u,u,20,-90,-180),{x:-o/2-u,y:-l/2},...Br(o/2,l/2,u,20,0,90)],f=[...Br(-o/2+u+u/2,-l/2,u,20,-90,-180),{x:o/2-u/2,y:u},...Br(-o/2-u/2,-u,u,20,0,90),...Br(-o/2-u/2,u,u,20,-90,0),{x:o/2-u/2,y:-u},...Br(-o/2+u+u/2,l/2,u,30,-180,-270)],p=[{x:o/2,y:-l/2-u},{x:-o/2,y:-l/2-u},...Br(o/2,-l/2,u,20,-90,0),{x:-o/2-u,y:-u},...Br(o/2+u*2,-u,u,20,-180,-270),...Br(o/2+u*2,u,u,20,-90,-180),{x:-o/2-u,y:l/2},...Br(o/2,l/2,u,20,0,90),{x:-o/2,y:l/2+u},{x:o/2-u-u/2,y:l/2+u},...Br(-o/2+u+u/2,-l/2,u,20,-90,-180),{x:o/2-u/2,y:u},...Br(-o/2-u/2,-u,u,20,0,90),...Br(-o/2-u/2,u,u,20,-90,0),{x:o/2-u/2,y:-u},...Br(-o/2+u+u/2,l/2,u,30,-180,-270)],y=ee.svg(i),v=ie(t,{fill:"none"});t.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const x=Ae(d).replace("Z",""),b=y.path(x,v),C=Ae(f).replace("Z",""),T=y.path(C,v),k=Ae(p),S=y.path(k,{...v}),L=i.insert("g",":first-child");return L.insert(()=>S,":first-child").attr("stroke-opacity",0),L.insert(()=>b,":first-child"),L.insert(()=>T,":first-child"),L.attr("class","text"),h&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",h),a&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",a),L.attr("transform",`translate(${u-u/4}, 0)`),s.attr("transform",`translate(${-o/2+(t.padding??0)/2-(n.x-(n.left??0))},${-l/2+(t.padding??0)/2-(n.y-(n.top??0))})`),se(t,L),t.intersect=function(_){return Zt.polygon(t,p,_)},i}g(t5,"curlyBraces");async function e5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n}=await ve(e,t,ge(t)),s=80,o=20,l=Math.max(s,(n.width+(t.padding??0)*2)*1.25,(t==null?void 0:t.width)??0),u=Math.max(o,n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=u/2,{cssStyles:d}=t,f=ee.svg(i),p=ie(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const y=l,v=u,m=y-h,x=v/4,b=[{x:m,y:0},{x,y:0},{x:0,y:v/2},{x,y:v},{x:m,y:v},...x0(-m,-v/2,h,50,270,90)],w=Ae(b),C=f.path(w,p),T=i.insert(()=>C,":first-child");return T.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&T.selectChildren("path").attr("style",d),a&&t.look!=="handDrawn"&&T.selectChildren("path").attr("style",a),T.attr("transform",`translate(${-l/2}, ${-u/2})`),se(t,T),t.intersect=function(k){return Zt.polygon(t,b,k)},i}g(e5,"curvedTrapezoid");var hA=g((e,t,r,a,i,n)=>[`M${e},${t+n}`,`a${i},${n} 0,0,0 ${r},0`,`a${i},${n} 0,0,0 ${-r},0`,`l0,${a}`,`a${i},${n} 0,0,0 ${r},0`,`l0,${-a}`].join(" "),"createCylinderPathD"),dA=g((e,t,r,a,i,n)=>[`M${e},${t+n}`,`M${e+r},${t+n}`,`a${i},${n} 0,0,0 ${-r},0`,`l0,${a}`,`a${i},${n} 0,0,0 ${r},0`,`l0,${-a}`].join(" "),"createOuterCylinderPathD"),fA=g((e,t,r,a,i,n)=>[`M${e-r/2},${-a/2}`,`a${i},${n} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function r5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n,label:s}=await ve(e,t,ge(t)),o=Math.max(n.width+t.padding,t.width??0),l=o/2,u=l/(2.5+o/50),h=Math.max(n.height+u+t.padding,t.height??0);let d;const{cssStyles:f}=t;if(t.look==="handDrawn"){const p=ee.svg(i),y=dA(0,0,o,h,l,u),v=fA(0,u,o,h,l,u),m=p.path(y,ie(t,{})),x=p.path(v,ie(t,{fill:"none"}));d=i.insert(()=>x,":first-child"),d=i.insert(()=>m,":first-child"),d.attr("class","basic label-container"),f&&d.attr("style",f)}else{const p=hA(0,0,o,h,l,u);d=i.insert("path",":first-child").attr("d",p).attr("class","basic label-container").attr("style",Jr(f)).attr("style",a)}return d.attr("label-offset-y",u),d.attr("transform",`translate(${-o/2}, ${-(h/2+u)})`),se(t,d),s.attr("transform",`translate(${-(n.width/2)-(n.x-(n.left??0))}, ${-(n.height/2)+(t.padding??0)/1.5-(n.y-(n.top??0))})`),t.intersect=function(p){const y=Zt.rect(t,p),v=y.x-(t.x??0);if(l!=0&&(Math.abs(v)<(t.width??0)/2||Math.abs(v)==(t.width??0)/2&&Math.abs(y.y-(t.y??0))>(t.height??0)/2-u)){let m=u*u*(1-v*v/(l*l));m>0&&(m=Math.sqrt(m)),m=u-m,p.y-(t.y??0)>0&&(m=-m),y.y+=m}return y},i}g(r5,"cylinder");async function a5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n,label:s}=await ve(e,t,ge(t)),o=n.width+t.padding,l=n.height+t.padding,u=l*.2,h=-o/2,d=-l/2-u/2,{cssStyles:f}=t,p=ee.svg(i),y=ie(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const v=[{x:h,y:d+u},{x:-h,y:d+u},{x:-h,y:-d},{x:h,y:-d},{x:h,y:d},{x:-h,y:d},{x:-h,y:d+u}],m=p.polygon(v.map(b=>[b.x,b.y]),y),x=i.insert(()=>m,":first-child");return x.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",f),a&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",a),s.attr("transform",`translate(${h+(t.padding??0)/2-(n.x-(n.left??0))}, ${d+u+(t.padding??0)/2-(n.y-(n.top??0))})`),se(t,x),t.intersect=function(b){return Zt.rect(t,b)},i}g(a5,"dividedRectangle");async function i5(e,t){var f,p;const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n,halfPadding:s}=await ve(e,t,ge(t)),l=n.width/2+s+5,u=n.width/2+s;let h;const{cssStyles:d}=t;if(t.look==="handDrawn"){const y=ee.svg(i),v=ie(t,{roughness:.2,strokeWidth:2.5}),m=ie(t,{roughness:.2,strokeWidth:1.5}),x=y.circle(0,0,l*2,v),b=y.circle(0,0,u*2,m);h=i.insert("g",":first-child"),h.attr("class",Jr(t.cssClasses)).attr("style",Jr(d)),(f=h.node())==null||f.appendChild(x),(p=h.node())==null||p.appendChild(b)}else{h=i.insert("g",":first-child");const y=h.insert("circle",":first-child"),v=h.insert("circle");h.attr("class","basic label-container").attr("style",a),y.attr("class","outer-circle").attr("style",a).attr("r",l).attr("cx",0).attr("cy",0),v.attr("class","inner-circle").attr("style",a).attr("r",u).attr("cx",0).attr("cy",0)}return se(t,h),t.intersect=function(y){return G.info("DoubleCircle intersect",t,l,y),Zt.circle(t,l,y)},i}g(i5,"doublecircle");function n5(e,t,{config:{themeVariables:r}}){const{labelStyles:a,nodeStyles:i}=oe(t);t.label="",t.labelStyle=a;const n=e.insert("g").attr("class",ge(t)).attr("id",t.domId??t.id),s=7,{cssStyles:o}=t,l=ee.svg(n),{nodeBorder:u}=r,h=ie(t,{fillStyle:"solid"});t.look!=="handDrawn"&&(h.roughness=0);const d=l.circle(0,0,s*2,h),f=n.insert(()=>d,":first-child");return f.selectAll("path").attr("style",`fill: ${u} !important;`),o&&o.length>0&&t.look!=="handDrawn"&&f.selectAll("path").attr("style",o),i&&t.look!=="handDrawn"&&f.selectAll("path").attr("style",i),se(t,f),t.intersect=function(p){return G.info("filledCircle intersect",t,{radius:s,point:p}),Zt.circle(t,s,p)},n}g(n5,"filledCircle");async function s5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n,label:s}=await ve(e,t,ge(t)),o=n.width+(t.padding??0),l=o+n.height,u=o+n.height,h=[{x:0,y:-l},{x:u,y:-l},{x:u/2,y:0}],{cssStyles:d}=t,f=ee.svg(i),p=ie(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const y=Ae(h),v=f.path(y,p),m=i.insert(()=>v,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`);return d&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",d),a&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",a),t.width=o,t.height=l,se(t,m),s.attr("transform",`translate(${-n.width/2-(n.x-(n.left??0))}, ${-l/2+(t.padding??0)/2+(n.y-(n.top??0))})`),t.intersect=function(x){return G.info("Triangle intersect",t,h,x),Zt.polygon(t,h,x)},i}g(s5,"flippedTriangle");function o5(e,t,{dir:r,config:{state:a,themeVariables:i}}){const{nodeStyles:n}=oe(t);t.label="";const s=e.insert("g").attr("class",ge(t)).attr("id",t.domId??t.id),{cssStyles:o}=t;let l=Math.max(70,(t==null?void 0:t.width)??0),u=Math.max(10,(t==null?void 0:t.height)??0);r==="LR"&&(l=Math.max(10,(t==null?void 0:t.width)??0),u=Math.max(70,(t==null?void 0:t.height)??0));const h=-1*l/2,d=-1*u/2,f=ee.svg(s),p=ie(t,{stroke:i.lineColor,fill:i.lineColor});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const y=f.rectangle(h,d,l,u,p),v=s.insert(()=>y,":first-child");o&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",o),n&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",n),se(t,v);const m=(a==null?void 0:a.padding)??0;return t.width&&t.height&&(t.width+=m/2||0,t.height+=m/2||0),t.intersect=function(x){return Zt.rect(t,x)},s}g(o5,"forkJoin");async function l5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const i=80,n=50,{shapeSvg:s,bbox:o}=await ve(e,t,ge(t)),l=Math.max(i,o.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),u=Math.max(n,o.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=u/2,{cssStyles:d}=t,f=ee.svg(s),p=ie(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const y=[{x:-l/2,y:-u/2},{x:l/2-h,y:-u/2},...x0(-l/2+h,0,h,50,90,270),{x:l/2-h,y:u/2},{x:-l/2,y:u/2}],v=Ae(y),m=f.path(v,p),x=s.insert(()=>m,":first-child");return x.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",d),a&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",a),se(t,x),t.intersect=function(b){return G.info("Pill intersect",t,{radius:h,point:b}),Zt.polygon(t,y,b)},s}g(l5,"halfRoundedRectangle");var pA=g((e,t,r,a,i)=>[`M${e+i},${t}`,`L${e+r-i},${t}`,`L${e+r},${t-a/2}`,`L${e+r-i},${t-a}`,`L${e+i},${t-a}`,`L${e},${t-a/2}`,"Z"].join(" "),"createHexagonPathD");async function c5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n}=await ve(e,t,ge(t)),s=4,o=n.height+t.padding,l=o/s,u=n.width+2*l+t.padding,h=[{x:l,y:0},{x:u-l,y:0},{x:u,y:-o/2},{x:u-l,y:-o},{x:l,y:-o},{x:0,y:-o/2}];let d;const{cssStyles:f}=t;if(t.look==="handDrawn"){const p=ee.svg(i),y=ie(t,{}),v=pA(0,0,u,o,l),m=p.path(v,y);d=i.insert(()=>m,":first-child").attr("transform",`translate(${-u/2}, ${o/2})`),f&&d.attr("style",f)}else d=Ri(i,u,o,h);return a&&d.attr("style",a),t.width=u,t.height=o,se(t,d),t.intersect=function(p){return Zt.polygon(t,h,p)},i}g(c5,"hexagon");async function u5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.label="",t.labelStyle=r;const{shapeSvg:i}=await ve(e,t,ge(t)),n=Math.max(30,(t==null?void 0:t.width)??0),s=Math.max(30,(t==null?void 0:t.height)??0),{cssStyles:o}=t,l=ee.svg(i),u=ie(t,{});t.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const h=[{x:0,y:0},{x:n,y:0},{x:0,y:s},{x:n,y:s}],d=Ae(h),f=l.path(d,u),p=i.insert(()=>f,":first-child");return p.attr("class","basic label-container"),o&&t.look!=="handDrawn"&&p.selectChildren("path").attr("style",o),a&&t.look!=="handDrawn"&&p.selectChildren("path").attr("style",a),p.attr("transform",`translate(${-n/2}, ${-s/2})`),se(t,p),t.intersect=function(y){return G.info("Pill intersect",t,{points:h}),Zt.polygon(t,h,y)},i}g(u5,"hourglass");async function h5(e,t,{config:{themeVariables:r,flowchart:a}}){const{labelStyles:i}=oe(t);t.labelStyle=i;const n=t.assetHeight??48,s=t.assetWidth??48,o=Math.max(n,s),l=a==null?void 0:a.wrappingWidth;t.width=Math.max(o,l??0);const{shapeSvg:u,bbox:h,label:d}=await ve(e,t,"icon-shape default"),f=t.pos==="t",p=o,y=o,{nodeBorder:v}=r,{stylesMap:m}=Uo(t),x=-y/2,b=-p/2,w=t.label?8:0,C=ee.svg(u),T=ie(t,{stroke:"none",fill:"none"});t.look!=="handDrawn"&&(T.roughness=0,T.fillStyle="solid");const k=C.rectangle(x,b,y,p,T),S=Math.max(y,h.width),L=p+h.height+w,_=C.rectangle(-S/2,-L/2,S,L,{...T,fill:"transparent",stroke:"none"}),A=u.insert(()=>k,":first-child"),E=u.insert(()=>_);if(t.icon){const D=u.append("g");D.html(`<g>${await zn(t.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const R=D.node().getBBox(),O=R.width,P=R.height,$=R.x,M=R.y;D.attr("transform",`translate(${-O/2-$},${f?h.height/2+w/2-P/2-M:-h.height/2-w/2-P/2-M})`),D.attr("style",`color: ${m.get("stroke")??v};`)}return d.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${f?-L/2:L/2-h.height})`),A.attr("transform",`translate(0,${f?h.height/2+w/2:-h.height/2-w/2})`),se(t,E),t.intersect=function(D){if(G.info("iconSquare intersect",t,D),!t.label)return Zt.rect(t,D);const R=t.x??0,O=t.y??0,P=t.height??0;let $=[];return f?$=[{x:R-h.width/2,y:O-P/2},{x:R+h.width/2,y:O-P/2},{x:R+h.width/2,y:O-P/2+h.height+w},{x:R+y/2,y:O-P/2+h.height+w},{x:R+y/2,y:O+P/2},{x:R-y/2,y:O+P/2},{x:R-y/2,y:O-P/2+h.height+w},{x:R-h.width/2,y:O-P/2+h.height+w}]:$=[{x:R-y/2,y:O-P/2},{x:R+y/2,y:O-P/2},{x:R+y/2,y:O-P/2+p},{x:R+h.width/2,y:O-P/2+p},{x:R+h.width/2/2,y:O+P/2},{x:R-h.width/2,y:O+P/2},{x:R-h.width/2,y:O-P/2+p},{x:R-y/2,y:O-P/2+p}],Zt.polygon(t,$,D)},u}g(h5,"icon");async function d5(e,t,{config:{themeVariables:r,flowchart:a}}){const{labelStyles:i}=oe(t);t.labelStyle=i;const n=t.assetHeight??48,s=t.assetWidth??48,o=Math.max(n,s),l=a==null?void 0:a.wrappingWidth;t.width=Math.max(o,l??0);const{shapeSvg:u,bbox:h,label:d}=await ve(e,t,"icon-shape default"),f=20,p=t.label?8:0,y=t.pos==="t",{nodeBorder:v,mainBkg:m}=r,{stylesMap:x}=Uo(t),b=ee.svg(u),w=ie(t,{});t.look!=="handDrawn"&&(w.roughness=0,w.fillStyle="solid");const C=x.get("fill");w.stroke=C??m;const T=u.append("g");t.icon&&T.html(`<g>${await zn(t.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const k=T.node().getBBox(),S=k.width,L=k.height,_=k.x,A=k.y,E=Math.max(S,L)*Math.SQRT2+f*2,D=b.circle(0,0,E,w),R=Math.max(E,h.width),O=E+h.height+p,P=b.rectangle(-R/2,-O/2,R,O,{...w,fill:"transparent",stroke:"none"}),$=u.insert(()=>D,":first-child"),M=u.insert(()=>P);return T.attr("transform",`translate(${-S/2-_},${y?h.height/2+p/2-L/2-A:-h.height/2-p/2-L/2-A})`),T.attr("style",`color: ${x.get("stroke")??v};`),d.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${y?-O/2:O/2-h.height})`),$.attr("transform",`translate(0,${y?h.height/2+p/2:-h.height/2-p/2})`),se(t,M),t.intersect=function(I){return G.info("iconSquare intersect",t,I),Zt.rect(t,I)},u}g(d5,"iconCircle");async function f5(e,t,{config:{themeVariables:r,flowchart:a}}){const{labelStyles:i}=oe(t);t.labelStyle=i;const n=t.assetHeight??48,s=t.assetWidth??48,o=Math.max(n,s),l=a==null?void 0:a.wrappingWidth;t.width=Math.max(o,l??0);const{shapeSvg:u,bbox:h,halfPadding:d,label:f}=await ve(e,t,"icon-shape default"),p=t.pos==="t",y=o+d*2,v=o+d*2,{nodeBorder:m,mainBkg:x}=r,{stylesMap:b}=Uo(t),w=-v/2,C=-y/2,T=t.label?8:0,k=ee.svg(u),S=ie(t,{});t.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const L=b.get("fill");S.stroke=L??x;const _=k.path(Bi(w,C,v,y,5),S),A=Math.max(v,h.width),E=y+h.height+T,D=k.rectangle(-A/2,-E/2,A,E,{...S,fill:"transparent",stroke:"none"}),R=u.insert(()=>_,":first-child").attr("class","icon-shape2"),O=u.insert(()=>D);if(t.icon){const P=u.append("g");P.html(`<g>${await zn(t.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const $=P.node().getBBox(),M=$.width,I=$.height,F=$.x,V=$.y;P.attr("transform",`translate(${-M/2-F},${p?h.height/2+T/2-I/2-V:-h.height/2-T/2-I/2-V})`),P.attr("style",`color: ${b.get("stroke")??m};`)}return f.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${p?-E/2:E/2-h.height})`),R.attr("transform",`translate(0,${p?h.height/2+T/2:-h.height/2-T/2})`),se(t,O),t.intersect=function(P){if(G.info("iconSquare intersect",t,P),!t.label)return Zt.rect(t,P);const $=t.x??0,M=t.y??0,I=t.height??0;let F=[];return p?F=[{x:$-h.width/2,y:M-I/2},{x:$+h.width/2,y:M-I/2},{x:$+h.width/2,y:M-I/2+h.height+T},{x:$+v/2,y:M-I/2+h.height+T},{x:$+v/2,y:M+I/2},{x:$-v/2,y:M+I/2},{x:$-v/2,y:M-I/2+h.height+T},{x:$-h.width/2,y:M-I/2+h.height+T}]:F=[{x:$-v/2,y:M-I/2},{x:$+v/2,y:M-I/2},{x:$+v/2,y:M-I/2+y},{x:$+h.width/2,y:M-I/2+y},{x:$+h.width/2/2,y:M+I/2},{x:$-h.width/2,y:M+I/2},{x:$-h.width/2,y:M-I/2+y},{x:$-v/2,y:M-I/2+y}],Zt.polygon(t,F,P)},u}g(f5,"iconRounded");async function p5(e,t,{config:{themeVariables:r,flowchart:a}}){const{labelStyles:i}=oe(t);t.labelStyle=i;const n=t.assetHeight??48,s=t.assetWidth??48,o=Math.max(n,s),l=a==null?void 0:a.wrappingWidth;t.width=Math.max(o,l??0);const{shapeSvg:u,bbox:h,halfPadding:d,label:f}=await ve(e,t,"icon-shape default"),p=t.pos==="t",y=o+d*2,v=o+d*2,{nodeBorder:m,mainBkg:x}=r,{stylesMap:b}=Uo(t),w=-v/2,C=-y/2,T=t.label?8:0,k=ee.svg(u),S=ie(t,{});t.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const L=b.get("fill");S.stroke=L??x;const _=k.path(Bi(w,C,v,y,.1),S),A=Math.max(v,h.width),E=y+h.height+T,D=k.rectangle(-A/2,-E/2,A,E,{...S,fill:"transparent",stroke:"none"}),R=u.insert(()=>_,":first-child"),O=u.insert(()=>D);if(t.icon){const P=u.append("g");P.html(`<g>${await zn(t.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const $=P.node().getBBox(),M=$.width,I=$.height,F=$.x,V=$.y;P.attr("transform",`translate(${-M/2-F},${p?h.height/2+T/2-I/2-V:-h.height/2-T/2-I/2-V})`),P.attr("style",`color: ${b.get("stroke")??m};`)}return f.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${p?-E/2:E/2-h.height})`),R.attr("transform",`translate(0,${p?h.height/2+T/2:-h.height/2-T/2})`),se(t,O),t.intersect=function(P){if(G.info("iconSquare intersect",t,P),!t.label)return Zt.rect(t,P);const $=t.x??0,M=t.y??0,I=t.height??0;let F=[];return p?F=[{x:$-h.width/2,y:M-I/2},{x:$+h.width/2,y:M-I/2},{x:$+h.width/2,y:M-I/2+h.height+T},{x:$+v/2,y:M-I/2+h.height+T},{x:$+v/2,y:M+I/2},{x:$-v/2,y:M+I/2},{x:$-v/2,y:M-I/2+h.height+T},{x:$-h.width/2,y:M-I/2+h.height+T}]:F=[{x:$-v/2,y:M-I/2},{x:$+v/2,y:M-I/2},{x:$+v/2,y:M-I/2+y},{x:$+h.width/2,y:M-I/2+y},{x:$+h.width/2/2,y:M+I/2},{x:$-h.width/2,y:M+I/2},{x:$-h.width/2,y:M-I/2+y},{x:$-v/2,y:M-I/2+y}],Zt.polygon(t,F,P)},u}g(p5,"iconSquare");async function g5(e,t,{config:{flowchart:r}}){const a=new Image;a.src=(t==null?void 0:t.img)??"",await a.decode();const i=Number(a.naturalWidth.toString().replace("px","")),n=Number(a.naturalHeight.toString().replace("px",""));t.imageAspectRatio=i/n;const{labelStyles:s}=oe(t);t.labelStyle=s;const o=r==null?void 0:r.wrappingWidth;t.defaultWidth=r==null?void 0:r.wrappingWidth;const l=Math.max(t.label?o??0:0,(t==null?void 0:t.assetWidth)??i),u=t.constraint==="on"&&t!=null&&t.assetHeight?t.assetHeight*t.imageAspectRatio:l,h=t.constraint==="on"?u/t.imageAspectRatio:(t==null?void 0:t.assetHeight)??n;t.width=Math.max(u,o??0);const{shapeSvg:d,bbox:f,label:p}=await ve(e,t,"image-shape default"),y=t.pos==="t",v=-u/2,m=-h/2,x=t.label?8:0,b=ee.svg(d),w=ie(t,{});t.look!=="handDrawn"&&(w.roughness=0,w.fillStyle="solid");const C=b.rectangle(v,m,u,h,w),T=Math.max(u,f.width),k=h+f.height+x,S=b.rectangle(-T/2,-k/2,T,k,{...w,fill:"none",stroke:"none"}),L=d.insert(()=>C,":first-child"),_=d.insert(()=>S);if(t.img){const A=d.append("image");A.attr("href",t.img),A.attr("width",u),A.attr("height",h),A.attr("preserveAspectRatio","none"),A.attr("transform",`translate(${-u/2},${y?k/2-h:-k/2})`)}return p.attr("transform",`translate(${-f.width/2-(f.x-(f.left??0))},${y?-h/2-f.height/2-x/2:h/2-f.height/2+x/2})`),L.attr("transform",`translate(0,${y?f.height/2+x/2:-f.height/2-x/2})`),se(t,_),t.intersect=function(A){if(G.info("iconSquare intersect",t,A),!t.label)return Zt.rect(t,A);const E=t.x??0,D=t.y??0,R=t.height??0;let O=[];return y?O=[{x:E-f.width/2,y:D-R/2},{x:E+f.width/2,y:D-R/2},{x:E+f.width/2,y:D-R/2+f.height+x},{x:E+u/2,y:D-R/2+f.height+x},{x:E+u/2,y:D+R/2},{x:E-u/2,y:D+R/2},{x:E-u/2,y:D-R/2+f.height+x},{x:E-f.width/2,y:D-R/2+f.height+x}]:O=[{x:E-u/2,y:D-R/2},{x:E+u/2,y:D-R/2},{x:E+u/2,y:D-R/2+h},{x:E+f.width/2,y:D-R/2+h},{x:E+f.width/2/2,y:D+R/2},{x:E-f.width/2,y:D+R/2},{x:E-f.width/2,y:D-R/2+h},{x:E-u/2,y:D-R/2+h}],Zt.polygon(t,O,A)},d}g(g5,"imageSquare");async function y5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n}=await ve(e,t,ge(t)),s=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),o=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=[{x:0,y:0},{x:s,y:0},{x:s+3*o/6,y:-o},{x:-3*o/6,y:-o}];let u;const{cssStyles:h}=t;if(t.look==="handDrawn"){const d=ee.svg(i),f=ie(t,{}),p=Ae(l),y=d.path(p,f);u=i.insert(()=>y,":first-child").attr("transform",`translate(${-s/2}, ${o/2})`),h&&u.attr("style",h)}else u=Ri(i,s,o,l);return a&&u.attr("style",a),t.width=s,t.height=o,se(t,u),t.intersect=function(d){return Zt.polygon(t,l,d)},i}g(y5,"inv_trapezoid");async function dc(e,t,r){const{labelStyles:a,nodeStyles:i}=oe(t);t.labelStyle=a;const{shapeSvg:n,bbox:s}=await ve(e,t,ge(t)),o=Math.max(s.width+r.labelPaddingX*2,(t==null?void 0:t.width)||0),l=Math.max(s.height+r.labelPaddingY*2,(t==null?void 0:t.height)||0),u=-o/2,h=-l/2;let d,{rx:f,ry:p}=t;const{cssStyles:y}=t;if(r!=null&&r.rx&&r.ry&&(f=r.rx,p=r.ry),t.look==="handDrawn"){const v=ee.svg(n),m=ie(t,{}),x=f||p?v.path(Bi(u,h,o,l,f||0),m):v.rectangle(u,h,o,l,m);d=n.insert(()=>x,":first-child"),d.attr("class","basic label-container").attr("style",Jr(y))}else d=n.insert("rect",":first-child"),d.attr("class","basic label-container").attr("style",i).attr("rx",Jr(f)).attr("ry",Jr(p)).attr("x",u).attr("y",h).attr("width",o).attr("height",l);return se(t,d),t.intersect=function(v){return Zt.rect(t,v)},n}g(dc,"drawRect");async function v5(e,t){const{shapeSvg:r,bbox:a,label:i}=await ve(e,t,"label"),n=r.insert("rect",":first-child");return n.attr("width",.1).attr("height",.1),r.attr("class","label edgeLabel"),i.attr("transform",`translate(${-(a.width/2)-(a.x-(a.left??0))}, ${-(a.height/2)-(a.y-(a.top??0))})`),se(t,n),t.intersect=function(l){return Zt.rect(t,l)},r}g(v5,"labelRect");async function m5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n}=await ve(e,t,ge(t)),s=Math.max(n.width+(t.padding??0),(t==null?void 0:t.width)??0),o=Math.max(n.height+(t.padding??0),(t==null?void 0:t.height)??0),l=[{x:0,y:0},{x:s+3*o/6,y:0},{x:s,y:-o},{x:-(3*o)/6,y:-o}];let u;const{cssStyles:h}=t;if(t.look==="handDrawn"){const d=ee.svg(i),f=ie(t,{}),p=Ae(l),y=d.path(p,f);u=i.insert(()=>y,":first-child").attr("transform",`translate(${-s/2}, ${o/2})`),h&&u.attr("style",h)}else u=Ri(i,s,o,l);return a&&u.attr("style",a),t.width=s,t.height=o,se(t,u),t.intersect=function(d){return Zt.polygon(t,l,d)},i}g(m5,"lean_left");async function x5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n}=await ve(e,t,ge(t)),s=Math.max(n.width+(t.padding??0),(t==null?void 0:t.width)??0),o=Math.max(n.height+(t.padding??0),(t==null?void 0:t.height)??0),l=[{x:-3*o/6,y:0},{x:s,y:0},{x:s+3*o/6,y:-o},{x:0,y:-o}];let u;const{cssStyles:h}=t;if(t.look==="handDrawn"){const d=ee.svg(i),f=ie(t,{}),p=Ae(l),y=d.path(p,f);u=i.insert(()=>y,":first-child").attr("transform",`translate(${-s/2}, ${o/2})`),h&&u.attr("style",h)}else u=Ri(i,s,o,l);return a&&u.attr("style",a),t.width=s,t.height=o,se(t,u),t.intersect=function(d){return Zt.polygon(t,l,d)},i}g(x5,"lean_right");function b5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.label="",t.labelStyle=r;const i=e.insert("g").attr("class",ge(t)).attr("id",t.domId??t.id),{cssStyles:n}=t,s=Math.max(35,(t==null?void 0:t.width)??0),o=Math.max(35,(t==null?void 0:t.height)??0),l=7,u=[{x:s,y:0},{x:0,y:o+l/2},{x:s-2*l,y:o+l/2},{x:0,y:2*o},{x:s,y:o-l/2},{x:2*l,y:o-l/2}],h=ee.svg(i),d=ie(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const f=Ae(u),p=h.path(f,d),y=i.insert(()=>p,":first-child");return n&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",n),a&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",a),y.attr("transform",`translate(-${s/2},${-o})`),se(t,y),t.intersect=function(v){return G.info("lightningBolt intersect",t,v),Zt.polygon(t,u,v)},i}g(b5,"lightningBolt");var gA=g((e,t,r,a,i,n,s)=>[`M${e},${t+n}`,`a${i},${n} 0,0,0 ${r},0`,`a${i},${n} 0,0,0 ${-r},0`,`l0,${a}`,`a${i},${n} 0,0,0 ${r},0`,`l0,${-a}`,`M${e},${t+n+s}`,`a${i},${n} 0,0,0 ${r},0`].join(" "),"createCylinderPathD"),yA=g((e,t,r,a,i,n,s)=>[`M${e},${t+n}`,`M${e+r},${t+n}`,`a${i},${n} 0,0,0 ${-r},0`,`l0,${a}`,`a${i},${n} 0,0,0 ${r},0`,`l0,${-a}`,`M${e},${t+n+s}`,`a${i},${n} 0,0,0 ${r},0`].join(" "),"createOuterCylinderPathD"),vA=g((e,t,r,a,i,n)=>[`M${e-r/2},${-a/2}`,`a${i},${n} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function w5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n,label:s}=await ve(e,t,ge(t)),o=Math.max(n.width+(t.padding??0),t.width??0),l=o/2,u=l/(2.5+o/50),h=Math.max(n.height+u+(t.padding??0),t.height??0),d=h*.1;let f;const{cssStyles:p}=t;if(t.look==="handDrawn"){const y=ee.svg(i),v=yA(0,0,o,h,l,u,d),m=vA(0,u,o,h,l,u),x=ie(t,{}),b=y.path(v,x),w=y.path(m,x);i.insert(()=>w,":first-child").attr("class","line"),f=i.insert(()=>b,":first-child"),f.attr("class","basic label-container"),p&&f.attr("style",p)}else{const y=gA(0,0,o,h,l,u,d);f=i.insert("path",":first-child").attr("d",y).attr("class","basic label-container").attr("style",Jr(p)).attr("style",a)}return f.attr("label-offset-y",u),f.attr("transform",`translate(${-o/2}, ${-(h/2+u)})`),se(t,f),s.attr("transform",`translate(${-(n.width/2)-(n.x-(n.left??0))}, ${-(n.height/2)+u-(n.y-(n.top??0))})`),t.intersect=function(y){const v=Zt.rect(t,y),m=v.x-(t.x??0);if(l!=0&&(Math.abs(m)<(t.width??0)/2||Math.abs(m)==(t.width??0)/2&&Math.abs(v.y-(t.y??0))>(t.height??0)/2-u)){let x=u*u*(1-m*m/(l*l));x>0&&(x=Math.sqrt(x)),x=u-x,y.y-(t.y??0)>0&&(x=-x),v.y+=x}return v},i}g(w5,"linedCylinder");async function k5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n,label:s}=await ve(e,t,ge(t)),o=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=l/4,h=l+u,{cssStyles:d}=t,f=ee.svg(i),p=ie(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const y=[{x:-o/2-o/2*.1,y:-h/2},{x:-o/2-o/2*.1,y:h/2},...Zi(-o/2-o/2*.1,h/2,o/2+o/2*.1,h/2,u,.8),{x:o/2+o/2*.1,y:-h/2},{x:-o/2-o/2*.1,y:-h/2},{x:-o/2,y:-h/2},{x:-o/2,y:h/2*1.1},{x:-o/2,y:-h/2}],v=f.polygon(y.map(x=>[x.x,x.y]),p),m=i.insert(()=>v,":first-child");return m.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",d),a&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",a),m.attr("transform",`translate(0,${-u/2})`),s.attr("transform",`translate(${-o/2+(t.padding??0)+o/2*.1/2-(n.x-(n.left??0))},${-l/2+(t.padding??0)-u/2-(n.y-(n.top??0))})`),se(t,m),t.intersect=function(x){return Zt.polygon(t,y,x)},i}g(k5,"linedWaveEdgedRect");async function T5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n,label:s}=await ve(e,t,ge(t)),o=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=5,h=-o/2,d=-l/2,{cssStyles:f}=t,p=ee.svg(i),y=ie(t,{}),v=[{x:h-u,y:d+u},{x:h-u,y:d+l+u},{x:h+o-u,y:d+l+u},{x:h+o-u,y:d+l},{x:h+o,y:d+l},{x:h+o,y:d+l-u},{x:h+o+u,y:d+l-u},{x:h+o+u,y:d-u},{x:h+u,y:d-u},{x:h+u,y:d},{x:h,y:d},{x:h,y:d+u}],m=[{x:h,y:d+u},{x:h+o-u,y:d+u},{x:h+o-u,y:d+l},{x:h+o,y:d+l},{x:h+o,y:d},{x:h,y:d}];t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const x=Ae(v),b=p.path(x,y),w=Ae(m),C=p.path(w,{...y,fill:"none"}),T=i.insert(()=>C,":first-child");return T.insert(()=>b,":first-child"),T.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",f),a&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",a),s.attr("transform",`translate(${-(n.width/2)-u-(n.x-(n.left??0))}, ${-(n.height/2)+u-(n.y-(n.top??0))})`),se(t,T),t.intersect=function(k){return Zt.polygon(t,v,k)},i}g(T5,"multiRect");async function C5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n,label:s}=await ve(e,t,ge(t)),o=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=l/4,h=l+u,d=-o/2,f=-h/2,p=5,{cssStyles:y}=t,v=Zi(d-p,f+h+p,d+o-p,f+h+p,u,.8),m=v==null?void 0:v[v.length-1],x=[{x:d-p,y:f+p},{x:d-p,y:f+h+p},...v,{x:d+o-p,y:m.y-p},{x:d+o,y:m.y-p},{x:d+o,y:m.y-2*p},{x:d+o+p,y:m.y-2*p},{x:d+o+p,y:f-p},{x:d+p,y:f-p},{x:d+p,y:f},{x:d,y:f},{x:d,y:f+p}],b=[{x:d,y:f+p},{x:d+o-p,y:f+p},{x:d+o-p,y:m.y-p},{x:d+o,y:m.y-p},{x:d+o,y:f},{x:d,y:f}],w=ee.svg(i),C=ie(t,{});t.look!=="handDrawn"&&(C.roughness=0,C.fillStyle="solid");const T=Ae(x),k=w.path(T,C),S=Ae(b),L=w.path(S,C),_=i.insert(()=>k,":first-child");return _.insert(()=>L),_.attr("class","basic label-container"),y&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",y),a&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",a),_.attr("transform",`translate(0,${-u/2})`),s.attr("transform",`translate(${-(n.width/2)-p-(n.x-(n.left??0))}, ${-(n.height/2)+p-u/2-(n.y-(n.top??0))})`),se(t,_),t.intersect=function(A){return Zt.polygon(t,x,A)},i}g(C5,"multiWaveEdgedRectangle");async function S5(e,t,{config:{themeVariables:r}}){var x;const{labelStyles:a,nodeStyles:i}=oe(t);t.labelStyle=a,t.useHtmlLabels||((x=$e().flowchart)==null?void 0:x.htmlLabels)!==!1||(t.centerLabel=!0);const{shapeSvg:s,bbox:o}=await ve(e,t,ge(t)),l=Math.max(o.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),u=Math.max(o.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=-l/2,d=-u/2,{cssStyles:f}=t,p=ee.svg(s),y=ie(t,{fill:r.noteBkgColor,stroke:r.noteBorderColor});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const v=p.rectangle(h,d,l,u,y),m=s.insert(()=>v,":first-child");return m.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",f),i&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",i),se(t,m),t.intersect=function(b){return Zt.rect(t,b)},s}g(S5,"note");var mA=g((e,t,r)=>[`M${e+r/2},${t}`,`L${e+r},${t-r/2}`,`L${e+r/2},${t-r}`,`L${e},${t-r/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function E5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n}=await ve(e,t,ge(t)),s=n.width+t.padding,o=n.height+t.padding,l=s+o,u=[{x:l/2,y:0},{x:l,y:-l/2},{x:l/2,y:-l},{x:0,y:-l/2}];let h;const{cssStyles:d}=t;if(t.look==="handDrawn"){const f=ee.svg(i),p=ie(t,{}),y=mA(0,0,l),v=f.path(y,p);h=i.insert(()=>v,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`),d&&h.attr("style",d)}else h=Ri(i,l,l,u);return a&&h.attr("style",a),se(t,h),t.intersect=function(f){return G.debug(`APA12 Intersect called SPLIT
point:`,f,`
node:
`,t,`
res:`,Zt.polygon(t,u,f)),Zt.polygon(t,u,f)},i}g(E5,"question");async function _5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n,label:s}=await ve(e,t,ge(t)),o=Math.max(n.width+(t.padding??0),(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0),(t==null?void 0:t.height)??0),u=-o/2,h=-l/2,d=h/2,f=[{x:u+d,y:h},{x:u,y:0},{x:u+d,y:-h},{x:-u,y:-h},{x:-u,y:h}],{cssStyles:p}=t,y=ee.svg(i),v=ie(t,{});t.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const m=Ae(f),x=y.path(m,v),b=i.insert(()=>x,":first-child");return b.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",p),a&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",a),b.attr("transform",`translate(${-d/2},0)`),s.attr("transform",`translate(${-d/2-n.width/2-(n.x-(n.left??0))}, ${-(n.height/2)-(n.y-(n.top??0))})`),se(t,b),t.intersect=function(w){return Zt.polygon(t,f,w)},i}g(_5,"rect_left_inv_arrow");async function A5(e,t){var L,_;const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;let i;t.cssClasses?i="node "+t.cssClasses:i="node default";const n=e.insert("g").attr("class",i).attr("id",t.domId||t.id),s=n.insert("g"),o=n.insert("g").attr("class","label").attr("style",a),l=t.description,u=t.label,h=o.node().appendChild(await In(u,t.labelStyle,!0,!0));let d={width:0,height:0};if(Oe((_=(L=dt())==null?void 0:L.flowchart)==null?void 0:_.htmlLabels)){const A=h.children[0],E=It(h);d=A.getBoundingClientRect(),E.attr("width",d.width),E.attr("height",d.height)}G.info("Text 2",l);const f=l||[],p=h.getBBox(),y=o.node().appendChild(await In(f.join?f.join("<br/>"):f,t.labelStyle,!0,!0)),v=y.children[0],m=It(y);d=v.getBoundingClientRect(),m.attr("width",d.width),m.attr("height",d.height);const x=(t.padding||0)/2;It(y).attr("transform","translate( "+(d.width>p.width?0:(p.width-d.width)/2)+", "+(p.height+x+5)+")"),It(h).attr("transform","translate( "+(d.width<p.width?0:-(p.width-d.width)/2)+", 0)"),d=o.node().getBBox(),o.attr("transform","translate("+-d.width/2+", "+(-d.height/2-x+3)+")");const b=d.width+(t.padding||0),w=d.height+(t.padding||0),C=-d.width/2-x,T=-d.height/2-x;let k,S;if(t.look==="handDrawn"){const A=ee.svg(n),E=ie(t,{}),D=A.path(Bi(C,T,b,w,t.rx||0),E),R=A.line(-d.width/2-x,-d.height/2-x+p.height+x,d.width/2+x,-d.height/2-x+p.height+x,E);S=n.insert(()=>(G.debug("Rough node insert CXC",D),R),":first-child"),k=n.insert(()=>(G.debug("Rough node insert CXC",D),D),":first-child")}else k=s.insert("rect",":first-child"),S=s.insert("line"),k.attr("class","outer title-state").attr("style",a).attr("x",-d.width/2-x).attr("y",-d.height/2-x).attr("width",d.width+(t.padding||0)).attr("height",d.height+(t.padding||0)),S.attr("class","divider").attr("x1",-d.width/2-x).attr("x2",d.width/2+x).attr("y1",-d.height/2-x+p.height+x).attr("y2",-d.height/2-x+p.height+x);return se(t,k),t.intersect=function(A){return Zt.rect(t,A)},n}g(A5,"rectWithTitle");async function L5(e,t){const r={rx:5,ry:5,labelPaddingX:((t==null?void 0:t.padding)||0)*1,labelPaddingY:((t==null?void 0:t.padding)||0)*1};return dc(e,t,r)}g(L5,"roundedRect");async function D5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n,label:s}=await ve(e,t,ge(t)),o=(t==null?void 0:t.padding)??0,l=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),u=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=-n.width/2-o,d=-n.height/2-o,{cssStyles:f}=t,p=ee.svg(i),y=ie(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const v=[{x:h,y:d},{x:h+l+8,y:d},{x:h+l+8,y:d+u},{x:h-8,y:d+u},{x:h-8,y:d},{x:h,y:d},{x:h,y:d+u}],m=p.polygon(v.map(b=>[b.x,b.y]),y),x=i.insert(()=>m,":first-child");return x.attr("class","basic label-container").attr("style",Jr(f)),a&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",a),f&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",a),s.attr("transform",`translate(${-l/2+4+(t.padding??0)-(n.x-(n.left??0))},${-u/2+(t.padding??0)-(n.y-(n.top??0))})`),se(t,x),t.intersect=function(b){return Zt.rect(t,b)},i}g(D5,"shadedProcess");async function B5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n,label:s}=await ve(e,t,ge(t)),o=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=-o/2,h=-l/2,{cssStyles:d}=t,f=ee.svg(i),p=ie(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const y=[{x:u,y:h},{x:u,y:h+l},{x:u+o,y:h+l},{x:u+o,y:h-l/2}],v=Ae(y),m=f.path(v,p),x=i.insert(()=>m,":first-child");return x.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",d),a&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",a),x.attr("transform",`translate(0, ${l/4})`),s.attr("transform",`translate(${-o/2+(t.padding??0)-(n.x-(n.left??0))}, ${-l/4+(t.padding??0)-(n.y-(n.top??0))})`),se(t,x),t.intersect=function(b){return Zt.polygon(t,y,b)},i}g(B5,"slopedRect");async function R5(e,t){const r={rx:0,ry:0,labelPaddingX:((t==null?void 0:t.padding)||0)*2,labelPaddingY:((t==null?void 0:t.padding)||0)*1};return dc(e,t,r)}g(R5,"squareRect");async function I5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n}=await ve(e,t,ge(t)),s=n.height+t.padding,o=n.width+s/4+t.padding;let l;const{cssStyles:u}=t;if(t.look==="handDrawn"){const h=ee.svg(i),d=ie(t,{}),f=Bi(-o/2,-s/2,o,s,s/2),p=h.path(f,d);l=i.insert(()=>p,":first-child"),l.attr("class","basic label-container").attr("style",Jr(u))}else l=i.insert("rect",":first-child"),l.attr("class","basic label-container").attr("style",a).attr("rx",s/2).attr("ry",s/2).attr("x",-o/2).attr("y",-s/2).attr("width",o).attr("height",s);return se(t,l),t.intersect=function(h){return Zt.rect(t,h)},i}g(I5,"stadium");async function P5(e,t){return dc(e,t,{rx:5,ry:5})}g(P5,"state");function N5(e,t,{config:{themeVariables:r}}){const{labelStyles:a,nodeStyles:i}=oe(t);t.labelStyle=a;const{cssStyles:n}=t,{lineColor:s,stateBorder:o,nodeBorder:l}=r,u=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),h=ee.svg(u),d=ie(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const f=h.circle(0,0,14,{...d,stroke:s,strokeWidth:2}),p=o??l,y=h.circle(0,0,5,{...d,fill:p,stroke:p,strokeWidth:2,fillStyle:"solid"}),v=u.insert(()=>f,":first-child");return v.insert(()=>y),n&&v.selectAll("path").attr("style",n),i&&v.selectAll("path").attr("style",i),se(t,v),t.intersect=function(m){return Zt.circle(t,7,m)},u}g(N5,"stateEnd");function M5(e,t,{config:{themeVariables:r}}){const{lineColor:a}=r,i=e.insert("g").attr("class","node default").attr("id",t.domId||t.id);let n;if(t.look==="handDrawn"){const o=ee.svg(i).circle(0,0,14,Z_(a));n=i.insert(()=>o),n.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else n=i.insert("circle",":first-child"),n.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return se(t,n),t.intersect=function(s){return Zt.circle(t,7,s)},i}g(M5,"stateStart");async function F5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n}=await ve(e,t,ge(t)),s=((t==null?void 0:t.padding)||0)/2,o=n.width+t.padding,l=n.height+t.padding,u=-n.width/2-s,h=-n.height/2-s,d=[{x:0,y:0},{x:o,y:0},{x:o,y:-l},{x:0,y:-l},{x:0,y:0},{x:-8,y:0},{x:o+8,y:0},{x:o+8,y:-l},{x:-8,y:-l},{x:-8,y:0}];if(t.look==="handDrawn"){const f=ee.svg(i),p=ie(t,{}),y=f.rectangle(u-8,h,o+16,l,p),v=f.line(u,h,u,h+l,p),m=f.line(u+o,h,u+o,h+l,p);i.insert(()=>v,":first-child"),i.insert(()=>m,":first-child");const x=i.insert(()=>y,":first-child"),{cssStyles:b}=t;x.attr("class","basic label-container").attr("style",Jr(b)),se(t,x)}else{const f=Ri(i,o,l,d);a&&f.attr("style",a),se(t,f)}return t.intersect=function(f){return Zt.polygon(t,d,f)},i}g(F5,"subroutine");async function O5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n}=await ve(e,t,ge(t)),s=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),o=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=-s/2,u=-o/2,h=.2*o,d=.2*o,{cssStyles:f}=t,p=ee.svg(i),y=ie(t,{}),v=[{x:l-h/2,y:u},{x:l+s+h/2,y:u},{x:l+s+h/2,y:u+o},{x:l-h/2,y:u+o}],m=[{x:l+s-h/2,y:u+o},{x:l+s+h/2,y:u+o},{x:l+s+h/2,y:u+o-d}];t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const x=Ae(v),b=p.path(x,y),w=Ae(m),C=p.path(w,{...y,fillStyle:"solid"}),T=i.insert(()=>C,":first-child");return T.insert(()=>b,":first-child"),T.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",f),a&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",a),se(t,T),t.intersect=function(k){return Zt.polygon(t,v,k)},i}g(O5,"taggedRect");async function $5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n,label:s}=await ve(e,t,ge(t)),o=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=l/4,h=.2*o,d=.2*l,f=l+u,{cssStyles:p}=t,y=ee.svg(i),v=ie(t,{});t.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const m=[{x:-o/2-o/2*.1,y:f/2},...Zi(-o/2-o/2*.1,f/2,o/2+o/2*.1,f/2,u,.8),{x:o/2+o/2*.1,y:-f/2},{x:-o/2-o/2*.1,y:-f/2}],x=-o/2+o/2*.1,b=-f/2-d*.4,w=[{x:x+o-h,y:(b+l)*1.4},{x:x+o,y:b+l-d},{x:x+o,y:(b+l)*.9},...Zi(x+o,(b+l)*1.3,x+o-h,(b+l)*1.5,-l*.03,.5)],C=Ae(m),T=y.path(C,v),k=Ae(w),S=y.path(k,{...v,fillStyle:"solid"}),L=i.insert(()=>S,":first-child");return L.insert(()=>T,":first-child"),L.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",p),a&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",a),L.attr("transform",`translate(0,${-u/2})`),s.attr("transform",`translate(${-o/2+(t.padding??0)-(n.x-(n.left??0))},${-l/2+(t.padding??0)-u/2-(n.y-(n.top??0))})`),se(t,L),t.intersect=function(_){return Zt.polygon(t,m,_)},i}g($5,"taggedWaveEdgedRectangle");async function V5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n}=await ve(e,t,ge(t)),s=Math.max(n.width+t.padding,(t==null?void 0:t.width)||0),o=Math.max(n.height+t.padding,(t==null?void 0:t.height)||0),l=-s/2,u=-o/2,h=i.insert("rect",":first-child");return h.attr("class","text").attr("style",a).attr("rx",0).attr("ry",0).attr("x",l).attr("y",u).attr("width",s).attr("height",o),se(t,h),t.intersect=function(d){return Zt.rect(t,d)},i}g(V5,"text");var xA=g((e,t,r,a,i,n)=>`M${e},${t}
    a${i},${n} 0,0,1 0,${-a}
    l${r},0
    a${i},${n} 0,0,1 0,${a}
    M${r},${-a}
    a${i},${n} 0,0,0 0,${a}
    l${-r},0`,"createCylinderPathD"),bA=g((e,t,r,a,i,n)=>[`M${e},${t}`,`M${e+r},${t}`,`a${i},${n} 0,0,0 0,${-a}`,`l${-r},0`,`a${i},${n} 0,0,0 0,${a}`,`l${r},0`].join(" "),"createOuterCylinderPathD"),wA=g((e,t,r,a,i,n)=>[`M${e+r/2},${-a/2}`,`a${i},${n} 0,0,0 0,${a}`].join(" "),"createInnerCylinderPathD");async function z5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n,label:s,halfPadding:o}=await ve(e,t,ge(t)),l=t.look==="neo"?o*2:o,u=n.height+l,h=u/2,d=h/(2.5+u/50),f=n.width+d+l,{cssStyles:p}=t;let y;if(t.look==="handDrawn"){const v=ee.svg(i),m=bA(0,0,f,u,d,h),x=wA(0,0,f,u,d,h),b=v.path(m,ie(t,{})),w=v.path(x,ie(t,{fill:"none"}));y=i.insert(()=>w,":first-child"),y=i.insert(()=>b,":first-child"),y.attr("class","basic label-container"),p&&y.attr("style",p)}else{const v=xA(0,0,f,u,d,h);y=i.insert("path",":first-child").attr("d",v).attr("class","basic label-container").attr("style",Jr(p)).attr("style",a),y.attr("class","basic label-container"),p&&y.selectAll("path").attr("style",p),a&&y.selectAll("path").attr("style",a)}return y.attr("label-offset-x",d),y.attr("transform",`translate(${-f/2}, ${u/2} )`),s.attr("transform",`translate(${-(n.width/2)-d-(n.x-(n.left??0))}, ${-(n.height/2)-(n.y-(n.top??0))})`),se(t,y),t.intersect=function(v){const m=Zt.rect(t,v),x=m.y-(t.y??0);if(h!=0&&(Math.abs(x)<(t.height??0)/2||Math.abs(x)==(t.height??0)/2&&Math.abs(m.x-(t.x??0))>(t.width??0)/2-d)){let b=d*d*(1-x*x/(h*h));b!=0&&(b=Math.sqrt(Math.abs(b))),b=d-b,v.x-(t.x??0)>0&&(b=-b),m.x+=b}return m},i}g(z5,"tiltedCylinder");async function q5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n}=await ve(e,t,ge(t)),s=n.width+t.padding,o=n.height+t.padding,l=[{x:-3*o/6,y:0},{x:s+3*o/6,y:0},{x:s,y:-o},{x:0,y:-o}];let u;const{cssStyles:h}=t;if(t.look==="handDrawn"){const d=ee.svg(i),f=ie(t,{}),p=Ae(l),y=d.path(p,f);u=i.insert(()=>y,":first-child").attr("transform",`translate(${-s/2}, ${o/2})`),h&&u.attr("style",h)}else u=Ri(i,s,o,l);return a&&u.attr("style",a),t.width=s,t.height=o,se(t,u),t.intersect=function(d){return Zt.polygon(t,l,d)},i}g(q5,"trapezoid");async function W5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n}=await ve(e,t,ge(t)),s=60,o=20,l=Math.max(s,n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),u=Math.max(o,n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),{cssStyles:h}=t,d=ee.svg(i),f=ie(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=[{x:-l/2*.8,y:-u/2},{x:l/2*.8,y:-u/2},{x:l/2,y:-u/2*.6},{x:l/2,y:u/2},{x:-l/2,y:u/2},{x:-l/2,y:-u/2*.6}],y=Ae(p),v=d.path(y,f),m=i.insert(()=>v,":first-child");return m.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",h),a&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",a),se(t,m),t.intersect=function(x){return Zt.polygon(t,p,x)},i}g(W5,"trapezoidalPentagon");async function G5(e,t){var b;const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n,label:s}=await ve(e,t,ge(t)),o=Oe((b=dt().flowchart)==null?void 0:b.htmlLabels),l=n.width+(t.padding??0),u=l+n.height,h=l+n.height,d=[{x:0,y:0},{x:h,y:0},{x:h/2,y:-u}],{cssStyles:f}=t,p=ee.svg(i),y=ie(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const v=Ae(d),m=p.path(v,y),x=i.insert(()=>m,":first-child").attr("transform",`translate(${-u/2}, ${u/2})`);return f&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",f),a&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",a),t.width=l,t.height=u,se(t,x),s.attr("transform",`translate(${-n.width/2-(n.x-(n.left??0))}, ${u/2-(n.height+(t.padding??0)/(o?2:1)-(n.y-(n.top??0)))})`),t.intersect=function(w){return G.info("Triangle intersect",t,d,w),Zt.polygon(t,d,w)},i}g(G5,"triangle");async function H5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n,label:s}=await ve(e,t,ge(t)),o=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=l/8,h=l+u,{cssStyles:d}=t,p=70-o,y=p>0?p/2:0,v=ee.svg(i),m=ie(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const x=[{x:-o/2-y,y:h/2},...Zi(-o/2-y,h/2,o/2+y,h/2,u,.8),{x:o/2+y,y:-h/2},{x:-o/2-y,y:-h/2}],b=Ae(x),w=v.path(b,m),C=i.insert(()=>w,":first-child");return C.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",d),a&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",a),C.attr("transform",`translate(0,${-u/2})`),s.attr("transform",`translate(${-o/2+(t.padding??0)-(n.x-(n.left??0))},${-l/2+(t.padding??0)-u-(n.y-(n.top??0))})`),se(t,C),t.intersect=function(T){return Zt.polygon(t,x,T)},i}g(H5,"waveEdgedRectangle");async function Y5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n}=await ve(e,t,ge(t)),s=100,o=50,l=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),u=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=l/u;let d=l,f=u;d>f*h?f=d/h:d=f*h,d=Math.max(d,s),f=Math.max(f,o);const p=Math.min(f*.2,f/4),y=f+p*2,{cssStyles:v}=t,m=ee.svg(i),x=ie(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const b=[{x:-d/2,y:y/2},...Zi(-d/2,y/2,d/2,y/2,p,1),{x:d/2,y:-y/2},...Zi(d/2,-y/2,-d/2,-y/2,p,-1)],w=Ae(b),C=m.path(w,x),T=i.insert(()=>C,":first-child");return T.attr("class","basic label-container"),v&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",v),a&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",a),se(t,T),t.intersect=function(k){return Zt.polygon(t,b,k)},i}g(Y5,"waveRectangle");async function U5(e,t){const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const{shapeSvg:i,bbox:n,label:s}=await ve(e,t,ge(t)),o=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=5,h=-o/2,d=-l/2,{cssStyles:f}=t,p=ee.svg(i),y=ie(t,{}),v=[{x:h-u,y:d-u},{x:h-u,y:d+l},{x:h+o,y:d+l},{x:h+o,y:d-u}],m=`M${h-u},${d-u} L${h+o},${d-u} L${h+o},${d+l} L${h-u},${d+l} L${h-u},${d-u}
                M${h-u},${d} L${h+o},${d}
                M${h},${d-u} L${h},${d+l}`;t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const x=p.path(m,y),b=i.insert(()=>x,":first-child");return b.attr("transform",`translate(${u/2}, ${u/2})`),b.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",f),a&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",a),s.attr("transform",`translate(${-(n.width/2)+u/2-(n.x-(n.left??0))}, ${-(n.height/2)+u/2-(n.y-(n.top??0))})`),se(t,b),t.intersect=function(w){return Zt.polygon(t,v,w)},i}g(U5,"windowPane");async function w0(e,t){var F,V,N;const r=t;if(r.alias&&(t.label=r.alias),t.look==="handDrawn"){const{themeVariables:q}=$e(),{background:U}=q,X={...t,id:t.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${U}`]};await w0(e,X)}const a=$e();t.useHtmlLabels=a.htmlLabels;let i=((F=a.er)==null?void 0:F.diagramPadding)??10,n=((V=a.er)==null?void 0:V.entityPadding)??6;const{cssStyles:s}=t,{labelStyles:o}=oe(t);if(r.attributes.length===0&&t.label){const q={rx:0,ry:0,labelPaddingX:i,labelPaddingY:i*1.5};Zr(t.label,a)+q.labelPaddingX*2<a.er.minEntityWidth&&(t.width=a.er.minEntityWidth);const U=await dc(e,t,q);if(!Oe(a.htmlLabels)){const X=U.select("text"),lt=(N=X.node())==null?void 0:N.getBBox();X.attr("transform",`translate(${-lt.width/2}, 0)`)}return U}a.htmlLabels||(i*=1.25,n*=1.25);let l=ge(t);l||(l="node default");const u=e.insert("g").attr("class",l).attr("id",t.domId||t.id),h=await gs(u,t.label??"",a,0,0,["name"],o);h.height+=n;let d=0;const f=[];let p=0,y=0,v=0,m=0,x=!0,b=!0;for(const q of r.attributes){const U=await gs(u,q.type,a,0,d,["attribute-type"],o);p=Math.max(p,U.width+i);const X=await gs(u,q.name,a,0,d,["attribute-name"],o);y=Math.max(y,X.width+i);const lt=await gs(u,q.keys.join(),a,0,d,["attribute-keys"],o);v=Math.max(v,lt.width+i);const J=await gs(u,q.comment,a,0,d,["attribute-comment"],o);m=Math.max(m,J.width+i),d+=Math.max(U.height,X.height,lt.height,J.height)+n,f.push(d)}f.pop();let w=4;v<=i&&(x=!1,v=0,w--),m<=i&&(b=!1,m=0,w--);const C=u.node().getBBox();if(h.width+i*2-(p+y+v+m)>0){const q=h.width+i*2-(p+y+v+m);p+=q/w,y+=q/w,v>0&&(v+=q/w),m>0&&(m+=q/w)}const T=p+y+v+m,k=ee.svg(u),S=ie(t,{});t.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const L=Math.max(C.width+i*2,(t==null?void 0:t.width)||0,T),_=Math.max(C.height+(f[0]||d)+n,(t==null?void 0:t.height)||0),A=-L/2,E=-_/2;u.selectAll("g:not(:first-child)").each((q,U,X)=>{const lt=It(X[U]),J=lt.attr("transform");let ct=0,yt=0;if(J){const Q=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(J);Q&&(ct=parseFloat(Q[1]),yt=parseFloat(Q[2]),lt.attr("class").includes("attribute-name")?ct+=p:lt.attr("class").includes("attribute-keys")?ct+=p+y:lt.attr("class").includes("attribute-comment")&&(ct+=p+y+v))}lt.attr("transform",`translate(${A+i/2+ct}, ${yt+E+h.height+n/2})`)}),u.select(".name").attr("transform","translate("+-h.width/2+", "+(E+n/2)+")");const D=k.rectangle(A,E,L,_,S),R=u.insert(()=>D,":first-child").attr("style",s.join("")),{themeVariables:O}=$e(),{rowEven:P,rowOdd:$,nodeBorder:M}=O;f.push(0);for(const[q,U]of f.entries()){if(q===0&&f.length>1)continue;const X=q%2===0&&U!==0,lt=k.rectangle(A,h.height+E+U,L,h.height,{...S,fill:X?P:$,stroke:M});u.insert(()=>lt,"g.label").attr("style",s.join("")).attr("class",`row-rect-${q%2===0?"even":"odd"}`)}let I=k.line(A,h.height+E,L+A,h.height+E,S);u.insert(()=>I).attr("class","divider"),I=k.line(p+A,h.height+E,p+A,_+E,S),u.insert(()=>I).attr("class","divider"),x&&(I=k.line(p+y+A,h.height+E,p+y+A,_+E,S),u.insert(()=>I).attr("class","divider")),b&&(I=k.line(p+y+v+A,h.height+E,p+y+v+A,_+E,S),u.insert(()=>I).attr("class","divider"));for(const q of f)I=k.line(A,h.height+E+q,L+A,h.height+E+q,S),u.insert(()=>I).attr("class","divider");return se(t,R),t.intersect=function(q){return Zt.rect(t,q)},u}g(w0,"erBox");async function gs(e,t,r,a=0,i=0,n=[],s=""){const o=e.insert("g").attr("class",`label ${n.join(" ")}`).attr("transform",`translate(${a}, ${i})`).attr("style",s);t!==Vi(t)&&(t=Vi(t),t=t.replaceAll("<","&lt;").replaceAll(">","&gt;"));const l=o.node().appendChild(await fa(o,t,{width:Zr(t,r)+100,style:s,useHtmlLabels:r.htmlLabels},r));if(t.includes("&lt;")||t.includes("&gt;")){let h=l.children[0];for(h.textContent=h.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");h.childNodes[0];)h=h.childNodes[0],h.textContent=h.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let u=l.getBBox();if(Oe(r.htmlLabels)){const h=l.children[0];h.style.textAlign="start";const d=It(l);u=h.getBoundingClientRect(),d.attr("width",u.width),d.attr("height",u.height)}return u}g(gs,"addText");async function X5(e,t,r,a,i=r.class.padding??12){const n=a?0:3,s=e.insert("g").attr("class",ge(t)).attr("id",t.domId||t.id);let o=null,l=null,u=null,h=null,d=0,f=0,p=0;if(o=s.insert("g").attr("class","annotation-group text"),t.annotations.length>0){const b=t.annotations[0];await fl(o,{text:`«${b}»`},0),d=o.node().getBBox().height}l=s.insert("g").attr("class","label-group text"),await fl(l,t,0,["font-weight: bolder"]);const y=l.node().getBBox();f=y.height,u=s.insert("g").attr("class","members-group text");let v=0;for(const b of t.members){const w=await fl(u,b,v,[b.parseClassifier()]);v+=w+n}p=u.node().getBBox().height,p<=0&&(p=i/2),h=s.insert("g").attr("class","methods-group text");let m=0;for(const b of t.methods){const w=await fl(h,b,m,[b.parseClassifier()]);m+=w+n}let x=s.node().getBBox();if(o!==null){const b=o.node().getBBox();o.attr("transform",`translate(${-b.width/2})`)}return l.attr("transform",`translate(${-y.width/2}, ${d})`),x=s.node().getBBox(),u.attr("transform",`translate(0, ${d+f+i*2})`),x=s.node().getBBox(),h.attr("transform",`translate(0, ${d+f+(p?p+i*4:i*2)})`),x=s.node().getBBox(),{shapeSvg:s,bbox:x}}g(X5,"textHelper");async function fl(e,t,r,a=[]){const i=e.insert("g").attr("class","label").attr("style",a.join("; ")),n=$e();let s="useHtmlLabels"in t?t.useHtmlLabels:Oe(n.htmlLabels)??!0,o="";"text"in t?o=t.text:o=t.label,!s&&o.startsWith("\\")&&(o=o.substring(1)),qr(o)&&(s=!0);const l=await fa(i,e0(oi(o)),{width:Zr(o,n)+50,classes:"markdown-node-label",useHtmlLabels:s},n);let u,h=1;if(s){const d=l.children[0],f=It(l);h=d.innerHTML.split("<br>").length,d.innerHTML.includes("</math>")&&(h+=d.innerHTML.split("<mrow>").length-1);const p=d.getElementsByTagName("img");if(p){const y=o.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...p].map(v=>new Promise(m=>{function x(){var b;if(v.style.display="flex",v.style.flexDirection="column",y){const w=((b=n.fontSize)==null?void 0:b.toString())??window.getComputedStyle(document.body).fontSize,T=parseInt(w,10)*5+"px";v.style.minWidth=T,v.style.maxWidth=T}else v.style.width="100%";m(v)}g(x,"setupImage"),setTimeout(()=>{v.complete&&x()}),v.addEventListener("error",x),v.addEventListener("load",x)})))}u=d.getBoundingClientRect(),f.attr("width",u.width),f.attr("height",u.height)}else{a.includes("font-weight: bolder")&&It(l).selectAll("tspan").attr("font-weight",""),h=l.children.length;const d=l.children[0];(l.textContent===""||l.textContent.includes("&gt"))&&(d.textContent=o[0]+o.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),o[1]===" "&&(d.textContent=d.textContent[0]+" "+d.textContent.substring(1))),d.textContent==="undefined"&&(d.textContent=""),u=l.getBBox()}return i.attr("transform","translate(0,"+(-u.height/(2*h)+r)+")"),u.height}g(fl,"addText");async function K5(e,t){var _,A;const r=dt(),a=r.class.padding??12,i=a,n=t.useHtmlLabels??Oe(r.htmlLabels)??!0,s=t;s.annotations=s.annotations??[],s.members=s.members??[],s.methods=s.methods??[];const{shapeSvg:o,bbox:l}=await X5(e,t,r,n,i),{labelStyles:u,nodeStyles:h}=oe(t);t.labelStyle=u,t.cssStyles=s.styles||"";const d=((_=s.styles)==null?void 0:_.join(";"))||h||"";t.cssStyles||(t.cssStyles=d.replaceAll("!important","").split(";"));const f=s.members.length===0&&s.methods.length===0&&!((A=r.class)!=null&&A.hideEmptyMembersBox),p=ee.svg(o),y=ie(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const v=l.width;let m=l.height;s.members.length===0&&s.methods.length===0?m+=i:s.members.length>0&&s.methods.length===0&&(m+=i*2);const x=-v/2,b=-m/2,w=p.rectangle(x-a,b-a-(f?a:s.members.length===0&&s.methods.length===0?-a/2:0),v+2*a,m+2*a+(f?a*2:s.members.length===0&&s.methods.length===0?-a:0),y),C=o.insert(()=>w,":first-child");C.attr("class","basic label-container");const T=C.node().getBBox();o.selectAll(".text").each((E,D,R)=>{var F;const O=It(R[D]),P=O.attr("transform");let $=0;if(P){const N=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(P);N&&($=parseFloat(N[2]))}let M=$+b+a-(f?a:s.members.length===0&&s.methods.length===0?-a/2:0);n||(M-=4);let I=x;(O.attr("class").includes("label-group")||O.attr("class").includes("annotation-group"))&&(I=-((F=O.node())==null?void 0:F.getBBox().width)/2||0,o.selectAll("text").each(function(V,N,q){window.getComputedStyle(q[N]).textAnchor==="middle"&&(I=0)})),O.attr("transform",`translate(${I}, ${M})`)});const k=o.select(".annotation-group").node().getBBox().height-(f?a/2:0)||0,S=o.select(".label-group").node().getBBox().height-(f?a/2:0)||0,L=o.select(".members-group").node().getBBox().height-(f?a/2:0)||0;if(s.members.length>0||s.methods.length>0||f){const E=p.line(T.x,k+S+b+a,T.x+T.width,k+S+b+a,y);o.insert(()=>E).attr("class","divider").attr("style",d)}if(f||s.members.length>0||s.methods.length>0){const E=p.line(T.x,k+S+L+b+i*2+a,T.x+T.width,k+S+L+b+a+i*2,y);o.insert(()=>E).attr("class","divider").attr("style",d)}if(s.look!=="handDrawn"&&o.selectAll("path").attr("style",d),C.select(":nth-child(2)").attr("style",d),o.selectAll(".divider").select("path").attr("style",d),t.labelStyle?o.selectAll("span").attr("style",t.labelStyle):o.selectAll("span").attr("style",d),!n){const E=RegExp(/color\s*:\s*([^;]*)/),D=E.exec(d);if(D){const R=D[0].replace("color","fill");o.selectAll("tspan").attr("style",R)}else if(u){const R=E.exec(u);if(R){const O=R[0].replace("color","fill");o.selectAll("tspan").attr("style",O)}}}return se(t,C),t.intersect=function(E){return Zt.rect(t,E)},o}g(K5,"classBox");async function j5(e,t){var k,S;const{labelStyles:r,nodeStyles:a}=oe(t);t.labelStyle=r;const i=t,n=t,s=20,o=20,l="verifyMethod"in t,u=ge(t),h=e.insert("g").attr("class",u).attr("id",t.domId??t.id);let d;l?d=await Za(h,`&lt;&lt;${i.type}&gt;&gt;`,0,t.labelStyle):d=await Za(h,"&lt;&lt;Element&gt;&gt;",0,t.labelStyle);let f=d;const p=await Za(h,i.name,f,t.labelStyle+"; font-weight: bold;");if(f+=p+o,l){const L=await Za(h,`${i.requirementId?`Id: ${i.requirementId}`:""}`,f,t.labelStyle);f+=L;const _=await Za(h,`${i.text?`Text: ${i.text}`:""}`,f,t.labelStyle);f+=_;const A=await Za(h,`${i.risk?`Risk: ${i.risk}`:""}`,f,t.labelStyle);f+=A,await Za(h,`${i.verifyMethod?`Verification: ${i.verifyMethod}`:""}`,f,t.labelStyle)}else{const L=await Za(h,`${n.type?`Type: ${n.type}`:""}`,f,t.labelStyle);f+=L,await Za(h,`${n.docRef?`Doc Ref: ${n.docRef}`:""}`,f,t.labelStyle)}const y=(((k=h.node())==null?void 0:k.getBBox().width)??200)+s,v=(((S=h.node())==null?void 0:S.getBBox().height)??200)+s,m=-y/2,x=-v/2,b=ee.svg(h),w=ie(t,{});t.look!=="handDrawn"&&(w.roughness=0,w.fillStyle="solid");const C=b.rectangle(m,x,y,v,w),T=h.insert(()=>C,":first-child");if(T.attr("class","basic label-container").attr("style",a),h.selectAll(".label").each((L,_,A)=>{const E=It(A[_]),D=E.attr("transform");let R=0,O=0;if(D){const I=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(D);I&&(R=parseFloat(I[1]),O=parseFloat(I[2]))}const P=O-v/2;let $=m+s/2;(_===0||_===1)&&($=R),E.attr("transform",`translate(${$}, ${P+s})`)}),f>d+p+o){const L=b.line(m,x+d+p+o,m+y,x+d+p+o,w);h.insert(()=>L).attr("style",a)}return se(t,T),t.intersect=function(L){return Zt.rect(t,L)},h}g(j5,"requirementBox");async function Za(e,t,r,a=""){if(t==="")return 0;const i=e.insert("g").attr("class","label").attr("style",a),n=dt(),s=n.htmlLabels??!0,o=await fa(i,e0(oi(t)),{width:Zr(t,n)+50,classes:"markdown-node-label",useHtmlLabels:s,style:a},n);let l;if(s){const u=o.children[0],h=It(o);l=u.getBoundingClientRect(),h.attr("width",l.width),h.attr("height",l.height)}else{const u=o.children[0];for(const h of u.children)h.textContent=h.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),a&&h.setAttribute("style",a);l=o.getBBox(),l.height+=6}return i.attr("transform",`translate(${-l.width/2},${-l.height/2+r})`),l.height}g(Za,"addText");var kA=g(e=>{switch(e){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function Q5(e,t,{config:r}){var D,R;const{labelStyles:a,nodeStyles:i}=oe(t);t.labelStyle=a||"";const n=10,s=t.width;t.width=(t.width??200)-10;const{shapeSvg:o,bbox:l,label:u}=await ve(e,t,ge(t)),h=t.padding||10;let d="",f;"ticket"in t&&t.ticket&&((D=r==null?void 0:r.kanban)!=null&&D.ticketBaseUrl)&&(d=(R=r==null?void 0:r.kanban)==null?void 0:R.ticketBaseUrl.replace("#TICKET#",t.ticket),f=o.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",d).attr("target","_blank"));const p={useHtmlLabels:t.useHtmlLabels,labelStyle:t.labelStyle||"",width:t.width,img:t.img,padding:t.padding||8,centerLabel:!1};let y,v;f?{label:y,bbox:v}=await kd(f,"ticket"in t&&t.ticket||"",p):{label:y,bbox:v}=await kd(o,"ticket"in t&&t.ticket||"",p);const{label:m,bbox:x}=await kd(o,"assigned"in t&&t.assigned||"",p);t.width=s;const b=10,w=(t==null?void 0:t.width)||0,C=Math.max(v.height,x.height)/2,T=Math.max(l.height+b*2,(t==null?void 0:t.height)||0)+C,k=-w/2,S=-T/2;u.attr("transform","translate("+(h-w/2)+", "+(-C-l.height/2)+")"),y.attr("transform","translate("+(h-w/2)+", "+(-C+l.height/2)+")"),m.attr("transform","translate("+(h+w/2-x.width-2*n)+", "+(-C+l.height/2)+")");let L;const{rx:_,ry:A}=t,{cssStyles:E}=t;if(t.look==="handDrawn"){const O=ee.svg(o),P=ie(t,{}),$=_||A?O.path(Bi(k,S,w,T,_||0),P):O.rectangle(k,S,w,T,P);L=o.insert(()=>$,":first-child"),L.attr("class","basic label-container").attr("style",E||null)}else{L=o.insert("rect",":first-child"),L.attr("class","basic label-container __APA__").attr("style",i).attr("rx",_??5).attr("ry",A??5).attr("x",k).attr("y",S).attr("width",w).attr("height",T);const O="priority"in t&&t.priority;if(O){const P=o.append("line"),$=k+2,M=S+Math.floor((_??0)/2),I=S+T-Math.floor((_??0)/2);P.attr("x1",$).attr("y1",M).attr("x2",$).attr("y2",I).attr("stroke-width","4").attr("stroke",kA(O))}}return se(t,L),t.height=T,t.intersect=function(O){return Zt.rect(t,O)},o}g(Q5,"kanbanItem");var TA=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:R5},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:L5},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:I5},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:F5},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:r5},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:K4},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:E5},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:c5},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:x5},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:m5},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:q5},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:y5},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:i5},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:V5},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:U4},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:D5},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:M5},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:N5},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:o5},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:u5},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:Z4},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:J4},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:t5},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:b5},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:H5},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:l5},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:z5},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:w5},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:e5},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:a5},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:G5},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:U5},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:n5},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:W5},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:s5},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:B5},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:C5},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:T5},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:Y4},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:Q4},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:$5},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:O5},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:Y5},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:_5},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:k5}],CA=g(()=>{const t=[...Object.entries({state:P5,choice:X4,note:S5,rectWithTitle:A5,labelRect:v5,iconSquare:p5,iconCircle:d5,icon:h5,iconRounded:f5,imageSquare:g5,anchor:H4,kanbanItem:Q5,classBox:K5,erBox:w0,requirementBox:j5}),...TA.flatMap(r=>[r.shortName,..."aliases"in r?r.aliases:[],..."internalAliases"in r?r.internalAliases:[]].map(i=>[i,r.handler]))];return Object.fromEntries(t)},"generateShapeMap"),Z5=CA();function J5(e){return e in Z5}g(J5,"isValidShape");var Mh=new Map;async function Fh(e,t,r){let a,i;t.shape==="rect"&&(t.rx&&t.ry?t.shape="roundedRect":t.shape="squareRect");const n=t.shape?Z5[t.shape]:void 0;if(!n)throw new Error(`No such shape: ${t.shape}. Please check your syntax.`);if(t.link){let s;r.config.securityLevel==="sandbox"?s="_top":t.linkTarget&&(s=t.linkTarget||"_blank"),a=e.insert("svg:a").attr("xlink:href",t.link).attr("target",s??null),i=await n(a,t,r)}else i=await n(e,t,r),a=i;return t.tooltip&&i.attr("title",t.tooltip),Mh.set(t.id,a),t.haveCallback&&a.attr("class",a.attr("class")+" clickable"),a}g(Fh,"insertNode");var SA=g((e,t)=>{Mh.set(t.id,e)},"setNodeElem"),EA=g(()=>{Mh.clear()},"clear"),Op=g(e=>{const t=Mh.get(e.id);G.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");const r=8,a=e.diff||0;return e.clusterNode?t.attr("transform","translate("+(e.x+a-e.width/2)+", "+(e.y-e.height/2-r)+")"):t.attr("transform","translate("+e.x+", "+e.y+")"),a},"positionNode"),_A=g((e,t,r,a,i,n)=>{t.arrowTypeStart&&fy(e,"start",t.arrowTypeStart,r,a,i,n),t.arrowTypeEnd&&fy(e,"end",t.arrowTypeEnd,r,a,i,n)},"addEdgeMarkers"),AA={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},fy=g((e,t,r,a,i,n,s)=>{var d;const o=AA[r];if(!o){G.warn(`Unknown arrow type: ${r}`);return}const l=o.type,h=`${i}_${n}-${l}${t==="start"?"Start":"End"}`;if(s&&s.trim()!==""){const f=s.replace(/[^\dA-Za-z]/g,"_"),p=`${h}_${f}`;if(!document.getElementById(p)){const y=document.getElementById(h);if(y){const v=y.cloneNode(!0);v.id=p,v.querySelectorAll("path, circle, line").forEach(x=>{x.setAttribute("stroke",s),o.fill&&x.setAttribute("fill",s)}),(d=y.parentNode)==null||d.appendChild(v)}}e.attr(`marker-${t}`,`url(${a}#${p})`)}else e.attr(`marker-${t}`,`url(${a}#${h})`)},"addEdgeMarker"),Yu=new Map,Rr=new Map,LA=g(()=>{Yu.clear(),Rr.clear()},"clear"),al=g(e=>e?e.reduce((r,a)=>r+";"+a,""):"","getLabelStyles"),t3=g(async(e,t)=>{let r=Oe(dt().flowchart.htmlLabels);const a=await fa(e,t.label,{style:al(t.labelStyle),useHtmlLabels:r,addSvgBackground:!0,isNode:!1});G.info("abc82",t,t.labelType);const i=e.insert("g").attr("class","edgeLabel"),n=i.insert("g").attr("class","label");n.node().appendChild(a);let s=a.getBBox();if(r){const l=a.children[0],u=It(a);s=l.getBoundingClientRect(),u.attr("width",s.width),u.attr("height",s.height)}n.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),Yu.set(t.id,i),t.width=s.width,t.height=s.height;let o;if(t.startLabelLeft){const l=await In(t.startLabelLeft,al(t.labelStyle)),u=e.insert("g").attr("class","edgeTerminals"),h=u.insert("g").attr("class","inner");o=h.node().appendChild(l);const d=l.getBBox();h.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),Rr.get(t.id)||Rr.set(t.id,{}),Rr.get(t.id).startLeft=u,pl(o,t.startLabelLeft)}if(t.startLabelRight){const l=await In(t.startLabelRight,al(t.labelStyle)),u=e.insert("g").attr("class","edgeTerminals"),h=u.insert("g").attr("class","inner");o=u.node().appendChild(l),h.node().appendChild(l);const d=l.getBBox();h.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),Rr.get(t.id)||Rr.set(t.id,{}),Rr.get(t.id).startRight=u,pl(o,t.startLabelRight)}if(t.endLabelLeft){const l=await In(t.endLabelLeft,al(t.labelStyle)),u=e.insert("g").attr("class","edgeTerminals"),h=u.insert("g").attr("class","inner");o=h.node().appendChild(l);const d=l.getBBox();h.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),u.node().appendChild(l),Rr.get(t.id)||Rr.set(t.id,{}),Rr.get(t.id).endLeft=u,pl(o,t.endLabelLeft)}if(t.endLabelRight){const l=await In(t.endLabelRight,al(t.labelStyle)),u=e.insert("g").attr("class","edgeTerminals"),h=u.insert("g").attr("class","inner");o=h.node().appendChild(l);const d=l.getBBox();h.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),u.node().appendChild(l),Rr.get(t.id)||Rr.set(t.id,{}),Rr.get(t.id).endRight=u,pl(o,t.endLabelRight)}return a},"insertEdgeLabel");function pl(e,t){dt().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+"px",e.style.height="12px")}g(pl,"setTerminalWidth");var e3=g((e,t)=>{G.debug("Moving label abc88 ",e.id,e.label,Yu.get(e.id),t);let r=t.updatedPath?t.updatedPath:t.originalPath;const a=dt(),{subGraphTitleTotalMargin:i}=hc(a);if(e.label){const n=Yu.get(e.id);let s=e.x,o=e.y;if(r){const l=xe.calcLabelPosition(r);G.debug("Moving label "+e.label+" from (",s,",",o,") to (",l.x,",",l.y,") abc88"),t.updatedPath&&(s=l.x,o=l.y)}n.attr("transform",`translate(${s}, ${o+i/2})`)}if(e.startLabelLeft){const n=Rr.get(e.id).startLeft;let s=e.x,o=e.y;if(r){const l=xe.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",r);s=l.x,o=l.y}n.attr("transform",`translate(${s}, ${o})`)}if(e.startLabelRight){const n=Rr.get(e.id).startRight;let s=e.x,o=e.y;if(r){const l=xe.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",r);s=l.x,o=l.y}n.attr("transform",`translate(${s}, ${o})`)}if(e.endLabelLeft){const n=Rr.get(e.id).endLeft;let s=e.x,o=e.y;if(r){const l=xe.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",r);s=l.x,o=l.y}n.attr("transform",`translate(${s}, ${o})`)}if(e.endLabelRight){const n=Rr.get(e.id).endRight;let s=e.x,o=e.y;if(r){const l=xe.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",r);s=l.x,o=l.y}n.attr("transform",`translate(${s}, ${o})`)}},"positionEdgeLabel"),DA=g((e,t)=>{const r=e.x,a=e.y,i=Math.abs(t.x-r),n=Math.abs(t.y-a),s=e.width/2,o=e.height/2;return i>=s||n>=o},"outsideNode"),BA=g((e,t,r)=>{G.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);const a=e.x,i=e.y,n=Math.abs(a-r.x),s=e.width/2;let o=r.x<t.x?s-n:s+n;const l=e.height/2,u=Math.abs(t.y-r.y),h=Math.abs(t.x-r.x);if(Math.abs(i-t.y)*s>Math.abs(a-t.x)*l){let d=r.y<t.y?t.y-l-i:i-l-t.y;o=h*d/u;const f={x:r.x<t.x?r.x+o:r.x-h+o,y:r.y<t.y?r.y+u-d:r.y-u+d};return o===0&&(f.x=t.x,f.y=t.y),h===0&&(f.x=t.x),u===0&&(f.y=t.y),G.debug(`abc89 top/bottom calc, Q ${u}, q ${d}, R ${h}, r ${o}`,f),f}else{r.x<t.x?o=t.x-s-a:o=a-s-t.x;let d=u*o/h,f=r.x<t.x?r.x+h-o:r.x-h+o,p=r.y<t.y?r.y+d:r.y-d;return G.debug(`sides calc abc89, Q ${u}, q ${d}, R ${h}, r ${o}`,{_x:f,_y:p}),o===0&&(f=t.x,p=t.y),h===0&&(f=t.x),u===0&&(p=t.y),{x:f,y:p}}},"intersection"),py=g((e,t)=>{G.warn("abc88 cutPathAtIntersect",e,t);let r=[],a=e[0],i=!1;return e.forEach(n=>{if(G.info("abc88 checking point",n,t),!DA(t,n)&&!i){const s=BA(t,a,n);G.debug("abc88 inside",n,a,s),G.debug("abc88 intersection",s,t);let o=!1;r.forEach(l=>{o=o||l.x===s.x&&l.y===s.y}),r.some(l=>l.x===s.x&&l.y===s.y)?G.warn("abc88 no intersect",s,r):r.push(s),i=!0}else G.warn("abc88 outside",n,a),a=n,i||r.push(n)}),G.debug("returning points",r),r},"cutPathAtIntersect");function r3(e){const t=[],r=[];for(let a=1;a<e.length-1;a++){const i=e[a-1],n=e[a],s=e[a+1];(i.x===n.x&&n.y===s.y&&Math.abs(n.x-s.x)>5&&Math.abs(n.y-i.y)>5||i.y===n.y&&n.x===s.x&&Math.abs(n.x-i.x)>5&&Math.abs(n.y-s.y)>5)&&(t.push(n),r.push(a))}return{cornerPoints:t,cornerPointPositions:r}}g(r3,"extractCornerPoints");var gy=g(function(e,t,r){const a=t.x-e.x,i=t.y-e.y,n=Math.sqrt(a*a+i*i),s=r/n;return{x:t.x-s*a,y:t.y-s*i}},"findAdjacentPoint"),RA=g(function(e){const{cornerPointPositions:t}=r3(e),r=[];for(let a=0;a<e.length;a++)if(t.includes(a)){const i=e[a-1],n=e[a+1],s=e[a],o=gy(i,s,5),l=gy(n,s,5),u=l.x-o.x,h=l.y-o.y;r.push(o);const d=Math.sqrt(2)*2;let f={x:s.x,y:s.y};if(Math.abs(n.x-i.x)>10&&Math.abs(n.y-i.y)>=10){G.debug("Corner point fixing",Math.abs(n.x-i.x),Math.abs(n.y-i.y));const p=5;s.x===o.x?f={x:u<0?o.x-p+d:o.x+p-d,y:h<0?o.y-d:o.y+d}:f={x:u<0?o.x-d:o.x+d,y:h<0?o.y-p+d:o.y+p-d}}else G.debug("Corner point skipping fixing",Math.abs(n.x-i.x),Math.abs(n.y-i.y));r.push(f,l)}else r.push(e[a]);return r},"fixCorners"),a3=g(function(e,t,r,a,i,n,s){var _;const{handDrawnSeed:o}=dt();let l=t.points,u=!1;const h=i;var d=n;const f=[];for(const A in t.cssCompiledStyles)M4(A)||f.push(t.cssCompiledStyles[A]);d.intersect&&h.intersect&&(l=l.slice(1,t.points.length-1),l.unshift(h.intersect(l[0])),G.debug("Last point APA12",t.start,"-->",t.end,l[l.length-1],d,d.intersect(l[l.length-1])),l.push(d.intersect(l[l.length-1]))),t.toCluster&&(G.info("to cluster abc88",r.get(t.toCluster)),l=py(t.points,r.get(t.toCluster).node),u=!0),t.fromCluster&&(G.debug("from cluster abc88",r.get(t.fromCluster),JSON.stringify(l,null,2)),l=py(l.reverse(),r.get(t.fromCluster).node).reverse(),u=!0);let p=l.filter(A=>!Number.isNaN(A.y));p=RA(p);let y=Ss;switch(y=fp,t.curve){case"linear":y=fp;break;case"basis":y=Ss;break;case"cardinal":y=sx;break;case"bumpX":y=lx;break;case"bumpY":y=ox;break;case"catmullRom":y=nx;break;case"monotoneX":y=ix;break;case"monotoneY":y=ax;break;case"natural":y=rx;break;case"step":y=ex;break;case"stepAfter":y=tx;break;case"stepBefore":y=J2;break;default:y=Ss}const{x:v,y:m}=u4(t),x=Ml().x(v).y(m).curve(y);let b;switch(t.thickness){case"normal":b="edge-thickness-normal";break;case"thick":b="edge-thickness-thick";break;case"invisible":b="edge-thickness-invisible";break;default:b="edge-thickness-normal"}switch(t.pattern){case"solid":b+=" edge-pattern-solid";break;case"dotted":b+=" edge-pattern-dotted";break;case"dashed":b+=" edge-pattern-dashed";break;default:b+=" edge-pattern-solid"}let w,C=x(p);const T=Array.isArray(t.style)?t.style:[t.style];let k=T.find(A=>A==null?void 0:A.startsWith("stroke:"));if(t.look==="handDrawn"){const A=ee.svg(e);Object.assign([],p);const E=A.path(C,{roughness:.3,seed:o});b+=" transition",w=It(E).select("path").attr("id",t.id).attr("class"," "+b+(t.classes?" "+t.classes:"")).attr("style",T?T.reduce((R,O)=>R+";"+O,""):"");let D=w.attr("d");w.attr("d",D),e.node().appendChild(w.node())}else{const A=f.join(";"),E=T?T.reduce((O,P)=>O+P+";",""):"";let D="";t.animate&&(D=" edge-animation-fast"),t.animation&&(D=" edge-animation-"+t.animation);const R=A?A+";"+E+";":E;w=e.append("path").attr("d",C).attr("id",t.id).attr("class"," "+b+(t.classes?" "+t.classes:"")+(D??"")).attr("style",R),k=(_=R.match(/stroke:([^;]+)/))==null?void 0:_[1]}let S="";(dt().flowchart.arrowMarkerAbsolute||dt().state.arrowMarkerAbsolute)&&(S=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,S=S.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),G.info("arrowTypeStart",t.arrowTypeStart),G.info("arrowTypeEnd",t.arrowTypeEnd),_A(w,t,S,s,a,k);let L={};return u&&(L.updatedPath=l),L.originalPath=t.points,L},"insertEdge"),IA=g((e,t,r,a)=>{t.forEach(i=>{KA[i](e,r,a)})},"insertMarkers"),PA=g((e,t,r)=>{G.trace("Making markers for ",r),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),NA=g((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),MA=g((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),FA=g((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),OA=g((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),$A=g((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),VA=g((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),zA=g((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),qA=g((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),WA=g((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneStart").attr("class","marker onlyOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneEnd").attr("class","marker onlyOne "+t).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),GA=g((e,t,r)=>{const a=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneStart").attr("class","marker zeroOrOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");a.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),a.append("path").attr("d","M9,0 L9,18");const i=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+t).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),i.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),HA=g((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreStart").attr("class","marker oneOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreEnd").attr("class","marker oneOrMore "+t).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),YA=g((e,t,r)=>{const a=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");a.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),a.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const i=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+t).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),i.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),UA=g((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),XA=g((e,t,r)=>{const a=e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");a.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),a.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),a.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),KA={extension:PA,composition:NA,aggregation:MA,dependency:FA,lollipop:OA,point:$A,circle:VA,cross:zA,barb:qA,only_one:WA,zero_or_one:GA,one_or_more:HA,zero_or_more:YA,requirement_arrow:UA,requirement_contains:XA},i3=IA,jA={common:Mt,getConfig:$e,insertCluster:b0,insertEdge:a3,insertEdgeLabel:t3,insertMarkers:i3,insertNode:Fh,interpolateToCurve:h0,labelHelper:ve,log:G,positionEdgeLabel:e3},ql={},n3=g(e=>{for(const t of e)ql[t.name]=t},"registerLayoutLoaders"),QA=g(()=>{n3([{name:"dagre",loader:g(async()=>await _e(()=>Promise.resolve().then(function(){return PL}),void 0),"loader")}])},"registerDefaultLayoutLoaders");QA();var fc=g(async(e,t)=>{if(!(e.layoutAlgorithm in ql))throw new Error(`Unknown layout algorithm: ${e.layoutAlgorithm}`);const r=ql[e.layoutAlgorithm];return(await r.loader()).render(e,t,jA,{algorithm:r.algorithm})},"render"),Oh=g((e="",{fallback:t="dagre"}={})=>{if(e in ql)return e;if(t in ql)return G.warn(`Layout algorithm ${e} is not registered. Using ${t} as fallback.`),t;throw new Error(`Both layout algorithms ${e} and ${t} are not registered.`)},"getRegisteredLayoutAlgorithm"),$p={name:"mermaid",version:"11.6.0",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.0.4","@iconify/utils":"^2.1.33","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.11",dayjs:"^1.11.13",dompurify:"^3.2.4",katex:"^0.16.9",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^15.0.7",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.2","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",chokidar:"^4.0.3",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.0.2",jison:"^0.4.18","js-base64":"^3.7.7",jsdom:"^26.0.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.2",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.10","type-fest":"^4.35.0",typedoc:"^0.27.8","typedoc-plugin-markdown":"^4.4.2",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.0.2","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},Ii=g(e=>{var i;const{securityLevel:t}=dt();let r=It("body");if(t==="sandbox"){const s=((i=It(`#i${e}`).node())==null?void 0:i.contentDocument)??document;r=It(s.body)}return r.select(`#${e}`)},"selectSvgElement"),s3="c4",ZA=g(e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),"detector"),JA=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return RD});return{diagram:t}},void 0);return{id:s3,diagram:e}},"loader"),t8={id:s3,detector:ZA,loader:JA},e8=t8,o3="flowchart",r8=g((e,t)=>{var r,a;return((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="dagre-wrapper"||((a=t==null?void 0:t.flowchart)==null?void 0:a.defaultRenderer)==="elk"?!1:/^\s*graph/.test(e)},"detector"),a8=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return L0});return{diagram:t}},void 0);return{id:o3,diagram:e}},"loader"),i8={id:o3,detector:r8,loader:a8},n8=i8,l3="flowchart-v2",s8=g((e,t)=>{var r,a,i;return((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="dagre-d3"?!1:(((a=t==null?void 0:t.flowchart)==null?void 0:a.defaultRenderer)==="elk"&&(t.layout="elk"),/^\s*graph/.test(e)&&((i=t==null?void 0:t.flowchart)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(e))},"detector"),o8=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return L0});return{diagram:t}},void 0);return{id:l3,diagram:e}},"loader"),l8={id:l3,detector:s8,loader:o8},c8=l8,c3="er",u8=g(e=>/^\s*erDiagram/.test(e),"detector"),h8=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return ZD});return{diagram:t}},void 0);return{id:c3,diagram:e}},"loader"),d8={id:c3,detector:u8,loader:h8},f8=d8,u3="gitGraph",p8=g(e=>/^\s*gitGraph/.test(e),"detector"),g8=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return MB});return{diagram:t}},void 0);return{id:u3,diagram:e}},"loader"),y8={id:u3,detector:p8,loader:g8},v8=y8,h3="gantt",m8=g(e=>/^\s*gantt/.test(e),"detector"),x8=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return _R});return{diagram:t}},void 0);return{id:h3,diagram:e}},"loader"),b8={id:h3,detector:m8,loader:x8},w8=b8,d3="info",k8=g(e=>/^\s*info/.test(e),"detector"),T8=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return NR});return{diagram:t}},void 0);return{id:d3,diagram:e}},"loader"),C8={id:d3,detector:k8,loader:T8},f3="pie",S8=g(e=>/^\s*pie/.test(e),"detector"),E8=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return ZR});return{diagram:t}},void 0);return{id:f3,diagram:e}},"loader"),_8={id:f3,detector:S8,loader:E8},p3="quadrantChart",A8=g(e=>/^\s*quadrantChart/.test(e),"detector"),L8=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return oI});return{diagram:t}},void 0);return{id:p3,diagram:e}},"loader"),D8={id:p3,detector:A8,loader:L8},B8=D8,g3="xychart",R8=g(e=>/^\s*xychart-beta/.test(e),"detector"),I8=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return kI});return{diagram:t}},void 0);return{id:g3,diagram:e}},"loader"),P8={id:g3,detector:R8,loader:I8},N8=P8,y3="requirement",M8=g(e=>/^\s*requirement(Diagram)?/.test(e),"detector"),F8=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return LI});return{diagram:t}},void 0);return{id:y3,diagram:e}},"loader"),O8={id:y3,detector:M8,loader:F8},$8=O8,v3="sequence",V8=g(e=>/^\s*sequenceDiagram/.test(e),"detector"),z8=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return dP});return{diagram:t}},void 0);return{id:v3,diagram:e}},"loader"),q8={id:v3,detector:V8,loader:z8},W8=q8,m3="class",G8=g((e,t)=>{var r;return((r=t==null?void 0:t.class)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(e)},"detector"),H8=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return mP});return{diagram:t}},void 0);return{id:m3,diagram:e}},"loader"),Y8={id:m3,detector:G8,loader:H8},U8=Y8,x3="classDiagram",X8=g((e,t)=>{var r;return/^\s*classDiagram/.test(e)&&((r=t==null?void 0:t.class)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(e)},"detector"),K8=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return bP});return{diagram:t}},void 0);return{id:x3,diagram:e}},"loader"),j8={id:x3,detector:X8,loader:K8},Q8=j8,b3="state",Z8=g((e,t)=>{var r;return((r=t==null?void 0:t.state)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(e)},"detector"),J8=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return gN});return{diagram:t}},void 0);return{id:b3,diagram:e}},"loader"),t7={id:b3,detector:Z8,loader:J8},e7=t7,w3="stateDiagram",r7=g((e,t)=>{var r;return!!(/^\s*stateDiagram-v2/.test(e)||/^\s*stateDiagram/.test(e)&&((r=t==null?void 0:t.state)==null?void 0:r.defaultRenderer)==="dagre-wrapper")},"detector"),a7=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return vN});return{diagram:t}},void 0);return{id:w3,diagram:e}},"loader"),i7={id:w3,detector:r7,loader:a7},n7=i7,k3="journey",s7=g(e=>/^\s*journey/.test(e),"detector"),o7=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return $N});return{diagram:t}},void 0);return{id:k3,diagram:e}},"loader"),l7={id:k3,detector:s7,loader:o7},c7=l7,u7=g((e,t,r)=>{G.debug(`rendering svg for syntax error
`);const a=Ii(t),i=a.append("g");a.attr("viewBox","0 0 2412 512"),da(a,100,512,!0),i.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),i.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),i.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),i.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),i.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),i.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),i.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),i.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)},"draw"),T3={draw:u7},h7=T3,d7={db:{},renderer:T3,parser:{parse:g(()=>{},"parse")}},f7=d7,C3="flowchart-elk",p7=g((e,t={})=>{var r;return/^\s*flowchart-elk/.test(e)||/^\s*flowchart|graph/.test(e)&&((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="elk"?(t.layout="elk",!0):!1},"detector"),g7=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return L0});return{diagram:t}},void 0);return{id:C3,diagram:e}},"loader"),y7={id:C3,detector:p7,loader:g7},v7=y7,S3="timeline",m7=g(e=>/^\s*timeline/.test(e),"detector"),x7=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return oM});return{diagram:t}},void 0);return{id:S3,diagram:e}},"loader"),b7={id:S3,detector:m7,loader:x7},w7=b7,E3="mindmap",k7=g(e=>/^\s*mindmap/.test(e),"detector"),T7=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return fW});return{diagram:t}},void 0);return{id:E3,diagram:e}},"loader"),C7={id:E3,detector:k7,loader:T7},S7=C7,_3="kanban",E7=g(e=>/^\s*kanban/.test(e),"detector"),_7=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return IW});return{diagram:t}},void 0);return{id:_3,diagram:e}},"loader"),A7={id:_3,detector:E7,loader:_7},L7=A7,A3="sankey",D7=g(e=>/^\s*sankey-beta/.test(e),"detector"),B7=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return QW});return{diagram:t}},void 0);return{id:A3,diagram:e}},"loader"),R7={id:A3,detector:D7,loader:B7},I7=R7,L3="packet",P7=g(e=>/^\s*packet-beta/.test(e),"detector"),N7=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return fG});return{diagram:t}},void 0);return{id:L3,diagram:e}},"loader"),M7={id:L3,detector:P7,loader:N7},D3="radar",F7=g(e=>/^\s*radar-beta/.test(e),"detector"),O7=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return PG});return{diagram:t}},void 0);return{id:D3,diagram:e}},"loader"),$7={id:D3,detector:F7,loader:O7},B3="block",V7=g(e=>/^\s*block-beta/.test(e),"detector"),z7=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return sY});return{diagram:t}},void 0);return{id:B3,diagram:e}},"loader"),q7={id:B3,detector:V7,loader:z7},W7=q7,R3="architecture",G7=g(e=>/^\s*architecture/.test(e),"detector"),H7=g(async()=>{const{diagram:e}=await _e(async()=>{const{diagram:t}=await Promise.resolve().then(function(){return WY});return{diagram:t}},void 0);return{id:R3,diagram:e}},"loader"),Y7={id:R3,detector:G7,loader:H7},U7=Y7,yy=!1,$h=g(()=>{yy||(yy=!0,Fu("error",f7,e=>e.toLowerCase().trim()==="error"),Fu("---",{db:{clear:g(()=>{},"clear")},styles:{},renderer:{draw:g(()=>{},"draw")},parser:{parse:g(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:g(()=>null,"init")},e=>e.toLowerCase().trimStart().startsWith("---")),gx(e8,L7,Q8,U8,f8,w8,C8,_8,$8,W8,v7,c8,n8,S7,w7,v8,n7,e7,c7,B8,I7,M7,N8,W7,U7,$7))},"addDiagrams"),X7=g(async()=>{G.debug("Loading registered diagrams");const t=(await Promise.allSettled(Object.entries(Eo).map(async([r,{detector:a,loader:i}])=>{if(i)try{mp(r)}catch{try{const{diagram:n,id:s}=await i();Fu(s,n,a)}catch(n){throw G.error(`Failed to load external diagram with key ${r}. Removing from detectors.`),delete Eo[r],n}}}))).filter(r=>r.status==="rejected");if(t.length>0){G.error(`Failed to load ${t.length} external diagrams`);for(const r of t)G.error(r);throw new Error(`Failed to load ${t.length} external diagrams`)}},"loadRegisteredDiagrams"),K7="graphics-document document";function I3(e,t){e.attr("role",K7),t!==""&&e.attr("aria-roledescription",t)}g(I3,"setA11yDiagramInfo");function P3(e,t,r,a){if(e.insert!==void 0){if(r){const i=`chart-desc-${a}`;e.attr("aria-describedby",i),e.insert("desc",":first-child").attr("id",i).text(r)}if(t){const i=`chart-title-${a}`;e.attr("aria-labelledby",i),e.insert("title",":first-child").attr("id",i).text(t)}}}g(P3,"addSVGa11yTitleDescription");var $n,Vp=($n=class{constructor(t,r,a,i,n){this.type=t,this.text=r,this.db=a,this.parser=i,this.renderer=n}static async fromText(t,r={}){var u,h;const a=$e(),i=Kg(t,a);t=K_(t)+`
`;try{mp(i)}catch{const d=UE(i);if(!d)throw new px(`Diagram ${i} not found.`);const{id:f,diagram:p}=await d();Fu(f,p)}const{db:n,parser:s,renderer:o,init:l}=mp(i);return s.parser&&(s.parser.yy=n),(u=n.clear)==null||u.call(n),l==null||l(a),r.title&&((h=n.setDiagramTitle)==null||h.call(n,r.title)),await s.parse(t),new $n(i,t,n,s,o)}async render(t,r){await this.renderer.draw(this.text,t,r,this)}getParser(){return this.parser}getType(){return this.type}},g($n,"Diagram"),$n),vy=[],j7=g(()=>{vy.forEach(e=>{e()}),vy=[]},"attachFunctions"),Q7=g(e=>e.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function N3(e){const t=e.match(fx);if(!t)return{text:e,metadata:{}};let r=u0(t[1],{schema:c0})??{};r=typeof r=="object"&&!Array.isArray(r)?r:{};const a={};return r.displayMode&&(a.displayMode=r.displayMode.toString()),r.title&&(a.title=r.title.toString()),r.config&&(a.config=r.config),{text:e.slice(t[0].length),metadata:a}}g(N3,"extractFrontMatter");var Z7=g(e=>e.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(t,r,a)=>"<"+r+a.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),J7=g(e=>{const{text:t,metadata:r}=N3(e),{displayMode:a,title:i,config:n={}}=r;return a&&(n.gantt||(n.gantt={}),n.gantt.displayMode=a),{title:i,config:n,text:t}},"processFrontmatter"),tL=g(e=>{const t=xe.detectInit(e)??{},r=xe.detectDirective(e,"wrap");return Array.isArray(r)?t.wrap=r.some(({type:a})=>a==="wrap"):(r==null?void 0:r.type)==="wrap"&&(t.wrap=!0),{text:$_(e),directive:t}},"processDirectives");function k0(e){const t=Z7(e),r=J7(t),a=tL(r.text),i=Pa(r.config,a.directive);return e=Q7(a.text),{code:e,title:r.title,config:i}}g(k0,"preprocessDiagram");function M3(e){const t=new TextEncoder().encode(e),r=Array.from(t,a=>String.fromCodePoint(a)).join("");return btoa(r)}g(M3,"toBase64");var eL=5e4,rL="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",aL="sandbox",iL="loose",nL="http://www.w3.org/2000/svg",sL="http://www.w3.org/1999/xlink",oL="http://www.w3.org/1999/xhtml",lL="100%",cL="100%",uL="border:0;margin:0;",hL="margin:0",dL="allow-top-navigation-by-user-activation allow-popups",fL='The "iframe" tag is not supported by your browser.',pL=["foreignobject"],gL=["dominant-baseline"];function T0(e){const t=k0(e);return Nu(),l6(t.config??{}),t}g(T0,"processAndSetConfigs");async function F3(e,t){$h();try{const{code:r,config:a}=T0(e);return{diagramType:(await $3(r)).type,config:a}}catch(r){if(t!=null&&t.suppressErrors)return!1;throw r}}g(F3,"parse");var my=g((e,t,r=[])=>`
.${e} ${t} { ${r.join(" !important; ")} !important; }`,"cssImportantStyles"),yL=g((e,t=new Map)=>{var a;let r="";if(e.themeCSS!==void 0&&(r+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),t instanceof Map){const o=e.htmlLabels??((a=e.flowchart)==null?void 0:a.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];t.forEach(l=>{ay(l.styles)||o.forEach(u=>{r+=my(l.id,u,l.styles)}),ay(l.textStyles)||(r+=my(l.id,"tspan",((l==null?void 0:l.textStyles)||[]).map(u=>u.replace("color","fill"))))})}return r},"createCssStyles"),vL=g((e,t,r,a)=>{const i=yL(e,r),n=E6(t,i,e.themeVariables);return rE(iE(`${a}{${n}}`),aE)},"createUserStyles"),mL=g((e="",t,r)=>{let a=e;return!r&&!t&&(a=a.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),a=oi(a),a=a.replace(/<br>/g,"<br/>"),a},"cleanUpSvgCode"),xL=g((e="",t)=>{var i,n;const r=(n=(i=t==null?void 0:t.viewBox)==null?void 0:i.baseVal)!=null&&n.height?t.viewBox.baseVal.height+"px":cL,a=M3(`<body style="${hL}">${e}</body>`);return`<iframe style="width:${lL};height:${r};${uL}" src="data:text/html;charset=UTF-8;base64,${a}" sandbox="${dL}">
  ${fL}
</iframe>`},"putIntoIFrame"),xy=g((e,t,r,a,i)=>{const n=e.append("div");n.attr("id",r),a&&n.attr("style",a);const s=n.append("svg").attr("id",t).attr("width","100%").attr("xmlns",nL);return i&&s.attr("xmlns:xlink",i),s.append("g"),e},"appendDivSvgG");function zp(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}g(zp,"sandboxedIframe");var bL=g((e,t,r,a)=>{var i,n,s;(i=e.getElementById(t))==null||i.remove(),(n=e.getElementById(r))==null||n.remove(),(s=e.getElementById(a))==null||s.remove()},"removeExistingElements"),wL=g(async function(e,t,r){var D,R,O,P,$,M;$h();const a=T0(t);t=a.code;const i=$e();G.debug(i),t.length>((i==null?void 0:i.maxTextSize)??eL)&&(t=rL);const n="#"+e,s="i"+e,o="#"+s,l="d"+e,u="#"+l,h=g(()=>{const F=It(f?o:u).node();F&&"remove"in F&&F.remove()},"removeTempElements");let d=It("body");const f=i.securityLevel===aL,p=i.securityLevel===iL,y=i.fontFamily;if(r!==void 0){if(r&&(r.innerHTML=""),f){const I=zp(It(r),s);d=It(I.nodes()[0].contentDocument.body),d.node().style.margin=0}else d=It(r);xy(d,e,l,`font-family: ${y}`,sL)}else{if(bL(document,e,l,s),f){const I=zp(It("body"),s);d=It(I.nodes()[0].contentDocument.body),d.node().style.margin=0}else d=It("body");xy(d,e,l)}let v,m;try{v=await Vp.fromText(t,{title:a.title})}catch(I){if(i.suppressErrorRendering)throw h(),I;v=await Vp.fromText("error"),m=I}const x=d.select(u).node(),b=v.type,w=x.firstChild,C=w.firstChild,T=(R=(D=v.renderer).getClasses)==null?void 0:R.call(D,t,v),k=vL(i,b,T,n),S=document.createElement("style");S.innerHTML=k,w.insertBefore(S,C);try{await v.renderer.draw(t,e,$p.version,v)}catch(I){throw i.suppressErrorRendering?h():h7.draw(t,e,$p.version),I}const L=d.select(`${u} svg`),_=(P=(O=v.db).getAccTitle)==null?void 0:P.call(O),A=(M=($=v.db).getAccDescription)==null?void 0:M.call($);V3(b,L,_,A),d.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns",oL);let E=d.select(u).node().innerHTML;if(G.debug("config.arrowMarkerAbsolute",i.arrowMarkerAbsolute),E=mL(E,f,Oe(i.arrowMarkerAbsolute)),f){const I=d.select(u+" svg").node();E=xL(E,I)}else p||(E=Co.sanitize(E,{ADD_TAGS:pL,ADD_ATTR:gL,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(j7(),m)throw m;return h(),{diagramType:b,svg:E,bindFunctions:v.db.bindFunctions}},"render");function O3(e={}){var a;const t=fr({},e);t!=null&&t.fontFamily&&!((a=t.themeVariables)!=null&&a.fontFamily)&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),s6(t),t!=null&&t.theme&&t.theme in _i?t.themeVariables=_i[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=_i.default.getThemeVariables(t.themeVariables));const r=typeof t=="object"?n6(t):bx();Xg(r.logLevel),$h()}g(O3,"initialize");var $3=g((e,t={})=>{const{code:r}=k0(e);return Vp.fromText(r,t)},"getDiagramFromText");function V3(e,t,r,a){I3(t,e),P3(t,r,a,t.attr("id"))}g(V3,"addA11yInfo");var qn=Object.freeze({render:wL,parse:F3,getDiagramFromText:$3,initialize:O3,getConfig:$e,setConfig:wx,getSiteConfig:bx,updateSiteConfig:o6,reset:g(()=>{Nu()},"reset"),globalReset:g(()=>{Nu(_o)},"globalReset"),defaultConfig:_o});Xg($e().logLevel);Nu($e());var kL=g((e,t,r)=>{G.warn(e),y0(e)?(r&&r(e.str,e.hash),t.push({...e,message:e.str,error:e})):(r&&r(e),e instanceof Error&&t.push({str:e.message,message:e.message,hash:e.name,error:e}))},"handleError"),z3=g(async function(e={querySelector:".mermaid"}){try{await TL(e)}catch(t){if(y0(t)&&G.error(t.str),va.parseError&&va.parseError(t),!e.suppressErrors)throw G.error("Use the suppressErrors option to suppress these errors"),t}},"run"),TL=g(async function({postRenderCallback:e,querySelector:t,nodes:r}={querySelector:".mermaid"}){const a=qn.getConfig();G.debug(`${e?"":"No "}Callback function found`);let i;if(r)i=r;else if(t)i=document.querySelectorAll(t);else throw new Error("Nodes and querySelector are both undefined");G.debug(`Found ${i.length} diagrams`),(a==null?void 0:a.startOnLoad)!==void 0&&(G.debug("Start On Load: "+(a==null?void 0:a.startOnLoad)),qn.updateSiteConfig({startOnLoad:a==null?void 0:a.startOnLoad}));const n=new xe.InitIDGenerator(a.deterministicIds,a.deterministicIDSeed);let s;const o=[];for(const l of Array.from(i)){if(G.info("Rendering diagram: "+l.id),l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const u=`mermaid-${n.next()}`;s=l.innerHTML,s=Z2(xe.entityDecode(s)).trim().replace(/<br\s*\/?>/gi,"<br/>");const h=xe.detectInit(s);h&&G.debug("Detected early reinit: ",h);try{const{svg:d,bindFunctions:f}=await H3(u,s,l);l.innerHTML=d,e&&await e(u),f&&f(l)}catch(d){kL(d,o,va.parseError)}}if(o.length>0)throw o[0]},"runThrowsErrors"),q3=g(function(e){qn.initialize(e)},"initialize"),CL=g(async function(e,t,r){G.warn("mermaid.init is deprecated. Please use run instead."),e&&q3(e);const a={postRenderCallback:r,querySelector:".mermaid"};typeof t=="string"?a.querySelector=t:t&&(t instanceof HTMLElement?a.nodes=[t]:a.nodes=t),await z3(a)},"init"),SL=g(async(e,{lazyLoad:t=!0}={})=>{$h(),gx(...e),t===!1&&await X7()},"registerExternalDiagrams"),W3=g(function(){if(va.startOnLoad){const{startOnLoad:e}=qn.getConfig();e&&va.run().catch(t=>G.error("Mermaid failed to initialize",t))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",W3,!1);var EL=g(function(e){va.parseError=e},"setParseErrorHandler"),Uu=[],Td=!1,G3=g(async()=>{if(!Td){for(Td=!0;Uu.length>0;){const e=Uu.shift();if(e)try{await e()}catch(t){G.error("Error executing queue",t)}}Td=!1}},"executeQueue"),_L=g(async(e,t)=>new Promise((r,a)=>{const i=g(()=>new Promise((n,s)=>{qn.parse(e,t).then(o=>{n(o),r(o)},o=>{var l;G.error("Error parsing",o),(l=va.parseError)==null||l.call(va,o),s(o),a(o)})}),"performCall");Uu.push(i),G3().catch(a)}),"parse"),H3=g((e,t,r)=>new Promise((a,i)=>{const n=g(()=>new Promise((s,o)=>{qn.render(e,t,r).then(l=>{s(l),a(l)},l=>{var u;G.error("Error parsing",l),(u=va.parseError)==null||u.call(va,l),o(l),i(l)})}),"performCall");Uu.push(n),G3().catch(i)}),"render"),va={startOnLoad:!0,mermaidAPI:qn,parse:_L,render:H3,init:CL,run:z3,registerExternalDiagrams:SL,registerLayoutLoaders:n3,initialize:q3,parseError:void 0,contentLoaded:W3,setParseErrorHandler:EL,detectType:Kg,registerIconPacks:f4},eU=va;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */var ke=new Map,Pn=new Map,Y3=new Map,AL=g(()=>{Pn.clear(),Y3.clear(),ke.clear()},"clear"),Xu=g((e,t)=>{const r=Pn.get(t)||[];return G.trace("In isDescendant",t," ",e," = ",r.includes(e)),r.includes(e)},"isDescendant"),LL=g((e,t)=>{const r=Pn.get(t)||[];return G.info("Descendants of ",t," is ",r),G.info("Edge is ",e),e.v===t||e.w===t?!1:r?r.includes(e.v)||Xu(e.v,t)||Xu(e.w,t)||r.includes(e.w):(G.debug("Tilt, ",t,",not in descendants"),!1)},"edgeInCluster"),U3=g((e,t,r,a)=>{G.warn("Copying children of ",e,"root",a,"data",t.node(e),a);const i=t.children(e)||[];e!==a&&i.push(e),G.warn("Copying (nodes) clusterId",e,"nodes",i),i.forEach(n=>{if(t.children(n).length>0)U3(n,t,r,a);else{const s=t.node(n);G.info("cp ",n," to ",a," with parent ",e),r.setNode(n,s),a!==t.parent(n)&&(G.warn("Setting parent",n,t.parent(n)),r.setParent(n,t.parent(n))),e!==a&&n!==e?(G.debug("Setting parent",n,e),r.setParent(n,e)):(G.info("In copy ",e,"root",a,"data",t.node(e),a),G.debug("Not Setting parent for node=",n,"cluster!==rootId",e!==a,"node!==clusterId",n!==e));const o=t.edges(n);G.debug("Copying Edges",o),o.forEach(l=>{G.info("Edge",l);const u=t.edge(l.v,l.w,l.name);G.info("Edge data",u,a);try{LL(l,a)?(G.info("Copying as ",l.v,l.w,u,l.name),r.setEdge(l.v,l.w,u,l.name),G.info("newGraph edges ",r.edges(),r.edge(r.edges()[0]))):G.info("Skipping copy of edge ",l.v,"-->",l.w," rootId: ",a," clusterId:",e)}catch(h){G.error(h)}})}G.debug("Removing node",n),t.removeNode(n)})},"copy"),X3=g((e,t)=>{const r=t.children(e);let a=[...r];for(const i of r)Y3.set(i,e),a=[...a,...X3(i,t)];return a},"extractDescendants"),DL=g((e,t,r)=>{const a=e.edges().filter(l=>l.v===t||l.w===t),i=e.edges().filter(l=>l.v===r||l.w===r),n=a.map(l=>({v:l.v===t?r:l.v,w:l.w===t?t:l.w})),s=i.map(l=>({v:l.v,w:l.w}));return n.filter(l=>s.some(u=>l.v===u.v&&l.w===u.w))},"findCommonEdges"),Wl=g((e,t,r)=>{const a=t.children(e);if(G.trace("Searching children of id ",e,a),a.length<1)return e;let i;for(const n of a){const s=Wl(n,t,r),o=DL(t,r,s);if(s)if(o.length>0)i=s;else return s}return i},"findNonClusterChild"),by=g(e=>!ke.has(e)||!ke.get(e).externalConnections?e:ke.has(e)?ke.get(e).id:e,"getAnchorId"),BL=g((e,t)=>{if(!e||t>10){G.debug("Opting out, no graph ");return}else G.debug("Opting in, graph ");e.nodes().forEach(function(r){e.children(r).length>0&&(G.warn("Cluster identified",r," Replacement id in edges: ",Wl(r,e,r)),Pn.set(r,X3(r,e)),ke.set(r,{id:Wl(r,e,r),clusterData:e.node(r)}))}),e.nodes().forEach(function(r){const a=e.children(r),i=e.edges();a.length>0?(G.debug("Cluster identified",r,Pn),i.forEach(n=>{const s=Xu(n.v,r),o=Xu(n.w,r);s^o&&(G.warn("Edge: ",n," leaves cluster ",r),G.warn("Descendants of XXX ",r,": ",Pn.get(r)),ke.get(r).externalConnections=!0)})):G.debug("Not a cluster ",r,Pn)});for(let r of ke.keys()){const a=ke.get(r).id,i=e.parent(a);i!==r&&ke.has(i)&&!ke.get(i).externalConnections&&(ke.get(r).id=i)}e.edges().forEach(function(r){const a=e.edge(r);G.warn("Edge "+r.v+" -> "+r.w+": "+JSON.stringify(r)),G.warn("Edge "+r.v+" -> "+r.w+": "+JSON.stringify(e.edge(r)));let i=r.v,n=r.w;if(G.warn("Fix XXX",ke,"ids:",r.v,r.w,"Translating: ",ke.get(r.v)," --- ",ke.get(r.w)),ke.get(r.v)||ke.get(r.w)){if(G.warn("Fixing and trying - removing XXX",r.v,r.w,r.name),i=by(r.v),n=by(r.w),e.removeEdge(r.v,r.w,r.name),i!==r.v){const s=e.parent(i);ke.get(s).externalConnections=!0,a.fromCluster=r.v}if(n!==r.w){const s=e.parent(n);ke.get(s).externalConnections=!0,a.toCluster=r.w}G.warn("Fix Replacing with XXX",i,n,r.name),e.setEdge(i,n,a,r.name)}}),G.warn("Adjusted Graph",ai(e)),K3(e,0),G.trace(ke)},"adjustClustersAndEdges"),K3=g((e,t)=>{var i,n;if(G.warn("extractor - ",t,ai(e),e.children("D")),t>10){G.error("Bailing out");return}let r=e.nodes(),a=!1;for(const s of r){const o=e.children(s);a=a||o.length>0}if(!a){G.debug("Done, no node has children",e.nodes());return}G.debug("Nodes = ",r,t);for(const s of r)if(G.debug("Extracting node",s,ke,ke.has(s)&&!ke.get(s).externalConnections,!e.parent(s),e.node(s),e.children("D")," Depth ",t),!ke.has(s))G.debug("Not a cluster",s,t);else if(!ke.get(s).externalConnections&&e.children(s)&&e.children(s).length>0){G.warn("Cluster without external connections, without a parent and with children",s,t);let l=e.graph().rankdir==="TB"?"LR":"TB";(n=(i=ke.get(s))==null?void 0:i.clusterData)!=null&&n.dir&&(l=ke.get(s).clusterData.dir,G.warn("Fixing dir",ke.get(s).clusterData.dir,l));const u=new Eh({multigraph:!0,compound:!0}).setGraph({rankdir:l,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});G.warn("Old graph before copy",ai(e)),U3(s,e,u,s),e.setNode(s,{clusterNode:!0,id:s,clusterData:ke.get(s).clusterData,label:ke.get(s).label,graph:u}),G.warn("New graph after copy node: (",s,")",ai(u)),G.debug("Old graph after copy",ai(e))}else G.warn("Cluster ** ",s," **not meeting the criteria !externalConnections:",!ke.get(s).externalConnections," no parent: ",!e.parent(s)," children ",e.children(s)&&e.children(s).length>0,e.children("D"),t),G.debug(ke);r=e.nodes(),G.warn("New list of nodes",r);for(const s of r){const o=e.node(s);G.warn(" Now next level",s,o),o!=null&&o.clusterNode&&K3(o.graph,t+1)}},"extractor"),j3=g((e,t)=>{if(t.length===0)return[];let r=Object.assign([],t);return t.forEach(a=>{const i=e.children(a),n=j3(e,i);r=[...r,...n]}),r},"sorter"),RL=g(e=>j3(e,e.children()),"sortNodesByHierarchy"),Q3=g(async(e,t,r,a,i,n)=>{G.warn("Graph in recursive render:XAX",ai(t),i);const s=t.graph().rankdir;G.trace("Dir in recursive render - dir:",s);const o=e.insert("g").attr("class","root");t.nodes()?G.info("Recursive render XXX",t.nodes()):G.info("No nodes found for",t),t.edges().length>0&&G.info("Recursive edges",t.edge(t.edges()[0]));const l=o.insert("g").attr("class","clusters"),u=o.insert("g").attr("class","edgePaths"),h=o.insert("g").attr("class","edgeLabels"),d=o.insert("g").attr("class","nodes");await Promise.all(t.nodes().map(async function(v){const m=t.node(v);if(i!==void 0){const x=JSON.parse(JSON.stringify(i.clusterData));G.trace(`Setting data for parent cluster XXX
 Node.id = `,v,`
 data=`,x.height,`
Parent cluster`,i.height),t.setNode(i.id,x),t.parent(v)||(G.trace("Setting parent",v,i.id),t.setParent(v,i.id,x))}if(G.info("(Insert) Node XXX"+v+": "+JSON.stringify(t.node(v))),m!=null&&m.clusterNode){G.info("Cluster identified XBX",v,m.width,t.node(v));const{ranksep:x,nodesep:b}=t.graph();m.graph.setGraph({...m.graph.graph(),ranksep:x+25,nodesep:b});const w=await Q3(d,m.graph,r,a,t.node(v),n),C=w.elem;se(m,C),m.diff=w.diff||0,G.info("New compound node after recursive render XAX",v,"width",m.width,"height",m.height),SA(C,m)}else t.children(v).length>0?(G.trace("Cluster - the non recursive path XBX",v,m.id,m,m.width,"Graph:",t),G.trace(Wl(m.id,t)),ke.set(m.id,{id:Wl(m.id,t),node:m})):(G.trace("Node - the non recursive path XAX",v,d,t.node(v),s),await Fh(d,t.node(v),{config:n,dir:s}))})),await g(async()=>{const v=t.edges().map(async function(m){const x=t.edge(m.v,m.w,m.name);G.info("Edge "+m.v+" -> "+m.w+": "+JSON.stringify(m)),G.info("Edge "+m.v+" -> "+m.w+": ",m," ",JSON.stringify(t.edge(m))),G.info("Fix",ke,"ids:",m.v,m.w,"Translating: ",ke.get(m.v),ke.get(m.w)),await t3(h,x)});await Promise.all(v)},"processEdges")(),G.info("Graph before layout:",JSON.stringify(ai(t))),G.info("############################################# XXX"),G.info("###                Layout                 ### XXX"),G.info("############################################# XXX"),cx(t),G.info("Graph after layout:",JSON.stringify(ai(t)));let p=0,{subGraphTitleTotalMargin:y}=hc(n);return await Promise.all(RL(t).map(async function(v){var x;const m=t.node(v);if(G.info("Position XBX => "+v+": ("+m.x,","+m.y,") width: ",m.width," height: ",m.height),m!=null&&m.clusterNode)m.y+=y,G.info("A tainted cluster node XBX1",v,m.id,m.width,m.height,m.x,m.y,t.parent(v)),ke.get(m.id).node=m,Op(m);else if(t.children(v).length>0){G.info("A pure cluster node XBX1",v,m.id,m.x,m.y,m.width,m.height,t.parent(v)),m.height+=y,t.node(m.parentId);const b=(m==null?void 0:m.padding)/2||0,w=((x=m==null?void 0:m.labelBBox)==null?void 0:x.height)||0,C=w-b||0;G.debug("OffsetY",C,"labelHeight",w,"halfPadding",b),await b0(l,m),ke.get(m.id).node=m}else{const b=t.node(m.parentId);m.y+=y/2,G.info("A regular node XBX1 - using the padding",m.id,"parent",m.parentId,m.width,m.height,m.x,m.y,"offsetY",m.offsetY,"parent",b,b==null?void 0:b.offsetY,m),Op(m)}})),t.edges().forEach(function(v){const m=t.edge(v);G.info("Edge "+v.v+" -> "+v.w+": "+JSON.stringify(m),m),m.points.forEach(C=>C.y+=y/2);const x=t.node(v.v);var b=t.node(v.w);const w=a3(u,m,ke,r,x,b,a);e3(m,w)}),t.nodes().forEach(function(v){const m=t.node(v);G.info(v,m.type,m.diff),m.isGroup&&(p=m.diff)}),G.warn("Returning from recursive render XAX",o,p),{elem:o,diff:p}},"recursiveRender"),IL=g(async(e,t)=>{var n,s,o,l,u,h;const r=new Eh({multigraph:!0,compound:!0}).setGraph({rankdir:e.direction,nodesep:((n=e.config)==null?void 0:n.nodeSpacing)||((o=(s=e.config)==null?void 0:s.flowchart)==null?void 0:o.nodeSpacing)||e.nodeSpacing,ranksep:((l=e.config)==null?void 0:l.rankSpacing)||((h=(u=e.config)==null?void 0:u.flowchart)==null?void 0:h.rankSpacing)||e.rankSpacing,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),a=t.select("g");i3(a,e.markers,e.type,e.diagramId),EA(),LA(),sA(),AL(),e.nodes.forEach(d=>{r.setNode(d.id,{...d}),d.parentId&&r.setParent(d.id,d.parentId)}),G.debug("Edges:",e.edges),e.edges.forEach(d=>{if(d.start===d.end){const f=d.start,p=f+"---"+f+"---1",y=f+"---"+f+"---2",v=r.node(f);r.setNode(p,{domId:p,id:p,parentId:v.parentId,labelStyle:"",label:"",padding:0,shape:"labelRect",style:"",width:10,height:10}),r.setParent(p,v.parentId),r.setNode(y,{domId:y,id:y,parentId:v.parentId,labelStyle:"",padding:0,shape:"labelRect",label:"",style:"",width:10,height:10}),r.setParent(y,v.parentId);const m=structuredClone(d),x=structuredClone(d),b=structuredClone(d);m.label="",m.arrowTypeEnd="none",m.id=f+"-cyclic-special-1",x.arrowTypeStart="none",x.arrowTypeEnd="none",x.id=f+"-cyclic-special-mid",b.label="",v.isGroup&&(m.fromCluster=f,b.toCluster=f),b.id=f+"-cyclic-special-2",b.arrowTypeStart="none",r.setEdge(f,p,m,f+"-cyclic-special-0"),r.setEdge(p,y,x,f+"-cyclic-special-1"),r.setEdge(y,f,b,f+"-cyc<lic-special-2")}else r.setEdge(d.start,d.end,{...d},d.id)}),G.warn("Graph at first:",JSON.stringify(ai(r))),BL(r),G.warn("Graph after XAX:",JSON.stringify(ai(r)));const i=dt();await Q3(a,r,e.type,e.diagramId,void 0,i)},"render");const PL=Object.freeze({__proto__:null,render:IL});var Vh=g((e,t)=>{const r=e.append("rect");if(r.attr("x",t.x),r.attr("y",t.y),r.attr("fill",t.fill),r.attr("stroke",t.stroke),r.attr("width",t.width),r.attr("height",t.height),t.name&&r.attr("name",t.name),t.rx&&r.attr("rx",t.rx),t.ry&&r.attr("ry",t.ry),t.attrs!==void 0)for(const a in t.attrs)r.attr(a,t.attrs[a]);return t.class&&r.attr("class",t.class),r},"drawRect"),Z3=g((e,t)=>{const r={x:t.startx,y:t.starty,width:t.stopx-t.startx,height:t.stopy-t.starty,fill:t.fill,stroke:t.stroke,class:"rect"};Vh(e,r).lower()},"drawBackgroundRect"),NL=g((e,t)=>{const r=t.text.replace(Go," "),a=e.append("text");a.attr("x",t.x),a.attr("y",t.y),a.attr("class","legend"),a.style("text-anchor",t.anchor),t.class&&a.attr("class",t.class);const i=a.append("tspan");return i.attr("x",t.x+t.textMargin*2),i.text(r),a},"drawText"),ML=g((e,t,r,a)=>{const i=e.append("image");i.attr("x",t),i.attr("y",r);const n=Kn.sanitizeUrl(a);i.attr("xlink:href",n)},"drawImage"),FL=g((e,t,r,a)=>{const i=e.append("use");i.attr("x",t),i.attr("y",r);const n=Kn.sanitizeUrl(a);i.attr("xlink:href",`#${n}`)},"drawEmbeddedImage"),jn=g(()=>({x:0,y:0,width:100,height:100,fill:"#EDF2AE",stroke:"#666",anchor:"start",rx:0,ry:0}),"getNoteRect"),C0=g(()=>({x:0,y:0,width:100,height:100,"text-anchor":"start",style:"#666",textMargin:0,rx:0,ry:0,tspan:!0}),"getTextObj"),Ku=function(){var e=g(function(At,xt,_t,vt){for(_t=_t||{},vt=At.length;vt--;_t[At[vt]]=xt);return _t},"o"),t=[1,24],r=[1,25],a=[1,26],i=[1,27],n=[1,28],s=[1,63],o=[1,64],l=[1,65],u=[1,66],h=[1,67],d=[1,68],f=[1,69],p=[1,29],y=[1,30],v=[1,31],m=[1,32],x=[1,33],b=[1,34],w=[1,35],C=[1,36],T=[1,37],k=[1,38],S=[1,39],L=[1,40],_=[1,41],A=[1,42],E=[1,43],D=[1,44],R=[1,45],O=[1,46],P=[1,47],$=[1,48],M=[1,50],I=[1,51],F=[1,52],V=[1,53],N=[1,54],q=[1,55],U=[1,56],X=[1,57],lt=[1,58],J=[1,59],ct=[1,60],yt=[14,42],ut=[14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],Q=[12,14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],K=[1,82],j=[1,83],Y=[1,84],st=[1,85],W=[12,14,42],bt=[12,14,33,42],tt=[12,14,33,42,76,77,79,80],H=[12,33],Et=[34,36,37,38,39,40,41,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],nt={trace:g(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,direction_tb:6,direction_bt:7,direction_rl:8,direction_lr:9,graphConfig:10,C4_CONTEXT:11,NEWLINE:12,statements:13,EOF:14,C4_CONTAINER:15,C4_COMPONENT:16,C4_DYNAMIC:17,C4_DEPLOYMENT:18,otherStatements:19,diagramStatements:20,otherStatement:21,title:22,accDescription:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,boundaryStatement:29,boundaryStartStatement:30,boundaryStopStatement:31,boundaryStart:32,LBRACE:33,ENTERPRISE_BOUNDARY:34,attributes:35,SYSTEM_BOUNDARY:36,BOUNDARY:37,CONTAINER_BOUNDARY:38,NODE:39,NODE_L:40,NODE_R:41,RBRACE:42,diagramStatement:43,PERSON:44,PERSON_EXT:45,SYSTEM:46,SYSTEM_DB:47,SYSTEM_QUEUE:48,SYSTEM_EXT:49,SYSTEM_EXT_DB:50,SYSTEM_EXT_QUEUE:51,CONTAINER:52,CONTAINER_DB:53,CONTAINER_QUEUE:54,CONTAINER_EXT:55,CONTAINER_EXT_DB:56,CONTAINER_EXT_QUEUE:57,COMPONENT:58,COMPONENT_DB:59,COMPONENT_QUEUE:60,COMPONENT_EXT:61,COMPONENT_EXT_DB:62,COMPONENT_EXT_QUEUE:63,REL:64,BIREL:65,REL_U:66,REL_D:67,REL_L:68,REL_R:69,REL_B:70,REL_INDEX:71,UPDATE_EL_STYLE:72,UPDATE_REL_STYLE:73,UPDATE_LAYOUT_CONFIG:74,attribute:75,STR:76,STR_KEY:77,STR_VALUE:78,ATTRIBUTE:79,ATTRIBUTE_EMPTY:80,$accept:0,$end:1},terminals_:{2:"error",6:"direction_tb",7:"direction_bt",8:"direction_rl",9:"direction_lr",11:"C4_CONTEXT",12:"NEWLINE",14:"EOF",15:"C4_CONTAINER",16:"C4_COMPONENT",17:"C4_DYNAMIC",18:"C4_DEPLOYMENT",22:"title",23:"accDescription",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"LBRACE",34:"ENTERPRISE_BOUNDARY",36:"SYSTEM_BOUNDARY",37:"BOUNDARY",38:"CONTAINER_BOUNDARY",39:"NODE",40:"NODE_L",41:"NODE_R",42:"RBRACE",44:"PERSON",45:"PERSON_EXT",46:"SYSTEM",47:"SYSTEM_DB",48:"SYSTEM_QUEUE",49:"SYSTEM_EXT",50:"SYSTEM_EXT_DB",51:"SYSTEM_EXT_QUEUE",52:"CONTAINER",53:"CONTAINER_DB",54:"CONTAINER_QUEUE",55:"CONTAINER_EXT",56:"CONTAINER_EXT_DB",57:"CONTAINER_EXT_QUEUE",58:"COMPONENT",59:"COMPONENT_DB",60:"COMPONENT_QUEUE",61:"COMPONENT_EXT",62:"COMPONENT_EXT_DB",63:"COMPONENT_EXT_QUEUE",64:"REL",65:"BIREL",66:"REL_U",67:"REL_D",68:"REL_L",69:"REL_R",70:"REL_B",71:"REL_INDEX",72:"UPDATE_EL_STYLE",73:"UPDATE_REL_STYLE",74:"UPDATE_LAYOUT_CONFIG",76:"STR",77:"STR_KEY",78:"STR_VALUE",79:"ATTRIBUTE",80:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[5,1],[5,1],[5,1],[5,1],[4,1],[10,4],[10,4],[10,4],[10,4],[10,4],[13,1],[13,1],[13,2],[19,1],[19,2],[19,3],[21,1],[21,1],[21,2],[21,2],[21,1],[29,3],[30,3],[30,3],[30,4],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[31,1],[20,1],[20,2],[20,3],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,1],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[35,1],[35,2],[75,1],[75,2],[75,1],[75,1]],performAction:g(function(xt,_t,vt,wt,St,at,Ct){var z=at.length-1;switch(St){case 3:wt.setDirection("TB");break;case 4:wt.setDirection("BT");break;case 5:wt.setDirection("RL");break;case 6:wt.setDirection("LR");break;case 8:case 9:case 10:case 11:case 12:wt.setC4Type(at[z-3]);break;case 19:wt.setTitle(at[z].substring(6)),this.$=at[z].substring(6);break;case 20:wt.setAccDescription(at[z].substring(15)),this.$=at[z].substring(15);break;case 21:this.$=at[z].trim(),wt.setTitle(this.$);break;case 22:case 23:this.$=at[z].trim(),wt.setAccDescription(this.$);break;case 28:at[z].splice(2,0,"ENTERPRISE"),wt.addPersonOrSystemBoundary(...at[z]),this.$=at[z];break;case 29:at[z].splice(2,0,"SYSTEM"),wt.addPersonOrSystemBoundary(...at[z]),this.$=at[z];break;case 30:wt.addPersonOrSystemBoundary(...at[z]),this.$=at[z];break;case 31:at[z].splice(2,0,"CONTAINER"),wt.addContainerBoundary(...at[z]),this.$=at[z];break;case 32:wt.addDeploymentNode("node",...at[z]),this.$=at[z];break;case 33:wt.addDeploymentNode("nodeL",...at[z]),this.$=at[z];break;case 34:wt.addDeploymentNode("nodeR",...at[z]),this.$=at[z];break;case 35:wt.popBoundaryParseStack();break;case 39:wt.addPersonOrSystem("person",...at[z]),this.$=at[z];break;case 40:wt.addPersonOrSystem("external_person",...at[z]),this.$=at[z];break;case 41:wt.addPersonOrSystem("system",...at[z]),this.$=at[z];break;case 42:wt.addPersonOrSystem("system_db",...at[z]),this.$=at[z];break;case 43:wt.addPersonOrSystem("system_queue",...at[z]),this.$=at[z];break;case 44:wt.addPersonOrSystem("external_system",...at[z]),this.$=at[z];break;case 45:wt.addPersonOrSystem("external_system_db",...at[z]),this.$=at[z];break;case 46:wt.addPersonOrSystem("external_system_queue",...at[z]),this.$=at[z];break;case 47:wt.addContainer("container",...at[z]),this.$=at[z];break;case 48:wt.addContainer("container_db",...at[z]),this.$=at[z];break;case 49:wt.addContainer("container_queue",...at[z]),this.$=at[z];break;case 50:wt.addContainer("external_container",...at[z]),this.$=at[z];break;case 51:wt.addContainer("external_container_db",...at[z]),this.$=at[z];break;case 52:wt.addContainer("external_container_queue",...at[z]),this.$=at[z];break;case 53:wt.addComponent("component",...at[z]),this.$=at[z];break;case 54:wt.addComponent("component_db",...at[z]),this.$=at[z];break;case 55:wt.addComponent("component_queue",...at[z]),this.$=at[z];break;case 56:wt.addComponent("external_component",...at[z]),this.$=at[z];break;case 57:wt.addComponent("external_component_db",...at[z]),this.$=at[z];break;case 58:wt.addComponent("external_component_queue",...at[z]),this.$=at[z];break;case 60:wt.addRel("rel",...at[z]),this.$=at[z];break;case 61:wt.addRel("birel",...at[z]),this.$=at[z];break;case 62:wt.addRel("rel_u",...at[z]),this.$=at[z];break;case 63:wt.addRel("rel_d",...at[z]),this.$=at[z];break;case 64:wt.addRel("rel_l",...at[z]),this.$=at[z];break;case 65:wt.addRel("rel_r",...at[z]),this.$=at[z];break;case 66:wt.addRel("rel_b",...at[z]),this.$=at[z];break;case 67:at[z].splice(0,1),wt.addRel("rel",...at[z]),this.$=at[z];break;case 68:wt.updateElStyle("update_el_style",...at[z]),this.$=at[z];break;case 69:wt.updateRelStyle("update_rel_style",...at[z]),this.$=at[z];break;case 70:wt.updateLayoutConfig("update_layout_config",...at[z]),this.$=at[z];break;case 71:this.$=[at[z]];break;case 72:at[z].unshift(at[z-1]),this.$=at[z];break;case 73:case 75:this.$=at[z].trim();break;case 74:let ft={};ft[at[z-1].trim()]=at[z].trim(),this.$=ft;break;case 76:this.$="";break}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],7:[1,6],8:[1,7],9:[1,8],10:4,11:[1,9],15:[1,10],16:[1,11],17:[1,12],18:[1,13]},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,7]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{12:[1,14]},{12:[1,15]},{12:[1,16]},{12:[1,17]},{12:[1,18]},{13:19,19:20,20:21,21:22,22:t,23:r,24:a,26:i,28:n,29:49,30:61,32:62,34:s,36:o,37:l,38:u,39:h,40:d,41:f,43:23,44:p,45:y,46:v,47:m,48:x,49:b,50:w,51:C,52:T,53:k,54:S,55:L,56:_,57:A,58:E,59:D,60:R,61:O,62:P,63:$,64:M,65:I,66:F,67:V,68:N,69:q,70:U,71:X,72:lt,73:J,74:ct},{13:70,19:20,20:21,21:22,22:t,23:r,24:a,26:i,28:n,29:49,30:61,32:62,34:s,36:o,37:l,38:u,39:h,40:d,41:f,43:23,44:p,45:y,46:v,47:m,48:x,49:b,50:w,51:C,52:T,53:k,54:S,55:L,56:_,57:A,58:E,59:D,60:R,61:O,62:P,63:$,64:M,65:I,66:F,67:V,68:N,69:q,70:U,71:X,72:lt,73:J,74:ct},{13:71,19:20,20:21,21:22,22:t,23:r,24:a,26:i,28:n,29:49,30:61,32:62,34:s,36:o,37:l,38:u,39:h,40:d,41:f,43:23,44:p,45:y,46:v,47:m,48:x,49:b,50:w,51:C,52:T,53:k,54:S,55:L,56:_,57:A,58:E,59:D,60:R,61:O,62:P,63:$,64:M,65:I,66:F,67:V,68:N,69:q,70:U,71:X,72:lt,73:J,74:ct},{13:72,19:20,20:21,21:22,22:t,23:r,24:a,26:i,28:n,29:49,30:61,32:62,34:s,36:o,37:l,38:u,39:h,40:d,41:f,43:23,44:p,45:y,46:v,47:m,48:x,49:b,50:w,51:C,52:T,53:k,54:S,55:L,56:_,57:A,58:E,59:D,60:R,61:O,62:P,63:$,64:M,65:I,66:F,67:V,68:N,69:q,70:U,71:X,72:lt,73:J,74:ct},{13:73,19:20,20:21,21:22,22:t,23:r,24:a,26:i,28:n,29:49,30:61,32:62,34:s,36:o,37:l,38:u,39:h,40:d,41:f,43:23,44:p,45:y,46:v,47:m,48:x,49:b,50:w,51:C,52:T,53:k,54:S,55:L,56:_,57:A,58:E,59:D,60:R,61:O,62:P,63:$,64:M,65:I,66:F,67:V,68:N,69:q,70:U,71:X,72:lt,73:J,74:ct},{14:[1,74]},e(yt,[2,13],{43:23,29:49,30:61,32:62,20:75,34:s,36:o,37:l,38:u,39:h,40:d,41:f,44:p,45:y,46:v,47:m,48:x,49:b,50:w,51:C,52:T,53:k,54:S,55:L,56:_,57:A,58:E,59:D,60:R,61:O,62:P,63:$,64:M,65:I,66:F,67:V,68:N,69:q,70:U,71:X,72:lt,73:J,74:ct}),e(yt,[2,14]),e(ut,[2,16],{12:[1,76]}),e(yt,[2,36],{12:[1,77]}),e(Q,[2,19]),e(Q,[2,20]),{25:[1,78]},{27:[1,79]},e(Q,[2,23]),{35:80,75:81,76:K,77:j,79:Y,80:st},{35:86,75:81,76:K,77:j,79:Y,80:st},{35:87,75:81,76:K,77:j,79:Y,80:st},{35:88,75:81,76:K,77:j,79:Y,80:st},{35:89,75:81,76:K,77:j,79:Y,80:st},{35:90,75:81,76:K,77:j,79:Y,80:st},{35:91,75:81,76:K,77:j,79:Y,80:st},{35:92,75:81,76:K,77:j,79:Y,80:st},{35:93,75:81,76:K,77:j,79:Y,80:st},{35:94,75:81,76:K,77:j,79:Y,80:st},{35:95,75:81,76:K,77:j,79:Y,80:st},{35:96,75:81,76:K,77:j,79:Y,80:st},{35:97,75:81,76:K,77:j,79:Y,80:st},{35:98,75:81,76:K,77:j,79:Y,80:st},{35:99,75:81,76:K,77:j,79:Y,80:st},{35:100,75:81,76:K,77:j,79:Y,80:st},{35:101,75:81,76:K,77:j,79:Y,80:st},{35:102,75:81,76:K,77:j,79:Y,80:st},{35:103,75:81,76:K,77:j,79:Y,80:st},{35:104,75:81,76:K,77:j,79:Y,80:st},e(W,[2,59]),{35:105,75:81,76:K,77:j,79:Y,80:st},{35:106,75:81,76:K,77:j,79:Y,80:st},{35:107,75:81,76:K,77:j,79:Y,80:st},{35:108,75:81,76:K,77:j,79:Y,80:st},{35:109,75:81,76:K,77:j,79:Y,80:st},{35:110,75:81,76:K,77:j,79:Y,80:st},{35:111,75:81,76:K,77:j,79:Y,80:st},{35:112,75:81,76:K,77:j,79:Y,80:st},{35:113,75:81,76:K,77:j,79:Y,80:st},{35:114,75:81,76:K,77:j,79:Y,80:st},{35:115,75:81,76:K,77:j,79:Y,80:st},{20:116,29:49,30:61,32:62,34:s,36:o,37:l,38:u,39:h,40:d,41:f,43:23,44:p,45:y,46:v,47:m,48:x,49:b,50:w,51:C,52:T,53:k,54:S,55:L,56:_,57:A,58:E,59:D,60:R,61:O,62:P,63:$,64:M,65:I,66:F,67:V,68:N,69:q,70:U,71:X,72:lt,73:J,74:ct},{12:[1,118],33:[1,117]},{35:119,75:81,76:K,77:j,79:Y,80:st},{35:120,75:81,76:K,77:j,79:Y,80:st},{35:121,75:81,76:K,77:j,79:Y,80:st},{35:122,75:81,76:K,77:j,79:Y,80:st},{35:123,75:81,76:K,77:j,79:Y,80:st},{35:124,75:81,76:K,77:j,79:Y,80:st},{35:125,75:81,76:K,77:j,79:Y,80:st},{14:[1,126]},{14:[1,127]},{14:[1,128]},{14:[1,129]},{1:[2,8]},e(yt,[2,15]),e(ut,[2,17],{21:22,19:130,22:t,23:r,24:a,26:i,28:n}),e(yt,[2,37],{19:20,20:21,21:22,43:23,29:49,30:61,32:62,13:131,22:t,23:r,24:a,26:i,28:n,34:s,36:o,37:l,38:u,39:h,40:d,41:f,44:p,45:y,46:v,47:m,48:x,49:b,50:w,51:C,52:T,53:k,54:S,55:L,56:_,57:A,58:E,59:D,60:R,61:O,62:P,63:$,64:M,65:I,66:F,67:V,68:N,69:q,70:U,71:X,72:lt,73:J,74:ct}),e(Q,[2,21]),e(Q,[2,22]),e(W,[2,39]),e(bt,[2,71],{75:81,35:132,76:K,77:j,79:Y,80:st}),e(tt,[2,73]),{78:[1,133]},e(tt,[2,75]),e(tt,[2,76]),e(W,[2,40]),e(W,[2,41]),e(W,[2,42]),e(W,[2,43]),e(W,[2,44]),e(W,[2,45]),e(W,[2,46]),e(W,[2,47]),e(W,[2,48]),e(W,[2,49]),e(W,[2,50]),e(W,[2,51]),e(W,[2,52]),e(W,[2,53]),e(W,[2,54]),e(W,[2,55]),e(W,[2,56]),e(W,[2,57]),e(W,[2,58]),e(W,[2,60]),e(W,[2,61]),e(W,[2,62]),e(W,[2,63]),e(W,[2,64]),e(W,[2,65]),e(W,[2,66]),e(W,[2,67]),e(W,[2,68]),e(W,[2,69]),e(W,[2,70]),{31:134,42:[1,135]},{12:[1,136]},{33:[1,137]},e(H,[2,28]),e(H,[2,29]),e(H,[2,30]),e(H,[2,31]),e(H,[2,32]),e(H,[2,33]),e(H,[2,34]),{1:[2,9]},{1:[2,10]},{1:[2,11]},{1:[2,12]},e(ut,[2,18]),e(yt,[2,38]),e(bt,[2,72]),e(tt,[2,74]),e(W,[2,24]),e(W,[2,35]),e(Et,[2,25]),e(Et,[2,26],{12:[1,138]}),e(Et,[2,27])],defaultActions:{2:[2,1],3:[2,2],4:[2,7],5:[2,3],6:[2,4],7:[2,5],8:[2,6],74:[2,8],126:[2,9],127:[2,10],128:[2,11],129:[2,12]},parseError:g(function(xt,_t){if(_t.recoverable)this.trace(xt);else{var vt=new Error(xt);throw vt.hash=_t,vt}},"parseError"),parse:g(function(xt){var _t=this,vt=[0],wt=[],St=[null],at=[],Ct=this.table,z="",ft=0,B=0,et=2,Z=1,ht=at.slice.call(arguments,1),ot=Object.create(this.lexer),pt={yy:{}};for(var gt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,gt)&&(pt.yy[gt]=this.yy[gt]);ot.setInput(xt,pt.yy),pt.yy.lexer=ot,pt.yy.parser=this,typeof ot.yylloc>"u"&&(ot.yylloc={});var kt=ot.yylloc;at.push(kt);var Ft=ot.options&&ot.options.ranges;typeof pt.yy.parseError=="function"?this.parseError=pt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Ht(jt){vt.length=vt.length-2*jt,St.length=St.length-jt,at.length=at.length-jt}g(Ht,"popStack");function Pt(){var jt;return jt=wt.pop()||ot.lex()||Z,typeof jt!="number"&&(jt instanceof Array&&(wt=jt,jt=wt.pop()),jt=_t.symbols_[jt]||jt),jt}g(Pt,"lex");for(var Ot,Gt,Bt,te,ue={},Ce,Wt,de,$t;;){if(Gt=vt[vt.length-1],this.defaultActions[Gt]?Bt=this.defaultActions[Gt]:((Ot===null||typeof Ot>"u")&&(Ot=Pt()),Bt=Ct[Gt]&&Ct[Gt][Ot]),typeof Bt>"u"||!Bt.length||!Bt[0]){var Jt="";$t=[];for(Ce in Ct[Gt])this.terminals_[Ce]&&Ce>et&&$t.push("'"+this.terminals_[Ce]+"'");ot.showPosition?Jt="Parse error on line "+(ft+1)+`:
`+ot.showPosition()+`
Expecting `+$t.join(", ")+", got '"+(this.terminals_[Ot]||Ot)+"'":Jt="Parse error on line "+(ft+1)+": Unexpected "+(Ot==Z?"end of input":"'"+(this.terminals_[Ot]||Ot)+"'"),this.parseError(Jt,{text:ot.match,token:this.terminals_[Ot]||Ot,line:ot.yylineno,loc:kt,expected:$t})}if(Bt[0]instanceof Array&&Bt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Gt+", token: "+Ot);switch(Bt[0]){case 1:vt.push(Ot),St.push(ot.yytext),at.push(ot.yylloc),vt.push(Bt[1]),Ot=null,B=ot.yyleng,z=ot.yytext,ft=ot.yylineno,kt=ot.yylloc;break;case 2:if(Wt=this.productions_[Bt[1]][1],ue.$=St[St.length-Wt],ue._$={first_line:at[at.length-(Wt||1)].first_line,last_line:at[at.length-1].last_line,first_column:at[at.length-(Wt||1)].first_column,last_column:at[at.length-1].last_column},Ft&&(ue._$.range=[at[at.length-(Wt||1)].range[0],at[at.length-1].range[1]]),te=this.performAction.apply(ue,[z,B,ft,pt.yy,Bt[1],St,at].concat(ht)),typeof te<"u")return te;Wt&&(vt=vt.slice(0,-1*Wt*2),St=St.slice(0,-1*Wt),at=at.slice(0,-1*Wt)),vt.push(this.productions_[Bt[1]][0]),St.push(ue.$),at.push(ue._$),de=Ct[vt[vt.length-2]][vt[vt.length-1]],vt.push(de);break;case 3:return!0}}return!0},"parse")},Lt=function(){var At={EOF:1,parseError:g(function(_t,vt){if(this.yy.parser)this.yy.parser.parseError(_t,vt);else throw new Error(_t)},"parseError"),setInput:g(function(xt,_t){return this.yy=_t||this.yy||{},this._input=xt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:g(function(){var xt=this._input[0];this.yytext+=xt,this.yyleng++,this.offset++,this.match+=xt,this.matched+=xt;var _t=xt.match(/(?:\r\n?|\n).*/g);return _t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),xt},"input"),unput:g(function(xt){var _t=xt.length,vt=xt.split(/(?:\r\n?|\n)/g);this._input=xt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-_t),this.offset-=_t;var wt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),vt.length-1&&(this.yylineno-=vt.length-1);var St=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:vt?(vt.length===wt.length?this.yylloc.first_column:0)+wt[wt.length-vt.length].length-vt[0].length:this.yylloc.first_column-_t},this.options.ranges&&(this.yylloc.range=[St[0],St[0]+this.yyleng-_t]),this.yyleng=this.yytext.length,this},"unput"),more:g(function(){return this._more=!0,this},"more"),reject:g(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:g(function(xt){this.unput(this.match.slice(xt))},"less"),pastInput:g(function(){var xt=this.matched.substr(0,this.matched.length-this.match.length);return(xt.length>20?"...":"")+xt.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:g(function(){var xt=this.match;return xt.length<20&&(xt+=this._input.substr(0,20-xt.length)),(xt.substr(0,20)+(xt.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:g(function(){var xt=this.pastInput(),_t=new Array(xt.length+1).join("-");return xt+this.upcomingInput()+`
`+_t+"^"},"showPosition"),test_match:g(function(xt,_t){var vt,wt,St;if(this.options.backtrack_lexer&&(St={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(St.yylloc.range=this.yylloc.range.slice(0))),wt=xt[0].match(/(?:\r\n?|\n).*/g),wt&&(this.yylineno+=wt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:wt?wt[wt.length-1].length-wt[wt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+xt[0].length},this.yytext+=xt[0],this.match+=xt[0],this.matches=xt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(xt[0].length),this.matched+=xt[0],vt=this.performAction.call(this,this.yy,this,_t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),vt)return vt;if(this._backtrack){for(var at in St)this[at]=St[at];return!1}return!1},"test_match"),next:g(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var xt,_t,vt,wt;this._more||(this.yytext="",this.match="");for(var St=this._currentRules(),at=0;at<St.length;at++)if(vt=this._input.match(this.rules[St[at]]),vt&&(!_t||vt[0].length>_t[0].length)){if(_t=vt,wt=at,this.options.backtrack_lexer){if(xt=this.test_match(vt,St[at]),xt!==!1)return xt;if(this._backtrack){_t=!1;continue}else return!1}else if(!this.options.flex)break}return _t?(xt=this.test_match(_t,St[wt]),xt!==!1?xt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:g(function(){var _t=this.next();return _t||this.lex()},"lex"),begin:g(function(_t){this.conditionStack.push(_t)},"begin"),popState:g(function(){var _t=this.conditionStack.length-1;return _t>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:g(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:g(function(_t){return _t=this.conditionStack.length-1-Math.abs(_t||0),_t>=0?this.conditionStack[_t]:"INITIAL"},"topState"),pushState:g(function(_t){this.begin(_t)},"pushState"),stateStackSize:g(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:g(function(_t,vt,wt,St){switch(wt){case 0:return 6;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 22;case 5:return 23;case 6:return this.begin("acc_title"),24;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),26;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:break;case 14:c;break;case 15:return 12;case 16:break;case 17:return 11;case 18:return 15;case 19:return 16;case 20:return 17;case 21:return 18;case 22:return this.begin("person_ext"),45;case 23:return this.begin("person"),44;case 24:return this.begin("system_ext_queue"),51;case 25:return this.begin("system_ext_db"),50;case 26:return this.begin("system_ext"),49;case 27:return this.begin("system_queue"),48;case 28:return this.begin("system_db"),47;case 29:return this.begin("system"),46;case 30:return this.begin("boundary"),37;case 31:return this.begin("enterprise_boundary"),34;case 32:return this.begin("system_boundary"),36;case 33:return this.begin("container_ext_queue"),57;case 34:return this.begin("container_ext_db"),56;case 35:return this.begin("container_ext"),55;case 36:return this.begin("container_queue"),54;case 37:return this.begin("container_db"),53;case 38:return this.begin("container"),52;case 39:return this.begin("container_boundary"),38;case 40:return this.begin("component_ext_queue"),63;case 41:return this.begin("component_ext_db"),62;case 42:return this.begin("component_ext"),61;case 43:return this.begin("component_queue"),60;case 44:return this.begin("component_db"),59;case 45:return this.begin("component"),58;case 46:return this.begin("node"),39;case 47:return this.begin("node"),39;case 48:return this.begin("node_l"),40;case 49:return this.begin("node_r"),41;case 50:return this.begin("rel"),64;case 51:return this.begin("birel"),65;case 52:return this.begin("rel_u"),66;case 53:return this.begin("rel_u"),66;case 54:return this.begin("rel_d"),67;case 55:return this.begin("rel_d"),67;case 56:return this.begin("rel_l"),68;case 57:return this.begin("rel_l"),68;case 58:return this.begin("rel_r"),69;case 59:return this.begin("rel_r"),69;case 60:return this.begin("rel_b"),70;case 61:return this.begin("rel_index"),71;case 62:return this.begin("update_el_style"),72;case 63:return this.begin("update_rel_style"),73;case 64:return this.begin("update_layout_config"),74;case 65:return"EOF_IN_STRUCT";case 66:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 67:this.begin("attribute");break;case 68:this.popState(),this.popState();break;case 69:return 80;case 70:break;case 71:return 80;case 72:this.begin("string");break;case 73:this.popState();break;case 74:return"STR";case 75:this.begin("string_kv");break;case 76:return this.begin("string_kv_key"),"STR_KEY";case 77:this.popState(),this.begin("string_kv_value");break;case 78:return"STR_VALUE";case 79:this.popState(),this.popState();break;case 80:return"STR";case 81:return"LBRACE";case 82:return"RBRACE";case 83:return"SPACE";case 84:return"EOL";case 85:return 14}},"anonymous"),rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},string_kv_value:{rules:[78,79],inclusive:!1},string_kv_key:{rules:[77],inclusive:!1},string_kv:{rules:[76],inclusive:!1},string:{rules:[73,74],inclusive:!1},attribute:{rules:[68,69,70,71,72,75,80],inclusive:!1},update_layout_config:{rules:[65,66,67,68],inclusive:!1},update_rel_style:{rules:[65,66,67,68],inclusive:!1},update_el_style:{rules:[65,66,67,68],inclusive:!1},rel_b:{rules:[65,66,67,68],inclusive:!1},rel_r:{rules:[65,66,67,68],inclusive:!1},rel_l:{rules:[65,66,67,68],inclusive:!1},rel_d:{rules:[65,66,67,68],inclusive:!1},rel_u:{rules:[65,66,67,68],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[65,66,67,68],inclusive:!1},node_r:{rules:[65,66,67,68],inclusive:!1},node_l:{rules:[65,66,67,68],inclusive:!1},node:{rules:[65,66,67,68],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[65,66,67,68],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[65,66,67,68],inclusive:!1},component_ext:{rules:[65,66,67,68],inclusive:!1},component_queue:{rules:[65,66,67,68],inclusive:!1},component_db:{rules:[65,66,67,68],inclusive:!1},component:{rules:[65,66,67,68],inclusive:!1},container_boundary:{rules:[65,66,67,68],inclusive:!1},container_ext_queue:{rules:[65,66,67,68],inclusive:!1},container_ext_db:{rules:[65,66,67,68],inclusive:!1},container_ext:{rules:[65,66,67,68],inclusive:!1},container_queue:{rules:[65,66,67,68],inclusive:!1},container_db:{rules:[65,66,67,68],inclusive:!1},container:{rules:[65,66,67,68],inclusive:!1},birel:{rules:[65,66,67,68],inclusive:!1},system_boundary:{rules:[65,66,67,68],inclusive:!1},enterprise_boundary:{rules:[65,66,67,68],inclusive:!1},boundary:{rules:[65,66,67,68],inclusive:!1},system_ext_queue:{rules:[65,66,67,68],inclusive:!1},system_ext_db:{rules:[65,66,67,68],inclusive:!1},system_ext:{rules:[65,66,67,68],inclusive:!1},system_queue:{rules:[65,66,67,68],inclusive:!1},system_db:{rules:[65,66,67,68],inclusive:!1},system:{rules:[65,66,67,68],inclusive:!1},person_ext:{rules:[65,66,67,68],inclusive:!1},person:{rules:[65,66,67,68],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,81,82,83,84,85],inclusive:!0}}};return At}();nt.lexer=Lt;function Dt(){this.yy={}}return g(Dt,"Parser"),Dt.prototype=nt,nt.Parser=Dt,new Dt}();Ku.parser=Ku;var OL=Ku,Ya=[],Xi=[""],ta="global",qa="",li=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],Gl=[],S0="",E0=!1,ju=4,Qu=2,J3,$L=g(function(){return J3},"getC4Type"),VL=g(function(e){J3=qe(e,dt())},"setC4Type"),zL=g(function(e,t,r,a,i,n,s,o,l){if(e==null||t===void 0||t===null||r===void 0||r===null||a===void 0||a===null)return;let u={};const h=Gl.find(d=>d.from===t&&d.to===r);if(h?u=h:Gl.push(u),u.type=e,u.from=t,u.to=r,u.label={text:a},i==null)u.techn={text:""};else if(typeof i=="object"){let[d,f]=Object.entries(i)[0];u[d]={text:f}}else u.techn={text:i};if(n==null)u.descr={text:""};else if(typeof n=="object"){let[d,f]=Object.entries(n)[0];u[d]={text:f}}else u.descr={text:n};if(typeof s=="object"){let[d,f]=Object.entries(s)[0];u[d]=f}else u.sprite=s;if(typeof o=="object"){let[d,f]=Object.entries(o)[0];u[d]=f}else u.tags=o;if(typeof l=="object"){let[d,f]=Object.entries(l)[0];u[d]=f}else u.link=l;u.wrap=cn()},"addRel"),qL=g(function(e,t,r,a,i,n,s){if(t===null||r===null)return;let o={};const l=Ya.find(u=>u.alias===t);if(l&&t===l.alias?o=l:(o.alias=t,Ya.push(o)),r==null?o.label={text:""}:o.label={text:r},a==null)o.descr={text:""};else if(typeof a=="object"){let[u,h]=Object.entries(a)[0];o[u]={text:h}}else o.descr={text:a};if(typeof i=="object"){let[u,h]=Object.entries(i)[0];o[u]=h}else o.sprite=i;if(typeof n=="object"){let[u,h]=Object.entries(n)[0];o[u]=h}else o.tags=n;if(typeof s=="object"){let[u,h]=Object.entries(s)[0];o[u]=h}else o.link=s;o.typeC4Shape={text:e},o.parentBoundary=ta,o.wrap=cn()},"addPersonOrSystem"),WL=g(function(e,t,r,a,i,n,s,o){if(t===null||r===null)return;let l={};const u=Ya.find(h=>h.alias===t);if(u&&t===u.alias?l=u:(l.alias=t,Ya.push(l)),r==null?l.label={text:""}:l.label={text:r},a==null)l.techn={text:""};else if(typeof a=="object"){let[h,d]=Object.entries(a)[0];l[h]={text:d}}else l.techn={text:a};if(i==null)l.descr={text:""};else if(typeof i=="object"){let[h,d]=Object.entries(i)[0];l[h]={text:d}}else l.descr={text:i};if(typeof n=="object"){let[h,d]=Object.entries(n)[0];l[h]=d}else l.sprite=n;if(typeof s=="object"){let[h,d]=Object.entries(s)[0];l[h]=d}else l.tags=s;if(typeof o=="object"){let[h,d]=Object.entries(o)[0];l[h]=d}else l.link=o;l.wrap=cn(),l.typeC4Shape={text:e},l.parentBoundary=ta},"addContainer"),GL=g(function(e,t,r,a,i,n,s,o){if(t===null||r===null)return;let l={};const u=Ya.find(h=>h.alias===t);if(u&&t===u.alias?l=u:(l.alias=t,Ya.push(l)),r==null?l.label={text:""}:l.label={text:r},a==null)l.techn={text:""};else if(typeof a=="object"){let[h,d]=Object.entries(a)[0];l[h]={text:d}}else l.techn={text:a};if(i==null)l.descr={text:""};else if(typeof i=="object"){let[h,d]=Object.entries(i)[0];l[h]={text:d}}else l.descr={text:i};if(typeof n=="object"){let[h,d]=Object.entries(n)[0];l[h]=d}else l.sprite=n;if(typeof s=="object"){let[h,d]=Object.entries(s)[0];l[h]=d}else l.tags=s;if(typeof o=="object"){let[h,d]=Object.entries(o)[0];l[h]=d}else l.link=o;l.wrap=cn(),l.typeC4Shape={text:e},l.parentBoundary=ta},"addComponent"),HL=g(function(e,t,r,a,i){if(e===null||t===null)return;let n={};const s=li.find(o=>o.alias===e);if(s&&e===s.alias?n=s:(n.alias=e,li.push(n)),t==null?n.label={text:""}:n.label={text:t},r==null)n.type={text:"system"};else if(typeof r=="object"){let[o,l]=Object.entries(r)[0];n[o]={text:l}}else n.type={text:r};if(typeof a=="object"){let[o,l]=Object.entries(a)[0];n[o]=l}else n.tags=a;if(typeof i=="object"){let[o,l]=Object.entries(i)[0];n[o]=l}else n.link=i;n.parentBoundary=ta,n.wrap=cn(),qa=ta,ta=e,Xi.push(qa)},"addPersonOrSystemBoundary"),YL=g(function(e,t,r,a,i){if(e===null||t===null)return;let n={};const s=li.find(o=>o.alias===e);if(s&&e===s.alias?n=s:(n.alias=e,li.push(n)),t==null?n.label={text:""}:n.label={text:t},r==null)n.type={text:"container"};else if(typeof r=="object"){let[o,l]=Object.entries(r)[0];n[o]={text:l}}else n.type={text:r};if(typeof a=="object"){let[o,l]=Object.entries(a)[0];n[o]=l}else n.tags=a;if(typeof i=="object"){let[o,l]=Object.entries(i)[0];n[o]=l}else n.link=i;n.parentBoundary=ta,n.wrap=cn(),qa=ta,ta=e,Xi.push(qa)},"addContainerBoundary"),UL=g(function(e,t,r,a,i,n,s,o){if(t===null||r===null)return;let l={};const u=li.find(h=>h.alias===t);if(u&&t===u.alias?l=u:(l.alias=t,li.push(l)),r==null?l.label={text:""}:l.label={text:r},a==null)l.type={text:"node"};else if(typeof a=="object"){let[h,d]=Object.entries(a)[0];l[h]={text:d}}else l.type={text:a};if(i==null)l.descr={text:""};else if(typeof i=="object"){let[h,d]=Object.entries(i)[0];l[h]={text:d}}else l.descr={text:i};if(typeof s=="object"){let[h,d]=Object.entries(s)[0];l[h]=d}else l.tags=s;if(typeof o=="object"){let[h,d]=Object.entries(o)[0];l[h]=d}else l.link=o;l.nodeType=e,l.parentBoundary=ta,l.wrap=cn(),qa=ta,ta=t,Xi.push(qa)},"addDeploymentNode"),XL=g(function(){ta=qa,Xi.pop(),qa=Xi.pop(),Xi.push(qa)},"popBoundaryParseStack"),KL=g(function(e,t,r,a,i,n,s,o,l,u,h){let d=Ya.find(f=>f.alias===t);if(!(d===void 0&&(d=li.find(f=>f.alias===t),d===void 0))){if(r!=null)if(typeof r=="object"){let[f,p]=Object.entries(r)[0];d[f]=p}else d.bgColor=r;if(a!=null)if(typeof a=="object"){let[f,p]=Object.entries(a)[0];d[f]=p}else d.fontColor=a;if(i!=null)if(typeof i=="object"){let[f,p]=Object.entries(i)[0];d[f]=p}else d.borderColor=i;if(n!=null)if(typeof n=="object"){let[f,p]=Object.entries(n)[0];d[f]=p}else d.shadowing=n;if(s!=null)if(typeof s=="object"){let[f,p]=Object.entries(s)[0];d[f]=p}else d.shape=s;if(o!=null)if(typeof o=="object"){let[f,p]=Object.entries(o)[0];d[f]=p}else d.sprite=o;if(l!=null)if(typeof l=="object"){let[f,p]=Object.entries(l)[0];d[f]=p}else d.techn=l;if(u!=null)if(typeof u=="object"){let[f,p]=Object.entries(u)[0];d[f]=p}else d.legendText=u;if(h!=null)if(typeof h=="object"){let[f,p]=Object.entries(h)[0];d[f]=p}else d.legendSprite=h}},"updateElStyle"),jL=g(function(e,t,r,a,i,n,s){const o=Gl.find(l=>l.from===t&&l.to===r);if(o!==void 0){if(a!=null)if(typeof a=="object"){let[l,u]=Object.entries(a)[0];o[l]=u}else o.textColor=a;if(i!=null)if(typeof i=="object"){let[l,u]=Object.entries(i)[0];o[l]=u}else o.lineColor=i;if(n!=null)if(typeof n=="object"){let[l,u]=Object.entries(n)[0];o[l]=parseInt(u)}else o.offsetX=parseInt(n);if(s!=null)if(typeof s=="object"){let[l,u]=Object.entries(s)[0];o[l]=parseInt(u)}else o.offsetY=parseInt(s)}},"updateRelStyle"),QL=g(function(e,t,r){let a=ju,i=Qu;if(typeof t=="object"){const n=Object.values(t)[0];a=parseInt(n)}else a=parseInt(t);if(typeof r=="object"){const n=Object.values(r)[0];i=parseInt(n)}else i=parseInt(r);a>=1&&(ju=a),i>=1&&(Qu=i)},"updateLayoutConfig"),ZL=g(function(){return ju},"getC4ShapeInRow"),JL=g(function(){return Qu},"getC4BoundaryInRow"),tD=g(function(){return ta},"getCurrentBoundaryParse"),eD=g(function(){return qa},"getParentBoundaryParse"),tw=g(function(e){return e==null?Ya:Ya.filter(t=>t.parentBoundary===e)},"getC4ShapeArray"),rD=g(function(e){return Ya.find(t=>t.alias===e)},"getC4Shape"),aD=g(function(e){return Object.keys(tw(e))},"getC4ShapeKeys"),ew=g(function(e){return e==null?li:li.filter(t=>t.parentBoundary===e)},"getBoundaries"),iD=ew,nD=g(function(){return Gl},"getRels"),sD=g(function(){return S0},"getTitle"),oD=g(function(e){E0=e},"setWrap"),cn=g(function(){return E0},"autoWrap"),lD=g(function(){Ya=[],li=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],qa="",ta="global",Xi=[""],Gl=[],Xi=[""],S0="",E0=!1,ju=4,Qu=2},"clear"),cD={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},uD={FILLED:0,OPEN:1},hD={LEFTOF:0,RIGHTOF:1,OVER:2},dD=g(function(e){S0=qe(e,dt())},"setTitle"),qp={addPersonOrSystem:qL,addPersonOrSystemBoundary:HL,addContainer:WL,addContainerBoundary:YL,addComponent:GL,addDeploymentNode:UL,popBoundaryParseStack:XL,addRel:zL,updateElStyle:KL,updateRelStyle:jL,updateLayoutConfig:QL,autoWrap:cn,setWrap:oD,getC4ShapeArray:tw,getC4Shape:rD,getC4ShapeKeys:aD,getBoundaries:ew,getBoundarys:iD,getCurrentBoundaryParse:tD,getParentBoundaryParse:eD,getRels:nD,getTitle:sD,getC4Type:$L,getC4ShapeInRow:ZL,getC4BoundaryInRow:JL,setAccTitle:vr,getAccTitle:Sr,getAccDescription:_r,setAccDescription:Er,getConfig:g(()=>dt().c4,"getConfig"),clear:lD,LINETYPE:cD,ARROWTYPE:uD,PLACEMENT:hD,setTitle:dD,setC4Type:VL},_0=g(function(e,t){return Vh(e,t)},"drawRect"),rw=g(function(e,t,r,a,i,n){const s=e.append("image");s.attr("width",t),s.attr("height",r),s.attr("x",a),s.attr("y",i);let o=n.startsWith("data:image/png;base64")?n:Kn.sanitizeUrl(n);s.attr("xlink:href",o)},"drawImage"),fD=g((e,t,r)=>{const a=e.append("g");let i=0;for(let n of t){let s=n.textColor?n.textColor:"#444444",o=n.lineColor?n.lineColor:"#444444",l=n.offsetX?parseInt(n.offsetX):0,u=n.offsetY?parseInt(n.offsetY):0,h="";if(i===0){let f=a.append("line");f.attr("x1",n.startPoint.x),f.attr("y1",n.startPoint.y),f.attr("x2",n.endPoint.x),f.attr("y2",n.endPoint.y),f.attr("stroke-width","1"),f.attr("stroke",o),f.style("fill","none"),n.type!=="rel_b"&&f.attr("marker-end","url("+h+"#arrowhead)"),(n.type==="birel"||n.type==="rel_b")&&f.attr("marker-start","url("+h+"#arrowend)"),i=-1}else{let f=a.append("path");f.attr("fill","none").attr("stroke-width","1").attr("stroke",o).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",n.startPoint.x).replaceAll("starty",n.startPoint.y).replaceAll("controlx",n.startPoint.x+(n.endPoint.x-n.startPoint.x)/2-(n.endPoint.x-n.startPoint.x)/4).replaceAll("controly",n.startPoint.y+(n.endPoint.y-n.startPoint.y)/2).replaceAll("stopx",n.endPoint.x).replaceAll("stopy",n.endPoint.y)),n.type!=="rel_b"&&f.attr("marker-end","url("+h+"#arrowhead)"),(n.type==="birel"||n.type==="rel_b")&&f.attr("marker-start","url("+h+"#arrowend)")}let d=r.messageFont();Ti(r)(n.label.text,a,Math.min(n.startPoint.x,n.endPoint.x)+Math.abs(n.endPoint.x-n.startPoint.x)/2+l,Math.min(n.startPoint.y,n.endPoint.y)+Math.abs(n.endPoint.y-n.startPoint.y)/2+u,n.label.width,n.label.height,{fill:s},d),n.techn&&n.techn.text!==""&&(d=r.messageFont(),Ti(r)("["+n.techn.text+"]",a,Math.min(n.startPoint.x,n.endPoint.x)+Math.abs(n.endPoint.x-n.startPoint.x)/2+l,Math.min(n.startPoint.y,n.endPoint.y)+Math.abs(n.endPoint.y-n.startPoint.y)/2+r.messageFontSize+5+u,Math.max(n.label.width,n.techn.width),n.techn.height,{fill:s,"font-style":"italic"},d))}},"drawRels"),pD=g(function(e,t,r){const a=e.append("g");let i=t.bgColor?t.bgColor:"none",n=t.borderColor?t.borderColor:"#444444",s=t.fontColor?t.fontColor:"black",o={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};t.nodeType&&(o={"stroke-width":1});let l={x:t.x,y:t.y,fill:i,stroke:n,width:t.width,height:t.height,rx:2.5,ry:2.5,attrs:o};_0(a,l);let u=r.boundaryFont();u.fontWeight="bold",u.fontSize=u.fontSize+2,u.fontColor=s,Ti(r)(t.label.text,a,t.x,t.y+t.label.Y,t.width,t.height,{fill:"#444444"},u),t.type&&t.type.text!==""&&(u=r.boundaryFont(),u.fontColor=s,Ti(r)(t.type.text,a,t.x,t.y+t.type.Y,t.width,t.height,{fill:"#444444"},u)),t.descr&&t.descr.text!==""&&(u=r.boundaryFont(),u.fontSize=u.fontSize-2,u.fontColor=s,Ti(r)(t.descr.text,a,t.x,t.y+t.descr.Y,t.width,t.height,{fill:"#444444"},u))},"drawBoundary"),gD=g(function(e,t,r){var d;let a=t.bgColor?t.bgColor:r[t.typeC4Shape.text+"_bg_color"],i=t.borderColor?t.borderColor:r[t.typeC4Shape.text+"_border_color"],n=t.fontColor?t.fontColor:"#FFFFFF",s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(t.typeC4Shape.text){case"person":s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII=";break}const o=e.append("g");o.attr("class","person-man");const l=jn();switch(t.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":l.x=t.x,l.y=t.y,l.fill=a,l.width=t.width,l.height=t.height,l.stroke=i,l.rx=2.5,l.ry=2.5,l.attrs={"stroke-width":.5},_0(o,l);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":o.append("path").attr("fill",a).attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",t.x).replaceAll("starty",t.y).replaceAll("half",t.width/2).replaceAll("height",t.height)),o.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",t.x).replaceAll("starty",t.y).replaceAll("half",t.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":o.append("path").attr("fill",a).attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",t.x).replaceAll("starty",t.y).replaceAll("width",t.width).replaceAll("half",t.height/2)),o.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",t.x+t.width).replaceAll("starty",t.y).replaceAll("half",t.height/2));break}let u=CD(r,t.typeC4Shape.text);switch(o.append("text").attr("fill",n).attr("font-family",u.fontFamily).attr("font-size",u.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",t.typeC4Shape.width).attr("x",t.x+t.width/2-t.typeC4Shape.width/2).attr("y",t.y+t.typeC4Shape.Y).text("<<"+t.typeC4Shape.text+">>"),t.typeC4Shape.text){case"person":case"external_person":rw(o,48,48,t.x+t.width/2-24,t.y+t.image.Y,s);break}let h=r[t.typeC4Shape.text+"Font"]();return h.fontWeight="bold",h.fontSize=h.fontSize+2,h.fontColor=n,Ti(r)(t.label.text,o,t.x,t.y+t.label.Y,t.width,t.height,{fill:n},h),h=r[t.typeC4Shape.text+"Font"](),h.fontColor=n,t.techn&&((d=t.techn)==null?void 0:d.text)!==""?Ti(r)(t.techn.text,o,t.x,t.y+t.techn.Y,t.width,t.height,{fill:n,"font-style":"italic"},h):t.type&&t.type.text!==""&&Ti(r)(t.type.text,o,t.x,t.y+t.type.Y,t.width,t.height,{fill:n,"font-style":"italic"},h),t.descr&&t.descr.text!==""&&(h=r.personFont(),h.fontColor=n,Ti(r)(t.descr.text,o,t.x,t.y+t.descr.Y,t.width,t.height,{fill:n},h)),t.height},"drawC4Shape"),yD=g(function(e){e.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},"insertDatabaseIcon"),vD=g(function(e){e.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},"insertComputerIcon"),mD=g(function(e){e.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},"insertClockIcon"),xD=g(function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},"insertArrowHead"),bD=g(function(e){e.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},"insertArrowEnd"),wD=g(function(e){e.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"insertArrowFilledHead"),kD=g(function(e){e.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},"insertDynamicNumber"),TD=g(function(e){const r=e.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);r.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),r.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},"insertArrowCrossHead"),CD=g((e,t)=>({fontFamily:e[t+"FontFamily"],fontSize:e[t+"FontSize"],fontWeight:e[t+"FontWeight"]}),"getC4ShapeFont"),Ti=function(){function e(i,n,s,o,l,u,h){const d=n.append("text").attr("x",s+l/2).attr("y",o+u/2+5).style("text-anchor","middle").text(i);a(d,h)}g(e,"byText");function t(i,n,s,o,l,u,h,d){const{fontSize:f,fontFamily:p,fontWeight:y}=d,v=i.split(Mt.lineBreakRegex);for(let m=0;m<v.length;m++){const x=m*f-f*(v.length-1)/2,b=n.append("text").attr("x",s+l/2).attr("y",o).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",f).style("font-weight",y).style("font-family",p);b.append("tspan").attr("dy",x).text(v[m]).attr("alignment-baseline","mathematical"),a(b,h)}}g(t,"byTspan");function r(i,n,s,o,l,u,h,d){const f=n.append("switch"),y=f.append("foreignObject").attr("x",s).attr("y",o).attr("width",l).attr("height",u).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),t(i,f,s,o,l,u,h,d),a(y,h)}g(r,"byFo");function a(i,n){for(const s in n)n.hasOwnProperty(s)&&i.attr(s,n[s])}return g(a,"_setTextAttrs"),function(i){return i.textPlacement==="fo"?r:i.textPlacement==="old"?e:t}}(),ei={drawRect:_0,drawBoundary:pD,drawC4Shape:gD,drawRels:fD,drawImage:rw,insertArrowHead:xD,insertArrowEnd:bD,insertArrowFilledHead:wD,insertDynamicNumber:kD,insertArrowCrossHead:TD,insertDatabaseIcon:yD,insertComputerIcon:vD,insertClockIcon:mD},Zu=0,Ju=0,aw=4,Wp=2;Ku.yy=qp;var ae={},Vs,iw=(Vs=class{constructor(t){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,Gp(t.db.getConfig())}setData(t,r,a,i){this.nextData.startx=this.data.startx=t,this.nextData.stopx=this.data.stopx=r,this.nextData.starty=this.data.starty=a,this.nextData.stopy=this.data.stopy=i}updateVal(t,r,a,i){t[r]===void 0?t[r]=a:t[r]=i(a,t[r])}insert(t){this.nextData.cnt=this.nextData.cnt+1;let r=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+t.margin:this.nextData.stopx+t.margin*2,a=r+t.width,i=this.nextData.starty+t.margin*2,n=i+t.height;(r>=this.data.widthLimit||a>=this.data.widthLimit||this.nextData.cnt>aw)&&(r=this.nextData.startx+t.margin+ae.nextLinePaddingX,i=this.nextData.stopy+t.margin*2,this.nextData.stopx=a=r+t.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=n=i+t.height,this.nextData.cnt=1),t.x=r,t.y=i,this.updateVal(this.data,"startx",r,Math.min),this.updateVal(this.data,"starty",i,Math.min),this.updateVal(this.data,"stopx",a,Math.max),this.updateVal(this.data,"stopy",n,Math.max),this.updateVal(this.nextData,"startx",r,Math.min),this.updateVal(this.nextData,"starty",i,Math.min),this.updateVal(this.nextData,"stopx",a,Math.max),this.updateVal(this.nextData,"stopy",n,Math.max)}init(t){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},Gp(t.db.getConfig())}bumpLastMargin(t){this.data.stopx+=t,this.data.stopy+=t}},g(Vs,"Bounds"),Vs),Gp=g(function(e){fr(ae,e),e.fontFamily&&(ae.personFontFamily=ae.systemFontFamily=ae.messageFontFamily=e.fontFamily),e.fontSize&&(ae.personFontSize=ae.systemFontSize=ae.messageFontSize=e.fontSize),e.fontWeight&&(ae.personFontWeight=ae.systemFontWeight=ae.messageFontWeight=e.fontWeight)},"setConf"),il=g((e,t)=>({fontFamily:e[t+"FontFamily"],fontSize:e[t+"FontSize"],fontWeight:e[t+"FontWeight"]}),"c4ShapeFont"),ou=g(e=>({fontFamily:e.boundaryFontFamily,fontSize:e.boundaryFontSize,fontWeight:e.boundaryFontWeight}),"boundaryFont"),SD=g(e=>({fontFamily:e.messageFontFamily,fontSize:e.messageFontSize,fontWeight:e.messageFontWeight}),"messageFont");function Ba(e,t,r,a,i){if(!t[e].width)if(r)t[e].text=T4(t[e].text,i,a),t[e].textLines=t[e].text.split(Mt.lineBreakRegex).length,t[e].width=i,t[e].height=Gu(t[e].text,a);else{let n=t[e].text.split(Mt.lineBreakRegex);t[e].textLines=n.length;let s=0;t[e].height=0,t[e].width=0;for(const o of n)t[e].width=Math.max(Zr(o,a),t[e].width),s=Gu(o,a),t[e].height=t[e].height+s}}g(Ba,"calcC4ShapeTextWH");var nw=g(function(e,t,r){t.x=r.data.startx,t.y=r.data.starty,t.width=r.data.stopx-r.data.startx,t.height=r.data.stopy-r.data.starty,t.label.y=ae.c4ShapeMargin-35;let a=t.wrap&&ae.wrap,i=ou(ae);i.fontSize=i.fontSize+2,i.fontWeight="bold";let n=Zr(t.label.text,i);Ba("label",t,a,i,n),ei.drawBoundary(e,t,ae)},"drawBoundary"),sw=g(function(e,t,r,a){let i=0;for(const n of a){i=0;const s=r[n];let o=il(ae,s.typeC4Shape.text);switch(o.fontSize=o.fontSize-2,s.typeC4Shape.width=Zr("«"+s.typeC4Shape.text+"»",o),s.typeC4Shape.height=o.fontSize+2,s.typeC4Shape.Y=ae.c4ShapePadding,i=s.typeC4Shape.Y+s.typeC4Shape.height-4,s.image={width:0,height:0,Y:0},s.typeC4Shape.text){case"person":case"external_person":s.image.width=48,s.image.height=48,s.image.Y=i,i=s.image.Y+s.image.height;break}s.sprite&&(s.image.width=48,s.image.height=48,s.image.Y=i,i=s.image.Y+s.image.height);let l=s.wrap&&ae.wrap,u=ae.width-ae.c4ShapePadding*2,h=il(ae,s.typeC4Shape.text);if(h.fontSize=h.fontSize+2,h.fontWeight="bold",Ba("label",s,l,h,u),s.label.Y=i+8,i=s.label.Y+s.label.height,s.type&&s.type.text!==""){s.type.text="["+s.type.text+"]";let p=il(ae,s.typeC4Shape.text);Ba("type",s,l,p,u),s.type.Y=i+5,i=s.type.Y+s.type.height}else if(s.techn&&s.techn.text!==""){s.techn.text="["+s.techn.text+"]";let p=il(ae,s.techn.text);Ba("techn",s,l,p,u),s.techn.Y=i+5,i=s.techn.Y+s.techn.height}let d=i,f=s.label.width;if(s.descr&&s.descr.text!==""){let p=il(ae,s.typeC4Shape.text);Ba("descr",s,l,p,u),s.descr.Y=i+20,i=s.descr.Y+s.descr.height,f=Math.max(s.label.width,s.descr.width),d=i-s.descr.textLines*5}f=f+ae.c4ShapePadding,s.width=Math.max(s.width||ae.width,f,ae.width),s.height=Math.max(s.height||ae.height,d,ae.height),s.margin=s.margin||ae.c4ShapeMargin,e.insert(s),ei.drawC4Shape(t,s,ae)}e.bumpLastMargin(ae.c4ShapeMargin)},"drawC4ShapeArray"),zs,Sa=(zs=class{constructor(t,r){this.x=t,this.y=r}},g(zs,"Point"),zs),wy=g(function(e,t){let r=e.x,a=e.y,i=t.x,n=t.y,s=r+e.width/2,o=a+e.height/2,l=Math.abs(r-i),u=Math.abs(a-n),h=u/l,d=e.height/e.width,f=null;return a==n&&r<i?f=new Sa(r+e.width,o):a==n&&r>i?f=new Sa(r,o):r==i&&a<n?f=new Sa(s,a+e.height):r==i&&a>n&&(f=new Sa(s,a)),r>i&&a<n?d>=h?f=new Sa(r,o+h*e.width/2):f=new Sa(s-l/u*e.height/2,a+e.height):r<i&&a<n?d>=h?f=new Sa(r+e.width,o+h*e.width/2):f=new Sa(s+l/u*e.height/2,a+e.height):r<i&&a>n?d>=h?f=new Sa(r+e.width,o-h*e.width/2):f=new Sa(s+e.height/2*l/u,a):r>i&&a>n&&(d>=h?f=new Sa(r,o-e.width/2*h):f=new Sa(s-e.height/2*l/u,a)),f},"getIntersectPoint"),ED=g(function(e,t){let r={x:0,y:0};r.x=t.x+t.width/2,r.y=t.y+t.height/2;let a=wy(e,r);r.x=e.x+e.width/2,r.y=e.y+e.height/2;let i=wy(t,r);return{startPoint:a,endPoint:i}},"getIntersectPoints"),_D=g(function(e,t,r,a){let i=0;for(let n of t){i=i+1;let s=n.wrap&&ae.wrap,o=SD(ae);a.db.getC4Type()==="C4Dynamic"&&(n.label.text=i+": "+n.label.text);let u=Zr(n.label.text,o);Ba("label",n,s,o,u),n.techn&&n.techn.text!==""&&(u=Zr(n.techn.text,o),Ba("techn",n,s,o,u)),n.descr&&n.descr.text!==""&&(u=Zr(n.descr.text,o),Ba("descr",n,s,o,u));let h=r(n.from),d=r(n.to),f=ED(h,d);n.startPoint=f.startPoint,n.endPoint=f.endPoint}ei.drawRels(e,t,ae)},"drawRels");function A0(e,t,r,a,i){let n=new iw(i);n.data.widthLimit=r.data.widthLimit/Math.min(Wp,a.length);for(let[s,o]of a.entries()){let l=0;o.image={width:0,height:0,Y:0},o.sprite&&(o.image.width=48,o.image.height=48,o.image.Y=l,l=o.image.Y+o.image.height);let u=o.wrap&&ae.wrap,h=ou(ae);if(h.fontSize=h.fontSize+2,h.fontWeight="bold",Ba("label",o,u,h,n.data.widthLimit),o.label.Y=l+8,l=o.label.Y+o.label.height,o.type&&o.type.text!==""){o.type.text="["+o.type.text+"]";let y=ou(ae);Ba("type",o,u,y,n.data.widthLimit),o.type.Y=l+5,l=o.type.Y+o.type.height}if(o.descr&&o.descr.text!==""){let y=ou(ae);y.fontSize=y.fontSize-2,Ba("descr",o,u,y,n.data.widthLimit),o.descr.Y=l+20,l=o.descr.Y+o.descr.height}if(s==0||s%Wp===0){let y=r.data.startx+ae.diagramMarginX,v=r.data.stopy+ae.diagramMarginY+l;n.setData(y,y,v,v)}else{let y=n.data.stopx!==n.data.startx?n.data.stopx+ae.diagramMarginX:n.data.startx,v=n.data.starty;n.setData(y,y,v,v)}n.name=o.alias;let d=i.db.getC4ShapeArray(o.alias),f=i.db.getC4ShapeKeys(o.alias);f.length>0&&sw(n,e,d,f),t=o.alias;let p=i.db.getBoundarys(t);p.length>0&&A0(e,t,n,p,i),o.alias!=="global"&&nw(e,o,n),r.data.stopy=Math.max(n.data.stopy+ae.c4ShapeMargin,r.data.stopy),r.data.stopx=Math.max(n.data.stopx+ae.c4ShapeMargin,r.data.stopx),Zu=Math.max(Zu,r.data.stopx),Ju=Math.max(Ju,r.data.stopy)}}g(A0,"drawInsideBoundary");var AD=g(function(e,t,r,a){ae=dt().c4;const i=dt().securityLevel;let n;i==="sandbox"&&(n=It("#i"+t));const s=i==="sandbox"?It(n.nodes()[0].contentDocument.body):It("body");let o=a.db;a.db.setWrap(ae.wrap),aw=o.getC4ShapeInRow(),Wp=o.getC4BoundaryInRow(),G.debug(`C:${JSON.stringify(ae,null,2)}`);const l=i==="sandbox"?s.select(`[id="${t}"]`):It(`[id="${t}"]`);ei.insertComputerIcon(l),ei.insertDatabaseIcon(l),ei.insertClockIcon(l);let u=new iw(a);u.setData(ae.diagramMarginX,ae.diagramMarginX,ae.diagramMarginY,ae.diagramMarginY),u.data.widthLimit=screen.availWidth,Zu=ae.diagramMarginX,Ju=ae.diagramMarginY;const h=a.db.getTitle();let d=a.db.getBoundarys("");A0(l,"",u,d,a),ei.insertArrowHead(l),ei.insertArrowEnd(l),ei.insertArrowCrossHead(l),ei.insertArrowFilledHead(l),_D(l,a.db.getRels(),a.db.getC4Shape,a),u.data.stopx=Zu,u.data.stopy=Ju;const f=u.data;let y=f.stopy-f.starty+2*ae.diagramMarginY;const m=f.stopx-f.startx+2*ae.diagramMarginX;h&&l.append("text").text(h).attr("x",(f.stopx-f.startx)/2-4*ae.diagramMarginX).attr("y",f.starty+ae.diagramMarginY),da(l,y,m,ae.useMaxWidth);const x=h?60:0;l.attr("viewBox",f.startx-ae.diagramMarginX+" -"+(ae.diagramMarginY+x)+" "+m+" "+(y+x)),G.debug("models:",f)},"draw"),ky={drawPersonOrSystemArray:sw,drawBoundary:nw,setConf:Gp,draw:AD},LD=g(e=>`.person {
    stroke: ${e.personBorder};
    fill: ${e.personBkg};
  }
`,"getStyles"),DD=LD,BD={parser:OL,db:qp,renderer:ky,styles:DD,init:g(({c4:e,wrap:t})=>{ky.setConf(e),qp.setWrap(t)},"init")};const RD=Object.freeze({__proto__:null,diagram:BD});var pc=g((e,t)=>{let r;return t==="sandbox"&&(r=It("#i"+e)),(t==="sandbox"?It(r.nodes()[0].contentDocument.body):It("body")).select(`[id="${e}"]`)},"getDiagramElement"),gc=g((e,t,r,a)=>{e.attr("class",r);const{width:i,height:n,x:s,y:o}=ID(e,t);da(e,n,i,a);const l=PD(s,o,i,n,t);e.attr("viewBox",l),G.debug(`viewBox configured: ${l} with padding: ${t}`)},"setupViewPortForSVG"),ID=g((e,t)=>{var a;const r=((a=e.node())==null?void 0:a.getBBox())||{width:0,height:0,x:0,y:0};return{width:r.width+t*2,height:r.height+t*2,x:r.x,y:r.y}},"calculateDimensionsWithPadding"),PD=g((e,t,r,a,i)=>`${e-i} ${t-i} ${r} ${a}`,"createViewBox"),ND="flowchart-",qs,MD=(qs=class{constructor(){this.vertexCounter=0,this.config=dt(),this.vertices=new Map,this.edges=[],this.classes=new Map,this.subGraphs=[],this.subGraphLookup=new Map,this.tooltips=new Map,this.subCount=0,this.firstGraphFlag=!0,this.secCount=-1,this.posCrossRef=[],this.funs=[],this.setAccTitle=vr,this.setAccDescription=Er,this.setDiagramTitle=Mr,this.getAccTitle=Sr,this.getAccDescription=_r,this.getDiagramTitle=br,this.funs.push(this.setupToolTips.bind(this)),this.addVertex=this.addVertex.bind(this),this.firstGraph=this.firstGraph.bind(this),this.setDirection=this.setDirection.bind(this),this.addSubGraph=this.addSubGraph.bind(this),this.addLink=this.addLink.bind(this),this.setLink=this.setLink.bind(this),this.updateLink=this.updateLink.bind(this),this.addClass=this.addClass.bind(this),this.setClass=this.setClass.bind(this),this.destructLink=this.destructLink.bind(this),this.setClickEvent=this.setClickEvent.bind(this),this.setTooltip=this.setTooltip.bind(this),this.updateLinkInterpolate=this.updateLinkInterpolate.bind(this),this.setClickFun=this.setClickFun.bind(this),this.bindFunctions=this.bindFunctions.bind(this),this.lex={firstGraph:this.firstGraph.bind(this)},this.clear(),this.setGen("gen-2")}sanitizeText(t){return Mt.sanitizeText(t,this.config)}lookUpDomId(t){for(const r of this.vertices.values())if(r.id===t)return r.domId;return t}addVertex(t,r,a,i,n,s,o={},l){var p,y;if(!t||t.trim().length===0)return;let u;if(l!==void 0){let v;l.includes(`
`)?v=l+`
`:v=`{
`+l+`
}`,u=u0(v,{schema:c0})}const h=this.edges.find(v=>v.id===t);if(h){const v=u;(v==null?void 0:v.animate)!==void 0&&(h.animate=v.animate),(v==null?void 0:v.animation)!==void 0&&(h.animation=v.animation);return}let d,f=this.vertices.get(t);if(f===void 0&&(f={id:t,labelType:"text",domId:ND+t+"-"+this.vertexCounter,styles:[],classes:[]},this.vertices.set(t,f)),this.vertexCounter++,r!==void 0?(this.config=dt(),d=this.sanitizeText(r.text.trim()),f.labelType=r.type,d.startsWith('"')&&d.endsWith('"')&&(d=d.substring(1,d.length-1)),f.text=d):f.text===void 0&&(f.text=t),a!==void 0&&(f.type=a),i!=null&&i.forEach(v=>{f.styles.push(v)}),n!=null&&n.forEach(v=>{f.classes.push(v)}),s!==void 0&&(f.dir=s),f.props===void 0?f.props=o:o!==void 0&&Object.assign(f.props,o),u!==void 0){if(u.shape){if(u.shape!==u.shape.toLowerCase()||u.shape.includes("_"))throw new Error(`No such shape: ${u.shape}. Shape names should be lowercase.`);if(!J5(u.shape))throw new Error(`No such shape: ${u.shape}.`);f.type=u==null?void 0:u.shape}u!=null&&u.label&&(f.text=u==null?void 0:u.label),u!=null&&u.icon&&(f.icon=u==null?void 0:u.icon,!((p=u.label)!=null&&p.trim())&&f.text===t&&(f.text="")),u!=null&&u.form&&(f.form=u==null?void 0:u.form),u!=null&&u.pos&&(f.pos=u==null?void 0:u.pos),u!=null&&u.img&&(f.img=u==null?void 0:u.img,!((y=u.label)!=null&&y.trim())&&f.text===t&&(f.text="")),u!=null&&u.constraint&&(f.constraint=u.constraint),u.w&&(f.assetWidth=Number(u.w)),u.h&&(f.assetHeight=Number(u.h))}}addSingleLink(t,r,a,i){const o={start:t,end:r,type:void 0,text:"",labelType:"text",classes:[],isUserDefinedId:!1,interpolate:this.edges.defaultInterpolate};G.info("abc78 Got edge...",o);const l=a.text;if(l!==void 0&&(o.text=this.sanitizeText(l.text.trim()),o.text.startsWith('"')&&o.text.endsWith('"')&&(o.text=o.text.substring(1,o.text.length-1)),o.labelType=l.type),a!==void 0&&(o.type=a.type,o.stroke=a.stroke,o.length=a.length>10?10:a.length),i&&!this.edges.some(u=>u.id===i))o.id=i,o.isUserDefinedId=!0;else{const u=this.edges.filter(h=>h.start===o.start&&h.end===o.end);u.length===0?o.id=Dl(o.start,o.end,{counter:0,prefix:"L"}):o.id=Dl(o.start,o.end,{counter:u.length+1,prefix:"L"})}if(this.edges.length<(this.config.maxEdges??500))G.info("Pushing edge..."),this.edges.push(o);else throw new Error(`Edge limit exceeded. ${this.edges.length} edges found, but the limit is ${this.config.maxEdges}.

Initialize mermaid with maxEdges set to a higher number to allow more edges.
You cannot set this config via configuration inside the diagram as it is a secure config.
You have to call mermaid.initialize.`)}isLinkData(t){return t!==null&&typeof t=="object"&&"id"in t&&typeof t.id=="string"}addLink(t,r,a){const i=this.isLinkData(a)?a.id.replace("@",""):void 0;G.info("addLink",t,r,i);for(const n of t)for(const s of r){const o=n===t[t.length-1],l=s===r[0];o&&l?this.addSingleLink(n,s,a,i):this.addSingleLink(n,s,a,void 0)}}updateLinkInterpolate(t,r){t.forEach(a=>{a==="default"?this.edges.defaultInterpolate=r:this.edges[a].interpolate=r})}updateLink(t,r){t.forEach(a=>{var i,n,s,o,l,u;if(typeof a=="number"&&a>=this.edges.length)throw new Error(`The index ${a} for linkStyle is out of bounds. Valid indices for linkStyle are between 0 and ${this.edges.length-1}. (Help: Ensure that the index is within the range of existing edges.)`);a==="default"?this.edges.defaultStyle=r:(this.edges[a].style=r,(((n=(i=this.edges[a])==null?void 0:i.style)==null?void 0:n.length)??0)>0&&!((o=(s=this.edges[a])==null?void 0:s.style)!=null&&o.some(h=>h==null?void 0:h.startsWith("fill")))&&((u=(l=this.edges[a])==null?void 0:l.style)==null||u.push("fill:none")))})}addClass(t,r){const a=r.join().replace(/\\,/g,"§§§").replace(/,/g,";").replace(/§§§/g,",").split(";");t.split(",").forEach(i=>{let n=this.classes.get(i);n===void 0&&(n={id:i,styles:[],textStyles:[]},this.classes.set(i,n)),a!=null&&a.forEach(s=>{if(/color/.exec(s)){const o=s.replace("fill","bgFill");n.textStyles.push(o)}n.styles.push(s)})})}setDirection(t){this.direction=t,/.*</.exec(this.direction)&&(this.direction="RL"),/.*\^/.exec(this.direction)&&(this.direction="BT"),/.*>/.exec(this.direction)&&(this.direction="LR"),/.*v/.exec(this.direction)&&(this.direction="TB"),this.direction==="TD"&&(this.direction="TB")}setClass(t,r){for(const a of t.split(",")){const i=this.vertices.get(a);i&&i.classes.push(r);const n=this.edges.find(o=>o.id===a);n&&n.classes.push(r);const s=this.subGraphLookup.get(a);s&&s.classes.push(r)}}setTooltip(t,r){if(r!==void 0){r=this.sanitizeText(r);for(const a of t.split(","))this.tooltips.set(this.version==="gen-1"?this.lookUpDomId(a):a,r)}}setClickFun(t,r,a){const i=this.lookUpDomId(t);if(dt().securityLevel!=="loose"||r===void 0)return;let n=[];if(typeof a=="string"){n=a.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let o=0;o<n.length;o++){let l=n[o].trim();l.startsWith('"')&&l.endsWith('"')&&(l=l.substr(1,l.length-2)),n[o]=l}}n.length===0&&n.push(t);const s=this.vertices.get(t);s&&(s.haveCallback=!0,this.funs.push(()=>{const o=document.querySelector(`[id="${i}"]`);o!==null&&o.addEventListener("click",()=>{xe.runFunc(r,...n)},!1)}))}setLink(t,r,a){t.split(",").forEach(i=>{const n=this.vertices.get(i);n!==void 0&&(n.link=xe.formatUrl(r,this.config),n.linkTarget=a)}),this.setClass(t,"clickable")}getTooltip(t){return this.tooltips.get(t)}setClickEvent(t,r,a){t.split(",").forEach(i=>{this.setClickFun(i,r,a)}),this.setClass(t,"clickable")}bindFunctions(t){this.funs.forEach(r=>{r(t)})}getDirection(){var t;return(t=this.direction)==null?void 0:t.trim()}getVertices(){return this.vertices}getEdges(){return this.edges}getClasses(){return this.classes}setupToolTips(t){let r=It(".mermaidTooltip");(r._groups||r)[0][0]===null&&(r=It("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),It(t).select("svg").selectAll("g.node").on("mouseover",n=>{var u;const s=It(n.currentTarget);if(s.attr("title")===null)return;const l=(u=n.currentTarget)==null?void 0:u.getBoundingClientRect();r.transition().duration(200).style("opacity",".9"),r.text(s.attr("title")).style("left",window.scrollX+l.left+(l.right-l.left)/2+"px").style("top",window.scrollY+l.bottom+"px"),r.html(r.html().replace(/&lt;br\/&gt;/g,"<br/>")),s.classed("hover",!0)}).on("mouseout",n=>{r.transition().duration(500).style("opacity",0),It(n.currentTarget).classed("hover",!1)})}clear(t="gen-2"){this.vertices=new Map,this.classes=new Map,this.edges=[],this.funs=[this.setupToolTips.bind(this)],this.subGraphs=[],this.subGraphLookup=new Map,this.subCount=0,this.tooltips=new Map,this.firstGraphFlag=!0,this.version=t,this.config=dt(),xr()}setGen(t){this.version=t||"gen-2"}defaultStyle(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"}addSubGraph(t,r,a){let i=t.text.trim(),n=a.text;t===a&&/\s/.exec(a.text)&&(i=void 0);const s=g(h=>{const d={boolean:{},number:{},string:{}},f=[];let p;return{nodeList:h.filter(function(v){const m=typeof v;return v.stmt&&v.stmt==="dir"?(p=v.value,!1):v.trim()===""?!1:m in d?d[m].hasOwnProperty(v)?!1:d[m][v]=!0:f.includes(v)?!1:f.push(v)}),dir:p}},"uniq"),{nodeList:o,dir:l}=s(r.flat());if(this.version==="gen-1")for(let h=0;h<o.length;h++)o[h]=this.lookUpDomId(o[h]);i=i??"subGraph"+this.subCount,n=n||"",n=this.sanitizeText(n),this.subCount=this.subCount+1;const u={id:i,nodes:o,title:n.trim(),classes:[],dir:l,labelType:a.type};return G.info("Adding",u.id,u.nodes,u.dir),u.nodes=this.makeUniq(u,this.subGraphs).nodes,this.subGraphs.push(u),this.subGraphLookup.set(i,u),i}getPosForId(t){for(const[r,a]of this.subGraphs.entries())if(a.id===t)return r;return-1}indexNodes2(t,r){const a=this.subGraphs[r].nodes;if(this.secCount=this.secCount+1,this.secCount>2e3)return{result:!1,count:0};if(this.posCrossRef[this.secCount]=r,this.subGraphs[r].id===t)return{result:!0,count:0};let i=0,n=1;for(;i<a.length;){const s=this.getPosForId(a[i]);if(s>=0){const o=this.indexNodes2(t,s);if(o.result)return{result:!0,count:n+o.count};n=n+o.count}i=i+1}return{result:!1,count:n}}getDepthFirstPos(t){return this.posCrossRef[t]}indexNodes(){this.secCount=-1,this.subGraphs.length>0&&this.indexNodes2("none",this.subGraphs.length-1)}getSubGraphs(){return this.subGraphs}firstGraph(){return this.firstGraphFlag?(this.firstGraphFlag=!1,!0):!1}destructStartLink(t){let r=t.trim(),a="arrow_open";switch(r[0]){case"<":a="arrow_point",r=r.slice(1);break;case"x":a="arrow_cross",r=r.slice(1);break;case"o":a="arrow_circle",r=r.slice(1);break}let i="normal";return r.includes("=")&&(i="thick"),r.includes(".")&&(i="dotted"),{type:a,stroke:i}}countChar(t,r){const a=r.length;let i=0;for(let n=0;n<a;++n)r[n]===t&&++i;return i}destructEndLink(t){const r=t.trim();let a=r.slice(0,-1),i="arrow_open";switch(r.slice(-1)){case"x":i="arrow_cross",r.startsWith("x")&&(i="double_"+i,a=a.slice(1));break;case">":i="arrow_point",r.startsWith("<")&&(i="double_"+i,a=a.slice(1));break;case"o":i="arrow_circle",r.startsWith("o")&&(i="double_"+i,a=a.slice(1));break}let n="normal",s=a.length-1;a.startsWith("=")&&(n="thick"),a.startsWith("~")&&(n="invisible");const o=this.countChar(".",a);return o&&(n="dotted",s=o),{type:i,stroke:n,length:s}}destructLink(t,r){const a=this.destructEndLink(t);let i;if(r){if(i=this.destructStartLink(r),i.stroke!==a.stroke)return{type:"INVALID",stroke:"INVALID"};if(i.type==="arrow_open")i.type=a.type;else{if(i.type!==a.type)return{type:"INVALID",stroke:"INVALID"};i.type="double_"+i.type}return i.type==="double_arrow"&&(i.type="double_arrow_point"),i.length=a.length,i}return a}exists(t,r){for(const a of t)if(a.nodes.includes(r))return!0;return!1}makeUniq(t,r){const a=[];return t.nodes.forEach((i,n)=>{this.exists(r,i)||a.push(t.nodes[n])}),{nodes:a}}getTypeFromVertex(t){if(t.img)return"imageSquare";if(t.icon)return t.form==="circle"?"iconCircle":t.form==="square"?"iconSquare":t.form==="rounded"?"iconRounded":"icon";switch(t.type){case"square":case void 0:return"squareRect";case"round":return"roundedRect";case"ellipse":return"ellipse";default:return t.type}}findNode(t,r){return t.find(a=>a.id===r)}destructEdgeType(t){let r="none",a="arrow_point";switch(t){case"arrow_point":case"arrow_circle":case"arrow_cross":a=t;break;case"double_arrow_point":case"double_arrow_circle":case"double_arrow_cross":r=t.replace("double_",""),a=r;break}return{arrowTypeStart:r,arrowTypeEnd:a}}addNodeFromVertex(t,r,a,i,n,s){var h;const o=a.get(t.id),l=i.get(t.id)??!1,u=this.findNode(r,t.id);if(u)u.cssStyles=t.styles,u.cssCompiledStyles=this.getCompiledStyles(t.classes),u.cssClasses=t.classes.join(" ");else{const d={id:t.id,label:t.text,labelStyle:"",parentId:o,padding:((h=n.flowchart)==null?void 0:h.padding)||8,cssStyles:t.styles,cssCompiledStyles:this.getCompiledStyles(["default","node",...t.classes]),cssClasses:"default "+t.classes.join(" "),dir:t.dir,domId:t.domId,look:s,link:t.link,linkTarget:t.linkTarget,tooltip:this.getTooltip(t.id),icon:t.icon,pos:t.pos,img:t.img,assetWidth:t.assetWidth,assetHeight:t.assetHeight,constraint:t.constraint};l?r.push({...d,isGroup:!0,shape:"rect"}):r.push({...d,isGroup:!1,shape:this.getTypeFromVertex(t)})}}getCompiledStyles(t){let r=[];for(const a of t){const i=this.classes.get(a);i!=null&&i.styles&&(r=[...r,...i.styles??[]].map(n=>n.trim())),i!=null&&i.textStyles&&(r=[...r,...i.textStyles??[]].map(n=>n.trim()))}return r}getData(){const t=dt(),r=[],a=[],i=this.getSubGraphs(),n=new Map,s=new Map;for(let u=i.length-1;u>=0;u--){const h=i[u];h.nodes.length>0&&s.set(h.id,!0);for(const d of h.nodes)n.set(d,h.id)}for(let u=i.length-1;u>=0;u--){const h=i[u];r.push({id:h.id,label:h.title,labelStyle:"",parentId:n.get(h.id),padding:8,cssCompiledStyles:this.getCompiledStyles(h.classes),cssClasses:h.classes.join(" "),shape:"rect",dir:h.dir,isGroup:!0,look:t.look})}this.getVertices().forEach(u=>{this.addNodeFromVertex(u,r,n,s,t,t.look||"classic")});const l=this.getEdges();return l.forEach((u,h)=>{var v;const{arrowTypeStart:d,arrowTypeEnd:f}=this.destructEdgeType(u.type),p=[...l.defaultStyle??[]];u.style&&p.push(...u.style);const y={id:Dl(u.start,u.end,{counter:h,prefix:"L"},u.id),isUserDefinedId:u.isUserDefinedId,start:u.start,end:u.end,type:u.type??"normal",label:u.text,labelpos:"c",thickness:u.stroke,minlen:u.length,classes:(u==null?void 0:u.stroke)==="invisible"?"":"edge-thickness-normal edge-pattern-solid flowchart-link",arrowTypeStart:(u==null?void 0:u.stroke)==="invisible"||(u==null?void 0:u.type)==="arrow_open"?"none":d,arrowTypeEnd:(u==null?void 0:u.stroke)==="invisible"||(u==null?void 0:u.type)==="arrow_open"?"none":f,arrowheadStyle:"fill: #333",cssCompiledStyles:this.getCompiledStyles(u.classes),labelStyle:p,style:p,pattern:u.stroke,look:t.look,animate:u.animate,animation:u.animation,curve:u.interpolate||this.edges.defaultInterpolate||((v=t.flowchart)==null?void 0:v.curve)};a.push(y)}),{nodes:r,edges:a,other:{},config:t}}defaultConfig(){return _x.flowchart}},g(qs,"FlowDB"),qs),FD=g(function(e,t){return t.db.getClasses()},"getClasses"),OD=g(async function(e,t,r,a){var p;G.info("REF0:"),G.info("Drawing state diagram (v2)",t);const{securityLevel:i,flowchart:n,layout:s}=dt();let o;i==="sandbox"&&(o=It("#i"+t));const l=i==="sandbox"?o.nodes()[0].contentDocument:document;G.debug("Before getData: ");const u=a.db.getData();G.debug("Data: ",u);const h=pc(t,i),d=a.db.getDirection();u.type=a.type,u.layoutAlgorithm=Oh(s),u.layoutAlgorithm==="dagre"&&s==="elk"&&G.warn("flowchart-elk was moved to an external package in Mermaid v11. Please refer [release notes](https://github.com/mermaid-js/mermaid/releases/tag/v11.0.0) for more details. This diagram will be rendered using `dagre` layout as a fallback."),u.direction=d,u.nodeSpacing=(n==null?void 0:n.nodeSpacing)||50,u.rankSpacing=(n==null?void 0:n.rankSpacing)||50,u.markers=["point","circle","cross"],u.diagramId=t,G.debug("REF1:",u),await fc(u,h);const f=((p=u.config.flowchart)==null?void 0:p.diagramPadding)??8;xe.insertTitle(h,"flowchartTitleText",(n==null?void 0:n.titleTopMargin)||0,a.db.getDiagramTitle()),gc(h,f,"flowchart",(n==null?void 0:n.useMaxWidth)||!1);for(const y of u.nodes){const v=It(`#${t} [id="${y.id}"]`);if(!v||!y.link)continue;const m=l.createElementNS("http://www.w3.org/2000/svg","a");m.setAttributeNS("http://www.w3.org/2000/svg","class",y.cssClasses),m.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),i==="sandbox"?m.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):y.linkTarget&&m.setAttributeNS("http://www.w3.org/2000/svg","target",y.linkTarget);const x=v.insert(function(){return m},":first-child"),b=v.select(".label-container");b&&x.append(function(){return b.node()});const w=v.select(".label");w&&x.append(function(){return w.node()})}},"draw"),$D={getClasses:FD,draw:OD},Hp=function(){var e=g(function(pa,re,he,ye){for(he=he||{},ye=pa.length;ye--;he[pa[ye]]=re);return he},"o"),t=[1,4],r=[1,3],a=[1,5],i=[1,8,9,10,11,27,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],n=[2,2],s=[1,13],o=[1,14],l=[1,15],u=[1,16],h=[1,23],d=[1,25],f=[1,26],p=[1,27],y=[1,49],v=[1,48],m=[1,29],x=[1,30],b=[1,31],w=[1,32],C=[1,33],T=[1,44],k=[1,46],S=[1,42],L=[1,47],_=[1,43],A=[1,50],E=[1,45],D=[1,51],R=[1,52],O=[1,34],P=[1,35],$=[1,36],M=[1,37],I=[1,57],F=[1,8,9,10,11,27,32,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],V=[1,61],N=[1,60],q=[1,62],U=[8,9,11,75,77,78],X=[1,78],lt=[1,91],J=[1,96],ct=[1,95],yt=[1,92],ut=[1,88],Q=[1,94],K=[1,90],j=[1,97],Y=[1,93],st=[1,98],W=[1,89],bt=[8,9,10,11,40,75,77,78],tt=[8,9,10,11,40,46,75,77,78],H=[8,9,10,11,29,40,44,46,48,50,52,54,56,58,60,63,65,67,68,70,75,77,78,89,102,105,106,109,111,114,115,116],Et=[8,9,11,44,60,75,77,78,89,102,105,106,109,111,114,115,116],nt=[44,60,89,102,105,106,109,111,114,115,116],Lt=[1,121],Dt=[1,122],At=[1,124],xt=[1,123],_t=[44,60,62,74,89,102,105,106,109,111,114,115,116],vt=[1,133],wt=[1,147],St=[1,148],at=[1,149],Ct=[1,150],z=[1,135],ft=[1,137],B=[1,141],et=[1,142],Z=[1,143],ht=[1,144],ot=[1,145],pt=[1,146],gt=[1,151],kt=[1,152],Ft=[1,131],Ht=[1,132],Pt=[1,139],Ot=[1,134],Gt=[1,138],Bt=[1,136],te=[8,9,10,11,27,32,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],ue=[1,154],Ce=[1,156],Wt=[8,9,11],de=[8,9,10,11,14,44,60,89,105,106,109,111,114,115,116],$t=[1,176],Jt=[1,172],jt=[1,173],Qt=[1,177],Yt=[1,174],fe=[1,175],je=[77,116,119],me=[8,9,10,11,12,14,27,29,32,44,60,75,84,85,86,87,88,89,90,105,109,111,114,115,116],We=[10,106],Ve=[31,49,51,53,55,57,62,64,66,67,69,71,116,117,118],Re=[1,247],Te=[1,245],ra=[1,249],nr=[1,243],ba=[1,244],Na=[1,246],Ma=[1,248],Fa=[1,250],Mi=[1,268],Rc=[8,9,11,106],wa=[8,9,10,11,60,84,105,106,109,110,111,112],rl={trace:g(function(){},"trace"),yy:{},symbols_:{error:2,start:3,graphConfig:4,document:5,line:6,statement:7,SEMI:8,NEWLINE:9,SPACE:10,EOF:11,GRAPH:12,NODIR:13,DIR:14,FirstStmtSeparator:15,ending:16,endToken:17,spaceList:18,spaceListNewline:19,vertexStatement:20,separator:21,styleStatement:22,linkStyleStatement:23,classDefStatement:24,classStatement:25,clickStatement:26,subgraph:27,textNoTags:28,SQS:29,text:30,SQE:31,end:32,direction:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,shapeData:39,SHAPE_DATA:40,link:41,node:42,styledVertex:43,AMP:44,vertex:45,STYLE_SEPARATOR:46,idString:47,DOUBLECIRCLESTART:48,DOUBLECIRCLEEND:49,PS:50,PE:51,"(-":52,"-)":53,STADIUMSTART:54,STADIUMEND:55,SUBROUTINESTART:56,SUBROUTINEEND:57,VERTEX_WITH_PROPS_START:58,"NODE_STRING[field]":59,COLON:60,"NODE_STRING[value]":61,PIPE:62,CYLINDERSTART:63,CYLINDEREND:64,DIAMOND_START:65,DIAMOND_STOP:66,TAGEND:67,TRAPSTART:68,TRAPEND:69,INVTRAPSTART:70,INVTRAPEND:71,linkStatement:72,arrowText:73,TESTSTR:74,START_LINK:75,edgeText:76,LINK:77,LINK_ID:78,edgeTextToken:79,STR:80,MD_STR:81,textToken:82,keywords:83,STYLE:84,LINKSTYLE:85,CLASSDEF:86,CLASS:87,CLICK:88,DOWN:89,UP:90,textNoTagsToken:91,stylesOpt:92,"idString[vertex]":93,"idString[class]":94,CALLBACKNAME:95,CALLBACKARGS:96,HREF:97,LINK_TARGET:98,"STR[link]":99,"STR[tooltip]":100,alphaNum:101,DEFAULT:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,NODE_STRING:109,UNIT:110,BRKT:111,PCT:112,idStringToken:113,MINUS:114,MULT:115,UNICODE_TEXT:116,TEXT:117,TAGSTART:118,EDGE_TEXT:119,alphaNumToken:120,direction_tb:121,direction_bt:122,direction_rl:123,direction_lr:124,$accept:0,$end:1},terminals_:{2:"error",8:"SEMI",9:"NEWLINE",10:"SPACE",11:"EOF",12:"GRAPH",13:"NODIR",14:"DIR",27:"subgraph",29:"SQS",31:"SQE",32:"end",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",40:"SHAPE_DATA",44:"AMP",46:"STYLE_SEPARATOR",48:"DOUBLECIRCLESTART",49:"DOUBLECIRCLEEND",50:"PS",51:"PE",52:"(-",53:"-)",54:"STADIUMSTART",55:"STADIUMEND",56:"SUBROUTINESTART",57:"SUBROUTINEEND",58:"VERTEX_WITH_PROPS_START",59:"NODE_STRING[field]",60:"COLON",61:"NODE_STRING[value]",62:"PIPE",63:"CYLINDERSTART",64:"CYLINDEREND",65:"DIAMOND_START",66:"DIAMOND_STOP",67:"TAGEND",68:"TRAPSTART",69:"TRAPEND",70:"INVTRAPSTART",71:"INVTRAPEND",74:"TESTSTR",75:"START_LINK",77:"LINK",78:"LINK_ID",80:"STR",81:"MD_STR",84:"STYLE",85:"LINKSTYLE",86:"CLASSDEF",87:"CLASS",88:"CLICK",89:"DOWN",90:"UP",93:"idString[vertex]",94:"idString[class]",95:"CALLBACKNAME",96:"CALLBACKARGS",97:"HREF",98:"LINK_TARGET",99:"STR[link]",100:"STR[tooltip]",102:"DEFAULT",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"NODE_STRING",110:"UNIT",111:"BRKT",112:"PCT",114:"MINUS",115:"MULT",116:"UNICODE_TEXT",117:"TEXT",118:"TAGSTART",119:"EDGE_TEXT",121:"direction_tb",122:"direction_bt",123:"direction_rl",124:"direction_lr"},productions_:[0,[3,2],[5,0],[5,2],[6,1],[6,1],[6,1],[6,1],[6,1],[4,2],[4,2],[4,2],[4,3],[16,2],[16,1],[17,1],[17,1],[17,1],[15,1],[15,1],[15,2],[19,2],[19,2],[19,1],[19,1],[18,2],[18,1],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,9],[7,6],[7,4],[7,1],[7,2],[7,2],[7,1],[21,1],[21,1],[21,1],[39,2],[39,1],[20,4],[20,3],[20,4],[20,2],[20,2],[20,1],[42,1],[42,6],[42,5],[43,1],[43,3],[45,4],[45,4],[45,6],[45,4],[45,4],[45,4],[45,8],[45,4],[45,4],[45,4],[45,6],[45,4],[45,4],[45,4],[45,4],[45,4],[45,1],[41,2],[41,3],[41,3],[41,1],[41,3],[41,4],[76,1],[76,2],[76,1],[76,1],[72,1],[72,2],[73,3],[30,1],[30,2],[30,1],[30,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[28,1],[28,2],[28,1],[28,1],[24,5],[25,5],[26,2],[26,4],[26,3],[26,5],[26,3],[26,5],[26,5],[26,7],[26,2],[26,4],[26,2],[26,4],[26,4],[26,6],[22,5],[23,5],[23,5],[23,9],[23,9],[23,7],[23,7],[103,1],[103,3],[92,1],[92,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[82,1],[82,1],[82,1],[82,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[79,1],[79,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[47,1],[47,2],[101,1],[101,2],[33,1],[33,1],[33,1],[33,1]],performAction:g(function(re,he,ye,Nt,Ne,rt,Oa){var it=rt.length-1;switch(Ne){case 2:this.$=[];break;case 3:(!Array.isArray(rt[it])||rt[it].length>0)&&rt[it-1].push(rt[it]),this.$=rt[it-1];break;case 4:case 183:this.$=rt[it];break;case 11:Nt.setDirection("TB"),this.$="TB";break;case 12:Nt.setDirection(rt[it-1]),this.$=rt[it-1];break;case 27:this.$=rt[it-1].nodes;break;case 28:case 29:case 30:case 31:case 32:this.$=[];break;case 33:this.$=Nt.addSubGraph(rt[it-6],rt[it-1],rt[it-4]);break;case 34:this.$=Nt.addSubGraph(rt[it-3],rt[it-1],rt[it-3]);break;case 35:this.$=Nt.addSubGraph(void 0,rt[it-1],void 0);break;case 37:this.$=rt[it].trim(),Nt.setAccTitle(this.$);break;case 38:case 39:this.$=rt[it].trim(),Nt.setAccDescription(this.$);break;case 43:this.$=rt[it-1]+rt[it];break;case 44:this.$=rt[it];break;case 45:Nt.addVertex(rt[it-1][rt[it-1].length-1],void 0,void 0,void 0,void 0,void 0,void 0,rt[it]),Nt.addLink(rt[it-3].stmt,rt[it-1],rt[it-2]),this.$={stmt:rt[it-1],nodes:rt[it-1].concat(rt[it-3].nodes)};break;case 46:Nt.addLink(rt[it-2].stmt,rt[it],rt[it-1]),this.$={stmt:rt[it],nodes:rt[it].concat(rt[it-2].nodes)};break;case 47:Nt.addLink(rt[it-3].stmt,rt[it-1],rt[it-2]),this.$={stmt:rt[it-1],nodes:rt[it-1].concat(rt[it-3].nodes)};break;case 48:this.$={stmt:rt[it-1],nodes:rt[it-1]};break;case 49:Nt.addVertex(rt[it-1][rt[it-1].length-1],void 0,void 0,void 0,void 0,void 0,void 0,rt[it]),this.$={stmt:rt[it-1],nodes:rt[it-1],shapeData:rt[it]};break;case 50:this.$={stmt:rt[it],nodes:rt[it]};break;case 51:this.$=[rt[it]];break;case 52:Nt.addVertex(rt[it-5][rt[it-5].length-1],void 0,void 0,void 0,void 0,void 0,void 0,rt[it-4]),this.$=rt[it-5].concat(rt[it]);break;case 53:this.$=rt[it-4].concat(rt[it]);break;case 54:this.$=rt[it];break;case 55:this.$=rt[it-2],Nt.setClass(rt[it-2],rt[it]);break;case 56:this.$=rt[it-3],Nt.addVertex(rt[it-3],rt[it-1],"square");break;case 57:this.$=rt[it-3],Nt.addVertex(rt[it-3],rt[it-1],"doublecircle");break;case 58:this.$=rt[it-5],Nt.addVertex(rt[it-5],rt[it-2],"circle");break;case 59:this.$=rt[it-3],Nt.addVertex(rt[it-3],rt[it-1],"ellipse");break;case 60:this.$=rt[it-3],Nt.addVertex(rt[it-3],rt[it-1],"stadium");break;case 61:this.$=rt[it-3],Nt.addVertex(rt[it-3],rt[it-1],"subroutine");break;case 62:this.$=rt[it-7],Nt.addVertex(rt[it-7],rt[it-1],"rect",void 0,void 0,void 0,Object.fromEntries([[rt[it-5],rt[it-3]]]));break;case 63:this.$=rt[it-3],Nt.addVertex(rt[it-3],rt[it-1],"cylinder");break;case 64:this.$=rt[it-3],Nt.addVertex(rt[it-3],rt[it-1],"round");break;case 65:this.$=rt[it-3],Nt.addVertex(rt[it-3],rt[it-1],"diamond");break;case 66:this.$=rt[it-5],Nt.addVertex(rt[it-5],rt[it-2],"hexagon");break;case 67:this.$=rt[it-3],Nt.addVertex(rt[it-3],rt[it-1],"odd");break;case 68:this.$=rt[it-3],Nt.addVertex(rt[it-3],rt[it-1],"trapezoid");break;case 69:this.$=rt[it-3],Nt.addVertex(rt[it-3],rt[it-1],"inv_trapezoid");break;case 70:this.$=rt[it-3],Nt.addVertex(rt[it-3],rt[it-1],"lean_right");break;case 71:this.$=rt[it-3],Nt.addVertex(rt[it-3],rt[it-1],"lean_left");break;case 72:this.$=rt[it],Nt.addVertex(rt[it]);break;case 73:rt[it-1].text=rt[it],this.$=rt[it-1];break;case 74:case 75:rt[it-2].text=rt[it-1],this.$=rt[it-2];break;case 76:this.$=rt[it];break;case 77:var Je=Nt.destructLink(rt[it],rt[it-2]);this.$={type:Je.type,stroke:Je.stroke,length:Je.length,text:rt[it-1]};break;case 78:var Je=Nt.destructLink(rt[it],rt[it-2]);this.$={type:Je.type,stroke:Je.stroke,length:Je.length,text:rt[it-1],id:rt[it-3]};break;case 79:this.$={text:rt[it],type:"text"};break;case 80:this.$={text:rt[it-1].text+""+rt[it],type:rt[it-1].type};break;case 81:this.$={text:rt[it],type:"string"};break;case 82:this.$={text:rt[it],type:"markdown"};break;case 83:var Je=Nt.destructLink(rt[it]);this.$={type:Je.type,stroke:Je.stroke,length:Je.length};break;case 84:var Je=Nt.destructLink(rt[it]);this.$={type:Je.type,stroke:Je.stroke,length:Je.length,id:rt[it-1]};break;case 85:this.$=rt[it-1];break;case 86:this.$={text:rt[it],type:"text"};break;case 87:this.$={text:rt[it-1].text+""+rt[it],type:rt[it-1].type};break;case 88:this.$={text:rt[it],type:"string"};break;case 89:case 104:this.$={text:rt[it],type:"markdown"};break;case 101:this.$={text:rt[it],type:"text"};break;case 102:this.$={text:rt[it-1].text+""+rt[it],type:rt[it-1].type};break;case 103:this.$={text:rt[it],type:"text"};break;case 105:this.$=rt[it-4],Nt.addClass(rt[it-2],rt[it]);break;case 106:this.$=rt[it-4],Nt.setClass(rt[it-2],rt[it]);break;case 107:case 115:this.$=rt[it-1],Nt.setClickEvent(rt[it-1],rt[it]);break;case 108:case 116:this.$=rt[it-3],Nt.setClickEvent(rt[it-3],rt[it-2]),Nt.setTooltip(rt[it-3],rt[it]);break;case 109:this.$=rt[it-2],Nt.setClickEvent(rt[it-2],rt[it-1],rt[it]);break;case 110:this.$=rt[it-4],Nt.setClickEvent(rt[it-4],rt[it-3],rt[it-2]),Nt.setTooltip(rt[it-4],rt[it]);break;case 111:this.$=rt[it-2],Nt.setLink(rt[it-2],rt[it]);break;case 112:this.$=rt[it-4],Nt.setLink(rt[it-4],rt[it-2]),Nt.setTooltip(rt[it-4],rt[it]);break;case 113:this.$=rt[it-4],Nt.setLink(rt[it-4],rt[it-2],rt[it]);break;case 114:this.$=rt[it-6],Nt.setLink(rt[it-6],rt[it-4],rt[it]),Nt.setTooltip(rt[it-6],rt[it-2]);break;case 117:this.$=rt[it-1],Nt.setLink(rt[it-1],rt[it]);break;case 118:this.$=rt[it-3],Nt.setLink(rt[it-3],rt[it-2]),Nt.setTooltip(rt[it-3],rt[it]);break;case 119:this.$=rt[it-3],Nt.setLink(rt[it-3],rt[it-2],rt[it]);break;case 120:this.$=rt[it-5],Nt.setLink(rt[it-5],rt[it-4],rt[it]),Nt.setTooltip(rt[it-5],rt[it-2]);break;case 121:this.$=rt[it-4],Nt.addVertex(rt[it-2],void 0,void 0,rt[it]);break;case 122:this.$=rt[it-4],Nt.updateLink([rt[it-2]],rt[it]);break;case 123:this.$=rt[it-4],Nt.updateLink(rt[it-2],rt[it]);break;case 124:this.$=rt[it-8],Nt.updateLinkInterpolate([rt[it-6]],rt[it-2]),Nt.updateLink([rt[it-6]],rt[it]);break;case 125:this.$=rt[it-8],Nt.updateLinkInterpolate(rt[it-6],rt[it-2]),Nt.updateLink(rt[it-6],rt[it]);break;case 126:this.$=rt[it-6],Nt.updateLinkInterpolate([rt[it-4]],rt[it]);break;case 127:this.$=rt[it-6],Nt.updateLinkInterpolate(rt[it-4],rt[it]);break;case 128:case 130:this.$=[rt[it]];break;case 129:case 131:rt[it-2].push(rt[it]),this.$=rt[it-2];break;case 133:this.$=rt[it-1]+rt[it];break;case 181:this.$=rt[it];break;case 182:this.$=rt[it-1]+""+rt[it];break;case 184:this.$=rt[it-1]+""+rt[it];break;case 185:this.$={stmt:"dir",value:"TB"};break;case 186:this.$={stmt:"dir",value:"BT"};break;case 187:this.$={stmt:"dir",value:"RL"};break;case 188:this.$={stmt:"dir",value:"LR"};break}},"anonymous"),table:[{3:1,4:2,9:t,10:r,12:a},{1:[3]},e(i,n,{5:6}),{4:7,9:t,10:r,12:a},{4:8,9:t,10:r,12:a},{13:[1,9],14:[1,10]},{1:[2,1],6:11,7:12,8:s,9:o,10:l,11:u,20:17,22:18,23:19,24:20,25:21,26:22,27:h,33:24,34:d,36:f,38:p,42:28,43:38,44:y,45:39,47:40,60:v,84:m,85:x,86:b,87:w,88:C,89:T,102:k,105:S,106:L,109:_,111:A,113:41,114:E,115:D,116:R,121:O,122:P,123:$,124:M},e(i,[2,9]),e(i,[2,10]),e(i,[2,11]),{8:[1,54],9:[1,55],10:I,15:53,18:56},e(F,[2,3]),e(F,[2,4]),e(F,[2,5]),e(F,[2,6]),e(F,[2,7]),e(F,[2,8]),{8:V,9:N,11:q,21:58,41:59,72:63,75:[1,64],77:[1,66],78:[1,65]},{8:V,9:N,11:q,21:67},{8:V,9:N,11:q,21:68},{8:V,9:N,11:q,21:69},{8:V,9:N,11:q,21:70},{8:V,9:N,11:q,21:71},{8:V,9:N,10:[1,72],11:q,21:73},e(F,[2,36]),{35:[1,74]},{37:[1,75]},e(F,[2,39]),e(U,[2,50],{18:76,39:77,10:I,40:X}),{10:[1,79]},{10:[1,80]},{10:[1,81]},{10:[1,82]},{14:lt,44:J,60:ct,80:[1,86],89:yt,95:[1,83],97:[1,84],101:85,105:ut,106:Q,109:K,111:j,114:Y,115:st,116:W,120:87},e(F,[2,185]),e(F,[2,186]),e(F,[2,187]),e(F,[2,188]),e(bt,[2,51]),e(bt,[2,54],{46:[1,99]}),e(tt,[2,72],{113:112,29:[1,100],44:y,48:[1,101],50:[1,102],52:[1,103],54:[1,104],56:[1,105],58:[1,106],60:v,63:[1,107],65:[1,108],67:[1,109],68:[1,110],70:[1,111],89:T,102:k,105:S,106:L,109:_,111:A,114:E,115:D,116:R}),e(H,[2,181]),e(H,[2,142]),e(H,[2,143]),e(H,[2,144]),e(H,[2,145]),e(H,[2,146]),e(H,[2,147]),e(H,[2,148]),e(H,[2,149]),e(H,[2,150]),e(H,[2,151]),e(H,[2,152]),e(i,[2,12]),e(i,[2,18]),e(i,[2,19]),{9:[1,113]},e(Et,[2,26],{18:114,10:I}),e(F,[2,27]),{42:115,43:38,44:y,45:39,47:40,60:v,89:T,102:k,105:S,106:L,109:_,111:A,113:41,114:E,115:D,116:R},e(F,[2,40]),e(F,[2,41]),e(F,[2,42]),e(nt,[2,76],{73:116,62:[1,118],74:[1,117]}),{76:119,79:120,80:Lt,81:Dt,116:At,119:xt},{75:[1,125],77:[1,126]},e(_t,[2,83]),e(F,[2,28]),e(F,[2,29]),e(F,[2,30]),e(F,[2,31]),e(F,[2,32]),{10:vt,12:wt,14:St,27:at,28:127,32:Ct,44:z,60:ft,75:B,80:[1,129],81:[1,130],83:140,84:et,85:Z,86:ht,87:ot,88:pt,89:gt,90:kt,91:128,105:Ft,109:Ht,111:Pt,114:Ot,115:Gt,116:Bt},e(te,n,{5:153}),e(F,[2,37]),e(F,[2,38]),e(U,[2,48],{44:ue}),e(U,[2,49],{18:155,10:I,40:Ce}),e(bt,[2,44]),{44:y,47:157,60:v,89:T,102:k,105:S,106:L,109:_,111:A,113:41,114:E,115:D,116:R},{102:[1,158],103:159,105:[1,160]},{44:y,47:161,60:v,89:T,102:k,105:S,106:L,109:_,111:A,113:41,114:E,115:D,116:R},{44:y,47:162,60:v,89:T,102:k,105:S,106:L,109:_,111:A,113:41,114:E,115:D,116:R},e(Wt,[2,107],{10:[1,163],96:[1,164]}),{80:[1,165]},e(Wt,[2,115],{120:167,10:[1,166],14:lt,44:J,60:ct,89:yt,105:ut,106:Q,109:K,111:j,114:Y,115:st,116:W}),e(Wt,[2,117],{10:[1,168]}),e(de,[2,183]),e(de,[2,170]),e(de,[2,171]),e(de,[2,172]),e(de,[2,173]),e(de,[2,174]),e(de,[2,175]),e(de,[2,176]),e(de,[2,177]),e(de,[2,178]),e(de,[2,179]),e(de,[2,180]),{44:y,47:169,60:v,89:T,102:k,105:S,106:L,109:_,111:A,113:41,114:E,115:D,116:R},{30:170,67:$t,80:Jt,81:jt,82:171,116:Qt,117:Yt,118:fe},{30:178,67:$t,80:Jt,81:jt,82:171,116:Qt,117:Yt,118:fe},{30:180,50:[1,179],67:$t,80:Jt,81:jt,82:171,116:Qt,117:Yt,118:fe},{30:181,67:$t,80:Jt,81:jt,82:171,116:Qt,117:Yt,118:fe},{30:182,67:$t,80:Jt,81:jt,82:171,116:Qt,117:Yt,118:fe},{30:183,67:$t,80:Jt,81:jt,82:171,116:Qt,117:Yt,118:fe},{109:[1,184]},{30:185,67:$t,80:Jt,81:jt,82:171,116:Qt,117:Yt,118:fe},{30:186,65:[1,187],67:$t,80:Jt,81:jt,82:171,116:Qt,117:Yt,118:fe},{30:188,67:$t,80:Jt,81:jt,82:171,116:Qt,117:Yt,118:fe},{30:189,67:$t,80:Jt,81:jt,82:171,116:Qt,117:Yt,118:fe},{30:190,67:$t,80:Jt,81:jt,82:171,116:Qt,117:Yt,118:fe},e(H,[2,182]),e(i,[2,20]),e(Et,[2,25]),e(U,[2,46],{39:191,18:192,10:I,40:X}),e(nt,[2,73],{10:[1,193]}),{10:[1,194]},{30:195,67:$t,80:Jt,81:jt,82:171,116:Qt,117:Yt,118:fe},{77:[1,196],79:197,116:At,119:xt},e(je,[2,79]),e(je,[2,81]),e(je,[2,82]),e(je,[2,168]),e(je,[2,169]),{76:198,79:120,80:Lt,81:Dt,116:At,119:xt},e(_t,[2,84]),{8:V,9:N,10:vt,11:q,12:wt,14:St,21:200,27:at,29:[1,199],32:Ct,44:z,60:ft,75:B,83:140,84:et,85:Z,86:ht,87:ot,88:pt,89:gt,90:kt,91:201,105:Ft,109:Ht,111:Pt,114:Ot,115:Gt,116:Bt},e(me,[2,101]),e(me,[2,103]),e(me,[2,104]),e(me,[2,157]),e(me,[2,158]),e(me,[2,159]),e(me,[2,160]),e(me,[2,161]),e(me,[2,162]),e(me,[2,163]),e(me,[2,164]),e(me,[2,165]),e(me,[2,166]),e(me,[2,167]),e(me,[2,90]),e(me,[2,91]),e(me,[2,92]),e(me,[2,93]),e(me,[2,94]),e(me,[2,95]),e(me,[2,96]),e(me,[2,97]),e(me,[2,98]),e(me,[2,99]),e(me,[2,100]),{6:11,7:12,8:s,9:o,10:l,11:u,20:17,22:18,23:19,24:20,25:21,26:22,27:h,32:[1,202],33:24,34:d,36:f,38:p,42:28,43:38,44:y,45:39,47:40,60:v,84:m,85:x,86:b,87:w,88:C,89:T,102:k,105:S,106:L,109:_,111:A,113:41,114:E,115:D,116:R,121:O,122:P,123:$,124:M},{10:I,18:203},{44:[1,204]},e(bt,[2,43]),{10:[1,205],44:y,60:v,89:T,102:k,105:S,106:L,109:_,111:A,113:112,114:E,115:D,116:R},{10:[1,206]},{10:[1,207],106:[1,208]},e(We,[2,128]),{10:[1,209],44:y,60:v,89:T,102:k,105:S,106:L,109:_,111:A,113:112,114:E,115:D,116:R},{10:[1,210],44:y,60:v,89:T,102:k,105:S,106:L,109:_,111:A,113:112,114:E,115:D,116:R},{80:[1,211]},e(Wt,[2,109],{10:[1,212]}),e(Wt,[2,111],{10:[1,213]}),{80:[1,214]},e(de,[2,184]),{80:[1,215],98:[1,216]},e(bt,[2,55],{113:112,44:y,60:v,89:T,102:k,105:S,106:L,109:_,111:A,114:E,115:D,116:R}),{31:[1,217],67:$t,82:218,116:Qt,117:Yt,118:fe},e(Ve,[2,86]),e(Ve,[2,88]),e(Ve,[2,89]),e(Ve,[2,153]),e(Ve,[2,154]),e(Ve,[2,155]),e(Ve,[2,156]),{49:[1,219],67:$t,82:218,116:Qt,117:Yt,118:fe},{30:220,67:$t,80:Jt,81:jt,82:171,116:Qt,117:Yt,118:fe},{51:[1,221],67:$t,82:218,116:Qt,117:Yt,118:fe},{53:[1,222],67:$t,82:218,116:Qt,117:Yt,118:fe},{55:[1,223],67:$t,82:218,116:Qt,117:Yt,118:fe},{57:[1,224],67:$t,82:218,116:Qt,117:Yt,118:fe},{60:[1,225]},{64:[1,226],67:$t,82:218,116:Qt,117:Yt,118:fe},{66:[1,227],67:$t,82:218,116:Qt,117:Yt,118:fe},{30:228,67:$t,80:Jt,81:jt,82:171,116:Qt,117:Yt,118:fe},{31:[1,229],67:$t,82:218,116:Qt,117:Yt,118:fe},{67:$t,69:[1,230],71:[1,231],82:218,116:Qt,117:Yt,118:fe},{67:$t,69:[1,233],71:[1,232],82:218,116:Qt,117:Yt,118:fe},e(U,[2,45],{18:155,10:I,40:Ce}),e(U,[2,47],{44:ue}),e(nt,[2,75]),e(nt,[2,74]),{62:[1,234],67:$t,82:218,116:Qt,117:Yt,118:fe},e(nt,[2,77]),e(je,[2,80]),{77:[1,235],79:197,116:At,119:xt},{30:236,67:$t,80:Jt,81:jt,82:171,116:Qt,117:Yt,118:fe},e(te,n,{5:237}),e(me,[2,102]),e(F,[2,35]),{43:238,44:y,45:39,47:40,60:v,89:T,102:k,105:S,106:L,109:_,111:A,113:41,114:E,115:D,116:R},{10:I,18:239},{10:Re,60:Te,84:ra,92:240,105:nr,107:241,108:242,109:ba,110:Na,111:Ma,112:Fa},{10:Re,60:Te,84:ra,92:251,104:[1,252],105:nr,107:241,108:242,109:ba,110:Na,111:Ma,112:Fa},{10:Re,60:Te,84:ra,92:253,104:[1,254],105:nr,107:241,108:242,109:ba,110:Na,111:Ma,112:Fa},{105:[1,255]},{10:Re,60:Te,84:ra,92:256,105:nr,107:241,108:242,109:ba,110:Na,111:Ma,112:Fa},{44:y,47:257,60:v,89:T,102:k,105:S,106:L,109:_,111:A,113:41,114:E,115:D,116:R},e(Wt,[2,108]),{80:[1,258]},{80:[1,259],98:[1,260]},e(Wt,[2,116]),e(Wt,[2,118],{10:[1,261]}),e(Wt,[2,119]),e(tt,[2,56]),e(Ve,[2,87]),e(tt,[2,57]),{51:[1,262],67:$t,82:218,116:Qt,117:Yt,118:fe},e(tt,[2,64]),e(tt,[2,59]),e(tt,[2,60]),e(tt,[2,61]),{109:[1,263]},e(tt,[2,63]),e(tt,[2,65]),{66:[1,264],67:$t,82:218,116:Qt,117:Yt,118:fe},e(tt,[2,67]),e(tt,[2,68]),e(tt,[2,70]),e(tt,[2,69]),e(tt,[2,71]),e([10,44,60,89,102,105,106,109,111,114,115,116],[2,85]),e(nt,[2,78]),{31:[1,265],67:$t,82:218,116:Qt,117:Yt,118:fe},{6:11,7:12,8:s,9:o,10:l,11:u,20:17,22:18,23:19,24:20,25:21,26:22,27:h,32:[1,266],33:24,34:d,36:f,38:p,42:28,43:38,44:y,45:39,47:40,60:v,84:m,85:x,86:b,87:w,88:C,89:T,102:k,105:S,106:L,109:_,111:A,113:41,114:E,115:D,116:R,121:O,122:P,123:$,124:M},e(bt,[2,53]),{43:267,44:y,45:39,47:40,60:v,89:T,102:k,105:S,106:L,109:_,111:A,113:41,114:E,115:D,116:R},e(Wt,[2,121],{106:Mi}),e(Rc,[2,130],{108:269,10:Re,60:Te,84:ra,105:nr,109:ba,110:Na,111:Ma,112:Fa}),e(wa,[2,132]),e(wa,[2,134]),e(wa,[2,135]),e(wa,[2,136]),e(wa,[2,137]),e(wa,[2,138]),e(wa,[2,139]),e(wa,[2,140]),e(wa,[2,141]),e(Wt,[2,122],{106:Mi}),{10:[1,270]},e(Wt,[2,123],{106:Mi}),{10:[1,271]},e(We,[2,129]),e(Wt,[2,105],{106:Mi}),e(Wt,[2,106],{113:112,44:y,60:v,89:T,102:k,105:S,106:L,109:_,111:A,114:E,115:D,116:R}),e(Wt,[2,110]),e(Wt,[2,112],{10:[1,272]}),e(Wt,[2,113]),{98:[1,273]},{51:[1,274]},{62:[1,275]},{66:[1,276]},{8:V,9:N,11:q,21:277},e(F,[2,34]),e(bt,[2,52]),{10:Re,60:Te,84:ra,105:nr,107:278,108:242,109:ba,110:Na,111:Ma,112:Fa},e(wa,[2,133]),{14:lt,44:J,60:ct,89:yt,101:279,105:ut,106:Q,109:K,111:j,114:Y,115:st,116:W,120:87},{14:lt,44:J,60:ct,89:yt,101:280,105:ut,106:Q,109:K,111:j,114:Y,115:st,116:W,120:87},{98:[1,281]},e(Wt,[2,120]),e(tt,[2,58]),{30:282,67:$t,80:Jt,81:jt,82:171,116:Qt,117:Yt,118:fe},e(tt,[2,66]),e(te,n,{5:283}),e(Rc,[2,131],{108:269,10:Re,60:Te,84:ra,105:nr,109:ba,110:Na,111:Ma,112:Fa}),e(Wt,[2,126],{120:167,10:[1,284],14:lt,44:J,60:ct,89:yt,105:ut,106:Q,109:K,111:j,114:Y,115:st,116:W}),e(Wt,[2,127],{120:167,10:[1,285],14:lt,44:J,60:ct,89:yt,105:ut,106:Q,109:K,111:j,114:Y,115:st,116:W}),e(Wt,[2,114]),{31:[1,286],67:$t,82:218,116:Qt,117:Yt,118:fe},{6:11,7:12,8:s,9:o,10:l,11:u,20:17,22:18,23:19,24:20,25:21,26:22,27:h,32:[1,287],33:24,34:d,36:f,38:p,42:28,43:38,44:y,45:39,47:40,60:v,84:m,85:x,86:b,87:w,88:C,89:T,102:k,105:S,106:L,109:_,111:A,113:41,114:E,115:D,116:R,121:O,122:P,123:$,124:M},{10:Re,60:Te,84:ra,92:288,105:nr,107:241,108:242,109:ba,110:Na,111:Ma,112:Fa},{10:Re,60:Te,84:ra,92:289,105:nr,107:241,108:242,109:ba,110:Na,111:Ma,112:Fa},e(tt,[2,62]),e(F,[2,33]),e(Wt,[2,124],{106:Mi}),e(Wt,[2,125],{106:Mi})],defaultActions:{},parseError:g(function(re,he){if(he.recoverable)this.trace(re);else{var ye=new Error(re);throw ye.hash=he,ye}},"parseError"),parse:g(function(re){var he=this,ye=[0],Nt=[],Ne=[null],rt=[],Oa=this.table,it="",Je=0,H1=0,GS=2,Y1=1,HS=rt.slice.call(arguments,1),kr=Object.create(this.lexer),yn={yy:{}};for(var vd in this.yy)Object.prototype.hasOwnProperty.call(this.yy,vd)&&(yn.yy[vd]=this.yy[vd]);kr.setInput(re,yn.yy),yn.yy.lexer=kr,yn.yy.parser=this,typeof kr.yylloc>"u"&&(kr.yylloc={});var md=kr.yylloc;rt.push(md);var YS=kr.options&&kr.options.ranges;typeof yn.yy.parseError=="function"?this.parseError=yn.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function US(ga){ye.length=ye.length-2*ga,Ne.length=Ne.length-ga,rt.length=rt.length-ga}g(US,"popStack");function U1(){var ga;return ga=Nt.pop()||kr.lex()||Y1,typeof ga!="number"&&(ga instanceof Array&&(Nt=ga,ga=Nt.pop()),ga=he.symbols_[ga]||ga),ga}g(U1,"lex");for(var aa,vn,ka,xd,is={},Ic,pi,X1,Pc;;){if(vn=ye[ye.length-1],this.defaultActions[vn]?ka=this.defaultActions[vn]:((aa===null||typeof aa>"u")&&(aa=U1()),ka=Oa[vn]&&Oa[vn][aa]),typeof ka>"u"||!ka.length||!ka[0]){var bd="";Pc=[];for(Ic in Oa[vn])this.terminals_[Ic]&&Ic>GS&&Pc.push("'"+this.terminals_[Ic]+"'");kr.showPosition?bd="Parse error on line "+(Je+1)+`:
`+kr.showPosition()+`
Expecting `+Pc.join(", ")+", got '"+(this.terminals_[aa]||aa)+"'":bd="Parse error on line "+(Je+1)+": Unexpected "+(aa==Y1?"end of input":"'"+(this.terminals_[aa]||aa)+"'"),this.parseError(bd,{text:kr.match,token:this.terminals_[aa]||aa,line:kr.yylineno,loc:md,expected:Pc})}if(ka[0]instanceof Array&&ka.length>1)throw new Error("Parse Error: multiple actions possible at state: "+vn+", token: "+aa);switch(ka[0]){case 1:ye.push(aa),Ne.push(kr.yytext),rt.push(kr.yylloc),ye.push(ka[1]),aa=null,H1=kr.yyleng,it=kr.yytext,Je=kr.yylineno,md=kr.yylloc;break;case 2:if(pi=this.productions_[ka[1]][1],is.$=Ne[Ne.length-pi],is._$={first_line:rt[rt.length-(pi||1)].first_line,last_line:rt[rt.length-1].last_line,first_column:rt[rt.length-(pi||1)].first_column,last_column:rt[rt.length-1].last_column},YS&&(is._$.range=[rt[rt.length-(pi||1)].range[0],rt[rt.length-1].range[1]]),xd=this.performAction.apply(is,[it,H1,Je,yn.yy,ka[1],Ne,rt].concat(HS)),typeof xd<"u")return xd;pi&&(ye=ye.slice(0,-1*pi*2),Ne=Ne.slice(0,-1*pi),rt=rt.slice(0,-1*pi)),ye.push(this.productions_[ka[1]][0]),Ne.push(is.$),rt.push(is._$),X1=Oa[ye[ye.length-2]][ye[ye.length-1]],ye.push(X1);break;case 3:return!0}}return!0},"parse")},gn=function(){var pa={EOF:1,parseError:g(function(he,ye){if(this.yy.parser)this.yy.parser.parseError(he,ye);else throw new Error(he)},"parseError"),setInput:g(function(re,he){return this.yy=he||this.yy||{},this._input=re,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:g(function(){var re=this._input[0];this.yytext+=re,this.yyleng++,this.offset++,this.match+=re,this.matched+=re;var he=re.match(/(?:\r\n?|\n).*/g);return he?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),re},"input"),unput:g(function(re){var he=re.length,ye=re.split(/(?:\r\n?|\n)/g);this._input=re+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-he),this.offset-=he;var Nt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ye.length-1&&(this.yylineno-=ye.length-1);var Ne=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ye?(ye.length===Nt.length?this.yylloc.first_column:0)+Nt[Nt.length-ye.length].length-ye[0].length:this.yylloc.first_column-he},this.options.ranges&&(this.yylloc.range=[Ne[0],Ne[0]+this.yyleng-he]),this.yyleng=this.yytext.length,this},"unput"),more:g(function(){return this._more=!0,this},"more"),reject:g(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:g(function(re){this.unput(this.match.slice(re))},"less"),pastInput:g(function(){var re=this.matched.substr(0,this.matched.length-this.match.length);return(re.length>20?"...":"")+re.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:g(function(){var re=this.match;return re.length<20&&(re+=this._input.substr(0,20-re.length)),(re.substr(0,20)+(re.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:g(function(){var re=this.pastInput(),he=new Array(re.length+1).join("-");return re+this.upcomingInput()+`
`+he+"^"},"showPosition"),test_match:g(function(re,he){var ye,Nt,Ne;if(this.options.backtrack_lexer&&(Ne={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ne.yylloc.range=this.yylloc.range.slice(0))),Nt=re[0].match(/(?:\r\n?|\n).*/g),Nt&&(this.yylineno+=Nt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Nt?Nt[Nt.length-1].length-Nt[Nt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+re[0].length},this.yytext+=re[0],this.match+=re[0],this.matches=re,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(re[0].length),this.matched+=re[0],ye=this.performAction.call(this,this.yy,this,he,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ye)return ye;if(this._backtrack){for(var rt in Ne)this[rt]=Ne[rt];return!1}return!1},"test_match"),next:g(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var re,he,ye,Nt;this._more||(this.yytext="",this.match="");for(var Ne=this._currentRules(),rt=0;rt<Ne.length;rt++)if(ye=this._input.match(this.rules[Ne[rt]]),ye&&(!he||ye[0].length>he[0].length)){if(he=ye,Nt=rt,this.options.backtrack_lexer){if(re=this.test_match(ye,Ne[rt]),re!==!1)return re;if(this._backtrack){he=!1;continue}else return!1}else if(!this.options.flex)break}return he?(re=this.test_match(he,Ne[Nt]),re!==!1?re:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:g(function(){var he=this.next();return he||this.lex()},"lex"),begin:g(function(he){this.conditionStack.push(he)},"begin"),popState:g(function(){var he=this.conditionStack.length-1;return he>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:g(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:g(function(he){return he=this.conditionStack.length-1-Math.abs(he||0),he>=0?this.conditionStack[he]:"INITIAL"},"topState"),pushState:g(function(he){this.begin(he)},"pushState"),stateStackSize:g(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:g(function(he,ye,Nt,Ne){switch(Nt){case 0:return this.begin("acc_title"),34;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),36;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.pushState("shapeData"),ye.yytext="",40;case 8:return this.pushState("shapeDataStr"),40;case 9:return this.popState(),40;case 10:const rt=/\n\s*/g;return ye.yytext=ye.yytext.replace(rt,"<br/>"),40;case 11:return 40;case 12:this.popState();break;case 13:this.begin("callbackname");break;case 14:this.popState();break;case 15:this.popState(),this.begin("callbackargs");break;case 16:return 95;case 17:this.popState();break;case 18:return 96;case 19:return"MD_STR";case 20:this.popState();break;case 21:this.begin("md_string");break;case 22:return"STR";case 23:this.popState();break;case 24:this.pushState("string");break;case 25:return 84;case 26:return 102;case 27:return 85;case 28:return 104;case 29:return 86;case 30:return 87;case 31:return 97;case 32:this.begin("click");break;case 33:this.popState();break;case 34:return 88;case 35:return he.lex.firstGraph()&&this.begin("dir"),12;case 36:return he.lex.firstGraph()&&this.begin("dir"),12;case 37:return he.lex.firstGraph()&&this.begin("dir"),12;case 38:return 27;case 39:return 32;case 40:return 98;case 41:return 98;case 42:return 98;case 43:return 98;case 44:return this.popState(),13;case 45:return this.popState(),14;case 46:return this.popState(),14;case 47:return this.popState(),14;case 48:return this.popState(),14;case 49:return this.popState(),14;case 50:return this.popState(),14;case 51:return this.popState(),14;case 52:return this.popState(),14;case 53:return this.popState(),14;case 54:return this.popState(),14;case 55:return 121;case 56:return 122;case 57:return 123;case 58:return 124;case 59:return 78;case 60:return 105;case 61:return 111;case 62:return 46;case 63:return 60;case 64:return 44;case 65:return 8;case 66:return 106;case 67:return 115;case 68:return this.popState(),77;case 69:return this.pushState("edgeText"),75;case 70:return 119;case 71:return this.popState(),77;case 72:return this.pushState("thickEdgeText"),75;case 73:return 119;case 74:return this.popState(),77;case 75:return this.pushState("dottedEdgeText"),75;case 76:return 119;case 77:return 77;case 78:return this.popState(),53;case 79:return"TEXT";case 80:return this.pushState("ellipseText"),52;case 81:return this.popState(),55;case 82:return this.pushState("text"),54;case 83:return this.popState(),57;case 84:return this.pushState("text"),56;case 85:return 58;case 86:return this.pushState("text"),67;case 87:return this.popState(),64;case 88:return this.pushState("text"),63;case 89:return this.popState(),49;case 90:return this.pushState("text"),48;case 91:return this.popState(),69;case 92:return this.popState(),71;case 93:return 117;case 94:return this.pushState("trapText"),68;case 95:return this.pushState("trapText"),70;case 96:return 118;case 97:return 67;case 98:return 90;case 99:return"SEP";case 100:return 89;case 101:return 115;case 102:return 111;case 103:return 44;case 104:return 109;case 105:return 114;case 106:return 116;case 107:return this.popState(),62;case 108:return this.pushState("text"),62;case 109:return this.popState(),51;case 110:return this.pushState("text"),50;case 111:return this.popState(),31;case 112:return this.pushState("text"),29;case 113:return this.popState(),66;case 114:return this.pushState("text"),65;case 115:return"TEXT";case 116:return"QUOTE";case 117:return 9;case 118:return 10;case 119:return 11}},"anonymous"),rules:[/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:@\{)/,/^(?:["])/,/^(?:["])/,/^(?:[^\"]+)/,/^(?:[^}^"]+)/,/^(?:\})/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["][`])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:["])/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s])/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:flowchart-elk\b)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[^\s\"]+@(?=[^\{\"]))/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:[^-]|-(?!-)+)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:[^=]|=(?!))/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:[^\.]|\.(?!))/,/^(?:\s*~~[\~]+\s*)/,/^(?:[-/\)][\)])/,/^(?:[^\(\)\[\]\{\}]|!\)+)/,/^(?:\(-)/,/^(?:\]\))/,/^(?:\(\[)/,/^(?:\]\])/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:>)/,/^(?:\)\])/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\(\(\()/,/^(?:[\\(?=\])][\]])/,/^(?:\/(?=\])\])/,/^(?:\/(?!\])|\\(?!\])|[^\\\[\]\(\)\{\}\/]+)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:\*)/,/^(?:#)/,/^(?:&)/,/^(?:([A-Za-z0-9!"\#$%&'*+\.`?\\_\/]|-(?=[^\>\-\.])|(?!))+)/,/^(?:-)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\|)/,/^(?:\))/,/^(?:\()/,/^(?:\])/,/^(?:\[)/,/^(?:(\}))/,/^(?:\{)/,/^(?:[^\[\]\(\)\{\}\|\"]+)/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{shapeDataEndBracket:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},shapeDataStr:{rules:[9,10,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},shapeData:{rules:[8,11,12,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},callbackargs:{rules:[17,18,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},callbackname:{rules:[14,15,16,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},href:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},click:{rules:[21,24,33,34,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},dottedEdgeText:{rules:[21,24,74,76,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},thickEdgeText:{rules:[21,24,71,73,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},edgeText:{rules:[21,24,68,70,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},trapText:{rules:[21,24,77,80,82,84,88,90,91,92,93,94,95,108,110,112,114],inclusive:!1},ellipseText:{rules:[21,24,77,78,79,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},text:{rules:[21,24,77,80,81,82,83,84,87,88,89,90,94,95,107,108,109,110,111,112,113,114,115],inclusive:!1},vertex:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},dir:{rules:[21,24,44,45,46,47,48,49,50,51,52,53,54,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_descr_multiline:{rules:[5,6,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_descr:{rules:[3,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_title:{rules:[1,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},md_string:{rules:[19,20,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},string:{rules:[21,22,23,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},INITIAL:{rules:[0,2,4,7,13,21,24,25,26,27,28,29,30,31,32,35,36,37,38,39,40,41,42,43,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,71,72,74,75,77,80,82,84,85,86,88,90,94,95,96,97,98,99,100,101,102,103,104,105,106,108,110,112,114,116,117,118,119],inclusive:!0}}};return pa}();rl.lexer=gn;function Fi(){this.yy={}}return g(Fi,"Parser"),Fi.prototype=rl,rl.Parser=Fi,new Fi}();Hp.parser=Hp;var ow=Hp,lw=Object.assign({},ow);lw.parse=e=>{const t=e.replace(/}\s*\n/g,`}
`);return ow.parse(t)};var VD=lw,zD=g((e,t)=>{const r=Yg,a=r(e,"r"),i=r(e,"g"),n=r(e,"b");return On(a,i,n,t)},"fade"),qD=g(e=>`.label {
    font-family: ${e.fontFamily};
    color: ${e.nodeTextColor||e.textColor};
  }
  .cluster-label text {
    fill: ${e.titleColor};
  }
  .cluster-label span {
    color: ${e.titleColor};
  }
  .cluster-label span p {
    background-color: transparent;
  }

  .label text,span {
    fill: ${e.nodeTextColor||e.textColor};
    color: ${e.nodeTextColor||e.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }
  .rough-node .label text , .node .label text, .image-shape .label, .icon-shape .label {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .katex path {
    fill: #000;
    stroke: #000;
    stroke-width: 1px;
  }

  .rough-node .label,.node .label, .image-shape .label, .icon-shape .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }


  .root .anchor path {
    fill: ${e.lineColor} !important;
    stroke-width: 0;
    stroke: ${e.lineColor};
  }

  .arrowheadPath {
    fill: ${e.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${e.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${e.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${e.edgeLabelBackground};
    p {
      background-color: ${e.edgeLabelBackground};
    }
    rect {
      opacity: 0.5;
      background-color: ${e.edgeLabelBackground};
      fill: ${e.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${zD(e.edgeLabelBackground,.5)};
    // background-color:
  }

  .cluster rect {
    fill: ${e.clusterBkg};
    stroke: ${e.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${e.titleColor};
  }

  .cluster span {
    color: ${e.titleColor};
  }
  /* .cluster div {
    color: ${e.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${e.fontFamily};
    font-size: 12px;
    background: ${e.tertiaryColor};
    border: 1px solid ${e.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }

  rect.text {
    fill: none;
    stroke-width: 0;
  }

  .icon-shape, .image-shape {
    background-color: ${e.edgeLabelBackground};
    p {
      background-color: ${e.edgeLabelBackground};
      padding: 2px;
    }
    rect {
      opacity: 0.5;
      background-color: ${e.edgeLabelBackground};
      fill: ${e.edgeLabelBackground};
    }
    text-align: center;
  }
`,"getStyles"),WD=qD,GD={parser:VD,get db(){return new MD},renderer:$D,styles:WD,init:g(e=>{e.flowchart||(e.flowchart={}),e.layout&&vp({layout:e.layout}),e.flowchart.arrowMarkerAbsolute=e.arrowMarkerAbsolute,vp({flowchart:{arrowMarkerAbsolute:e.arrowMarkerAbsolute}})},"init")};const L0=Object.freeze({__proto__:null,diagram:GD});var Yp=function(){var e=g(function(j,Y,st,W){for(st=st||{},W=j.length;W--;st[j[W]]=Y);return st},"o"),t=[6,8,10,22,24,26,28,33,34,35,36,37,40,43,44,50],r=[1,10],a=[1,11],i=[1,12],n=[1,13],s=[1,20],o=[1,21],l=[1,22],u=[1,23],h=[1,24],d=[1,19],f=[1,25],p=[1,26],y=[1,18],v=[1,33],m=[1,34],x=[1,35],b=[1,36],w=[1,37],C=[6,8,10,13,15,17,20,21,22,24,26,28,33,34,35,36,37,40,43,44,50,63,64,65,66,67],T=[1,42],k=[1,43],S=[1,52],L=[40,50,68,69],_=[1,63],A=[1,61],E=[1,58],D=[1,62],R=[1,64],O=[6,8,10,13,17,22,24,26,28,33,34,35,36,37,40,41,42,43,44,48,49,50,63,64,65,66,67],P=[63,64,65,66,67],$=[1,81],M=[1,80],I=[1,78],F=[1,79],V=[6,10,42,47],N=[6,10,13,41,42,47,48,49],q=[1,89],U=[1,88],X=[1,87],lt=[19,56],J=[1,98],ct=[1,97],yt=[19,56,58,60],ut={trace:g(function(){},"trace"),yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,entityName:11,relSpec:12,COLON:13,role:14,STYLE_SEPARATOR:15,idList:16,BLOCK_START:17,attributes:18,BLOCK_STOP:19,SQS:20,SQE:21,title:22,title_value:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,direction:29,classDefStatement:30,classStatement:31,styleStatement:32,direction_tb:33,direction_bt:34,direction_rl:35,direction_lr:36,CLASSDEF:37,stylesOpt:38,separator:39,UNICODE_TEXT:40,STYLE_TEXT:41,COMMA:42,CLASS:43,STYLE:44,style:45,styleComponent:46,SEMI:47,NUM:48,BRKT:49,ENTITY_NAME:50,attribute:51,attributeType:52,attributeName:53,attributeKeyTypeList:54,attributeComment:55,ATTRIBUTE_WORD:56,attributeKeyType:57,",":58,ATTRIBUTE_KEY:59,COMMENT:60,cardinality:61,relType:62,ZERO_OR_ONE:63,ZERO_OR_MORE:64,ONE_OR_MORE:65,ONLY_ONE:66,MD_PARENT:67,NON_IDENTIFYING:68,IDENTIFYING:69,WORD:70,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",8:"SPACE",10:"NEWLINE",13:"COLON",15:"STYLE_SEPARATOR",17:"BLOCK_START",19:"BLOCK_STOP",20:"SQS",21:"SQE",22:"title",23:"title_value",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"direction_tb",34:"direction_bt",35:"direction_rl",36:"direction_lr",37:"CLASSDEF",40:"UNICODE_TEXT",41:"STYLE_TEXT",42:"COMMA",43:"CLASS",44:"STYLE",47:"SEMI",48:"NUM",49:"BRKT",50:"ENTITY_NAME",56:"ATTRIBUTE_WORD",58:",",59:"ATTRIBUTE_KEY",60:"COMMENT",63:"ZERO_OR_ONE",64:"ZERO_OR_MORE",65:"ONE_OR_MORE",66:"ONLY_ONE",67:"MD_PARENT",68:"NON_IDENTIFYING",69:"IDENTIFYING",70:"WORD"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,5],[9,9],[9,7],[9,7],[9,4],[9,6],[9,3],[9,5],[9,1],[9,3],[9,7],[9,9],[9,6],[9,8],[9,4],[9,6],[9,2],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[9,1],[29,1],[29,1],[29,1],[29,1],[30,4],[16,1],[16,1],[16,3],[16,3],[31,3],[32,4],[38,1],[38,3],[45,1],[45,2],[39,1],[39,1],[39,1],[46,1],[46,1],[46,1],[46,1],[11,1],[11,1],[18,1],[18,2],[51,2],[51,3],[51,3],[51,4],[52,1],[53,1],[54,1],[54,3],[57,1],[55,1],[12,3],[61,1],[61,1],[61,1],[61,1],[61,1],[62,1],[62,1],[14,1],[14,1],[14,1]],performAction:g(function(Y,st,W,bt,tt,H,Et){var nt=H.length-1;switch(tt){case 1:break;case 2:this.$=[];break;case 3:H[nt-1].push(H[nt]),this.$=H[nt-1];break;case 4:case 5:this.$=H[nt];break;case 6:case 7:this.$=[];break;case 8:bt.addEntity(H[nt-4]),bt.addEntity(H[nt-2]),bt.addRelationship(H[nt-4],H[nt],H[nt-2],H[nt-3]);break;case 9:bt.addEntity(H[nt-8]),bt.addEntity(H[nt-4]),bt.addRelationship(H[nt-8],H[nt],H[nt-4],H[nt-5]),bt.setClass([H[nt-8]],H[nt-6]),bt.setClass([H[nt-4]],H[nt-2]);break;case 10:bt.addEntity(H[nt-6]),bt.addEntity(H[nt-2]),bt.addRelationship(H[nt-6],H[nt],H[nt-2],H[nt-3]),bt.setClass([H[nt-6]],H[nt-4]);break;case 11:bt.addEntity(H[nt-6]),bt.addEntity(H[nt-4]),bt.addRelationship(H[nt-6],H[nt],H[nt-4],H[nt-5]),bt.setClass([H[nt-4]],H[nt-2]);break;case 12:bt.addEntity(H[nt-3]),bt.addAttributes(H[nt-3],H[nt-1]);break;case 13:bt.addEntity(H[nt-5]),bt.addAttributes(H[nt-5],H[nt-1]),bt.setClass([H[nt-5]],H[nt-3]);break;case 14:bt.addEntity(H[nt-2]);break;case 15:bt.addEntity(H[nt-4]),bt.setClass([H[nt-4]],H[nt-2]);break;case 16:bt.addEntity(H[nt]);break;case 17:bt.addEntity(H[nt-2]),bt.setClass([H[nt-2]],H[nt]);break;case 18:bt.addEntity(H[nt-6],H[nt-4]),bt.addAttributes(H[nt-6],H[nt-1]);break;case 19:bt.addEntity(H[nt-8],H[nt-6]),bt.addAttributes(H[nt-8],H[nt-1]),bt.setClass([H[nt-8]],H[nt-3]);break;case 20:bt.addEntity(H[nt-5],H[nt-3]);break;case 21:bt.addEntity(H[nt-7],H[nt-5]),bt.setClass([H[nt-7]],H[nt-2]);break;case 22:bt.addEntity(H[nt-3],H[nt-1]);break;case 23:bt.addEntity(H[nt-5],H[nt-3]),bt.setClass([H[nt-5]],H[nt]);break;case 24:case 25:this.$=H[nt].trim(),bt.setAccTitle(this.$);break;case 26:case 27:this.$=H[nt].trim(),bt.setAccDescription(this.$);break;case 32:bt.setDirection("TB");break;case 33:bt.setDirection("BT");break;case 34:bt.setDirection("RL");break;case 35:bt.setDirection("LR");break;case 36:this.$=H[nt-3],bt.addClass(H[nt-2],H[nt-1]);break;case 37:case 38:case 56:case 64:this.$=[H[nt]];break;case 39:case 40:this.$=H[nt-2].concat([H[nt]]);break;case 41:this.$=H[nt-2],bt.setClass(H[nt-1],H[nt]);break;case 42:this.$=H[nt-3],bt.addCssStyles(H[nt-2],H[nt-1]);break;case 43:this.$=[H[nt]];break;case 44:H[nt-2].push(H[nt]),this.$=H[nt-2];break;case 46:this.$=H[nt-1]+H[nt];break;case 54:case 76:case 77:this.$=H[nt].replace(/"/g,"");break;case 55:case 78:this.$=H[nt];break;case 57:H[nt].push(H[nt-1]),this.$=H[nt];break;case 58:this.$={type:H[nt-1],name:H[nt]};break;case 59:this.$={type:H[nt-2],name:H[nt-1],keys:H[nt]};break;case 60:this.$={type:H[nt-2],name:H[nt-1],comment:H[nt]};break;case 61:this.$={type:H[nt-3],name:H[nt-2],keys:H[nt-1],comment:H[nt]};break;case 62:case 63:case 66:this.$=H[nt];break;case 65:H[nt-2].push(H[nt]),this.$=H[nt-2];break;case 67:this.$=H[nt].replace(/"/g,"");break;case 68:this.$={cardA:H[nt],relType:H[nt-1],cardB:H[nt-2]};break;case 69:this.$=bt.Cardinality.ZERO_OR_ONE;break;case 70:this.$=bt.Cardinality.ZERO_OR_MORE;break;case 71:this.$=bt.Cardinality.ONE_OR_MORE;break;case 72:this.$=bt.Cardinality.ONLY_ONE;break;case 73:this.$=bt.Cardinality.MD_PARENT;break;case 74:this.$=bt.Identification.NON_IDENTIFYING;break;case 75:this.$=bt.Identification.IDENTIFYING;break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},e(t,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:9,22:r,24:a,26:i,28:n,29:14,30:15,31:16,32:17,33:s,34:o,35:l,36:u,37:h,40:d,43:f,44:p,50:y},e(t,[2,7],{1:[2,1]}),e(t,[2,3]),{9:27,11:9,22:r,24:a,26:i,28:n,29:14,30:15,31:16,32:17,33:s,34:o,35:l,36:u,37:h,40:d,43:f,44:p,50:y},e(t,[2,5]),e(t,[2,6]),e(t,[2,16],{12:28,61:32,15:[1,29],17:[1,30],20:[1,31],63:v,64:m,65:x,66:b,67:w}),{23:[1,38]},{25:[1,39]},{27:[1,40]},e(t,[2,27]),e(t,[2,28]),e(t,[2,29]),e(t,[2,30]),e(t,[2,31]),e(C,[2,54]),e(C,[2,55]),e(t,[2,32]),e(t,[2,33]),e(t,[2,34]),e(t,[2,35]),{16:41,40:T,41:k},{16:44,40:T,41:k},{16:45,40:T,41:k},e(t,[2,4]),{11:46,40:d,50:y},{16:47,40:T,41:k},{18:48,19:[1,49],51:50,52:51,56:S},{11:53,40:d,50:y},{62:54,68:[1,55],69:[1,56]},e(L,[2,69]),e(L,[2,70]),e(L,[2,71]),e(L,[2,72]),e(L,[2,73]),e(t,[2,24]),e(t,[2,25]),e(t,[2,26]),{13:_,38:57,41:A,42:E,45:59,46:60,48:D,49:R},e(O,[2,37]),e(O,[2,38]),{16:65,40:T,41:k,42:E},{13:_,38:66,41:A,42:E,45:59,46:60,48:D,49:R},{13:[1,67],15:[1,68]},e(t,[2,17],{61:32,12:69,17:[1,70],42:E,63:v,64:m,65:x,66:b,67:w}),{19:[1,71]},e(t,[2,14]),{18:72,19:[2,56],51:50,52:51,56:S},{53:73,56:[1,74]},{56:[2,62]},{21:[1,75]},{61:76,63:v,64:m,65:x,66:b,67:w},e(P,[2,74]),e(P,[2,75]),{6:$,10:M,39:77,42:I,47:F},{40:[1,82],41:[1,83]},e(V,[2,43],{46:84,13:_,41:A,48:D,49:R}),e(N,[2,45]),e(N,[2,50]),e(N,[2,51]),e(N,[2,52]),e(N,[2,53]),e(t,[2,41],{42:E}),{6:$,10:M,39:85,42:I,47:F},{14:86,40:q,50:U,70:X},{16:90,40:T,41:k},{11:91,40:d,50:y},{18:92,19:[1,93],51:50,52:51,56:S},e(t,[2,12]),{19:[2,57]},e(lt,[2,58],{54:94,55:95,57:96,59:J,60:ct}),e([19,56,59,60],[2,63]),e(t,[2,22],{15:[1,100],17:[1,99]}),e([40,50],[2,68]),e(t,[2,36]),{13:_,41:A,45:101,46:60,48:D,49:R},e(t,[2,47]),e(t,[2,48]),e(t,[2,49]),e(O,[2,39]),e(O,[2,40]),e(N,[2,46]),e(t,[2,42]),e(t,[2,8]),e(t,[2,76]),e(t,[2,77]),e(t,[2,78]),{13:[1,102],42:E},{13:[1,104],15:[1,103]},{19:[1,105]},e(t,[2,15]),e(lt,[2,59],{55:106,58:[1,107],60:ct}),e(lt,[2,60]),e(yt,[2,64]),e(lt,[2,67]),e(yt,[2,66]),{18:108,19:[1,109],51:50,52:51,56:S},{16:110,40:T,41:k},e(V,[2,44],{46:84,13:_,41:A,48:D,49:R}),{14:111,40:q,50:U,70:X},{16:112,40:T,41:k},{14:113,40:q,50:U,70:X},e(t,[2,13]),e(lt,[2,61]),{57:114,59:J},{19:[1,115]},e(t,[2,20]),e(t,[2,23],{17:[1,116],42:E}),e(t,[2,11]),{13:[1,117],42:E},e(t,[2,10]),e(yt,[2,65]),e(t,[2,18]),{18:118,19:[1,119],51:50,52:51,56:S},{14:120,40:q,50:U,70:X},{19:[1,121]},e(t,[2,21]),e(t,[2,9]),e(t,[2,19])],defaultActions:{52:[2,62],72:[2,57]},parseError:g(function(Y,st){if(st.recoverable)this.trace(Y);else{var W=new Error(Y);throw W.hash=st,W}},"parseError"),parse:g(function(Y){var st=this,W=[0],bt=[],tt=[null],H=[],Et=this.table,nt="",Lt=0,Dt=0,At=2,xt=1,_t=H.slice.call(arguments,1),vt=Object.create(this.lexer),wt={yy:{}};for(var St in this.yy)Object.prototype.hasOwnProperty.call(this.yy,St)&&(wt.yy[St]=this.yy[St]);vt.setInput(Y,wt.yy),wt.yy.lexer=vt,wt.yy.parser=this,typeof vt.yylloc>"u"&&(vt.yylloc={});var at=vt.yylloc;H.push(at);var Ct=vt.options&&vt.options.ranges;typeof wt.yy.parseError=="function"?this.parseError=wt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function z(Pt){W.length=W.length-2*Pt,tt.length=tt.length-Pt,H.length=H.length-Pt}g(z,"popStack");function ft(){var Pt;return Pt=bt.pop()||vt.lex()||xt,typeof Pt!="number"&&(Pt instanceof Array&&(bt=Pt,Pt=bt.pop()),Pt=st.symbols_[Pt]||Pt),Pt}g(ft,"lex");for(var B,et,Z,ht,ot={},pt,gt,kt,Ft;;){if(et=W[W.length-1],this.defaultActions[et]?Z=this.defaultActions[et]:((B===null||typeof B>"u")&&(B=ft()),Z=Et[et]&&Et[et][B]),typeof Z>"u"||!Z.length||!Z[0]){var Ht="";Ft=[];for(pt in Et[et])this.terminals_[pt]&&pt>At&&Ft.push("'"+this.terminals_[pt]+"'");vt.showPosition?Ht="Parse error on line "+(Lt+1)+`:
`+vt.showPosition()+`
Expecting `+Ft.join(", ")+", got '"+(this.terminals_[B]||B)+"'":Ht="Parse error on line "+(Lt+1)+": Unexpected "+(B==xt?"end of input":"'"+(this.terminals_[B]||B)+"'"),this.parseError(Ht,{text:vt.match,token:this.terminals_[B]||B,line:vt.yylineno,loc:at,expected:Ft})}if(Z[0]instanceof Array&&Z.length>1)throw new Error("Parse Error: multiple actions possible at state: "+et+", token: "+B);switch(Z[0]){case 1:W.push(B),tt.push(vt.yytext),H.push(vt.yylloc),W.push(Z[1]),B=null,Dt=vt.yyleng,nt=vt.yytext,Lt=vt.yylineno,at=vt.yylloc;break;case 2:if(gt=this.productions_[Z[1]][1],ot.$=tt[tt.length-gt],ot._$={first_line:H[H.length-(gt||1)].first_line,last_line:H[H.length-1].last_line,first_column:H[H.length-(gt||1)].first_column,last_column:H[H.length-1].last_column},Ct&&(ot._$.range=[H[H.length-(gt||1)].range[0],H[H.length-1].range[1]]),ht=this.performAction.apply(ot,[nt,Dt,Lt,wt.yy,Z[1],tt,H].concat(_t)),typeof ht<"u")return ht;gt&&(W=W.slice(0,-1*gt*2),tt=tt.slice(0,-1*gt),H=H.slice(0,-1*gt)),W.push(this.productions_[Z[1]][0]),tt.push(ot.$),H.push(ot._$),kt=Et[W[W.length-2]][W[W.length-1]],W.push(kt);break;case 3:return!0}}return!0},"parse")},Q=function(){var j={EOF:1,parseError:g(function(st,W){if(this.yy.parser)this.yy.parser.parseError(st,W);else throw new Error(st)},"parseError"),setInput:g(function(Y,st){return this.yy=st||this.yy||{},this._input=Y,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:g(function(){var Y=this._input[0];this.yytext+=Y,this.yyleng++,this.offset++,this.match+=Y,this.matched+=Y;var st=Y.match(/(?:\r\n?|\n).*/g);return st?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Y},"input"),unput:g(function(Y){var st=Y.length,W=Y.split(/(?:\r\n?|\n)/g);this._input=Y+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-st),this.offset-=st;var bt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),W.length-1&&(this.yylineno-=W.length-1);var tt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:W?(W.length===bt.length?this.yylloc.first_column:0)+bt[bt.length-W.length].length-W[0].length:this.yylloc.first_column-st},this.options.ranges&&(this.yylloc.range=[tt[0],tt[0]+this.yyleng-st]),this.yyleng=this.yytext.length,this},"unput"),more:g(function(){return this._more=!0,this},"more"),reject:g(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:g(function(Y){this.unput(this.match.slice(Y))},"less"),pastInput:g(function(){var Y=this.matched.substr(0,this.matched.length-this.match.length);return(Y.length>20?"...":"")+Y.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:g(function(){var Y=this.match;return Y.length<20&&(Y+=this._input.substr(0,20-Y.length)),(Y.substr(0,20)+(Y.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:g(function(){var Y=this.pastInput(),st=new Array(Y.length+1).join("-");return Y+this.upcomingInput()+`
`+st+"^"},"showPosition"),test_match:g(function(Y,st){var W,bt,tt;if(this.options.backtrack_lexer&&(tt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(tt.yylloc.range=this.yylloc.range.slice(0))),bt=Y[0].match(/(?:\r\n?|\n).*/g),bt&&(this.yylineno+=bt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:bt?bt[bt.length-1].length-bt[bt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Y[0].length},this.yytext+=Y[0],this.match+=Y[0],this.matches=Y,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Y[0].length),this.matched+=Y[0],W=this.performAction.call(this,this.yy,this,st,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),W)return W;if(this._backtrack){for(var H in tt)this[H]=tt[H];return!1}return!1},"test_match"),next:g(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Y,st,W,bt;this._more||(this.yytext="",this.match="");for(var tt=this._currentRules(),H=0;H<tt.length;H++)if(W=this._input.match(this.rules[tt[H]]),W&&(!st||W[0].length>st[0].length)){if(st=W,bt=H,this.options.backtrack_lexer){if(Y=this.test_match(W,tt[H]),Y!==!1)return Y;if(this._backtrack){st=!1;continue}else return!1}else if(!this.options.flex)break}return st?(Y=this.test_match(st,tt[bt]),Y!==!1?Y:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:g(function(){var st=this.next();return st||this.lex()},"lex"),begin:g(function(st){this.conditionStack.push(st)},"begin"),popState:g(function(){var st=this.conditionStack.length-1;return st>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:g(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:g(function(st){return st=this.conditionStack.length-1-Math.abs(st||0),st>=0?this.conditionStack[st]:"INITIAL"},"topState"),pushState:g(function(st){this.begin(st)},"pushState"),stateStackSize:g(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:g(function(st,W,bt,tt){switch(bt){case 0:return this.begin("acc_title"),24;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),26;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return 33;case 8:return 34;case 9:return 35;case 10:return 36;case 11:return 10;case 12:break;case 13:return 8;case 14:return 50;case 15:return 70;case 16:return 4;case 17:return this.begin("block"),17;case 18:return 49;case 19:return 49;case 20:return 42;case 21:return 15;case 22:return 13;case 23:break;case 24:return 59;case 25:return 56;case 26:return 56;case 27:return 60;case 28:break;case 29:return this.popState(),19;case 30:return W.yytext[0];case 31:return 20;case 32:return 21;case 33:return this.begin("style"),44;case 34:return this.popState(),10;case 35:break;case 36:return 13;case 37:return 42;case 38:return 49;case 39:return this.begin("style"),37;case 40:return 43;case 41:return 63;case 42:return 65;case 43:return 65;case 44:return 65;case 45:return 63;case 46:return 63;case 47:return 64;case 48:return 64;case 49:return 64;case 50:return 64;case 51:return 64;case 52:return 65;case 53:return 64;case 54:return 65;case 55:return 66;case 56:return 66;case 57:return 66;case 58:return 66;case 59:return 63;case 60:return 64;case 61:return 65;case 62:return 67;case 63:return 68;case 64:return 69;case 65:return 69;case 66:return 68;case 67:return 68;case 68:return 68;case 69:return 41;case 70:return 47;case 71:return 40;case 72:return 48;case 73:return W.yytext[0];case 74:return 6}},"anonymous"),rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:#)/i,/^(?:#)/i,/^(?:,)/i,/^(?::::)/i,/^(?::)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK)|(?:UK))\b)/i,/^(?:([^\s]*)[~].*[~]([^\s]*))/i,/^(?:([\*A-Za-z_\u00C0-\uFFFF][A-Za-z0-9\-\_\[\]\(\)\u00C0-\uFFFF\*]*))/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:style\b)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?::)/i,/^(?:,)/i,/^(?:#)/i,/^(?:classDef\b)/i,/^(?:class\b)/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\s*u\b)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:([^\x00-\x7F]|\w|-|\*)+)/i,/^(?:;)/i,/^(?:([^\x00-\x7F]|\w|-|\*)+)/i,/^(?:[0-9])/i,/^(?:.)/i,/^(?:$)/i],conditions:{style:{rules:[34,35,36,37,38,69,70],inclusive:!1},acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},block:{rules:[23,24,25,26,27,28,29,30],inclusive:!1},INITIAL:{rules:[0,2,4,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,31,32,33,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,71,72,73,74],inclusive:!0}}};return j}();ut.lexer=Q;function K(){this.yy={}}return g(K,"Parser"),K.prototype=ut,ut.Parser=K,new K}();Yp.parser=Yp;var HD=Yp,Ws,YD=(Ws=class{constructor(){this.entities=new Map,this.relationships=[],this.classes=new Map,this.direction="TB",this.Cardinality={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE",MD_PARENT:"MD_PARENT"},this.Identification={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},this.setAccTitle=vr,this.getAccTitle=Sr,this.setAccDescription=Er,this.getAccDescription=_r,this.setDiagramTitle=Mr,this.getDiagramTitle=br,this.getConfig=g(()=>dt().er,"getConfig"),this.clear(),this.addEntity=this.addEntity.bind(this),this.addAttributes=this.addAttributes.bind(this),this.addRelationship=this.addRelationship.bind(this),this.setDirection=this.setDirection.bind(this),this.addCssStyles=this.addCssStyles.bind(this),this.addClass=this.addClass.bind(this),this.setClass=this.setClass.bind(this),this.setAccTitle=this.setAccTitle.bind(this),this.setAccDescription=this.setAccDescription.bind(this)}addEntity(t,r=""){var a;return this.entities.has(t)?!((a=this.entities.get(t))!=null&&a.alias)&&r&&(this.entities.get(t).alias=r,G.info(`Add alias '${r}' to entity '${t}'`)):(this.entities.set(t,{id:`entity-${t}-${this.entities.size}`,label:t,attributes:[],alias:r,shape:"erBox",look:dt().look??"default",cssClasses:"default",cssStyles:[]}),G.info("Added new entity :",t)),this.entities.get(t)}getEntity(t){return this.entities.get(t)}getEntities(){return this.entities}getClasses(){return this.classes}addAttributes(t,r){const a=this.addEntity(t);let i;for(i=r.length-1;i>=0;i--)r[i].keys||(r[i].keys=[]),r[i].comment||(r[i].comment=""),a.attributes.push(r[i]),G.debug("Added attribute ",r[i].name)}addRelationship(t,r,a,i){const n=this.entities.get(t),s=this.entities.get(a);if(!n||!s)return;const o={entityA:n.id,roleA:r,entityB:s.id,relSpec:i};this.relationships.push(o),G.debug("Added new relationship :",o)}getRelationships(){return this.relationships}getDirection(){return this.direction}setDirection(t){this.direction=t}getCompiledStyles(t){let r=[];for(const a of t){const i=this.classes.get(a);i!=null&&i.styles&&(r=[...r,...i.styles??[]].map(n=>n.trim())),i!=null&&i.textStyles&&(r=[...r,...i.textStyles??[]].map(n=>n.trim()))}return r}addCssStyles(t,r){for(const a of t){const i=this.entities.get(a);if(!r||!i)return;for(const n of r)i.cssStyles.push(n)}}addClass(t,r){t.forEach(a=>{let i=this.classes.get(a);i===void 0&&(i={id:a,styles:[],textStyles:[]},this.classes.set(a,i)),r&&r.forEach(function(n){if(/color/.exec(n)){const s=n.replace("fill","bgFill");i.textStyles.push(s)}i.styles.push(n)})})}setClass(t,r){for(const a of t){const i=this.entities.get(a);if(i)for(const n of r)i.cssClasses+=" "+n}}clear(){this.entities=new Map,this.classes=new Map,this.relationships=[],xr()}getData(){const t=[],r=[],a=dt();for(const n of this.entities.keys()){const s=this.entities.get(n);s&&(s.cssCompiledStyles=this.getCompiledStyles(s.cssClasses.split(" ")),t.push(s))}let i=0;for(const n of this.relationships){const s={id:Dl(n.entityA,n.entityB,{prefix:"id",counter:i++}),type:"normal",curve:"basis",start:n.entityA,end:n.entityB,label:n.roleA,labelpos:"c",thickness:"normal",classes:"relationshipLine",arrowTypeStart:n.relSpec.cardB.toLowerCase(),arrowTypeEnd:n.relSpec.cardA.toLowerCase(),pattern:n.relSpec.relType=="IDENTIFYING"?"solid":"dashed",look:a.look};r.push(s)}return{nodes:t,edges:r,other:{},config:a,direction:"TB"}}},g(Ws,"ErDB"),Ws),cw={};_h(cw,{draw:()=>UD});var UD=g(async function(e,t,r,a){G.info("REF0:"),G.info("Drawing er diagram (unified)",t);const{securityLevel:i,er:n,layout:s}=dt(),o=a.db.getData(),l=pc(t,i);o.type=a.type,o.layoutAlgorithm=Oh(s),o.config.flowchart.nodeSpacing=(n==null?void 0:n.nodeSpacing)||140,o.config.flowchart.rankSpacing=(n==null?void 0:n.rankSpacing)||80,o.direction=a.db.getDirection(),o.markers=["only_one","zero_or_one","one_or_more","zero_or_more"],o.diagramId=t,await fc(o,l),o.layoutAlgorithm==="elk"&&l.select(".edges").lower();const u=l.selectAll('[id*="-background"]');Array.from(u).length>0&&u.each(function(){const d=It(this),p=d.attr("id").replace("-background",""),y=l.select(`#${CSS.escape(p)}`);if(!y.empty()){const v=y.attr("transform");d.attr("transform",v)}});const h=8;xe.insertTitle(l,"erDiagramTitleText",(n==null?void 0:n.titleTopMargin)??25,a.db.getDiagramTitle()),gc(l,h,"erDiagram",(n==null?void 0:n.useMaxWidth)??!0)},"draw"),XD=g((e,t)=>{const r=Yg,a=r(e,"r"),i=r(e,"g"),n=r(e,"b");return On(a,i,n,t)},"fade"),KD=g(e=>`
  .entityBox {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${e.tertiaryColor};
    opacity: 0.7;
    background-color: ${e.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

  .labelBkg {
    background-color: ${XD(e.tertiaryColor,.5)};
  }

  .edgeLabel .label {
    fill: ${e.nodeBorder};
    font-size: 14px;
  }

  .label {
    font-family: ${e.fontFamily};
    color: ${e.nodeTextColor||e.textColor};
  }

  .edge-pattern-dashed {
    stroke-dasharray: 8,8;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon
  {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }

  .relationshipLine {
    stroke: ${e.lineColor};
    stroke-width: 1;
    fill: none;
  }

  .marker {
    fill: none !important;
    stroke: ${e.lineColor} !important;
    stroke-width: 1;
  }
`,"getStyles"),jD=KD,QD={parser:HD,get db(){return new YD},renderer:cw,styles:jD};const ZD=Object.freeze({__proto__:null,diagram:QD});function Xo(e,t){var r,a,i;e.accDescr&&((r=t.setAccDescription)==null||r.call(t,e.accDescr)),e.accTitle&&((a=t.setAccTitle)==null||a.call(t,e.accTitle)),e.title&&((i=t.setDiagramTitle)==null||i.call(t,e.title))}g(Xo,"populateCommonDb");var Gs,D0=(Gs=class{constructor(t){this.init=t,this.records=this.init()}reset(){this.records=this.init()}},g(Gs,"ImperativeState"),Gs),JD=Object.defineProperty,Ut=(e,t)=>JD(e,"name",{value:t,configurable:!0}),Ty="Statement",lu="Architecture";function t9(e){return Xa.isInstance(e,lu)}Ut(t9,"isArchitecture");var Mc="Axis",gl="Branch";function e9(e){return Xa.isInstance(e,gl)}Ut(e9,"isBranch");var Fc="Checkout",Oc="CherryPicking",yl="Commit";function r9(e){return Xa.isInstance(e,yl)}Ut(r9,"isCommit");var cu="Common";function a9(e){return Xa.isInstance(e,cu)}Ut(a9,"isCommon");var Cd="Curve",Sd="Edge",Ed="Entry",vl="GitGraph";function i9(e){return Xa.isInstance(e,vl)}Ut(i9,"isGitGraph");var _d="Group",uu="Info";function n9(e){return Xa.isInstance(e,uu)}Ut(n9,"isInfo");var Ad="Junction",ml="Merge";function s9(e){return Xa.isInstance(e,ml)}Ut(s9,"isMerge");var Ld="Option",hu="Packet";function o9(e){return Xa.isInstance(e,hu)}Ut(o9,"isPacket");var du="PacketBlock";function l9(e){return Xa.isInstance(e,du)}Ut(l9,"isPacketBlock");var fu="Pie";function c9(e){return Xa.isInstance(e,fu)}Ut(c9,"isPie");var pu="PieSection";function u9(e){return Xa.isInstance(e,pu)}Ut(u9,"isPieSection");var Dd="Radar",Bd="Service",$c="Direction",Hs,uw=(Hs=class extends nE{getAllTypes(){return[lu,Mc,gl,Fc,Oc,yl,cu,Cd,$c,Sd,Ed,vl,_d,uu,Ad,ml,Ld,hu,du,fu,pu,Dd,Bd,Ty]}computeIsSubtype(t,r){switch(t){case gl:case Fc:case Oc:case yl:case ml:return this.isSubtype(Ty,r);case $c:return this.isSubtype(vl,r);default:return!1}}getReferenceType(t){const r=`${t.container.$type}:${t.property}`;switch(r){case"Entry:axis":return Mc;default:throw new Error(`${r} is not a valid reference id.`)}}getTypeMetaData(t){switch(t){case lu:return{name:lu,properties:[{name:"accDescr"},{name:"accTitle"},{name:"edges",defaultValue:[]},{name:"groups",defaultValue:[]},{name:"junctions",defaultValue:[]},{name:"services",defaultValue:[]},{name:"title"}]};case Mc:return{name:Mc,properties:[{name:"label"},{name:"name"}]};case gl:return{name:gl,properties:[{name:"name"},{name:"order"}]};case Fc:return{name:Fc,properties:[{name:"branch"}]};case Oc:return{name:Oc,properties:[{name:"id"},{name:"parent"},{name:"tags",defaultValue:[]}]};case yl:return{name:yl,properties:[{name:"id"},{name:"message"},{name:"tags",defaultValue:[]},{name:"type"}]};case cu:return{name:cu,properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"}]};case Cd:return{name:Cd,properties:[{name:"entries",defaultValue:[]},{name:"label"},{name:"name"}]};case Sd:return{name:Sd,properties:[{name:"lhsDir"},{name:"lhsGroup",defaultValue:!1},{name:"lhsId"},{name:"lhsInto",defaultValue:!1},{name:"rhsDir"},{name:"rhsGroup",defaultValue:!1},{name:"rhsId"},{name:"rhsInto",defaultValue:!1},{name:"title"}]};case Ed:return{name:Ed,properties:[{name:"axis"},{name:"value"}]};case vl:return{name:vl,properties:[{name:"accDescr"},{name:"accTitle"},{name:"statements",defaultValue:[]},{name:"title"}]};case _d:return{name:_d,properties:[{name:"icon"},{name:"id"},{name:"in"},{name:"title"}]};case uu:return{name:uu,properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"}]};case Ad:return{name:Ad,properties:[{name:"id"},{name:"in"}]};case ml:return{name:ml,properties:[{name:"branch"},{name:"id"},{name:"tags",defaultValue:[]},{name:"type"}]};case Ld:return{name:Ld,properties:[{name:"name"},{name:"value",defaultValue:!1}]};case hu:return{name:hu,properties:[{name:"accDescr"},{name:"accTitle"},{name:"blocks",defaultValue:[]},{name:"title"}]};case du:return{name:du,properties:[{name:"end"},{name:"label"},{name:"start"}]};case fu:return{name:fu,properties:[{name:"accDescr"},{name:"accTitle"},{name:"sections",defaultValue:[]},{name:"showData",defaultValue:!1},{name:"title"}]};case pu:return{name:pu,properties:[{name:"label"},{name:"value"}]};case Dd:return{name:Dd,properties:[{name:"accDescr"},{name:"accTitle"},{name:"axes",defaultValue:[]},{name:"curves",defaultValue:[]},{name:"options",defaultValue:[]},{name:"title"}]};case Bd:return{name:Bd,properties:[{name:"icon"},{name:"iconText"},{name:"id"},{name:"in"},{name:"title"}]};case $c:return{name:$c,properties:[{name:"accDescr"},{name:"accTitle"},{name:"dir"},{name:"statements",defaultValue:[]},{name:"title"}]};default:return{name:t,properties:[]}}}},Ut(Hs,"MermaidAstReflection"),Hs),Xa=new uw,Cy,h9=Ut(()=>Cy??(Cy=Vo('{"$type":"Grammar","isDeclared":true,"name":"Info","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Info","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"info"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"Keyword","value":"showInfo"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"?"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}')),"InfoGrammar"),Sy,d9=Ut(()=>Sy??(Sy=Vo(`{"$type":"Grammar","isDeclared":true,"name":"Packet","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Packet","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"packet-beta"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"+"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PacketBlock","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"start","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"end","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}}],"cardinality":"?"},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|'[^']*'/"},"fragment":false,"hidden":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}`)),"PacketGrammar"),Ey,f9=Ut(()=>Ey??(Ey=Vo('{"$type":"Grammar","isDeclared":true,"name":"Pie","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Pie","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"pie"},{"$type":"Assignment","feature":"showData","operator":"?=","terminal":{"$type":"Keyword","value":"showData"},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"+"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PieSection","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"PIE_SECTION_LABEL","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]+\\"/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"PIE_SECTION_VALUE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/(0|[1-9][0-9]*)(\\\\.[0-9]+)?/"},"fragment":false,"hidden":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}')),"PieGrammar"),_y,p9=Ut(()=>_y??(_y=Vo('{"$type":"Grammar","isDeclared":true,"name":"Architecture","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Architecture","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"architecture-beta"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"*"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"groups","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"services","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Assignment","feature":"junctions","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"edges","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"LeftPort","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"lhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"RightPort","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"rhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Keyword","value":":"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Arrow","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]},{"$type":"Assignment","feature":"lhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"--"},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}},{"$type":"Keyword","value":"-"}]}]},{"$type":"Assignment","feature":"rhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Group","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"group"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]},"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Service","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"service"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"iconText","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}}],"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Junction","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"junction"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Edge","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"lhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"lhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"rhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"rhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"ARROW_DIRECTION","definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"L"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"R"}}]},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"T"}}]},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"B"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_ID","definition":{"$type":"RegexToken","regex":"/[\\\\w]+/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TEXT_ICON","definition":{"$type":"RegexToken","regex":"/\\\\(\\"[^\\"]+\\"\\\\)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_ICON","definition":{"$type":"RegexToken","regex":"/\\\\([\\\\w-:]+\\\\)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TITLE","definition":{"$type":"RegexToken","regex":"/\\\\[[\\\\w ]+\\\\]/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_GROUP","definition":{"$type":"RegexToken","regex":"/\\\\{group\\\\}/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_INTO","definition":{"$type":"RegexToken","regex":"/<|>/"},"fragment":false,"hidden":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}')),"ArchitectureGrammar"),Ay,g9=Ut(()=>Ay??(Ay=Vo(`{"$type":"Grammar","isDeclared":true,"name":"GitGraph","interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"rules":[{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false},{"$type":"ParserRule","entry":true,"name":"GitGraph","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Keyword","value":":"}]},{"$type":"Keyword","value":"gitGraph:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]},{"$type":"Keyword","value":":"}]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@0"},"arguments":[]},{"$type":"Assignment","feature":"statements","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Direction","definition":{"$type":"Assignment","feature":"dir","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"LR"},{"$type":"Keyword","value":"TB"},{"$type":"Keyword","value":"BT"}]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Commit","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"commit"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"msg:","cardinality":"?"},{"$type":"Assignment","feature":"message","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Branch","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"branch"},{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"order:"},{"$type":"Assignment","feature":"order","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Merge","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"merge"},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Checkout","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"checkout"},{"$type":"Keyword","value":"switch"}]},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"CherryPicking","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"cherry-pick"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"parent:"},{"$type":"Assignment","feature":"parent","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+(?=\\\\s)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\\\w([-\\\\./\\\\w]*[-\\\\w])?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|'[^']*'/"},"fragment":false,"hidden":false}],"definesHiddenTokens":false,"hiddenTokens":[],"imports":[],"types":[],"usedGrammars":[]}`)),"GitGraphGrammar"),Ly,y9=Ut(()=>Ly??(Ly=Vo(`{"$type":"Grammar","isDeclared":true,"name":"Radar","interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]},{"$type":"Interface","name":"Entry","attributes":[{"$type":"TypeAttribute","name":"axis","isOptional":true,"type":{"$type":"ReferenceType","referenceType":{"$type":"SimpleType","typeRef":{"$ref":"#/rules@12"}}}},{"$type":"TypeAttribute","name":"value","type":{"$type":"SimpleType","primitiveType":"number"},"isOptional":false}],"superTypes":[]}],"rules":[{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false},{"$type":"ParserRule","entry":true,"name":"Radar","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"radar-beta"},{"$type":"Keyword","value":"radar-beta:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"radar-beta"},{"$type":"Keyword","value":":"}]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@0"},"arguments":[]},{"$type":"Group","elements":[{"$type":"Keyword","value":"axis"},{"$type":"Assignment","feature":"axes","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"axes","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"curve"},{"$type":"Assignment","feature":"curves","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"curves","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"options","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"options","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Label","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"["},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Keyword","value":"]"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Axis","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Curve","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[],"cardinality":"?"},{"$type":"Keyword","value":"{"},{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},{"$type":"Keyword","value":"}"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Entries","definition":{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"DetailedEntry","returnType":{"$ref":"#/interfaces@1"},"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"axis","operator":"=","terminal":{"$type":"CrossReference","type":{"$ref":"#/rules@12"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]},"deprecatedSyntax":false}},{"$type":"Keyword","value":":","cardinality":"?"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"NumberEntry","returnType":{"$ref":"#/interfaces@1"},"definition":{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Option","definition":{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"showLegend"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"ticks"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"max"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"min"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"graticule"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/(0|[1-9][0-9]*)(\\\\.[0-9]+)?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"GRATICULE","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"circle"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"polygon"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[a-zA-Z_][a-zA-Z0-9\\\\-_]*/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|'[^']*'/"},"fragment":false,"hidden":false}],"definesHiddenTokens":false,"hiddenTokens":[],"imports":[],"types":[],"usedGrammars":[]}`)),"RadarGrammar"),v9={languageId:"info",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},m9={languageId:"packet",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},x9={languageId:"pie",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},b9={languageId:"architecture",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},w9={languageId:"gitGraph",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},k9={languageId:"radar",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},Ko={AstReflection:Ut(()=>new uw,"AstReflection")},T9={Grammar:Ut(()=>h9(),"Grammar"),LanguageMetaData:Ut(()=>v9,"LanguageMetaData"),parser:{}},C9={Grammar:Ut(()=>d9(),"Grammar"),LanguageMetaData:Ut(()=>m9,"LanguageMetaData"),parser:{}},S9={Grammar:Ut(()=>f9(),"Grammar"),LanguageMetaData:Ut(()=>x9,"LanguageMetaData"),parser:{}},E9={Grammar:Ut(()=>p9(),"Grammar"),LanguageMetaData:Ut(()=>b9,"LanguageMetaData"),parser:{}},_9={Grammar:Ut(()=>g9(),"Grammar"),LanguageMetaData:Ut(()=>w9,"LanguageMetaData"),parser:{}},A9={Grammar:Ut(()=>y9(),"Grammar"),LanguageMetaData:Ut(()=>k9,"LanguageMetaData"),parser:{}},L9=/accDescr(?:[\t ]*:([^\n\r]*)|\s*{([^}]*)})/,D9=/accTitle[\t ]*:([^\n\r]*)/,B9=/title([\t ][^\n\r]*|)/,R9={ACC_DESCR:L9,ACC_TITLE:D9,TITLE:B9},Ys,B0=(Ys=class extends sE{runConverter(t,r,a){let i=this.runCommonConverter(t,r,a);return i===void 0&&(i=this.runCustomConverter(t,r,a)),i===void 0?super.runConverter(t,r,a):i}runCommonConverter(t,r,a){const i=R9[t.name];if(i===void 0)return;const n=i.exec(r);if(n!==null){if(n[1]!==void 0)return n[1].trim().replace(/[\t ]{2,}/gm," ");if(n[2]!==void 0)return n[2].replace(/^\s*/gm,"").replace(/\s+$/gm,"").replace(/[\t ]{2,}/gm," ").replace(/[\n\r]{2,}/gm,`
`)}}},Ut(Ys,"AbstractMermaidValueConverter"),Ys),Us,zh=(Us=class extends B0{runCustomConverter(t,r,a){}},Ut(Us,"CommonValueConverter"),Us),Xs,Qn=(Xs=class extends oE{constructor(t){super(),this.keywords=new Set(t)}buildKeywordTokens(t,r,a){const i=super.buildKeywordTokens(t,r,a);return i.forEach(n=>{this.keywords.has(n.name)&&n.PATTERN!==void 0&&(n.PATTERN=new RegExp(n.PATTERN.toString()+"(?:(?=%%)|(?!\\S))"))}),i}},Ut(Xs,"AbstractMermaidTokenBuilder"),Xs),Ks;Ks=class extends Qn{},Ut(Ks,"CommonTokenBuilder");var js,I9=(js=class extends Qn{constructor(){super(["gitGraph"])}},Ut(js,"GitGraphTokenBuilder"),js),hw={parser:{TokenBuilder:Ut(()=>new I9,"TokenBuilder"),ValueConverter:Ut(()=>new zh,"ValueConverter")}};function dw(e=zo){const t=Ia(qo(e),Ko),r=Ia(Wo({shared:t}),_9,hw);return t.ServiceRegistry.register(r),{shared:t,GitGraph:r}}Ut(dw,"createGitGraphServices");var Qs,P9=(Qs=class extends Qn{constructor(){super(["info","showInfo"])}},Ut(Qs,"InfoTokenBuilder"),Qs),fw={parser:{TokenBuilder:Ut(()=>new P9,"TokenBuilder"),ValueConverter:Ut(()=>new zh,"ValueConverter")}};function pw(e=zo){const t=Ia(qo(e),Ko),r=Ia(Wo({shared:t}),T9,fw);return t.ServiceRegistry.register(r),{shared:t,Info:r}}Ut(pw,"createInfoServices");var Zs,N9=(Zs=class extends Qn{constructor(){super(["packet-beta"])}},Ut(Zs,"PacketTokenBuilder"),Zs),gw={parser:{TokenBuilder:Ut(()=>new N9,"TokenBuilder"),ValueConverter:Ut(()=>new zh,"ValueConverter")}};function yw(e=zo){const t=Ia(qo(e),Ko),r=Ia(Wo({shared:t}),C9,gw);return t.ServiceRegistry.register(r),{shared:t,Packet:r}}Ut(yw,"createPacketServices");var Js,M9=(Js=class extends Qn{constructor(){super(["pie","showData"])}},Ut(Js,"PieTokenBuilder"),Js),to,F9=(to=class extends B0{runCustomConverter(t,r,a){if(t.name==="PIE_SECTION_LABEL")return r.replace(/"/g,"").trim()}},Ut(to,"PieValueConverter"),to),vw={parser:{TokenBuilder:Ut(()=>new M9,"TokenBuilder"),ValueConverter:Ut(()=>new F9,"ValueConverter")}};function mw(e=zo){const t=Ia(qo(e),Ko),r=Ia(Wo({shared:t}),S9,vw);return t.ServiceRegistry.register(r),{shared:t,Pie:r}}Ut(mw,"createPieServices");var eo,O9=(eo=class extends Qn{constructor(){super(["architecture"])}},Ut(eo,"ArchitectureTokenBuilder"),eo),ro,$9=(ro=class extends B0{runCustomConverter(t,r,a){if(t.name==="ARCH_ICON")return r.replace(/[()]/g,"").trim();if(t.name==="ARCH_TEXT_ICON")return r.replace(/["()]/g,"");if(t.name==="ARCH_TITLE")return r.replace(/[[\]]/g,"").trim()}},Ut(ro,"ArchitectureValueConverter"),ro),xw={parser:{TokenBuilder:Ut(()=>new O9,"TokenBuilder"),ValueConverter:Ut(()=>new $9,"ValueConverter")}};function bw(e=zo){const t=Ia(qo(e),Ko),r=Ia(Wo({shared:t}),E9,xw);return t.ServiceRegistry.register(r),{shared:t,Architecture:r}}Ut(bw,"createArchitectureServices");var ao,V9=(ao=class extends Qn{constructor(){super(["radar-beta"])}},Ut(ao,"RadarTokenBuilder"),ao),ww={parser:{TokenBuilder:Ut(()=>new V9,"TokenBuilder"),ValueConverter:Ut(()=>new zh,"ValueConverter")}};function kw(e=zo){const t=Ia(qo(e),Ko),r=Ia(Wo({shared:t}),A9,ww);return t.ServiceRegistry.register(r),{shared:t,Radar:r}}Ut(kw,"createRadarServices");var zi={},z9={info:Ut(async()=>{const{createInfoServices:e}=await _e(async()=>{const{createInfoServices:r}=await Promise.resolve().then(function(){return GY});return{createInfoServices:r}},void 0),t=e().Info.parser.LangiumParser;zi.info=t},"info"),packet:Ut(async()=>{const{createPacketServices:e}=await _e(async()=>{const{createPacketServices:r}=await Promise.resolve().then(function(){return HY});return{createPacketServices:r}},void 0),t=e().Packet.parser.LangiumParser;zi.packet=t},"packet"),pie:Ut(async()=>{const{createPieServices:e}=await _e(async()=>{const{createPieServices:r}=await Promise.resolve().then(function(){return YY});return{createPieServices:r}},void 0),t=e().Pie.parser.LangiumParser;zi.pie=t},"pie"),architecture:Ut(async()=>{const{createArchitectureServices:e}=await _e(async()=>{const{createArchitectureServices:r}=await Promise.resolve().then(function(){return UY});return{createArchitectureServices:r}},void 0),t=e().Architecture.parser.LangiumParser;zi.architecture=t},"architecture"),gitGraph:Ut(async()=>{const{createGitGraphServices:e}=await _e(async()=>{const{createGitGraphServices:r}=await Promise.resolve().then(function(){return XY});return{createGitGraphServices:r}},void 0),t=e().GitGraph.parser.LangiumParser;zi.gitGraph=t},"gitGraph"),radar:Ut(async()=>{const{createRadarServices:e}=await _e(async()=>{const{createRadarServices:r}=await Promise.resolve().then(function(){return KY});return{createRadarServices:r}},void 0),t=e().Radar.parser.LangiumParser;zi.radar=t},"radar")};async function Zn(e,t){const r=z9[e];if(!r)throw new Error(`Unknown diagram type: ${e}`);zi[e]||await r();const i=zi[e].parse(t);if(i.lexerErrors.length>0||i.parserErrors.length>0)throw new q9(i);return i.value}Ut(Zn,"parse");var io,q9=(io=class extends Error{constructor(t){const r=t.lexerErrors.map(i=>i.message).join(`
`),a=t.parserErrors.map(i=>i.message).join(`
`);super(`Parsing failed: ${r} ${a}`),this.result=t}},Ut(io,"MermaidParseError"),io),Fe={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},W9=Ee.gitGraph,Jn=g(()=>Pa({...W9,...$e().gitGraph}),"getConfig"),zt=new D0(()=>{const e=Jn(),t=e.mainBranchName,r=e.mainBranchOrder;return{mainBranchName:t,commits:new Map,head:null,branchConfig:new Map([[t,{name:t,order:r}]]),branches:new Map([[t,null]]),currBranch:t,direction:"LR",seq:0,options:{}}});function qh(){return k4({length:7})}g(qh,"getID");function Tw(e,t){const r=Object.create(null);return e.reduce((a,i)=>{const n=t(i);return r[n]||(r[n]=!0,a.push(i)),a},[])}g(Tw,"uniqBy");var G9=g(function(e){zt.records.direction=e},"setDirection"),H9=g(function(e){G.debug("options str",e),e=e==null?void 0:e.trim(),e=e||"{}";try{zt.records.options=JSON.parse(e)}catch(t){G.error("error while parsing gitGraph options",t.message)}},"setOptions"),Y9=g(function(){return zt.records.options},"getOptions"),U9=g(function(e){let t=e.msg,r=e.id;const a=e.type;let i=e.tags;G.info("commit",t,r,a,i),G.debug("Entering commit:",t,r,a,i);const n=Jn();r=Mt.sanitizeText(r,n),t=Mt.sanitizeText(t,n),i=i==null?void 0:i.map(o=>Mt.sanitizeText(o,n));const s={id:r||zt.records.seq+"-"+qh(),message:t,seq:zt.records.seq++,type:a??Fe.NORMAL,tags:i??[],parents:zt.records.head==null?[]:[zt.records.head.id],branch:zt.records.currBranch};zt.records.head=s,G.info("main branch",n.mainBranchName),zt.records.commits.set(s.id,s),zt.records.branches.set(zt.records.currBranch,s.id),G.debug("in pushCommit "+s.id)},"commit"),X9=g(function(e){let t=e.name;const r=e.order;if(t=Mt.sanitizeText(t,Jn()),zt.records.branches.has(t))throw new Error(`Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout ${t}")`);zt.records.branches.set(t,zt.records.head!=null?zt.records.head.id:null),zt.records.branchConfig.set(t,{name:t,order:r}),Cw(t),G.debug("in createBranch")},"branch"),K9=g(e=>{let t=e.branch,r=e.id;const a=e.type,i=e.tags,n=Jn();t=Mt.sanitizeText(t,n),r&&(r=Mt.sanitizeText(r,n));const s=zt.records.branches.get(zt.records.currBranch),o=zt.records.branches.get(t),l=s?zt.records.commits.get(s):void 0,u=o?zt.records.commits.get(o):void 0;if(l&&u&&l.branch===t)throw new Error(`Cannot merge branch '${t}' into itself.`);if(zt.records.currBranch===t){const f=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw f.hash={text:`merge ${t}`,token:`merge ${t}`,expected:["branch abc"]},f}if(l===void 0||!l){const f=new Error(`Incorrect usage of "merge". Current branch (${zt.records.currBranch})has no commits`);throw f.hash={text:`merge ${t}`,token:`merge ${t}`,expected:["commit"]},f}if(!zt.records.branches.has(t)){const f=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") does not exist");throw f.hash={text:`merge ${t}`,token:`merge ${t}`,expected:[`branch ${t}`]},f}if(u===void 0||!u){const f=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") has no commits");throw f.hash={text:`merge ${t}`,token:`merge ${t}`,expected:['"commit"']},f}if(l===u){const f=new Error('Incorrect usage of "merge". Both branches have same head');throw f.hash={text:`merge ${t}`,token:`merge ${t}`,expected:["branch abc"]},f}if(r&&zt.records.commits.has(r)){const f=new Error('Incorrect usage of "merge". Commit with id:'+r+" already exists, use different custom Id");throw f.hash={text:`merge ${t} ${r} ${a} ${i==null?void 0:i.join(" ")}`,token:`merge ${t} ${r} ${a} ${i==null?void 0:i.join(" ")}`,expected:[`merge ${t} ${r}_UNIQUE ${a} ${i==null?void 0:i.join(" ")}`]},f}const h=o||"",d={id:r||`${zt.records.seq}-${qh()}`,message:`merged branch ${t} into ${zt.records.currBranch}`,seq:zt.records.seq++,parents:zt.records.head==null?[]:[zt.records.head.id,h],branch:zt.records.currBranch,type:Fe.MERGE,customType:a,customId:!!r,tags:i??[]};zt.records.head=d,zt.records.commits.set(d.id,d),zt.records.branches.set(zt.records.currBranch,d.id),G.debug(zt.records.branches),G.debug("in mergeBranch")},"merge"),j9=g(function(e){let t=e.id,r=e.targetId,a=e.tags,i=e.parent;G.debug("Entering cherryPick:",t,r,a);const n=Jn();if(t=Mt.sanitizeText(t,n),r=Mt.sanitizeText(r,n),a=a==null?void 0:a.map(l=>Mt.sanitizeText(l,n)),i=Mt.sanitizeText(i,n),!t||!zt.records.commits.has(t)){const l=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw l.hash={text:`cherryPick ${t} ${r}`,token:`cherryPick ${t} ${r}`,expected:["cherry-pick abc"]},l}const s=zt.records.commits.get(t);if(s===void 0||!s)throw new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');if(i&&!(Array.isArray(s.parents)&&s.parents.includes(i)))throw new Error("Invalid operation: The specified parent commit is not an immediate parent of the cherry-picked commit.");const o=s.branch;if(s.type===Fe.MERGE&&!i)throw new Error("Incorrect usage of cherry-pick: If the source commit is a merge commit, an immediate parent commit must be specified.");if(!r||!zt.records.commits.has(r)){if(o===zt.records.currBranch){const d=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw d.hash={text:`cherryPick ${t} ${r}`,token:`cherryPick ${t} ${r}`,expected:["cherry-pick abc"]},d}const l=zt.records.branches.get(zt.records.currBranch);if(l===void 0||!l){const d=new Error(`Incorrect usage of "cherry-pick". Current branch (${zt.records.currBranch})has no commits`);throw d.hash={text:`cherryPick ${t} ${r}`,token:`cherryPick ${t} ${r}`,expected:["cherry-pick abc"]},d}const u=zt.records.commits.get(l);if(u===void 0||!u){const d=new Error(`Incorrect usage of "cherry-pick". Current branch (${zt.records.currBranch})has no commits`);throw d.hash={text:`cherryPick ${t} ${r}`,token:`cherryPick ${t} ${r}`,expected:["cherry-pick abc"]},d}const h={id:zt.records.seq+"-"+qh(),message:`cherry-picked ${s==null?void 0:s.message} into ${zt.records.currBranch}`,seq:zt.records.seq++,parents:zt.records.head==null?[]:[zt.records.head.id,s.id],branch:zt.records.currBranch,type:Fe.CHERRY_PICK,tags:a?a.filter(Boolean):[`cherry-pick:${s.id}${s.type===Fe.MERGE?`|parent:${i}`:""}`]};zt.records.head=h,zt.records.commits.set(h.id,h),zt.records.branches.set(zt.records.currBranch,h.id),G.debug(zt.records.branches),G.debug("in cherryPick")}},"cherryPick"),Cw=g(function(e){if(e=Mt.sanitizeText(e,Jn()),zt.records.branches.has(e)){zt.records.currBranch=e;const t=zt.records.branches.get(zt.records.currBranch);t===void 0||!t?zt.records.head=null:zt.records.head=zt.records.commits.get(t)??null}else{const t=new Error(`Trying to checkout branch which is not yet created. (Help try using "branch ${e}")`);throw t.hash={text:`checkout ${e}`,token:`checkout ${e}`,expected:[`branch ${e}`]},t}},"checkout");function Up(e,t,r){const a=e.indexOf(t);a===-1?e.push(r):e.splice(a,1,r)}g(Up,"upsert");function R0(e){const t=e.reduce((i,n)=>i.seq>n.seq?i:n,e[0]);let r="";e.forEach(function(i){i===t?r+="	*":r+="	|"});const a=[r,t.id,t.seq];for(const i in zt.records.branches)zt.records.branches.get(i)===t.id&&a.push(i);if(G.debug(a.join(" ")),t.parents&&t.parents.length==2&&t.parents[0]&&t.parents[1]){const i=zt.records.commits.get(t.parents[0]);Up(e,t,i),t.parents[1]&&e.push(zt.records.commits.get(t.parents[1]))}else{if(t.parents.length==0)return;if(t.parents[0]){const i=zt.records.commits.get(t.parents[0]);Up(e,t,i)}}e=Tw(e,i=>i.id),R0(e)}g(R0,"prettyPrintCommitHistory");var Q9=g(function(){G.debug(zt.records.commits);const e=Sw()[0];R0([e])},"prettyPrint"),Z9=g(function(){zt.reset(),xr()},"clear"),J9=g(function(){return[...zt.records.branchConfig.values()].map((t,r)=>t.order!==null&&t.order!==void 0?t:{...t,order:parseFloat(`0.${r}`)}).sort((t,r)=>(t.order??0)-(r.order??0)).map(({name:t})=>({name:t}))},"getBranchesAsObjArray"),tB=g(function(){return zt.records.branches},"getBranches"),eB=g(function(){return zt.records.commits},"getCommits"),Sw=g(function(){const e=[...zt.records.commits.values()];return e.forEach(function(t){G.debug(t.id)}),e.sort((t,r)=>t.seq-r.seq),e},"getCommitsArray"),rB=g(function(){return zt.records.currBranch},"getCurrentBranch"),aB=g(function(){return zt.records.direction},"getDirection"),iB=g(function(){return zt.records.head},"getHead"),Ew={commitType:Fe,getConfig:Jn,setDirection:G9,setOptions:H9,getOptions:Y9,commit:U9,branch:X9,merge:K9,cherryPick:j9,checkout:Cw,prettyPrint:Q9,clear:Z9,getBranchesAsObjArray:J9,getBranches:tB,getCommits:eB,getCommitsArray:Sw,getCurrentBranch:rB,getDirection:aB,getHead:iB,setAccTitle:vr,getAccTitle:Sr,getAccDescription:_r,setAccDescription:Er,setDiagramTitle:Mr,getDiagramTitle:br},nB=g((e,t)=>{Xo(e,t),e.dir&&t.setDirection(e.dir);for(const r of e.statements)sB(r,t)},"populate"),sB=g((e,t)=>{const a={Commit:g(i=>t.commit(oB(i)),"Commit"),Branch:g(i=>t.branch(lB(i)),"Branch"),Merge:g(i=>t.merge(cB(i)),"Merge"),Checkout:g(i=>t.checkout(uB(i)),"Checkout"),CherryPicking:g(i=>t.cherryPick(hB(i)),"CherryPicking")}[e.$type];a?a(e):G.error(`Unknown statement type: ${e.$type}`)},"parseStatement"),oB=g(e=>({id:e.id,msg:e.message??"",type:e.type!==void 0?Fe[e.type]:Fe.NORMAL,tags:e.tags??void 0}),"parseCommit"),lB=g(e=>({name:e.name,order:e.order??0}),"parseBranch"),cB=g(e=>({branch:e.branch,id:e.id??"",type:e.type!==void 0?Fe[e.type]:void 0,tags:e.tags??void 0}),"parseMerge"),uB=g(e=>e.branch,"parseCheckout"),hB=g(e=>{var r;return{id:e.id,targetId:"",tags:((r=e.tags)==null?void 0:r.length)===0?void 0:e.tags,parent:e.parent}},"parseCherryPicking"),dB={parse:g(async e=>{const t=await Zn("gitGraph",e);G.debug(t),nB(t,Ew)},"parse")},Rd=dt(),or=Rd==null?void 0:Rd.gitGraph,Gi=10,Hi=40,ti=4,wi=2,Sn=8,la=new Map,ua=new Map,th=30,xl=new Map,eh=[],qi=0,Se="LR",fB=g(()=>{la.clear(),ua.clear(),xl.clear(),qi=0,eh=[],Se="LR"},"clear"),_w=g(e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","text");return(typeof e=="string"?e.split(/\\n|\n|<br\s*\/?>/gi):e).forEach(a=>{const i=document.createElementNS("http://www.w3.org/2000/svg","tspan");i.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),i.setAttribute("dy","1em"),i.setAttribute("x","0"),i.setAttribute("class","row"),i.textContent=a.trim(),t.appendChild(i)}),t},"drawText"),Aw=g(e=>{let t,r,a;return Se==="BT"?(r=g((i,n)=>i<=n,"comparisonFunc"),a=1/0):(r=g((i,n)=>i>=n,"comparisonFunc"),a=0),e.forEach(i=>{var s,o;const n=Se==="TB"||Se=="BT"?(s=ua.get(i))==null?void 0:s.y:(o=ua.get(i))==null?void 0:o.x;n!==void 0&&r(n,a)&&(t=i,a=n)}),t},"findClosestParent"),pB=g(e=>{let t="",r=1/0;return e.forEach(a=>{const i=ua.get(a).y;i<=r&&(t=a,r=i)}),t||void 0},"findClosestParentBT"),gB=g((e,t,r)=>{let a=r,i=r;const n=[];e.forEach(s=>{const o=t.get(s);if(!o)throw new Error(`Commit not found for key ${s}`);o.parents.length?(a=vB(o),i=Math.max(a,i)):n.push(o),mB(o,a)}),a=i,n.forEach(s=>{xB(s,a,r)}),e.forEach(s=>{const o=t.get(s);if(o!=null&&o.parents.length){const l=pB(o.parents);a=ua.get(l).y-Hi,a<=i&&(i=a);const u=la.get(o.branch).pos,h=a-Gi;ua.set(o.id,{x:u,y:h})}})},"setParallelBTPos"),yB=g(e=>{var a;const t=Aw(e.parents.filter(i=>i!==null));if(!t)throw new Error(`Closest parent not found for commit ${e.id}`);const r=(a=ua.get(t))==null?void 0:a.y;if(r===void 0)throw new Error(`Closest parent position not found for commit ${e.id}`);return r},"findClosestParentPos"),vB=g(e=>yB(e)+Hi,"calculateCommitPosition"),mB=g((e,t)=>{const r=la.get(e.branch);if(!r)throw new Error(`Branch not found for commit ${e.id}`);const a=r.pos,i=t+Gi;return ua.set(e.id,{x:a,y:i}),{x:a,y:i}},"setCommitPosition"),xB=g((e,t,r)=>{const a=la.get(e.branch);if(!a)throw new Error(`Branch not found for commit ${e.id}`);const i=t+r,n=a.pos;ua.set(e.id,{x:n,y:i})},"setRootPosition"),bB=g((e,t,r,a,i,n)=>{if(n===Fe.HIGHLIGHT)e.append("rect").attr("x",r.x-10).attr("y",r.y-10).attr("width",20).attr("height",20).attr("class",`commit ${t.id} commit-highlight${i%Sn} ${a}-outer`),e.append("rect").attr("x",r.x-6).attr("y",r.y-6).attr("width",12).attr("height",12).attr("class",`commit ${t.id} commit${i%Sn} ${a}-inner`);else if(n===Fe.CHERRY_PICK)e.append("circle").attr("cx",r.x).attr("cy",r.y).attr("r",10).attr("class",`commit ${t.id} ${a}`),e.append("circle").attr("cx",r.x-3).attr("cy",r.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${t.id} ${a}`),e.append("circle").attr("cx",r.x+3).attr("cy",r.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${t.id} ${a}`),e.append("line").attr("x1",r.x+3).attr("y1",r.y+1).attr("x2",r.x).attr("y2",r.y-5).attr("stroke","#fff").attr("class",`commit ${t.id} ${a}`),e.append("line").attr("x1",r.x-3).attr("y1",r.y+1).attr("x2",r.x).attr("y2",r.y-5).attr("stroke","#fff").attr("class",`commit ${t.id} ${a}`);else{const s=e.append("circle");if(s.attr("cx",r.x),s.attr("cy",r.y),s.attr("r",t.type===Fe.MERGE?9:10),s.attr("class",`commit ${t.id} commit${i%Sn}`),n===Fe.MERGE){const o=e.append("circle");o.attr("cx",r.x),o.attr("cy",r.y),o.attr("r",6),o.attr("class",`commit ${a} ${t.id} commit${i%Sn}`)}n===Fe.REVERSE&&e.append("path").attr("d",`M ${r.x-5},${r.y-5}L${r.x+5},${r.y+5}M${r.x-5},${r.y+5}L${r.x+5},${r.y-5}`).attr("class",`commit ${a} ${t.id} commit${i%Sn}`)}},"drawCommitBullet"),wB=g((e,t,r,a)=>{var i;if(t.type!==Fe.CHERRY_PICK&&(t.customId&&t.type===Fe.MERGE||t.type!==Fe.MERGE)&&(or!=null&&or.showCommitLabel)){const n=e.append("g"),s=n.insert("rect").attr("class","commit-label-bkg"),o=n.append("text").attr("x",a).attr("y",r.y+25).attr("class","commit-label").text(t.id),l=(i=o.node())==null?void 0:i.getBBox();if(l&&(s.attr("x",r.posWithOffset-l.width/2-wi).attr("y",r.y+13.5).attr("width",l.width+2*wi).attr("height",l.height+2*wi),Se==="TB"||Se==="BT"?(s.attr("x",r.x-(l.width+4*ti+5)).attr("y",r.y-12),o.attr("x",r.x-(l.width+4*ti)).attr("y",r.y+l.height-12)):o.attr("x",r.posWithOffset-l.width/2),or.rotateCommitLabel))if(Se==="TB"||Se==="BT")o.attr("transform","rotate(-45, "+r.x+", "+r.y+")"),s.attr("transform","rotate(-45, "+r.x+", "+r.y+")");else{const u=-7.5-(l.width+10)/25*9.5,h=10+l.width/25*8.5;n.attr("transform","translate("+u+", "+h+") rotate(-45, "+a+", "+r.y+")")}}},"drawCommitLabel"),kB=g((e,t,r,a)=>{var i;if(t.tags.length>0){let n=0,s=0,o=0;const l=[];for(const u of t.tags.reverse()){const h=e.insert("polygon"),d=e.append("circle"),f=e.append("text").attr("y",r.y-16-n).attr("class","tag-label").text(u),p=(i=f.node())==null?void 0:i.getBBox();if(!p)throw new Error("Tag bbox not found");s=Math.max(s,p.width),o=Math.max(o,p.height),f.attr("x",r.posWithOffset-p.width/2),l.push({tag:f,hole:d,rect:h,yOffset:n}),n+=20}for(const{tag:u,hole:h,rect:d,yOffset:f}of l){const p=o/2,y=r.y-19.2-f;if(d.attr("class","tag-label-bkg").attr("points",`
      ${a-s/2-ti/2},${y+wi}  
      ${a-s/2-ti/2},${y-wi}
      ${r.posWithOffset-s/2-ti},${y-p-wi}
      ${r.posWithOffset+s/2+ti},${y-p-wi}
      ${r.posWithOffset+s/2+ti},${y+p+wi}
      ${r.posWithOffset-s/2-ti},${y+p+wi}`),h.attr("cy",y).attr("cx",a-s/2+ti/2).attr("r",1.5).attr("class","tag-hole"),Se==="TB"||Se==="BT"){const v=a+f;d.attr("class","tag-label-bkg").attr("points",`
        ${r.x},${v+2}
        ${r.x},${v-2}
        ${r.x+Gi},${v-p-2}
        ${r.x+Gi+s+4},${v-p-2}
        ${r.x+Gi+s+4},${v+p+2}
        ${r.x+Gi},${v+p+2}`).attr("transform","translate(12,12) rotate(45, "+r.x+","+a+")"),h.attr("cx",r.x+ti/2).attr("cy",v).attr("transform","translate(12,12) rotate(45, "+r.x+","+a+")"),u.attr("x",r.x+5).attr("y",v+3).attr("transform","translate(14,14) rotate(45, "+r.x+","+a+")")}}}},"drawCommitTags"),TB=g(e=>{switch(e.customType??e.type){case Fe.NORMAL:return"commit-normal";case Fe.REVERSE:return"commit-reverse";case Fe.HIGHLIGHT:return"commit-highlight";case Fe.MERGE:return"commit-merge";case Fe.CHERRY_PICK:return"commit-cherry-pick";default:return"commit-normal"}},"getCommitClassType"),CB=g((e,t,r,a)=>{const i={x:0,y:0};if(e.parents.length>0){const n=Aw(e.parents);if(n){const s=a.get(n)??i;return t==="TB"?s.y+Hi:t==="BT"?(a.get(e.id)??i).y-Hi:s.x+Hi}}else return t==="TB"?th:t==="BT"?(a.get(e.id)??i).y-Hi:0;return 0},"calculatePosition"),SB=g((e,t,r)=>{var s,o;const a=Se==="BT"&&r?t:t+Gi,i=Se==="TB"||Se==="BT"?a:(s=la.get(e.branch))==null?void 0:s.pos,n=Se==="TB"||Se==="BT"?(o=la.get(e.branch))==null?void 0:o.pos:a;if(n===void 0||i===void 0)throw new Error(`Position were undefined for commit ${e.id}`);return{x:n,y:i,posWithOffset:a}},"getCommitPosition"),Dy=g((e,t,r)=>{if(!or)throw new Error("GitGraph config not found");const a=e.append("g").attr("class","commit-bullets"),i=e.append("g").attr("class","commit-labels");let n=Se==="TB"||Se==="BT"?th:0;const s=[...t.keys()],o=(or==null?void 0:or.parallelCommits)??!1,l=g((h,d)=>{var y,v;const f=(y=t.get(h))==null?void 0:y.seq,p=(v=t.get(d))==null?void 0:v.seq;return f!==void 0&&p!==void 0?f-p:0},"sortKeys");let u=s.sort(l);Se==="BT"&&(o&&gB(u,t,n),u=u.reverse()),u.forEach(h=>{var p;const d=t.get(h);if(!d)throw new Error(`Commit not found for key ${h}`);o&&(n=CB(d,Se,n,ua));const f=SB(d,n,o);if(r){const y=TB(d),v=d.customType??d.type,m=((p=la.get(d.branch))==null?void 0:p.index)??0;bB(a,d,f,y,m,v),wB(i,d,f,n),kB(i,d,f,n)}Se==="TB"||Se==="BT"?ua.set(d.id,{x:f.x,y:f.posWithOffset}):ua.set(d.id,{x:f.posWithOffset,y:f.y}),n=Se==="BT"&&o?n+Hi:n+Hi+Gi,n>qi&&(qi=n)})},"drawCommits"),EB=g((e,t,r,a,i)=>{const s=(Se==="TB"||Se==="BT"?r.x<a.x:r.y<a.y)?t.branch:e.branch,o=g(u=>u.branch===s,"isOnBranchToGetCurve"),l=g(u=>u.seq>e.seq&&u.seq<t.seq,"isBetweenCommits");return[...i.values()].some(u=>l(u)&&o(u))},"shouldRerouteArrow"),bl=g((e,t,r=0)=>{const a=e+Math.abs(e-t)/2;if(r>5)return a;if(eh.every(s=>Math.abs(s-a)>=10))return eh.push(a),a;const n=Math.abs(e-t);return bl(e,t-n/5,r+1)},"findLane"),_B=g((e,t,r,a)=>{var p,y,v,m,x;const i=ua.get(t.id),n=ua.get(r.id);if(i===void 0||n===void 0)throw new Error(`Commit positions not found for commits ${t.id} and ${r.id}`);const s=EB(t,r,i,n,a);let o="",l="",u=0,h=0,d=(p=la.get(r.branch))==null?void 0:p.index;r.type===Fe.MERGE&&t.id!==r.parents[0]&&(d=(y=la.get(t.branch))==null?void 0:y.index);let f;if(s){o="A 10 10, 0, 0, 0,",l="A 10 10, 0, 0, 1,",u=10,h=10;const b=i.y<n.y?bl(i.y,n.y):bl(n.y,i.y),w=i.x<n.x?bl(i.x,n.x):bl(n.x,i.x);Se==="TB"?i.x<n.x?f=`M ${i.x} ${i.y} L ${w-u} ${i.y} ${l} ${w} ${i.y+h} L ${w} ${n.y-u} ${o} ${w+h} ${n.y} L ${n.x} ${n.y}`:(d=(v=la.get(t.branch))==null?void 0:v.index,f=`M ${i.x} ${i.y} L ${w+u} ${i.y} ${o} ${w} ${i.y+h} L ${w} ${n.y-u} ${l} ${w-h} ${n.y} L ${n.x} ${n.y}`):Se==="BT"?i.x<n.x?f=`M ${i.x} ${i.y} L ${w-u} ${i.y} ${o} ${w} ${i.y-h} L ${w} ${n.y+u} ${l} ${w+h} ${n.y} L ${n.x} ${n.y}`:(d=(m=la.get(t.branch))==null?void 0:m.index,f=`M ${i.x} ${i.y} L ${w+u} ${i.y} ${l} ${w} ${i.y-h} L ${w} ${n.y+u} ${o} ${w-h} ${n.y} L ${n.x} ${n.y}`):i.y<n.y?f=`M ${i.x} ${i.y} L ${i.x} ${b-u} ${o} ${i.x+h} ${b} L ${n.x-u} ${b} ${l} ${n.x} ${b+h} L ${n.x} ${n.y}`:(d=(x=la.get(t.branch))==null?void 0:x.index,f=`M ${i.x} ${i.y} L ${i.x} ${b+u} ${l} ${i.x+h} ${b} L ${n.x-u} ${b} ${o} ${n.x} ${b-h} L ${n.x} ${n.y}`)}else o="A 20 20, 0, 0, 0,",l="A 20 20, 0, 0, 1,",u=20,h=20,Se==="TB"?(i.x<n.x&&(r.type===Fe.MERGE&&t.id!==r.parents[0]?f=`M ${i.x} ${i.y} L ${i.x} ${n.y-u} ${o} ${i.x+h} ${n.y} L ${n.x} ${n.y}`:f=`M ${i.x} ${i.y} L ${n.x-u} ${i.y} ${l} ${n.x} ${i.y+h} L ${n.x} ${n.y}`),i.x>n.x&&(o="A 20 20, 0, 0, 0,",l="A 20 20, 0, 0, 1,",u=20,h=20,r.type===Fe.MERGE&&t.id!==r.parents[0]?f=`M ${i.x} ${i.y} L ${i.x} ${n.y-u} ${l} ${i.x-h} ${n.y} L ${n.x} ${n.y}`:f=`M ${i.x} ${i.y} L ${n.x+u} ${i.y} ${o} ${n.x} ${i.y+h} L ${n.x} ${n.y}`),i.x===n.x&&(f=`M ${i.x} ${i.y} L ${n.x} ${n.y}`)):Se==="BT"?(i.x<n.x&&(r.type===Fe.MERGE&&t.id!==r.parents[0]?f=`M ${i.x} ${i.y} L ${i.x} ${n.y+u} ${l} ${i.x+h} ${n.y} L ${n.x} ${n.y}`:f=`M ${i.x} ${i.y} L ${n.x-u} ${i.y} ${o} ${n.x} ${i.y-h} L ${n.x} ${n.y}`),i.x>n.x&&(o="A 20 20, 0, 0, 0,",l="A 20 20, 0, 0, 1,",u=20,h=20,r.type===Fe.MERGE&&t.id!==r.parents[0]?f=`M ${i.x} ${i.y} L ${i.x} ${n.y+u} ${o} ${i.x-h} ${n.y} L ${n.x} ${n.y}`:f=`M ${i.x} ${i.y} L ${n.x-u} ${i.y} ${o} ${n.x} ${i.y-h} L ${n.x} ${n.y}`),i.x===n.x&&(f=`M ${i.x} ${i.y} L ${n.x} ${n.y}`)):(i.y<n.y&&(r.type===Fe.MERGE&&t.id!==r.parents[0]?f=`M ${i.x} ${i.y} L ${n.x-u} ${i.y} ${l} ${n.x} ${i.y+h} L ${n.x} ${n.y}`:f=`M ${i.x} ${i.y} L ${i.x} ${n.y-u} ${o} ${i.x+h} ${n.y} L ${n.x} ${n.y}`),i.y>n.y&&(r.type===Fe.MERGE&&t.id!==r.parents[0]?f=`M ${i.x} ${i.y} L ${n.x-u} ${i.y} ${o} ${n.x} ${i.y-h} L ${n.x} ${n.y}`:f=`M ${i.x} ${i.y} L ${i.x} ${n.y+u} ${l} ${i.x+h} ${n.y} L ${n.x} ${n.y}`),i.y===n.y&&(f=`M ${i.x} ${i.y} L ${n.x} ${n.y}`));if(f===void 0)throw new Error("Line definition not found");e.append("path").attr("d",f).attr("class","arrow arrow"+d%Sn)},"drawArrow"),AB=g((e,t)=>{const r=e.append("g").attr("class","commit-arrows");[...t.keys()].forEach(a=>{const i=t.get(a);i.parents&&i.parents.length>0&&i.parents.forEach(n=>{_B(r,t.get(n),i,t)})})},"drawArrows"),LB=g((e,t)=>{const r=e.append("g");t.forEach((a,i)=>{var y;const n=i%Sn,s=(y=la.get(a.name))==null?void 0:y.pos;if(s===void 0)throw new Error(`Position not found for branch ${a.name}`);const o=r.append("line");o.attr("x1",0),o.attr("y1",s),o.attr("x2",qi),o.attr("y2",s),o.attr("class","branch branch"+n),Se==="TB"?(o.attr("y1",th),o.attr("x1",s),o.attr("y2",qi),o.attr("x2",s)):Se==="BT"&&(o.attr("y1",qi),o.attr("x1",s),o.attr("y2",th),o.attr("x2",s)),eh.push(s);const l=a.name,u=_w(l),h=r.insert("rect"),f=r.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+n);f.node().appendChild(u);const p=u.getBBox();h.attr("class","branchLabelBkg label"+n).attr("rx",4).attr("ry",4).attr("x",-p.width-4-((or==null?void 0:or.rotateCommitLabel)===!0?30:0)).attr("y",-p.height/2+8).attr("width",p.width+18).attr("height",p.height+4),f.attr("transform","translate("+(-p.width-14-((or==null?void 0:or.rotateCommitLabel)===!0?30:0))+", "+(s-p.height/2-1)+")"),Se==="TB"?(h.attr("x",s-p.width/2-10).attr("y",0),f.attr("transform","translate("+(s-p.width/2-5)+", 0)")):Se==="BT"?(h.attr("x",s-p.width/2-10).attr("y",qi),f.attr("transform","translate("+(s-p.width/2-5)+", "+qi+")")):h.attr("transform","translate(-19, "+(s-p.height/2)+")")})},"drawBranches"),DB=g(function(e,t,r,a,i){return la.set(e,{pos:t,index:r}),t+=50+(i?40:0)+(Se==="TB"||Se==="BT"?a.width/2:0),t},"setBranchPosition"),BB=g(function(e,t,r,a){if(fB(),G.debug("in gitgraph renderer",e+`
`,"id:",t,r),!or)throw new Error("GitGraph config not found");const i=or.rotateCommitLabel??!1,n=a.db;xl=n.getCommits();const s=n.getBranchesAsObjArray();Se=n.getDirection();const o=It(`[id="${t}"]`);let l=0;s.forEach((u,h)=>{var m;const d=_w(u.name),f=o.append("g"),p=f.insert("g").attr("class","branchLabel"),y=p.insert("g").attr("class","label branch-label");(m=y.node())==null||m.appendChild(d);const v=d.getBBox();l=DB(u.name,l,h,v,i),y.remove(),p.remove(),f.remove()}),Dy(o,xl,!1),or.showBranches&&LB(o,s),AB(o,xl),Dy(o,xl,!0),xe.insertTitle(o,"gitTitleText",or.titleTopMargin??0,n.getDiagramTitle()),Ax(void 0,o,or.diagramPadding,or.useMaxWidth)},"draw"),RB={draw:BB},IB=g(e=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(t=>`
        .branch-label${t} { fill: ${e["gitBranchLabel"+t]}; }
        .commit${t} { stroke: ${e["git"+t]}; fill: ${e["git"+t]}; }
        .commit-highlight${t} { stroke: ${e["gitInv"+t]}; fill: ${e["gitInv"+t]}; }
        .label${t}  { fill: ${e["git"+t]}; }
        .arrow${t} { stroke: ${e["git"+t]}; }
        `).join(`
`)}

  .branch {
    stroke-width: 1;
    stroke: ${e.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${e.commitLabelFontSize}; fill: ${e.commitLabelColor};}
  .commit-label-bkg { font-size: ${e.commitLabelFontSize}; fill: ${e.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${e.tagLabelFontSize}; fill: ${e.tagLabelColor};}
  .tag-label-bkg { fill: ${e.tagLabelBackground}; stroke: ${e.tagLabelBorder}; }
  .tag-hole { fill: ${e.textColor}; }

  .commit-merge {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
  }
  .commit-reverse {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  .gitTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }
`,"getStyles"),PB=IB,NB={parser:dB,db:Ew,renderer:RB,styles:PB};const MB=Object.freeze({__proto__:null,diagram:NB});var Xp=function(){var e=g(function(R,O,P,$){for(P=P||{},$=R.length;$--;P[R[$]]=O);return P},"o"),t=[6,8,10,12,13,14,15,16,17,18,20,21,22,23,24,25,26,27,28,29,30,31,33,35,36,38,40],r=[1,26],a=[1,27],i=[1,28],n=[1,29],s=[1,30],o=[1,31],l=[1,32],u=[1,33],h=[1,34],d=[1,9],f=[1,10],p=[1,11],y=[1,12],v=[1,13],m=[1,14],x=[1,15],b=[1,16],w=[1,19],C=[1,20],T=[1,21],k=[1,22],S=[1,23],L=[1,25],_=[1,35],A={trace:g(function(){},"trace"),yy:{},symbols_:{error:2,start:3,gantt:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NL:10,weekday:11,weekday_monday:12,weekday_tuesday:13,weekday_wednesday:14,weekday_thursday:15,weekday_friday:16,weekday_saturday:17,weekday_sunday:18,weekend:19,weekend_friday:20,weekend_saturday:21,dateFormat:22,inclusiveEndDates:23,topAxis:24,axisFormat:25,tickInterval:26,excludes:27,includes:28,todayMarker:29,title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,section:36,clickStatement:37,taskTxt:38,taskData:39,click:40,callbackname:41,callbackargs:42,href:43,clickStatementDebug:44,$accept:0,$end:1},terminals_:{2:"error",4:"gantt",6:"EOF",8:"SPACE",10:"NL",12:"weekday_monday",13:"weekday_tuesday",14:"weekday_wednesday",15:"weekday_thursday",16:"weekday_friday",17:"weekday_saturday",18:"weekday_sunday",20:"weekend_friday",21:"weekend_saturday",22:"dateFormat",23:"inclusiveEndDates",24:"topAxis",25:"axisFormat",26:"tickInterval",27:"excludes",28:"includes",29:"todayMarker",30:"title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"section",38:"taskTxt",39:"taskData",40:"click",41:"callbackname",42:"callbackargs",43:"href"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[19,1],[19,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,2],[37,2],[37,3],[37,3],[37,4],[37,3],[37,4],[37,2],[44,2],[44,3],[44,3],[44,4],[44,3],[44,4],[44,2]],performAction:g(function(O,P,$,M,I,F,V){var N=F.length-1;switch(I){case 1:return F[N-1];case 2:this.$=[];break;case 3:F[N-1].push(F[N]),this.$=F[N-1];break;case 4:case 5:this.$=F[N];break;case 6:case 7:this.$=[];break;case 8:M.setWeekday("monday");break;case 9:M.setWeekday("tuesday");break;case 10:M.setWeekday("wednesday");break;case 11:M.setWeekday("thursday");break;case 12:M.setWeekday("friday");break;case 13:M.setWeekday("saturday");break;case 14:M.setWeekday("sunday");break;case 15:M.setWeekend("friday");break;case 16:M.setWeekend("saturday");break;case 17:M.setDateFormat(F[N].substr(11)),this.$=F[N].substr(11);break;case 18:M.enableInclusiveEndDates(),this.$=F[N].substr(18);break;case 19:M.TopAxis(),this.$=F[N].substr(8);break;case 20:M.setAxisFormat(F[N].substr(11)),this.$=F[N].substr(11);break;case 21:M.setTickInterval(F[N].substr(13)),this.$=F[N].substr(13);break;case 22:M.setExcludes(F[N].substr(9)),this.$=F[N].substr(9);break;case 23:M.setIncludes(F[N].substr(9)),this.$=F[N].substr(9);break;case 24:M.setTodayMarker(F[N].substr(12)),this.$=F[N].substr(12);break;case 27:M.setDiagramTitle(F[N].substr(6)),this.$=F[N].substr(6);break;case 28:this.$=F[N].trim(),M.setAccTitle(this.$);break;case 29:case 30:this.$=F[N].trim(),M.setAccDescription(this.$);break;case 31:M.addSection(F[N].substr(8)),this.$=F[N].substr(8);break;case 33:M.addTask(F[N-1],F[N]),this.$="task";break;case 34:this.$=F[N-1],M.setClickEvent(F[N-1],F[N],null);break;case 35:this.$=F[N-2],M.setClickEvent(F[N-2],F[N-1],F[N]);break;case 36:this.$=F[N-2],M.setClickEvent(F[N-2],F[N-1],null),M.setLink(F[N-2],F[N]);break;case 37:this.$=F[N-3],M.setClickEvent(F[N-3],F[N-2],F[N-1]),M.setLink(F[N-3],F[N]);break;case 38:this.$=F[N-2],M.setClickEvent(F[N-2],F[N],null),M.setLink(F[N-2],F[N-1]);break;case 39:this.$=F[N-3],M.setClickEvent(F[N-3],F[N-1],F[N]),M.setLink(F[N-3],F[N-2]);break;case 40:this.$=F[N-1],M.setLink(F[N-1],F[N]);break;case 41:case 47:this.$=F[N-1]+" "+F[N];break;case 42:case 43:case 45:this.$=F[N-2]+" "+F[N-1]+" "+F[N];break;case 44:case 46:this.$=F[N-3]+" "+F[N-2]+" "+F[N-1]+" "+F[N];break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},e(t,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:17,12:r,13:a,14:i,15:n,16:s,17:o,18:l,19:18,20:u,21:h,22:d,23:f,24:p,25:y,26:v,27:m,28:x,29:b,30:w,31:C,33:T,35:k,36:S,37:24,38:L,40:_},e(t,[2,7],{1:[2,1]}),e(t,[2,3]),{9:36,11:17,12:r,13:a,14:i,15:n,16:s,17:o,18:l,19:18,20:u,21:h,22:d,23:f,24:p,25:y,26:v,27:m,28:x,29:b,30:w,31:C,33:T,35:k,36:S,37:24,38:L,40:_},e(t,[2,5]),e(t,[2,6]),e(t,[2,17]),e(t,[2,18]),e(t,[2,19]),e(t,[2,20]),e(t,[2,21]),e(t,[2,22]),e(t,[2,23]),e(t,[2,24]),e(t,[2,25]),e(t,[2,26]),e(t,[2,27]),{32:[1,37]},{34:[1,38]},e(t,[2,30]),e(t,[2,31]),e(t,[2,32]),{39:[1,39]},e(t,[2,8]),e(t,[2,9]),e(t,[2,10]),e(t,[2,11]),e(t,[2,12]),e(t,[2,13]),e(t,[2,14]),e(t,[2,15]),e(t,[2,16]),{41:[1,40],43:[1,41]},e(t,[2,4]),e(t,[2,28]),e(t,[2,29]),e(t,[2,33]),e(t,[2,34],{42:[1,42],43:[1,43]}),e(t,[2,40],{41:[1,44]}),e(t,[2,35],{43:[1,45]}),e(t,[2,36]),e(t,[2,38],{42:[1,46]}),e(t,[2,37]),e(t,[2,39])],defaultActions:{},parseError:g(function(O,P){if(P.recoverable)this.trace(O);else{var $=new Error(O);throw $.hash=P,$}},"parseError"),parse:g(function(O){var P=this,$=[0],M=[],I=[null],F=[],V=this.table,N="",q=0,U=0,X=2,lt=1,J=F.slice.call(arguments,1),ct=Object.create(this.lexer),yt={yy:{}};for(var ut in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ut)&&(yt.yy[ut]=this.yy[ut]);ct.setInput(O,yt.yy),yt.yy.lexer=ct,yt.yy.parser=this,typeof ct.yylloc>"u"&&(ct.yylloc={});var Q=ct.yylloc;F.push(Q);var K=ct.options&&ct.options.ranges;typeof yt.yy.parseError=="function"?this.parseError=yt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function j(xt){$.length=$.length-2*xt,I.length=I.length-xt,F.length=F.length-xt}g(j,"popStack");function Y(){var xt;return xt=M.pop()||ct.lex()||lt,typeof xt!="number"&&(xt instanceof Array&&(M=xt,xt=M.pop()),xt=P.symbols_[xt]||xt),xt}g(Y,"lex");for(var st,W,bt,tt,H={},Et,nt,Lt,Dt;;){if(W=$[$.length-1],this.defaultActions[W]?bt=this.defaultActions[W]:((st===null||typeof st>"u")&&(st=Y()),bt=V[W]&&V[W][st]),typeof bt>"u"||!bt.length||!bt[0]){var At="";Dt=[];for(Et in V[W])this.terminals_[Et]&&Et>X&&Dt.push("'"+this.terminals_[Et]+"'");ct.showPosition?At="Parse error on line "+(q+1)+`:
`+ct.showPosition()+`
Expecting `+Dt.join(", ")+", got '"+(this.terminals_[st]||st)+"'":At="Parse error on line "+(q+1)+": Unexpected "+(st==lt?"end of input":"'"+(this.terminals_[st]||st)+"'"),this.parseError(At,{text:ct.match,token:this.terminals_[st]||st,line:ct.yylineno,loc:Q,expected:Dt})}if(bt[0]instanceof Array&&bt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+W+", token: "+st);switch(bt[0]){case 1:$.push(st),I.push(ct.yytext),F.push(ct.yylloc),$.push(bt[1]),st=null,U=ct.yyleng,N=ct.yytext,q=ct.yylineno,Q=ct.yylloc;break;case 2:if(nt=this.productions_[bt[1]][1],H.$=I[I.length-nt],H._$={first_line:F[F.length-(nt||1)].first_line,last_line:F[F.length-1].last_line,first_column:F[F.length-(nt||1)].first_column,last_column:F[F.length-1].last_column},K&&(H._$.range=[F[F.length-(nt||1)].range[0],F[F.length-1].range[1]]),tt=this.performAction.apply(H,[N,U,q,yt.yy,bt[1],I,F].concat(J)),typeof tt<"u")return tt;nt&&($=$.slice(0,-1*nt*2),I=I.slice(0,-1*nt),F=F.slice(0,-1*nt)),$.push(this.productions_[bt[1]][0]),I.push(H.$),F.push(H._$),Lt=V[$[$.length-2]][$[$.length-1]],$.push(Lt);break;case 3:return!0}}return!0},"parse")},E=function(){var R={EOF:1,parseError:g(function(P,$){if(this.yy.parser)this.yy.parser.parseError(P,$);else throw new Error(P)},"parseError"),setInput:g(function(O,P){return this.yy=P||this.yy||{},this._input=O,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:g(function(){var O=this._input[0];this.yytext+=O,this.yyleng++,this.offset++,this.match+=O,this.matched+=O;var P=O.match(/(?:\r\n?|\n).*/g);return P?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),O},"input"),unput:g(function(O){var P=O.length,$=O.split(/(?:\r\n?|\n)/g);this._input=O+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-P),this.offset-=P;var M=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),$.length-1&&(this.yylineno-=$.length-1);var I=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:$?($.length===M.length?this.yylloc.first_column:0)+M[M.length-$.length].length-$[0].length:this.yylloc.first_column-P},this.options.ranges&&(this.yylloc.range=[I[0],I[0]+this.yyleng-P]),this.yyleng=this.yytext.length,this},"unput"),more:g(function(){return this._more=!0,this},"more"),reject:g(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:g(function(O){this.unput(this.match.slice(O))},"less"),pastInput:g(function(){var O=this.matched.substr(0,this.matched.length-this.match.length);return(O.length>20?"...":"")+O.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:g(function(){var O=this.match;return O.length<20&&(O+=this._input.substr(0,20-O.length)),(O.substr(0,20)+(O.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:g(function(){var O=this.pastInput(),P=new Array(O.length+1).join("-");return O+this.upcomingInput()+`
`+P+"^"},"showPosition"),test_match:g(function(O,P){var $,M,I;if(this.options.backtrack_lexer&&(I={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(I.yylloc.range=this.yylloc.range.slice(0))),M=O[0].match(/(?:\r\n?|\n).*/g),M&&(this.yylineno+=M.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:M?M[M.length-1].length-M[M.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+O[0].length},this.yytext+=O[0],this.match+=O[0],this.matches=O,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(O[0].length),this.matched+=O[0],$=this.performAction.call(this,this.yy,this,P,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),$)return $;if(this._backtrack){for(var F in I)this[F]=I[F];return!1}return!1},"test_match"),next:g(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var O,P,$,M;this._more||(this.yytext="",this.match="");for(var I=this._currentRules(),F=0;F<I.length;F++)if($=this._input.match(this.rules[I[F]]),$&&(!P||$[0].length>P[0].length)){if(P=$,M=F,this.options.backtrack_lexer){if(O=this.test_match($,I[F]),O!==!1)return O;if(this._backtrack){P=!1;continue}else return!1}else if(!this.options.flex)break}return P?(O=this.test_match(P,I[M]),O!==!1?O:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:g(function(){var P=this.next();return P||this.lex()},"lex"),begin:g(function(P){this.conditionStack.push(P)},"begin"),popState:g(function(){var P=this.conditionStack.length-1;return P>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:g(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:g(function(P){return P=this.conditionStack.length-1-Math.abs(P||0),P>=0?this.conditionStack[P]:"INITIAL"},"topState"),pushState:g(function(P){this.begin(P)},"pushState"),stateStackSize:g(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:g(function(P,$,M,I){switch(M){case 0:return this.begin("open_directive"),"open_directive";case 1:return this.begin("acc_title"),31;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),33;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:break;case 9:break;case 10:break;case 11:return 10;case 12:break;case 13:break;case 14:this.begin("href");break;case 15:this.popState();break;case 16:return 43;case 17:this.begin("callbackname");break;case 18:this.popState();break;case 19:this.popState(),this.begin("callbackargs");break;case 20:return 41;case 21:this.popState();break;case 22:return 42;case 23:this.begin("click");break;case 24:this.popState();break;case 25:return 40;case 26:return 4;case 27:return 22;case 28:return 23;case 29:return 24;case 30:return 25;case 31:return 26;case 32:return 28;case 33:return 27;case 34:return 29;case 35:return 12;case 36:return 13;case 37:return 14;case 38:return 15;case 39:return 16;case 40:return 17;case 41:return 18;case 42:return 20;case 43:return 21;case 44:return"date";case 45:return 30;case 46:return"accDescription";case 47:return 36;case 48:return 38;case 49:return 39;case 50:return":";case 51:return 6;case 52:return"INVALID"}},"anonymous"),rules:[/^(?:%%\{)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:weekday\s+monday\b)/i,/^(?:weekday\s+tuesday\b)/i,/^(?:weekday\s+wednesday\b)/i,/^(?:weekday\s+thursday\b)/i,/^(?:weekday\s+friday\b)/i,/^(?:weekday\s+saturday\b)/i,/^(?:weekday\s+sunday\b)/i,/^(?:weekend\s+friday\b)/i,/^(?:weekend\s+saturday\b)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^\n]+)/i,/^(?:[^:\n]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[6,7],inclusive:!1},acc_descr:{rules:[4],inclusive:!1},acc_title:{rules:[2],inclusive:!1},callbackargs:{rules:[21,22],inclusive:!1},callbackname:{rules:[18,19,20],inclusive:!1},href:{rules:[15,16],inclusive:!1},click:{rules:[24,25],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,17,23,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52],inclusive:!0}}};return R}();A.lexer=E;function D(){this.yy={}}return g(D,"Parser"),D.prototype=A,A.Parser=D,new D}();Xp.parser=Xp;var FB=Xp;Vr.extend(zE);Vr.extend(qE);Vr.extend(WE);var By={friday:5,saturday:6},ii="",I0="",P0=void 0,N0="",yc=[],vc=[],M0=new Map,F0=[],rh=[],Bo="",O0="",Lw=["active","done","crit","milestone"],$0=[],mc=!1,V0=!1,z0="sunday",ah="saturday",Kp=0,OB=g(function(){F0=[],rh=[],Bo="",$0=[],gu=0,Qp=void 0,yu=void 0,lr=[],ii="",I0="",O0="",P0=void 0,N0="",yc=[],vc=[],mc=!1,V0=!1,Kp=0,M0=new Map,xr(),z0="sunday",ah="saturday"},"clear"),$B=g(function(e){I0=e},"setAxisFormat"),VB=g(function(){return I0},"getAxisFormat"),zB=g(function(e){P0=e},"setTickInterval"),qB=g(function(){return P0},"getTickInterval"),WB=g(function(e){N0=e},"setTodayMarker"),GB=g(function(){return N0},"getTodayMarker"),HB=g(function(e){ii=e},"setDateFormat"),YB=g(function(){mc=!0},"enableInclusiveEndDates"),UB=g(function(){return mc},"endDatesAreInclusive"),XB=g(function(){V0=!0},"enableTopAxis"),KB=g(function(){return V0},"topAxisEnabled"),jB=g(function(e){O0=e},"setDisplayMode"),QB=g(function(){return O0},"getDisplayMode"),ZB=g(function(){return ii},"getDateFormat"),JB=g(function(e){yc=e.toLowerCase().split(/[\s,]+/)},"setIncludes"),tR=g(function(){return yc},"getIncludes"),eR=g(function(e){vc=e.toLowerCase().split(/[\s,]+/)},"setExcludes"),rR=g(function(){return vc},"getExcludes"),aR=g(function(){return M0},"getLinks"),iR=g(function(e){Bo=e,F0.push(e)},"addSection"),nR=g(function(){return F0},"getSections"),sR=g(function(){let e=Ry();const t=10;let r=0;for(;!e&&r<t;)e=Ry(),r++;return rh=lr,rh},"getTasks"),Dw=g(function(e,t,r,a){return a.includes(e.format(t.trim()))?!1:r.includes("weekends")&&(e.isoWeekday()===By[ah]||e.isoWeekday()===By[ah]+1)||r.includes(e.format("dddd").toLowerCase())?!0:r.includes(e.format(t.trim()))},"isInvalidDate"),oR=g(function(e){z0=e},"setWeekday"),lR=g(function(){return z0},"getWeekday"),cR=g(function(e){ah=e},"setWeekend"),Bw=g(function(e,t,r,a){if(!r.length||e.manualEndTime)return;let i;e.startTime instanceof Date?i=Vr(e.startTime):i=Vr(e.startTime,t,!0),i=i.add(1,"d");let n;e.endTime instanceof Date?n=Vr(e.endTime):n=Vr(e.endTime,t,!0);const[s,o]=uR(i,n,t,r,a);e.endTime=s.toDate(),e.renderEndTime=o},"checkTaskDates"),uR=g(function(e,t,r,a,i){let n=!1,s=null;for(;e<=t;)n||(s=t.toDate()),n=Dw(e,r,a,i),n&&(t=t.add(1,"d")),e=e.add(1,"d");return[t,s]},"fixTaskDates"),jp=g(function(e,t,r){r=r.trim();const i=/^after\s+(?<ids>[\d\w- ]+)/.exec(r);if(i!==null){let s=null;for(const l of i.groups.ids.split(" ")){let u=ts(l);u!==void 0&&(!s||u.endTime>s.endTime)&&(s=u)}if(s)return s.endTime;const o=new Date;return o.setHours(0,0,0,0),o}let n=Vr(r,t.trim(),!0);if(n.isValid())return n.toDate();{G.debug("Invalid date:"+r),G.debug("With date format:"+t.trim());const s=new Date(r);if(s===void 0||isNaN(s.getTime())||s.getFullYear()<-1e4||s.getFullYear()>1e4)throw new Error("Invalid date:"+r);return s}},"getStartDate"),Rw=g(function(e){const t=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(e.trim());return t!==null?[Number.parseFloat(t[1]),t[2]]:[NaN,"ms"]},"parseDuration"),Iw=g(function(e,t,r,a=!1){r=r.trim();const n=/^until\s+(?<ids>[\d\w- ]+)/.exec(r);if(n!==null){let h=null;for(const f of n.groups.ids.split(" ")){let p=ts(f);p!==void 0&&(!h||p.startTime<h.startTime)&&(h=p)}if(h)return h.startTime;const d=new Date;return d.setHours(0,0,0,0),d}let s=Vr(r,t.trim(),!0);if(s.isValid())return a&&(s=s.add(1,"d")),s.toDate();let o=Vr(e);const[l,u]=Rw(r);if(!Number.isNaN(l)){const h=o.add(l,u);h.isValid()&&(o=h)}return o.toDate()},"getEndDate"),gu=0,Es=g(function(e){return e===void 0?(gu=gu+1,"task"+gu):e},"parseId"),hR=g(function(e,t){let r;t.substr(0,1)===":"?r=t.substr(1,t.length):r=t;const a=r.split(","),i={};q0(a,i,Lw);for(let s=0;s<a.length;s++)a[s]=a[s].trim();let n="";switch(a.length){case 1:i.id=Es(),i.startTime=e.endTime,n=a[0];break;case 2:i.id=Es(),i.startTime=jp(void 0,ii,a[0]),n=a[1];break;case 3:i.id=Es(a[0]),i.startTime=jp(void 0,ii,a[1]),n=a[2];break}return n&&(i.endTime=Iw(i.startTime,ii,n,mc),i.manualEndTime=Vr(n,"YYYY-MM-DD",!0).isValid(),Bw(i,ii,vc,yc)),i},"compileData"),dR=g(function(e,t){let r;t.substr(0,1)===":"?r=t.substr(1,t.length):r=t;const a=r.split(","),i={};q0(a,i,Lw);for(let n=0;n<a.length;n++)a[n]=a[n].trim();switch(a.length){case 1:i.id=Es(),i.startTime={type:"prevTaskEnd",id:e},i.endTime={data:a[0]};break;case 2:i.id=Es(),i.startTime={type:"getStartDate",startData:a[0]},i.endTime={data:a[1]};break;case 3:i.id=Es(a[0]),i.startTime={type:"getStartDate",startData:a[1]},i.endTime={data:a[2]};break}return i},"parseData"),Qp,yu,lr=[],Pw={},fR=g(function(e,t){const r={section:Bo,type:Bo,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:t},task:e,classes:[]},a=dR(yu,t);r.raw.startTime=a.startTime,r.raw.endTime=a.endTime,r.id=a.id,r.prevTaskId=yu,r.active=a.active,r.done=a.done,r.crit=a.crit,r.milestone=a.milestone,r.order=Kp,Kp++;const i=lr.push(r);yu=r.id,Pw[r.id]=i-1},"addTask"),ts=g(function(e){const t=Pw[e];return lr[t]},"findTaskById"),pR=g(function(e,t){const r={section:Bo,type:Bo,description:e,task:e,classes:[]},a=hR(Qp,t);r.startTime=a.startTime,r.endTime=a.endTime,r.id=a.id,r.active=a.active,r.done=a.done,r.crit=a.crit,r.milestone=a.milestone,Qp=r,rh.push(r)},"addTaskOrg"),Ry=g(function(){const e=g(function(r){const a=lr[r];let i="";switch(lr[r].raw.startTime.type){case"prevTaskEnd":{const n=ts(a.prevTaskId);a.startTime=n.endTime;break}case"getStartDate":i=jp(void 0,ii,lr[r].raw.startTime.startData),i&&(lr[r].startTime=i);break}return lr[r].startTime&&(lr[r].endTime=Iw(lr[r].startTime,ii,lr[r].raw.endTime.data,mc),lr[r].endTime&&(lr[r].processed=!0,lr[r].manualEndTime=Vr(lr[r].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),Bw(lr[r],ii,vc,yc))),lr[r].processed},"compileTask");let t=!0;for(const[r,a]of lr.entries())e(r),t=t&&a.processed;return t},"compileTasks"),gR=g(function(e,t){let r=t;dt().securityLevel!=="loose"&&(r=Kn.sanitizeUrl(t)),e.split(",").forEach(function(a){ts(a)!==void 0&&(Mw(a,()=>{window.open(r,"_self")}),M0.set(a,r))}),Nw(e,"clickable")},"setLink"),Nw=g(function(e,t){e.split(",").forEach(function(r){let a=ts(r);a!==void 0&&a.classes.push(t)})},"setClass"),yR=g(function(e,t,r){if(dt().securityLevel!=="loose"||t===void 0)return;let a=[];if(typeof r=="string"){a=r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let n=0;n<a.length;n++){let s=a[n].trim();s.startsWith('"')&&s.endsWith('"')&&(s=s.substr(1,s.length-2)),a[n]=s}}a.length===0&&a.push(e),ts(e)!==void 0&&Mw(e,()=>{xe.runFunc(t,...a)})},"setClickFun"),Mw=g(function(e,t){$0.push(function(){const r=document.querySelector(`[id="${e}"]`);r!==null&&r.addEventListener("click",function(){t()})},function(){const r=document.querySelector(`[id="${e}-text"]`);r!==null&&r.addEventListener("click",function(){t()})})},"pushFun"),vR=g(function(e,t,r){e.split(",").forEach(function(a){yR(a,t,r)}),Nw(e,"clickable")},"setClickEvent"),mR=g(function(e){$0.forEach(function(t){t(e)})},"bindFunctions"),xR={getConfig:g(()=>dt().gantt,"getConfig"),clear:OB,setDateFormat:HB,getDateFormat:ZB,enableInclusiveEndDates:YB,endDatesAreInclusive:UB,enableTopAxis:XB,topAxisEnabled:KB,setAxisFormat:$B,getAxisFormat:VB,setTickInterval:zB,getTickInterval:qB,setTodayMarker:WB,getTodayMarker:GB,setAccTitle:vr,getAccTitle:Sr,setDiagramTitle:Mr,getDiagramTitle:br,setDisplayMode:jB,getDisplayMode:QB,setAccDescription:Er,getAccDescription:_r,addSection:iR,getSections:nR,getTasks:sR,addTask:fR,findTaskById:ts,addTaskOrg:pR,setIncludes:JB,getIncludes:tR,setExcludes:eR,getExcludes:rR,setClickEvent:vR,setLink:gR,getLinks:aR,bindFunctions:mR,parseDuration:Rw,isInvalidDate:Dw,setWeekday:oR,getWeekday:lR,setWeekend:cR};function q0(e,t,r){let a=!0;for(;a;)a=!1,r.forEach(function(i){const n="^\\s*"+i+"\\s*$",s=new RegExp(n);e[0].match(s)&&(t[i]=!0,e.shift(1),a=!0)})}g(q0,"getTaskTags");var bR=g(function(){G.debug("Something is calling, setConf, remove the call")},"setConf"),Iy={monday:LE,tuesday:AE,wednesday:_E,thursday:EE,friday:SE,saturday:CE,sunday:TE},wR=g((e,t)=>{let r=[...e].map(()=>-1/0),a=[...e].sort((n,s)=>n.startTime-s.startTime||n.order-s.order),i=0;for(const n of a)for(let s=0;s<r.length;s++)if(n.startTime>=r[s]){r[s]=n.endTime,n.order=s+t,s>i&&(i=s);break}return i},"getMaxIntersections"),vi,kR=g(function(e,t,r,a){const i=dt().gantt,n=dt().securityLevel;let s;n==="sandbox"&&(s=It("#i"+t));const o=n==="sandbox"?It(s.nodes()[0].contentDocument.body):It("body"),l=n==="sandbox"?s.nodes()[0].contentDocument:document,u=l.getElementById(t);vi=u.parentElement.offsetWidth,vi===void 0&&(vi=1200),i.useWidth!==void 0&&(vi=i.useWidth);const h=a.db.getTasks();let d=[];for(const L of h)d.push(L.type);d=S(d);const f={};let p=2*i.topPadding;if(a.db.getDisplayMode()==="compact"||i.displayMode==="compact"){const L={};for(const A of h)L[A.section]===void 0?L[A.section]=[A]:L[A.section].push(A);let _=0;for(const A of Object.keys(L)){const E=wR(L[A],_)+1;_+=E,p+=E*(i.barHeight+i.barGap),f[A]=E}}else{p+=h.length*(i.barHeight+i.barGap);for(const L of d)f[L]=h.filter(_=>_.type===L).length}u.setAttribute("viewBox","0 0 "+vi+" "+p);const y=o.select(`[id="${t}"]`),v=mE().domain([xE(h,function(L){return L.startTime}),bE(h,function(L){return L.endTime})]).rangeRound([0,vi-i.leftPadding-i.rightPadding]);function m(L,_){const A=L.startTime,E=_.startTime;let D=0;return A>E?D=1:A<E&&(D=-1),D}g(m,"taskCompare"),h.sort(m),x(h,vi,p),da(y,p,vi,i.useMaxWidth),y.append("text").text(a.db.getDiagramTitle()).attr("x",vi/2).attr("y",i.titleTopMargin).attr("class","titleText");function x(L,_,A){const E=i.barHeight,D=E+i.barGap,R=i.topPadding,O=i.leftPadding,P=Fl().domain([0,d.length]).range(["#00B9FA","#F95002"]).interpolate(wE);w(D,R,O,_,A,L,a.db.getExcludes(),a.db.getIncludes()),C(O,R,_,A),b(L,D,R,O,E,P,_),T(D,R),k(O,R,_,A)}g(x,"makeGantt");function b(L,_,A,E,D,R,O){const $=[...new Set(L.map(V=>V.order))].map(V=>L.find(N=>N.order===V));y.append("g").selectAll("rect").data($).enter().append("rect").attr("x",0).attr("y",function(V,N){return N=V.order,N*_+A-2}).attr("width",function(){return O-i.rightPadding/2}).attr("height",_).attr("class",function(V){for(const[N,q]of d.entries())if(V.type===q)return"section section"+N%i.numberSectionStyles;return"section section0"});const M=y.append("g").selectAll("rect").data(L).enter(),I=a.db.getLinks();if(M.append("rect").attr("id",function(V){return V.id}).attr("rx",3).attr("ry",3).attr("x",function(V){return V.milestone?v(V.startTime)+E+.5*(v(V.endTime)-v(V.startTime))-.5*D:v(V.startTime)+E}).attr("y",function(V,N){return N=V.order,N*_+A}).attr("width",function(V){return V.milestone?D:v(V.renderEndTime||V.endTime)-v(V.startTime)}).attr("height",D).attr("transform-origin",function(V,N){return N=V.order,(v(V.startTime)+E+.5*(v(V.endTime)-v(V.startTime))).toString()+"px "+(N*_+A+.5*D).toString()+"px"}).attr("class",function(V){const N="task";let q="";V.classes.length>0&&(q=V.classes.join(" "));let U=0;for(const[lt,J]of d.entries())V.type===J&&(U=lt%i.numberSectionStyles);let X="";return V.active?V.crit?X+=" activeCrit":X=" active":V.done?V.crit?X=" doneCrit":X=" done":V.crit&&(X+=" crit"),X.length===0&&(X=" task"),V.milestone&&(X=" milestone "+X),X+=U,X+=" "+q,N+X}),M.append("text").attr("id",function(V){return V.id+"-text"}).text(function(V){return V.task}).attr("font-size",i.fontSize).attr("x",function(V){let N=v(V.startTime),q=v(V.renderEndTime||V.endTime);V.milestone&&(N+=.5*(v(V.endTime)-v(V.startTime))-.5*D),V.milestone&&(q=N+D);const U=this.getBBox().width;return U>q-N?q+U+1.5*i.leftPadding>O?N+E-5:q+E+5:(q-N)/2+N+E}).attr("y",function(V,N){return N=V.order,N*_+i.barHeight/2+(i.fontSize/2-2)+A}).attr("text-height",D).attr("class",function(V){const N=v(V.startTime);let q=v(V.endTime);V.milestone&&(q=N+D);const U=this.getBBox().width;let X="";V.classes.length>0&&(X=V.classes.join(" "));let lt=0;for(const[ct,yt]of d.entries())V.type===yt&&(lt=ct%i.numberSectionStyles);let J="";return V.active&&(V.crit?J="activeCritText"+lt:J="activeText"+lt),V.done?V.crit?J=J+" doneCritText"+lt:J=J+" doneText"+lt:V.crit&&(J=J+" critText"+lt),V.milestone&&(J+=" milestoneText"),U>q-N?q+U+1.5*i.leftPadding>O?X+" taskTextOutsideLeft taskTextOutside"+lt+" "+J:X+" taskTextOutsideRight taskTextOutside"+lt+" "+J+" width-"+U:X+" taskText taskText"+lt+" "+J+" width-"+U}),dt().securityLevel==="sandbox"){let V;V=It("#i"+t);const N=V.nodes()[0].contentDocument;M.filter(function(q){return I.has(q.id)}).each(function(q){var U=N.querySelector("#"+q.id),X=N.querySelector("#"+q.id+"-text");const lt=U.parentNode;var J=N.createElement("a");J.setAttribute("xlink:href",I.get(q.id)),J.setAttribute("target","_top"),lt.appendChild(J),J.appendChild(U),J.appendChild(X)})}}g(b,"drawRects");function w(L,_,A,E,D,R,O,P){if(O.length===0&&P.length===0)return;let $,M;for(const{startTime:U,endTime:X}of R)($===void 0||U<$)&&($=U),(M===void 0||X>M)&&(M=X);if(!$||!M)return;if(Vr(M).diff(Vr($),"year")>5){G.warn("The difference between the min and max time is more than 5 years. This will cause performance issues. Skipping drawing exclude days.");return}const I=a.db.getDateFormat(),F=[];let V=null,N=Vr($);for(;N.valueOf()<=M;)a.db.isInvalidDate(N,I,O,P)?V?V.end=N:V={start:N,end:N}:V&&(F.push(V),V=null),N=N.add(1,"d");y.append("g").selectAll("rect").data(F).enter().append("rect").attr("id",function(U){return"exclude-"+U.start.format("YYYY-MM-DD")}).attr("x",function(U){return v(U.start)+A}).attr("y",i.gridLineStartPadding).attr("width",function(U){const X=U.end.add(1,"day");return v(X)-v(U.start)}).attr("height",D-_-i.gridLineStartPadding).attr("transform-origin",function(U,X){return(v(U.start)+A+.5*(v(U.end)-v(U.start))).toString()+"px "+(X*L+.5*D).toString()+"px"}).attr("class","exclude-range")}g(w,"drawExcludeDays");function C(L,_,A,E){let D=kE(v).tickSize(-E+_+i.gridLineStartPadding).tickFormat(K1(a.db.getAxisFormat()||i.axisFormat||"%Y-%m-%d"));const O=/^([1-9]\d*)(millisecond|second|minute|hour|day|week|month)$/.exec(a.db.getTickInterval()||i.tickInterval);if(O!==null){const P=O[1],$=O[2],M=a.db.getWeekday()||i.weekday;switch($){case"millisecond":D.ticks(ey.every(P));break;case"second":D.ticks(ty.every(P));break;case"minute":D.ticks(J1.every(P));break;case"hour":D.ticks(Z1.every(P));break;case"day":D.ticks(Q1.every(P));break;case"week":D.ticks(Iy[M].every(P));break;case"month":D.ticks(j1.every(P));break}}if(y.append("g").attr("class","grid").attr("transform","translate("+L+", "+(E-50)+")").call(D).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),a.db.topAxisEnabled()||i.topAxis){let P=DE(v).tickSize(-E+_+i.gridLineStartPadding).tickFormat(K1(a.db.getAxisFormat()||i.axisFormat||"%Y-%m-%d"));if(O!==null){const $=O[1],M=O[2],I=a.db.getWeekday()||i.weekday;switch(M){case"millisecond":P.ticks(ey.every($));break;case"second":P.ticks(ty.every($));break;case"minute":P.ticks(J1.every($));break;case"hour":P.ticks(Z1.every($));break;case"day":P.ticks(Q1.every($));break;case"week":P.ticks(Iy[I].every($));break;case"month":P.ticks(j1.every($));break}}y.append("g").attr("class","grid").attr("transform","translate("+L+", "+_+")").call(P).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}g(C,"makeGrid");function T(L,_){let A=0;const E=Object.keys(f).map(D=>[D,f[D]]);y.append("g").selectAll("text").data(E).enter().append(function(D){const R=D[0].split(Mt.lineBreakRegex),O=-(R.length-1)/2,P=l.createElementNS("http://www.w3.org/2000/svg","text");P.setAttribute("dy",O+"em");for(const[$,M]of R.entries()){const I=l.createElementNS("http://www.w3.org/2000/svg","tspan");I.setAttribute("alignment-baseline","central"),I.setAttribute("x","10"),$>0&&I.setAttribute("dy","1em"),I.textContent=M,P.appendChild(I)}return P}).attr("x",10).attr("y",function(D,R){if(R>0)for(let O=0;O<R;O++)return A+=E[R-1][1],D[1]*L/2+A*L+_;else return D[1]*L/2+_}).attr("font-size",i.sectionFontSize).attr("class",function(D){for(const[R,O]of d.entries())if(D[0]===O)return"sectionTitle sectionTitle"+R%i.numberSectionStyles;return"sectionTitle"})}g(T,"vertLabels");function k(L,_,A,E){const D=a.db.getTodayMarker();if(D==="off")return;const R=y.append("g").attr("class","today"),O=new Date,P=R.append("line");P.attr("x1",v(O)+L).attr("x2",v(O)+L).attr("y1",i.titleTopMargin).attr("y2",E-i.titleTopMargin).attr("class","today"),D!==""&&P.attr("style",D.replace(/,/g,";"))}g(k,"drawToday");function S(L){const _={},A=[];for(let E=0,D=L.length;E<D;++E)Object.prototype.hasOwnProperty.call(_,L[E])||(_[L[E]]=!0,A.push(L[E]));return A}g(S,"checkUnique")},"draw"),TR={setConf:bR,draw:kR},CR=g(e=>`
  .mermaid-main-font {
        font-family: ${e.fontFamily};
  }

  .exclude-range {
    fill: ${e.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${e.sectionBkgColor};
  }

  .section2 {
    fill: ${e.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${e.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${e.titleColor};
  }

  .sectionTitle1 {
    fill: ${e.titleColor};
  }

  .sectionTitle2 {
    fill: ${e.titleColor};
  }

  .sectionTitle3 {
    fill: ${e.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    font-family: ${e.fontFamily};
  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${e.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
  }

  .grid .tick text {
    font-family: ${e.fontFamily};
    fill: ${e.textColor};
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${e.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: ${e.fontFamily};
  }

  .taskTextOutsideRight {
    fill: ${e.taskTextDarkColor};
    text-anchor: start;
    font-family: ${e.fontFamily};
  }

  .taskTextOutsideLeft {
    fill: ${e.taskTextDarkColor};
    text-anchor: end;
  }


  /* Special case clickable */

  .task.clickable {
    cursor: pointer;
  }

  .taskText.clickable {
    cursor: pointer;
    fill: ${e.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${e.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${e.taskTextClickableColor} !important;
    font-weight: bold;
  }


  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${e.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${e.taskBkgColor};
    stroke: ${e.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${e.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${e.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${e.activeTaskBkgColor};
    stroke: ${e.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${e.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${e.doneTaskBorderColor};
    fill: ${e.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${e.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${e.critBorderColor};
    fill: ${e.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${e.critBorderColor};
    fill: ${e.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${e.critBorderColor};
    fill: ${e.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${e.taskTextDarkColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${e.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.titleColor||e.textColor};
    font-family: ${e.fontFamily};
  }
`,"getStyles"),SR=CR,ER={parser:FB,db:xR,renderer:TR,styles:SR};const _R=Object.freeze({__proto__:null,diagram:ER});var AR={parse:g(async e=>{const t=await Zn("info",e);G.debug(t)},"parse")},LR={version:$p.version},DR=g(()=>LR.version,"getVersion"),BR={getVersion:DR},RR=g((e,t,r)=>{G.debug(`rendering info diagram
`+e);const a=Ii(t);da(a,100,400,!0),a.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size",32).style("text-anchor","middle").text(`v${r}`)},"draw"),IR={draw:RR},PR={parser:AR,db:BR,renderer:IR};const NR=Object.freeze({__proto__:null,diagram:PR});var MR=Ee.pie,W0={sections:new Map,showData:!1},ih=W0.sections,G0=W0.showData,FR=structuredClone(MR),OR=g(()=>structuredClone(FR),"getConfig"),$R=g(()=>{ih=new Map,G0=W0.showData,xr()},"clear"),VR=g(({label:e,value:t})=>{ih.has(e)||(ih.set(e,t),G.debug(`added new section: ${e}, with value: ${t}`))},"addSection"),zR=g(()=>ih,"getSections"),qR=g(e=>{G0=e},"setShowData"),WR=g(()=>G0,"getShowData"),Fw={getConfig:OR,clear:$R,setDiagramTitle:Mr,getDiagramTitle:br,setAccTitle:vr,getAccTitle:Sr,setAccDescription:Er,getAccDescription:_r,addSection:VR,getSections:zR,setShowData:qR,getShowData:WR},GR=g((e,t)=>{Xo(e,t),t.setShowData(e.showData),e.sections.map(t.addSection)},"populateDb"),HR={parse:g(async e=>{const t=await Zn("pie",e);G.debug(t),GR(t,Fw)},"parse")},YR=g(e=>`
  .pieCircle{
    stroke: ${e.pieStrokeColor};
    stroke-width : ${e.pieStrokeWidth};
    opacity : ${e.pieOpacity};
  }
  .pieOuterCircle{
    stroke: ${e.pieOuterStrokeColor};
    stroke-width: ${e.pieOuterStrokeWidth};
    fill: none;
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${e.pieTitleTextSize};
    fill: ${e.pieTitleTextColor};
    font-family: ${e.fontFamily};
  }
  .slice {
    font-family: ${e.fontFamily};
    fill: ${e.pieSectionTextColor};
    font-size:${e.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${e.pieLegendTextColor};
    font-family: ${e.fontFamily};
    font-size: ${e.pieLegendTextSize};
  }
`,"getStyles"),UR=YR,XR=g(e=>{const t=[...e.entries()].map(a=>({label:a[0],value:a[1]})).sort((a,i)=>i.value-a.value);return BE().value(a=>a.value)(t)},"createPieArcs"),KR=g((e,t,r,a)=>{G.debug(`rendering pie chart
`+e);const i=a.db,n=dt(),s=Pa(i.getConfig(),n.pie),o=40,l=18,u=4,h=450,d=h,f=Ii(t),p=f.append("g");p.attr("transform","translate("+d/2+","+h/2+")");const{themeVariables:y}=n;let[v]=ln(y.pieOuterStrokeWidth);v??(v=2);const m=s.textPosition,x=Math.min(d,h)/2-o,b=So().innerRadius(0).outerRadius(x),w=So().innerRadius(x*m).outerRadius(x*m);p.append("circle").attr("cx",0).attr("cy",0).attr("r",x+v/2).attr("class","pieOuterCircle");const C=i.getSections(),T=XR(C),k=[y.pie1,y.pie2,y.pie3,y.pie4,y.pie5,y.pie6,y.pie7,y.pie8,y.pie9,y.pie10,y.pie11,y.pie12],S=ux(k);p.selectAll("mySlices").data(T).enter().append("path").attr("d",b).attr("fill",D=>S(D.data.label)).attr("class","pieCircle");let L=0;C.forEach(D=>{L+=D}),p.selectAll("mySlices").data(T).enter().append("text").text(D=>(D.data.value/L*100).toFixed(0)+"%").attr("transform",D=>"translate("+w.centroid(D)+")").style("text-anchor","middle").attr("class","slice"),p.append("text").text(i.getDiagramTitle()).attr("x",0).attr("y",-400/2).attr("class","pieTitleText");const _=p.selectAll(".legend").data(S.domain()).enter().append("g").attr("class","legend").attr("transform",(D,R)=>{const O=l+u,P=O*S.domain().length/2,$=12*l,M=R*O-P;return"translate("+$+","+M+")"});_.append("rect").attr("width",l).attr("height",l).style("fill",S).style("stroke",S),_.data(T).append("text").attr("x",l+u).attr("y",l-u).text(D=>{const{label:R,value:O}=D.data;return i.getShowData()?`${R} [${O}]`:R});const A=Math.max(..._.selectAll("text").nodes().map(D=>(D==null?void 0:D.getBoundingClientRect().width)??0)),E=d+o+l+u+A;f.attr("viewBox",`0 0 ${E} ${h}`),da(f,h,E,s.useMaxWidth)},"draw"),jR={draw:KR},QR={parser:HR,db:Fw,renderer:jR,styles:UR};const ZR=Object.freeze({__proto__:null,diagram:QR});var Zp=function(){var e=g(function(ft,B,et,Z){for(et=et||{},Z=ft.length;Z--;et[ft[Z]]=B);return et},"o"),t=[1,3],r=[1,4],a=[1,5],i=[1,6],n=[1,7],s=[1,4,5,10,12,13,14,18,25,35,37,39,41,42,48,50,51,52,53,54,55,56,57,60,61,63,64,65,66,67],o=[1,4,5,10,12,13,14,18,25,28,35,37,39,41,42,48,50,51,52,53,54,55,56,57,60,61,63,64,65,66,67],l=[55,56,57],u=[2,36],h=[1,37],d=[1,36],f=[1,38],p=[1,35],y=[1,43],v=[1,41],m=[1,14],x=[1,23],b=[1,18],w=[1,19],C=[1,20],T=[1,21],k=[1,22],S=[1,24],L=[1,25],_=[1,26],A=[1,27],E=[1,28],D=[1,29],R=[1,32],O=[1,33],P=[1,34],$=[1,39],M=[1,40],I=[1,42],F=[1,44],V=[1,62],N=[1,61],q=[4,5,8,10,12,13,14,18,44,47,49,55,56,57,63,64,65,66,67],U=[1,65],X=[1,66],lt=[1,67],J=[1,68],ct=[1,69],yt=[1,70],ut=[1,71],Q=[1,72],K=[1,73],j=[1,74],Y=[1,75],st=[1,76],W=[4,5,6,7,8,9,10,11,12,13,14,15,18],bt=[1,90],tt=[1,91],H=[1,92],Et=[1,99],nt=[1,93],Lt=[1,96],Dt=[1,94],At=[1,95],xt=[1,97],_t=[1,98],vt=[1,102],wt=[10,55,56,57],St=[4,5,6,8,10,11,13,17,18,19,20,55,56,57],at={trace:g(function(){},"trace"),yy:{},symbols_:{error:2,idStringToken:3,ALPHA:4,NUM:5,NODE_STRING:6,DOWN:7,MINUS:8,DEFAULT:9,COMMA:10,COLON:11,AMP:12,BRKT:13,MULT:14,UNICODE_TEXT:15,styleComponent:16,UNIT:17,SPACE:18,STYLE:19,PCT:20,idString:21,style:22,stylesOpt:23,classDefStatement:24,CLASSDEF:25,start:26,eol:27,QUADRANT:28,document:29,line:30,statement:31,axisDetails:32,quadrantDetails:33,points:34,title:35,title_value:36,acc_title:37,acc_title_value:38,acc_descr:39,acc_descr_value:40,acc_descr_multiline_value:41,section:42,text:43,point_start:44,point_x:45,point_y:46,class_name:47,"X-AXIS":48,"AXIS-TEXT-DELIMITER":49,"Y-AXIS":50,QUADRANT_1:51,QUADRANT_2:52,QUADRANT_3:53,QUADRANT_4:54,NEWLINE:55,SEMI:56,EOF:57,alphaNumToken:58,textNoTagsToken:59,STR:60,MD_STR:61,alphaNum:62,PUNCTUATION:63,PLUS:64,EQUALS:65,DOT:66,UNDERSCORE:67,$accept:0,$end:1},terminals_:{2:"error",4:"ALPHA",5:"NUM",6:"NODE_STRING",7:"DOWN",8:"MINUS",9:"DEFAULT",10:"COMMA",11:"COLON",12:"AMP",13:"BRKT",14:"MULT",15:"UNICODE_TEXT",17:"UNIT",18:"SPACE",19:"STYLE",20:"PCT",25:"CLASSDEF",28:"QUADRANT",35:"title",36:"title_value",37:"acc_title",38:"acc_title_value",39:"acc_descr",40:"acc_descr_value",41:"acc_descr_multiline_value",42:"section",44:"point_start",45:"point_x",46:"point_y",47:"class_name",48:"X-AXIS",49:"AXIS-TEXT-DELIMITER",50:"Y-AXIS",51:"QUADRANT_1",52:"QUADRANT_2",53:"QUADRANT_3",54:"QUADRANT_4",55:"NEWLINE",56:"SEMI",57:"EOF",60:"STR",61:"MD_STR",63:"PUNCTUATION",64:"PLUS",65:"EQUALS",66:"DOT",67:"UNDERSCORE"},productions_:[0,[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[21,1],[21,2],[22,1],[22,2],[23,1],[23,3],[24,5],[26,2],[26,2],[26,2],[29,0],[29,2],[30,2],[31,0],[31,1],[31,2],[31,1],[31,1],[31,1],[31,2],[31,2],[31,2],[31,1],[31,1],[34,4],[34,5],[34,5],[34,6],[32,4],[32,3],[32,2],[32,4],[32,3],[32,2],[33,2],[33,2],[33,2],[33,2],[27,1],[27,1],[27,1],[43,1],[43,2],[43,1],[43,1],[62,1],[62,2],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[59,1],[59,1],[59,1]],performAction:g(function(B,et,Z,ht,ot,pt,gt){var kt=pt.length-1;switch(ot){case 23:this.$=pt[kt];break;case 24:this.$=pt[kt-1]+""+pt[kt];break;case 26:this.$=pt[kt-1]+pt[kt];break;case 27:this.$=[pt[kt].trim()];break;case 28:pt[kt-2].push(pt[kt].trim()),this.$=pt[kt-2];break;case 29:this.$=pt[kt-4],ht.addClass(pt[kt-2],pt[kt]);break;case 37:this.$=[];break;case 42:this.$=pt[kt].trim(),ht.setDiagramTitle(this.$);break;case 43:this.$=pt[kt].trim(),ht.setAccTitle(this.$);break;case 44:case 45:this.$=pt[kt].trim(),ht.setAccDescription(this.$);break;case 46:ht.addSection(pt[kt].substr(8)),this.$=pt[kt].substr(8);break;case 47:ht.addPoint(pt[kt-3],"",pt[kt-1],pt[kt],[]);break;case 48:ht.addPoint(pt[kt-4],pt[kt-3],pt[kt-1],pt[kt],[]);break;case 49:ht.addPoint(pt[kt-4],"",pt[kt-2],pt[kt-1],pt[kt]);break;case 50:ht.addPoint(pt[kt-5],pt[kt-4],pt[kt-2],pt[kt-1],pt[kt]);break;case 51:ht.setXAxisLeftText(pt[kt-2]),ht.setXAxisRightText(pt[kt]);break;case 52:pt[kt-1].text+=" ⟶ ",ht.setXAxisLeftText(pt[kt-1]);break;case 53:ht.setXAxisLeftText(pt[kt]);break;case 54:ht.setYAxisBottomText(pt[kt-2]),ht.setYAxisTopText(pt[kt]);break;case 55:pt[kt-1].text+=" ⟶ ",ht.setYAxisBottomText(pt[kt-1]);break;case 56:ht.setYAxisBottomText(pt[kt]);break;case 57:ht.setQuadrant1Text(pt[kt]);break;case 58:ht.setQuadrant2Text(pt[kt]);break;case 59:ht.setQuadrant3Text(pt[kt]);break;case 60:ht.setQuadrant4Text(pt[kt]);break;case 64:this.$={text:pt[kt],type:"text"};break;case 65:this.$={text:pt[kt-1].text+""+pt[kt],type:pt[kt-1].type};break;case 66:this.$={text:pt[kt],type:"text"};break;case 67:this.$={text:pt[kt],type:"markdown"};break;case 68:this.$=pt[kt];break;case 69:this.$=pt[kt-1]+""+pt[kt];break}},"anonymous"),table:[{18:t,26:1,27:2,28:r,55:a,56:i,57:n},{1:[3]},{18:t,26:8,27:2,28:r,55:a,56:i,57:n},{18:t,26:9,27:2,28:r,55:a,56:i,57:n},e(s,[2,33],{29:10}),e(o,[2,61]),e(o,[2,62]),e(o,[2,63]),{1:[2,30]},{1:[2,31]},e(l,u,{30:11,31:12,24:13,32:15,33:16,34:17,43:30,58:31,1:[2,32],4:h,5:d,10:f,12:p,13:y,14:v,18:m,25:x,35:b,37:w,39:C,41:T,42:k,48:S,50:L,51:_,52:A,53:E,54:D,60:R,61:O,63:P,64:$,65:M,66:I,67:F}),e(s,[2,34]),{27:45,55:a,56:i,57:n},e(l,[2,37]),e(l,u,{24:13,32:15,33:16,34:17,43:30,58:31,31:46,4:h,5:d,10:f,12:p,13:y,14:v,18:m,25:x,35:b,37:w,39:C,41:T,42:k,48:S,50:L,51:_,52:A,53:E,54:D,60:R,61:O,63:P,64:$,65:M,66:I,67:F}),e(l,[2,39]),e(l,[2,40]),e(l,[2,41]),{36:[1,47]},{38:[1,48]},{40:[1,49]},e(l,[2,45]),e(l,[2,46]),{18:[1,50]},{4:h,5:d,10:f,12:p,13:y,14:v,43:51,58:31,60:R,61:O,63:P,64:$,65:M,66:I,67:F},{4:h,5:d,10:f,12:p,13:y,14:v,43:52,58:31,60:R,61:O,63:P,64:$,65:M,66:I,67:F},{4:h,5:d,10:f,12:p,13:y,14:v,43:53,58:31,60:R,61:O,63:P,64:$,65:M,66:I,67:F},{4:h,5:d,10:f,12:p,13:y,14:v,43:54,58:31,60:R,61:O,63:P,64:$,65:M,66:I,67:F},{4:h,5:d,10:f,12:p,13:y,14:v,43:55,58:31,60:R,61:O,63:P,64:$,65:M,66:I,67:F},{4:h,5:d,10:f,12:p,13:y,14:v,43:56,58:31,60:R,61:O,63:P,64:$,65:M,66:I,67:F},{4:h,5:d,8:V,10:f,12:p,13:y,14:v,18:N,44:[1,57],47:[1,58],58:60,59:59,63:P,64:$,65:M,66:I,67:F},e(q,[2,64]),e(q,[2,66]),e(q,[2,67]),e(q,[2,70]),e(q,[2,71]),e(q,[2,72]),e(q,[2,73]),e(q,[2,74]),e(q,[2,75]),e(q,[2,76]),e(q,[2,77]),e(q,[2,78]),e(q,[2,79]),e(q,[2,80]),e(s,[2,35]),e(l,[2,38]),e(l,[2,42]),e(l,[2,43]),e(l,[2,44]),{3:64,4:U,5:X,6:lt,7:J,8:ct,9:yt,10:ut,11:Q,12:K,13:j,14:Y,15:st,21:63},e(l,[2,53],{59:59,58:60,4:h,5:d,8:V,10:f,12:p,13:y,14:v,18:N,49:[1,77],63:P,64:$,65:M,66:I,67:F}),e(l,[2,56],{59:59,58:60,4:h,5:d,8:V,10:f,12:p,13:y,14:v,18:N,49:[1,78],63:P,64:$,65:M,66:I,67:F}),e(l,[2,57],{59:59,58:60,4:h,5:d,8:V,10:f,12:p,13:y,14:v,18:N,63:P,64:$,65:M,66:I,67:F}),e(l,[2,58],{59:59,58:60,4:h,5:d,8:V,10:f,12:p,13:y,14:v,18:N,63:P,64:$,65:M,66:I,67:F}),e(l,[2,59],{59:59,58:60,4:h,5:d,8:V,10:f,12:p,13:y,14:v,18:N,63:P,64:$,65:M,66:I,67:F}),e(l,[2,60],{59:59,58:60,4:h,5:d,8:V,10:f,12:p,13:y,14:v,18:N,63:P,64:$,65:M,66:I,67:F}),{45:[1,79]},{44:[1,80]},e(q,[2,65]),e(q,[2,81]),e(q,[2,82]),e(q,[2,83]),{3:82,4:U,5:X,6:lt,7:J,8:ct,9:yt,10:ut,11:Q,12:K,13:j,14:Y,15:st,18:[1,81]},e(W,[2,23]),e(W,[2,1]),e(W,[2,2]),e(W,[2,3]),e(W,[2,4]),e(W,[2,5]),e(W,[2,6]),e(W,[2,7]),e(W,[2,8]),e(W,[2,9]),e(W,[2,10]),e(W,[2,11]),e(W,[2,12]),e(l,[2,52],{58:31,43:83,4:h,5:d,10:f,12:p,13:y,14:v,60:R,61:O,63:P,64:$,65:M,66:I,67:F}),e(l,[2,55],{58:31,43:84,4:h,5:d,10:f,12:p,13:y,14:v,60:R,61:O,63:P,64:$,65:M,66:I,67:F}),{46:[1,85]},{45:[1,86]},{4:bt,5:tt,6:H,8:Et,11:nt,13:Lt,16:89,17:Dt,18:At,19:xt,20:_t,22:88,23:87},e(W,[2,24]),e(l,[2,51],{59:59,58:60,4:h,5:d,8:V,10:f,12:p,13:y,14:v,18:N,63:P,64:$,65:M,66:I,67:F}),e(l,[2,54],{59:59,58:60,4:h,5:d,8:V,10:f,12:p,13:y,14:v,18:N,63:P,64:$,65:M,66:I,67:F}),e(l,[2,47],{22:88,16:89,23:100,4:bt,5:tt,6:H,8:Et,11:nt,13:Lt,17:Dt,18:At,19:xt,20:_t}),{46:[1,101]},e(l,[2,29],{10:vt}),e(wt,[2,27],{16:103,4:bt,5:tt,6:H,8:Et,11:nt,13:Lt,17:Dt,18:At,19:xt,20:_t}),e(St,[2,25]),e(St,[2,13]),e(St,[2,14]),e(St,[2,15]),e(St,[2,16]),e(St,[2,17]),e(St,[2,18]),e(St,[2,19]),e(St,[2,20]),e(St,[2,21]),e(St,[2,22]),e(l,[2,49],{10:vt}),e(l,[2,48],{22:88,16:89,23:104,4:bt,5:tt,6:H,8:Et,11:nt,13:Lt,17:Dt,18:At,19:xt,20:_t}),{4:bt,5:tt,6:H,8:Et,11:nt,13:Lt,16:89,17:Dt,18:At,19:xt,20:_t,22:105},e(St,[2,26]),e(l,[2,50],{10:vt}),e(wt,[2,28],{16:103,4:bt,5:tt,6:H,8:Et,11:nt,13:Lt,17:Dt,18:At,19:xt,20:_t})],defaultActions:{8:[2,30],9:[2,31]},parseError:g(function(B,et){if(et.recoverable)this.trace(B);else{var Z=new Error(B);throw Z.hash=et,Z}},"parseError"),parse:g(function(B){var et=this,Z=[0],ht=[],ot=[null],pt=[],gt=this.table,kt="",Ft=0,Ht=0,Pt=2,Ot=1,Gt=pt.slice.call(arguments,1),Bt=Object.create(this.lexer),te={yy:{}};for(var ue in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ue)&&(te.yy[ue]=this.yy[ue]);Bt.setInput(B,te.yy),te.yy.lexer=Bt,te.yy.parser=this,typeof Bt.yylloc>"u"&&(Bt.yylloc={});var Ce=Bt.yylloc;pt.push(Ce);var Wt=Bt.options&&Bt.options.ranges;typeof te.yy.parseError=="function"?this.parseError=te.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function de(Te){Z.length=Z.length-2*Te,ot.length=ot.length-Te,pt.length=pt.length-Te}g(de,"popStack");function $t(){var Te;return Te=ht.pop()||Bt.lex()||Ot,typeof Te!="number"&&(Te instanceof Array&&(ht=Te,Te=ht.pop()),Te=et.symbols_[Te]||Te),Te}g($t,"lex");for(var Jt,jt,Qt,Yt,fe={},je,me,We,Ve;;){if(jt=Z[Z.length-1],this.defaultActions[jt]?Qt=this.defaultActions[jt]:((Jt===null||typeof Jt>"u")&&(Jt=$t()),Qt=gt[jt]&&gt[jt][Jt]),typeof Qt>"u"||!Qt.length||!Qt[0]){var Re="";Ve=[];for(je in gt[jt])this.terminals_[je]&&je>Pt&&Ve.push("'"+this.terminals_[je]+"'");Bt.showPosition?Re="Parse error on line "+(Ft+1)+`:
`+Bt.showPosition()+`
Expecting `+Ve.join(", ")+", got '"+(this.terminals_[Jt]||Jt)+"'":Re="Parse error on line "+(Ft+1)+": Unexpected "+(Jt==Ot?"end of input":"'"+(this.terminals_[Jt]||Jt)+"'"),this.parseError(Re,{text:Bt.match,token:this.terminals_[Jt]||Jt,line:Bt.yylineno,loc:Ce,expected:Ve})}if(Qt[0]instanceof Array&&Qt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+jt+", token: "+Jt);switch(Qt[0]){case 1:Z.push(Jt),ot.push(Bt.yytext),pt.push(Bt.yylloc),Z.push(Qt[1]),Jt=null,Ht=Bt.yyleng,kt=Bt.yytext,Ft=Bt.yylineno,Ce=Bt.yylloc;break;case 2:if(me=this.productions_[Qt[1]][1],fe.$=ot[ot.length-me],fe._$={first_line:pt[pt.length-(me||1)].first_line,last_line:pt[pt.length-1].last_line,first_column:pt[pt.length-(me||1)].first_column,last_column:pt[pt.length-1].last_column},Wt&&(fe._$.range=[pt[pt.length-(me||1)].range[0],pt[pt.length-1].range[1]]),Yt=this.performAction.apply(fe,[kt,Ht,Ft,te.yy,Qt[1],ot,pt].concat(Gt)),typeof Yt<"u")return Yt;me&&(Z=Z.slice(0,-1*me*2),ot=ot.slice(0,-1*me),pt=pt.slice(0,-1*me)),Z.push(this.productions_[Qt[1]][0]),ot.push(fe.$),pt.push(fe._$),We=gt[Z[Z.length-2]][Z[Z.length-1]],Z.push(We);break;case 3:return!0}}return!0},"parse")},Ct=function(){var ft={EOF:1,parseError:g(function(et,Z){if(this.yy.parser)this.yy.parser.parseError(et,Z);else throw new Error(et)},"parseError"),setInput:g(function(B,et){return this.yy=et||this.yy||{},this._input=B,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:g(function(){var B=this._input[0];this.yytext+=B,this.yyleng++,this.offset++,this.match+=B,this.matched+=B;var et=B.match(/(?:\r\n?|\n).*/g);return et?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),B},"input"),unput:g(function(B){var et=B.length,Z=B.split(/(?:\r\n?|\n)/g);this._input=B+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-et),this.offset-=et;var ht=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Z.length-1&&(this.yylineno-=Z.length-1);var ot=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Z?(Z.length===ht.length?this.yylloc.first_column:0)+ht[ht.length-Z.length].length-Z[0].length:this.yylloc.first_column-et},this.options.ranges&&(this.yylloc.range=[ot[0],ot[0]+this.yyleng-et]),this.yyleng=this.yytext.length,this},"unput"),more:g(function(){return this._more=!0,this},"more"),reject:g(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:g(function(B){this.unput(this.match.slice(B))},"less"),pastInput:g(function(){var B=this.matched.substr(0,this.matched.length-this.match.length);return(B.length>20?"...":"")+B.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:g(function(){var B=this.match;return B.length<20&&(B+=this._input.substr(0,20-B.length)),(B.substr(0,20)+(B.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:g(function(){var B=this.pastInput(),et=new Array(B.length+1).join("-");return B+this.upcomingInput()+`
`+et+"^"},"showPosition"),test_match:g(function(B,et){var Z,ht,ot;if(this.options.backtrack_lexer&&(ot={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ot.yylloc.range=this.yylloc.range.slice(0))),ht=B[0].match(/(?:\r\n?|\n).*/g),ht&&(this.yylineno+=ht.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ht?ht[ht.length-1].length-ht[ht.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+B[0].length},this.yytext+=B[0],this.match+=B[0],this.matches=B,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(B[0].length),this.matched+=B[0],Z=this.performAction.call(this,this.yy,this,et,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Z)return Z;if(this._backtrack){for(var pt in ot)this[pt]=ot[pt];return!1}return!1},"test_match"),next:g(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var B,et,Z,ht;this._more||(this.yytext="",this.match="");for(var ot=this._currentRules(),pt=0;pt<ot.length;pt++)if(Z=this._input.match(this.rules[ot[pt]]),Z&&(!et||Z[0].length>et[0].length)){if(et=Z,ht=pt,this.options.backtrack_lexer){if(B=this.test_match(Z,ot[pt]),B!==!1)return B;if(this._backtrack){et=!1;continue}else return!1}else if(!this.options.flex)break}return et?(B=this.test_match(et,ot[ht]),B!==!1?B:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:g(function(){var et=this.next();return et||this.lex()},"lex"),begin:g(function(et){this.conditionStack.push(et)},"begin"),popState:g(function(){var et=this.conditionStack.length-1;return et>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:g(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:g(function(et){return et=this.conditionStack.length-1-Math.abs(et||0),et>=0?this.conditionStack[et]:"INITIAL"},"topState"),pushState:g(function(et){this.begin(et)},"pushState"),stateStackSize:g(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:g(function(et,Z,ht,ot){switch(ht){case 0:break;case 1:break;case 2:return 55;case 3:break;case 4:return this.begin("title"),35;case 5:return this.popState(),"title_value";case 6:return this.begin("acc_title"),37;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),39;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 48;case 14:return 50;case 15:return 49;case 16:return 51;case 17:return 52;case 18:return 53;case 19:return 54;case 20:return 25;case 21:this.begin("md_string");break;case 22:return"MD_STR";case 23:this.popState();break;case 24:this.begin("string");break;case 25:this.popState();break;case 26:return"STR";case 27:this.begin("class_name");break;case 28:return this.popState(),47;case 29:return this.begin("point_start"),44;case 30:return this.begin("point_x"),45;case 31:this.popState();break;case 32:this.popState(),this.begin("point_y");break;case 33:return this.popState(),46;case 34:return 28;case 35:return 4;case 36:return 11;case 37:return 64;case 38:return 10;case 39:return 65;case 40:return 65;case 41:return 14;case 42:return 13;case 43:return 67;case 44:return 66;case 45:return 12;case 46:return 8;case 47:return 5;case 48:return 18;case 49:return 56;case 50:return 63;case 51:return 57}},"anonymous"),rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?: *x-axis *)/i,/^(?: *y-axis *)/i,/^(?: *--+> *)/i,/^(?: *quadrant-1 *)/i,/^(?: *quadrant-2 *)/i,/^(?: *quadrant-3 *)/i,/^(?: *quadrant-4 *)/i,/^(?:classDef\b)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?::::)/i,/^(?:^\w+)/i,/^(?:\s*:\s*\[\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?:\s*\] *)/i,/^(?:\s*,\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?: *quadrantChart *)/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s)/i,/^(?:;)/i,/^(?:[!"#$%&'*+,-.`?\\_/])/i,/^(?:$)/i],conditions:{class_name:{rules:[28],inclusive:!1},point_y:{rules:[33],inclusive:!1},point_x:{rules:[32],inclusive:!1},point_start:{rules:[30,31],inclusive:!1},acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},title:{rules:[5],inclusive:!1},md_string:{rules:[22,23],inclusive:!1},string:{rules:[25,26],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,6,8,10,13,14,15,16,17,18,19,20,21,24,27,29,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],inclusive:!0}}};return ft}();at.lexer=Ct;function z(){this.yy={}}return g(z,"Parser"),z.prototype=at,at.Parser=z,new z}();Zp.parser=Zp;var JR=Zp,Ur=Dh(),no,tI=(no=class{constructor(){this.classes=new Map,this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData()}getDefaultData(){return{titleText:"",quadrant1Text:"",quadrant2Text:"",quadrant3Text:"",quadrant4Text:"",xAxisLeftText:"",xAxisRightText:"",yAxisBottomText:"",yAxisTopText:"",points:[]}}getDefaultConfig(){var t,r,a,i,n,s,o,l,u,h,d,f,p,y,v,m,x,b;return{showXAxis:!0,showYAxis:!0,showTitle:!0,chartHeight:((t=Ee.quadrantChart)==null?void 0:t.chartWidth)||500,chartWidth:((r=Ee.quadrantChart)==null?void 0:r.chartHeight)||500,titlePadding:((a=Ee.quadrantChart)==null?void 0:a.titlePadding)||10,titleFontSize:((i=Ee.quadrantChart)==null?void 0:i.titleFontSize)||20,quadrantPadding:((n=Ee.quadrantChart)==null?void 0:n.quadrantPadding)||5,xAxisLabelPadding:((s=Ee.quadrantChart)==null?void 0:s.xAxisLabelPadding)||5,yAxisLabelPadding:((o=Ee.quadrantChart)==null?void 0:o.yAxisLabelPadding)||5,xAxisLabelFontSize:((l=Ee.quadrantChart)==null?void 0:l.xAxisLabelFontSize)||16,yAxisLabelFontSize:((u=Ee.quadrantChart)==null?void 0:u.yAxisLabelFontSize)||16,quadrantLabelFontSize:((h=Ee.quadrantChart)==null?void 0:h.quadrantLabelFontSize)||16,quadrantTextTopPadding:((d=Ee.quadrantChart)==null?void 0:d.quadrantTextTopPadding)||5,pointTextPadding:((f=Ee.quadrantChart)==null?void 0:f.pointTextPadding)||5,pointLabelFontSize:((p=Ee.quadrantChart)==null?void 0:p.pointLabelFontSize)||12,pointRadius:((y=Ee.quadrantChart)==null?void 0:y.pointRadius)||5,xAxisPosition:((v=Ee.quadrantChart)==null?void 0:v.xAxisPosition)||"top",yAxisPosition:((m=Ee.quadrantChart)==null?void 0:m.yAxisPosition)||"left",quadrantInternalBorderStrokeWidth:((x=Ee.quadrantChart)==null?void 0:x.quadrantInternalBorderStrokeWidth)||1,quadrantExternalBorderStrokeWidth:((b=Ee.quadrantChart)==null?void 0:b.quadrantExternalBorderStrokeWidth)||2}}getDefaultThemeConfig(){return{quadrant1Fill:Ur.quadrant1Fill,quadrant2Fill:Ur.quadrant2Fill,quadrant3Fill:Ur.quadrant3Fill,quadrant4Fill:Ur.quadrant4Fill,quadrant1TextFill:Ur.quadrant1TextFill,quadrant2TextFill:Ur.quadrant2TextFill,quadrant3TextFill:Ur.quadrant3TextFill,quadrant4TextFill:Ur.quadrant4TextFill,quadrantPointFill:Ur.quadrantPointFill,quadrantPointTextFill:Ur.quadrantPointTextFill,quadrantXAxisTextFill:Ur.quadrantXAxisTextFill,quadrantYAxisTextFill:Ur.quadrantYAxisTextFill,quadrantTitleFill:Ur.quadrantTitleFill,quadrantInternalBorderStrokeFill:Ur.quadrantInternalBorderStrokeFill,quadrantExternalBorderStrokeFill:Ur.quadrantExternalBorderStrokeFill}}clear(){this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData(),this.classes=new Map,G.info("clear called")}setData(t){this.data={...this.data,...t}}addPoints(t){this.data.points=[...t,...this.data.points]}addClass(t,r){this.classes.set(t,r)}setConfig(t){G.trace("setConfig called with: ",t),this.config={...this.config,...t}}setThemeConfig(t){G.trace("setThemeConfig called with: ",t),this.themeConfig={...this.themeConfig,...t}}calculateSpace(t,r,a,i){const n=this.config.xAxisLabelPadding*2+this.config.xAxisLabelFontSize,s={top:t==="top"&&r?n:0,bottom:t==="bottom"&&r?n:0},o=this.config.yAxisLabelPadding*2+this.config.yAxisLabelFontSize,l={left:this.config.yAxisPosition==="left"&&a?o:0,right:this.config.yAxisPosition==="right"&&a?o:0},u=this.config.titleFontSize+this.config.titlePadding*2,h={top:i?u:0},d=this.config.quadrantPadding+l.left,f=this.config.quadrantPadding+s.top+h.top,p=this.config.chartWidth-this.config.quadrantPadding*2-l.left-l.right,y=this.config.chartHeight-this.config.quadrantPadding*2-s.top-s.bottom-h.top,v=p/2,m=y/2;return{xAxisSpace:s,yAxisSpace:l,titleSpace:h,quadrantSpace:{quadrantLeft:d,quadrantTop:f,quadrantWidth:p,quadrantHalfWidth:v,quadrantHeight:y,quadrantHalfHeight:m}}}getAxisLabels(t,r,a,i){const{quadrantSpace:n,titleSpace:s}=i,{quadrantHalfHeight:o,quadrantHeight:l,quadrantLeft:u,quadrantHalfWidth:h,quadrantTop:d,quadrantWidth:f}=n,p=!!this.data.xAxisRightText,y=!!this.data.yAxisTopText,v=[];return this.data.xAxisLeftText&&r&&v.push({text:this.data.xAxisLeftText,fill:this.themeConfig.quadrantXAxisTextFill,x:u+(p?h/2:0),y:t==="top"?this.config.xAxisLabelPadding+s.top:this.config.xAxisLabelPadding+d+l+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:p?"center":"left",horizontalPos:"top",rotation:0}),this.data.xAxisRightText&&r&&v.push({text:this.data.xAxisRightText,fill:this.themeConfig.quadrantXAxisTextFill,x:u+h+(p?h/2:0),y:t==="top"?this.config.xAxisLabelPadding+s.top:this.config.xAxisLabelPadding+d+l+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:p?"center":"left",horizontalPos:"top",rotation:0}),this.data.yAxisBottomText&&a&&v.push({text:this.data.yAxisBottomText,fill:this.themeConfig.quadrantYAxisTextFill,x:this.config.yAxisPosition==="left"?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+u+f+this.config.quadrantPadding,y:d+l-(y?o/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:y?"center":"left",horizontalPos:"top",rotation:-90}),this.data.yAxisTopText&&a&&v.push({text:this.data.yAxisTopText,fill:this.themeConfig.quadrantYAxisTextFill,x:this.config.yAxisPosition==="left"?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+u+f+this.config.quadrantPadding,y:d+o-(y?o/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:y?"center":"left",horizontalPos:"top",rotation:-90}),v}getQuadrants(t){const{quadrantSpace:r}=t,{quadrantHalfHeight:a,quadrantLeft:i,quadrantHalfWidth:n,quadrantTop:s}=r,o=[{text:{text:this.data.quadrant1Text,fill:this.themeConfig.quadrant1TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i+n,y:s,width:n,height:a,fill:this.themeConfig.quadrant1Fill},{text:{text:this.data.quadrant2Text,fill:this.themeConfig.quadrant2TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i,y:s,width:n,height:a,fill:this.themeConfig.quadrant2Fill},{text:{text:this.data.quadrant3Text,fill:this.themeConfig.quadrant3TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i,y:s+a,width:n,height:a,fill:this.themeConfig.quadrant3Fill},{text:{text:this.data.quadrant4Text,fill:this.themeConfig.quadrant4TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i+n,y:s+a,width:n,height:a,fill:this.themeConfig.quadrant4Fill}];for(const l of o)l.text.x=l.x+l.width/2,this.data.points.length===0?(l.text.y=l.y+l.height/2,l.text.horizontalPos="middle"):(l.text.y=l.y+this.config.quadrantTextTopPadding,l.text.horizontalPos="top");return o}getQuadrantPoints(t){const{quadrantSpace:r}=t,{quadrantHeight:a,quadrantLeft:i,quadrantTop:n,quadrantWidth:s}=r,o=Fl().domain([0,1]).range([i,s+i]),l=Fl().domain([0,1]).range([a+n,n]);return this.data.points.map(h=>{const d=this.classes.get(h.className);return d&&(h={...d,...h}),{x:o(h.x),y:l(h.y),fill:h.color??this.themeConfig.quadrantPointFill,radius:h.radius??this.config.pointRadius,text:{text:h.text,fill:this.themeConfig.quadrantPointTextFill,x:o(h.x),y:l(h.y)+this.config.pointTextPadding,verticalPos:"center",horizontalPos:"top",fontSize:this.config.pointLabelFontSize,rotation:0},strokeColor:h.strokeColor??this.themeConfig.quadrantPointFill,strokeWidth:h.strokeWidth??"0px"}})}getBorders(t){const r=this.config.quadrantExternalBorderStrokeWidth/2,{quadrantSpace:a}=t,{quadrantHalfHeight:i,quadrantHeight:n,quadrantLeft:s,quadrantHalfWidth:o,quadrantTop:l,quadrantWidth:u}=a;return[{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:s-r,y1:l,x2:s+u+r,y2:l},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:s+u,y1:l+r,x2:s+u,y2:l+n-r},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:s-r,y1:l+n,x2:s+u+r,y2:l+n},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:s,y1:l+r,x2:s,y2:l+n-r},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:s+o,y1:l+r,x2:s+o,y2:l+n-r},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:s+r,y1:l+i,x2:s+u-r,y2:l+i}]}getTitle(t){if(t)return{text:this.data.titleText,fill:this.themeConfig.quadrantTitleFill,fontSize:this.config.titleFontSize,horizontalPos:"top",verticalPos:"center",rotation:0,y:this.config.titlePadding,x:this.config.chartWidth/2}}build(){const t=this.config.showXAxis&&!!(this.data.xAxisLeftText||this.data.xAxisRightText),r=this.config.showYAxis&&!!(this.data.yAxisTopText||this.data.yAxisBottomText),a=this.config.showTitle&&!!this.data.titleText,i=this.data.points.length>0?"bottom":this.config.xAxisPosition,n=this.calculateSpace(i,t,r,a);return{points:this.getQuadrantPoints(n),quadrants:this.getQuadrants(n),axisLabels:this.getAxisLabels(i,t,r,n),borderLines:this.getBorders(n),title:this.getTitle(a)}}},g(no,"QuadrantBuilder"),no),so,Vc=(so=class extends Error{constructor(t,r,a){super(`value for ${t} ${r} is invalid, please use a valid ${a}`),this.name="InvalidStyleError"}},g(so,"InvalidStyleError"),so);function Jp(e){return!/^#?([\dA-Fa-f]{6}|[\dA-Fa-f]{3})$/.test(e)}g(Jp,"validateHexCode");function Ow(e){return!/^\d+$/.test(e)}g(Ow,"validateNumber");function $w(e){return!/^\d+px$/.test(e)}g($w,"validateSizeInPixels");var eI=dt();function hi(e){return qe(e.trim(),eI)}g(hi,"textSanitizer");var Ir=new tI;function Vw(e){Ir.setData({quadrant1Text:hi(e.text)})}g(Vw,"setQuadrant1Text");function zw(e){Ir.setData({quadrant2Text:hi(e.text)})}g(zw,"setQuadrant2Text");function qw(e){Ir.setData({quadrant3Text:hi(e.text)})}g(qw,"setQuadrant3Text");function Ww(e){Ir.setData({quadrant4Text:hi(e.text)})}g(Ww,"setQuadrant4Text");function Gw(e){Ir.setData({xAxisLeftText:hi(e.text)})}g(Gw,"setXAxisLeftText");function Hw(e){Ir.setData({xAxisRightText:hi(e.text)})}g(Hw,"setXAxisRightText");function Yw(e){Ir.setData({yAxisTopText:hi(e.text)})}g(Yw,"setYAxisTopText");function Uw(e){Ir.setData({yAxisBottomText:hi(e.text)})}g(Uw,"setYAxisBottomText");function Wh(e){const t={};for(const r of e){const[a,i]=r.trim().split(/\s*:\s*/);if(a==="radius"){if(Ow(i))throw new Vc(a,i,"number");t.radius=parseInt(i)}else if(a==="color"){if(Jp(i))throw new Vc(a,i,"hex code");t.color=i}else if(a==="stroke-color"){if(Jp(i))throw new Vc(a,i,"hex code");t.strokeColor=i}else if(a==="stroke-width"){if($w(i))throw new Vc(a,i,"number of pixels (eg. 10px)");t.strokeWidth=i}else throw new Error(`style named ${a} is not supported.`)}return t}g(Wh,"parseStyles");function Xw(e,t,r,a,i){const n=Wh(i);Ir.addPoints([{x:r,y:a,text:hi(e.text),className:t,...n}])}g(Xw,"addPoint");function Kw(e,t){Ir.addClass(e,Wh(t))}g(Kw,"addClass");function jw(e){Ir.setConfig({chartWidth:e})}g(jw,"setWidth");function Qw(e){Ir.setConfig({chartHeight:e})}g(Qw,"setHeight");function Zw(){const e=dt(),{themeVariables:t,quadrantChart:r}=e;return r&&Ir.setConfig(r),Ir.setThemeConfig({quadrant1Fill:t.quadrant1Fill,quadrant2Fill:t.quadrant2Fill,quadrant3Fill:t.quadrant3Fill,quadrant4Fill:t.quadrant4Fill,quadrant1TextFill:t.quadrant1TextFill,quadrant2TextFill:t.quadrant2TextFill,quadrant3TextFill:t.quadrant3TextFill,quadrant4TextFill:t.quadrant4TextFill,quadrantPointFill:t.quadrantPointFill,quadrantPointTextFill:t.quadrantPointTextFill,quadrantXAxisTextFill:t.quadrantXAxisTextFill,quadrantYAxisTextFill:t.quadrantYAxisTextFill,quadrantExternalBorderStrokeFill:t.quadrantExternalBorderStrokeFill,quadrantInternalBorderStrokeFill:t.quadrantInternalBorderStrokeFill,quadrantTitleFill:t.quadrantTitleFill}),Ir.setData({titleText:br()}),Ir.build()}g(Zw,"getQuadrantData");var rI=g(function(){Ir.clear(),xr()},"clear"),aI={setWidth:jw,setHeight:Qw,setQuadrant1Text:Vw,setQuadrant2Text:zw,setQuadrant3Text:qw,setQuadrant4Text:Ww,setXAxisLeftText:Gw,setXAxisRightText:Hw,setYAxisTopText:Yw,setYAxisBottomText:Uw,parseStyles:Wh,addPoint:Xw,addClass:Kw,getQuadrantData:Zw,clear:rI,setAccTitle:vr,getAccTitle:Sr,setDiagramTitle:Mr,getDiagramTitle:br,getAccDescription:_r,setAccDescription:Er},iI=g((e,t,r,a)=>{var L,_,A;function i(E){return E==="top"?"hanging":"middle"}g(i,"getDominantBaseLine");function n(E){return E==="left"?"start":"middle"}g(n,"getTextAnchor");function s(E){return`translate(${E.x}, ${E.y}) rotate(${E.rotation||0})`}g(s,"getTransformation");const o=dt();G.debug(`Rendering quadrant chart
`+e);const l=o.securityLevel;let u;l==="sandbox"&&(u=It("#i"+t));const d=(l==="sandbox"?It(u.nodes()[0].contentDocument.body):It("body")).select(`[id="${t}"]`),f=d.append("g").attr("class","main"),p=((L=o.quadrantChart)==null?void 0:L.chartWidth)??500,y=((_=o.quadrantChart)==null?void 0:_.chartHeight)??500;da(d,y,p,((A=o.quadrantChart)==null?void 0:A.useMaxWidth)??!0),d.attr("viewBox","0 0 "+p+" "+y),a.db.setHeight(y),a.db.setWidth(p);const v=a.db.getQuadrantData(),m=f.append("g").attr("class","quadrants"),x=f.append("g").attr("class","border"),b=f.append("g").attr("class","data-points"),w=f.append("g").attr("class","labels"),C=f.append("g").attr("class","title");v.title&&C.append("text").attr("x",0).attr("y",0).attr("fill",v.title.fill).attr("font-size",v.title.fontSize).attr("dominant-baseline",i(v.title.horizontalPos)).attr("text-anchor",n(v.title.verticalPos)).attr("transform",s(v.title)).text(v.title.text),v.borderLines&&x.selectAll("line").data(v.borderLines).enter().append("line").attr("x1",E=>E.x1).attr("y1",E=>E.y1).attr("x2",E=>E.x2).attr("y2",E=>E.y2).style("stroke",E=>E.strokeFill).style("stroke-width",E=>E.strokeWidth);const T=m.selectAll("g.quadrant").data(v.quadrants).enter().append("g").attr("class","quadrant");T.append("rect").attr("x",E=>E.x).attr("y",E=>E.y).attr("width",E=>E.width).attr("height",E=>E.height).attr("fill",E=>E.fill),T.append("text").attr("x",0).attr("y",0).attr("fill",E=>E.text.fill).attr("font-size",E=>E.text.fontSize).attr("dominant-baseline",E=>i(E.text.horizontalPos)).attr("text-anchor",E=>n(E.text.verticalPos)).attr("transform",E=>s(E.text)).text(E=>E.text.text),w.selectAll("g.label").data(v.axisLabels).enter().append("g").attr("class","label").append("text").attr("x",0).attr("y",0).text(E=>E.text).attr("fill",E=>E.fill).attr("font-size",E=>E.fontSize).attr("dominant-baseline",E=>i(E.horizontalPos)).attr("text-anchor",E=>n(E.verticalPos)).attr("transform",E=>s(E));const S=b.selectAll("g.data-point").data(v.points).enter().append("g").attr("class","data-point");S.append("circle").attr("cx",E=>E.x).attr("cy",E=>E.y).attr("r",E=>E.radius).attr("fill",E=>E.fill).attr("stroke",E=>E.strokeColor).attr("stroke-width",E=>E.strokeWidth),S.append("text").attr("x",0).attr("y",0).text(E=>E.text.text).attr("fill",E=>E.text.fill).attr("font-size",E=>E.text.fontSize).attr("dominant-baseline",E=>i(E.text.horizontalPos)).attr("text-anchor",E=>n(E.text.verticalPos)).attr("transform",E=>s(E.text))},"draw"),nI={draw:iI},sI={parser:JR,db:aI,renderer:nI,styles:g(()=>"","styles")};const oI=Object.freeze({__proto__:null,diagram:sI});var tg=function(){var e=g(function(P,$,M,I){for(M=M||{},I=P.length;I--;M[P[I]]=$);return M},"o"),t=[1,10,12,14,16,18,19,21,23],r=[2,6],a=[1,3],i=[1,5],n=[1,6],s=[1,7],o=[1,5,10,12,14,16,18,19,21,23,34,35,36],l=[1,25],u=[1,26],h=[1,28],d=[1,29],f=[1,30],p=[1,31],y=[1,32],v=[1,33],m=[1,34],x=[1,35],b=[1,36],w=[1,37],C=[1,43],T=[1,42],k=[1,47],S=[1,50],L=[1,10,12,14,16,18,19,21,23,34,35,36],_=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36],A=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36,41,42,43,44,45,46,47,48,49,50],E=[1,64],D={trace:g(function(){},"trace"),yy:{},symbols_:{error:2,start:3,eol:4,XYCHART:5,chartConfig:6,document:7,CHART_ORIENTATION:8,statement:9,title:10,text:11,X_AXIS:12,parseXAxis:13,Y_AXIS:14,parseYAxis:15,LINE:16,plotData:17,BAR:18,acc_title:19,acc_title_value:20,acc_descr:21,acc_descr_value:22,acc_descr_multiline_value:23,SQUARE_BRACES_START:24,commaSeparatedNumbers:25,SQUARE_BRACES_END:26,NUMBER_WITH_DECIMAL:27,COMMA:28,xAxisData:29,bandData:30,ARROW_DELIMITER:31,commaSeparatedTexts:32,yAxisData:33,NEWLINE:34,SEMI:35,EOF:36,alphaNum:37,STR:38,MD_STR:39,alphaNumToken:40,AMP:41,NUM:42,ALPHA:43,PLUS:44,EQUALS:45,MULT:46,DOT:47,BRKT:48,MINUS:49,UNDERSCORE:50,$accept:0,$end:1},terminals_:{2:"error",5:"XYCHART",8:"CHART_ORIENTATION",10:"title",12:"X_AXIS",14:"Y_AXIS",16:"LINE",18:"BAR",19:"acc_title",20:"acc_title_value",21:"acc_descr",22:"acc_descr_value",23:"acc_descr_multiline_value",24:"SQUARE_BRACES_START",26:"SQUARE_BRACES_END",27:"NUMBER_WITH_DECIMAL",28:"COMMA",31:"ARROW_DELIMITER",34:"NEWLINE",35:"SEMI",36:"EOF",38:"STR",39:"MD_STR",41:"AMP",42:"NUM",43:"ALPHA",44:"PLUS",45:"EQUALS",46:"MULT",47:"DOT",48:"BRKT",49:"MINUS",50:"UNDERSCORE"},productions_:[0,[3,2],[3,3],[3,2],[3,1],[6,1],[7,0],[7,2],[9,2],[9,2],[9,2],[9,2],[9,2],[9,3],[9,2],[9,3],[9,2],[9,2],[9,1],[17,3],[25,3],[25,1],[13,1],[13,2],[13,1],[29,1],[29,3],[30,3],[32,3],[32,1],[15,1],[15,2],[15,1],[33,3],[4,1],[4,1],[4,1],[11,1],[11,1],[11,1],[37,1],[37,2],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1]],performAction:g(function($,M,I,F,V,N,q){var U=N.length-1;switch(V){case 5:F.setOrientation(N[U]);break;case 9:F.setDiagramTitle(N[U].text.trim());break;case 12:F.setLineData({text:"",type:"text"},N[U]);break;case 13:F.setLineData(N[U-1],N[U]);break;case 14:F.setBarData({text:"",type:"text"},N[U]);break;case 15:F.setBarData(N[U-1],N[U]);break;case 16:this.$=N[U].trim(),F.setAccTitle(this.$);break;case 17:case 18:this.$=N[U].trim(),F.setAccDescription(this.$);break;case 19:this.$=N[U-1];break;case 20:this.$=[Number(N[U-2]),...N[U]];break;case 21:this.$=[Number(N[U])];break;case 22:F.setXAxisTitle(N[U]);break;case 23:F.setXAxisTitle(N[U-1]);break;case 24:F.setXAxisTitle({type:"text",text:""});break;case 25:F.setXAxisBand(N[U]);break;case 26:F.setXAxisRangeData(Number(N[U-2]),Number(N[U]));break;case 27:this.$=N[U-1];break;case 28:this.$=[N[U-2],...N[U]];break;case 29:this.$=[N[U]];break;case 30:F.setYAxisTitle(N[U]);break;case 31:F.setYAxisTitle(N[U-1]);break;case 32:F.setYAxisTitle({type:"text",text:""});break;case 33:F.setYAxisRangeData(Number(N[U-2]),Number(N[U]));break;case 37:this.$={text:N[U],type:"text"};break;case 38:this.$={text:N[U],type:"text"};break;case 39:this.$={text:N[U],type:"markdown"};break;case 40:this.$=N[U];break;case 41:this.$=N[U-1]+""+N[U];break}},"anonymous"),table:[e(t,r,{3:1,4:2,7:4,5:a,34:i,35:n,36:s}),{1:[3]},e(t,r,{4:2,7:4,3:8,5:a,34:i,35:n,36:s}),e(t,r,{4:2,7:4,6:9,3:10,5:a,8:[1,11],34:i,35:n,36:s}),{1:[2,4],9:12,10:[1,13],12:[1,14],14:[1,15],16:[1,16],18:[1,17],19:[1,18],21:[1,19],23:[1,20]},e(o,[2,34]),e(o,[2,35]),e(o,[2,36]),{1:[2,1]},e(t,r,{4:2,7:4,3:21,5:a,34:i,35:n,36:s}),{1:[2,3]},e(o,[2,5]),e(t,[2,7],{4:22,34:i,35:n,36:s}),{11:23,37:24,38:l,39:u,40:27,41:h,42:d,43:f,44:p,45:y,46:v,47:m,48:x,49:b,50:w},{11:39,13:38,24:C,27:T,29:40,30:41,37:24,38:l,39:u,40:27,41:h,42:d,43:f,44:p,45:y,46:v,47:m,48:x,49:b,50:w},{11:45,15:44,27:k,33:46,37:24,38:l,39:u,40:27,41:h,42:d,43:f,44:p,45:y,46:v,47:m,48:x,49:b,50:w},{11:49,17:48,24:S,37:24,38:l,39:u,40:27,41:h,42:d,43:f,44:p,45:y,46:v,47:m,48:x,49:b,50:w},{11:52,17:51,24:S,37:24,38:l,39:u,40:27,41:h,42:d,43:f,44:p,45:y,46:v,47:m,48:x,49:b,50:w},{20:[1,53]},{22:[1,54]},e(L,[2,18]),{1:[2,2]},e(L,[2,8]),e(L,[2,9]),e(_,[2,37],{40:55,41:h,42:d,43:f,44:p,45:y,46:v,47:m,48:x,49:b,50:w}),e(_,[2,38]),e(_,[2,39]),e(A,[2,40]),e(A,[2,42]),e(A,[2,43]),e(A,[2,44]),e(A,[2,45]),e(A,[2,46]),e(A,[2,47]),e(A,[2,48]),e(A,[2,49]),e(A,[2,50]),e(A,[2,51]),e(L,[2,10]),e(L,[2,22],{30:41,29:56,24:C,27:T}),e(L,[2,24]),e(L,[2,25]),{31:[1,57]},{11:59,32:58,37:24,38:l,39:u,40:27,41:h,42:d,43:f,44:p,45:y,46:v,47:m,48:x,49:b,50:w},e(L,[2,11]),e(L,[2,30],{33:60,27:k}),e(L,[2,32]),{31:[1,61]},e(L,[2,12]),{17:62,24:S},{25:63,27:E},e(L,[2,14]),{17:65,24:S},e(L,[2,16]),e(L,[2,17]),e(A,[2,41]),e(L,[2,23]),{27:[1,66]},{26:[1,67]},{26:[2,29],28:[1,68]},e(L,[2,31]),{27:[1,69]},e(L,[2,13]),{26:[1,70]},{26:[2,21],28:[1,71]},e(L,[2,15]),e(L,[2,26]),e(L,[2,27]),{11:59,32:72,37:24,38:l,39:u,40:27,41:h,42:d,43:f,44:p,45:y,46:v,47:m,48:x,49:b,50:w},e(L,[2,33]),e(L,[2,19]),{25:73,27:E},{26:[2,28]},{26:[2,20]}],defaultActions:{8:[2,1],10:[2,3],21:[2,2],72:[2,28],73:[2,20]},parseError:g(function($,M){if(M.recoverable)this.trace($);else{var I=new Error($);throw I.hash=M,I}},"parseError"),parse:g(function($){var M=this,I=[0],F=[],V=[null],N=[],q=this.table,U="",X=0,lt=0,J=2,ct=1,yt=N.slice.call(arguments,1),ut=Object.create(this.lexer),Q={yy:{}};for(var K in this.yy)Object.prototype.hasOwnProperty.call(this.yy,K)&&(Q.yy[K]=this.yy[K]);ut.setInput($,Q.yy),Q.yy.lexer=ut,Q.yy.parser=this,typeof ut.yylloc>"u"&&(ut.yylloc={});var j=ut.yylloc;N.push(j);var Y=ut.options&&ut.options.ranges;typeof Q.yy.parseError=="function"?this.parseError=Q.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function st(vt){I.length=I.length-2*vt,V.length=V.length-vt,N.length=N.length-vt}g(st,"popStack");function W(){var vt;return vt=F.pop()||ut.lex()||ct,typeof vt!="number"&&(vt instanceof Array&&(F=vt,vt=F.pop()),vt=M.symbols_[vt]||vt),vt}g(W,"lex");for(var bt,tt,H,Et,nt={},Lt,Dt,At,xt;;){if(tt=I[I.length-1],this.defaultActions[tt]?H=this.defaultActions[tt]:((bt===null||typeof bt>"u")&&(bt=W()),H=q[tt]&&q[tt][bt]),typeof H>"u"||!H.length||!H[0]){var _t="";xt=[];for(Lt in q[tt])this.terminals_[Lt]&&Lt>J&&xt.push("'"+this.terminals_[Lt]+"'");ut.showPosition?_t="Parse error on line "+(X+1)+`:
`+ut.showPosition()+`
Expecting `+xt.join(", ")+", got '"+(this.terminals_[bt]||bt)+"'":_t="Parse error on line "+(X+1)+": Unexpected "+(bt==ct?"end of input":"'"+(this.terminals_[bt]||bt)+"'"),this.parseError(_t,{text:ut.match,token:this.terminals_[bt]||bt,line:ut.yylineno,loc:j,expected:xt})}if(H[0]instanceof Array&&H.length>1)throw new Error("Parse Error: multiple actions possible at state: "+tt+", token: "+bt);switch(H[0]){case 1:I.push(bt),V.push(ut.yytext),N.push(ut.yylloc),I.push(H[1]),bt=null,lt=ut.yyleng,U=ut.yytext,X=ut.yylineno,j=ut.yylloc;break;case 2:if(Dt=this.productions_[H[1]][1],nt.$=V[V.length-Dt],nt._$={first_line:N[N.length-(Dt||1)].first_line,last_line:N[N.length-1].last_line,first_column:N[N.length-(Dt||1)].first_column,last_column:N[N.length-1].last_column},Y&&(nt._$.range=[N[N.length-(Dt||1)].range[0],N[N.length-1].range[1]]),Et=this.performAction.apply(nt,[U,lt,X,Q.yy,H[1],V,N].concat(yt)),typeof Et<"u")return Et;Dt&&(I=I.slice(0,-1*Dt*2),V=V.slice(0,-1*Dt),N=N.slice(0,-1*Dt)),I.push(this.productions_[H[1]][0]),V.push(nt.$),N.push(nt._$),At=q[I[I.length-2]][I[I.length-1]],I.push(At);break;case 3:return!0}}return!0},"parse")},R=function(){var P={EOF:1,parseError:g(function(M,I){if(this.yy.parser)this.yy.parser.parseError(M,I);else throw new Error(M)},"parseError"),setInput:g(function($,M){return this.yy=M||this.yy||{},this._input=$,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:g(function(){var $=this._input[0];this.yytext+=$,this.yyleng++,this.offset++,this.match+=$,this.matched+=$;var M=$.match(/(?:\r\n?|\n).*/g);return M?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),$},"input"),unput:g(function($){var M=$.length,I=$.split(/(?:\r\n?|\n)/g);this._input=$+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-M),this.offset-=M;var F=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),I.length-1&&(this.yylineno-=I.length-1);var V=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:I?(I.length===F.length?this.yylloc.first_column:0)+F[F.length-I.length].length-I[0].length:this.yylloc.first_column-M},this.options.ranges&&(this.yylloc.range=[V[0],V[0]+this.yyleng-M]),this.yyleng=this.yytext.length,this},"unput"),more:g(function(){return this._more=!0,this},"more"),reject:g(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:g(function($){this.unput(this.match.slice($))},"less"),pastInput:g(function(){var $=this.matched.substr(0,this.matched.length-this.match.length);return($.length>20?"...":"")+$.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:g(function(){var $=this.match;return $.length<20&&($+=this._input.substr(0,20-$.length)),($.substr(0,20)+($.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:g(function(){var $=this.pastInput(),M=new Array($.length+1).join("-");return $+this.upcomingInput()+`
`+M+"^"},"showPosition"),test_match:g(function($,M){var I,F,V;if(this.options.backtrack_lexer&&(V={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(V.yylloc.range=this.yylloc.range.slice(0))),F=$[0].match(/(?:\r\n?|\n).*/g),F&&(this.yylineno+=F.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:F?F[F.length-1].length-F[F.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+$[0].length},this.yytext+=$[0],this.match+=$[0],this.matches=$,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice($[0].length),this.matched+=$[0],I=this.performAction.call(this,this.yy,this,M,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),I)return I;if(this._backtrack){for(var N in V)this[N]=V[N];return!1}return!1},"test_match"),next:g(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var $,M,I,F;this._more||(this.yytext="",this.match="");for(var V=this._currentRules(),N=0;N<V.length;N++)if(I=this._input.match(this.rules[V[N]]),I&&(!M||I[0].length>M[0].length)){if(M=I,F=N,this.options.backtrack_lexer){if($=this.test_match(I,V[N]),$!==!1)return $;if(this._backtrack){M=!1;continue}else return!1}else if(!this.options.flex)break}return M?($=this.test_match(M,V[F]),$!==!1?$:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:g(function(){var M=this.next();return M||this.lex()},"lex"),begin:g(function(M){this.conditionStack.push(M)},"begin"),popState:g(function(){var M=this.conditionStack.length-1;return M>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:g(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:g(function(M){return M=this.conditionStack.length-1-Math.abs(M||0),M>=0?this.conditionStack[M]:"INITIAL"},"topState"),pushState:g(function(M){this.begin(M)},"pushState"),stateStackSize:g(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:g(function(M,I,F,V){switch(F){case 0:break;case 1:break;case 2:return this.popState(),34;case 3:return this.popState(),34;case 4:return 34;case 5:break;case 6:return 10;case 7:return this.pushState("acc_title"),19;case 8:return this.popState(),"acc_title_value";case 9:return this.pushState("acc_descr"),21;case 10:return this.popState(),"acc_descr_value";case 11:this.pushState("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 5;case 15:return 8;case 16:return this.pushState("axis_data"),"X_AXIS";case 17:return this.pushState("axis_data"),"Y_AXIS";case 18:return this.pushState("axis_band_data"),24;case 19:return 31;case 20:return this.pushState("data"),16;case 21:return this.pushState("data"),18;case 22:return this.pushState("data_inner"),24;case 23:return 27;case 24:return this.popState(),26;case 25:this.popState();break;case 26:this.pushState("string");break;case 27:this.popState();break;case 28:return"STR";case 29:return 24;case 30:return 26;case 31:return 43;case 32:return"COLON";case 33:return 44;case 34:return 28;case 35:return 45;case 36:return 46;case 37:return 48;case 38:return 50;case 39:return 47;case 40:return 41;case 41:return 49;case 42:return 42;case 43:break;case 44:return 35;case 45:return 36}},"anonymous"),rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:(\r?\n))/i,/^(?:(\r?\n))/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:\{)/i,/^(?:[^\}]*)/i,/^(?:xychart-beta\b)/i,/^(?:(?:vertical|horizontal))/i,/^(?:x-axis\b)/i,/^(?:y-axis\b)/i,/^(?:\[)/i,/^(?:-->)/i,/^(?:line\b)/i,/^(?:bar\b)/i,/^(?:\[)/i,/^(?:[+-]?(?:\d+(?:\.\d+)?|\.\d+))/i,/^(?:\])/i,/^(?:(?:`\)                                    \{ this\.pushState\(md_string\); \}\n<md_string>\(\?:\(\?!`"\)\.\)\+                  \{ return MD_STR; \}\n<md_string>\(\?:`))/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s+)/i,/^(?:;)/i,/^(?:$)/i],conditions:{data_inner:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,23,24,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},data:{rules:[0,1,3,4,5,6,7,9,11,14,15,16,17,20,21,22,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},axis_band_data:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,24,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},axis_data:{rules:[0,1,2,4,5,6,7,9,11,14,15,16,17,18,19,20,21,23,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},title:{rules:[],inclusive:!1},md_string:{rules:[],inclusive:!1},string:{rules:[27,28],inclusive:!1},INITIAL:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0}}};return P}();D.lexer=R;function O(){this.yy={}}return g(O,"Parser"),O.prototype=D,D.Parser=O,new O}();tg.parser=tg;var lI=tg;function eg(e){return e.type==="bar"}g(eg,"isBarPlot");function H0(e){return e.type==="band"}g(H0,"isBandAxisData");function _s(e){return e.type==="linear"}g(_s,"isLinearAxisData");var oo,Jw=(oo=class{constructor(t){this.parentGroup=t}getMaxDimension(t,r){if(!this.parentGroup)return{width:t.reduce((n,s)=>Math.max(s.length,n),0)*r,height:r};const a={width:0,height:0},i=this.parentGroup.append("g").attr("visibility","hidden").attr("font-size",r);for(const n of t){const s=R4(i,1,n),o=s?s.width:n.length*r,l=s?s.height:r;a.width=Math.max(a.width,o),a.height=Math.max(a.height,l)}return i.remove(),a}},g(oo,"TextDimensionCalculatorWithFont"),oo),Py=.7,Ny=.2,lo,tk=(lo=class{constructor(t,r,a,i){this.axisConfig=t,this.title=r,this.textDimensionCalculator=a,this.axisThemeConfig=i,this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left",this.showTitle=!1,this.showLabel=!1,this.showTick=!1,this.showAxisLine=!1,this.outerPadding=0,this.titleTextHeight=0,this.labelTextHeight=0,this.range=[0,10],this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left"}setRange(t){this.range=t,this.axisPosition==="left"||this.axisPosition==="right"?this.boundingRect.height=t[1]-t[0]:this.boundingRect.width=t[1]-t[0],this.recalculateScale()}getRange(){return[this.range[0]+this.outerPadding,this.range[1]-this.outerPadding]}setAxisPosition(t){this.axisPosition=t,this.setRange(this.range)}getTickDistance(){const t=this.getRange();return Math.abs(t[0]-t[1])/this.getTickValues().length}getAxisOuterPadding(){return this.outerPadding}getLabelDimension(){return this.textDimensionCalculator.getMaxDimension(this.getTickValues().map(t=>t.toString()),this.axisConfig.labelFontSize)}recalculateOuterPaddingToDrawBar(){Py*this.getTickDistance()>this.outerPadding*2&&(this.outerPadding=Math.floor(Py*this.getTickDistance()/2)),this.recalculateScale()}calculateSpaceIfDrawnHorizontally(t){let r=t.height;if(this.axisConfig.showAxisLine&&r>this.axisConfig.axisLineWidth&&(r-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const a=this.getLabelDimension(),i=Ny*t.width;this.outerPadding=Math.min(a.width/2,i);const n=a.height+this.axisConfig.labelPadding*2;this.labelTextHeight=a.height,n<=r&&(r-=n,this.showLabel=!0)}if(this.axisConfig.showTick&&r>=this.axisConfig.tickLength&&(this.showTick=!0,r-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const a=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),i=a.height+this.axisConfig.titlePadding*2;this.titleTextHeight=a.height,i<=r&&(r-=i,this.showTitle=!0)}this.boundingRect.width=t.width,this.boundingRect.height=t.height-r}calculateSpaceIfDrawnVertical(t){let r=t.width;if(this.axisConfig.showAxisLine&&r>this.axisConfig.axisLineWidth&&(r-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const a=this.getLabelDimension(),i=Ny*t.height;this.outerPadding=Math.min(a.height/2,i);const n=a.width+this.axisConfig.labelPadding*2;n<=r&&(r-=n,this.showLabel=!0)}if(this.axisConfig.showTick&&r>=this.axisConfig.tickLength&&(this.showTick=!0,r-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const a=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),i=a.height+this.axisConfig.titlePadding*2;this.titleTextHeight=a.height,i<=r&&(r-=i,this.showTitle=!0)}this.boundingRect.width=t.width-r,this.boundingRect.height=t.height}calculateSpace(t){return this.axisPosition==="left"||this.axisPosition==="right"?this.calculateSpaceIfDrawnVertical(t):this.calculateSpaceIfDrawnHorizontally(t),this.recalculateScale(),{width:this.boundingRect.width,height:this.boundingRect.height}}setBoundingBoxXY(t){this.boundingRect.x=t.x,this.boundingRect.y=t.y}getDrawableElementsForLeftAxis(){const t=[];if(this.showAxisLine){const r=this.boundingRect.x+this.boundingRect.width-this.axisConfig.axisLineWidth/2;t.push({type:"path",groupTexts:["left-axis","axisl-line"],data:[{path:`M ${r},${this.boundingRect.y} L ${r},${this.boundingRect.y+this.boundingRect.height} `,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&t.push({type:"text",groupTexts:["left-axis","label"],data:this.getTickValues().map(r=>({text:r.toString(),x:this.boundingRect.x+this.boundingRect.width-(this.showLabel?this.axisConfig.labelPadding:0)-(this.showTick?this.axisConfig.tickLength:0)-(this.showAxisLine?this.axisConfig.axisLineWidth:0),y:this.getScaleValue(r),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"middle",horizontalPos:"right"}))}),this.showTick){const r=this.boundingRect.x+this.boundingRect.width-(this.showAxisLine?this.axisConfig.axisLineWidth:0);t.push({type:"path",groupTexts:["left-axis","ticks"],data:this.getTickValues().map(a=>({path:`M ${r},${this.getScaleValue(a)} L ${r-this.axisConfig.tickLength},${this.getScaleValue(a)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&t.push({type:"text",groupTexts:["left-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.axisConfig.titlePadding,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:270,verticalPos:"top",horizontalPos:"center"}]}),t}getDrawableElementsForBottomAxis(){const t=[];if(this.showAxisLine){const r=this.boundingRect.y+this.axisConfig.axisLineWidth/2;t.push({type:"path",groupTexts:["bottom-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${r} L ${this.boundingRect.x+this.boundingRect.width},${r}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&t.push({type:"text",groupTexts:["bottom-axis","label"],data:this.getTickValues().map(r=>({text:r.toString(),x:this.getScaleValue(r),y:this.boundingRect.y+this.axisConfig.labelPadding+(this.showTick?this.axisConfig.tickLength:0)+(this.showAxisLine?this.axisConfig.axisLineWidth:0),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const r=this.boundingRect.y+(this.showAxisLine?this.axisConfig.axisLineWidth:0);t.push({type:"path",groupTexts:["bottom-axis","ticks"],data:this.getTickValues().map(a=>({path:`M ${this.getScaleValue(a)},${r} L ${this.getScaleValue(a)},${r+this.axisConfig.tickLength}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&t.push({type:"text",groupTexts:["bottom-axis","title"],data:[{text:this.title,x:this.range[0]+(this.range[1]-this.range[0])/2,y:this.boundingRect.y+this.boundingRect.height-this.axisConfig.titlePadding-this.titleTextHeight,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),t}getDrawableElementsForTopAxis(){const t=[];if(this.showAxisLine){const r=this.boundingRect.y+this.boundingRect.height-this.axisConfig.axisLineWidth/2;t.push({type:"path",groupTexts:["top-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${r} L ${this.boundingRect.x+this.boundingRect.width},${r}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&t.push({type:"text",groupTexts:["top-axis","label"],data:this.getTickValues().map(r=>({text:r.toString(),x:this.getScaleValue(r),y:this.boundingRect.y+(this.showTitle?this.titleTextHeight+this.axisConfig.titlePadding*2:0)+this.axisConfig.labelPadding,fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const r=this.boundingRect.y;t.push({type:"path",groupTexts:["top-axis","ticks"],data:this.getTickValues().map(a=>({path:`M ${this.getScaleValue(a)},${r+this.boundingRect.height-(this.showAxisLine?this.axisConfig.axisLineWidth:0)} L ${this.getScaleValue(a)},${r+this.boundingRect.height-this.axisConfig.tickLength-(this.showAxisLine?this.axisConfig.axisLineWidth:0)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&t.push({type:"text",groupTexts:["top-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.axisConfig.titlePadding,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),t}getDrawableElements(){if(this.axisPosition==="left")return this.getDrawableElementsForLeftAxis();if(this.axisPosition==="right")throw Error("Drawing of right axis is not implemented");return this.axisPosition==="bottom"?this.getDrawableElementsForBottomAxis():this.axisPosition==="top"?this.getDrawableElementsForTopAxis():[]}},g(lo,"BaseAxis"),lo),co,cI=(co=class extends tk{constructor(t,r,a,i,n){super(t,i,n,r),this.categories=a,this.scale=ry().domain(this.categories).range(this.getRange())}setRange(t){super.setRange(t)}recalculateScale(){this.scale=ry().domain(this.categories).range(this.getRange()).paddingInner(1).paddingOuter(0).align(.5),G.trace("BandAxis axis final categories, range: ",this.categories,this.getRange())}getTickValues(){return this.categories}getScaleValue(t){return this.scale(t)??this.getRange()[0]}},g(co,"BandAxis"),co),uo,uI=(uo=class extends tk{constructor(t,r,a,i,n){super(t,i,n,r),this.domain=a,this.scale=Fl().domain(this.domain).range(this.getRange())}getTickValues(){return this.scale.ticks()}recalculateScale(){const t=[...this.domain];this.axisPosition==="left"&&t.reverse(),this.scale=Fl().domain(t).range(this.getRange())}getScaleValue(t){return this.scale(t)}},g(uo,"LinearAxis"),uo);function rg(e,t,r,a){const i=new Jw(a);return H0(e)?new cI(t,r,e.categories,e.title,i):new uI(t,r,[e.min,e.max],e.title,i)}g(rg,"getAxis");var ho,hI=(ho=class{constructor(t,r,a,i){this.textDimensionCalculator=t,this.chartConfig=r,this.chartData=a,this.chartThemeConfig=i,this.boundingRect={x:0,y:0,width:0,height:0},this.showChartTitle=!1}setBoundingBoxXY(t){this.boundingRect.x=t.x,this.boundingRect.y=t.y}calculateSpace(t){const r=this.textDimensionCalculator.getMaxDimension([this.chartData.title],this.chartConfig.titleFontSize),a=Math.max(r.width,t.width),i=r.height+2*this.chartConfig.titlePadding;return r.width<=a&&r.height<=i&&this.chartConfig.showTitle&&this.chartData.title&&(this.boundingRect.width=a,this.boundingRect.height=i,this.showChartTitle=!0),{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){const t=[];return this.showChartTitle&&t.push({groupTexts:["chart-title"],type:"text",data:[{fontSize:this.chartConfig.titleFontSize,text:this.chartData.title,verticalPos:"middle",horizontalPos:"center",x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.chartThemeConfig.titleColor,rotation:0}]}),t}},g(ho,"ChartTitle"),ho);function ek(e,t,r,a){const i=new Jw(a);return new hI(i,e,t,r)}g(ek,"getChartTitleComponent");var fo,dI=(fo=class{constructor(t,r,a,i,n){this.plotData=t,this.xAxis=r,this.yAxis=a,this.orientation=i,this.plotIndex=n}getDrawableElement(){const t=this.plotData.data.map(a=>[this.xAxis.getScaleValue(a[0]),this.yAxis.getScaleValue(a[1])]);let r;return this.orientation==="horizontal"?r=Ml().y(a=>a[0]).x(a=>a[1])(t):r=Ml().x(a=>a[0]).y(a=>a[1])(t),r?[{groupTexts:["plot",`line-plot-${this.plotIndex}`],type:"path",data:[{path:r,strokeFill:this.plotData.strokeFill,strokeWidth:this.plotData.strokeWidth}]}]:[]}},g(fo,"LinePlot"),fo),po,fI=(po=class{constructor(t,r,a,i,n,s){this.barData=t,this.boundingRect=r,this.xAxis=a,this.yAxis=i,this.orientation=n,this.plotIndex=s}getDrawableElement(){const t=this.barData.data.map(n=>[this.xAxis.getScaleValue(n[0]),this.yAxis.getScaleValue(n[1])]),a=Math.min(this.xAxis.getAxisOuterPadding()*2,this.xAxis.getTickDistance())*(1-.05),i=a/2;return this.orientation==="horizontal"?[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:t.map(n=>({x:this.boundingRect.x,y:n[0]-i,height:a,width:n[1]-this.boundingRect.x,fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]:[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:t.map(n=>({x:n[0]-i,y:n[1],width:a,height:this.boundingRect.y+this.boundingRect.height-n[1],fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]}},g(po,"BarPlot"),po),go,pI=(go=class{constructor(t,r,a){this.chartConfig=t,this.chartData=r,this.chartThemeConfig=a,this.boundingRect={x:0,y:0,width:0,height:0}}setAxes(t,r){this.xAxis=t,this.yAxis=r}setBoundingBoxXY(t){this.boundingRect.x=t.x,this.boundingRect.y=t.y}calculateSpace(t){return this.boundingRect.width=t.width,this.boundingRect.height=t.height,{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){if(!(this.xAxis&&this.yAxis))throw Error("Axes must be passed to render Plots");const t=[];for(const[r,a]of this.chartData.plots.entries())switch(a.type){case"line":{const i=new dI(a,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,r);t.push(...i.getDrawableElement())}break;case"bar":{const i=new fI(a,this.boundingRect,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,r);t.push(...i.getDrawableElement())}break}return t}},g(go,"BasePlot"),go);function rk(e,t,r){return new pI(e,t,r)}g(rk,"getPlotComponent");var yo,gI=(yo=class{constructor(t,r,a,i){this.chartConfig=t,this.chartData=r,this.componentStore={title:ek(t,r,a,i),plot:rk(t,r,a),xAxis:rg(r.xAxis,t.xAxis,{titleColor:a.xAxisTitleColor,labelColor:a.xAxisLabelColor,tickColor:a.xAxisTickColor,axisLineColor:a.xAxisLineColor},i),yAxis:rg(r.yAxis,t.yAxis,{titleColor:a.yAxisTitleColor,labelColor:a.yAxisLabelColor,tickColor:a.yAxisTickColor,axisLineColor:a.yAxisLineColor},i)}}calculateVerticalSpace(){let t=this.chartConfig.width,r=this.chartConfig.height,a=0,i=0,n=Math.floor(t*this.chartConfig.plotReservedSpacePercent/100),s=Math.floor(r*this.chartConfig.plotReservedSpacePercent/100),o=this.componentStore.plot.calculateSpace({width:n,height:s});t-=o.width,r-=o.height,o=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:r}),i=o.height,r-=o.height,this.componentStore.xAxis.setAxisPosition("bottom"),o=this.componentStore.xAxis.calculateSpace({width:t,height:r}),r-=o.height,this.componentStore.yAxis.setAxisPosition("left"),o=this.componentStore.yAxis.calculateSpace({width:t,height:r}),a=o.width,t-=o.width,t>0&&(n+=t,t=0),r>0&&(s+=r,r=0),this.componentStore.plot.calculateSpace({width:n,height:s}),this.componentStore.plot.setBoundingBoxXY({x:a,y:i}),this.componentStore.xAxis.setRange([a,a+n]),this.componentStore.xAxis.setBoundingBoxXY({x:a,y:i+s}),this.componentStore.yAxis.setRange([i,i+s]),this.componentStore.yAxis.setBoundingBoxXY({x:0,y:i}),this.chartData.plots.some(l=>eg(l))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateHorizontalSpace(){let t=this.chartConfig.width,r=this.chartConfig.height,a=0,i=0,n=0,s=Math.floor(t*this.chartConfig.plotReservedSpacePercent/100),o=Math.floor(r*this.chartConfig.plotReservedSpacePercent/100),l=this.componentStore.plot.calculateSpace({width:s,height:o});t-=l.width,r-=l.height,l=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:r}),a=l.height,r-=l.height,this.componentStore.xAxis.setAxisPosition("left"),l=this.componentStore.xAxis.calculateSpace({width:t,height:r}),t-=l.width,i=l.width,this.componentStore.yAxis.setAxisPosition("top"),l=this.componentStore.yAxis.calculateSpace({width:t,height:r}),r-=l.height,n=a+l.height,t>0&&(s+=t,t=0),r>0&&(o+=r,r=0),this.componentStore.plot.calculateSpace({width:s,height:o}),this.componentStore.plot.setBoundingBoxXY({x:i,y:n}),this.componentStore.yAxis.setRange([i,i+s]),this.componentStore.yAxis.setBoundingBoxXY({x:i,y:a}),this.componentStore.xAxis.setRange([n,n+o]),this.componentStore.xAxis.setBoundingBoxXY({x:0,y:n}),this.chartData.plots.some(u=>eg(u))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateSpace(){this.chartConfig.chartOrientation==="horizontal"?this.calculateHorizontalSpace():this.calculateVerticalSpace()}getDrawableElement(){this.calculateSpace();const t=[];this.componentStore.plot.setAxes(this.componentStore.xAxis,this.componentStore.yAxis);for(const r of Object.values(this.componentStore))t.push(...r.getDrawableElements());return t}},g(yo,"Orchestrator"),yo),vo,yI=(vo=class{static build(t,r,a,i){return new gI(t,r,a,i).getDrawableElement()}},g(vo,"XYChartBuilder"),vo),Hl=0,ak,Yl=X0(),Ul=U0(),Me=K0(),ag=Ul.plotColorPalette.split(",").map(e=>e.trim()),Gh=!1,Y0=!1;function U0(){const e=Dh(),t=$e();return Pa(e.xyChart,t.themeVariables.xyChart)}g(U0,"getChartDefaultThemeConfig");function X0(){const e=$e();return Pa(Ee.xyChart,e.xyChart)}g(X0,"getChartDefaultConfig");function K0(){return{yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]}}g(K0,"getChartDefaultData");function Hh(e){const t=$e();return qe(e.trim(),t)}g(Hh,"textSanitizer");function ik(e){ak=e}g(ik,"setTmpSVGG");function nk(e){e==="horizontal"?Yl.chartOrientation="horizontal":Yl.chartOrientation="vertical"}g(nk,"setOrientation");function sk(e){Me.xAxis.title=Hh(e.text)}g(sk,"setXAxisTitle");function j0(e,t){Me.xAxis={type:"linear",title:Me.xAxis.title,min:e,max:t},Gh=!0}g(j0,"setXAxisRangeData");function ok(e){Me.xAxis={type:"band",title:Me.xAxis.title,categories:e.map(t=>Hh(t.text))},Gh=!0}g(ok,"setXAxisBand");function lk(e){Me.yAxis.title=Hh(e.text)}g(lk,"setYAxisTitle");function ck(e,t){Me.yAxis={type:"linear",title:Me.yAxis.title,min:e,max:t},Y0=!0}g(ck,"setYAxisRangeData");function uk(e){const t=Math.min(...e),r=Math.max(...e),a=_s(Me.yAxis)?Me.yAxis.min:1/0,i=_s(Me.yAxis)?Me.yAxis.max:-1/0;Me.yAxis={type:"linear",title:Me.yAxis.title,min:Math.min(a,t),max:Math.max(i,r)}}g(uk,"setYAxisRangeFromPlotData");function Q0(e){let t=[];if(e.length===0)return t;if(!Gh){const r=_s(Me.xAxis)?Me.xAxis.min:1/0,a=_s(Me.xAxis)?Me.xAxis.max:-1/0;j0(Math.min(r,1),Math.max(a,e.length))}if(Y0||uk(e),H0(Me.xAxis)&&(t=Me.xAxis.categories.map((r,a)=>[r,e[a]])),_s(Me.xAxis)){const r=Me.xAxis.min,a=Me.xAxis.max,i=(a-r)/(e.length-1),n=[];for(let s=r;s<=a;s+=i)n.push(`${s}`);t=n.map((s,o)=>[s,e[o]])}return t}g(Q0,"transformDataWithoutCategory");function Z0(e){return ag[e===0?0:e%ag.length]}g(Z0,"getPlotColorFromPalette");function hk(e,t){const r=Q0(t);Me.plots.push({type:"line",strokeFill:Z0(Hl),strokeWidth:2,data:r}),Hl++}g(hk,"setLineData");function dk(e,t){const r=Q0(t);Me.plots.push({type:"bar",fill:Z0(Hl),data:r}),Hl++}g(dk,"setBarData");function fk(){if(Me.plots.length===0)throw Error("No Plot to render, please provide a plot with some data");return Me.title=br(),yI.build(Yl,Me,Ul,ak)}g(fk,"getDrawableElem");function pk(){return Ul}g(pk,"getChartThemeConfig");function gk(){return Yl}g(gk,"getChartConfig");var vI=g(function(){xr(),Hl=0,Yl=X0(),Me=K0(),Ul=U0(),ag=Ul.plotColorPalette.split(",").map(e=>e.trim()),Gh=!1,Y0=!1},"clear"),mI={getDrawableElem:fk,clear:vI,setAccTitle:vr,getAccTitle:Sr,setDiagramTitle:Mr,getDiagramTitle:br,getAccDescription:_r,setAccDescription:Er,setOrientation:nk,setXAxisTitle:sk,setXAxisRangeData:j0,setXAxisBand:ok,setYAxisTitle:lk,setYAxisRangeData:ck,setLineData:hk,setBarData:dk,setTmpSVGG:ik,getChartThemeConfig:pk,getChartConfig:gk},xI=g((e,t,r,a)=>{const i=a.db,n=i.getChartThemeConfig(),s=i.getChartConfig();function o(m){return m==="top"?"text-before-edge":"middle"}g(o,"getDominantBaseLine");function l(m){return m==="left"?"start":m==="right"?"end":"middle"}g(l,"getTextAnchor");function u(m){return`translate(${m.x}, ${m.y}) rotate(${m.rotation||0})`}g(u,"getTextTransformation"),G.debug(`Rendering xychart chart
`+e);const h=Ii(t),d=h.append("g").attr("class","main"),f=d.append("rect").attr("width",s.width).attr("height",s.height).attr("class","background");da(h,s.height,s.width,!0),h.attr("viewBox",`0 0 ${s.width} ${s.height}`),f.attr("fill",n.backgroundColor),i.setTmpSVGG(h.append("g").attr("class","mermaid-tmp-group"));const p=i.getDrawableElem(),y={};function v(m){let x=d,b="";for(const[w]of m.entries()){let C=d;w>0&&y[b]&&(C=y[b]),b+=m[w],x=y[b],x||(x=y[b]=C.append("g").attr("class",m[w]))}return x}g(v,"getGroup");for(const m of p){if(m.data.length===0)continue;const x=v(m.groupTexts);switch(m.type){case"rect":x.selectAll("rect").data(m.data).enter().append("rect").attr("x",b=>b.x).attr("y",b=>b.y).attr("width",b=>b.width).attr("height",b=>b.height).attr("fill",b=>b.fill).attr("stroke",b=>b.strokeFill).attr("stroke-width",b=>b.strokeWidth);break;case"text":x.selectAll("text").data(m.data).enter().append("text").attr("x",0).attr("y",0).attr("fill",b=>b.fill).attr("font-size",b=>b.fontSize).attr("dominant-baseline",b=>o(b.verticalPos)).attr("text-anchor",b=>l(b.horizontalPos)).attr("transform",b=>u(b)).text(b=>b.text);break;case"path":x.selectAll("path").data(m.data).enter().append("path").attr("d",b=>b.path).attr("fill",b=>b.fill?b.fill:"none").attr("stroke",b=>b.strokeFill).attr("stroke-width",b=>b.strokeWidth);break}}},"draw"),bI={draw:xI},wI={parser:lI,db:mI,renderer:bI};const kI=Object.freeze({__proto__:null,diagram:wI});var ig=function(){var e=g(function(at,Ct,z,ft){for(z=z||{},ft=at.length;ft--;z[at[ft]]=Ct);return z},"o"),t=[1,3],r=[1,4],a=[1,5],i=[1,6],n=[5,6,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,77,89,90],s=[1,22],o=[2,7],l=[1,26],u=[1,27],h=[1,28],d=[1,29],f=[1,33],p=[1,34],y=[1,35],v=[1,36],m=[1,37],x=[1,38],b=[1,24],w=[1,31],C=[1,32],T=[1,30],k=[1,39],S=[1,40],L=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,77,89,90],_=[1,61],A=[89,90],E=[5,8,9,11,13,21,22,23,24,27,29,41,42,43,44,45,46,54,61,63,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],D=[27,29],R=[1,70],O=[1,71],P=[1,72],$=[1,73],M=[1,74],I=[1,75],F=[1,76],V=[1,83],N=[1,80],q=[1,84],U=[1,85],X=[1,86],lt=[1,87],J=[1,88],ct=[1,89],yt=[1,90],ut=[1,91],Q=[1,92],K=[5,8,9,11,13,21,22,23,24,27,41,42,43,44,45,46,54,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],j=[63,64],Y=[1,101],st=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,76,77,89,90],W=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],bt=[1,110],tt=[1,106],H=[1,107],Et=[1,108],nt=[1,109],Lt=[1,111],Dt=[1,116],At=[1,117],xt=[1,114],_t=[1,115],vt={trace:g(function(){},"trace"),yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,acc_title:9,acc_title_value:10,acc_descr:11,acc_descr_value:12,acc_descr_multiline_value:13,requirementDef:14,elementDef:15,relationshipDef:16,direction:17,styleStatement:18,classDefStatement:19,classStatement:20,direction_tb:21,direction_bt:22,direction_rl:23,direction_lr:24,requirementType:25,requirementName:26,STRUCT_START:27,requirementBody:28,STYLE_SEPARATOR:29,idList:30,ID:31,COLONSEP:32,id:33,TEXT:34,text:35,RISK:36,riskLevel:37,VERIFYMTHD:38,verifyType:39,STRUCT_STOP:40,REQUIREMENT:41,FUNCTIONAL_REQUIREMENT:42,INTERFACE_REQUIREMENT:43,PERFORMANCE_REQUIREMENT:44,PHYSICAL_REQUIREMENT:45,DESIGN_CONSTRAINT:46,LOW_RISK:47,MED_RISK:48,HIGH_RISK:49,VERIFY_ANALYSIS:50,VERIFY_DEMONSTRATION:51,VERIFY_INSPECTION:52,VERIFY_TEST:53,ELEMENT:54,elementName:55,elementBody:56,TYPE:57,type:58,DOCREF:59,ref:60,END_ARROW_L:61,relationship:62,LINE:63,END_ARROW_R:64,CONTAINS:65,COPIES:66,DERIVES:67,SATISFIES:68,VERIFIES:69,REFINES:70,TRACES:71,CLASSDEF:72,stylesOpt:73,CLASS:74,ALPHA:75,COMMA:76,STYLE:77,style:78,styleComponent:79,NUM:80,COLON:81,UNIT:82,SPACE:83,BRKT:84,PCT:85,MINUS:86,LABEL:87,SEMICOLON:88,unqString:89,qString:90,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",9:"acc_title",10:"acc_title_value",11:"acc_descr",12:"acc_descr_value",13:"acc_descr_multiline_value",21:"direction_tb",22:"direction_bt",23:"direction_rl",24:"direction_lr",27:"STRUCT_START",29:"STYLE_SEPARATOR",31:"ID",32:"COLONSEP",34:"TEXT",36:"RISK",38:"VERIFYMTHD",40:"STRUCT_STOP",41:"REQUIREMENT",42:"FUNCTIONAL_REQUIREMENT",43:"INTERFACE_REQUIREMENT",44:"PERFORMANCE_REQUIREMENT",45:"PHYSICAL_REQUIREMENT",46:"DESIGN_CONSTRAINT",47:"LOW_RISK",48:"MED_RISK",49:"HIGH_RISK",50:"VERIFY_ANALYSIS",51:"VERIFY_DEMONSTRATION",52:"VERIFY_INSPECTION",53:"VERIFY_TEST",54:"ELEMENT",57:"TYPE",59:"DOCREF",61:"END_ARROW_L",63:"LINE",64:"END_ARROW_R",65:"CONTAINS",66:"COPIES",67:"DERIVES",68:"SATISFIES",69:"VERIFIES",70:"REFINES",71:"TRACES",72:"CLASSDEF",74:"CLASS",75:"ALPHA",76:"COMMA",77:"STYLE",80:"NUM",81:"COLON",82:"UNIT",83:"SPACE",84:"BRKT",85:"PCT",86:"MINUS",87:"LABEL",88:"SEMICOLON",89:"unqString",90:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,2],[4,2],[4,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[17,1],[17,1],[17,1],[17,1],[14,5],[14,7],[28,5],[28,5],[28,5],[28,5],[28,2],[28,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[37,1],[37,1],[37,1],[39,1],[39,1],[39,1],[39,1],[15,5],[15,7],[56,5],[56,5],[56,2],[56,1],[16,5],[16,5],[62,1],[62,1],[62,1],[62,1],[62,1],[62,1],[62,1],[19,3],[20,3],[20,3],[30,1],[30,3],[30,1],[30,3],[18,3],[73,1],[73,3],[78,1],[78,2],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[26,1],[26,1],[33,1],[33,1],[35,1],[35,1],[55,1],[55,1],[58,1],[58,1],[60,1],[60,1]],performAction:g(function(Ct,z,ft,B,et,Z,ht){var ot=Z.length-1;switch(et){case 4:this.$=Z[ot].trim(),B.setAccTitle(this.$);break;case 5:case 6:this.$=Z[ot].trim(),B.setAccDescription(this.$);break;case 7:this.$=[];break;case 17:B.setDirection("TB");break;case 18:B.setDirection("BT");break;case 19:B.setDirection("RL");break;case 20:B.setDirection("LR");break;case 21:B.addRequirement(Z[ot-3],Z[ot-4]);break;case 22:B.addRequirement(Z[ot-5],Z[ot-6]),B.setClass([Z[ot-5]],Z[ot-3]);break;case 23:B.setNewReqId(Z[ot-2]);break;case 24:B.setNewReqText(Z[ot-2]);break;case 25:B.setNewReqRisk(Z[ot-2]);break;case 26:B.setNewReqVerifyMethod(Z[ot-2]);break;case 29:this.$=B.RequirementType.REQUIREMENT;break;case 30:this.$=B.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 31:this.$=B.RequirementType.INTERFACE_REQUIREMENT;break;case 32:this.$=B.RequirementType.PERFORMANCE_REQUIREMENT;break;case 33:this.$=B.RequirementType.PHYSICAL_REQUIREMENT;break;case 34:this.$=B.RequirementType.DESIGN_CONSTRAINT;break;case 35:this.$=B.RiskLevel.LOW_RISK;break;case 36:this.$=B.RiskLevel.MED_RISK;break;case 37:this.$=B.RiskLevel.HIGH_RISK;break;case 38:this.$=B.VerifyType.VERIFY_ANALYSIS;break;case 39:this.$=B.VerifyType.VERIFY_DEMONSTRATION;break;case 40:this.$=B.VerifyType.VERIFY_INSPECTION;break;case 41:this.$=B.VerifyType.VERIFY_TEST;break;case 42:B.addElement(Z[ot-3]);break;case 43:B.addElement(Z[ot-5]),B.setClass([Z[ot-5]],Z[ot-3]);break;case 44:B.setNewElementType(Z[ot-2]);break;case 45:B.setNewElementDocRef(Z[ot-2]);break;case 48:B.addRelationship(Z[ot-2],Z[ot],Z[ot-4]);break;case 49:B.addRelationship(Z[ot-2],Z[ot-4],Z[ot]);break;case 50:this.$=B.Relationships.CONTAINS;break;case 51:this.$=B.Relationships.COPIES;break;case 52:this.$=B.Relationships.DERIVES;break;case 53:this.$=B.Relationships.SATISFIES;break;case 54:this.$=B.Relationships.VERIFIES;break;case 55:this.$=B.Relationships.REFINES;break;case 56:this.$=B.Relationships.TRACES;break;case 57:this.$=Z[ot-2],B.defineClass(Z[ot-1],Z[ot]);break;case 58:B.setClass(Z[ot-1],Z[ot]);break;case 59:B.setClass([Z[ot-2]],Z[ot]);break;case 60:case 62:this.$=[Z[ot]];break;case 61:case 63:this.$=Z[ot-2].concat([Z[ot]]);break;case 64:this.$=Z[ot-2],B.setCssStyle(Z[ot-1],Z[ot]);break;case 65:this.$=[Z[ot]];break;case 66:Z[ot-2].push(Z[ot]),this.$=Z[ot-2];break;case 68:this.$=Z[ot-1]+Z[ot];break}},"anonymous"),table:[{3:1,4:2,6:t,9:r,11:a,13:i},{1:[3]},{3:8,4:2,5:[1,7],6:t,9:r,11:a,13:i},{5:[1,9]},{10:[1,10]},{12:[1,11]},e(n,[2,6]),{3:12,4:2,6:t,9:r,11:a,13:i},{1:[2,2]},{4:17,5:s,7:13,8:o,9:r,11:a,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:u,23:h,24:d,25:23,33:25,41:f,42:p,43:y,44:v,45:m,46:x,54:b,72:w,74:C,77:T,89:k,90:S},e(n,[2,4]),e(n,[2,5]),{1:[2,1]},{8:[1,41]},{4:17,5:s,7:42,8:o,9:r,11:a,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:u,23:h,24:d,25:23,33:25,41:f,42:p,43:y,44:v,45:m,46:x,54:b,72:w,74:C,77:T,89:k,90:S},{4:17,5:s,7:43,8:o,9:r,11:a,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:u,23:h,24:d,25:23,33:25,41:f,42:p,43:y,44:v,45:m,46:x,54:b,72:w,74:C,77:T,89:k,90:S},{4:17,5:s,7:44,8:o,9:r,11:a,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:u,23:h,24:d,25:23,33:25,41:f,42:p,43:y,44:v,45:m,46:x,54:b,72:w,74:C,77:T,89:k,90:S},{4:17,5:s,7:45,8:o,9:r,11:a,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:u,23:h,24:d,25:23,33:25,41:f,42:p,43:y,44:v,45:m,46:x,54:b,72:w,74:C,77:T,89:k,90:S},{4:17,5:s,7:46,8:o,9:r,11:a,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:u,23:h,24:d,25:23,33:25,41:f,42:p,43:y,44:v,45:m,46:x,54:b,72:w,74:C,77:T,89:k,90:S},{4:17,5:s,7:47,8:o,9:r,11:a,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:u,23:h,24:d,25:23,33:25,41:f,42:p,43:y,44:v,45:m,46:x,54:b,72:w,74:C,77:T,89:k,90:S},{4:17,5:s,7:48,8:o,9:r,11:a,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:u,23:h,24:d,25:23,33:25,41:f,42:p,43:y,44:v,45:m,46:x,54:b,72:w,74:C,77:T,89:k,90:S},{4:17,5:s,7:49,8:o,9:r,11:a,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:u,23:h,24:d,25:23,33:25,41:f,42:p,43:y,44:v,45:m,46:x,54:b,72:w,74:C,77:T,89:k,90:S},{4:17,5:s,7:50,8:o,9:r,11:a,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:u,23:h,24:d,25:23,33:25,41:f,42:p,43:y,44:v,45:m,46:x,54:b,72:w,74:C,77:T,89:k,90:S},{26:51,89:[1,52],90:[1,53]},{55:54,89:[1,55],90:[1,56]},{29:[1,59],61:[1,57],63:[1,58]},e(L,[2,17]),e(L,[2,18]),e(L,[2,19]),e(L,[2,20]),{30:60,33:62,75:_,89:k,90:S},{30:63,33:62,75:_,89:k,90:S},{30:64,33:62,75:_,89:k,90:S},e(A,[2,29]),e(A,[2,30]),e(A,[2,31]),e(A,[2,32]),e(A,[2,33]),e(A,[2,34]),e(E,[2,81]),e(E,[2,82]),{1:[2,3]},{8:[2,8]},{8:[2,9]},{8:[2,10]},{8:[2,11]},{8:[2,12]},{8:[2,13]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{27:[1,65],29:[1,66]},e(D,[2,79]),e(D,[2,80]),{27:[1,67],29:[1,68]},e(D,[2,85]),e(D,[2,86]),{62:69,65:R,66:O,67:P,68:$,69:M,70:I,71:F},{62:77,65:R,66:O,67:P,68:$,69:M,70:I,71:F},{30:78,33:62,75:_,89:k,90:S},{73:79,75:V,76:N,78:81,79:82,80:q,81:U,82:X,83:lt,84:J,85:ct,86:yt,87:ut,88:Q},e(K,[2,60]),e(K,[2,62]),{73:93,75:V,76:N,78:81,79:82,80:q,81:U,82:X,83:lt,84:J,85:ct,86:yt,87:ut,88:Q},{30:94,33:62,75:_,76:N,89:k,90:S},{5:[1,95]},{30:96,33:62,75:_,89:k,90:S},{5:[1,97]},{30:98,33:62,75:_,89:k,90:S},{63:[1,99]},e(j,[2,50]),e(j,[2,51]),e(j,[2,52]),e(j,[2,53]),e(j,[2,54]),e(j,[2,55]),e(j,[2,56]),{64:[1,100]},e(L,[2,59],{76:N}),e(L,[2,64],{76:Y}),{33:103,75:[1,102],89:k,90:S},e(st,[2,65],{79:104,75:V,80:q,81:U,82:X,83:lt,84:J,85:ct,86:yt,87:ut,88:Q}),e(W,[2,67]),e(W,[2,69]),e(W,[2,70]),e(W,[2,71]),e(W,[2,72]),e(W,[2,73]),e(W,[2,74]),e(W,[2,75]),e(W,[2,76]),e(W,[2,77]),e(W,[2,78]),e(L,[2,57],{76:Y}),e(L,[2,58],{76:N}),{5:bt,28:105,31:tt,34:H,36:Et,38:nt,40:Lt},{27:[1,112],76:N},{5:Dt,40:At,56:113,57:xt,59:_t},{27:[1,118],76:N},{33:119,89:k,90:S},{33:120,89:k,90:S},{75:V,78:121,79:82,80:q,81:U,82:X,83:lt,84:J,85:ct,86:yt,87:ut,88:Q},e(K,[2,61]),e(K,[2,63]),e(W,[2,68]),e(L,[2,21]),{32:[1,122]},{32:[1,123]},{32:[1,124]},{32:[1,125]},{5:bt,28:126,31:tt,34:H,36:Et,38:nt,40:Lt},e(L,[2,28]),{5:[1,127]},e(L,[2,42]),{32:[1,128]},{32:[1,129]},{5:Dt,40:At,56:130,57:xt,59:_t},e(L,[2,47]),{5:[1,131]},e(L,[2,48]),e(L,[2,49]),e(st,[2,66],{79:104,75:V,80:q,81:U,82:X,83:lt,84:J,85:ct,86:yt,87:ut,88:Q}),{33:132,89:k,90:S},{35:133,89:[1,134],90:[1,135]},{37:136,47:[1,137],48:[1,138],49:[1,139]},{39:140,50:[1,141],51:[1,142],52:[1,143],53:[1,144]},e(L,[2,27]),{5:bt,28:145,31:tt,34:H,36:Et,38:nt,40:Lt},{58:146,89:[1,147],90:[1,148]},{60:149,89:[1,150],90:[1,151]},e(L,[2,46]),{5:Dt,40:At,56:152,57:xt,59:_t},{5:[1,153]},{5:[1,154]},{5:[2,83]},{5:[2,84]},{5:[1,155]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[1,156]},{5:[2,38]},{5:[2,39]},{5:[2,40]},{5:[2,41]},e(L,[2,22]),{5:[1,157]},{5:[2,87]},{5:[2,88]},{5:[1,158]},{5:[2,89]},{5:[2,90]},e(L,[2,43]),{5:bt,28:159,31:tt,34:H,36:Et,38:nt,40:Lt},{5:bt,28:160,31:tt,34:H,36:Et,38:nt,40:Lt},{5:bt,28:161,31:tt,34:H,36:Et,38:nt,40:Lt},{5:bt,28:162,31:tt,34:H,36:Et,38:nt,40:Lt},{5:Dt,40:At,56:163,57:xt,59:_t},{5:Dt,40:At,56:164,57:xt,59:_t},e(L,[2,23]),e(L,[2,24]),e(L,[2,25]),e(L,[2,26]),e(L,[2,44]),e(L,[2,45])],defaultActions:{8:[2,2],12:[2,1],41:[2,3],42:[2,8],43:[2,9],44:[2,10],45:[2,11],46:[2,12],47:[2,13],48:[2,14],49:[2,15],50:[2,16],134:[2,83],135:[2,84],137:[2,35],138:[2,36],139:[2,37],141:[2,38],142:[2,39],143:[2,40],144:[2,41],147:[2,87],148:[2,88],150:[2,89],151:[2,90]},parseError:g(function(Ct,z){if(z.recoverable)this.trace(Ct);else{var ft=new Error(Ct);throw ft.hash=z,ft}},"parseError"),parse:g(function(Ct){var z=this,ft=[0],B=[],et=[null],Z=[],ht=this.table,ot="",pt=0,gt=0,kt=2,Ft=1,Ht=Z.slice.call(arguments,1),Pt=Object.create(this.lexer),Ot={yy:{}};for(var Gt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Gt)&&(Ot.yy[Gt]=this.yy[Gt]);Pt.setInput(Ct,Ot.yy),Ot.yy.lexer=Pt,Ot.yy.parser=this,typeof Pt.yylloc>"u"&&(Pt.yylloc={});var Bt=Pt.yylloc;Z.push(Bt);var te=Pt.options&&Pt.options.ranges;typeof Ot.yy.parseError=="function"?this.parseError=Ot.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ue(We){ft.length=ft.length-2*We,et.length=et.length-We,Z.length=Z.length-We}g(ue,"popStack");function Ce(){var We;return We=B.pop()||Pt.lex()||Ft,typeof We!="number"&&(We instanceof Array&&(B=We,We=B.pop()),We=z.symbols_[We]||We),We}g(Ce,"lex");for(var Wt,de,$t,Jt,jt={},Qt,Yt,fe,je;;){if(de=ft[ft.length-1],this.defaultActions[de]?$t=this.defaultActions[de]:((Wt===null||typeof Wt>"u")&&(Wt=Ce()),$t=ht[de]&&ht[de][Wt]),typeof $t>"u"||!$t.length||!$t[0]){var me="";je=[];for(Qt in ht[de])this.terminals_[Qt]&&Qt>kt&&je.push("'"+this.terminals_[Qt]+"'");Pt.showPosition?me="Parse error on line "+(pt+1)+`:
`+Pt.showPosition()+`
Expecting `+je.join(", ")+", got '"+(this.terminals_[Wt]||Wt)+"'":me="Parse error on line "+(pt+1)+": Unexpected "+(Wt==Ft?"end of input":"'"+(this.terminals_[Wt]||Wt)+"'"),this.parseError(me,{text:Pt.match,token:this.terminals_[Wt]||Wt,line:Pt.yylineno,loc:Bt,expected:je})}if($t[0]instanceof Array&&$t.length>1)throw new Error("Parse Error: multiple actions possible at state: "+de+", token: "+Wt);switch($t[0]){case 1:ft.push(Wt),et.push(Pt.yytext),Z.push(Pt.yylloc),ft.push($t[1]),Wt=null,gt=Pt.yyleng,ot=Pt.yytext,pt=Pt.yylineno,Bt=Pt.yylloc;break;case 2:if(Yt=this.productions_[$t[1]][1],jt.$=et[et.length-Yt],jt._$={first_line:Z[Z.length-(Yt||1)].first_line,last_line:Z[Z.length-1].last_line,first_column:Z[Z.length-(Yt||1)].first_column,last_column:Z[Z.length-1].last_column},te&&(jt._$.range=[Z[Z.length-(Yt||1)].range[0],Z[Z.length-1].range[1]]),Jt=this.performAction.apply(jt,[ot,gt,pt,Ot.yy,$t[1],et,Z].concat(Ht)),typeof Jt<"u")return Jt;Yt&&(ft=ft.slice(0,-1*Yt*2),et=et.slice(0,-1*Yt),Z=Z.slice(0,-1*Yt)),ft.push(this.productions_[$t[1]][0]),et.push(jt.$),Z.push(jt._$),fe=ht[ft[ft.length-2]][ft[ft.length-1]],ft.push(fe);break;case 3:return!0}}return!0},"parse")},wt=function(){var at={EOF:1,parseError:g(function(z,ft){if(this.yy.parser)this.yy.parser.parseError(z,ft);else throw new Error(z)},"parseError"),setInput:g(function(Ct,z){return this.yy=z||this.yy||{},this._input=Ct,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:g(function(){var Ct=this._input[0];this.yytext+=Ct,this.yyleng++,this.offset++,this.match+=Ct,this.matched+=Ct;var z=Ct.match(/(?:\r\n?|\n).*/g);return z?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Ct},"input"),unput:g(function(Ct){var z=Ct.length,ft=Ct.split(/(?:\r\n?|\n)/g);this._input=Ct+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-z),this.offset-=z;var B=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ft.length-1&&(this.yylineno-=ft.length-1);var et=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ft?(ft.length===B.length?this.yylloc.first_column:0)+B[B.length-ft.length].length-ft[0].length:this.yylloc.first_column-z},this.options.ranges&&(this.yylloc.range=[et[0],et[0]+this.yyleng-z]),this.yyleng=this.yytext.length,this},"unput"),more:g(function(){return this._more=!0,this},"more"),reject:g(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:g(function(Ct){this.unput(this.match.slice(Ct))},"less"),pastInput:g(function(){var Ct=this.matched.substr(0,this.matched.length-this.match.length);return(Ct.length>20?"...":"")+Ct.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:g(function(){var Ct=this.match;return Ct.length<20&&(Ct+=this._input.substr(0,20-Ct.length)),(Ct.substr(0,20)+(Ct.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:g(function(){var Ct=this.pastInput(),z=new Array(Ct.length+1).join("-");return Ct+this.upcomingInput()+`
`+z+"^"},"showPosition"),test_match:g(function(Ct,z){var ft,B,et;if(this.options.backtrack_lexer&&(et={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(et.yylloc.range=this.yylloc.range.slice(0))),B=Ct[0].match(/(?:\r\n?|\n).*/g),B&&(this.yylineno+=B.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:B?B[B.length-1].length-B[B.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Ct[0].length},this.yytext+=Ct[0],this.match+=Ct[0],this.matches=Ct,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Ct[0].length),this.matched+=Ct[0],ft=this.performAction.call(this,this.yy,this,z,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ft)return ft;if(this._backtrack){for(var Z in et)this[Z]=et[Z];return!1}return!1},"test_match"),next:g(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Ct,z,ft,B;this._more||(this.yytext="",this.match="");for(var et=this._currentRules(),Z=0;Z<et.length;Z++)if(ft=this._input.match(this.rules[et[Z]]),ft&&(!z||ft[0].length>z[0].length)){if(z=ft,B=Z,this.options.backtrack_lexer){if(Ct=this.test_match(ft,et[Z]),Ct!==!1)return Ct;if(this._backtrack){z=!1;continue}else return!1}else if(!this.options.flex)break}return z?(Ct=this.test_match(z,et[B]),Ct!==!1?Ct:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:g(function(){var z=this.next();return z||this.lex()},"lex"),begin:g(function(z){this.conditionStack.push(z)},"begin"),popState:g(function(){var z=this.conditionStack.length-1;return z>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:g(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:g(function(z){return z=this.conditionStack.length-1-Math.abs(z||0),z>=0?this.conditionStack[z]:"INITIAL"},"topState"),pushState:g(function(z){this.begin(z)},"pushState"),stateStackSize:g(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:g(function(z,ft,B,et){switch(B){case 0:return"title";case 1:return this.begin("acc_title"),9;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),11;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:return 21;case 9:return 22;case 10:return 23;case 11:return 24;case 12:return 5;case 13:break;case 14:break;case 15:break;case 16:return 8;case 17:return 6;case 18:return 27;case 19:return 40;case 20:return 29;case 21:return 32;case 22:return 31;case 23:return 34;case 24:return 36;case 25:return 38;case 26:return 41;case 27:return 42;case 28:return 43;case 29:return 44;case 30:return 45;case 31:return 46;case 32:return 47;case 33:return 48;case 34:return 49;case 35:return 50;case 36:return 51;case 37:return 52;case 38:return 53;case 39:return 54;case 40:return 65;case 41:return 66;case 42:return 67;case 43:return 68;case 44:return 69;case 45:return 70;case 46:return 71;case 47:return 57;case 48:return 59;case 49:return this.begin("style"),77;case 50:return 75;case 51:return 81;case 52:return 88;case 53:return"PERCENT";case 54:return 86;case 55:return 84;case 56:break;case 57:this.begin("string");break;case 58:this.popState();break;case 59:return this.begin("style"),72;case 60:return this.begin("style"),74;case 61:return 61;case 62:return 64;case 63:return 63;case 64:this.begin("string");break;case 65:this.popState();break;case 66:return"qString";case 67:return ft.yytext=ft.yytext.trim(),89;case 68:return 75;case 69:return 80;case 70:return 76}},"anonymous"),rules:[/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::{3})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:style\b)/i,/^(?:\w+)/i,/^(?::)/i,/^(?:;)/i,/^(?:%)/i,/^(?:-)/i,/^(?:#)/i,/^(?: )/i,/^(?:["])/i,/^(?:\n)/i,/^(?:classDef\b)/i,/^(?:class\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^:,\r\n\{\<\>\-\=]*)/i,/^(?:\w+)/i,/^(?:[0-9]+)/i,/^(?:,)/i],conditions:{acc_descr_multiline:{rules:[6,7,68,69,70],inclusive:!1},acc_descr:{rules:[4,68,69,70],inclusive:!1},acc_title:{rules:[2,68,69,70],inclusive:!1},style:{rules:[50,51,52,53,54,55,56,57,58,68,69,70],inclusive:!1},unqString:{rules:[68,69,70],inclusive:!1},token:{rules:[68,69,70],inclusive:!1},string:{rules:[65,66,68,69,70],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,59,60,61,62,63,64,67,68,69,70],inclusive:!0}}};return at}();vt.lexer=wt;function St(){this.yy={}}return g(St,"Parser"),St.prototype=vt,vt.Parser=St,new St}();ig.parser=ig;var TI=ig,mo,CI=(mo=class{constructor(){this.relations=[],this.latestRequirement=this.getInitialRequirement(),this.requirements=new Map,this.latestElement=this.getInitialElement(),this.elements=new Map,this.classes=new Map,this.direction="TB",this.RequirementType={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},this.RiskLevel={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},this.VerifyType={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},this.Relationships={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},this.setAccTitle=vr,this.getAccTitle=Sr,this.setAccDescription=Er,this.getAccDescription=_r,this.setDiagramTitle=Mr,this.getDiagramTitle=br,this.getConfig=g(()=>dt().requirement,"getConfig"),this.clear(),this.setDirection=this.setDirection.bind(this),this.addRequirement=this.addRequirement.bind(this),this.setNewReqId=this.setNewReqId.bind(this),this.setNewReqRisk=this.setNewReqRisk.bind(this),this.setNewReqText=this.setNewReqText.bind(this),this.setNewReqVerifyMethod=this.setNewReqVerifyMethod.bind(this),this.addElement=this.addElement.bind(this),this.setNewElementType=this.setNewElementType.bind(this),this.setNewElementDocRef=this.setNewElementDocRef.bind(this),this.addRelationship=this.addRelationship.bind(this),this.setCssStyle=this.setCssStyle.bind(this),this.setClass=this.setClass.bind(this),this.defineClass=this.defineClass.bind(this),this.setAccTitle=this.setAccTitle.bind(this),this.setAccDescription=this.setAccDescription.bind(this)}getDirection(){return this.direction}setDirection(t){this.direction=t}resetLatestRequirement(){this.latestRequirement=this.getInitialRequirement()}resetLatestElement(){this.latestElement=this.getInitialElement()}getInitialRequirement(){return{requirementId:"",text:"",risk:"",verifyMethod:"",name:"",type:"",cssStyles:[],classes:["default"]}}getInitialElement(){return{name:"",type:"",docRef:"",cssStyles:[],classes:["default"]}}addRequirement(t,r){return this.requirements.has(t)||this.requirements.set(t,{name:t,type:r,requirementId:this.latestRequirement.requirementId,text:this.latestRequirement.text,risk:this.latestRequirement.risk,verifyMethod:this.latestRequirement.verifyMethod,cssStyles:[],classes:["default"]}),this.resetLatestRequirement(),this.requirements.get(t)}getRequirements(){return this.requirements}setNewReqId(t){this.latestRequirement!==void 0&&(this.latestRequirement.requirementId=t)}setNewReqText(t){this.latestRequirement!==void 0&&(this.latestRequirement.text=t)}setNewReqRisk(t){this.latestRequirement!==void 0&&(this.latestRequirement.risk=t)}setNewReqVerifyMethod(t){this.latestRequirement!==void 0&&(this.latestRequirement.verifyMethod=t)}addElement(t){return this.elements.has(t)||(this.elements.set(t,{name:t,type:this.latestElement.type,docRef:this.latestElement.docRef,cssStyles:[],classes:["default"]}),G.info("Added new element: ",t)),this.resetLatestElement(),this.elements.get(t)}getElements(){return this.elements}setNewElementType(t){this.latestElement!==void 0&&(this.latestElement.type=t)}setNewElementDocRef(t){this.latestElement!==void 0&&(this.latestElement.docRef=t)}addRelationship(t,r,a){this.relations.push({type:t,src:r,dst:a})}getRelationships(){return this.relations}clear(){this.relations=[],this.resetLatestRequirement(),this.requirements=new Map,this.resetLatestElement(),this.elements=new Map,this.classes=new Map,xr()}setCssStyle(t,r){for(const a of t){const i=this.requirements.get(a)??this.elements.get(a);if(!r||!i)return;for(const n of r)n.includes(",")?i.cssStyles.push(...n.split(",")):i.cssStyles.push(n)}}setClass(t,r){var a;for(const i of t){const n=this.requirements.get(i)??this.elements.get(i);if(n)for(const s of r){n.classes.push(s);const o=(a=this.classes.get(s))==null?void 0:a.styles;o&&n.cssStyles.push(...o)}}}defineClass(t,r){for(const a of t){let i=this.classes.get(a);i===void 0&&(i={id:a,styles:[],textStyles:[]},this.classes.set(a,i)),r&&r.forEach(function(n){if(/color/.exec(n)){const s=n.replace("fill","bgFill");i.textStyles.push(s)}i.styles.push(n)}),this.requirements.forEach(n=>{n.classes.includes(a)&&n.cssStyles.push(...r.flatMap(s=>s.split(",")))}),this.elements.forEach(n=>{n.classes.includes(a)&&n.cssStyles.push(...r.flatMap(s=>s.split(",")))})}}getClasses(){return this.classes}getData(){var i,n,s,o;const t=dt(),r=[],a=[];for(const l of this.requirements.values()){const u=l;u.id=l.name,u.cssStyles=l.cssStyles,u.cssClasses=l.classes.join(" "),u.shape="requirementBox",u.look=t.look,r.push(u)}for(const l of this.elements.values()){const u=l;u.shape="requirementBox",u.look=t.look,u.id=l.name,u.cssStyles=l.cssStyles,u.cssClasses=l.classes.join(" "),r.push(u)}for(const l of this.relations){let u=0;const h=l.type===this.Relationships.CONTAINS,d={id:`${l.src}-${l.dst}-${u}`,start:((i=this.requirements.get(l.src))==null?void 0:i.name)??((n=this.elements.get(l.src))==null?void 0:n.name),end:((s=this.requirements.get(l.dst))==null?void 0:s.name)??((o=this.elements.get(l.dst))==null?void 0:o.name),label:`&lt;&lt;${l.type}&gt;&gt;`,classes:"relationshipLine",style:["fill:none",h?"":"stroke-dasharray: 10,7"],labelpos:"c",thickness:"normal",type:"normal",pattern:h?"normal":"dashed",arrowTypeStart:h?"requirement_contains":"",arrowTypeEnd:h?"":"requirement_arrow",look:t.look};a.push(d),u++}return{nodes:r,edges:a,other:{},config:t,direction:this.getDirection()}}},g(mo,"RequirementDB"),mo),SI=g(e=>`

  marker {
    fill: ${e.relationColor};
    stroke: ${e.relationColor};
  }

  marker.cross {
    stroke: ${e.lineColor};
  }

  svg {
    font-family: ${e.fontFamily};
    font-size: ${e.fontSize};
  }

  .reqBox {
    fill: ${e.requirementBackground};
    fill-opacity: 1.0;
    stroke: ${e.requirementBorderColor};
    stroke-width: ${e.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${e.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${e.relationLabelBackground};
    fill-opacity: 1.0;
  }

  .req-title-line {
    stroke: ${e.requirementBorderColor};
    stroke-width: ${e.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${e.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${e.relationLabelColor};
  }
  .divider {
    stroke: ${e.nodeBorder};
    stroke-width: 1;
  }
  .label {
    font-family: ${e.fontFamily};
    color: ${e.nodeTextColor||e.textColor};
  }
  .label text,span {
    fill: ${e.nodeTextColor||e.textColor};
    color: ${e.nodeTextColor||e.textColor};
  }
  .labelBkg {
    background-color: ${e.edgeLabelBackground};
  }

`,"getStyles"),EI=SI,yk={};_h(yk,{draw:()=>_I});var _I=g(async function(e,t,r,a){G.info("REF0:"),G.info("Drawing requirement diagram (unified)",t);const{securityLevel:i,state:n,layout:s}=dt(),o=a.db.getData(),l=pc(t,i);o.type=a.type,o.layoutAlgorithm=Oh(s),o.nodeSpacing=(n==null?void 0:n.nodeSpacing)??50,o.rankSpacing=(n==null?void 0:n.rankSpacing)??50,o.markers=["requirement_contains","requirement_arrow"],o.diagramId=t,await fc(o,l);const u=8;xe.insertTitle(l,"requirementDiagramTitleText",(n==null?void 0:n.titleTopMargin)??25,a.db.getDiagramTitle()),gc(l,u,"requirementDiagram",(n==null?void 0:n.useMaxWidth)??!0)},"draw"),AI={parser:TI,get db(){return new CI},renderer:yk,styles:EI};const LI=Object.freeze({__proto__:null,diagram:AI});var ng=function(){var e=g(function(ut,Q,K,j){for(K=K||{},j=ut.length;j--;K[ut[j]]=Q);return K},"o"),t=[1,2],r=[1,3],a=[1,4],i=[2,4],n=[1,9],s=[1,11],o=[1,13],l=[1,14],u=[1,16],h=[1,17],d=[1,18],f=[1,24],p=[1,25],y=[1,26],v=[1,27],m=[1,28],x=[1,29],b=[1,30],w=[1,31],C=[1,32],T=[1,33],k=[1,34],S=[1,35],L=[1,36],_=[1,37],A=[1,38],E=[1,39],D=[1,41],R=[1,42],O=[1,43],P=[1,44],$=[1,45],M=[1,46],I=[1,4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,48,49,50,52,53,54,59,60,61,62,70],F=[4,5,16,50,52,53],V=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,54,59,60,61,62,70],N=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,49,50,52,53,54,59,60,61,62,70],q=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,48,50,52,53,54,59,60,61,62,70],U=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,50,52,53,54,59,60,61,62,70],X=[68,69,70],lt=[1,122],J={trace:g(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,SD:6,document:7,line:8,statement:9,box_section:10,box_line:11,participant_statement:12,create:13,box:14,restOfLine:15,end:16,signal:17,autonumber:18,NUM:19,off:20,activate:21,actor:22,deactivate:23,note_statement:24,links_statement:25,link_statement:26,properties_statement:27,details_statement:28,title:29,legacy_title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,loop:36,rect:37,opt:38,alt:39,else_sections:40,par:41,par_sections:42,par_over:43,critical:44,option_sections:45,break:46,option:47,and:48,else:49,participant:50,AS:51,participant_actor:52,destroy:53,note:54,placement:55,text2:56,over:57,actor_pair:58,links:59,link:60,properties:61,details:62,spaceList:63,",":64,left_of:65,right_of:66,signaltype:67,"+":68,"-":69,ACTOR:70,SOLID_OPEN_ARROW:71,DOTTED_OPEN_ARROW:72,SOLID_ARROW:73,BIDIRECTIONAL_SOLID_ARROW:74,DOTTED_ARROW:75,BIDIRECTIONAL_DOTTED_ARROW:76,SOLID_CROSS:77,DOTTED_CROSS:78,SOLID_POINT:79,DOTTED_POINT:80,TXT:81,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",6:"SD",13:"create",14:"box",15:"restOfLine",16:"end",18:"autonumber",19:"NUM",20:"off",21:"activate",23:"deactivate",29:"title",30:"legacy_title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"loop",37:"rect",38:"opt",39:"alt",41:"par",43:"par_over",44:"critical",46:"break",47:"option",48:"and",49:"else",50:"participant",51:"AS",52:"participant_actor",53:"destroy",54:"note",57:"over",59:"links",60:"link",61:"properties",62:"details",64:",",65:"left_of",66:"right_of",68:"+",69:"-",70:"ACTOR",71:"SOLID_OPEN_ARROW",72:"DOTTED_OPEN_ARROW",73:"SOLID_ARROW",74:"BIDIRECTIONAL_SOLID_ARROW",75:"DOTTED_ARROW",76:"BIDIRECTIONAL_DOTTED_ARROW",77:"SOLID_CROSS",78:"DOTTED_CROSS",79:"SOLID_POINT",80:"DOTTED_POINT",81:"TXT"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[10,0],[10,2],[11,2],[11,1],[11,1],[9,1],[9,2],[9,4],[9,2],[9,4],[9,3],[9,3],[9,2],[9,3],[9,3],[9,2],[9,2],[9,2],[9,2],[9,2],[9,1],[9,1],[9,2],[9,2],[9,1],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[45,1],[45,4],[42,1],[42,4],[40,1],[40,4],[12,5],[12,3],[12,5],[12,3],[12,3],[24,4],[24,4],[25,3],[26,3],[27,3],[28,3],[63,2],[63,1],[58,3],[58,1],[55,1],[55,1],[17,5],[17,5],[17,4],[22,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[56,1]],performAction:g(function(Q,K,j,Y,st,W,bt){var tt=W.length-1;switch(st){case 3:return Y.apply(W[tt]),W[tt];case 4:case 9:this.$=[];break;case 5:case 10:W[tt-1].push(W[tt]),this.$=W[tt-1];break;case 6:case 7:case 11:case 12:this.$=W[tt];break;case 8:case 13:this.$=[];break;case 15:W[tt].type="createParticipant",this.$=W[tt];break;case 16:W[tt-1].unshift({type:"boxStart",boxData:Y.parseBoxData(W[tt-2])}),W[tt-1].push({type:"boxEnd",boxText:W[tt-2]}),this.$=W[tt-1];break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(W[tt-2]),sequenceIndexStep:Number(W[tt-1]),sequenceVisible:!0,signalType:Y.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceIndex:Number(W[tt-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:Y.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:Y.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:Y.LINETYPE.AUTONUMBER};break;case 22:this.$={type:"activeStart",signalType:Y.LINETYPE.ACTIVE_START,actor:W[tt-1].actor};break;case 23:this.$={type:"activeEnd",signalType:Y.LINETYPE.ACTIVE_END,actor:W[tt-1].actor};break;case 29:Y.setDiagramTitle(W[tt].substring(6)),this.$=W[tt].substring(6);break;case 30:Y.setDiagramTitle(W[tt].substring(7)),this.$=W[tt].substring(7);break;case 31:this.$=W[tt].trim(),Y.setAccTitle(this.$);break;case 32:case 33:this.$=W[tt].trim(),Y.setAccDescription(this.$);break;case 34:W[tt-1].unshift({type:"loopStart",loopText:Y.parseMessage(W[tt-2]),signalType:Y.LINETYPE.LOOP_START}),W[tt-1].push({type:"loopEnd",loopText:W[tt-2],signalType:Y.LINETYPE.LOOP_END}),this.$=W[tt-1];break;case 35:W[tt-1].unshift({type:"rectStart",color:Y.parseMessage(W[tt-2]),signalType:Y.LINETYPE.RECT_START}),W[tt-1].push({type:"rectEnd",color:Y.parseMessage(W[tt-2]),signalType:Y.LINETYPE.RECT_END}),this.$=W[tt-1];break;case 36:W[tt-1].unshift({type:"optStart",optText:Y.parseMessage(W[tt-2]),signalType:Y.LINETYPE.OPT_START}),W[tt-1].push({type:"optEnd",optText:Y.parseMessage(W[tt-2]),signalType:Y.LINETYPE.OPT_END}),this.$=W[tt-1];break;case 37:W[tt-1].unshift({type:"altStart",altText:Y.parseMessage(W[tt-2]),signalType:Y.LINETYPE.ALT_START}),W[tt-1].push({type:"altEnd",signalType:Y.LINETYPE.ALT_END}),this.$=W[tt-1];break;case 38:W[tt-1].unshift({type:"parStart",parText:Y.parseMessage(W[tt-2]),signalType:Y.LINETYPE.PAR_START}),W[tt-1].push({type:"parEnd",signalType:Y.LINETYPE.PAR_END}),this.$=W[tt-1];break;case 39:W[tt-1].unshift({type:"parStart",parText:Y.parseMessage(W[tt-2]),signalType:Y.LINETYPE.PAR_OVER_START}),W[tt-1].push({type:"parEnd",signalType:Y.LINETYPE.PAR_END}),this.$=W[tt-1];break;case 40:W[tt-1].unshift({type:"criticalStart",criticalText:Y.parseMessage(W[tt-2]),signalType:Y.LINETYPE.CRITICAL_START}),W[tt-1].push({type:"criticalEnd",signalType:Y.LINETYPE.CRITICAL_END}),this.$=W[tt-1];break;case 41:W[tt-1].unshift({type:"breakStart",breakText:Y.parseMessage(W[tt-2]),signalType:Y.LINETYPE.BREAK_START}),W[tt-1].push({type:"breakEnd",optText:Y.parseMessage(W[tt-2]),signalType:Y.LINETYPE.BREAK_END}),this.$=W[tt-1];break;case 43:this.$=W[tt-3].concat([{type:"option",optionText:Y.parseMessage(W[tt-1]),signalType:Y.LINETYPE.CRITICAL_OPTION},W[tt]]);break;case 45:this.$=W[tt-3].concat([{type:"and",parText:Y.parseMessage(W[tt-1]),signalType:Y.LINETYPE.PAR_AND},W[tt]]);break;case 47:this.$=W[tt-3].concat([{type:"else",altText:Y.parseMessage(W[tt-1]),signalType:Y.LINETYPE.ALT_ELSE},W[tt]]);break;case 48:W[tt-3].draw="participant",W[tt-3].type="addParticipant",W[tt-3].description=Y.parseMessage(W[tt-1]),this.$=W[tt-3];break;case 49:W[tt-1].draw="participant",W[tt-1].type="addParticipant",this.$=W[tt-1];break;case 50:W[tt-3].draw="actor",W[tt-3].type="addParticipant",W[tt-3].description=Y.parseMessage(W[tt-1]),this.$=W[tt-3];break;case 51:W[tt-1].draw="actor",W[tt-1].type="addParticipant",this.$=W[tt-1];break;case 52:W[tt-1].type="destroyParticipant",this.$=W[tt-1];break;case 53:this.$=[W[tt-1],{type:"addNote",placement:W[tt-2],actor:W[tt-1].actor,text:W[tt]}];break;case 54:W[tt-2]=[].concat(W[tt-1],W[tt-1]).slice(0,2),W[tt-2][0]=W[tt-2][0].actor,W[tt-2][1]=W[tt-2][1].actor,this.$=[W[tt-1],{type:"addNote",placement:Y.PLACEMENT.OVER,actor:W[tt-2].slice(0,2),text:W[tt]}];break;case 55:this.$=[W[tt-1],{type:"addLinks",actor:W[tt-1].actor,text:W[tt]}];break;case 56:this.$=[W[tt-1],{type:"addALink",actor:W[tt-1].actor,text:W[tt]}];break;case 57:this.$=[W[tt-1],{type:"addProperties",actor:W[tt-1].actor,text:W[tt]}];break;case 58:this.$=[W[tt-1],{type:"addDetails",actor:W[tt-1].actor,text:W[tt]}];break;case 61:this.$=[W[tt-2],W[tt]];break;case 62:this.$=W[tt];break;case 63:this.$=Y.PLACEMENT.LEFTOF;break;case 64:this.$=Y.PLACEMENT.RIGHTOF;break;case 65:this.$=[W[tt-4],W[tt-1],{type:"addMessage",from:W[tt-4].actor,to:W[tt-1].actor,signalType:W[tt-3],msg:W[tt],activate:!0},{type:"activeStart",signalType:Y.LINETYPE.ACTIVE_START,actor:W[tt-1].actor}];break;case 66:this.$=[W[tt-4],W[tt-1],{type:"addMessage",from:W[tt-4].actor,to:W[tt-1].actor,signalType:W[tt-3],msg:W[tt]},{type:"activeEnd",signalType:Y.LINETYPE.ACTIVE_END,actor:W[tt-4].actor}];break;case 67:this.$=[W[tt-3],W[tt-1],{type:"addMessage",from:W[tt-3].actor,to:W[tt-1].actor,signalType:W[tt-2],msg:W[tt]}];break;case 68:this.$={type:"addParticipant",actor:W[tt]};break;case 69:this.$=Y.LINETYPE.SOLID_OPEN;break;case 70:this.$=Y.LINETYPE.DOTTED_OPEN;break;case 71:this.$=Y.LINETYPE.SOLID;break;case 72:this.$=Y.LINETYPE.BIDIRECTIONAL_SOLID;break;case 73:this.$=Y.LINETYPE.DOTTED;break;case 74:this.$=Y.LINETYPE.BIDIRECTIONAL_DOTTED;break;case 75:this.$=Y.LINETYPE.SOLID_CROSS;break;case 76:this.$=Y.LINETYPE.DOTTED_CROSS;break;case 77:this.$=Y.LINETYPE.SOLID_POINT;break;case 78:this.$=Y.LINETYPE.DOTTED_POINT;break;case 79:this.$=Y.parseMessage(W[tt].trim().substring(1));break}},"anonymous"),table:[{3:1,4:t,5:r,6:a},{1:[3]},{3:5,4:t,5:r,6:a},{3:6,4:t,5:r,6:a},e([1,4,5,13,14,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,54,59,60,61,62,70],i,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:n,5:s,8:8,9:10,12:12,13:o,14:l,17:15,18:u,21:h,22:40,23:d,24:19,25:20,26:21,27:22,28:23,29:f,30:p,31:y,33:v,35:m,36:x,37:b,38:w,39:C,41:T,43:k,44:S,46:L,50:_,52:A,53:E,54:D,59:R,60:O,61:P,62:$,70:M},e(I,[2,5]),{9:47,12:12,13:o,14:l,17:15,18:u,21:h,22:40,23:d,24:19,25:20,26:21,27:22,28:23,29:f,30:p,31:y,33:v,35:m,36:x,37:b,38:w,39:C,41:T,43:k,44:S,46:L,50:_,52:A,53:E,54:D,59:R,60:O,61:P,62:$,70:M},e(I,[2,7]),e(I,[2,8]),e(I,[2,14]),{12:48,50:_,52:A,53:E},{15:[1,49]},{5:[1,50]},{5:[1,53],19:[1,51],20:[1,52]},{22:54,70:M},{22:55,70:M},{5:[1,56]},{5:[1,57]},{5:[1,58]},{5:[1,59]},{5:[1,60]},e(I,[2,29]),e(I,[2,30]),{32:[1,61]},{34:[1,62]},e(I,[2,33]),{15:[1,63]},{15:[1,64]},{15:[1,65]},{15:[1,66]},{15:[1,67]},{15:[1,68]},{15:[1,69]},{15:[1,70]},{22:71,70:M},{22:72,70:M},{22:73,70:M},{67:74,71:[1,75],72:[1,76],73:[1,77],74:[1,78],75:[1,79],76:[1,80],77:[1,81],78:[1,82],79:[1,83],80:[1,84]},{55:85,57:[1,86],65:[1,87],66:[1,88]},{22:89,70:M},{22:90,70:M},{22:91,70:M},{22:92,70:M},e([5,51,64,71,72,73,74,75,76,77,78,79,80,81],[2,68]),e(I,[2,6]),e(I,[2,15]),e(F,[2,9],{10:93}),e(I,[2,17]),{5:[1,95],19:[1,94]},{5:[1,96]},e(I,[2,21]),{5:[1,97]},{5:[1,98]},e(I,[2,24]),e(I,[2,25]),e(I,[2,26]),e(I,[2,27]),e(I,[2,28]),e(I,[2,31]),e(I,[2,32]),e(V,i,{7:99}),e(V,i,{7:100}),e(V,i,{7:101}),e(N,i,{40:102,7:103}),e(q,i,{42:104,7:105}),e(q,i,{7:105,42:106}),e(U,i,{45:107,7:108}),e(V,i,{7:109}),{5:[1,111],51:[1,110]},{5:[1,113],51:[1,112]},{5:[1,114]},{22:117,68:[1,115],69:[1,116],70:M},e(X,[2,69]),e(X,[2,70]),e(X,[2,71]),e(X,[2,72]),e(X,[2,73]),e(X,[2,74]),e(X,[2,75]),e(X,[2,76]),e(X,[2,77]),e(X,[2,78]),{22:118,70:M},{22:120,58:119,70:M},{70:[2,63]},{70:[2,64]},{56:121,81:lt},{56:123,81:lt},{56:124,81:lt},{56:125,81:lt},{4:[1,128],5:[1,130],11:127,12:129,16:[1,126],50:_,52:A,53:E},{5:[1,131]},e(I,[2,19]),e(I,[2,20]),e(I,[2,22]),e(I,[2,23]),{4:n,5:s,8:8,9:10,12:12,13:o,14:l,16:[1,132],17:15,18:u,21:h,22:40,23:d,24:19,25:20,26:21,27:22,28:23,29:f,30:p,31:y,33:v,35:m,36:x,37:b,38:w,39:C,41:T,43:k,44:S,46:L,50:_,52:A,53:E,54:D,59:R,60:O,61:P,62:$,70:M},{4:n,5:s,8:8,9:10,12:12,13:o,14:l,16:[1,133],17:15,18:u,21:h,22:40,23:d,24:19,25:20,26:21,27:22,28:23,29:f,30:p,31:y,33:v,35:m,36:x,37:b,38:w,39:C,41:T,43:k,44:S,46:L,50:_,52:A,53:E,54:D,59:R,60:O,61:P,62:$,70:M},{4:n,5:s,8:8,9:10,12:12,13:o,14:l,16:[1,134],17:15,18:u,21:h,22:40,23:d,24:19,25:20,26:21,27:22,28:23,29:f,30:p,31:y,33:v,35:m,36:x,37:b,38:w,39:C,41:T,43:k,44:S,46:L,50:_,52:A,53:E,54:D,59:R,60:O,61:P,62:$,70:M},{16:[1,135]},{4:n,5:s,8:8,9:10,12:12,13:o,14:l,16:[2,46],17:15,18:u,21:h,22:40,23:d,24:19,25:20,26:21,27:22,28:23,29:f,30:p,31:y,33:v,35:m,36:x,37:b,38:w,39:C,41:T,43:k,44:S,46:L,49:[1,136],50:_,52:A,53:E,54:D,59:R,60:O,61:P,62:$,70:M},{16:[1,137]},{4:n,5:s,8:8,9:10,12:12,13:o,14:l,16:[2,44],17:15,18:u,21:h,22:40,23:d,24:19,25:20,26:21,27:22,28:23,29:f,30:p,31:y,33:v,35:m,36:x,37:b,38:w,39:C,41:T,43:k,44:S,46:L,48:[1,138],50:_,52:A,53:E,54:D,59:R,60:O,61:P,62:$,70:M},{16:[1,139]},{16:[1,140]},{4:n,5:s,8:8,9:10,12:12,13:o,14:l,16:[2,42],17:15,18:u,21:h,22:40,23:d,24:19,25:20,26:21,27:22,28:23,29:f,30:p,31:y,33:v,35:m,36:x,37:b,38:w,39:C,41:T,43:k,44:S,46:L,47:[1,141],50:_,52:A,53:E,54:D,59:R,60:O,61:P,62:$,70:M},{4:n,5:s,8:8,9:10,12:12,13:o,14:l,16:[1,142],17:15,18:u,21:h,22:40,23:d,24:19,25:20,26:21,27:22,28:23,29:f,30:p,31:y,33:v,35:m,36:x,37:b,38:w,39:C,41:T,43:k,44:S,46:L,50:_,52:A,53:E,54:D,59:R,60:O,61:P,62:$,70:M},{15:[1,143]},e(I,[2,49]),{15:[1,144]},e(I,[2,51]),e(I,[2,52]),{22:145,70:M},{22:146,70:M},{56:147,81:lt},{56:148,81:lt},{56:149,81:lt},{64:[1,150],81:[2,62]},{5:[2,55]},{5:[2,79]},{5:[2,56]},{5:[2,57]},{5:[2,58]},e(I,[2,16]),e(F,[2,10]),{12:151,50:_,52:A,53:E},e(F,[2,12]),e(F,[2,13]),e(I,[2,18]),e(I,[2,34]),e(I,[2,35]),e(I,[2,36]),e(I,[2,37]),{15:[1,152]},e(I,[2,38]),{15:[1,153]},e(I,[2,39]),e(I,[2,40]),{15:[1,154]},e(I,[2,41]),{5:[1,155]},{5:[1,156]},{56:157,81:lt},{56:158,81:lt},{5:[2,67]},{5:[2,53]},{5:[2,54]},{22:159,70:M},e(F,[2,11]),e(N,i,{7:103,40:160}),e(q,i,{7:105,42:161}),e(U,i,{7:108,45:162}),e(I,[2,48]),e(I,[2,50]),{5:[2,65]},{5:[2,66]},{81:[2,61]},{16:[2,47]},{16:[2,45]},{16:[2,43]}],defaultActions:{5:[2,1],6:[2,2],87:[2,63],88:[2,64],121:[2,55],122:[2,79],123:[2,56],124:[2,57],125:[2,58],147:[2,67],148:[2,53],149:[2,54],157:[2,65],158:[2,66],159:[2,61],160:[2,47],161:[2,45],162:[2,43]},parseError:g(function(Q,K){if(K.recoverable)this.trace(Q);else{var j=new Error(Q);throw j.hash=K,j}},"parseError"),parse:g(function(Q){var K=this,j=[0],Y=[],st=[null],W=[],bt=this.table,tt="",H=0,Et=0,nt=2,Lt=1,Dt=W.slice.call(arguments,1),At=Object.create(this.lexer),xt={yy:{}};for(var _t in this.yy)Object.prototype.hasOwnProperty.call(this.yy,_t)&&(xt.yy[_t]=this.yy[_t]);At.setInput(Q,xt.yy),xt.yy.lexer=At,xt.yy.parser=this,typeof At.yylloc>"u"&&(At.yylloc={});var vt=At.yylloc;W.push(vt);var wt=At.options&&At.options.ranges;typeof xt.yy.parseError=="function"?this.parseError=xt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function St(kt){j.length=j.length-2*kt,st.length=st.length-kt,W.length=W.length-kt}g(St,"popStack");function at(){var kt;return kt=Y.pop()||At.lex()||Lt,typeof kt!="number"&&(kt instanceof Array&&(Y=kt,kt=Y.pop()),kt=K.symbols_[kt]||kt),kt}g(at,"lex");for(var Ct,z,ft,B,et={},Z,ht,ot,pt;;){if(z=j[j.length-1],this.defaultActions[z]?ft=this.defaultActions[z]:((Ct===null||typeof Ct>"u")&&(Ct=at()),ft=bt[z]&&bt[z][Ct]),typeof ft>"u"||!ft.length||!ft[0]){var gt="";pt=[];for(Z in bt[z])this.terminals_[Z]&&Z>nt&&pt.push("'"+this.terminals_[Z]+"'");At.showPosition?gt="Parse error on line "+(H+1)+`:
`+At.showPosition()+`
Expecting `+pt.join(", ")+", got '"+(this.terminals_[Ct]||Ct)+"'":gt="Parse error on line "+(H+1)+": Unexpected "+(Ct==Lt?"end of input":"'"+(this.terminals_[Ct]||Ct)+"'"),this.parseError(gt,{text:At.match,token:this.terminals_[Ct]||Ct,line:At.yylineno,loc:vt,expected:pt})}if(ft[0]instanceof Array&&ft.length>1)throw new Error("Parse Error: multiple actions possible at state: "+z+", token: "+Ct);switch(ft[0]){case 1:j.push(Ct),st.push(At.yytext),W.push(At.yylloc),j.push(ft[1]),Ct=null,Et=At.yyleng,tt=At.yytext,H=At.yylineno,vt=At.yylloc;break;case 2:if(ht=this.productions_[ft[1]][1],et.$=st[st.length-ht],et._$={first_line:W[W.length-(ht||1)].first_line,last_line:W[W.length-1].last_line,first_column:W[W.length-(ht||1)].first_column,last_column:W[W.length-1].last_column},wt&&(et._$.range=[W[W.length-(ht||1)].range[0],W[W.length-1].range[1]]),B=this.performAction.apply(et,[tt,Et,H,xt.yy,ft[1],st,W].concat(Dt)),typeof B<"u")return B;ht&&(j=j.slice(0,-1*ht*2),st=st.slice(0,-1*ht),W=W.slice(0,-1*ht)),j.push(this.productions_[ft[1]][0]),st.push(et.$),W.push(et._$),ot=bt[j[j.length-2]][j[j.length-1]],j.push(ot);break;case 3:return!0}}return!0},"parse")},ct=function(){var ut={EOF:1,parseError:g(function(K,j){if(this.yy.parser)this.yy.parser.parseError(K,j);else throw new Error(K)},"parseError"),setInput:g(function(Q,K){return this.yy=K||this.yy||{},this._input=Q,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:g(function(){var Q=this._input[0];this.yytext+=Q,this.yyleng++,this.offset++,this.match+=Q,this.matched+=Q;var K=Q.match(/(?:\r\n?|\n).*/g);return K?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Q},"input"),unput:g(function(Q){var K=Q.length,j=Q.split(/(?:\r\n?|\n)/g);this._input=Q+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-K),this.offset-=K;var Y=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),j.length-1&&(this.yylineno-=j.length-1);var st=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:j?(j.length===Y.length?this.yylloc.first_column:0)+Y[Y.length-j.length].length-j[0].length:this.yylloc.first_column-K},this.options.ranges&&(this.yylloc.range=[st[0],st[0]+this.yyleng-K]),this.yyleng=this.yytext.length,this},"unput"),more:g(function(){return this._more=!0,this},"more"),reject:g(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:g(function(Q){this.unput(this.match.slice(Q))},"less"),pastInput:g(function(){var Q=this.matched.substr(0,this.matched.length-this.match.length);return(Q.length>20?"...":"")+Q.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:g(function(){var Q=this.match;return Q.length<20&&(Q+=this._input.substr(0,20-Q.length)),(Q.substr(0,20)+(Q.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:g(function(){var Q=this.pastInput(),K=new Array(Q.length+1).join("-");return Q+this.upcomingInput()+`
`+K+"^"},"showPosition"),test_match:g(function(Q,K){var j,Y,st;if(this.options.backtrack_lexer&&(st={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(st.yylloc.range=this.yylloc.range.slice(0))),Y=Q[0].match(/(?:\r\n?|\n).*/g),Y&&(this.yylineno+=Y.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Y?Y[Y.length-1].length-Y[Y.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Q[0].length},this.yytext+=Q[0],this.match+=Q[0],this.matches=Q,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Q[0].length),this.matched+=Q[0],j=this.performAction.call(this,this.yy,this,K,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),j)return j;if(this._backtrack){for(var W in st)this[W]=st[W];return!1}return!1},"test_match"),next:g(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Q,K,j,Y;this._more||(this.yytext="",this.match="");for(var st=this._currentRules(),W=0;W<st.length;W++)if(j=this._input.match(this.rules[st[W]]),j&&(!K||j[0].length>K[0].length)){if(K=j,Y=W,this.options.backtrack_lexer){if(Q=this.test_match(j,st[W]),Q!==!1)return Q;if(this._backtrack){K=!1;continue}else return!1}else if(!this.options.flex)break}return K?(Q=this.test_match(K,st[Y]),Q!==!1?Q:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:g(function(){var K=this.next();return K||this.lex()},"lex"),begin:g(function(K){this.conditionStack.push(K)},"begin"),popState:g(function(){var K=this.conditionStack.length-1;return K>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:g(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:g(function(K){return K=this.conditionStack.length-1-Math.abs(K||0),K>=0?this.conditionStack[K]:"INITIAL"},"topState"),pushState:g(function(K){this.begin(K)},"pushState"),stateStackSize:g(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:g(function(K,j,Y,st){switch(Y){case 0:return 5;case 1:break;case 2:break;case 3:break;case 4:break;case 5:break;case 6:return 19;case 7:return this.begin("LINE"),14;case 8:return this.begin("ID"),50;case 9:return this.begin("ID"),52;case 10:return 13;case 11:return this.begin("ID"),53;case 12:return j.yytext=j.yytext.trim(),this.begin("ALIAS"),70;case 13:return this.popState(),this.popState(),this.begin("LINE"),51;case 14:return this.popState(),this.popState(),5;case 15:return this.begin("LINE"),36;case 16:return this.begin("LINE"),37;case 17:return this.begin("LINE"),38;case 18:return this.begin("LINE"),39;case 19:return this.begin("LINE"),49;case 20:return this.begin("LINE"),41;case 21:return this.begin("LINE"),43;case 22:return this.begin("LINE"),48;case 23:return this.begin("LINE"),44;case 24:return this.begin("LINE"),47;case 25:return this.begin("LINE"),46;case 26:return this.popState(),15;case 27:return 16;case 28:return 65;case 29:return 66;case 30:return 59;case 31:return 60;case 32:return 61;case 33:return 62;case 34:return 57;case 35:return 54;case 36:return this.begin("ID"),21;case 37:return this.begin("ID"),23;case 38:return 29;case 39:return 30;case 40:return this.begin("acc_title"),31;case 41:return this.popState(),"acc_title_value";case 42:return this.begin("acc_descr"),33;case 43:return this.popState(),"acc_descr_value";case 44:this.begin("acc_descr_multiline");break;case 45:this.popState();break;case 46:return"acc_descr_multiline_value";case 47:return 6;case 48:return 18;case 49:return 20;case 50:return 64;case 51:return 5;case 52:return j.yytext=j.yytext.trim(),70;case 53:return 73;case 54:return 74;case 55:return 75;case 56:return 76;case 57:return 71;case 58:return 72;case 59:return 77;case 60:return 78;case 61:return 79;case 62:return 80;case 63:return 81;case 64:return 68;case 65:return 69;case 66:return 5;case 67:return"INVALID"}},"anonymous"),rules:[/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:box\b)/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:create\b)/i,/^(?:destroy\b)/i,/^(?:[^\<->\->:\n,;]+?([\-]*[^\<->\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:par_over\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\+\<->\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+\<->\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:<<->>)/i,/^(?:-->>)/i,/^(?:<<-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[45,46],inclusive:!1},acc_descr:{rules:[43],inclusive:!1},acc_title:{rules:[41],inclusive:!1},ID:{rules:[2,3,12],inclusive:!1},ALIAS:{rules:[2,3,13,14],inclusive:!1},LINE:{rules:[2,3,26],inclusive:!1},INITIAL:{rules:[0,1,3,4,5,6,7,8,9,10,11,15,16,17,18,19,20,21,22,23,24,25,27,28,29,30,31,32,33,34,35,36,37,38,39,40,42,44,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67],inclusive:!0}}};return ut}();J.lexer=ct;function yt(){this.yy={}}return g(yt,"Parser"),yt.prototype=J,J.Parser=yt,new yt}();ng.parser=ng;var DI=ng,BI={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31,PAR_OVER_START:32,BIDIRECTIONAL_SOLID:33,BIDIRECTIONAL_DOTTED:34},RI={FILLED:0,OPEN:1},II={LEFTOF:0,RIGHTOF:1,OVER:2},xo,PI=(xo=class{constructor(){this.state=new D0(()=>({prevActor:void 0,actors:new Map,createdActors:new Map,destroyedActors:new Map,boxes:[],messages:[],notes:[],sequenceNumbersEnabled:!1,wrapEnabled:void 0,currentBox:void 0,lastCreated:void 0,lastDestroyed:void 0})),this.setAccTitle=vr,this.setAccDescription=Er,this.setDiagramTitle=Mr,this.getAccTitle=Sr,this.getAccDescription=_r,this.getDiagramTitle=br,this.apply=this.apply.bind(this),this.parseBoxData=this.parseBoxData.bind(this),this.parseMessage=this.parseMessage.bind(this),this.clear(),this.setWrap(dt().wrap),this.LINETYPE=BI,this.ARROWTYPE=RI,this.PLACEMENT=II}addBox(t){this.state.records.boxes.push({name:t.text,wrap:t.wrap??this.autoWrap(),fill:t.color,actorKeys:[]}),this.state.records.currentBox=this.state.records.boxes.slice(-1)[0]}addActor(t,r,a,i){let n=this.state.records.currentBox;const s=this.state.records.actors.get(t);if(s){if(this.state.records.currentBox&&s.box&&this.state.records.currentBox!==s.box)throw new Error(`A same participant should only be defined in one Box: ${s.name} can't be in '${s.box.name}' and in '${this.state.records.currentBox.name}' at the same time.`);if(n=s.box?s.box:this.state.records.currentBox,s.box=n,s&&r===s.name&&a==null)return}if((a==null?void 0:a.text)==null&&(a={text:r,type:i}),(i==null||a.text==null)&&(a={text:r,type:i}),this.state.records.actors.set(t,{box:n,name:r,description:a.text,wrap:a.wrap??this.autoWrap(),prevActor:this.state.records.prevActor,links:{},properties:{},actorCnt:null,rectData:null,type:i??"participant"}),this.state.records.prevActor){const o=this.state.records.actors.get(this.state.records.prevActor);o&&(o.nextActor=t)}this.state.records.currentBox&&this.state.records.currentBox.actorKeys.push(t),this.state.records.prevActor=t}activationCount(t){let r,a=0;if(!t)return 0;for(r=0;r<this.state.records.messages.length;r++)this.state.records.messages[r].type===this.LINETYPE.ACTIVE_START&&this.state.records.messages[r].from===t&&a++,this.state.records.messages[r].type===this.LINETYPE.ACTIVE_END&&this.state.records.messages[r].from===t&&a--;return a}addMessage(t,r,a,i){this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:t,to:r,message:a.text,wrap:a.wrap??this.autoWrap(),answer:i})}addSignal(t,r,a,i,n=!1){if(i===this.LINETYPE.ACTIVE_END&&this.activationCount(t??"")<1){const o=new Error("Trying to inactivate an inactive participant ("+t+")");throw o.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},o}return this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:t,to:r,message:(a==null?void 0:a.text)??"",wrap:(a==null?void 0:a.wrap)??this.autoWrap(),type:i,activate:n}),!0}hasAtLeastOneBox(){return this.state.records.boxes.length>0}hasAtLeastOneBoxWithTitle(){return this.state.records.boxes.some(t=>t.name)}getMessages(){return this.state.records.messages}getBoxes(){return this.state.records.boxes}getActors(){return this.state.records.actors}getCreatedActors(){return this.state.records.createdActors}getDestroyedActors(){return this.state.records.destroyedActors}getActor(t){return this.state.records.actors.get(t)}getActorKeys(){return[...this.state.records.actors.keys()]}enableSequenceNumbers(){this.state.records.sequenceNumbersEnabled=!0}disableSequenceNumbers(){this.state.records.sequenceNumbersEnabled=!1}showSequenceNumbers(){return this.state.records.sequenceNumbersEnabled}setWrap(t){this.state.records.wrapEnabled=t}extractWrap(t){if(t===void 0)return{};t=t.trim();const r=/^:?wrap:/.exec(t)!==null?!0:/^:?nowrap:/.exec(t)!==null?!1:void 0;return{cleanedText:(r===void 0?t:t.replace(/^:?(?:no)?wrap:/,"")).trim(),wrap:r}}autoWrap(){var t;return this.state.records.wrapEnabled!==void 0?this.state.records.wrapEnabled:((t=dt().sequence)==null?void 0:t.wrap)??!1}clear(){this.state.reset(),xr()}parseMessage(t){const r=t.trim(),{wrap:a,cleanedText:i}=this.extractWrap(r),n={text:i,wrap:a};return G.debug(`parseMessage: ${JSON.stringify(n)}`),n}parseBoxData(t){const r=/^((?:rgba?|hsla?)\s*\(.*\)|\w*)(.*)$/.exec(t);let a=r!=null&&r[1]?r[1].trim():"transparent",i=r!=null&&r[2]?r[2].trim():void 0;if(window!=null&&window.CSS)window.CSS.supports("color",a)||(a="transparent",i=t.trim());else{const o=new Option().style;o.color=a,o.color!==a&&(a="transparent",i=t.trim())}const{wrap:n,cleanedText:s}=this.extractWrap(i);return{text:s?qe(s,dt()):void 0,color:a,wrap:n}}addNote(t,r,a){const i={actor:t,placement:r,message:a.text,wrap:a.wrap??this.autoWrap()},n=[].concat(t,t);this.state.records.notes.push(i),this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:n[0],to:n[1],message:a.text,wrap:a.wrap??this.autoWrap(),type:this.LINETYPE.NOTE,placement:r})}addLinks(t,r){const a=this.getActor(t);try{let i=qe(r.text,dt());i=i.replace(/&equals;/g,"="),i=i.replace(/&amp;/g,"&");const n=JSON.parse(i);this.insertLinks(a,n)}catch(i){G.error("error while parsing actor link text",i)}}addALink(t,r){const a=this.getActor(t);try{const i={};let n=qe(r.text,dt());const s=n.indexOf("@");n=n.replace(/&equals;/g,"="),n=n.replace(/&amp;/g,"&");const o=n.slice(0,s-1).trim(),l=n.slice(s+1).trim();i[o]=l,this.insertLinks(a,i)}catch(i){G.error("error while parsing actor link text",i)}}insertLinks(t,r){if(t.links==null)t.links=r;else for(const a in r)t.links[a]=r[a]}addProperties(t,r){const a=this.getActor(t);try{const i=qe(r.text,dt()),n=JSON.parse(i);this.insertProperties(a,n)}catch(i){G.error("error while parsing actor properties text",i)}}insertProperties(t,r){if(t.properties==null)t.properties=r;else for(const a in r)t.properties[a]=r[a]}boxEnd(){this.state.records.currentBox=void 0}addDetails(t,r){const a=this.getActor(t),i=document.getElementById(r.text);try{const n=i.innerHTML,s=JSON.parse(n);s.properties&&this.insertProperties(a,s.properties),s.links&&this.insertLinks(a,s.links)}catch(n){G.error("error while parsing actor details text",n)}}getActorProperty(t,r){if((t==null?void 0:t.properties)!==void 0)return t.properties[r]}apply(t){if(Array.isArray(t))t.forEach(r=>{this.apply(r)});else switch(t.type){case"sequenceIndex":this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:void 0,to:void 0,message:{start:t.sequenceIndex,step:t.sequenceIndexStep,visible:t.sequenceVisible},wrap:!1,type:t.signalType});break;case"addParticipant":this.addActor(t.actor,t.actor,t.description,t.draw);break;case"createParticipant":if(this.state.records.actors.has(t.actor))throw new Error("It is not possible to have actors with the same id, even if one is destroyed before the next is created. Use 'AS' aliases to simulate the behavior");this.state.records.lastCreated=t.actor,this.addActor(t.actor,t.actor,t.description,t.draw),this.state.records.createdActors.set(t.actor,this.state.records.messages.length);break;case"destroyParticipant":this.state.records.lastDestroyed=t.actor,this.state.records.destroyedActors.set(t.actor,this.state.records.messages.length);break;case"activeStart":this.addSignal(t.actor,void 0,void 0,t.signalType);break;case"activeEnd":this.addSignal(t.actor,void 0,void 0,t.signalType);break;case"addNote":this.addNote(t.actor,t.placement,t.text);break;case"addLinks":this.addLinks(t.actor,t.text);break;case"addALink":this.addALink(t.actor,t.text);break;case"addProperties":this.addProperties(t.actor,t.text);break;case"addDetails":this.addDetails(t.actor,t.text);break;case"addMessage":if(this.state.records.lastCreated){if(t.to!==this.state.records.lastCreated)throw new Error("The created participant "+this.state.records.lastCreated.name+" does not have an associated creating message after its declaration. Please check the sequence diagram.");this.state.records.lastCreated=void 0}else if(this.state.records.lastDestroyed){if(t.to!==this.state.records.lastDestroyed&&t.from!==this.state.records.lastDestroyed)throw new Error("The destroyed participant "+this.state.records.lastDestroyed.name+" does not have an associated destroying message after its declaration. Please check the sequence diagram.");this.state.records.lastDestroyed=void 0}this.addSignal(t.from,t.to,t.msg,t.signalType,t.activate);break;case"boxStart":this.addBox(t.boxData);break;case"boxEnd":this.boxEnd();break;case"loopStart":this.addSignal(void 0,void 0,t.loopText,t.signalType);break;case"loopEnd":this.addSignal(void 0,void 0,void 0,t.signalType);break;case"rectStart":this.addSignal(void 0,void 0,t.color,t.signalType);break;case"rectEnd":this.addSignal(void 0,void 0,void 0,t.signalType);break;case"optStart":this.addSignal(void 0,void 0,t.optText,t.signalType);break;case"optEnd":this.addSignal(void 0,void 0,void 0,t.signalType);break;case"altStart":this.addSignal(void 0,void 0,t.altText,t.signalType);break;case"else":this.addSignal(void 0,void 0,t.altText,t.signalType);break;case"altEnd":this.addSignal(void 0,void 0,void 0,t.signalType);break;case"setAccTitle":vr(t.text);break;case"parStart":this.addSignal(void 0,void 0,t.parText,t.signalType);break;case"and":this.addSignal(void 0,void 0,t.parText,t.signalType);break;case"parEnd":this.addSignal(void 0,void 0,void 0,t.signalType);break;case"criticalStart":this.addSignal(void 0,void 0,t.criticalText,t.signalType);break;case"option":this.addSignal(void 0,void 0,t.optionText,t.signalType);break;case"criticalEnd":this.addSignal(void 0,void 0,void 0,t.signalType);break;case"breakStart":this.addSignal(void 0,void 0,t.breakText,t.signalType);break;case"breakEnd":this.addSignal(void 0,void 0,void 0,t.signalType);break}}getConfig(){return dt().sequence}},g(xo,"SequenceDB"),xo),NI=g(e=>`.actor {
    stroke: ${e.actorBorder};
    fill: ${e.actorBkg};
  }

  text.actor > tspan {
    fill: ${e.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${e.actorLineColor};
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${e.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${e.signalColor};
  }

  #arrowhead path {
    fill: ${e.signalColor};
    stroke: ${e.signalColor};
  }

  .sequenceNumber {
    fill: ${e.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${e.signalColor};
  }

  #crosshead path {
    fill: ${e.signalColor};
    stroke: ${e.signalColor};
  }

  .messageText {
    fill: ${e.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${e.labelBoxBorderColor};
    fill: ${e.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${e.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${e.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${e.labelBoxBorderColor};
    fill: ${e.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${e.noteBorderColor};
    fill: ${e.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${e.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${e.activationBkgColor};
    stroke: ${e.activationBorderColor};
  }

  .activation1 {
    fill: ${e.activationBkgColor};
    stroke: ${e.activationBorderColor};
  }

  .activation2 {
    fill: ${e.activationBkgColor};
    stroke: ${e.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${e.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${e.actorBorder};
    fill: ${e.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${e.actorBorder};
    fill: ${e.actorBkg};
    stroke-width: 2px;
  }
`,"getStyles"),MI=NI,Nn=18*2,vk="actor-top",mk="actor-bottom",FI="actor-box",My="actor-man",J0=g(function(e,t){return Vh(e,t)},"drawRect"),OI=g(function(e,t,r,a,i){if(t.links===void 0||t.links===null||Object.keys(t.links).length===0)return{height:0,width:0};const n=t.links,s=t.actorCnt,o=t.rectData;var l="none";i&&(l="block !important");const u=e.append("g");u.attr("id","actor"+s+"_popup"),u.attr("class","actorPopupMenu"),u.attr("display",l);var h="";o.class!==void 0&&(h=" "+o.class);let d=o.width>r?o.width:r;const f=u.append("rect");if(f.attr("class","actorPopupMenuPanel"+h),f.attr("x",o.x),f.attr("y",o.height),f.attr("fill",o.fill),f.attr("stroke",o.stroke),f.attr("width",d),f.attr("height",o.height),f.attr("rx",o.rx),f.attr("ry",o.ry),n!=null){var p=20;for(let m in n){var y=u.append("a"),v=Kn.sanitizeUrl(n[m]);y.attr("xlink:href",v),y.attr("target","_blank"),eP(a)(m,y,o.x+10,o.height+p,d,20,{class:"actor"},a),p+=30}}return f.attr("height",p),{height:o.height+p,width:d}},"drawPopup"),$I=g(function(e){return"var pu = document.getElementById('"+e+"'); if (pu != null) { pu.style.display = pu.style.display == 'block' ? 'none' : 'block'; }"},"popupMenuToggle"),nh=g(async function(e,t,r=null){let a=e.append("foreignObject");const i=await cc(t.text,$e()),s=a.append("xhtml:div").attr("style","width: fit-content;").attr("xmlns","http://www.w3.org/1999/xhtml").html(i).node().getBoundingClientRect();if(a.attr("height",Math.round(s.height)).attr("width",Math.round(s.width)),t.class==="noteText"){const o=e.node().firstChild;o.setAttribute("height",s.height+2*t.textMargin);const l=o.getBBox();a.attr("x",Math.round(l.x+l.width/2-s.width/2)).attr("y",Math.round(l.y+l.height/2-s.height/2))}else if(r){let{startx:o,stopx:l,starty:u}=r;if(o>l){const h=o;o=l,l=h}a.attr("x",Math.round(o+Math.abs(o-l)/2-s.width/2)),t.class==="loopText"?a.attr("y",Math.round(u)):a.attr("y",Math.round(u-s.height))}return[a]},"drawKatex"),Ro=g(function(e,t){let r=0,a=0;const i=t.text.split(Mt.lineBreakRegex),[n,s]=ln(t.fontSize);let o=[],l=0,u=g(()=>t.y,"yfunc");if(t.valign!==void 0&&t.textMargin!==void 0&&t.textMargin>0)switch(t.valign){case"top":case"start":u=g(()=>Math.round(t.y+t.textMargin),"yfunc");break;case"middle":case"center":u=g(()=>Math.round(t.y+(r+a+t.textMargin)/2),"yfunc");break;case"bottom":case"end":u=g(()=>Math.round(t.y+(r+a+2*t.textMargin)-t.textMargin),"yfunc");break}if(t.anchor!==void 0&&t.textMargin!==void 0&&t.width!==void 0)switch(t.anchor){case"left":case"start":t.x=Math.round(t.x+t.textMargin),t.anchor="start",t.dominantBaseline="middle",t.alignmentBaseline="middle";break;case"middle":case"center":t.x=Math.round(t.x+t.width/2),t.anchor="middle",t.dominantBaseline="middle",t.alignmentBaseline="middle";break;case"right":case"end":t.x=Math.round(t.x+t.width-t.textMargin),t.anchor="end",t.dominantBaseline="middle",t.alignmentBaseline="middle";break}for(let[h,d]of i.entries()){t.textMargin!==void 0&&t.textMargin===0&&n!==void 0&&(l=h*n);const f=e.append("text");f.attr("x",t.x),f.attr("y",u()),t.anchor!==void 0&&f.attr("text-anchor",t.anchor).attr("dominant-baseline",t.dominantBaseline).attr("alignment-baseline",t.alignmentBaseline),t.fontFamily!==void 0&&f.style("font-family",t.fontFamily),s!==void 0&&f.style("font-size",s),t.fontWeight!==void 0&&f.style("font-weight",t.fontWeight),t.fill!==void 0&&f.attr("fill",t.fill),t.class!==void 0&&f.attr("class",t.class),t.dy!==void 0?f.attr("dy",t.dy):l!==0&&f.attr("dy",l);const p=d||p4;if(t.tspan){const y=f.append("tspan");y.attr("x",t.x),t.fill!==void 0&&y.attr("fill",t.fill),y.text(p)}else f.text(p);t.valign!==void 0&&t.textMargin!==void 0&&t.textMargin>0&&(a+=(f._groups||f)[0][0].getBBox().height,r=a),o.push(f)}return o},"drawText"),xk=g(function(e,t){function r(i,n,s,o,l){return i+","+n+" "+(i+s)+","+n+" "+(i+s)+","+(n+o-l)+" "+(i+s-l*1.2)+","+(n+o)+" "+i+","+(n+o)}g(r,"genPoints");const a=e.append("polygon");return a.attr("points",r(t.x,t.y,t.width,t.height,7)),a.attr("class","labelBox"),t.y=t.y+t.height/2,Ro(e,t),a},"drawLabel"),ri=-1,bk=g((e,t,r,a)=>{e.select&&r.forEach(i=>{const n=t.get(i),s=e.select("#actor"+n.actorCnt);!a.mirrorActors&&n.stopy?s.attr("y2",n.stopy+n.height/2):a.mirrorActors&&s.attr("y2",n.stopy)})},"fixLifeLineHeights"),VI=g(function(e,t,r,a){var p,y;const i=a?t.stopy:t.starty,n=t.x+t.width/2,s=i+t.height,o=e.append("g").lower();var l=o;a||(ri++,Object.keys(t.links||{}).length&&!r.forceMenus&&l.attr("onclick",$I(`actor${ri}_popup`)).attr("cursor","pointer"),l.append("line").attr("id","actor"+ri).attr("x1",n).attr("y1",s).attr("x2",n).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",t.name),l=o.append("g"),t.actorCnt=ri,t.links!=null&&l.attr("id","root-"+ri));const u=jn();var h="actor";(p=t.properties)!=null&&p.class?h=t.properties.class:u.fill="#eaeaea",a?h+=` ${mk}`:h+=` ${vk}`,u.x=t.x,u.y=i,u.width=t.width,u.height=t.height,u.class=h,u.rx=3,u.ry=3,u.name=t.name;const d=J0(l,u);if(t.rectData=u,(y=t.properties)!=null&&y.icon){const v=t.properties.icon.trim();v.charAt(0)==="@"?FL(l,u.x+u.width-20,u.y+10,v.substr(1)):ML(l,u.x+u.width-20,u.y+10,v)}t1(r,qr(t.description))(t.description,l,u.x,u.y,u.width,u.height,{class:`actor ${FI}`},r);let f=t.height;if(d.node){const v=d.node().getBBox();t.height=v.height,f=v.height}return f},"drawActorTypeParticipant"),zI=g(function(e,t,r,a){const i=a?t.stopy:t.starty,n=t.x+t.width/2,s=i+80,o=e.append("g").lower();a||(ri++,o.append("line").attr("id","actor"+ri).attr("x1",n).attr("y1",s).attr("x2",n).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",t.name),t.actorCnt=ri);const l=e.append("g");let u=My;a?u+=` ${mk}`:u+=` ${vk}`,l.attr("class",u),l.attr("name",t.name);const h=jn();h.x=t.x,h.y=i,h.fill="#eaeaea",h.width=t.width,h.height=t.height,h.class="actor",h.rx=3,h.ry=3,l.append("line").attr("id","actor-man-torso"+ri).attr("x1",n).attr("y1",i+25).attr("x2",n).attr("y2",i+45),l.append("line").attr("id","actor-man-arms"+ri).attr("x1",n-Nn/2).attr("y1",i+33).attr("x2",n+Nn/2).attr("y2",i+33),l.append("line").attr("x1",n-Nn/2).attr("y1",i+60).attr("x2",n).attr("y2",i+45),l.append("line").attr("x1",n).attr("y1",i+45).attr("x2",n+Nn/2-2).attr("y2",i+60);const d=l.append("circle");d.attr("cx",t.x+t.width/2),d.attr("cy",i+10),d.attr("r",15),d.attr("width",t.width),d.attr("height",t.height);const f=l.node().getBBox();return t.height=f.height,t1(r,qr(t.description))(t.description,l,h.x,h.y+35,h.width,h.height,{class:`actor ${My}`},r),t.height},"drawActorTypeActor"),qI=g(async function(e,t,r,a){switch(t.type){case"actor":return await zI(e,t,r,a);case"participant":return await VI(e,t,r,a)}},"drawActor"),WI=g(function(e,t,r){const i=e.append("g");wk(i,t),t.name&&t1(r)(t.name,i,t.x,t.y+(t.textMaxHeight||0)/2,t.width,0,{class:"text"},r),i.lower()},"drawBox"),GI=g(function(e){return e.append("g")},"anchorElement"),HI=g(function(e,t,r,a,i){const n=jn(),s=t.anchored;n.x=t.startx,n.y=t.starty,n.class="activation"+i%3,n.width=t.stopx-t.startx,n.height=r-t.starty,J0(s,n)},"drawActivation"),YI=g(async function(e,t,r,a){const{boxMargin:i,boxTextMargin:n,labelBoxHeight:s,labelBoxWidth:o,messageFontFamily:l,messageFontSize:u,messageFontWeight:h}=a,d=e.append("g"),f=g(function(v,m,x,b){return d.append("line").attr("x1",v).attr("y1",m).attr("x2",x).attr("y2",b).attr("class","loopLine")},"drawLoopLine");f(t.startx,t.starty,t.stopx,t.starty),f(t.stopx,t.starty,t.stopx,t.stopy),f(t.startx,t.stopy,t.stopx,t.stopy),f(t.startx,t.starty,t.startx,t.stopy),t.sections!==void 0&&t.sections.forEach(function(v){f(t.startx,v.y,t.stopx,v.y).style("stroke-dasharray","3, 3")});let p=C0();p.text=r,p.x=t.startx,p.y=t.starty,p.fontFamily=l,p.fontSize=u,p.fontWeight=h,p.anchor="middle",p.valign="middle",p.tspan=!1,p.width=o||50,p.height=s||20,p.textMargin=n,p.class="labelText",xk(d,p),p=kk(),p.text=t.title,p.x=t.startx+o/2+(t.stopx-t.startx)/2,p.y=t.starty+i+n,p.anchor="middle",p.valign="middle",p.textMargin=n,p.class="loopText",p.fontFamily=l,p.fontSize=u,p.fontWeight=h,p.wrap=!0;let y=qr(p.text)?await nh(d,p,t):Ro(d,p);if(t.sectionTitles!==void 0){for(const[v,m]of Object.entries(t.sectionTitles))if(m.message){p.text=m.message,p.x=t.startx+(t.stopx-t.startx)/2,p.y=t.sections[v].y+i+n,p.class="loopText",p.anchor="middle",p.valign="middle",p.tspan=!1,p.fontFamily=l,p.fontSize=u,p.fontWeight=h,p.wrap=t.wrap,qr(p.text)?(t.starty=t.sections[v].y,await nh(d,p,t)):Ro(d,p);let x=Math.round(y.map(b=>(b._groups||b)[0][0].getBBox().height).reduce((b,w)=>b+w));t.sections[v].height+=x-(i+n)}}return t.height=Math.round(t.stopy-t.starty),d},"drawLoop"),wk=g(function(e,t){Z3(e,t)},"drawBackgroundRect"),UI=g(function(e){e.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},"insertDatabaseIcon"),XI=g(function(e){e.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},"insertComputerIcon"),KI=g(function(e){e.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},"insertClockIcon"),jI=g(function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",7.9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto-start-reverse").append("path").attr("d","M -1 0 L 10 5 L 0 10 z")},"insertArrowHead"),QI=g(function(e){e.append("defs").append("marker").attr("id","filled-head").attr("refX",15.5).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"insertArrowFilledHead"),ZI=g(function(e){e.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},"insertSequenceNumber"),JI=g(function(e){e.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",4.5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},"insertArrowCrossHead"),kk=g(function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},"getTextObj"),tP=g(function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},"getNoteRect"),t1=function(){function e(n,s,o,l,u,h,d){const f=s.append("text").attr("x",o+u/2).attr("y",l+h/2+5).style("text-anchor","middle").text(n);i(f,d)}g(e,"byText");function t(n,s,o,l,u,h,d,f){const{actorFontSize:p,actorFontFamily:y,actorFontWeight:v}=f,[m,x]=ln(p),b=n.split(Mt.lineBreakRegex);for(let w=0;w<b.length;w++){const C=w*m-m*(b.length-1)/2,T=s.append("text").attr("x",o+u/2).attr("y",l).style("text-anchor","middle").style("font-size",x).style("font-weight",v).style("font-family",y);T.append("tspan").attr("x",o+u/2).attr("dy",C).text(b[w]),T.attr("y",l+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),i(T,d)}}g(t,"byTspan");function r(n,s,o,l,u,h,d,f){const p=s.append("switch"),v=p.append("foreignObject").attr("x",o).attr("y",l).attr("width",u).attr("height",h).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");v.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),t(n,p,o,l,u,h,d,f),i(v,d)}g(r,"byFo");async function a(n,s,o,l,u,h,d,f){const p=await lc(n,$e()),y=s.append("switch"),m=y.append("foreignObject").attr("x",o+u/2-p.width/2).attr("y",l+h/2-p.height/2).attr("width",p.width).attr("height",p.height).append("xhtml:div").style("height","100%").style("width","100%");m.append("div").style("text-align","center").style("vertical-align","middle").html(await cc(n,$e())),t(n,y,o,l,u,h,d,f),i(m,d)}g(a,"byKatex");function i(n,s){for(const o in s)s.hasOwnProperty(o)&&n.attr(o,s[o])}return g(i,"_setTextAttrs"),function(n,s=!1){return s?a:n.textPlacement==="fo"?r:n.textPlacement==="old"?e:t}}(),eP=function(){function e(i,n,s,o,l,u,h){const d=n.append("text").attr("x",s).attr("y",o).style("text-anchor","start").text(i);a(d,h)}g(e,"byText");function t(i,n,s,o,l,u,h,d){const{actorFontSize:f,actorFontFamily:p,actorFontWeight:y}=d,v=i.split(Mt.lineBreakRegex);for(let m=0;m<v.length;m++){const x=m*f-f*(v.length-1)/2,b=n.append("text").attr("x",s).attr("y",o).style("text-anchor","start").style("font-size",f).style("font-weight",y).style("font-family",p);b.append("tspan").attr("x",s).attr("dy",x).text(v[m]),b.attr("y",o+u/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),a(b,h)}}g(t,"byTspan");function r(i,n,s,o,l,u,h,d){const f=n.append("switch"),y=f.append("foreignObject").attr("x",s).attr("y",o).attr("width",l).attr("height",u).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),t(i,f,s,o,l,u,h,d),a(y,h)}g(r,"byFo");function a(i,n){for(const s in n)n.hasOwnProperty(s)&&i.attr(s,n[s])}return g(a,"_setTextAttrs"),function(i){return i.textPlacement==="fo"?r:i.textPlacement==="old"?e:t}}(),rr={drawRect:J0,drawText:Ro,drawLabel:xk,drawActor:qI,drawBox:WI,drawPopup:OI,anchorElement:GI,drawActivation:HI,drawLoop:YI,drawBackgroundRect:wk,insertArrowHead:jI,insertArrowFilledHead:QI,insertSequenceNumber:ZI,insertArrowCrossHead:JI,insertDatabaseIcon:UI,insertComputerIcon:XI,insertClockIcon:KI,getTextObj:kk,getNoteRect:tP,fixLifeLineHeights:bk,sanitizeUrl:Kn.sanitizeUrl},mt={},Rt={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:g(function(){return Math.max.apply(null,this.actors.length===0?[0]:this.actors.map(e=>e.height||0))+(this.loops.length===0?0:this.loops.map(e=>e.height||0).reduce((e,t)=>e+t))+(this.messages.length===0?0:this.messages.map(e=>e.height||0).reduce((e,t)=>e+t))+(this.notes.length===0?0:this.notes.map(e=>e.height||0).reduce((e,t)=>e+t))},"getHeight"),clear:g(function(){this.actors=[],this.boxes=[],this.loops=[],this.messages=[],this.notes=[]},"clear"),addBox:g(function(e){this.boxes.push(e)},"addBox"),addActor:g(function(e){this.actors.push(e)},"addActor"),addLoop:g(function(e){this.loops.push(e)},"addLoop"),addMessage:g(function(e){this.messages.push(e)},"addMessage"),addNote:g(function(e){this.notes.push(e)},"addNote"),lastActor:g(function(){return this.actors[this.actors.length-1]},"lastActor"),lastLoop:g(function(){return this.loops[this.loops.length-1]},"lastLoop"),lastMessage:g(function(){return this.messages[this.messages.length-1]},"lastMessage"),lastNote:g(function(){return this.notes[this.notes.length-1]},"lastNote"),actors:[],boxes:[],loops:[],messages:[],notes:[]},init:g(function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,Sk(dt())},"init"),updateVal:g(function(e,t,r,a){e[t]===void 0?e[t]=r:e[t]=a(r,e[t])},"updateVal"),updateBounds:g(function(e,t,r,a){const i=this;let n=0;function s(o){return g(function(u){n++;const h=i.sequenceItems.length-n+1;i.updateVal(u,"starty",t-h*mt.boxMargin,Math.min),i.updateVal(u,"stopy",a+h*mt.boxMargin,Math.max),i.updateVal(Rt.data,"startx",e-h*mt.boxMargin,Math.min),i.updateVal(Rt.data,"stopx",r+h*mt.boxMargin,Math.max),o!=="activation"&&(i.updateVal(u,"startx",e-h*mt.boxMargin,Math.min),i.updateVal(u,"stopx",r+h*mt.boxMargin,Math.max),i.updateVal(Rt.data,"starty",t-h*mt.boxMargin,Math.min),i.updateVal(Rt.data,"stopy",a+h*mt.boxMargin,Math.max))},"updateItemBounds")}g(s,"updateFn"),this.sequenceItems.forEach(s()),this.activations.forEach(s("activation"))},"updateBounds"),insert:g(function(e,t,r,a){const i=Mt.getMin(e,r),n=Mt.getMax(e,r),s=Mt.getMin(t,a),o=Mt.getMax(t,a);this.updateVal(Rt.data,"startx",i,Math.min),this.updateVal(Rt.data,"starty",s,Math.min),this.updateVal(Rt.data,"stopx",n,Math.max),this.updateVal(Rt.data,"stopy",o,Math.max),this.updateBounds(i,s,n,o)},"insert"),newActivation:g(function(e,t,r){const a=r.get(e.from),i=Yh(e.from).length||0,n=a.x+a.width/2+(i-1)*mt.activationWidth/2;this.activations.push({startx:n,starty:this.verticalPos+2,stopx:n+mt.activationWidth,stopy:void 0,actor:e.from,anchored:rr.anchorElement(t)})},"newActivation"),endActivation:g(function(e){const t=this.activations.map(function(r){return r.actor}).lastIndexOf(e.from);return this.activations.splice(t,1)[0]},"endActivation"),createLoop:g(function(e={message:void 0,wrap:!1,width:void 0},t){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:e.message,wrap:e.wrap,width:e.width,height:0,fill:t}},"createLoop"),newLoop:g(function(e={message:void 0,wrap:!1,width:void 0},t){this.sequenceItems.push(this.createLoop(e,t))},"newLoop"),endLoop:g(function(){return this.sequenceItems.pop()},"endLoop"),isLoopOverlap:g(function(){return this.sequenceItems.length?this.sequenceItems[this.sequenceItems.length-1].overlap:!1},"isLoopOverlap"),addSectionToLoop:g(function(e){const t=this.sequenceItems.pop();t.sections=t.sections||[],t.sectionTitles=t.sectionTitles||[],t.sections.push({y:Rt.getVerticalPos(),height:0}),t.sectionTitles.push(e),this.sequenceItems.push(t)},"addSectionToLoop"),saveVerticalPos:g(function(){this.isLoopOverlap()&&(this.savedVerticalPos=this.verticalPos)},"saveVerticalPos"),resetVerticalPos:g(function(){this.isLoopOverlap()&&(this.verticalPos=this.savedVerticalPos)},"resetVerticalPos"),bumpVerticalPos:g(function(e){this.verticalPos=this.verticalPos+e,this.data.stopy=Mt.getMax(this.data.stopy,this.verticalPos)},"bumpVerticalPos"),getVerticalPos:g(function(){return this.verticalPos},"getVerticalPos"),getBounds:g(function(){return{bounds:this.data,models:this.models}},"getBounds")},rP=g(async function(e,t){Rt.bumpVerticalPos(mt.boxMargin),t.height=mt.boxMargin,t.starty=Rt.getVerticalPos();const r=jn();r.x=t.startx,r.y=t.starty,r.width=t.width||mt.width,r.class="note";const a=e.append("g"),i=rr.drawRect(a,r),n=C0();n.x=t.startx,n.y=t.starty,n.width=r.width,n.dy="1em",n.text=t.message,n.class="noteText",n.fontFamily=mt.noteFontFamily,n.fontSize=mt.noteFontSize,n.fontWeight=mt.noteFontWeight,n.anchor=mt.noteAlign,n.textMargin=mt.noteMargin,n.valign="center";const s=qr(n.text)?await nh(a,n):Ro(a,n),o=Math.round(s.map(l=>(l._groups||l)[0][0].getBBox().height).reduce((l,u)=>l+u));i.attr("height",o+2*mt.noteMargin),t.height+=o+2*mt.noteMargin,Rt.bumpVerticalPos(o+2*mt.noteMargin),t.stopy=t.starty+o+2*mt.noteMargin,t.stopx=t.startx+r.width,Rt.insert(t.startx,t.starty,t.stopx,t.stopy),Rt.models.addNote(t)},"drawNote"),Wn=g(e=>({fontFamily:e.messageFontFamily,fontSize:e.messageFontSize,fontWeight:e.messageFontWeight}),"messageFont"),ys=g(e=>({fontFamily:e.noteFontFamily,fontSize:e.noteFontSize,fontWeight:e.noteFontWeight}),"noteFont"),sg=g(e=>({fontFamily:e.actorFontFamily,fontSize:e.actorFontSize,fontWeight:e.actorFontWeight}),"actorFont");async function Tk(e,t){Rt.bumpVerticalPos(10);const{startx:r,stopx:a,message:i}=t,n=Mt.splitBreaks(i).length,s=qr(i),o=s?await lc(i,dt()):xe.calculateTextDimensions(i,Wn(mt));if(!s){const d=o.height/n;t.height+=d,Rt.bumpVerticalPos(d)}let l,u=o.height-10;const h=o.width;if(r===a){l=Rt.getVerticalPos()+u,mt.rightAngles||(u+=mt.boxMargin,l=Rt.getVerticalPos()+u),u+=30;const d=Mt.getMax(h/2,mt.width/2);Rt.insert(r-d,Rt.getVerticalPos()-10+u,a+d,Rt.getVerticalPos()+30+u)}else u+=mt.boxMargin,l=Rt.getVerticalPos()+u,Rt.insert(r,l-10,a,l);return Rt.bumpVerticalPos(u),t.height+=u,t.stopy=t.starty+t.height,Rt.insert(t.fromBounds,t.starty,t.toBounds,t.stopy),l}g(Tk,"boundMessage");var aP=g(async function(e,t,r,a){const{startx:i,stopx:n,starty:s,message:o,type:l,sequenceIndex:u,sequenceVisible:h}=t,d=xe.calculateTextDimensions(o,Wn(mt)),f=C0();f.x=i,f.y=s+10,f.width=n-i,f.class="messageText",f.dy="1em",f.text=o,f.fontFamily=mt.messageFontFamily,f.fontSize=mt.messageFontSize,f.fontWeight=mt.messageFontWeight,f.anchor=mt.messageAlign,f.valign="center",f.textMargin=mt.wrapPadding,f.tspan=!1,qr(f.text)?await nh(e,f,{startx:i,stopx:n,starty:r}):Ro(e,f);const p=d.width;let y;i===n?mt.rightAngles?y=e.append("path").attr("d",`M  ${i},${r} H ${i+Mt.getMax(mt.width/2,p/2)} V ${r+25} H ${i}`):y=e.append("path").attr("d","M "+i+","+r+" C "+(i+60)+","+(r-10)+" "+(i+60)+","+(r+30)+" "+i+","+(r+20)):(y=e.append("line"),y.attr("x1",i),y.attr("y1",r),y.attr("x2",n),y.attr("y2",r)),l===a.db.LINETYPE.DOTTED||l===a.db.LINETYPE.DOTTED_CROSS||l===a.db.LINETYPE.DOTTED_POINT||l===a.db.LINETYPE.DOTTED_OPEN||l===a.db.LINETYPE.BIDIRECTIONAL_DOTTED?(y.style("stroke-dasharray","3, 3"),y.attr("class","messageLine1")):y.attr("class","messageLine0");let v="";mt.arrowMarkerAbsolute&&(v=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,v=v.replace(/\(/g,"\\("),v=v.replace(/\)/g,"\\)")),y.attr("stroke-width",2),y.attr("stroke","none"),y.style("fill","none"),(l===a.db.LINETYPE.SOLID||l===a.db.LINETYPE.DOTTED)&&y.attr("marker-end","url("+v+"#arrowhead)"),(l===a.db.LINETYPE.BIDIRECTIONAL_SOLID||l===a.db.LINETYPE.BIDIRECTIONAL_DOTTED)&&(y.attr("marker-start","url("+v+"#arrowhead)"),y.attr("marker-end","url("+v+"#arrowhead)")),(l===a.db.LINETYPE.SOLID_POINT||l===a.db.LINETYPE.DOTTED_POINT)&&y.attr("marker-end","url("+v+"#filled-head)"),(l===a.db.LINETYPE.SOLID_CROSS||l===a.db.LINETYPE.DOTTED_CROSS)&&y.attr("marker-end","url("+v+"#crosshead)"),(h||mt.showSequenceNumbers)&&(y.attr("marker-start","url("+v+"#sequencenumber)"),e.append("text").attr("x",i).attr("y",r+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(u))},"drawMessage"),iP=g(function(e,t,r,a,i,n,s){let o=0,l=0,u,h=0;for(const d of a){const f=t.get(d),p=f.box;u&&u!=p&&(s||Rt.models.addBox(u),l+=mt.boxMargin+u.margin),p&&p!=u&&(s||(p.x=o+l,p.y=i),l+=p.margin),f.width=f.width||mt.width,f.height=Mt.getMax(f.height||mt.height,mt.height),f.margin=f.margin||mt.actorMargin,h=Mt.getMax(h,f.height),r.get(f.name)&&(l+=f.width/2),f.x=o+l,f.starty=Rt.getVerticalPos(),Rt.insert(f.x,i,f.x+f.width,f.height),o+=f.width+l,f.box&&(f.box.width=o+p.margin-f.box.x),l=f.margin,u=f.box,Rt.models.addActor(f)}u&&!s&&Rt.models.addBox(u),Rt.bumpVerticalPos(h)},"addActorRenderingData"),og=g(async function(e,t,r,a){if(a){let i=0;Rt.bumpVerticalPos(mt.boxMargin*2);for(const n of r){const s=t.get(n);s.stopy||(s.stopy=Rt.getVerticalPos());const o=await rr.drawActor(e,s,mt,!0);i=Mt.getMax(i,o)}Rt.bumpVerticalPos(i+mt.boxMargin)}else for(const i of r){const n=t.get(i);await rr.drawActor(e,n,mt,!1)}},"drawActors"),Ck=g(function(e,t,r,a){let i=0,n=0;for(const s of r){const o=t.get(s),l=sP(o),u=rr.drawPopup(e,o,l,mt,mt.forceMenus,a);u.height>i&&(i=u.height),u.width+o.x>n&&(n=u.width+o.x)}return{maxHeight:i,maxWidth:n}},"drawActorsPopup"),Sk=g(function(e){fr(mt,e),e.fontFamily&&(mt.actorFontFamily=mt.noteFontFamily=mt.messageFontFamily=e.fontFamily),e.fontSize&&(mt.actorFontSize=mt.noteFontSize=mt.messageFontSize=e.fontSize),e.fontWeight&&(mt.actorFontWeight=mt.noteFontWeight=mt.messageFontWeight=e.fontWeight)},"setConf"),Yh=g(function(e){return Rt.activations.filter(function(t){return t.actor===e})},"actorActivations"),Fy=g(function(e,t){const r=t.get(e),a=Yh(e),i=a.reduce(function(s,o){return Mt.getMin(s,o.startx)},r.x+r.width/2-1),n=a.reduce(function(s,o){return Mt.getMax(s,o.stopx)},r.x+r.width/2+1);return[i,n]},"activationBounds");function $a(e,t,r,a,i){Rt.bumpVerticalPos(r);let n=a;if(t.id&&t.message&&e[t.id]){const s=e[t.id].width,o=Wn(mt);t.message=xe.wrapLabel(`[${t.message}]`,s-2*mt.wrapPadding,o),t.width=s,t.wrap=!0;const l=xe.calculateTextDimensions(t.message,o),u=Mt.getMax(l.height,mt.labelBoxHeight);n=a+u,G.debug(`${u} - ${t.message}`)}i(t),Rt.bumpVerticalPos(n)}g($a,"adjustLoopHeightForWrap");function Ek(e,t,r,a,i,n,s){function o(u,h){u.x<i.get(e.from).x?(Rt.insert(t.stopx-h,t.starty,t.startx,t.stopy+u.height/2+mt.noteMargin),t.stopx=t.stopx+h):(Rt.insert(t.startx,t.starty,t.stopx+h,t.stopy+u.height/2+mt.noteMargin),t.stopx=t.stopx-h)}g(o,"receiverAdjustment");function l(u,h){u.x<i.get(e.to).x?(Rt.insert(t.startx-h,t.starty,t.stopx,t.stopy+u.height/2+mt.noteMargin),t.startx=t.startx+h):(Rt.insert(t.stopx,t.starty,t.startx+h,t.stopy+u.height/2+mt.noteMargin),t.startx=t.startx-h)}if(g(l,"senderAdjustment"),n.get(e.to)==a){const u=i.get(e.to),h=u.type=="actor"?Nn/2+3:u.width/2+3;o(u,h),u.starty=r-u.height/2,Rt.bumpVerticalPos(u.height/2)}else if(s.get(e.from)==a){const u=i.get(e.from);if(mt.mirrorActors){const h=u.type=="actor"?Nn/2:u.width/2;l(u,h)}u.stopy=r-u.height/2,Rt.bumpVerticalPos(u.height/2)}else if(s.get(e.to)==a){const u=i.get(e.to);if(mt.mirrorActors){const h=u.type=="actor"?Nn/2+3:u.width/2+3;o(u,h)}u.stopy=r-u.height/2,Rt.bumpVerticalPos(u.height/2)}}g(Ek,"adjustCreatedDestroyedData");var nP=g(async function(e,t,r,a){const{securityLevel:i,sequence:n}=dt();mt=n;let s;i==="sandbox"&&(s=It("#i"+t));const o=i==="sandbox"?It(s.nodes()[0].contentDocument.body):It("body"),l=i==="sandbox"?s.nodes()[0].contentDocument:document;Rt.init(),G.debug(a.db);const u=i==="sandbox"?o.select(`[id="${t}"]`):It(`[id="${t}"]`),h=a.db.getActors(),d=a.db.getCreatedActors(),f=a.db.getDestroyedActors(),p=a.db.getBoxes();let y=a.db.getActorKeys();const v=a.db.getMessages(),m=a.db.getDiagramTitle(),x=a.db.hasAtLeastOneBox(),b=a.db.hasAtLeastOneBoxWithTitle(),w=await _k(h,v,a);if(mt.height=await Ak(h,w,p),rr.insertComputerIcon(u),rr.insertDatabaseIcon(u),rr.insertClockIcon(u),x&&(Rt.bumpVerticalPos(mt.boxMargin),b&&Rt.bumpVerticalPos(p[0].textMaxHeight)),mt.hideUnusedParticipants===!0){const I=new Set;v.forEach(F=>{I.add(F.from),I.add(F.to)}),y=y.filter(F=>I.has(F))}iP(u,h,d,y,0,v,!1);const C=await cP(v,h,w,a);rr.insertArrowHead(u),rr.insertArrowCrossHead(u),rr.insertArrowFilledHead(u),rr.insertSequenceNumber(u);function T(I,F){const V=Rt.endActivation(I);V.starty+18>F&&(V.starty=F-6,F+=12),rr.drawActivation(u,V,F,mt,Yh(I.from).length),Rt.insert(V.startx,F-10,V.stopx,F)}g(T,"activeEnd");let k=1,S=1;const L=[],_=[];let A=0;for(const I of v){let F,V,N;switch(I.type){case a.db.LINETYPE.NOTE:Rt.resetVerticalPos(),V=I.noteModel,await rP(u,V);break;case a.db.LINETYPE.ACTIVE_START:Rt.newActivation(I,u,h);break;case a.db.LINETYPE.ACTIVE_END:T(I,Rt.getVerticalPos());break;case a.db.LINETYPE.LOOP_START:$a(C,I,mt.boxMargin,mt.boxMargin+mt.boxTextMargin,q=>Rt.newLoop(q));break;case a.db.LINETYPE.LOOP_END:F=Rt.endLoop(),await rr.drawLoop(u,F,"loop",mt),Rt.bumpVerticalPos(F.stopy-Rt.getVerticalPos()),Rt.models.addLoop(F);break;case a.db.LINETYPE.RECT_START:$a(C,I,mt.boxMargin,mt.boxMargin,q=>Rt.newLoop(void 0,q.message));break;case a.db.LINETYPE.RECT_END:F=Rt.endLoop(),_.push(F),Rt.models.addLoop(F),Rt.bumpVerticalPos(F.stopy-Rt.getVerticalPos());break;case a.db.LINETYPE.OPT_START:$a(C,I,mt.boxMargin,mt.boxMargin+mt.boxTextMargin,q=>Rt.newLoop(q));break;case a.db.LINETYPE.OPT_END:F=Rt.endLoop(),await rr.drawLoop(u,F,"opt",mt),Rt.bumpVerticalPos(F.stopy-Rt.getVerticalPos()),Rt.models.addLoop(F);break;case a.db.LINETYPE.ALT_START:$a(C,I,mt.boxMargin,mt.boxMargin+mt.boxTextMargin,q=>Rt.newLoop(q));break;case a.db.LINETYPE.ALT_ELSE:$a(C,I,mt.boxMargin+mt.boxTextMargin,mt.boxMargin,q=>Rt.addSectionToLoop(q));break;case a.db.LINETYPE.ALT_END:F=Rt.endLoop(),await rr.drawLoop(u,F,"alt",mt),Rt.bumpVerticalPos(F.stopy-Rt.getVerticalPos()),Rt.models.addLoop(F);break;case a.db.LINETYPE.PAR_START:case a.db.LINETYPE.PAR_OVER_START:$a(C,I,mt.boxMargin,mt.boxMargin+mt.boxTextMargin,q=>Rt.newLoop(q)),Rt.saveVerticalPos();break;case a.db.LINETYPE.PAR_AND:$a(C,I,mt.boxMargin+mt.boxTextMargin,mt.boxMargin,q=>Rt.addSectionToLoop(q));break;case a.db.LINETYPE.PAR_END:F=Rt.endLoop(),await rr.drawLoop(u,F,"par",mt),Rt.bumpVerticalPos(F.stopy-Rt.getVerticalPos()),Rt.models.addLoop(F);break;case a.db.LINETYPE.AUTONUMBER:k=I.message.start||k,S=I.message.step||S,I.message.visible?a.db.enableSequenceNumbers():a.db.disableSequenceNumbers();break;case a.db.LINETYPE.CRITICAL_START:$a(C,I,mt.boxMargin,mt.boxMargin+mt.boxTextMargin,q=>Rt.newLoop(q));break;case a.db.LINETYPE.CRITICAL_OPTION:$a(C,I,mt.boxMargin+mt.boxTextMargin,mt.boxMargin,q=>Rt.addSectionToLoop(q));break;case a.db.LINETYPE.CRITICAL_END:F=Rt.endLoop(),await rr.drawLoop(u,F,"critical",mt),Rt.bumpVerticalPos(F.stopy-Rt.getVerticalPos()),Rt.models.addLoop(F);break;case a.db.LINETYPE.BREAK_START:$a(C,I,mt.boxMargin,mt.boxMargin+mt.boxTextMargin,q=>Rt.newLoop(q));break;case a.db.LINETYPE.BREAK_END:F=Rt.endLoop(),await rr.drawLoop(u,F,"break",mt),Rt.bumpVerticalPos(F.stopy-Rt.getVerticalPos()),Rt.models.addLoop(F);break;default:try{N=I.msgModel,N.starty=Rt.getVerticalPos(),N.sequenceIndex=k,N.sequenceVisible=a.db.showSequenceNumbers();const q=await Tk(u,N);Ek(I,N,q,A,h,d,f),L.push({messageModel:N,lineStartY:q}),Rt.models.addMessage(N)}catch(q){G.error("error while drawing message",q)}}[a.db.LINETYPE.SOLID_OPEN,a.db.LINETYPE.DOTTED_OPEN,a.db.LINETYPE.SOLID,a.db.LINETYPE.DOTTED,a.db.LINETYPE.SOLID_CROSS,a.db.LINETYPE.DOTTED_CROSS,a.db.LINETYPE.SOLID_POINT,a.db.LINETYPE.DOTTED_POINT,a.db.LINETYPE.BIDIRECTIONAL_SOLID,a.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(I.type)&&(k=k+S),A++}G.debug("createdActors",d),G.debug("destroyedActors",f),await og(u,h,y,!1);for(const I of L)await aP(u,I.messageModel,I.lineStartY,a);mt.mirrorActors&&await og(u,h,y,!0),_.forEach(I=>rr.drawBackgroundRect(u,I)),bk(u,h,y,mt);for(const I of Rt.models.boxes)I.height=Rt.getVerticalPos()-I.y,Rt.insert(I.x,I.y,I.x+I.width,I.height),I.startx=I.x,I.starty=I.y,I.stopx=I.startx+I.width,I.stopy=I.starty+I.height,I.stroke="rgb(0,0,0, 0.5)",rr.drawBox(u,I,mt);x&&Rt.bumpVerticalPos(mt.boxMargin);const E=Ck(u,h,y,l),{bounds:D}=Rt.getBounds();D.startx===void 0&&(D.startx=0),D.starty===void 0&&(D.starty=0),D.stopx===void 0&&(D.stopx=0),D.stopy===void 0&&(D.stopy=0);let R=D.stopy-D.starty;R<E.maxHeight&&(R=E.maxHeight);let O=R+2*mt.diagramMarginY;mt.mirrorActors&&(O=O-mt.boxMargin+mt.bottomMarginAdj);let P=D.stopx-D.startx;P<E.maxWidth&&(P=E.maxWidth);const $=P+2*mt.diagramMarginX;m&&u.append("text").text(m).attr("x",(D.stopx-D.startx)/2-2*mt.diagramMarginX).attr("y",-25),da(u,O,$,mt.useMaxWidth);const M=m?40:0;u.attr("viewBox",D.startx-mt.diagramMarginX+" -"+(mt.diagramMarginY+M)+" "+$+" "+(O+M)),G.debug("models:",Rt.models)},"draw");async function _k(e,t,r){const a={};for(const i of t)if(e.get(i.to)&&e.get(i.from)){const n=e.get(i.to);if(i.placement===r.db.PLACEMENT.LEFTOF&&!n.prevActor||i.placement===r.db.PLACEMENT.RIGHTOF&&!n.nextActor)continue;const s=i.placement!==void 0,o=!s,l=s?ys(mt):Wn(mt),u=i.wrap?xe.wrapLabel(i.message,mt.width-2*mt.wrapPadding,l):i.message,d=(qr(u)?await lc(i.message,dt()):xe.calculateTextDimensions(u,l)).width+2*mt.wrapPadding;o&&i.from===n.nextActor?a[i.to]=Mt.getMax(a[i.to]||0,d):o&&i.from===n.prevActor?a[i.from]=Mt.getMax(a[i.from]||0,d):o&&i.from===i.to?(a[i.from]=Mt.getMax(a[i.from]||0,d/2),a[i.to]=Mt.getMax(a[i.to]||0,d/2)):i.placement===r.db.PLACEMENT.RIGHTOF?a[i.from]=Mt.getMax(a[i.from]||0,d):i.placement===r.db.PLACEMENT.LEFTOF?a[n.prevActor]=Mt.getMax(a[n.prevActor]||0,d):i.placement===r.db.PLACEMENT.OVER&&(n.prevActor&&(a[n.prevActor]=Mt.getMax(a[n.prevActor]||0,d/2)),n.nextActor&&(a[i.from]=Mt.getMax(a[i.from]||0,d/2)))}return G.debug("maxMessageWidthPerActor:",a),a}g(_k,"getMaxMessageWidthPerActor");var sP=g(function(e){let t=0;const r=sg(mt);for(const a in e.links){const n=xe.calculateTextDimensions(a,r).width+2*mt.wrapPadding+2*mt.boxMargin;t<n&&(t=n)}return t},"getRequiredPopupWidth");async function Ak(e,t,r){let a=0;for(const n of e.keys()){const s=e.get(n);s.wrap&&(s.description=xe.wrapLabel(s.description,mt.width-2*mt.wrapPadding,sg(mt)));const o=qr(s.description)?await lc(s.description,dt()):xe.calculateTextDimensions(s.description,sg(mt));s.width=s.wrap?mt.width:Mt.getMax(mt.width,o.width+2*mt.wrapPadding),s.height=s.wrap?Mt.getMax(o.height,mt.height):mt.height,a=Mt.getMax(a,s.height)}for(const n in t){const s=e.get(n);if(!s)continue;const o=e.get(s.nextActor);if(!o){const d=t[n]+mt.actorMargin-s.width/2;s.margin=Mt.getMax(d,mt.actorMargin);continue}const u=t[n]+mt.actorMargin-s.width/2-o.width/2;s.margin=Mt.getMax(u,mt.actorMargin)}let i=0;return r.forEach(n=>{const s=Wn(mt);let o=n.actorKeys.reduce((h,d)=>h+=e.get(d).width+(e.get(d).margin||0),0);o-=2*mt.boxTextMargin,n.wrap&&(n.name=xe.wrapLabel(n.name,o-2*mt.wrapPadding,s));const l=xe.calculateTextDimensions(n.name,s);i=Mt.getMax(l.height,i);const u=Mt.getMax(o,l.width+2*mt.wrapPadding);if(n.margin=mt.boxTextMargin,o<u){const h=(u-o)/2;n.margin+=h}}),r.forEach(n=>n.textMaxHeight=i),Mt.getMax(a,mt.height)}g(Ak,"calculateActorMargins");var oP=g(async function(e,t,r){const a=t.get(e.from),i=t.get(e.to),n=a.x,s=i.x,o=e.wrap&&e.message;let l=qr(e.message)?await lc(e.message,dt()):xe.calculateTextDimensions(o?xe.wrapLabel(e.message,mt.width,ys(mt)):e.message,ys(mt));const u={width:o?mt.width:Mt.getMax(mt.width,l.width+2*mt.noteMargin),height:0,startx:a.x,stopx:0,starty:0,stopy:0,message:e.message};return e.placement===r.db.PLACEMENT.RIGHTOF?(u.width=o?Mt.getMax(mt.width,l.width):Mt.getMax(a.width/2+i.width/2,l.width+2*mt.noteMargin),u.startx=n+(a.width+mt.actorMargin)/2):e.placement===r.db.PLACEMENT.LEFTOF?(u.width=o?Mt.getMax(mt.width,l.width+2*mt.noteMargin):Mt.getMax(a.width/2+i.width/2,l.width+2*mt.noteMargin),u.startx=n-u.width+(a.width-mt.actorMargin)/2):e.to===e.from?(l=xe.calculateTextDimensions(o?xe.wrapLabel(e.message,Mt.getMax(mt.width,a.width),ys(mt)):e.message,ys(mt)),u.width=o?Mt.getMax(mt.width,a.width):Mt.getMax(a.width,mt.width,l.width+2*mt.noteMargin),u.startx=n+(a.width-u.width)/2):(u.width=Math.abs(n+a.width/2-(s+i.width/2))+mt.actorMargin,u.startx=n<s?n+a.width/2-mt.actorMargin/2:s+i.width/2-mt.actorMargin/2),o&&(u.message=xe.wrapLabel(e.message,u.width-2*mt.wrapPadding,ys(mt))),G.debug(`NM:[${u.startx},${u.stopx},${u.starty},${u.stopy}:${u.width},${u.height}=${e.message}]`),u},"buildNoteModel"),lP=g(function(e,t,r){if(![r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN,r.db.LINETYPE.SOLID,r.db.LINETYPE.DOTTED,r.db.LINETYPE.SOLID_CROSS,r.db.LINETYPE.DOTTED_CROSS,r.db.LINETYPE.SOLID_POINT,r.db.LINETYPE.DOTTED_POINT,r.db.LINETYPE.BIDIRECTIONAL_SOLID,r.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(e.type))return{};const[a,i]=Fy(e.from,t),[n,s]=Fy(e.to,t),o=a<=n;let l=o?i:a,u=o?n:s;const h=Math.abs(n-s)>2,d=g(v=>o?-v:v,"adjustValue");e.from===e.to?u=l:(e.activate&&!h&&(u+=d(mt.activationWidth/2-1)),[r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN].includes(e.type)||(u+=d(3)),[r.db.LINETYPE.BIDIRECTIONAL_SOLID,r.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(e.type)&&(l-=d(3)));const f=[a,i,n,s],p=Math.abs(l-u);e.wrap&&e.message&&(e.message=xe.wrapLabel(e.message,Mt.getMax(p+2*mt.wrapPadding,mt.width),Wn(mt)));const y=xe.calculateTextDimensions(e.message,Wn(mt));return{width:Mt.getMax(e.wrap?0:y.width+2*mt.wrapPadding,p+2*mt.wrapPadding,mt.width),height:0,startx:l,stopx:u,starty:0,stopy:0,message:e.message,type:e.type,wrap:e.wrap,fromBounds:Math.min.apply(null,f),toBounds:Math.max.apply(null,f)}},"buildMessageModel"),cP=g(async function(e,t,r,a){const i={},n=[];let s,o,l;for(const u of e){switch(u.type){case a.db.LINETYPE.LOOP_START:case a.db.LINETYPE.ALT_START:case a.db.LINETYPE.OPT_START:case a.db.LINETYPE.PAR_START:case a.db.LINETYPE.PAR_OVER_START:case a.db.LINETYPE.CRITICAL_START:case a.db.LINETYPE.BREAK_START:n.push({id:u.id,msg:u.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case a.db.LINETYPE.ALT_ELSE:case a.db.LINETYPE.PAR_AND:case a.db.LINETYPE.CRITICAL_OPTION:u.message&&(s=n.pop(),i[s.id]=s,i[u.id]=s,n.push(s));break;case a.db.LINETYPE.LOOP_END:case a.db.LINETYPE.ALT_END:case a.db.LINETYPE.OPT_END:case a.db.LINETYPE.PAR_END:case a.db.LINETYPE.CRITICAL_END:case a.db.LINETYPE.BREAK_END:s=n.pop(),i[s.id]=s;break;case a.db.LINETYPE.ACTIVE_START:{const d=t.get(u.from?u.from:u.to.actor),f=Yh(u.from?u.from:u.to.actor).length,p=d.x+d.width/2+(f-1)*mt.activationWidth/2,y={startx:p,stopx:p+mt.activationWidth,actor:u.from,enabled:!0};Rt.activations.push(y)}break;case a.db.LINETYPE.ACTIVE_END:{const d=Rt.activations.map(f=>f.actor).lastIndexOf(u.from);Rt.activations.splice(d,1).splice(0,1)}break}u.placement!==void 0?(o=await oP(u,t,a),u.noteModel=o,n.forEach(d=>{s=d,s.from=Mt.getMin(s.from,o.startx),s.to=Mt.getMax(s.to,o.startx+o.width),s.width=Mt.getMax(s.width,Math.abs(s.from-s.to))-mt.labelBoxWidth})):(l=lP(u,t,a),u.msgModel=l,l.startx&&l.stopx&&n.length>0&&n.forEach(d=>{if(s=d,l.startx===l.stopx){const f=t.get(u.from),p=t.get(u.to);s.from=Mt.getMin(f.x-l.width/2,f.x-f.width/2,s.from),s.to=Mt.getMax(p.x+l.width/2,p.x+f.width/2,s.to),s.width=Mt.getMax(s.width,Math.abs(s.to-s.from))-mt.labelBoxWidth}else s.from=Mt.getMin(l.startx,s.from),s.to=Mt.getMax(l.stopx,s.to),s.width=Mt.getMax(s.width,l.width)-mt.labelBoxWidth}))}return Rt.activations=[],G.debug("Loop type widths:",i),i},"calculateLoopBounds"),uP={bounds:Rt,drawActors:og,drawActorsPopup:Ck,setConf:Sk,draw:nP},hP={parser:DI,get db(){return new PI},renderer:uP,styles:MI,init:g(e=>{e.sequence||(e.sequence={}),e.wrap&&(e.sequence.wrap=e.wrap,vp({sequence:{wrap:e.wrap}}))},"init")};const dP=Object.freeze({__proto__:null,diagram:hP});var lg=function(){var e=g(function(_t,vt,wt,St){for(wt=wt||{},St=_t.length;St--;wt[_t[St]]=vt);return wt},"o"),t=[1,18],r=[1,19],a=[1,20],i=[1,41],n=[1,42],s=[1,26],o=[1,24],l=[1,25],u=[1,32],h=[1,33],d=[1,34],f=[1,45],p=[1,35],y=[1,36],v=[1,37],m=[1,38],x=[1,27],b=[1,28],w=[1,29],C=[1,30],T=[1,31],k=[1,44],S=[1,46],L=[1,43],_=[1,47],A=[1,9],E=[1,8,9],D=[1,58],R=[1,59],O=[1,60],P=[1,61],$=[1,62],M=[1,63],I=[1,64],F=[1,8,9,41],V=[1,76],N=[1,8,9,12,13,22,39,41,44,66,67,68,69,70,71,72,77,79],q=[1,8,9,12,13,17,20,22,39,41,44,48,58,66,67,68,69,70,71,72,77,79,84,99,101,102],U=[13,58,84,99,101,102],X=[13,58,71,72,84,99,101,102],lt=[13,58,66,67,68,69,70,84,99,101,102],J=[1,98],ct=[1,115],yt=[1,107],ut=[1,113],Q=[1,108],K=[1,109],j=[1,110],Y=[1,111],st=[1,112],W=[1,114],bt=[22,58,59,80,84,85,86,87,88,89],tt=[1,8,9,39,41,44],H=[1,8,9,22],Et=[1,143],nt=[1,8,9,59],Lt=[1,8,9,22,58,59,80,84,85,86,87,88,89],Dt={trace:g(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statements:5,graphConfig:6,CLASS_DIAGRAM:7,NEWLINE:8,EOF:9,statement:10,classLabel:11,SQS:12,STR:13,SQE:14,namespaceName:15,alphaNumToken:16,DOT:17,className:18,classLiteralName:19,GENERICTYPE:20,relationStatement:21,LABEL:22,namespaceStatement:23,classStatement:24,memberStatement:25,annotationStatement:26,clickStatement:27,styleStatement:28,cssClassStatement:29,noteStatement:30,classDefStatement:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,namespaceIdentifier:38,STRUCT_START:39,classStatements:40,STRUCT_STOP:41,NAMESPACE:42,classIdentifier:43,STYLE_SEPARATOR:44,members:45,CLASS:46,ANNOTATION_START:47,ANNOTATION_END:48,MEMBER:49,SEPARATOR:50,relation:51,NOTE_FOR:52,noteText:53,NOTE:54,CLASSDEF:55,classList:56,stylesOpt:57,ALPHA:58,COMMA:59,direction_tb:60,direction_bt:61,direction_rl:62,direction_lr:63,relationType:64,lineType:65,AGGREGATION:66,EXTENSION:67,COMPOSITION:68,DEPENDENCY:69,LOLLIPOP:70,LINE:71,DOTTED_LINE:72,CALLBACK:73,LINK:74,LINK_TARGET:75,CLICK:76,CALLBACK_NAME:77,CALLBACK_ARGS:78,HREF:79,STYLE:80,CSSCLASS:81,style:82,styleComponent:83,NUM:84,COLON:85,UNIT:86,SPACE:87,BRKT:88,PCT:89,commentToken:90,textToken:91,graphCodeTokens:92,textNoTagsToken:93,TAGSTART:94,TAGEND:95,"==":96,"--":97,DEFAULT:98,MINUS:99,keywords:100,UNICODE_TEXT:101,BQUOTE_STR:102,$accept:0,$end:1},terminals_:{2:"error",7:"CLASS_DIAGRAM",8:"NEWLINE",9:"EOF",12:"SQS",13:"STR",14:"SQE",17:"DOT",20:"GENERICTYPE",22:"LABEL",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",39:"STRUCT_START",41:"STRUCT_STOP",42:"NAMESPACE",44:"STYLE_SEPARATOR",46:"CLASS",47:"ANNOTATION_START",48:"ANNOTATION_END",49:"MEMBER",50:"SEPARATOR",52:"NOTE_FOR",54:"NOTE",55:"CLASSDEF",58:"ALPHA",59:"COMMA",60:"direction_tb",61:"direction_bt",62:"direction_rl",63:"direction_lr",66:"AGGREGATION",67:"EXTENSION",68:"COMPOSITION",69:"DEPENDENCY",70:"LOLLIPOP",71:"LINE",72:"DOTTED_LINE",73:"CALLBACK",74:"LINK",75:"LINK_TARGET",76:"CLICK",77:"CALLBACK_NAME",78:"CALLBACK_ARGS",79:"HREF",80:"STYLE",81:"CSSCLASS",84:"NUM",85:"COLON",86:"UNIT",87:"SPACE",88:"BRKT",89:"PCT",92:"graphCodeTokens",94:"TAGSTART",95:"TAGEND",96:"==",97:"--",98:"DEFAULT",99:"MINUS",100:"keywords",101:"UNICODE_TEXT",102:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[4,1],[6,4],[5,1],[5,2],[5,3],[11,3],[15,1],[15,3],[15,2],[18,1],[18,3],[18,1],[18,2],[18,2],[18,2],[10,1],[10,2],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[23,4],[23,5],[38,2],[40,1],[40,2],[40,3],[24,1],[24,3],[24,4],[24,6],[43,2],[43,3],[26,4],[45,1],[45,2],[25,1],[25,2],[25,1],[25,1],[21,3],[21,4],[21,4],[21,5],[30,3],[30,2],[31,3],[56,1],[56,3],[32,1],[32,1],[32,1],[32,1],[51,3],[51,2],[51,2],[51,1],[64,1],[64,1],[64,1],[64,1],[64,1],[65,1],[65,1],[27,3],[27,4],[27,3],[27,4],[27,4],[27,5],[27,3],[27,4],[27,4],[27,5],[27,4],[27,5],[27,5],[27,6],[28,3],[29,3],[57,1],[57,3],[82,1],[82,2],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[90,1],[90,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[93,1],[93,1],[93,1],[93,1],[16,1],[16,1],[16,1],[16,1],[19,1],[53,1]],performAction:g(function(vt,wt,St,at,Ct,z,ft){var B=z.length-1;switch(Ct){case 8:this.$=z[B-1];break;case 9:case 12:case 14:this.$=z[B];break;case 10:case 13:this.$=z[B-2]+"."+z[B];break;case 11:case 15:this.$=z[B-1]+z[B];break;case 16:case 17:this.$=z[B-1]+"~"+z[B]+"~";break;case 18:at.addRelation(z[B]);break;case 19:z[B-1].title=at.cleanupLabel(z[B]),at.addRelation(z[B-1]);break;case 30:this.$=z[B].trim(),at.setAccTitle(this.$);break;case 31:case 32:this.$=z[B].trim(),at.setAccDescription(this.$);break;case 33:at.addClassesToNamespace(z[B-3],z[B-1]);break;case 34:at.addClassesToNamespace(z[B-4],z[B-1]);break;case 35:this.$=z[B],at.addNamespace(z[B]);break;case 36:this.$=[z[B]];break;case 37:this.$=[z[B-1]];break;case 38:z[B].unshift(z[B-2]),this.$=z[B];break;case 40:at.setCssClass(z[B-2],z[B]);break;case 41:at.addMembers(z[B-3],z[B-1]);break;case 42:at.setCssClass(z[B-5],z[B-3]),at.addMembers(z[B-5],z[B-1]);break;case 43:this.$=z[B],at.addClass(z[B]);break;case 44:this.$=z[B-1],at.addClass(z[B-1]),at.setClassLabel(z[B-1],z[B]);break;case 45:at.addAnnotation(z[B],z[B-2]);break;case 46:case 59:this.$=[z[B]];break;case 47:z[B].push(z[B-1]),this.$=z[B];break;case 48:break;case 49:at.addMember(z[B-1],at.cleanupLabel(z[B]));break;case 50:break;case 51:break;case 52:this.$={id1:z[B-2],id2:z[B],relation:z[B-1],relationTitle1:"none",relationTitle2:"none"};break;case 53:this.$={id1:z[B-3],id2:z[B],relation:z[B-1],relationTitle1:z[B-2],relationTitle2:"none"};break;case 54:this.$={id1:z[B-3],id2:z[B],relation:z[B-2],relationTitle1:"none",relationTitle2:z[B-1]};break;case 55:this.$={id1:z[B-4],id2:z[B],relation:z[B-2],relationTitle1:z[B-3],relationTitle2:z[B-1]};break;case 56:at.addNote(z[B],z[B-1]);break;case 57:at.addNote(z[B]);break;case 58:this.$=z[B-2],at.defineClass(z[B-1],z[B]);break;case 60:this.$=z[B-2].concat([z[B]]);break;case 61:at.setDirection("TB");break;case 62:at.setDirection("BT");break;case 63:at.setDirection("RL");break;case 64:at.setDirection("LR");break;case 65:this.$={type1:z[B-2],type2:z[B],lineType:z[B-1]};break;case 66:this.$={type1:"none",type2:z[B],lineType:z[B-1]};break;case 67:this.$={type1:z[B-1],type2:"none",lineType:z[B]};break;case 68:this.$={type1:"none",type2:"none",lineType:z[B]};break;case 69:this.$=at.relationType.AGGREGATION;break;case 70:this.$=at.relationType.EXTENSION;break;case 71:this.$=at.relationType.COMPOSITION;break;case 72:this.$=at.relationType.DEPENDENCY;break;case 73:this.$=at.relationType.LOLLIPOP;break;case 74:this.$=at.lineType.LINE;break;case 75:this.$=at.lineType.DOTTED_LINE;break;case 76:case 82:this.$=z[B-2],at.setClickEvent(z[B-1],z[B]);break;case 77:case 83:this.$=z[B-3],at.setClickEvent(z[B-2],z[B-1]),at.setTooltip(z[B-2],z[B]);break;case 78:this.$=z[B-2],at.setLink(z[B-1],z[B]);break;case 79:this.$=z[B-3],at.setLink(z[B-2],z[B-1],z[B]);break;case 80:this.$=z[B-3],at.setLink(z[B-2],z[B-1]),at.setTooltip(z[B-2],z[B]);break;case 81:this.$=z[B-4],at.setLink(z[B-3],z[B-2],z[B]),at.setTooltip(z[B-3],z[B-1]);break;case 84:this.$=z[B-3],at.setClickEvent(z[B-2],z[B-1],z[B]);break;case 85:this.$=z[B-4],at.setClickEvent(z[B-3],z[B-2],z[B-1]),at.setTooltip(z[B-3],z[B]);break;case 86:this.$=z[B-3],at.setLink(z[B-2],z[B]);break;case 87:this.$=z[B-4],at.setLink(z[B-3],z[B-1],z[B]);break;case 88:this.$=z[B-4],at.setLink(z[B-3],z[B-1]),at.setTooltip(z[B-3],z[B]);break;case 89:this.$=z[B-5],at.setLink(z[B-4],z[B-2],z[B]),at.setTooltip(z[B-4],z[B-1]);break;case 90:this.$=z[B-2],at.setCssStyle(z[B-1],z[B]);break;case 91:at.setCssClass(z[B-1],z[B]);break;case 92:this.$=[z[B]];break;case 93:z[B-2].push(z[B]),this.$=z[B-2];break;case 95:this.$=z[B-1]+z[B];break}},"anonymous"),table:[{3:1,4:2,5:3,6:4,7:[1,6],10:5,16:39,18:21,19:40,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,33:t,35:r,37:a,38:22,42:i,43:23,46:n,47:s,49:o,50:l,52:u,54:h,55:d,58:f,60:p,61:y,62:v,63:m,73:x,74:b,76:w,80:C,81:T,84:k,99:S,101:L,102:_},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},e(A,[2,5],{8:[1,48]}),{8:[1,49]},e(E,[2,18],{22:[1,50]}),e(E,[2,20]),e(E,[2,21]),e(E,[2,22]),e(E,[2,23]),e(E,[2,24]),e(E,[2,25]),e(E,[2,26]),e(E,[2,27]),e(E,[2,28]),e(E,[2,29]),{34:[1,51]},{36:[1,52]},e(E,[2,32]),e(E,[2,48],{51:53,64:56,65:57,13:[1,54],22:[1,55],66:D,67:R,68:O,69:P,70:$,71:M,72:I}),{39:[1,65]},e(F,[2,39],{39:[1,67],44:[1,66]}),e(E,[2,50]),e(E,[2,51]),{16:68,58:f,84:k,99:S,101:L},{16:39,18:69,19:40,58:f,84:k,99:S,101:L,102:_},{16:39,18:70,19:40,58:f,84:k,99:S,101:L,102:_},{16:39,18:71,19:40,58:f,84:k,99:S,101:L,102:_},{58:[1,72]},{13:[1,73]},{16:39,18:74,19:40,58:f,84:k,99:S,101:L,102:_},{13:V,53:75},{56:77,58:[1,78]},e(E,[2,61]),e(E,[2,62]),e(E,[2,63]),e(E,[2,64]),e(N,[2,12],{16:39,19:40,18:80,17:[1,79],20:[1,81],58:f,84:k,99:S,101:L,102:_}),e(N,[2,14],{20:[1,82]}),{15:83,16:84,58:f,84:k,99:S,101:L},{16:39,18:85,19:40,58:f,84:k,99:S,101:L,102:_},e(q,[2,118]),e(q,[2,119]),e(q,[2,120]),e(q,[2,121]),e([1,8,9,12,13,20,22,39,41,44,66,67,68,69,70,71,72,77,79],[2,122]),e(A,[2,6],{10:5,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,18:21,38:22,43:23,16:39,19:40,5:86,33:t,35:r,37:a,42:i,46:n,47:s,49:o,50:l,52:u,54:h,55:d,58:f,60:p,61:y,62:v,63:m,73:x,74:b,76:w,80:C,81:T,84:k,99:S,101:L,102:_}),{5:87,10:5,16:39,18:21,19:40,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,33:t,35:r,37:a,38:22,42:i,43:23,46:n,47:s,49:o,50:l,52:u,54:h,55:d,58:f,60:p,61:y,62:v,63:m,73:x,74:b,76:w,80:C,81:T,84:k,99:S,101:L,102:_},e(E,[2,19]),e(E,[2,30]),e(E,[2,31]),{13:[1,89],16:39,18:88,19:40,58:f,84:k,99:S,101:L,102:_},{51:90,64:56,65:57,66:D,67:R,68:O,69:P,70:$,71:M,72:I},e(E,[2,49]),{65:91,71:M,72:I},e(U,[2,68],{64:92,66:D,67:R,68:O,69:P,70:$}),e(X,[2,69]),e(X,[2,70]),e(X,[2,71]),e(X,[2,72]),e(X,[2,73]),e(lt,[2,74]),e(lt,[2,75]),{8:[1,94],24:95,40:93,43:23,46:n},{16:96,58:f,84:k,99:S,101:L},{45:97,49:J},{48:[1,99]},{13:[1,100]},{13:[1,101]},{77:[1,102],79:[1,103]},{22:ct,57:104,58:yt,80:ut,82:105,83:106,84:Q,85:K,86:j,87:Y,88:st,89:W},{58:[1,116]},{13:V,53:117},e(E,[2,57]),e(E,[2,123]),{22:ct,57:118,58:yt,59:[1,119],80:ut,82:105,83:106,84:Q,85:K,86:j,87:Y,88:st,89:W},e(bt,[2,59]),{16:39,18:120,19:40,58:f,84:k,99:S,101:L,102:_},e(N,[2,15]),e(N,[2,16]),e(N,[2,17]),{39:[2,35]},{15:122,16:84,17:[1,121],39:[2,9],58:f,84:k,99:S,101:L},e(tt,[2,43],{11:123,12:[1,124]}),e(A,[2,7]),{9:[1,125]},e(H,[2,52]),{16:39,18:126,19:40,58:f,84:k,99:S,101:L,102:_},{13:[1,128],16:39,18:127,19:40,58:f,84:k,99:S,101:L,102:_},e(U,[2,67],{64:129,66:D,67:R,68:O,69:P,70:$}),e(U,[2,66]),{41:[1,130]},{24:95,40:131,43:23,46:n},{8:[1,132],41:[2,36]},e(F,[2,40],{39:[1,133]}),{41:[1,134]},{41:[2,46],45:135,49:J},{16:39,18:136,19:40,58:f,84:k,99:S,101:L,102:_},e(E,[2,76],{13:[1,137]}),e(E,[2,78],{13:[1,139],75:[1,138]}),e(E,[2,82],{13:[1,140],78:[1,141]}),{13:[1,142]},e(E,[2,90],{59:Et}),e(nt,[2,92],{83:144,22:ct,58:yt,80:ut,84:Q,85:K,86:j,87:Y,88:st,89:W}),e(Lt,[2,94]),e(Lt,[2,96]),e(Lt,[2,97]),e(Lt,[2,98]),e(Lt,[2,99]),e(Lt,[2,100]),e(Lt,[2,101]),e(Lt,[2,102]),e(Lt,[2,103]),e(Lt,[2,104]),e(E,[2,91]),e(E,[2,56]),e(E,[2,58],{59:Et}),{58:[1,145]},e(N,[2,13]),{15:146,16:84,58:f,84:k,99:S,101:L},{39:[2,11]},e(tt,[2,44]),{13:[1,147]},{1:[2,4]},e(H,[2,54]),e(H,[2,53]),{16:39,18:148,19:40,58:f,84:k,99:S,101:L,102:_},e(U,[2,65]),e(E,[2,33]),{41:[1,149]},{24:95,40:150,41:[2,37],43:23,46:n},{45:151,49:J},e(F,[2,41]),{41:[2,47]},e(E,[2,45]),e(E,[2,77]),e(E,[2,79]),e(E,[2,80],{75:[1,152]}),e(E,[2,83]),e(E,[2,84],{13:[1,153]}),e(E,[2,86],{13:[1,155],75:[1,154]}),{22:ct,58:yt,80:ut,82:156,83:106,84:Q,85:K,86:j,87:Y,88:st,89:W},e(Lt,[2,95]),e(bt,[2,60]),{39:[2,10]},{14:[1,157]},e(H,[2,55]),e(E,[2,34]),{41:[2,38]},{41:[1,158]},e(E,[2,81]),e(E,[2,85]),e(E,[2,87]),e(E,[2,88],{75:[1,159]}),e(nt,[2,93],{83:144,22:ct,58:yt,80:ut,84:Q,85:K,86:j,87:Y,88:st,89:W}),e(tt,[2,8]),e(F,[2,42]),e(E,[2,89])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],83:[2,35],122:[2,11],125:[2,4],135:[2,47],146:[2,10],150:[2,38]},parseError:g(function(vt,wt){if(wt.recoverable)this.trace(vt);else{var St=new Error(vt);throw St.hash=wt,St}},"parseError"),parse:g(function(vt){var wt=this,St=[0],at=[],Ct=[null],z=[],ft=this.table,B="",et=0,Z=0,ht=2,ot=1,pt=z.slice.call(arguments,1),gt=Object.create(this.lexer),kt={yy:{}};for(var Ft in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ft)&&(kt.yy[Ft]=this.yy[Ft]);gt.setInput(vt,kt.yy),kt.yy.lexer=gt,kt.yy.parser=this,typeof gt.yylloc>"u"&&(gt.yylloc={});var Ht=gt.yylloc;z.push(Ht);var Pt=gt.options&&gt.options.ranges;typeof kt.yy.parseError=="function"?this.parseError=kt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Ot(Yt){St.length=St.length-2*Yt,Ct.length=Ct.length-Yt,z.length=z.length-Yt}g(Ot,"popStack");function Gt(){var Yt;return Yt=at.pop()||gt.lex()||ot,typeof Yt!="number"&&(Yt instanceof Array&&(at=Yt,Yt=at.pop()),Yt=wt.symbols_[Yt]||Yt),Yt}g(Gt,"lex");for(var Bt,te,ue,Ce,Wt={},de,$t,Jt,jt;;){if(te=St[St.length-1],this.defaultActions[te]?ue=this.defaultActions[te]:((Bt===null||typeof Bt>"u")&&(Bt=Gt()),ue=ft[te]&&ft[te][Bt]),typeof ue>"u"||!ue.length||!ue[0]){var Qt="";jt=[];for(de in ft[te])this.terminals_[de]&&de>ht&&jt.push("'"+this.terminals_[de]+"'");gt.showPosition?Qt="Parse error on line "+(et+1)+`:
`+gt.showPosition()+`
Expecting `+jt.join(", ")+", got '"+(this.terminals_[Bt]||Bt)+"'":Qt="Parse error on line "+(et+1)+": Unexpected "+(Bt==ot?"end of input":"'"+(this.terminals_[Bt]||Bt)+"'"),this.parseError(Qt,{text:gt.match,token:this.terminals_[Bt]||Bt,line:gt.yylineno,loc:Ht,expected:jt})}if(ue[0]instanceof Array&&ue.length>1)throw new Error("Parse Error: multiple actions possible at state: "+te+", token: "+Bt);switch(ue[0]){case 1:St.push(Bt),Ct.push(gt.yytext),z.push(gt.yylloc),St.push(ue[1]),Bt=null,Z=gt.yyleng,B=gt.yytext,et=gt.yylineno,Ht=gt.yylloc;break;case 2:if($t=this.productions_[ue[1]][1],Wt.$=Ct[Ct.length-$t],Wt._$={first_line:z[z.length-($t||1)].first_line,last_line:z[z.length-1].last_line,first_column:z[z.length-($t||1)].first_column,last_column:z[z.length-1].last_column},Pt&&(Wt._$.range=[z[z.length-($t||1)].range[0],z[z.length-1].range[1]]),Ce=this.performAction.apply(Wt,[B,Z,et,kt.yy,ue[1],Ct,z].concat(pt)),typeof Ce<"u")return Ce;$t&&(St=St.slice(0,-1*$t*2),Ct=Ct.slice(0,-1*$t),z=z.slice(0,-1*$t)),St.push(this.productions_[ue[1]][0]),Ct.push(Wt.$),z.push(Wt._$),Jt=ft[St[St.length-2]][St[St.length-1]],St.push(Jt);break;case 3:return!0}}return!0},"parse")},At=function(){var _t={EOF:1,parseError:g(function(wt,St){if(this.yy.parser)this.yy.parser.parseError(wt,St);else throw new Error(wt)},"parseError"),setInput:g(function(vt,wt){return this.yy=wt||this.yy||{},this._input=vt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:g(function(){var vt=this._input[0];this.yytext+=vt,this.yyleng++,this.offset++,this.match+=vt,this.matched+=vt;var wt=vt.match(/(?:\r\n?|\n).*/g);return wt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),vt},"input"),unput:g(function(vt){var wt=vt.length,St=vt.split(/(?:\r\n?|\n)/g);this._input=vt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-wt),this.offset-=wt;var at=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),St.length-1&&(this.yylineno-=St.length-1);var Ct=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:St?(St.length===at.length?this.yylloc.first_column:0)+at[at.length-St.length].length-St[0].length:this.yylloc.first_column-wt},this.options.ranges&&(this.yylloc.range=[Ct[0],Ct[0]+this.yyleng-wt]),this.yyleng=this.yytext.length,this},"unput"),more:g(function(){return this._more=!0,this},"more"),reject:g(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:g(function(vt){this.unput(this.match.slice(vt))},"less"),pastInput:g(function(){var vt=this.matched.substr(0,this.matched.length-this.match.length);return(vt.length>20?"...":"")+vt.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:g(function(){var vt=this.match;return vt.length<20&&(vt+=this._input.substr(0,20-vt.length)),(vt.substr(0,20)+(vt.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:g(function(){var vt=this.pastInput(),wt=new Array(vt.length+1).join("-");return vt+this.upcomingInput()+`
`+wt+"^"},"showPosition"),test_match:g(function(vt,wt){var St,at,Ct;if(this.options.backtrack_lexer&&(Ct={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ct.yylloc.range=this.yylloc.range.slice(0))),at=vt[0].match(/(?:\r\n?|\n).*/g),at&&(this.yylineno+=at.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:at?at[at.length-1].length-at[at.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+vt[0].length},this.yytext+=vt[0],this.match+=vt[0],this.matches=vt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(vt[0].length),this.matched+=vt[0],St=this.performAction.call(this,this.yy,this,wt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),St)return St;if(this._backtrack){for(var z in Ct)this[z]=Ct[z];return!1}return!1},"test_match"),next:g(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var vt,wt,St,at;this._more||(this.yytext="",this.match="");for(var Ct=this._currentRules(),z=0;z<Ct.length;z++)if(St=this._input.match(this.rules[Ct[z]]),St&&(!wt||St[0].length>wt[0].length)){if(wt=St,at=z,this.options.backtrack_lexer){if(vt=this.test_match(St,Ct[z]),vt!==!1)return vt;if(this._backtrack){wt=!1;continue}else return!1}else if(!this.options.flex)break}return wt?(vt=this.test_match(wt,Ct[at]),vt!==!1?vt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:g(function(){var wt=this.next();return wt||this.lex()},"lex"),begin:g(function(wt){this.conditionStack.push(wt)},"begin"),popState:g(function(){var wt=this.conditionStack.length-1;return wt>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:g(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:g(function(wt){return wt=this.conditionStack.length-1-Math.abs(wt||0),wt>=0?this.conditionStack[wt]:"INITIAL"},"topState"),pushState:g(function(wt){this.begin(wt)},"pushState"),stateStackSize:g(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:g(function(wt,St,at,Ct){switch(at){case 0:return 60;case 1:return 61;case 2:return 62;case 3:return 63;case 4:break;case 5:break;case 6:return this.begin("acc_title"),33;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),35;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 8;case 14:break;case 15:return 7;case 16:return 7;case 17:return"EDGE_STATE";case 18:this.begin("callback_name");break;case 19:this.popState();break;case 20:this.popState(),this.begin("callback_args");break;case 21:return 77;case 22:this.popState();break;case 23:return 78;case 24:this.popState();break;case 25:return"STR";case 26:this.begin("string");break;case 27:return 80;case 28:return 55;case 29:return this.begin("namespace"),42;case 30:return this.popState(),8;case 31:break;case 32:return this.begin("namespace-body"),39;case 33:return this.popState(),41;case 34:return"EOF_IN_STRUCT";case 35:return 8;case 36:break;case 37:return"EDGE_STATE";case 38:return this.begin("class"),46;case 39:return this.popState(),8;case 40:break;case 41:return this.popState(),this.popState(),41;case 42:return this.begin("class-body"),39;case 43:return this.popState(),41;case 44:return"EOF_IN_STRUCT";case 45:return"EDGE_STATE";case 46:return"OPEN_IN_STRUCT";case 47:break;case 48:return"MEMBER";case 49:return 81;case 50:return 73;case 51:return 74;case 52:return 76;case 53:return 52;case 54:return 54;case 55:return 47;case 56:return 48;case 57:return 79;case 58:this.popState();break;case 59:return"GENERICTYPE";case 60:this.begin("generic");break;case 61:this.popState();break;case 62:return"BQUOTE_STR";case 63:this.begin("bqstring");break;case 64:return 75;case 65:return 75;case 66:return 75;case 67:return 75;case 68:return 67;case 69:return 67;case 70:return 69;case 71:return 69;case 72:return 68;case 73:return 66;case 74:return 70;case 75:return 71;case 76:return 72;case 77:return 22;case 78:return 44;case 79:return 99;case 80:return 17;case 81:return"PLUS";case 82:return 85;case 83:return 59;case 84:return 88;case 85:return 88;case 86:return 89;case 87:return"EQUALS";case 88:return"EQUALS";case 89:return 58;case 90:return 12;case 91:return 14;case 92:return"PUNCTUATION";case 93:return 84;case 94:return 101;case 95:return 87;case 96:return 87;case 97:return 9}},"anonymous"),rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:\[\*\])/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:["])/,/^(?:[^"]*)/,/^(?:["])/,/^(?:style\b)/,/^(?:classDef\b)/,/^(?:namespace\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:\[\*\])/,/^(?:class\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[}])/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\[\*\])/,/^(?:[{])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:href\b)/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:~)/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:[`])/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?::)/,/^(?:,)/,/^(?:#)/,/^(?:#)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:\[)/,/^(?:\])/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:\s)/,/^(?:$)/],conditions:{"namespace-body":{rules:[26,33,34,35,36,37,38,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},namespace:{rules:[26,29,30,31,32,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},"class-body":{rules:[26,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},class:{rules:[26,39,40,41,42,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_descr_multiline:{rules:[11,12,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_descr:{rules:[9,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_title:{rules:[7,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},callback_args:{rules:[22,23,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},callback_name:{rules:[19,20,21,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},href:{rules:[26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},struct:{rules:[26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},generic:{rules:[26,49,50,51,52,53,54,55,56,57,58,59,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},bqstring:{rules:[26,49,50,51,52,53,54,55,56,57,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},string:{rules:[24,25,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,26,27,28,29,38,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97],inclusive:!0}}};return _t}();Dt.lexer=At;function xt(){this.yy={}}return g(xt,"Parser"),xt.prototype=Dt,Dt.Parser=xt,new xt}();lg.parser=lg;var Lk=lg,Oy=["#","+","~","-",""],bo,$y=(bo=class{constructor(t,r){this.memberType=r,this.visibility="",this.classifier="",this.text="";const a=qe(t,dt());this.parseMember(a)}getDisplayDetails(){let t=this.visibility+Vi(this.id);this.memberType==="method"&&(t+=`(${Vi(this.parameters.trim())})`,this.returnType&&(t+=" : "+Vi(this.returnType))),t=t.trim();const r=this.parseClassifier();return{displayText:t,cssStyle:r}}parseMember(t){let r="";if(this.memberType==="method"){const n=/([#+~-])?(.+)\((.*)\)([\s$*])?(.*)([$*])?/.exec(t);if(n){const s=n[1]?n[1].trim():"";if(Oy.includes(s)&&(this.visibility=s),this.id=n[2],this.parameters=n[3]?n[3].trim():"",r=n[4]?n[4].trim():"",this.returnType=n[5]?n[5].trim():"",r===""){const o=this.returnType.substring(this.returnType.length-1);/[$*]/.exec(o)&&(r=o,this.returnType=this.returnType.substring(0,this.returnType.length-1))}}}else{const i=t.length,n=t.substring(0,1),s=t.substring(i-1);Oy.includes(n)&&(this.visibility=n),/[$*]/.exec(s)&&(r=s),this.id=t.substring(this.visibility===""?0:1,r===""?i:i-1)}this.classifier=r,this.id=this.id.startsWith(" ")?" "+this.id.trim():this.id.trim();const a=`${this.visibility?"\\"+this.visibility:""}${Vi(this.id)}${this.memberType==="method"?`(${Vi(this.parameters)})${this.returnType?" : "+Vi(this.returnType):""}`:""}`;this.text=a.replaceAll("<","&lt;").replaceAll(">","&gt;"),this.text.startsWith("\\&lt;")&&(this.text=this.text.replace("\\&lt;","~"))}parseClassifier(){switch(this.classifier){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}}},g(bo,"ClassMember"),bo),zc="classId-",Vy=0,xn=g(e=>Mt.sanitizeText(e,dt()),"sanitizeText"),wo,Dk=(wo=class{constructor(){this.relations=[],this.classes=new Map,this.styleClasses=new Map,this.notes=[],this.interfaces=[],this.namespaces=new Map,this.namespaceCounter=0,this.functions=[],this.lineType={LINE:0,DOTTED_LINE:1},this.relationType={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},this.setupToolTips=g(t=>{let r=It(".mermaidTooltip");(r._groups||r)[0][0]===null&&(r=It("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),It(t).select("svg").selectAll("g.node").on("mouseover",n=>{const s=It(n.currentTarget);if(s.attr("title")===null)return;const l=this.getBoundingClientRect();r.transition().duration(200).style("opacity",".9"),r.text(s.attr("title")).style("left",window.scrollX+l.left+(l.right-l.left)/2+"px").style("top",window.scrollY+l.top-14+document.body.scrollTop+"px"),r.html(r.html().replace(/&lt;br\/&gt;/g,"<br/>")),s.classed("hover",!0)}).on("mouseout",n=>{r.transition().duration(500).style("opacity",0),It(n.currentTarget).classed("hover",!1)})},"setupToolTips"),this.direction="TB",this.setAccTitle=vr,this.getAccTitle=Sr,this.setAccDescription=Er,this.getAccDescription=_r,this.setDiagramTitle=Mr,this.getDiagramTitle=br,this.getConfig=g(()=>dt().class,"getConfig"),this.functions.push(this.setupToolTips.bind(this)),this.clear(),this.addRelation=this.addRelation.bind(this),this.addClassesToNamespace=this.addClassesToNamespace.bind(this),this.addNamespace=this.addNamespace.bind(this),this.setCssClass=this.setCssClass.bind(this),this.addMembers=this.addMembers.bind(this),this.addClass=this.addClass.bind(this),this.setClassLabel=this.setClassLabel.bind(this),this.addAnnotation=this.addAnnotation.bind(this),this.addMember=this.addMember.bind(this),this.cleanupLabel=this.cleanupLabel.bind(this),this.addNote=this.addNote.bind(this),this.defineClass=this.defineClass.bind(this),this.setDirection=this.setDirection.bind(this),this.setLink=this.setLink.bind(this),this.bindFunctions=this.bindFunctions.bind(this),this.clear=this.clear.bind(this),this.setTooltip=this.setTooltip.bind(this),this.setClickEvent=this.setClickEvent.bind(this),this.setCssStyle=this.setCssStyle.bind(this)}splitClassNameAndType(t){const r=Mt.sanitizeText(t,dt());let a="",i=r;if(r.indexOf("~")>0){const n=r.split("~");i=xn(n[0]),a=xn(n[1])}return{className:i,type:a}}setClassLabel(t,r){const a=Mt.sanitizeText(t,dt());r&&(r=xn(r));const{className:i}=this.splitClassNameAndType(a);this.classes.get(i).label=r,this.classes.get(i).text=`${r}${this.classes.get(i).type?`<${this.classes.get(i).type}>`:""}`}addClass(t){const r=Mt.sanitizeText(t,dt()),{className:a,type:i}=this.splitClassNameAndType(r);if(this.classes.has(a))return;const n=Mt.sanitizeText(a,dt());this.classes.set(n,{id:n,type:i,label:n,text:`${n}${i?`&lt;${i}&gt;`:""}`,shape:"classBox",cssClasses:"default",methods:[],members:[],annotations:[],styles:[],domId:zc+n+"-"+Vy}),Vy++}addInterface(t,r){const a={id:`interface${this.interfaces.length}`,label:t,classId:r};this.interfaces.push(a)}lookUpDomId(t){const r=Mt.sanitizeText(t,dt());if(this.classes.has(r))return this.classes.get(r).domId;throw new Error("Class not found: "+r)}clear(){this.relations=[],this.classes=new Map,this.notes=[],this.interfaces=[],this.functions=[],this.functions.push(this.setupToolTips.bind(this)),this.namespaces=new Map,this.namespaceCounter=0,this.direction="TB",xr()}getClass(t){return this.classes.get(t)}getClasses(){return this.classes}getRelations(){return this.relations}getNotes(){return this.notes}addRelation(t){G.debug("Adding relation: "+JSON.stringify(t));const r=[this.relationType.LOLLIPOP,this.relationType.AGGREGATION,this.relationType.COMPOSITION,this.relationType.DEPENDENCY,this.relationType.EXTENSION];t.relation.type1===this.relationType.LOLLIPOP&&!r.includes(t.relation.type2)?(this.addClass(t.id2),this.addInterface(t.id1,t.id2),t.id1=`interface${this.interfaces.length-1}`):t.relation.type2===this.relationType.LOLLIPOP&&!r.includes(t.relation.type1)?(this.addClass(t.id1),this.addInterface(t.id2,t.id1),t.id2=`interface${this.interfaces.length-1}`):(this.addClass(t.id1),this.addClass(t.id2)),t.id1=this.splitClassNameAndType(t.id1).className,t.id2=this.splitClassNameAndType(t.id2).className,t.relationTitle1=Mt.sanitizeText(t.relationTitle1.trim(),dt()),t.relationTitle2=Mt.sanitizeText(t.relationTitle2.trim(),dt()),this.relations.push(t)}addAnnotation(t,r){const a=this.splitClassNameAndType(t).className;this.classes.get(a).annotations.push(r)}addMember(t,r){this.addClass(t);const a=this.splitClassNameAndType(t).className,i=this.classes.get(a);if(typeof r=="string"){const n=r.trim();n.startsWith("<<")&&n.endsWith(">>")?i.annotations.push(xn(n.substring(2,n.length-2))):n.indexOf(")")>0?i.methods.push(new $y(n,"method")):n&&i.members.push(new $y(n,"attribute"))}}addMembers(t,r){Array.isArray(r)&&(r.reverse(),r.forEach(a=>this.addMember(t,a)))}addNote(t,r){const a={id:`note${this.notes.length}`,class:r,text:t};this.notes.push(a)}cleanupLabel(t){return t.startsWith(":")&&(t=t.substring(1)),xn(t.trim())}setCssClass(t,r){t.split(",").forEach(a=>{let i=a;/\d/.exec(a[0])&&(i=zc+i);const n=this.classes.get(i);n&&(n.cssClasses+=" "+r)})}defineClass(t,r){for(const a of t){let i=this.styleClasses.get(a);i===void 0&&(i={id:a,styles:[],textStyles:[]},this.styleClasses.set(a,i)),r&&r.forEach(n=>{if(/color/.exec(n)){const s=n.replace("fill","bgFill");i.textStyles.push(s)}i.styles.push(n)}),this.classes.forEach(n=>{n.cssClasses.includes(a)&&n.styles.push(...r.flatMap(s=>s.split(",")))})}}setTooltip(t,r){t.split(",").forEach(a=>{r!==void 0&&(this.classes.get(a).tooltip=xn(r))})}getTooltip(t,r){return r&&this.namespaces.has(r)?this.namespaces.get(r).classes.get(t).tooltip:this.classes.get(t).tooltip}setLink(t,r,a){const i=dt();t.split(",").forEach(n=>{let s=n;/\d/.exec(n[0])&&(s=zc+s);const o=this.classes.get(s);o&&(o.link=xe.formatUrl(r,i),i.securityLevel==="sandbox"?o.linkTarget="_top":typeof a=="string"?o.linkTarget=xn(a):o.linkTarget="_blank")}),this.setCssClass(t,"clickable")}setClickEvent(t,r,a){t.split(",").forEach(i=>{this.setClickFunc(i,r,a),this.classes.get(i).haveCallback=!0}),this.setCssClass(t,"clickable")}setClickFunc(t,r,a){const i=Mt.sanitizeText(t,dt());if(dt().securityLevel!=="loose"||r===void 0)return;const s=i;if(this.classes.has(s)){const o=this.lookUpDomId(s);let l=[];if(typeof a=="string"){l=a.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let u=0;u<l.length;u++){let h=l[u].trim();h.startsWith('"')&&h.endsWith('"')&&(h=h.substr(1,h.length-2)),l[u]=h}}l.length===0&&l.push(o),this.functions.push(()=>{const u=document.querySelector(`[id="${o}"]`);u!==null&&u.addEventListener("click",()=>{xe.runFunc(r,...l)},!1)})}}bindFunctions(t){this.functions.forEach(r=>{r(t)})}getDirection(){return this.direction}setDirection(t){this.direction=t}addNamespace(t){this.namespaces.has(t)||(this.namespaces.set(t,{id:t,classes:new Map,children:{},domId:zc+t+"-"+this.namespaceCounter}),this.namespaceCounter++)}getNamespace(t){return this.namespaces.get(t)}getNamespaces(){return this.namespaces}addClassesToNamespace(t,r){if(this.namespaces.has(t))for(const a of r){const{className:i}=this.splitClassNameAndType(a);this.classes.get(i).parent=t,this.namespaces.get(t).classes.set(i,this.classes.get(i))}}setCssStyle(t,r){const a=this.classes.get(t);if(!(!r||!a))for(const i of r)i.includes(",")?a.styles.push(...i.split(",")):a.styles.push(i)}getArrowMarker(t){let r;switch(t){case 0:r="aggregation";break;case 1:r="extension";break;case 2:r="composition";break;case 3:r="dependency";break;case 4:r="lollipop";break;default:r="none"}return r}getData(){var n;const t=[],r=[],a=dt();for(const s of this.namespaces.keys()){const o=this.namespaces.get(s);if(o){const l={id:o.id,label:o.id,isGroup:!0,padding:a.class.padding??16,shape:"rect",cssStyles:["fill: none","stroke: black"],look:a.look};t.push(l)}}for(const s of this.classes.keys()){const o=this.classes.get(s);if(o){const l=o;l.parentId=o.parent,l.look=a.look,t.push(l)}}let i=0;for(const s of this.notes){i++;const o={id:s.id,label:s.text,isGroup:!1,shape:"note",padding:a.class.padding??6,cssStyles:["text-align: left","white-space: nowrap",`fill: ${a.themeVariables.noteBkgColor}`,`stroke: ${a.themeVariables.noteBorderColor}`],look:a.look};t.push(o);const l=((n=this.classes.get(s.class))==null?void 0:n.id)??"";if(l){const u={id:`edgeNote${i}`,start:s.id,end:l,type:"normal",thickness:"normal",classes:"relation",arrowTypeStart:"none",arrowTypeEnd:"none",arrowheadStyle:"",labelStyle:[""],style:["fill: none"],pattern:"dotted",look:a.look};r.push(u)}}for(const s of this.interfaces){const o={id:s.id,label:s.label,isGroup:!1,shape:"rect",cssStyles:["opacity: 0;"],look:a.look};t.push(o)}i=0;for(const s of this.relations){i++;const o={id:Dl(s.id1,s.id2,{prefix:"id",counter:i}),start:s.id1,end:s.id2,type:"normal",label:s.title,labelpos:"c",thickness:"normal",classes:"relation",arrowTypeStart:this.getArrowMarker(s.relation.type1),arrowTypeEnd:this.getArrowMarker(s.relation.type2),startLabelRight:s.relationTitle1==="none"?"":s.relationTitle1,endLabelLeft:s.relationTitle2==="none"?"":s.relationTitle2,arrowheadStyle:"",labelStyle:["display: inline-block"],style:s.style||"",pattern:s.relation.lineType==1?"dashed":"solid",look:a.look};r.push(o)}return{nodes:t,edges:r,other:{},config:a,direction:this.getDirection()}}},g(wo,"ClassDB"),wo),fP=g(e=>`g.classGroup text {
  fill: ${e.nodeBorder||e.classText};
  stroke: none;
  font-family: ${e.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${e.classText};
}
.edgeLabel .label rect {
  fill: ${e.mainBkg};
}
.label text {
  fill: ${e.classText};
}

.labelBkg {
  background: ${e.mainBkg};
}
.edgeLabel .label span {
  background: ${e.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${e.nodeBorder};
  stroke-width: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${e.mainBkg};
  stroke: ${e.nodeBorder};
}

g.classGroup line {
  stroke: ${e.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${e.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${e.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${e.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

.dotted-line{
  stroke-dasharray: 1 2;
}

#compositionStart, .composition {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: transparent !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: transparent !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: transparent !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: transparent !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
  line-height: initial;
}

.classTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${e.textColor};
}
`,"getStyles"),Bk=fP,pP=g((e,t="TB")=>{if(!e.doc)return t;let r=t;for(const a of e.doc)a.stmt==="dir"&&(r=a.value);return r},"getDir"),gP=g(function(e,t){return t.db.getClasses()},"getClasses"),yP=g(async function(e,t,r,a){G.info("REF0:"),G.info("Drawing class diagram (v3)",t);const{securityLevel:i,state:n,layout:s}=dt(),o=a.db.getData(),l=pc(t,i);o.type=a.type,o.layoutAlgorithm=Oh(s),o.nodeSpacing=(n==null?void 0:n.nodeSpacing)||50,o.rankSpacing=(n==null?void 0:n.rankSpacing)||50,o.markers=["aggregation","extension","composition","dependency","lollipop"],o.diagramId=t,await fc(o,l);const u=8;xe.insertTitle(l,"classDiagramTitleText",(n==null?void 0:n.titleTopMargin)??25,a.db.getDiagramTitle()),gc(l,u,"classDiagram",(n==null?void 0:n.useMaxWidth)??!0)},"draw"),Rk={getClasses:gP,draw:yP,getDir:pP},vP={parser:Lk,get db(){return new Dk},renderer:Rk,styles:Bk,init:g(e=>{e.class||(e.class={}),e.class.arrowMarkerAbsolute=e.arrowMarkerAbsolute},"init")};const mP=Object.freeze({__proto__:null,diagram:vP});var xP={parser:Lk,get db(){return new Dk},renderer:Rk,styles:Bk,init:g(e=>{e.class||(e.class={}),e.class.arrowMarkerAbsolute=e.arrowMarkerAbsolute},"init")};const bP=Object.freeze({__proto__:null,diagram:xP});var cg=function(){var e=g(function(I,F,V,N){for(V=V||{},N=I.length;N--;V[I[N]]=F);return V},"o"),t=[1,2],r=[1,3],a=[1,4],i=[2,4],n=[1,9],s=[1,11],o=[1,16],l=[1,17],u=[1,18],h=[1,19],d=[1,32],f=[1,20],p=[1,21],y=[1,22],v=[1,23],m=[1,24],x=[1,26],b=[1,27],w=[1,28],C=[1,29],T=[1,30],k=[1,31],S=[1,34],L=[1,35],_=[1,36],A=[1,37],E=[1,33],D=[1,4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,45,48,49,50,51,54],R=[1,4,5,14,15,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,45,48,49,50,51,54],O=[4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,45,48,49,50,51,54],P={trace:g(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,SD:6,document:7,line:8,statement:9,classDefStatement:10,styleStatement:11,cssClassStatement:12,idStatement:13,DESCR:14,"-->":15,HIDE_EMPTY:16,scale:17,WIDTH:18,COMPOSIT_STATE:19,STRUCT_START:20,STRUCT_STOP:21,STATE_DESCR:22,AS:23,ID:24,FORK:25,JOIN:26,CHOICE:27,CONCURRENT:28,note:29,notePosition:30,NOTE_TEXT:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,classDef:38,CLASSDEF_ID:39,CLASSDEF_STYLEOPTS:40,DEFAULT:41,style:42,STYLE_IDS:43,STYLEDEF_STYLEOPTS:44,class:45,CLASSENTITY_IDS:46,STYLECLASS:47,direction_tb:48,direction_bt:49,direction_rl:50,direction_lr:51,eol:52,";":53,EDGE_STATE:54,STYLE_SEPARATOR:55,left_of:56,right_of:57,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",6:"SD",14:"DESCR",15:"-->",16:"HIDE_EMPTY",17:"scale",18:"WIDTH",19:"COMPOSIT_STATE",20:"STRUCT_START",21:"STRUCT_STOP",22:"STATE_DESCR",23:"AS",24:"ID",25:"FORK",26:"JOIN",27:"CHOICE",28:"CONCURRENT",29:"note",31:"NOTE_TEXT",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",38:"classDef",39:"CLASSDEF_ID",40:"CLASSDEF_STYLEOPTS",41:"DEFAULT",42:"style",43:"STYLE_IDS",44:"STYLEDEF_STYLEOPTS",45:"class",46:"CLASSENTITY_IDS",47:"STYLECLASS",48:"direction_tb",49:"direction_bt",50:"direction_rl",51:"direction_lr",53:";",54:"EDGE_STATE",55:"STYLE_SEPARATOR",56:"left_of",57:"right_of"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,3],[9,4],[9,1],[9,2],[9,1],[9,4],[9,3],[9,6],[9,1],[9,1],[9,1],[9,1],[9,4],[9,4],[9,1],[9,2],[9,2],[9,1],[10,3],[10,3],[11,3],[12,3],[32,1],[32,1],[32,1],[32,1],[52,1],[52,1],[13,1],[13,1],[13,3],[13,3],[30,1],[30,1]],performAction:g(function(F,V,N,q,U,X,lt){var J=X.length-1;switch(U){case 3:return q.setRootDoc(X[J]),X[J];case 4:this.$=[];break;case 5:X[J]!="nl"&&(X[J-1].push(X[J]),this.$=X[J-1]);break;case 6:case 7:this.$=X[J];break;case 8:this.$="nl";break;case 12:this.$=X[J];break;case 13:const Q=X[J-1];Q.description=q.trimColon(X[J]),this.$=Q;break;case 14:this.$={stmt:"relation",state1:X[J-2],state2:X[J]};break;case 15:const K=q.trimColon(X[J]);this.$={stmt:"relation",state1:X[J-3],state2:X[J-1],description:K};break;case 19:this.$={stmt:"state",id:X[J-3],type:"default",description:"",doc:X[J-1]};break;case 20:var ct=X[J],yt=X[J-2].trim();if(X[J].match(":")){var ut=X[J].split(":");ct=ut[0],yt=[yt,ut[1]]}this.$={stmt:"state",id:ct,type:"default",description:yt};break;case 21:this.$={stmt:"state",id:X[J-3],type:"default",description:X[J-5],doc:X[J-1]};break;case 22:this.$={stmt:"state",id:X[J],type:"fork"};break;case 23:this.$={stmt:"state",id:X[J],type:"join"};break;case 24:this.$={stmt:"state",id:X[J],type:"choice"};break;case 25:this.$={stmt:"state",id:q.getDividerId(),type:"divider"};break;case 26:this.$={stmt:"state",id:X[J-1].trim(),note:{position:X[J-2].trim(),text:X[J].trim()}};break;case 29:this.$=X[J].trim(),q.setAccTitle(this.$);break;case 30:case 31:this.$=X[J].trim(),q.setAccDescription(this.$);break;case 32:case 33:this.$={stmt:"classDef",id:X[J-1].trim(),classes:X[J].trim()};break;case 34:this.$={stmt:"style",id:X[J-1].trim(),styleClass:X[J].trim()};break;case 35:this.$={stmt:"applyClass",id:X[J-1].trim(),styleClass:X[J].trim()};break;case 36:q.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 37:q.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 38:q.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 39:q.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 42:case 43:this.$={stmt:"state",id:X[J].trim(),type:"default",description:""};break;case 44:this.$={stmt:"state",id:X[J-2].trim(),classes:[X[J].trim()],type:"default",description:""};break;case 45:this.$={stmt:"state",id:X[J-2].trim(),classes:[X[J].trim()],type:"default",description:""};break}},"anonymous"),table:[{3:1,4:t,5:r,6:a},{1:[3]},{3:5,4:t,5:r,6:a},{3:6,4:t,5:r,6:a},e([1,4,5,16,17,19,22,24,25,26,27,28,29,33,35,37,38,42,45,48,49,50,51,54],i,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:n,5:s,8:8,9:10,10:12,11:13,12:14,13:15,16:o,17:l,19:u,22:h,24:d,25:f,26:p,27:y,28:v,29:m,32:25,33:x,35:b,37:w,38:C,42:T,45:k,48:S,49:L,50:_,51:A,54:E},e(D,[2,5]),{9:38,10:12,11:13,12:14,13:15,16:o,17:l,19:u,22:h,24:d,25:f,26:p,27:y,28:v,29:m,32:25,33:x,35:b,37:w,38:C,42:T,45:k,48:S,49:L,50:_,51:A,54:E},e(D,[2,7]),e(D,[2,8]),e(D,[2,9]),e(D,[2,10]),e(D,[2,11]),e(D,[2,12],{14:[1,39],15:[1,40]}),e(D,[2,16]),{18:[1,41]},e(D,[2,18],{20:[1,42]}),{23:[1,43]},e(D,[2,22]),e(D,[2,23]),e(D,[2,24]),e(D,[2,25]),{30:44,31:[1,45],56:[1,46],57:[1,47]},e(D,[2,28]),{34:[1,48]},{36:[1,49]},e(D,[2,31]),{39:[1,50],41:[1,51]},{43:[1,52]},{46:[1,53]},e(R,[2,42],{55:[1,54]}),e(R,[2,43],{55:[1,55]}),e(D,[2,36]),e(D,[2,37]),e(D,[2,38]),e(D,[2,39]),e(D,[2,6]),e(D,[2,13]),{13:56,24:d,54:E},e(D,[2,17]),e(O,i,{7:57}),{24:[1,58]},{24:[1,59]},{23:[1,60]},{24:[2,46]},{24:[2,47]},e(D,[2,29]),e(D,[2,30]),{40:[1,61]},{40:[1,62]},{44:[1,63]},{47:[1,64]},{24:[1,65]},{24:[1,66]},e(D,[2,14],{14:[1,67]}),{4:n,5:s,8:8,9:10,10:12,11:13,12:14,13:15,16:o,17:l,19:u,21:[1,68],22:h,24:d,25:f,26:p,27:y,28:v,29:m,32:25,33:x,35:b,37:w,38:C,42:T,45:k,48:S,49:L,50:_,51:A,54:E},e(D,[2,20],{20:[1,69]}),{31:[1,70]},{24:[1,71]},e(D,[2,32]),e(D,[2,33]),e(D,[2,34]),e(D,[2,35]),e(R,[2,44]),e(R,[2,45]),e(D,[2,15]),e(D,[2,19]),e(O,i,{7:72}),e(D,[2,26]),e(D,[2,27]),{4:n,5:s,8:8,9:10,10:12,11:13,12:14,13:15,16:o,17:l,19:u,21:[1,73],22:h,24:d,25:f,26:p,27:y,28:v,29:m,32:25,33:x,35:b,37:w,38:C,42:T,45:k,48:S,49:L,50:_,51:A,54:E},e(D,[2,21])],defaultActions:{5:[2,1],6:[2,2],46:[2,46],47:[2,47]},parseError:g(function(F,V){if(V.recoverable)this.trace(F);else{var N=new Error(F);throw N.hash=V,N}},"parseError"),parse:g(function(F){var V=this,N=[0],q=[],U=[null],X=[],lt=this.table,J="",ct=0,yt=0,ut=2,Q=1,K=X.slice.call(arguments,1),j=Object.create(this.lexer),Y={yy:{}};for(var st in this.yy)Object.prototype.hasOwnProperty.call(this.yy,st)&&(Y.yy[st]=this.yy[st]);j.setInput(F,Y.yy),Y.yy.lexer=j,Y.yy.parser=this,typeof j.yylloc>"u"&&(j.yylloc={});var W=j.yylloc;X.push(W);var bt=j.options&&j.options.ranges;typeof Y.yy.parseError=="function"?this.parseError=Y.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function tt(at){N.length=N.length-2*at,U.length=U.length-at,X.length=X.length-at}g(tt,"popStack");function H(){var at;return at=q.pop()||j.lex()||Q,typeof at!="number"&&(at instanceof Array&&(q=at,at=q.pop()),at=V.symbols_[at]||at),at}g(H,"lex");for(var Et,nt,Lt,Dt,At={},xt,_t,vt,wt;;){if(nt=N[N.length-1],this.defaultActions[nt]?Lt=this.defaultActions[nt]:((Et===null||typeof Et>"u")&&(Et=H()),Lt=lt[nt]&&lt[nt][Et]),typeof Lt>"u"||!Lt.length||!Lt[0]){var St="";wt=[];for(xt in lt[nt])this.terminals_[xt]&&xt>ut&&wt.push("'"+this.terminals_[xt]+"'");j.showPosition?St="Parse error on line "+(ct+1)+`:
`+j.showPosition()+`
Expecting `+wt.join(", ")+", got '"+(this.terminals_[Et]||Et)+"'":St="Parse error on line "+(ct+1)+": Unexpected "+(Et==Q?"end of input":"'"+(this.terminals_[Et]||Et)+"'"),this.parseError(St,{text:j.match,token:this.terminals_[Et]||Et,line:j.yylineno,loc:W,expected:wt})}if(Lt[0]instanceof Array&&Lt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+nt+", token: "+Et);switch(Lt[0]){case 1:N.push(Et),U.push(j.yytext),X.push(j.yylloc),N.push(Lt[1]),Et=null,yt=j.yyleng,J=j.yytext,ct=j.yylineno,W=j.yylloc;break;case 2:if(_t=this.productions_[Lt[1]][1],At.$=U[U.length-_t],At._$={first_line:X[X.length-(_t||1)].first_line,last_line:X[X.length-1].last_line,first_column:X[X.length-(_t||1)].first_column,last_column:X[X.length-1].last_column},bt&&(At._$.range=[X[X.length-(_t||1)].range[0],X[X.length-1].range[1]]),Dt=this.performAction.apply(At,[J,yt,ct,Y.yy,Lt[1],U,X].concat(K)),typeof Dt<"u")return Dt;_t&&(N=N.slice(0,-1*_t*2),U=U.slice(0,-1*_t),X=X.slice(0,-1*_t)),N.push(this.productions_[Lt[1]][0]),U.push(At.$),X.push(At._$),vt=lt[N[N.length-2]][N[N.length-1]],N.push(vt);break;case 3:return!0}}return!0},"parse")},$=function(){var I={EOF:1,parseError:g(function(V,N){if(this.yy.parser)this.yy.parser.parseError(V,N);else throw new Error(V)},"parseError"),setInput:g(function(F,V){return this.yy=V||this.yy||{},this._input=F,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:g(function(){var F=this._input[0];this.yytext+=F,this.yyleng++,this.offset++,this.match+=F,this.matched+=F;var V=F.match(/(?:\r\n?|\n).*/g);return V?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),F},"input"),unput:g(function(F){var V=F.length,N=F.split(/(?:\r\n?|\n)/g);this._input=F+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-V),this.offset-=V;var q=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),N.length-1&&(this.yylineno-=N.length-1);var U=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:N?(N.length===q.length?this.yylloc.first_column:0)+q[q.length-N.length].length-N[0].length:this.yylloc.first_column-V},this.options.ranges&&(this.yylloc.range=[U[0],U[0]+this.yyleng-V]),this.yyleng=this.yytext.length,this},"unput"),more:g(function(){return this._more=!0,this},"more"),reject:g(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:g(function(F){this.unput(this.match.slice(F))},"less"),pastInput:g(function(){var F=this.matched.substr(0,this.matched.length-this.match.length);return(F.length>20?"...":"")+F.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:g(function(){var F=this.match;return F.length<20&&(F+=this._input.substr(0,20-F.length)),(F.substr(0,20)+(F.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:g(function(){var F=this.pastInput(),V=new Array(F.length+1).join("-");return F+this.upcomingInput()+`
`+V+"^"},"showPosition"),test_match:g(function(F,V){var N,q,U;if(this.options.backtrack_lexer&&(U={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(U.yylloc.range=this.yylloc.range.slice(0))),q=F[0].match(/(?:\r\n?|\n).*/g),q&&(this.yylineno+=q.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:q?q[q.length-1].length-q[q.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+F[0].length},this.yytext+=F[0],this.match+=F[0],this.matches=F,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(F[0].length),this.matched+=F[0],N=this.performAction.call(this,this.yy,this,V,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),N)return N;if(this._backtrack){for(var X in U)this[X]=U[X];return!1}return!1},"test_match"),next:g(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var F,V,N,q;this._more||(this.yytext="",this.match="");for(var U=this._currentRules(),X=0;X<U.length;X++)if(N=this._input.match(this.rules[U[X]]),N&&(!V||N[0].length>V[0].length)){if(V=N,q=X,this.options.backtrack_lexer){if(F=this.test_match(N,U[X]),F!==!1)return F;if(this._backtrack){V=!1;continue}else return!1}else if(!this.options.flex)break}return V?(F=this.test_match(V,U[q]),F!==!1?F:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:g(function(){var V=this.next();return V||this.lex()},"lex"),begin:g(function(V){this.conditionStack.push(V)},"begin"),popState:g(function(){var V=this.conditionStack.length-1;return V>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:g(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:g(function(V){return V=this.conditionStack.length-1-Math.abs(V||0),V>=0?this.conditionStack[V]:"INITIAL"},"topState"),pushState:g(function(V){this.begin(V)},"pushState"),stateStackSize:g(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:g(function(V,N,q,U){switch(q){case 0:return 41;case 1:return 48;case 2:return 49;case 3:return 50;case 4:return 51;case 5:break;case 6:break;case 7:return 5;case 8:break;case 9:break;case 10:break;case 11:break;case 12:return this.pushState("SCALE"),17;case 13:return 18;case 14:this.popState();break;case 15:return this.begin("acc_title"),33;case 16:return this.popState(),"acc_title_value";case 17:return this.begin("acc_descr"),35;case 18:return this.popState(),"acc_descr_value";case 19:this.begin("acc_descr_multiline");break;case 20:this.popState();break;case 21:return"acc_descr_multiline_value";case 22:return this.pushState("CLASSDEF"),38;case 23:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 24:return this.popState(),this.pushState("CLASSDEFID"),39;case 25:return this.popState(),40;case 26:return this.pushState("CLASS"),45;case 27:return this.popState(),this.pushState("CLASS_STYLE"),46;case 28:return this.popState(),47;case 29:return this.pushState("STYLE"),42;case 30:return this.popState(),this.pushState("STYLEDEF_STYLES"),43;case 31:return this.popState(),44;case 32:return this.pushState("SCALE"),17;case 33:return 18;case 34:this.popState();break;case 35:this.pushState("STATE");break;case 36:return this.popState(),N.yytext=N.yytext.slice(0,-8).trim(),25;case 37:return this.popState(),N.yytext=N.yytext.slice(0,-8).trim(),26;case 38:return this.popState(),N.yytext=N.yytext.slice(0,-10).trim(),27;case 39:return this.popState(),N.yytext=N.yytext.slice(0,-8).trim(),25;case 40:return this.popState(),N.yytext=N.yytext.slice(0,-8).trim(),26;case 41:return this.popState(),N.yytext=N.yytext.slice(0,-10).trim(),27;case 42:return 48;case 43:return 49;case 44:return 50;case 45:return 51;case 46:this.pushState("STATE_STRING");break;case 47:return this.pushState("STATE_ID"),"AS";case 48:return this.popState(),"ID";case 49:this.popState();break;case 50:return"STATE_DESCR";case 51:return 19;case 52:this.popState();break;case 53:return this.popState(),this.pushState("struct"),20;case 54:break;case 55:return this.popState(),21;case 56:break;case 57:return this.begin("NOTE"),29;case 58:return this.popState(),this.pushState("NOTE_ID"),56;case 59:return this.popState(),this.pushState("NOTE_ID"),57;case 60:this.popState(),this.pushState("FLOATING_NOTE");break;case 61:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 62:break;case 63:return"NOTE_TEXT";case 64:return this.popState(),"ID";case 65:return this.popState(),this.pushState("NOTE_TEXT"),24;case 66:return this.popState(),N.yytext=N.yytext.substr(2).trim(),31;case 67:return this.popState(),N.yytext=N.yytext.slice(0,-8).trim(),31;case 68:return 6;case 69:return 6;case 70:return 16;case 71:return 54;case 72:return 24;case 73:return N.yytext=N.yytext.trim(),14;case 74:return 15;case 75:return 28;case 76:return 55;case 77:return 5;case 78:return"INVALID"}},"anonymous"),rules:[/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:style\s+)/i,/^(?:[\w,]+\s+)/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[9,10],inclusive:!1},struct:{rules:[9,10,22,26,29,35,42,43,44,45,54,55,56,57,71,72,73,74,75],inclusive:!1},FLOATING_NOTE_ID:{rules:[64],inclusive:!1},FLOATING_NOTE:{rules:[61,62,63],inclusive:!1},NOTE_TEXT:{rules:[66,67],inclusive:!1},NOTE_ID:{rules:[65],inclusive:!1},NOTE:{rules:[58,59,60],inclusive:!1},STYLEDEF_STYLEOPTS:{rules:[],inclusive:!1},STYLEDEF_STYLES:{rules:[31],inclusive:!1},STYLE_IDS:{rules:[],inclusive:!1},STYLE:{rules:[30],inclusive:!1},CLASS_STYLE:{rules:[28],inclusive:!1},CLASS:{rules:[27],inclusive:!1},CLASSDEFID:{rules:[25],inclusive:!1},CLASSDEF:{rules:[23,24],inclusive:!1},acc_descr_multiline:{rules:[20,21],inclusive:!1},acc_descr:{rules:[18],inclusive:!1},acc_title:{rules:[16],inclusive:!1},SCALE:{rules:[13,14,33,34],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[48],inclusive:!1},STATE_STRING:{rules:[49,50],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[9,10,36,37,38,39,40,41,46,47,51,52,53],inclusive:!1},ID:{rules:[9,10],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,10,11,12,15,17,19,22,26,29,32,35,53,57,68,69,70,71,72,73,74,76,77,78],inclusive:!0}}};return I}();P.lexer=$;function M(){this.yy={}}return g(M,"Parser"),M.prototype=P,P.Parser=M,new M}();cg.parser=cg;var Ik=cg,wP="TB",Pk="TB",zy="dir",vu="state",ug="relation",kP="classDef",TP="style",CP="applyClass",Bl="default",Nk="divider",Mk="fill:none",Fk="fill: #333",Ok="c",$k="text",Vk="normal",Id="rect",Pd="rectWithTitle",SP="stateStart",EP="stateEnd",qy="divider",Wy="roundedWithTitle",_P="note",AP="noteGroup",xc="statediagram",LP="state",DP=`${xc}-${LP}`,zk="transition",BP="note",RP="note-edge",IP=`${zk} ${RP}`,PP=`${xc}-${BP}`,NP="cluster",MP=`${xc}-${NP}`,FP="cluster-alt",OP=`${xc}-${FP}`,qk="parent",Wk="note",$P="state",e1="----",VP=`${e1}${Wk}`,Gy=`${e1}${qk}`,Gk=g((e,t=Pk)=>{if(!e.doc)return t;let r=t;for(const a of e.doc)a.stmt==="dir"&&(r=a.value);return r},"getDir"),zP=g(function(e,t){return t.db.getClasses()},"getClasses"),qP=g(async function(e,t,r,a){G.info("REF0:"),G.info("Drawing state diagram (v2)",t);const{securityLevel:i,state:n,layout:s}=dt();a.db.extract(a.db.getRootDocV2());const o=a.db.getData(),l=pc(t,i);o.type=a.type,o.layoutAlgorithm=s,o.nodeSpacing=(n==null?void 0:n.nodeSpacing)||50,o.rankSpacing=(n==null?void 0:n.rankSpacing)||50,o.markers=["barb"],o.diagramId=t,await fc(o,l);const u=8;xe.insertTitle(l,"statediagramTitleText",(n==null?void 0:n.titleTopMargin)??25,a.db.getDiagramTitle()),gc(l,u,xc,(n==null?void 0:n.useMaxWidth)??!0)},"draw"),WP={getClasses:zP,draw:qP,getDir:Gk},mu=new Map,Wi=0;function xu(e="",t=0,r="",a=e1){const i=r!==null&&r.length>0?`${a}${r}`:"";return`${$P}-${e}${i}-${t}`}g(xu,"stateDomId");var GP=g((e,t,r,a,i,n,s,o)=>{G.trace("items",t),t.forEach(l=>{switch(l.stmt){case vu:kl(e,l,r,a,i,n,s,o);break;case Bl:kl(e,l,r,a,i,n,s,o);break;case ug:{kl(e,l.state1,r,a,i,n,s,o),kl(e,l.state2,r,a,i,n,s,o);const u={id:"edge"+Wi,start:l.state1.id,end:l.state2.id,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:Mk,labelStyle:"",label:Mt.sanitizeText(l.description,dt()),arrowheadStyle:Fk,labelpos:Ok,labelType:$k,thickness:Vk,classes:zk,look:s};i.push(u),Wi++}break}})},"setupDoc"),Hy=g((e,t=Pk)=>{let r=t;if(e.doc)for(const a of e.doc)a.stmt==="dir"&&(r=a.value);return r},"getDir");function wl(e,t,r){if(!t.id||t.id==="</join></fork>"||t.id==="</choice>")return;t.cssClasses&&(Array.isArray(t.cssCompiledStyles)||(t.cssCompiledStyles=[]),t.cssClasses.split(" ").forEach(i=>{if(r.get(i)){const n=r.get(i);t.cssCompiledStyles=[...t.cssCompiledStyles,...n.styles]}}));const a=e.find(i=>i.id===t.id);a?Object.assign(a,t):e.push(t)}g(wl,"insertOrUpdateNode");function Hk(e){var t;return((t=e==null?void 0:e.classes)==null?void 0:t.join(" "))??""}g(Hk,"getClassesFromDbInfo");function Yk(e){return(e==null?void 0:e.styles)??[]}g(Yk,"getStylesFromDbInfo");var kl=g((e,t,r,a,i,n,s,o)=>{var f,p;const l=t.id,u=r.get(l),h=Hk(u),d=Yk(u);if(G.info("dataFetcher parsedItem",t,u,d),l!=="root"){let y=Id;t.start===!0?y=SP:t.start===!1&&(y=EP),t.type!==Bl&&(y=t.type),mu.get(l)||mu.set(l,{id:l,shape:y,description:Mt.sanitizeText(l,dt()),cssClasses:`${h} ${DP}`,cssStyles:d});const v=mu.get(l);t.description&&(Array.isArray(v.description)?(v.shape=Pd,v.description.push(t.description)):((f=v.description)==null?void 0:f.length)>0?(v.shape=Pd,v.description===l?v.description=[t.description]:v.description=[v.description,t.description]):(v.shape=Id,v.description=t.description),v.description=Mt.sanitizeTextOrArray(v.description,dt())),((p=v.description)==null?void 0:p.length)===1&&v.shape===Pd&&(v.type==="group"?v.shape=Wy:v.shape=Id),!v.type&&t.doc&&(G.info("Setting cluster for XCX",l,Hy(t)),v.type="group",v.isGroup=!0,v.dir=Hy(t),v.shape=t.type===Nk?qy:Wy,v.cssClasses=`${v.cssClasses} ${MP} ${n?OP:""}`);const m={labelStyle:"",shape:v.shape,label:v.description,cssClasses:v.cssClasses,cssCompiledStyles:[],cssStyles:v.cssStyles,id:l,dir:v.dir,domId:xu(l,Wi),type:v.type,isGroup:v.type==="group",padding:8,rx:10,ry:10,look:s};if(m.shape===qy&&(m.label=""),e&&e.id!=="root"&&(G.trace("Setting node ",l," to be child of its parent ",e.id),m.parentId=e.id),m.centerLabel=!0,t.note){const x={labelStyle:"",shape:_P,label:t.note.text,cssClasses:PP,cssStyles:[],cssCompilesStyles:[],id:l+VP+"-"+Wi,domId:xu(l,Wi,Wk),type:v.type,isGroup:v.type==="group",padding:dt().flowchart.padding,look:s,position:t.note.position},b=l+Gy,w={labelStyle:"",shape:AP,label:t.note.text,cssClasses:v.cssClasses,cssStyles:[],id:l+Gy,domId:xu(l,Wi,qk),type:"group",isGroup:!0,padding:16,look:s,position:t.note.position};Wi++,w.id=b,x.parentId=b,wl(a,w,o),wl(a,x,o),wl(a,m,o);let C=l,T=x.id;t.note.position==="left of"&&(C=x.id,T=l),i.push({id:C+"-"+T,start:C,end:T,arrowhead:"none",arrowTypeEnd:"",style:Mk,labelStyle:"",classes:IP,arrowheadStyle:Fk,labelpos:Ok,labelType:$k,thickness:Vk,look:s})}else wl(a,m,o)}t.doc&&(G.trace("Adding nodes children "),GP(t,t.doc,r,a,i,!n,s,o))},"dataFetcher"),HP=g(()=>{mu.clear(),Wi=0},"reset"),hg="[*]",Yy="start",Uy=hg,Xy="end",Ky="color",jy="fill",YP="bgFill",UP=",";function dg(){return new Map}g(dg,"newClassesList");var Qy=g(()=>({relations:[],states:new Map,documents:{}}),"newDoc"),qc=g(e=>JSON.parse(JSON.stringify(e)),"clone"),Fn,En=(Fn=class{constructor(t){Dr(this,"version");Dr(this,"nodes",[]);Dr(this,"edges",[]);Dr(this,"rootDoc",[]);Dr(this,"classes",dg());Dr(this,"documents",{root:Qy()});Dr(this,"currentDocument",this.documents.root);Dr(this,"startEndCount",0);Dr(this,"dividerCnt",0);Dr(this,"getAccTitle",Sr);Dr(this,"setAccTitle",vr);Dr(this,"getAccDescription",_r);Dr(this,"setAccDescription",Er);Dr(this,"setDiagramTitle",Mr);Dr(this,"getDiagramTitle",br);this.clear(),this.version=t,this.setRootDoc=this.setRootDoc.bind(this),this.getDividerId=this.getDividerId.bind(this),this.setDirection=this.setDirection.bind(this),this.trimColon=this.trimColon.bind(this)}setRootDoc(t){G.info("Setting root doc",t),this.rootDoc=t,this.version===1?this.extract(t):this.extract(this.getRootDocV2())}getRootDoc(){return this.rootDoc}docTranslator(t,r,a){if(r.stmt===ug)this.docTranslator(t,r.state1,!0),this.docTranslator(t,r.state2,!1);else if(r.stmt===vu&&(r.id==="[*]"?(r.id=a?t.id+"_start":t.id+"_end",r.start=a):r.id=r.id.trim()),r.doc){const i=[];let n=[],s;for(s=0;s<r.doc.length;s++)if(r.doc[s].type===Nk){const o=qc(r.doc[s]);o.doc=qc(n),i.push(o),n=[]}else n.push(r.doc[s]);if(i.length>0&&n.length>0){const o={stmt:vu,id:b4(),type:"divider",doc:qc(n)};i.push(qc(o)),r.doc=i}r.doc.forEach(o=>this.docTranslator(r,o,!0))}}getRootDocV2(){return this.docTranslator({id:"root"},{id:"root",doc:this.rootDoc},!0),{id:"root",doc:this.rootDoc}}extract(t){let r;t.doc?r=t.doc:r=t,G.info(r),this.clear(!0),G.info("Extract initial document:",r),r.forEach(s=>{switch(G.warn("Statement",s.stmt),s.stmt){case vu:this.addState(s.id.trim(),s.type,s.doc,s.description,s.note,s.classes,s.styles,s.textStyles);break;case ug:this.addRelation(s.state1,s.state2,s.description);break;case kP:this.addStyleClass(s.id.trim(),s.classes);break;case TP:{const o=s.id.trim().split(","),l=s.styleClass.split(",");o.forEach(u=>{let h=this.getState(u);if(h===void 0){const d=u.trim();this.addState(d),h=this.getState(d)}h.styles=l.map(d=>{var f;return(f=d.replace(/;/g,""))==null?void 0:f.trim()})})}break;case CP:this.setCssClass(s.id.trim(),s.styleClass);break}});const a=this.getStates(),n=dt().look;HP(),kl(void 0,this.getRootDocV2(),a,this.nodes,this.edges,!0,n,this.classes),this.nodes.forEach(s=>{if(Array.isArray(s.label)){if(s.description=s.label.slice(1),s.isGroup&&s.description.length>0)throw new Error("Group nodes can only have label. Remove the additional description for node ["+s.id+"]");s.label=s.label[0]}})}addState(t,r=Bl,a=null,i=null,n=null,s=null,o=null,l=null){const u=t==null?void 0:t.trim();if(this.currentDocument.states.has(u)?(this.currentDocument.states.get(u).doc||(this.currentDocument.states.get(u).doc=a),this.currentDocument.states.get(u).type||(this.currentDocument.states.get(u).type=r)):(G.info("Adding state ",u,i),this.currentDocument.states.set(u,{id:u,descriptions:[],type:r,doc:a,note:n,classes:[],styles:[],textStyles:[]})),i&&(G.info("Setting state description",u,i),typeof i=="string"&&this.addDescription(u,i.trim()),typeof i=="object"&&i.forEach(h=>this.addDescription(u,h.trim()))),n){const h=this.currentDocument.states.get(u);h.note=n,h.note.text=Mt.sanitizeText(h.note.text,dt())}s&&(G.info("Setting state classes",u,s),(typeof s=="string"?[s]:s).forEach(d=>this.setCssClass(u,d.trim()))),o&&(G.info("Setting state styles",u,o),(typeof o=="string"?[o]:o).forEach(d=>this.setStyle(u,d.trim()))),l&&(G.info("Setting state styles",u,o),(typeof l=="string"?[l]:l).forEach(d=>this.setTextStyle(u,d.trim())))}clear(t){this.nodes=[],this.edges=[],this.documents={root:Qy()},this.currentDocument=this.documents.root,this.startEndCount=0,this.classes=dg(),t||xr()}getState(t){return this.currentDocument.states.get(t)}getStates(){return this.currentDocument.states}logDocuments(){G.info("Documents = ",this.documents)}getRelations(){return this.currentDocument.relations}startIdIfNeeded(t=""){let r=t;return t===hg&&(this.startEndCount++,r=`${Yy}${this.startEndCount}`),r}startTypeIfNeeded(t="",r=Bl){return t===hg?Yy:r}endIdIfNeeded(t=""){let r=t;return t===Uy&&(this.startEndCount++,r=`${Xy}${this.startEndCount}`),r}endTypeIfNeeded(t="",r=Bl){return t===Uy?Xy:r}addRelationObjs(t,r,a){let i=this.startIdIfNeeded(t.id.trim()),n=this.startTypeIfNeeded(t.id.trim(),t.type),s=this.startIdIfNeeded(r.id.trim()),o=this.startTypeIfNeeded(r.id.trim(),r.type);this.addState(i,n,t.doc,t.description,t.note,t.classes,t.styles,t.textStyles),this.addState(s,o,r.doc,r.description,r.note,r.classes,r.styles,r.textStyles),this.currentDocument.relations.push({id1:i,id2:s,relationTitle:Mt.sanitizeText(a,dt())})}addRelation(t,r,a){if(typeof t=="object")this.addRelationObjs(t,r,a);else{const i=this.startIdIfNeeded(t.trim()),n=this.startTypeIfNeeded(t),s=this.endIdIfNeeded(r.trim()),o=this.endTypeIfNeeded(r);this.addState(i,n),this.addState(s,o),this.currentDocument.relations.push({id1:i,id2:s,title:Mt.sanitizeText(a,dt())})}}addDescription(t,r){const a=this.currentDocument.states.get(t),i=r.startsWith(":")?r.replace(":","").trim():r;a.descriptions.push(Mt.sanitizeText(i,dt()))}cleanupLabel(t){return t.substring(0,1)===":"?t.substr(2).trim():t.trim()}getDividerId(){return this.dividerCnt++,"divider-id-"+this.dividerCnt}addStyleClass(t,r=""){this.classes.has(t)||this.classes.set(t,{id:t,styles:[],textStyles:[]});const a=this.classes.get(t);r!=null&&r.split(UP).forEach(i=>{const n=i.replace(/([^;]*);/,"$1").trim();if(RegExp(Ky).exec(i)){const o=n.replace(jy,YP).replace(Ky,jy);a.textStyles.push(o)}a.styles.push(n)})}getClasses(){return this.classes}setCssClass(t,r){t.split(",").forEach(a=>{let i=this.getState(a);if(i===void 0){const n=a.trim();this.addState(n),i=this.getState(n)}i.classes.push(r)})}setStyle(t,r){const a=this.getState(t);a!==void 0&&a.styles.push(r)}setTextStyle(t,r){const a=this.getState(t);a!==void 0&&a.textStyles.push(r)}getDirectionStatement(){return this.rootDoc.find(t=>t.stmt===zy)}getDirection(){var t;return((t=this.getDirectionStatement())==null?void 0:t.value)??wP}setDirection(t){const r=this.getDirectionStatement();r?r.value=t:this.rootDoc.unshift({stmt:zy,value:t})}trimColon(t){return t&&t[0]===":"?t.substr(1).trim():t.trim()}getData(){const t=dt();return{nodes:this.nodes,edges:this.edges,other:{},config:t,direction:Gk(this.getRootDocV2())}}getConfig(){return dt().state}},g(Fn,"StateDB"),Dr(Fn,"relationType",{AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3}),Fn),XP=g(e=>`
defs #statediagram-barbEnd {
    fill: ${e.transitionColor};
    stroke: ${e.transitionColor};
  }
g.stateGroup text {
  fill: ${e.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${e.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${e.stateLabelColor};
}

g.stateGroup rect {
  fill: ${e.mainBkg};
  stroke: ${e.nodeBorder};
}

g.stateGroup line {
  stroke: ${e.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${e.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${e.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${e.noteBorderColor};
  fill: ${e.noteBkgColor};

  text {
    fill: ${e.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${e.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${e.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel {
  background-color: ${e.edgeLabelBackground};
  p {
    background-color: ${e.edgeLabelBackground};
  }
  rect {
    opacity: 0.5;
    background-color: ${e.edgeLabelBackground};
    fill: ${e.edgeLabelBackground};
  }
  text-align: center;
}
.edgeLabel .label text {
  fill: ${e.transitionLabelColor||e.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${e.transitionLabelColor||e.tertiaryTextColor};
}

.stateLabel text {
  fill: ${e.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${e.specialStateColor};
  stroke: ${e.specialStateColor};
}

.node .fork-join {
  fill: ${e.specialStateColor};
  stroke: ${e.specialStateColor};
}

.node circle.state-end {
  fill: ${e.innerEndBackground};
  stroke: ${e.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${e.compositeBackground||e.background};
  // stroke: ${e.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${e.stateBkg||e.mainBkg};
  stroke: ${e.stateBorder||e.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${e.mainBkg};
  stroke: ${e.stateBorder||e.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${e.lineColor};
}

.statediagram-cluster rect {
  fill: ${e.compositeTitleBackground};
  stroke: ${e.stateBorder||e.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${e.stateLabelColor};
  // line-height: 1;
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${e.stateBorder||e.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${e.compositeBackground||e.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${e.altBackground?e.altBackground:"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${e.altBackground?e.altBackground:"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${e.noteBkgColor};
  stroke: ${e.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${e.noteBkgColor};
  stroke: ${e.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${e.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${e.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${e.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${e.lineColor};
  stroke: ${e.lineColor};
  stroke-width: 1;
}

.statediagramTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${e.textColor};
}
`,"getStyles"),Uk=XP,r1={},KP=g((e,t)=>{r1[e]=t},"set"),jP=g(e=>r1[e],"get"),Xk=g(()=>Object.keys(r1),"keys"),QP=g(()=>Xk().length,"size"),ZP={get:jP,set:KP,keys:Xk,size:QP},JP=g(e=>e.append("circle").attr("class","start-state").attr("r",dt().state.sizeUnit).attr("cx",dt().state.padding+dt().state.sizeUnit).attr("cy",dt().state.padding+dt().state.sizeUnit),"drawStartState"),tN=g(e=>e.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",dt().state.textHeight).attr("class","divider").attr("x2",dt().state.textHeight*2).attr("y1",0).attr("y2",0),"drawDivider"),eN=g((e,t)=>{const r=e.append("text").attr("x",2*dt().state.padding).attr("y",dt().state.textHeight+2*dt().state.padding).attr("font-size",dt().state.fontSize).attr("class","state-title").text(t.id),a=r.node().getBBox();return e.insert("rect",":first-child").attr("x",dt().state.padding).attr("y",dt().state.padding).attr("width",a.width+2*dt().state.padding).attr("height",a.height+2*dt().state.padding).attr("rx",dt().state.radius),r},"drawSimpleState"),rN=g((e,t)=>{const r=g(function(f,p,y){const v=f.append("tspan").attr("x",2*dt().state.padding).text(p);y||v.attr("dy",dt().state.textHeight)},"addTspan"),i=e.append("text").attr("x",2*dt().state.padding).attr("y",dt().state.textHeight+1.3*dt().state.padding).attr("font-size",dt().state.fontSize).attr("class","state-title").text(t.descriptions[0]).node().getBBox(),n=i.height,s=e.append("text").attr("x",dt().state.padding).attr("y",n+dt().state.padding*.4+dt().state.dividerMargin+dt().state.textHeight).attr("class","state-description");let o=!0,l=!0;t.descriptions.forEach(function(f){o||(r(s,f,l),l=!1),o=!1});const u=e.append("line").attr("x1",dt().state.padding).attr("y1",dt().state.padding+n+dt().state.dividerMargin/2).attr("y2",dt().state.padding+n+dt().state.dividerMargin/2).attr("class","descr-divider"),h=s.node().getBBox(),d=Math.max(h.width,i.width);return u.attr("x2",d+3*dt().state.padding),e.insert("rect",":first-child").attr("x",dt().state.padding).attr("y",dt().state.padding).attr("width",d+2*dt().state.padding).attr("height",h.height+n+2*dt().state.padding).attr("rx",dt().state.radius),e},"drawDescrState"),aN=g((e,t,r)=>{const a=dt().state.padding,i=2*dt().state.padding,n=e.node().getBBox(),s=n.width,o=n.x,l=e.append("text").attr("x",0).attr("y",dt().state.titleShift).attr("font-size",dt().state.fontSize).attr("class","state-title").text(t.id),h=l.node().getBBox().width+i;let d=Math.max(h,s);d===s&&(d=d+i);let f;const p=e.node().getBBox();t.doc,f=o-a,h>s&&(f=(s-d)/2+a),Math.abs(o-p.x)<a&&h>s&&(f=o-(h-s)/2);const y=1-dt().state.textHeight;return e.insert("rect",":first-child").attr("x",f).attr("y",y).attr("class",r?"alt-composit":"composit").attr("width",d).attr("height",p.height+dt().state.textHeight+dt().state.titleShift+1).attr("rx","0"),l.attr("x",f+a),h<=s&&l.attr("x",o+(d-i)/2-h/2+a),e.insert("rect",":first-child").attr("x",f).attr("y",dt().state.titleShift-dt().state.textHeight-dt().state.padding).attr("width",d).attr("height",dt().state.textHeight*3).attr("rx",dt().state.radius),e.insert("rect",":first-child").attr("x",f).attr("y",dt().state.titleShift-dt().state.textHeight-dt().state.padding).attr("width",d).attr("height",p.height+3+2*dt().state.textHeight).attr("rx",dt().state.radius),e},"addTitleAndBox"),iN=g(e=>(e.append("circle").attr("class","end-state-outer").attr("r",dt().state.sizeUnit+dt().state.miniPadding).attr("cx",dt().state.padding+dt().state.sizeUnit+dt().state.miniPadding).attr("cy",dt().state.padding+dt().state.sizeUnit+dt().state.miniPadding),e.append("circle").attr("class","end-state-inner").attr("r",dt().state.sizeUnit).attr("cx",dt().state.padding+dt().state.sizeUnit+2).attr("cy",dt().state.padding+dt().state.sizeUnit+2)),"drawEndState"),nN=g((e,t)=>{let r=dt().state.forkWidth,a=dt().state.forkHeight;if(t.parentId){let i=r;r=a,a=i}return e.append("rect").style("stroke","black").style("fill","black").attr("width",r).attr("height",a).attr("x",dt().state.padding).attr("y",dt().state.padding)},"drawForkJoinState"),sN=g((e,t,r,a)=>{let i=0;const n=a.append("text");n.style("text-anchor","start"),n.attr("class","noteText");let s=e.replace(/\r\n/g,"<br/>");s=s.replace(/\n/g,"<br/>");const o=s.split(Mt.lineBreakRegex);let l=1.25*dt().state.noteMargin;for(const u of o){const h=u.trim();if(h.length>0){const d=n.append("tspan");if(d.text(h),l===0){const f=d.node().getBBox();l+=f.height}i+=l,d.attr("x",t+dt().state.noteMargin),d.attr("y",r+i+1.25*dt().state.noteMargin)}}return{textWidth:n.node().getBBox().width,textHeight:i}},"_drawLongText"),oN=g((e,t)=>{t.attr("class","state-note");const r=t.append("rect").attr("x",0).attr("y",dt().state.padding),a=t.append("g"),{textWidth:i,textHeight:n}=sN(e,0,0,a);return r.attr("height",n+2*dt().state.noteMargin),r.attr("width",i+dt().state.noteMargin*2),r},"drawNote"),Zy=g(function(e,t){const r=t.id,a={id:r,label:t.id,width:0,height:0},i=e.append("g").attr("id",r).attr("class","stateGroup");t.type==="start"&&JP(i),t.type==="end"&&iN(i),(t.type==="fork"||t.type==="join")&&nN(i,t),t.type==="note"&&oN(t.note.text,i),t.type==="divider"&&tN(i),t.type==="default"&&t.descriptions.length===0&&eN(i,t),t.type==="default"&&t.descriptions.length>0&&rN(i,t);const n=i.node().getBBox();return a.width=n.width+2*dt().state.padding,a.height=n.height+2*dt().state.padding,ZP.set(r,a),a},"drawState"),Jy=0,lN=g(function(e,t,r){const a=g(function(l){switch(l){case En.relationType.AGGREGATION:return"aggregation";case En.relationType.EXTENSION:return"extension";case En.relationType.COMPOSITION:return"composition";case En.relationType.DEPENDENCY:return"dependency"}},"getRelationType");t.points=t.points.filter(l=>!Number.isNaN(l.y));const i=t.points,n=Ml().x(function(l){return l.x}).y(function(l){return l.y}).curve(Ss),s=e.append("path").attr("d",n(i)).attr("id","edge"+Jy).attr("class","transition");let o="";if(dt().state.arrowMarkerAbsolute&&(o=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,o=o.replace(/\(/g,"\\("),o=o.replace(/\)/g,"\\)")),s.attr("marker-end","url("+o+"#"+a(En.relationType.DEPENDENCY)+"End)"),r.title!==void 0){const l=e.append("g").attr("class","stateLabel"),{x:u,y:h}=xe.calcLabelPosition(t.points),d=Mt.getRows(r.title);let f=0;const p=[];let y=0,v=0;for(let b=0;b<=d.length;b++){const w=l.append("text").attr("text-anchor","middle").text(d[b]).attr("x",u).attr("y",h+f),C=w.node().getBBox();y=Math.max(y,C.width),v=Math.min(v,C.x),G.info(C.x,u,h+f),f===0&&(f=w.node().getBBox().height,G.info("Title height",f,h)),p.push(w)}let m=f*d.length;if(d.length>1){const b=(d.length-1)*f*.5;p.forEach((w,C)=>w.attr("y",h+C*f-b)),m=f*d.length}const x=l.node().getBBox();l.insert("rect",":first-child").attr("class","box").attr("x",u-y/2-dt().state.padding/2).attr("y",h-m/2-dt().state.padding/2-3.5).attr("width",y+dt().state.padding).attr("height",m+dt().state.padding),G.info(x)}Jy++},"drawEdge"),ya,Nd={},cN=g(function(){},"setConf"),uN=g(function(e){e.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"insertMarkers"),hN=g(function(e,t,r,a){ya=dt().state;const i=dt().securityLevel;let n;i==="sandbox"&&(n=It("#i"+t));const s=i==="sandbox"?It(n.nodes()[0].contentDocument.body):It("body"),o=i==="sandbox"?n.nodes()[0].contentDocument:document;G.debug("Rendering diagram "+e);const l=s.select(`[id='${t}']`);uN(l);const u=a.db.getRootDoc();Kk(u,l,void 0,!1,s,o,a);const h=ya.padding,d=l.node().getBBox(),f=d.width+h*2,p=d.height+h*2,y=f*1.75;da(l,p,y,ya.useMaxWidth),l.attr("viewBox",`${d.x-ya.padding}  ${d.y-ya.padding} `+f+" "+p)},"draw"),dN=g(e=>e?e.length*ya.fontSizeFactor:1,"getLabelWidth"),Kk=g((e,t,r,a,i,n,s)=>{const o=new Eh({compound:!0,multigraph:!0});let l,u=!0;for(l=0;l<e.length;l++)if(e[l].stmt==="relation"){u=!1;break}r?o.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:u?1:ya.edgeLengthFactor,nodeSep:u?1:50,isMultiGraph:!0}):o.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:u?1:ya.edgeLengthFactor,nodeSep:u?1:50,ranker:"tight-tree",isMultiGraph:!0}),o.setDefaultEdgeLabel(function(){return{}});const h=s.db.getStates(),d=s.db.getRelations(),f=Object.keys(h);for(const x of f){const b=h[x];r&&(b.parentId=r);let w;if(b.doc){let C=t.append("g").attr("id",b.id).attr("class","stateGroup");w=Kk(b.doc,C,b.id,!a,i,n,s);{C=aN(C,b,a);let T=C.node().getBBox();w.width=T.width,w.height=T.height+ya.padding/2,Nd[b.id]={y:ya.compositTitleSize}}}else w=Zy(t,b,o);if(b.note){const C={descriptions:[],id:b.id+"-note",note:b.note,type:"note"},T=Zy(t,C,o);b.note.position==="left of"?(o.setNode(w.id+"-note",T),o.setNode(w.id,w)):(o.setNode(w.id,w),o.setNode(w.id+"-note",T)),o.setParent(w.id,w.id+"-group"),o.setParent(w.id+"-note",w.id+"-group")}else o.setNode(w.id,w)}G.debug("Count=",o.nodeCount(),o);let p=0;d.forEach(function(x){p++,G.debug("Setting edge",x),o.setEdge(x.id1,x.id2,{relation:x,width:dN(x.title),height:ya.labelHeight*Mt.getRows(x.title).length,labelpos:"c"},"id"+p)}),cx(o),G.debug("Graph after layout",o.nodes());const y=t.node();o.nodes().forEach(function(x){x!==void 0&&o.node(x)!==void 0?(G.warn("Node "+x+": "+JSON.stringify(o.node(x))),i.select("#"+y.id+" #"+x).attr("transform","translate("+(o.node(x).x-o.node(x).width/2)+","+(o.node(x).y+(Nd[x]?Nd[x].y:0)-o.node(x).height/2)+" )"),i.select("#"+y.id+" #"+x).attr("data-x-shift",o.node(x).x-o.node(x).width/2),n.querySelectorAll("#"+y.id+" #"+x+" .divider").forEach(w=>{const C=w.parentElement;let T=0,k=0;C&&(C.parentElement&&(T=C.parentElement.getBBox().width),k=parseInt(C.getAttribute("data-x-shift"),10),Number.isNaN(k)&&(k=0)),w.setAttribute("x1",0-k+8),w.setAttribute("x2",T-k-8)})):G.debug("No Node "+x+": "+JSON.stringify(o.node(x)))});let v=y.getBBox();o.edges().forEach(function(x){x!==void 0&&o.edge(x)!==void 0&&(G.debug("Edge "+x.v+" -> "+x.w+": "+JSON.stringify(o.edge(x))),lN(t,o.edge(x),o.edge(x).relation))}),v=y.getBBox();const m={id:r||"root",label:r||"root",width:0,height:0};return m.width=v.width+2*ya.padding,m.height=v.height+2*ya.padding,G.debug("Doc rendered",m,o),m},"renderDoc"),fN={setConf:cN,draw:hN},pN={parser:Ik,get db(){return new En(1)},renderer:fN,styles:Uk,init:g(e=>{e.state||(e.state={}),e.state.arrowMarkerAbsolute=e.arrowMarkerAbsolute},"init")};const gN=Object.freeze({__proto__:null,diagram:pN});var yN={parser:Ik,get db(){return new En(2)},renderer:WP,styles:Uk,init:g(e=>{e.state||(e.state={}),e.state.arrowMarkerAbsolute=e.arrowMarkerAbsolute},"init")};const vN=Object.freeze({__proto__:null,diagram:yN});var fg=function(){var e=g(function(d,f,p,y){for(p=p||{},y=d.length;y--;p[d[y]]=f);return p},"o"),t=[6,8,10,11,12,14,16,17,18],r=[1,9],a=[1,10],i=[1,11],n=[1,12],s=[1,13],o=[1,14],l={trace:g(function(){},"trace"),yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,taskName:18,taskData:19,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",18:"taskName",19:"taskData"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,2]],performAction:g(function(f,p,y,v,m,x,b){var w=x.length-1;switch(m){case 1:return x[w-1];case 2:this.$=[];break;case 3:x[w-1].push(x[w]),this.$=x[w-1];break;case 4:case 5:this.$=x[w];break;case 6:case 7:this.$=[];break;case 8:v.setDiagramTitle(x[w].substr(6)),this.$=x[w].substr(6);break;case 9:this.$=x[w].trim(),v.setAccTitle(this.$);break;case 10:case 11:this.$=x[w].trim(),v.setAccDescription(this.$);break;case 12:v.addSection(x[w].substr(8)),this.$=x[w].substr(8);break;case 13:v.addTask(x[w-1],x[w]),this.$="task";break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},e(t,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:r,12:a,14:i,16:n,17:s,18:o},e(t,[2,7],{1:[2,1]}),e(t,[2,3]),{9:15,11:r,12:a,14:i,16:n,17:s,18:o},e(t,[2,5]),e(t,[2,6]),e(t,[2,8]),{13:[1,16]},{15:[1,17]},e(t,[2,11]),e(t,[2,12]),{19:[1,18]},e(t,[2,4]),e(t,[2,9]),e(t,[2,10]),e(t,[2,13])],defaultActions:{},parseError:g(function(f,p){if(p.recoverable)this.trace(f);else{var y=new Error(f);throw y.hash=p,y}},"parseError"),parse:g(function(f){var p=this,y=[0],v=[],m=[null],x=[],b=this.table,w="",C=0,T=0,k=2,S=1,L=x.slice.call(arguments,1),_=Object.create(this.lexer),A={yy:{}};for(var E in this.yy)Object.prototype.hasOwnProperty.call(this.yy,E)&&(A.yy[E]=this.yy[E]);_.setInput(f,A.yy),A.yy.lexer=_,A.yy.parser=this,typeof _.yylloc>"u"&&(_.yylloc={});var D=_.yylloc;x.push(D);var R=_.options&&_.options.ranges;typeof A.yy.parseError=="function"?this.parseError=A.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function O(J){y.length=y.length-2*J,m.length=m.length-J,x.length=x.length-J}g(O,"popStack");function P(){var J;return J=v.pop()||_.lex()||S,typeof J!="number"&&(J instanceof Array&&(v=J,J=v.pop()),J=p.symbols_[J]||J),J}g(P,"lex");for(var $,M,I,F,V={},N,q,U,X;;){if(M=y[y.length-1],this.defaultActions[M]?I=this.defaultActions[M]:(($===null||typeof $>"u")&&($=P()),I=b[M]&&b[M][$]),typeof I>"u"||!I.length||!I[0]){var lt="";X=[];for(N in b[M])this.terminals_[N]&&N>k&&X.push("'"+this.terminals_[N]+"'");_.showPosition?lt="Parse error on line "+(C+1)+`:
`+_.showPosition()+`
Expecting `+X.join(", ")+", got '"+(this.terminals_[$]||$)+"'":lt="Parse error on line "+(C+1)+": Unexpected "+($==S?"end of input":"'"+(this.terminals_[$]||$)+"'"),this.parseError(lt,{text:_.match,token:this.terminals_[$]||$,line:_.yylineno,loc:D,expected:X})}if(I[0]instanceof Array&&I.length>1)throw new Error("Parse Error: multiple actions possible at state: "+M+", token: "+$);switch(I[0]){case 1:y.push($),m.push(_.yytext),x.push(_.yylloc),y.push(I[1]),$=null,T=_.yyleng,w=_.yytext,C=_.yylineno,D=_.yylloc;break;case 2:if(q=this.productions_[I[1]][1],V.$=m[m.length-q],V._$={first_line:x[x.length-(q||1)].first_line,last_line:x[x.length-1].last_line,first_column:x[x.length-(q||1)].first_column,last_column:x[x.length-1].last_column},R&&(V._$.range=[x[x.length-(q||1)].range[0],x[x.length-1].range[1]]),F=this.performAction.apply(V,[w,T,C,A.yy,I[1],m,x].concat(L)),typeof F<"u")return F;q&&(y=y.slice(0,-1*q*2),m=m.slice(0,-1*q),x=x.slice(0,-1*q)),y.push(this.productions_[I[1]][0]),m.push(V.$),x.push(V._$),U=b[y[y.length-2]][y[y.length-1]],y.push(U);break;case 3:return!0}}return!0},"parse")},u=function(){var d={EOF:1,parseError:g(function(p,y){if(this.yy.parser)this.yy.parser.parseError(p,y);else throw new Error(p)},"parseError"),setInput:g(function(f,p){return this.yy=p||this.yy||{},this._input=f,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:g(function(){var f=this._input[0];this.yytext+=f,this.yyleng++,this.offset++,this.match+=f,this.matched+=f;var p=f.match(/(?:\r\n?|\n).*/g);return p?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),f},"input"),unput:g(function(f){var p=f.length,y=f.split(/(?:\r\n?|\n)/g);this._input=f+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-p),this.offset-=p;var v=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),y.length-1&&(this.yylineno-=y.length-1);var m=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:y?(y.length===v.length?this.yylloc.first_column:0)+v[v.length-y.length].length-y[0].length:this.yylloc.first_column-p},this.options.ranges&&(this.yylloc.range=[m[0],m[0]+this.yyleng-p]),this.yyleng=this.yytext.length,this},"unput"),more:g(function(){return this._more=!0,this},"more"),reject:g(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:g(function(f){this.unput(this.match.slice(f))},"less"),pastInput:g(function(){var f=this.matched.substr(0,this.matched.length-this.match.length);return(f.length>20?"...":"")+f.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:g(function(){var f=this.match;return f.length<20&&(f+=this._input.substr(0,20-f.length)),(f.substr(0,20)+(f.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:g(function(){var f=this.pastInput(),p=new Array(f.length+1).join("-");return f+this.upcomingInput()+`
`+p+"^"},"showPosition"),test_match:g(function(f,p){var y,v,m;if(this.options.backtrack_lexer&&(m={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(m.yylloc.range=this.yylloc.range.slice(0))),v=f[0].match(/(?:\r\n?|\n).*/g),v&&(this.yylineno+=v.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:v?v[v.length-1].length-v[v.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+f[0].length},this.yytext+=f[0],this.match+=f[0],this.matches=f,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(f[0].length),this.matched+=f[0],y=this.performAction.call(this,this.yy,this,p,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),y)return y;if(this._backtrack){for(var x in m)this[x]=m[x];return!1}return!1},"test_match"),next:g(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var f,p,y,v;this._more||(this.yytext="",this.match="");for(var m=this._currentRules(),x=0;x<m.length;x++)if(y=this._input.match(this.rules[m[x]]),y&&(!p||y[0].length>p[0].length)){if(p=y,v=x,this.options.backtrack_lexer){if(f=this.test_match(y,m[x]),f!==!1)return f;if(this._backtrack){p=!1;continue}else return!1}else if(!this.options.flex)break}return p?(f=this.test_match(p,m[v]),f!==!1?f:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:g(function(){var p=this.next();return p||this.lex()},"lex"),begin:g(function(p){this.conditionStack.push(p)},"begin"),popState:g(function(){var p=this.conditionStack.length-1;return p>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:g(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:g(function(p){return p=this.conditionStack.length-1-Math.abs(p||0),p>=0?this.conditionStack[p]:"INITIAL"},"topState"),pushState:g(function(p){this.begin(p)},"pushState"),stateStackSize:g(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:g(function(p,y,v,m){switch(v){case 0:break;case 1:break;case 2:return 10;case 3:break;case 4:break;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 18;case 16:return 19;case 17:return":";case 18:return 6;case 19:return"INVALID"}},"anonymous"),rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18,19],inclusive:!0}}};return d}();l.lexer=u;function h(){this.yy={}}return g(h,"Parser"),h.prototype=l,l.Parser=h,new h}();fg.parser=fg;var mN=fg,Io="",a1=[],Xl=[],Kl=[],xN=g(function(){a1.length=0,Xl.length=0,Io="",Kl.length=0,xr()},"clear"),bN=g(function(e){Io=e,a1.push(e)},"addSection"),wN=g(function(){return a1},"getSections"),kN=g(function(){let e=tv();const t=100;let r=0;for(;!e&&r<t;)e=tv(),r++;return Xl.push(...Kl),Xl},"getTasks"),TN=g(function(){const e=[];return Xl.forEach(r=>{r.people&&e.push(...r.people)}),[...new Set(e)].sort()},"updateActors"),CN=g(function(e,t){const r=t.substr(1).split(":");let a=0,i=[];r.length===1?(a=Number(r[0]),i=[]):(a=Number(r[0]),i=r[1].split(","));const n=i.map(o=>o.trim()),s={section:Io,type:Io,people:n,task:e,score:a};Kl.push(s)},"addTask"),SN=g(function(e){const t={section:Io,type:Io,description:e,task:e,classes:[]};Xl.push(t)},"addTaskOrg"),tv=g(function(){const e=g(function(r){return Kl[r].processed},"compileTask");let t=!0;for(const[r,a]of Kl.entries())e(r),t=t&&a.processed;return t},"compileTasks"),EN=g(function(){return TN()},"getActors"),ev={getConfig:g(()=>dt().journey,"getConfig"),clear:xN,setDiagramTitle:Mr,getDiagramTitle:br,setAccTitle:vr,getAccTitle:Sr,setAccDescription:Er,getAccDescription:_r,addSection:bN,getSections:wN,getTasks:kN,addTask:CN,addTaskOrg:SN,getActors:EN},_N=g(e=>`.label {
    font-family: ${e.fontFamily};
    color: ${e.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${e.textColor}
  }

  .legend {
    fill: ${e.textColor};
    font-family: ${e.fontFamily};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${e.textColor}
  }

  .face {
    ${e.faceColor?`fill: ${e.faceColor}`:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${e.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${e.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${e.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${e.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${e.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${e.fontFamily};
    font-size: 12px;
    background: ${e.tertiaryColor};
    border: 1px solid ${e.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${e.fillType0?`fill: ${e.fillType0}`:""};
  }
  .task-type-1, .section-type-1  {
    ${e.fillType0?`fill: ${e.fillType1}`:""};
  }
  .task-type-2, .section-type-2  {
    ${e.fillType0?`fill: ${e.fillType2}`:""};
  }
  .task-type-3, .section-type-3  {
    ${e.fillType0?`fill: ${e.fillType3}`:""};
  }
  .task-type-4, .section-type-4  {
    ${e.fillType0?`fill: ${e.fillType4}`:""};
  }
  .task-type-5, .section-type-5  {
    ${e.fillType0?`fill: ${e.fillType5}`:""};
  }
  .task-type-6, .section-type-6  {
    ${e.fillType0?`fill: ${e.fillType6}`:""};
  }
  .task-type-7, .section-type-7  {
    ${e.fillType0?`fill: ${e.fillType7}`:""};
  }

  .actor-0 {
    ${e.actor0?`fill: ${e.actor0}`:""};
  }
  .actor-1 {
    ${e.actor1?`fill: ${e.actor1}`:""};
  }
  .actor-2 {
    ${e.actor2?`fill: ${e.actor2}`:""};
  }
  .actor-3 {
    ${e.actor3?`fill: ${e.actor3}`:""};
  }
  .actor-4 {
    ${e.actor4?`fill: ${e.actor4}`:""};
  }
  .actor-5 {
    ${e.actor5?`fill: ${e.actor5}`:""};
  }
`,"getStyles"),AN=_N,i1=g(function(e,t){return Vh(e,t)},"drawRect"),LN=g(function(e,t){const a=e.append("circle").attr("cx",t.cx).attr("cy",t.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),i=e.append("g");i.append("circle").attr("cx",t.cx-15/3).attr("cy",t.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),i.append("circle").attr("cx",t.cx+15/3).attr("cy",t.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function n(l){const u=So().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",u).attr("transform","translate("+t.cx+","+(t.cy+2)+")")}g(n,"smile");function s(l){const u=So().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",u).attr("transform","translate("+t.cx+","+(t.cy+7)+")")}g(s,"sad");function o(l){l.append("line").attr("class","mouth").attr("stroke",2).attr("x1",t.cx-5).attr("y1",t.cy+7).attr("x2",t.cx+5).attr("y2",t.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return g(o,"ambivalent"),t.score>3?n(i):t.score<3?s(i):o(i),a},"drawFace"),jk=g(function(e,t){const r=e.append("circle");return r.attr("cx",t.cx),r.attr("cy",t.cy),r.attr("class","actor-"+t.pos),r.attr("fill",t.fill),r.attr("stroke",t.stroke),r.attr("r",t.r),r.class!==void 0&&r.attr("class",r.class),t.title!==void 0&&r.append("title").text(t.title),r},"drawCircle"),Qk=g(function(e,t){return NL(e,t)},"drawText"),DN=g(function(e,t){function r(i,n,s,o,l){return i+","+n+" "+(i+s)+","+n+" "+(i+s)+","+(n+o-l)+" "+(i+s-l*1.2)+","+(n+o)+" "+i+","+(n+o)}g(r,"genPoints");const a=e.append("polygon");a.attr("points",r(t.x,t.y,50,20,7)),a.attr("class","labelBox"),t.y=t.y+t.labelMargin,t.x=t.x+.5*t.labelMargin,Qk(e,t)},"drawLabel"),BN=g(function(e,t,r){const a=e.append("g"),i=jn();i.x=t.x,i.y=t.y,i.fill=t.fill,i.width=r.width*t.taskCount+r.diagramMarginX*(t.taskCount-1),i.height=r.height,i.class="journey-section section-type-"+t.num,i.rx=3,i.ry=3,i1(a,i),Zk(r)(t.text,a,i.x,i.y,i.width,i.height,{class:"journey-section section-type-"+t.num},r,t.colour)},"drawSection"),rv=-1,RN=g(function(e,t,r){const a=t.x+r.width/2,i=e.append("g");rv++;const n=300+5*30;i.append("line").attr("id","task"+rv).attr("x1",a).attr("y1",t.y).attr("x2",a).attr("y2",n).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),LN(i,{cx:a,cy:300+(5-t.score)*30,score:t.score});const s=jn();s.x=t.x,s.y=t.y,s.fill=t.fill,s.width=r.width,s.height=r.height,s.class="task task-type-"+t.num,s.rx=3,s.ry=3,i1(i,s);let o=t.x+14;t.people.forEach(l=>{const u=t.actors[l].color,h={cx:o,cy:t.y,r:7,fill:u,stroke:"#000",title:l,pos:t.actors[l].position};jk(i,h),o+=10}),Zk(r)(t.task,i,s.x,s.y,s.width,s.height,{class:"task"},r,t.colour)},"drawTask"),IN=g(function(e,t){Z3(e,t)},"drawBackgroundRect"),Zk=function(){function e(i,n,s,o,l,u,h,d){const f=n.append("text").attr("x",s+l/2).attr("y",o+u/2+5).style("font-color",d).style("text-anchor","middle").text(i);a(f,h)}g(e,"byText");function t(i,n,s,o,l,u,h,d,f){const{taskFontSize:p,taskFontFamily:y}=d,v=i.split(/<br\s*\/?>/gi);for(let m=0;m<v.length;m++){const x=m*p-p*(v.length-1)/2,b=n.append("text").attr("x",s+l/2).attr("y",o).attr("fill",f).style("text-anchor","middle").style("font-size",p).style("font-family",y);b.append("tspan").attr("x",s+l/2).attr("dy",x).text(v[m]),b.attr("y",o+u/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),a(b,h)}}g(t,"byTspan");function r(i,n,s,o,l,u,h,d){const f=n.append("switch"),y=f.append("foreignObject").attr("x",s).attr("y",o).attr("width",l).attr("height",u).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),t(i,f,s,o,l,u,h,d),a(y,h)}g(r,"byFo");function a(i,n){for(const s in n)s in n&&i.attr(s,n[s])}return g(a,"_setTextAttrs"),function(i){return i.textPlacement==="fo"?r:i.textPlacement==="old"?e:t}}(),PN=g(function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},"initGraphics"),jl={drawRect:i1,drawCircle:jk,drawSection:BN,drawText:Qk,drawLabel:DN,drawTask:RN,drawBackgroundRect:IN,initGraphics:PN},NN=g(function(e){Object.keys(e).forEach(function(r){Uh[r]=e[r]})},"setConf"),Ci={};function Jk(e){const t=dt().journey;let r=60;Object.keys(Ci).forEach(a=>{const i=Ci[a].color,n={cx:20,cy:r,r:7,fill:i,stroke:"#000",pos:Ci[a].position};jl.drawCircle(e,n);const s={x:40,y:r+7,fill:"#666",text:a,textMargin:t.boxTextMargin|5};jl.drawText(e,s),r+=20})}g(Jk,"drawActorLegend");var Uh=dt().journey,_n=Uh.leftMargin,MN=g(function(e,t,r,a){const i=dt().journey,n=dt().securityLevel;let s;n==="sandbox"&&(s=It("#i"+t));const o=n==="sandbox"?It(s.nodes()[0].contentDocument.body):It("body");_a.init();const l=o.select("#"+t);jl.initGraphics(l);const u=a.db.getTasks(),h=a.db.getDiagramTitle(),d=a.db.getActors();for(const x in Ci)delete Ci[x];let f=0;d.forEach(x=>{Ci[x]={color:i.actorColours[f%i.actorColours.length],position:f},f++}),Jk(l),_a.insert(0,0,_n,Object.keys(Ci).length*50),FN(l,u,0);const p=_a.getBounds();h&&l.append("text").text(h).attr("x",_n).attr("font-size","4ex").attr("font-weight","bold").attr("y",25);const y=p.stopy-p.starty+2*i.diagramMarginY,v=_n+p.stopx+2*i.diagramMarginX;da(l,y,v,i.useMaxWidth),l.append("line").attr("x1",_n).attr("y1",i.height*4).attr("x2",v-_n-4).attr("y2",i.height*4).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const m=h?70:0;l.attr("viewBox",`${p.startx} -25 ${v} ${y+m}`),l.attr("preserveAspectRatio","xMinYMin meet"),l.attr("height",y+m+25)},"draw"),_a={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:g(function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},"init"),updateVal:g(function(e,t,r,a){e[t]===void 0?e[t]=r:e[t]=a(r,e[t])},"updateVal"),updateBounds:g(function(e,t,r,a){const i=dt().journey,n=this;let s=0;function o(l){return g(function(h){s++;const d=n.sequenceItems.length-s+1;n.updateVal(h,"starty",t-d*i.boxMargin,Math.min),n.updateVal(h,"stopy",a+d*i.boxMargin,Math.max),n.updateVal(_a.data,"startx",e-d*i.boxMargin,Math.min),n.updateVal(_a.data,"stopx",r+d*i.boxMargin,Math.max),l!=="activation"&&(n.updateVal(h,"startx",e-d*i.boxMargin,Math.min),n.updateVal(h,"stopx",r+d*i.boxMargin,Math.max),n.updateVal(_a.data,"starty",t-d*i.boxMargin,Math.min),n.updateVal(_a.data,"stopy",a+d*i.boxMargin,Math.max))},"updateItemBounds")}g(o,"updateFn"),this.sequenceItems.forEach(o())},"updateBounds"),insert:g(function(e,t,r,a){const i=Math.min(e,r),n=Math.max(e,r),s=Math.min(t,a),o=Math.max(t,a);this.updateVal(_a.data,"startx",i,Math.min),this.updateVal(_a.data,"starty",s,Math.min),this.updateVal(_a.data,"stopx",n,Math.max),this.updateVal(_a.data,"stopy",o,Math.max),this.updateBounds(i,s,n,o)},"insert"),bumpVerticalPos:g(function(e){this.verticalPos=this.verticalPos+e,this.data.stopy=this.verticalPos},"bumpVerticalPos"),getVerticalPos:g(function(){return this.verticalPos},"getVerticalPos"),getBounds:g(function(){return this.data},"getBounds")},Md=Uh.sectionFills,av=Uh.sectionColours,FN=g(function(e,t,r){const a=dt().journey;let i="";const n=a.height*2+a.diagramMarginY,s=r+n;let o=0,l="#CCC",u="black",h=0;for(const[d,f]of t.entries()){if(i!==f.section){l=Md[o%Md.length],h=o%Md.length,u=av[o%av.length];let y=0;const v=f.section;for(let x=d;x<t.length&&t[x].section==v;x++)y=y+1;const m={x:d*a.taskMargin+d*a.width+_n,y:50,text:f.section,fill:l,num:h,colour:u,taskCount:y};jl.drawSection(e,m,a),i=f.section,o++}const p=f.people.reduce((y,v)=>(Ci[v]&&(y[v]=Ci[v]),y),{});f.x=d*a.taskMargin+d*a.width+_n,f.y=s,f.width=a.diagramMarginX,f.height=a.diagramMarginY,f.colour=u,f.fill=l,f.num=h,f.actors=p,jl.drawTask(e,f,a),_a.insert(f.x,f.y,f.x+f.width+a.taskMargin,300+5*30)}},"drawTasks"),iv={setConf:NN,draw:MN},ON={parser:mN,db:ev,renderer:iv,styles:AN,init:g(e=>{iv.setConf(e.journey),ev.clear()},"init")};const $N=Object.freeze({__proto__:null,diagram:ON});var pg=function(){var e=g(function(f,p,y,v){for(y=y||{},v=f.length;v--;y[f[v]]=p);return y},"o"),t=[6,8,10,11,12,14,16,17,20,21],r=[1,9],a=[1,10],i=[1,11],n=[1,12],s=[1,13],o=[1,16],l=[1,17],u={trace:g(function(){},"trace"),yy:{},symbols_:{error:2,start:3,timeline:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,period_statement:18,event_statement:19,period:20,event:21,$accept:0,$end:1},terminals_:{2:"error",4:"timeline",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",20:"period",21:"event"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[18,1],[19,1]],performAction:g(function(p,y,v,m,x,b,w){var C=b.length-1;switch(x){case 1:return b[C-1];case 2:this.$=[];break;case 3:b[C-1].push(b[C]),this.$=b[C-1];break;case 4:case 5:this.$=b[C];break;case 6:case 7:this.$=[];break;case 8:m.getCommonDb().setDiagramTitle(b[C].substr(6)),this.$=b[C].substr(6);break;case 9:this.$=b[C].trim(),m.getCommonDb().setAccTitle(this.$);break;case 10:case 11:this.$=b[C].trim(),m.getCommonDb().setAccDescription(this.$);break;case 12:m.addSection(b[C].substr(8)),this.$=b[C].substr(8);break;case 15:m.addTask(b[C],0,""),this.$=b[C];break;case 16:m.addEvent(b[C].substr(2)),this.$=b[C];break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},e(t,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:r,12:a,14:i,16:n,17:s,18:14,19:15,20:o,21:l},e(t,[2,7],{1:[2,1]}),e(t,[2,3]),{9:18,11:r,12:a,14:i,16:n,17:s,18:14,19:15,20:o,21:l},e(t,[2,5]),e(t,[2,6]),e(t,[2,8]),{13:[1,19]},{15:[1,20]},e(t,[2,11]),e(t,[2,12]),e(t,[2,13]),e(t,[2,14]),e(t,[2,15]),e(t,[2,16]),e(t,[2,4]),e(t,[2,9]),e(t,[2,10])],defaultActions:{},parseError:g(function(p,y){if(y.recoverable)this.trace(p);else{var v=new Error(p);throw v.hash=y,v}},"parseError"),parse:g(function(p){var y=this,v=[0],m=[],x=[null],b=[],w=this.table,C="",T=0,k=0,S=2,L=1,_=b.slice.call(arguments,1),A=Object.create(this.lexer),E={yy:{}};for(var D in this.yy)Object.prototype.hasOwnProperty.call(this.yy,D)&&(E.yy[D]=this.yy[D]);A.setInput(p,E.yy),E.yy.lexer=A,E.yy.parser=this,typeof A.yylloc>"u"&&(A.yylloc={});var R=A.yylloc;b.push(R);var O=A.options&&A.options.ranges;typeof E.yy.parseError=="function"?this.parseError=E.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function P(ct){v.length=v.length-2*ct,x.length=x.length-ct,b.length=b.length-ct}g(P,"popStack");function $(){var ct;return ct=m.pop()||A.lex()||L,typeof ct!="number"&&(ct instanceof Array&&(m=ct,ct=m.pop()),ct=y.symbols_[ct]||ct),ct}g($,"lex");for(var M,I,F,V,N={},q,U,X,lt;;){if(I=v[v.length-1],this.defaultActions[I]?F=this.defaultActions[I]:((M===null||typeof M>"u")&&(M=$()),F=w[I]&&w[I][M]),typeof F>"u"||!F.length||!F[0]){var J="";lt=[];for(q in w[I])this.terminals_[q]&&q>S&&lt.push("'"+this.terminals_[q]+"'");A.showPosition?J="Parse error on line "+(T+1)+`:
`+A.showPosition()+`
Expecting `+lt.join(", ")+", got '"+(this.terminals_[M]||M)+"'":J="Parse error on line "+(T+1)+": Unexpected "+(M==L?"end of input":"'"+(this.terminals_[M]||M)+"'"),this.parseError(J,{text:A.match,token:this.terminals_[M]||M,line:A.yylineno,loc:R,expected:lt})}if(F[0]instanceof Array&&F.length>1)throw new Error("Parse Error: multiple actions possible at state: "+I+", token: "+M);switch(F[0]){case 1:v.push(M),x.push(A.yytext),b.push(A.yylloc),v.push(F[1]),M=null,k=A.yyleng,C=A.yytext,T=A.yylineno,R=A.yylloc;break;case 2:if(U=this.productions_[F[1]][1],N.$=x[x.length-U],N._$={first_line:b[b.length-(U||1)].first_line,last_line:b[b.length-1].last_line,first_column:b[b.length-(U||1)].first_column,last_column:b[b.length-1].last_column},O&&(N._$.range=[b[b.length-(U||1)].range[0],b[b.length-1].range[1]]),V=this.performAction.apply(N,[C,k,T,E.yy,F[1],x,b].concat(_)),typeof V<"u")return V;U&&(v=v.slice(0,-1*U*2),x=x.slice(0,-1*U),b=b.slice(0,-1*U)),v.push(this.productions_[F[1]][0]),x.push(N.$),b.push(N._$),X=w[v[v.length-2]][v[v.length-1]],v.push(X);break;case 3:return!0}}return!0},"parse")},h=function(){var f={EOF:1,parseError:g(function(y,v){if(this.yy.parser)this.yy.parser.parseError(y,v);else throw new Error(y)},"parseError"),setInput:g(function(p,y){return this.yy=y||this.yy||{},this._input=p,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:g(function(){var p=this._input[0];this.yytext+=p,this.yyleng++,this.offset++,this.match+=p,this.matched+=p;var y=p.match(/(?:\r\n?|\n).*/g);return y?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),p},"input"),unput:g(function(p){var y=p.length,v=p.split(/(?:\r\n?|\n)/g);this._input=p+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-y),this.offset-=y;var m=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),v.length-1&&(this.yylineno-=v.length-1);var x=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:v?(v.length===m.length?this.yylloc.first_column:0)+m[m.length-v.length].length-v[0].length:this.yylloc.first_column-y},this.options.ranges&&(this.yylloc.range=[x[0],x[0]+this.yyleng-y]),this.yyleng=this.yytext.length,this},"unput"),more:g(function(){return this._more=!0,this},"more"),reject:g(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:g(function(p){this.unput(this.match.slice(p))},"less"),pastInput:g(function(){var p=this.matched.substr(0,this.matched.length-this.match.length);return(p.length>20?"...":"")+p.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:g(function(){var p=this.match;return p.length<20&&(p+=this._input.substr(0,20-p.length)),(p.substr(0,20)+(p.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:g(function(){var p=this.pastInput(),y=new Array(p.length+1).join("-");return p+this.upcomingInput()+`
`+y+"^"},"showPosition"),test_match:g(function(p,y){var v,m,x;if(this.options.backtrack_lexer&&(x={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(x.yylloc.range=this.yylloc.range.slice(0))),m=p[0].match(/(?:\r\n?|\n).*/g),m&&(this.yylineno+=m.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:m?m[m.length-1].length-m[m.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+p[0].length},this.yytext+=p[0],this.match+=p[0],this.matches=p,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(p[0].length),this.matched+=p[0],v=this.performAction.call(this,this.yy,this,y,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),v)return v;if(this._backtrack){for(var b in x)this[b]=x[b];return!1}return!1},"test_match"),next:g(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var p,y,v,m;this._more||(this.yytext="",this.match="");for(var x=this._currentRules(),b=0;b<x.length;b++)if(v=this._input.match(this.rules[x[b]]),v&&(!y||v[0].length>y[0].length)){if(y=v,m=b,this.options.backtrack_lexer){if(p=this.test_match(v,x[b]),p!==!1)return p;if(this._backtrack){y=!1;continue}else return!1}else if(!this.options.flex)break}return y?(p=this.test_match(y,x[m]),p!==!1?p:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:g(function(){var y=this.next();return y||this.lex()},"lex"),begin:g(function(y){this.conditionStack.push(y)},"begin"),popState:g(function(){var y=this.conditionStack.length-1;return y>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:g(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:g(function(y){return y=this.conditionStack.length-1-Math.abs(y||0),y>=0?this.conditionStack[y]:"INITIAL"},"topState"),pushState:g(function(y){this.begin(y)},"pushState"),stateStackSize:g(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:g(function(y,v,m,x){switch(m){case 0:break;case 1:break;case 2:return 10;case 3:break;case 4:break;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 21;case 16:return 20;case 17:return 6;case 18:return"INVALID"}},"anonymous"),rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:timeline\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^:\n]+)/i,/^(?::\s[^:\n]+)/i,/^(?:[^#:\n]+)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18],inclusive:!0}}};return f}();u.lexer=h;function d(){this.yy={}}return g(d,"Parser"),d.prototype=u,u.Parser=d,new d}();pg.parser=pg;var VN=pg,tT={};_h(tT,{addEvent:()=>lT,addSection:()=>iT,addTask:()=>oT,addTaskOrg:()=>cT,clear:()=>aT,default:()=>zN,getCommonDb:()=>rT,getSections:()=>nT,getTasks:()=>sT});var Po="",eT=0,n1=[],sh=[],No=[],rT=g(()=>jg,"getCommonDb"),aT=g(function(){n1.length=0,sh.length=0,Po="",No.length=0,xr()},"clear"),iT=g(function(e){Po=e,n1.push(e)},"addSection"),nT=g(function(){return n1},"getSections"),sT=g(function(){let e=nv();const t=100;let r=0;for(;!e&&r<t;)e=nv(),r++;return sh.push(...No),sh},"getTasks"),oT=g(function(e,t,r){const a={id:eT++,section:Po,type:Po,task:e,score:t||0,events:r?[r]:[]};No.push(a)},"addTask"),lT=g(function(e){No.find(r=>r.id===eT-1).events.push(e)},"addEvent"),cT=g(function(e){const t={section:Po,type:Po,description:e,task:e,classes:[]};sh.push(t)},"addTaskOrg"),nv=g(function(){const e=g(function(r){return No[r].processed},"compileTask");let t=!0;for(const[r,a]of No.entries())e(r),t=t&&a.processed;return t},"compileTasks"),zN={clear:aT,getCommonDb:rT,addSection:iT,getSections:nT,getTasks:sT,addTask:oT,addTaskOrg:cT,addEvent:lT},qN=12,Xh=g(function(e,t){const r=e.append("rect");return r.attr("x",t.x),r.attr("y",t.y),r.attr("fill",t.fill),r.attr("stroke",t.stroke),r.attr("width",t.width),r.attr("height",t.height),r.attr("rx",t.rx),r.attr("ry",t.ry),t.class!==void 0&&r.attr("class",t.class),r},"drawRect"),WN=g(function(e,t){const a=e.append("circle").attr("cx",t.cx).attr("cy",t.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),i=e.append("g");i.append("circle").attr("cx",t.cx-15/3).attr("cy",t.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),i.append("circle").attr("cx",t.cx+15/3).attr("cy",t.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function n(l){const u=So().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",u).attr("transform","translate("+t.cx+","+(t.cy+2)+")")}g(n,"smile");function s(l){const u=So().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",u).attr("transform","translate("+t.cx+","+(t.cy+7)+")")}g(s,"sad");function o(l){l.append("line").attr("class","mouth").attr("stroke",2).attr("x1",t.cx-5).attr("y1",t.cy+7).attr("x2",t.cx+5).attr("y2",t.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return g(o,"ambivalent"),t.score>3?n(i):t.score<3?s(i):o(i),a},"drawFace"),GN=g(function(e,t){const r=e.append("circle");return r.attr("cx",t.cx),r.attr("cy",t.cy),r.attr("class","actor-"+t.pos),r.attr("fill",t.fill),r.attr("stroke",t.stroke),r.attr("r",t.r),r.class!==void 0&&r.attr("class",r.class),t.title!==void 0&&r.append("title").text(t.title),r},"drawCircle"),uT=g(function(e,t){const r=t.text.replace(/<br\s*\/?>/gi," "),a=e.append("text");a.attr("x",t.x),a.attr("y",t.y),a.attr("class","legend"),a.style("text-anchor",t.anchor),t.class!==void 0&&a.attr("class",t.class);const i=a.append("tspan");return i.attr("x",t.x+t.textMargin*2),i.text(r),a},"drawText"),HN=g(function(e,t){function r(i,n,s,o,l){return i+","+n+" "+(i+s)+","+n+" "+(i+s)+","+(n+o-l)+" "+(i+s-l*1.2)+","+(n+o)+" "+i+","+(n+o)}g(r,"genPoints");const a=e.append("polygon");a.attr("points",r(t.x,t.y,50,20,7)),a.attr("class","labelBox"),t.y=t.y+t.labelMargin,t.x=t.x+.5*t.labelMargin,uT(e,t)},"drawLabel"),YN=g(function(e,t,r){const a=e.append("g"),i=s1();i.x=t.x,i.y=t.y,i.fill=t.fill,i.width=r.width,i.height=r.height,i.class="journey-section section-type-"+t.num,i.rx=3,i.ry=3,Xh(a,i),hT(r)(t.text,a,i.x,i.y,i.width,i.height,{class:"journey-section section-type-"+t.num},r,t.colour)},"drawSection"),sv=-1,UN=g(function(e,t,r){const a=t.x+r.width/2,i=e.append("g");sv++;const n=300+5*30;i.append("line").attr("id","task"+sv).attr("x1",a).attr("y1",t.y).attr("x2",a).attr("y2",n).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),WN(i,{cx:a,cy:300+(5-t.score)*30,score:t.score});const s=s1();s.x=t.x,s.y=t.y,s.fill=t.fill,s.width=r.width,s.height=r.height,s.class="task task-type-"+t.num,s.rx=3,s.ry=3,Xh(i,s),hT(r)(t.task,i,s.x,s.y,s.width,s.height,{class:"task"},r,t.colour)},"drawTask"),XN=g(function(e,t){Xh(e,{x:t.startx,y:t.starty,width:t.stopx-t.startx,height:t.stopy-t.starty,fill:t.fill,class:"rect"}).lower()},"drawBackgroundRect"),KN=g(function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},"getTextObj"),s1=g(function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},"getNoteRect"),hT=function(){function e(i,n,s,o,l,u,h,d){const f=n.append("text").attr("x",s+l/2).attr("y",o+u/2+5).style("font-color",d).style("text-anchor","middle").text(i);a(f,h)}g(e,"byText");function t(i,n,s,o,l,u,h,d,f){const{taskFontSize:p,taskFontFamily:y}=d,v=i.split(/<br\s*\/?>/gi);for(let m=0;m<v.length;m++){const x=m*p-p*(v.length-1)/2,b=n.append("text").attr("x",s+l/2).attr("y",o).attr("fill",f).style("text-anchor","middle").style("font-size",p).style("font-family",y);b.append("tspan").attr("x",s+l/2).attr("dy",x).text(v[m]),b.attr("y",o+u/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),a(b,h)}}g(t,"byTspan");function r(i,n,s,o,l,u,h,d){const f=n.append("switch"),y=f.append("foreignObject").attr("x",s).attr("y",o).attr("width",l).attr("height",u).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),t(i,f,s,o,l,u,h,d),a(y,h)}g(r,"byFo");function a(i,n){for(const s in n)s in n&&i.attr(s,n[s])}return g(a,"_setTextAttrs"),function(i){return i.textPlacement==="fo"?r:i.textPlacement==="old"?e:t}}(),jN=g(function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},"initGraphics");function o1(e,t){e.each(function(){var r=It(this),a=r.text().split(/(\s+|<br>)/).reverse(),i,n=[],s=1.1,o=r.attr("y"),l=parseFloat(r.attr("dy")),u=r.text(null).append("tspan").attr("x",0).attr("y",o).attr("dy",l+"em");for(let h=0;h<a.length;h++)i=a[a.length-1-h],n.push(i),u.text(n.join(" ").trim()),(u.node().getComputedTextLength()>t||i==="<br>")&&(n.pop(),u.text(n.join(" ").trim()),i==="<br>"?n=[""]:n=[i],u=r.append("tspan").attr("x",0).attr("y",o).attr("dy",s+"em").text(i))})}g(o1,"wrap");var QN=g(function(e,t,r,a){var d;const i=r%qN-1,n=e.append("g");t.section=i,n.attr("class",(t.class?t.class+" ":"")+"timeline-node "+("section-"+i));const s=n.append("g"),o=n.append("g"),u=o.append("text").text(t.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(o1,t.width).node().getBBox(),h=(d=a.fontSize)!=null&&d.replace?a.fontSize.replace("px",""):a.fontSize;return t.height=u.height+h*1.1*.5+t.padding,t.height=Math.max(t.height,t.maxHeight),t.width=t.width+2*t.padding,o.attr("transform","translate("+t.width/2+", "+t.padding/2+")"),JN(s,t,i,a),t},"drawNode"),ZN=g(function(e,t,r){var o;const a=e.append("g"),n=a.append("text").text(t.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(o1,t.width).node().getBBox(),s=(o=r.fontSize)!=null&&o.replace?r.fontSize.replace("px",""):r.fontSize;return a.remove(),n.height+s*1.1*.5+t.padding},"getVirtualNodeHeight"),JN=g(function(e,t,r){e.append("path").attr("id","node-"+t.id).attr("class","node-bkg node-"+t.type).attr("d",`M0 ${t.height-5} v${-t.height+2*5} q0,-5 5,-5 h${t.width-2*5} q5,0 5,5 v${t.height-5} H0 Z`),e.append("line").attr("class","node-line-"+r).attr("x1",0).attr("y1",t.height).attr("x2",t.width).attr("y2",t.height)},"defaultBkg"),An={drawRect:Xh,drawCircle:GN,drawSection:YN,drawText:uT,drawLabel:HN,drawTask:UN,drawBackgroundRect:XN,getTextObj:KN,getNoteRect:s1,initGraphics:jN,drawNode:QN,getVirtualNodeHeight:ZN},tM=g(function(e,t,r,a){var _,A;const i=dt(),n=i.leftMargin??50;G.debug("timeline",a.db);const s=i.securityLevel;let o;s==="sandbox"&&(o=It("#i"+t));const u=(s==="sandbox"?It(o.nodes()[0].contentDocument.body):It("body")).select("#"+t);u.append("g");const h=a.db.getTasks(),d=a.db.getCommonDb().getDiagramTitle();G.debug("task",h),An.initGraphics(u);const f=a.db.getSections();G.debug("sections",f);let p=0,y=0,v=0,m=0,x=50+n,b=50;m=50;let w=0,C=!0;f.forEach(function(E){const D={number:w,descr:E,section:w,width:150,padding:20,maxHeight:p},R=An.getVirtualNodeHeight(u,D,i);G.debug("sectionHeight before draw",R),p=Math.max(p,R+20)});let T=0,k=0;G.debug("tasks.length",h.length);for(const[E,D]of h.entries()){const R={number:E,descr:D,section:D.section,width:150,padding:20,maxHeight:y},O=An.getVirtualNodeHeight(u,R,i);G.debug("taskHeight before draw",O),y=Math.max(y,O+20),T=Math.max(T,D.events.length);let P=0;for(const $ of D.events){const M={descr:$,section:D.section,number:D.section,width:150,padding:20,maxHeight:50};P+=An.getVirtualNodeHeight(u,M,i)}k=Math.max(k,P)}G.debug("maxSectionHeight before draw",p),G.debug("maxTaskHeight before draw",y),f&&f.length>0?f.forEach(E=>{const D=h.filter($=>$.section===E),R={number:w,descr:E,section:w,width:200*Math.max(D.length,1)-50,padding:20,maxHeight:p};G.debug("sectionNode",R);const O=u.append("g"),P=An.drawNode(O,R,w,i);G.debug("sectionNode output",P),O.attr("transform",`translate(${x}, ${m})`),b+=p+50,D.length>0&&ov(u,D,w,x,b,y,i,T,k,p,!1),x+=200*Math.max(D.length,1),b=m,w++}):(C=!1,ov(u,h,w,x,b,y,i,T,k,p,!0));const S=u.node().getBBox();G.debug("bounds",S),d&&u.append("text").text(d).attr("x",S.width/2-n).attr("font-size","4ex").attr("font-weight","bold").attr("y",20),v=C?p+y+150:y+100,u.append("g").attr("class","lineWrapper").append("line").attr("x1",n).attr("y1",v).attr("x2",S.width+3*n).attr("y2",v).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)"),Ho(void 0,u,((_=i.timeline)==null?void 0:_.padding)??50,((A=i.timeline)==null?void 0:A.useMaxWidth)??!1)},"draw"),ov=g(function(e,t,r,a,i,n,s,o,l,u,h){var d;for(const f of t){const p={descr:f.task,section:r,number:r,width:150,padding:20,maxHeight:n};G.debug("taskNode",p);const y=e.append("g").attr("class","taskWrapper"),m=An.drawNode(y,p,r,s).height;if(G.debug("taskHeight after draw",m),y.attr("transform",`translate(${a}, ${i})`),n=Math.max(n,m),f.events){const x=e.append("g").attr("class","lineWrapper");let b=n;i+=100,b=b+eM(e,f.events,r,a,i,s),i-=100,x.append("line").attr("x1",a+190/2).attr("y1",i+n).attr("x2",a+190/2).attr("y2",i+n+(h?n:u)+l+120).attr("stroke-width",2).attr("stroke","black").attr("marker-end","url(#arrowhead)").attr("stroke-dasharray","5,5")}a=a+200,h&&!((d=s.timeline)!=null&&d.disableMulticolor)&&r++}i=i-10},"drawTasks"),eM=g(function(e,t,r,a,i,n){let s=0;const o=i;i=i+100;for(const l of t){const u={descr:l,section:r,number:r,width:150,padding:20,maxHeight:50};G.debug("eventNode",u);const h=e.append("g").attr("class","eventWrapper"),f=An.drawNode(h,u,r,n).height;s=s+f,h.attr("transform",`translate(${a}, ${i})`),i=i+10+f}return i=o,s},"drawEvents"),rM={setConf:g(()=>{},"setConf"),draw:tM},aM=g(e=>{let t="";for(let r=0;r<e.THEME_COLOR_LIMIT;r++)e["lineColor"+r]=e["lineColor"+r]||e["cScaleInv"+r],on(e["lineColor"+r])?e["lineColor"+r]=Xt(e["lineColor"+r],20):e["lineColor"+r]=ne(e["lineColor"+r],20);for(let r=0;r<e.THEME_COLOR_LIMIT;r++){const a=""+(17-3*r);t+=`
    .section-${r-1} rect, .section-${r-1} path, .section-${r-1} circle, .section-${r-1} path  {
      fill: ${e["cScale"+r]};
    }
    .section-${r-1} text {
     fill: ${e["cScaleLabel"+r]};
    }
    .node-icon-${r-1} {
      font-size: 40px;
      color: ${e["cScaleLabel"+r]};
    }
    .section-edge-${r-1}{
      stroke: ${e["cScale"+r]};
    }
    .edge-depth-${r-1}{
      stroke-width: ${a};
    }
    .section-${r-1} line {
      stroke: ${e["cScaleInv"+r]} ;
      stroke-width: 3;
    }

    .lineWrapper line{
      stroke: ${e["cScaleLabel"+r]} ;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return t},"genSections"),iM=g(e=>`
  .edge {
    stroke-width: 3;
  }
  ${aM(e)}
  .section-root rect, .section-root path, .section-root circle  {
    fill: ${e.git0};
  }
  .section-root text {
    fill: ${e.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .eventWrapper  {
   filter: brightness(120%);
  }
`,"getStyles"),nM=iM,sM={db:tT,renderer:rM,parser:VN,styles:nM};const oM=Object.freeze({__proto__:null,diagram:sM});function gg(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function lM(e){if(Array.isArray(e))return e}function cM(e){if(Array.isArray(e))return gg(e)}function un(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uM(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,fT(a.key),a)}}function hn(e,t,r){return t&&uM(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ca(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=l1(e))||t){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var l=r.next();return s=l.done,l},e:function(l){o=!0,n=l},f:function(){try{s||r.return==null||r.return()}finally{if(o)throw n}}}}function dT(e,t,r){return(t=fT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hM(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dM(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,i,n,s,o=[],l=!0,u=!1;try{if(n=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(a=n.call(r)).done)&&(o.push(a.value),o.length!==t);l=!0);}catch(h){u=!0,i=h}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function fM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pM(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ur(e,t){return lM(e)||dM(e,t)||l1(e,t)||fM()}function oh(e){return cM(e)||hM(e)||l1(e)||pM()}function gM(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function fT(e){var t=gM(e,"string");return typeof t=="symbol"?t:t+""}function mr(e){"@babel/helpers - typeof";return mr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mr(e)}function l1(e,t){if(e){if(typeof e=="string")return gg(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gg(e,t):void 0}}var cr=typeof window>"u"?null:window,lv=cr?cr.navigator:null;cr&&cr.document;var yM=mr(""),pT=mr({}),vM=mr(function(){}),mM=typeof HTMLElement>"u"?"undefined":mr(HTMLElement),bc=function(t){return t&&t.instanceString&&Ze(t.instanceString)?t.instanceString():null},ce=function(t){return t!=null&&mr(t)==yM},Ze=function(t){return t!=null&&mr(t)===vM},Ge=function(t){return!ma(t)&&(Array.isArray?Array.isArray(t):t!=null&&t instanceof Array)},De=function(t){return t!=null&&mr(t)===pT&&!Ge(t)&&t.constructor===Object},xM=function(t){return t!=null&&mr(t)===pT},Vt=function(t){return t!=null&&mr(t)===mr(1)&&!isNaN(t)},bM=function(t){return Vt(t)&&Math.floor(t)===t},lh=function(t){if(mM!=="undefined")return t!=null&&t instanceof HTMLElement},ma=function(t){return wc(t)||gT(t)},wc=function(t){return bc(t)==="collection"&&t._private.single},gT=function(t){return bc(t)==="collection"&&!t._private.single},c1=function(t){return bc(t)==="core"},yT=function(t){return bc(t)==="stylesheet"},wM=function(t){return bc(t)==="event"},Ji=function(t){return t==null?!0:!!(t===""||t.match(/^\s+$/))},kM=function(t){return typeof HTMLElement>"u"?!1:t instanceof HTMLElement},TM=function(t){return De(t)&&Vt(t.x1)&&Vt(t.x2)&&Vt(t.y1)&&Vt(t.y2)},CM=function(t){return xM(t)&&Ze(t.then)},SM=function(){return lv&&lv.userAgent.match(/msie|trident|edge/i)},Mo=function(t,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var n=[],s=0;s<arguments.length;s++)n.push(arguments[s]);return n.join("$")});var a=function(){var n=this,s=arguments,o,l=r.apply(n,s),u=a.cache;return(o=u[l])||(o=u[l]=t.apply(n,s)),o};return a.cache={},a},u1=Mo(function(e){return e.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}),Kh=Mo(function(e){return e.replace(/(-\w)/g,function(t){return t[1].toUpperCase()})}),vT=Mo(function(e,t){return e+t[0].toUpperCase()+t.substring(1)},function(e,t){return e+"$"+t}),cv=function(t){return Ji(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},gr="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",EM="rgb[a]?\\(("+gr+"[%]?)\\s*,\\s*("+gr+"[%]?)\\s*,\\s*("+gr+"[%]?)(?:\\s*,\\s*("+gr+"))?\\)",_M="rgb[a]?\\((?:"+gr+"[%]?)\\s*,\\s*(?:"+gr+"[%]?)\\s*,\\s*(?:"+gr+"[%]?)(?:\\s*,\\s*(?:"+gr+"))?\\)",AM="hsl[a]?\\(("+gr+")\\s*,\\s*("+gr+"[%])\\s*,\\s*("+gr+"[%])(?:\\s*,\\s*("+gr+"))?\\)",LM="hsl[a]?\\((?:"+gr+")\\s*,\\s*(?:"+gr+"[%])\\s*,\\s*(?:"+gr+"[%])(?:\\s*,\\s*(?:"+gr+"))?\\)",DM="\\#[0-9a-fA-F]{3}",BM="\\#[0-9a-fA-F]{6}",mT=function(t,r){return t<r?-1:t>r?1:0},RM=function(t,r){return-1*mT(t,r)},pe=Object.assign!=null?Object.assign.bind(Object):function(e){for(var t=arguments,r=1;r<t.length;r++){var a=t[r];if(a!=null)for(var i=Object.keys(a),n=0;n<i.length;n++){var s=i[n];e[s]=a[s]}}return e},IM=function(t){if(!(!(t.length===4||t.length===7)||t[0]!=="#")){var r=t.length===4,a,i,n,s=16;return r?(a=parseInt(t[1]+t[1],s),i=parseInt(t[2]+t[2],s),n=parseInt(t[3]+t[3],s)):(a=parseInt(t[1]+t[2],s),i=parseInt(t[3]+t[4],s),n=parseInt(t[5]+t[6],s)),[a,i,n]}},PM=function(t){var r,a,i,n,s,o,l,u;function h(y,v,m){return m<0&&(m+=1),m>1&&(m-=1),m<1/6?y+(v-y)*6*m:m<1/2?v:m<2/3?y+(v-y)*(2/3-m)*6:y}var d=new RegExp("^"+AM+"$").exec(t);if(d){if(a=parseInt(d[1]),a<0?a=(360- -1*a%360)%360:a>360&&(a=a%360),a/=360,i=parseFloat(d[2]),i<0||i>100||(i=i/100,n=parseFloat(d[3]),n<0||n>100)||(n=n/100,s=d[4],s!==void 0&&(s=parseFloat(s),s<0||s>1)))return;if(i===0)o=l=u=Math.round(n*255);else{var f=n<.5?n*(1+i):n+i-n*i,p=2*n-f;o=Math.round(255*h(p,f,a+1/3)),l=Math.round(255*h(p,f,a)),u=Math.round(255*h(p,f,a-1/3))}r=[o,l,u,s]}return r},NM=function(t){var r,a=new RegExp("^"+EM+"$").exec(t);if(a){r=[];for(var i=[],n=1;n<=3;n++){var s=a[n];if(s[s.length-1]==="%"&&(i[n]=!0),s=parseFloat(s),i[n]&&(s=s/100*255),s<0||s>255)return;r.push(Math.floor(s))}var o=i[1]||i[2]||i[3],l=i[1]&&i[2]&&i[3];if(o&&!l)return;var u=a[4];if(u!==void 0){if(u=parseFloat(u),u<0||u>1)return;r.push(u)}}return r},MM=function(t){return FM[t.toLowerCase()]},xT=function(t){return(Ge(t)?t:null)||MM(t)||IM(t)||NM(t)||PM(t)},FM={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},bT=function(t){for(var r=t.map,a=t.keys,i=a.length,n=0;n<i;n++){var s=a[n];if(De(s))throw Error("Tried to set map with object key");n<a.length-1?(r[s]==null&&(r[s]={}),r=r[s]):r[s]=t.value}},wT=function(t){for(var r=t.map,a=t.keys,i=a.length,n=0;n<i;n++){var s=a[n];if(De(s))throw Error("Tried to get map with object key");if(r=r[s],r==null)return r}return r},Wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function kc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fd,uv;function Tc(){if(uv)return Fd;uv=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return Fd=e,Fd}var Od,hv;function OM(){if(hv)return Od;hv=1;var e=typeof Wc=="object"&&Wc&&Wc.Object===Object&&Wc;return Od=e,Od}var $d,dv;function jh(){if(dv)return $d;dv=1;var e=OM(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return $d=r,$d}var Vd,fv;function $M(){if(fv)return Vd;fv=1;var e=jh(),t=function(){return e.Date.now()};return Vd=t,Vd}var zd,pv;function VM(){if(pv)return zd;pv=1;var e=/\s/;function t(r){for(var a=r.length;a--&&e.test(r.charAt(a)););return a}return zd=t,zd}var qd,gv;function zM(){if(gv)return qd;gv=1;var e=VM(),t=/^\s+/;function r(a){return a&&a.slice(0,e(a)+1).replace(t,"")}return qd=r,qd}var Wd,yv;function h1(){if(yv)return Wd;yv=1;var e=jh(),t=e.Symbol;return Wd=t,Wd}var Gd,vv;function qM(){if(vv)return Gd;vv=1;var e=h1(),t=Object.prototype,r=t.hasOwnProperty,a=t.toString,i=e?e.toStringTag:void 0;function n(s){var o=r.call(s,i),l=s[i];try{s[i]=void 0;var u=!0}catch{}var h=a.call(s);return u&&(o?s[i]=l:delete s[i]),h}return Gd=n,Gd}var Hd,mv;function WM(){if(mv)return Hd;mv=1;var e=Object.prototype,t=e.toString;function r(a){return t.call(a)}return Hd=r,Hd}var Yd,xv;function kT(){if(xv)return Yd;xv=1;var e=h1(),t=qM(),r=WM(),a="[object Null]",i="[object Undefined]",n=e?e.toStringTag:void 0;function s(o){return o==null?o===void 0?i:a:n&&n in Object(o)?t(o):r(o)}return Yd=s,Yd}var Ud,bv;function GM(){if(bv)return Ud;bv=1;function e(t){return t!=null&&typeof t=="object"}return Ud=e,Ud}var Xd,wv;function Cc(){if(wv)return Xd;wv=1;var e=kT(),t=GM(),r="[object Symbol]";function a(i){return typeof i=="symbol"||t(i)&&e(i)==r}return Xd=a,Xd}var Kd,kv;function HM(){if(kv)return Kd;kv=1;var e=zM(),t=Tc(),r=Cc(),a=NaN,i=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function l(u){if(typeof u=="number")return u;if(r(u))return a;if(t(u)){var h=typeof u.valueOf=="function"?u.valueOf():u;u=t(h)?h+"":h}if(typeof u!="string")return u===0?u:+u;u=e(u);var d=n.test(u);return d||s.test(u)?o(u.slice(2),d?2:8):i.test(u)?a:+u}return Kd=l,Kd}var jd,Tv;function YM(){if(Tv)return jd;Tv=1;var e=Tc(),t=$M(),r=HM(),a="Expected a function",i=Math.max,n=Math.min;function s(o,l,u){var h,d,f,p,y,v,m=0,x=!1,b=!1,w=!0;if(typeof o!="function")throw new TypeError(a);l=r(l)||0,e(u)&&(x=!!u.leading,b="maxWait"in u,f=b?i(r(u.maxWait)||0,l):f,w="trailing"in u?!!u.trailing:w);function C(R){var O=h,P=d;return h=d=void 0,m=R,p=o.apply(P,O),p}function T(R){return m=R,y=setTimeout(L,l),x?C(R):p}function k(R){var O=R-v,P=R-m,$=l-O;return b?n($,f-P):$}function S(R){var O=R-v,P=R-m;return v===void 0||O>=l||O<0||b&&P>=f}function L(){var R=t();if(S(R))return _(R);y=setTimeout(L,k(R))}function _(R){return y=void 0,w&&h?C(R):(h=d=void 0,p)}function A(){y!==void 0&&clearTimeout(y),m=0,h=v=d=y=void 0}function E(){return y===void 0?p:_(t())}function D(){var R=t(),O=S(R);if(h=arguments,d=this,v=R,O){if(y===void 0)return T(v);if(b)return clearTimeout(y),y=setTimeout(L,l),C(v)}return y===void 0&&(y=setTimeout(L,l)),p}return D.cancel=A,D.flush=E,D}return jd=s,jd}var UM=YM(),Sc=kc(UM),Qd=cr?cr.performance:null,TT=Qd&&Qd.now?function(){return Qd.now()}:function(){return Date.now()},XM=function(){if(cr){if(cr.requestAnimationFrame)return function(e){cr.requestAnimationFrame(e)};if(cr.mozRequestAnimationFrame)return function(e){cr.mozRequestAnimationFrame(e)};if(cr.webkitRequestAnimationFrame)return function(e){cr.webkitRequestAnimationFrame(e)};if(cr.msRequestAnimationFrame)return function(e){cr.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout(function(){e(TT())},1e3/60)}}(),ch=function(t){return XM(t)},Li=TT,Ln=9261,CT=65599,vs=5381,ST=function(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ln,a=r,i;i=t.next(),!i.done;)a=a*CT+i.value|0;return a},Ql=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ln;return r*CT+t|0},Zl=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vs;return(r<<5)+r+t|0},KM=function(t,r){return t*2097152+r},Oi=function(t){return t[0]*2097152+t[1]},Gc=function(t,r){return[Ql(t[0],r[0]),Zl(t[1],r[1])]},Cv=function(t,r){var a={value:0,done:!1},i=0,n=t.length,s={next:function(){return i<n?a.value=t[i++]:a.done=!0,a}};return ST(s,r)},Gn=function(t,r){var a={value:0,done:!1},i=0,n=t.length,s={next:function(){return i<n?a.value=t.charCodeAt(i++):a.done=!0,a}};return ST(s,r)},ET=function(){return jM(arguments)},jM=function(t){for(var r,a=0;a<t.length;a++){var i=t[a];a===0?r=Gn(i):r=Gn(i,r)}return r},Sv=!0,QM=console.warn!=null,ZM=console.trace!=null,d1=Number.MAX_SAFE_INTEGER||9007199254740991,_T=function(){return!0},uh=function(){return!1},Ev=function(){return 0},f1=function(){},Qe=function(t){throw new Error(t)},AT=function(t){if(t!==void 0)Sv=!!t;else return Sv},Pe=function(t){AT()&&(QM?console.warn(t):(console.log(t),ZM&&console.trace()))},JM=function(t){return pe({},t)},ni=function(t){return t==null?t:Ge(t)?t.slice():De(t)?JM(t):t},tF=function(t){return t.slice()},LT=function(t,r){for(r=t="";t++<36;r+=t*51&52?(t^15?8^Math.random()*(t^20?16:4):4).toString(16):"-");return r},eF={},DT=function(){return eF},Fr=function(t){var r=Object.keys(t);return function(a){for(var i={},n=0;n<r.length;n++){var s=r[n],o=a==null?void 0:a[s];i[s]=o===void 0?t[s]:o}return i}},tn=function(t,r,a){for(var i=t.length-1;i>=0;i--)t[i]===r&&t.splice(i,1)},p1=function(t){t.splice(0,t.length)},rF=function(t,r){for(var a=0;a<r.length;a++){var i=r[a];t.push(i)}},na=function(t,r,a){return a&&(r=vT(a,r)),t[r]},ki=function(t,r,a,i){a&&(r=vT(a,r)),t[r]=i},aF=function(){function e(){un(this,e),this._obj={}}return hn(e,[{key:"set",value:function(r,a){return this._obj[r]=a,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}])}(),Si=typeof Map<"u"?Map:aF,iF="undefined",nF=function(){function e(t){if(un(this,e),this._obj=Object.create(null),this.size=0,t!=null){var r;t.instanceString!=null&&t.instanceString()===this.instanceString()?r=t.toArray():r=t;for(var a=0;a<r.length;a++)this.add(r[a])}}return hn(e,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var a=this._obj;a[r]!==1&&(a[r]=1,this.size++)}},{key:"delete",value:function(r){var a=this._obj;a[r]===1&&(a[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(a){return r.has(a)})}},{key:"forEach",value:function(r,a){return this.toArray().forEach(r,a)}}])}(),jo=(typeof Set>"u"?"undefined":mr(Set))!==iF?Set:nF,Qh=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(t===void 0||r===void 0||!c1(t)){Qe("An element must have a core reference and parameters set");return}var i=r.group;if(i==null&&(r.data&&r.data.source!=null&&r.data.target!=null?i="edges":i="nodes"),i!=="nodes"&&i!=="edges"){Qe("An element must be of type `nodes` or `edges`; you specified `"+i+"`");return}this.length=1,this[0]=this;var n=this._private={cy:t,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?i==="edges":!!r.pannable,active:!1,classes:new jo,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(n.position.x==null&&(n.position.x=0),n.position.y==null&&(n.position.y=0),r.renderedPosition){var s=r.renderedPosition,o=t.pan(),l=t.zoom();n.position={x:(s.x-o.x)/l,y:(s.y-o.y)/l}}var u=[];Ge(r.classes)?u=r.classes:ce(r.classes)&&(u=r.classes.split(/\s+/));for(var h=0,d=u.length;h<d;h++){var f=u[h];!f||f===""||n.classes.add(f)}this.createEmitter(),(a===void 0||a)&&this.restore();var p=r.style||r.css;p&&(Pe("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(p))},_v=function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},function(a,i,n){var s;De(a)&&!ma(a)&&(s=a,a=s.roots||s.root,i=s.visit,n=s.directed),n=arguments.length===2&&!Ze(i)?i:n,i=Ze(i)?i:function(){};for(var o=this._private.cy,l=a=ce(a)?this.filter(a):a,u=[],h=[],d={},f={},p={},y=0,v,m=this.byGroup(),x=m.nodes,b=m.edges,w=0;w<l.length;w++){var C=l[w],T=C.id();C.isNode()&&(u.unshift(C),t.bfs&&(p[T]=!0,h.push(C)),f[T]=0)}for(var k=function(){var R=t.bfs?u.shift():u.pop(),O=R.id();if(t.dfs){if(p[O])return 0;p[O]=!0,h.push(R)}var P=f[O],$=d[O],M=$!=null?$.source():null,I=$!=null?$.target():null,F=$==null?void 0:R.same(M)?I[0]:M[0],V;if(V=i(R,$,F,y++,P),V===!0)return v=R,1;if(V===!1)return 1;for(var N=R.connectedEdges().filter(function(J){return(!n||J.source().same(R))&&b.has(J)}),q=0;q<N.length;q++){var U=N[q],X=U.connectedNodes().filter(function(J){return!J.same(R)&&x.has(J)}),lt=X.id();X.length!==0&&!p[lt]&&(X=X[0],u.push(X),t.bfs&&(p[lt]=!0,h.push(X)),d[lt]=U,f[lt]=f[O]+1)}},S;u.length!==0&&(S=k(),!(S!==0&&S===1)););for(var L=o.collection(),_=0;_<h.length;_++){var A=h[_],E=d[A.id()];E!=null&&L.push(E),L.push(A)}return{path:o.collection(L),found:o.collection(v)}}},Jl={breadthFirstSearch:_v({bfs:!0}),depthFirstSearch:_v({dfs:!0})};Jl.bfs=Jl.breadthFirstSearch;Jl.dfs=Jl.depthFirstSearch;var bu={exports:{}},sF=bu.exports,Av;function oF(){return Av||(Av=1,function(e,t){(function(){var r,a,i,n,s,o,l,u,h,d,f,p,y,v,m;i=Math.floor,d=Math.min,a=function(x,b){return x<b?-1:x>b?1:0},h=function(x,b,w,C,T){var k;if(w==null&&(w=0),T==null&&(T=a),w<0)throw new Error("lo must be non-negative");for(C==null&&(C=x.length);w<C;)k=i((w+C)/2),T(b,x[k])<0?C=k:w=k+1;return[].splice.apply(x,[w,w-w].concat(b)),b},o=function(x,b,w){return w==null&&(w=a),x.push(b),v(x,0,x.length-1,w)},s=function(x,b){var w,C;return b==null&&(b=a),w=x.pop(),x.length?(C=x[0],x[0]=w,m(x,0,b)):C=w,C},u=function(x,b,w){var C;return w==null&&(w=a),C=x[0],x[0]=b,m(x,0,w),C},l=function(x,b,w){var C;return w==null&&(w=a),x.length&&w(x[0],b)<0&&(C=[x[0],b],b=C[0],x[0]=C[1],m(x,0,w)),b},n=function(x,b){var w,C,T,k,S,L;for(b==null&&(b=a),k=(function(){L=[];for(var _=0,A=i(x.length/2);0<=A?_<A:_>A;0<=A?_++:_--)L.push(_);return L}).apply(this).reverse(),S=[],C=0,T=k.length;C<T;C++)w=k[C],S.push(m(x,w,b));return S},y=function(x,b,w){var C;if(w==null&&(w=a),C=x.indexOf(b),C!==-1)return v(x,0,C,w),m(x,C,w)},f=function(x,b,w){var C,T,k,S,L;if(w==null&&(w=a),T=x.slice(0,b),!T.length)return T;for(n(T,w),L=x.slice(b),k=0,S=L.length;k<S;k++)C=L[k],l(T,C,w);return T.sort(w).reverse()},p=function(x,b,w){var C,T,k,S,L,_,A,E,D;if(w==null&&(w=a),b*10<=x.length){if(k=x.slice(0,b).sort(w),!k.length)return k;for(T=k[k.length-1],A=x.slice(b),S=0,_=A.length;S<_;S++)C=A[S],w(C,T)<0&&(h(k,C,0,null,w),k.pop(),T=k[k.length-1]);return k}for(n(x,w),D=[],L=0,E=d(b,x.length);0<=E?L<E:L>E;0<=E?++L:--L)D.push(s(x,w));return D},v=function(x,b,w,C){var T,k,S;for(C==null&&(C=a),T=x[w];w>b;){if(S=w-1>>1,k=x[S],C(T,k)<0){x[w]=k,w=S;continue}break}return x[w]=T},m=function(x,b,w){var C,T,k,S,L;for(w==null&&(w=a),T=x.length,L=b,k=x[b],C=2*b+1;C<T;)S=C+1,S<T&&!(w(x[C],x[S])<0)&&(C=S),x[b]=x[C],b=C,C=2*b+1;return x[b]=k,v(x,L,b,w)},r=function(){x.push=o,x.pop=s,x.replace=u,x.pushpop=l,x.heapify=n,x.updateItem=y,x.nlargest=f,x.nsmallest=p;function x(b){this.cmp=b??a,this.nodes=[]}return x.prototype.push=function(b){return o(this.nodes,b,this.cmp)},x.prototype.pop=function(){return s(this.nodes,this.cmp)},x.prototype.peek=function(){return this.nodes[0]},x.prototype.contains=function(b){return this.nodes.indexOf(b)!==-1},x.prototype.replace=function(b){return u(this.nodes,b,this.cmp)},x.prototype.pushpop=function(b){return l(this.nodes,b,this.cmp)},x.prototype.heapify=function(){return n(this.nodes,this.cmp)},x.prototype.updateItem=function(b){return y(this.nodes,b,this.cmp)},x.prototype.clear=function(){return this.nodes=[]},x.prototype.empty=function(){return this.nodes.length===0},x.prototype.size=function(){return this.nodes.length},x.prototype.clone=function(){var b;return b=new x,b.nodes=this.nodes.slice(0),b},x.prototype.toArray=function(){return this.nodes.slice(0)},x.prototype.insert=x.prototype.push,x.prototype.top=x.prototype.peek,x.prototype.front=x.prototype.peek,x.prototype.has=x.prototype.contains,x.prototype.copy=x.prototype.clone,x}(),function(x,b){return e.exports=b()}(this,function(){return r})}).call(sF)}(bu)),bu.exports}var Zd,Lv;function lF(){return Lv||(Lv=1,Zd=oF()),Zd}var cF=lF(),Ec=kc(cF),uF=Fr({root:null,weight:function(t){return 1},directed:!1}),hF={dijkstra:function(t){if(!De(t)){var r=arguments;t={root:r[0],weight:r[1],directed:r[2]}}var a=uF(t),i=a.root,n=a.weight,s=a.directed,o=this,l=n,u=ce(i)?this.filter(i)[0]:i[0],h={},d={},f={},p=this.byGroup(),y=p.nodes,v=p.edges;v.unmergeBy(function(P){return P.isLoop()});for(var m=function($){return h[$.id()]},x=function($,M){h[$.id()]=M,b.updateItem($)},b=new Ec(function(P,$){return m(P)-m($)}),w=0;w<y.length;w++){var C=y[w];h[C.id()]=C.same(u)?0:1/0,b.push(C)}for(var T=function($,M){for(var I=(s?$.edgesTo(M):$.edgesWith(M)).intersect(v),F=1/0,V,N=0;N<I.length;N++){var q=I[N],U=l(q);(U<F||!V)&&(F=U,V=q)}return{edge:V,dist:F}};b.size()>0;){var k=b.pop(),S=m(k),L=k.id();if(f[L]=S,S!==1/0)for(var _=k.neighborhood().intersect(y),A=0;A<_.length;A++){var E=_[A],D=E.id(),R=T(k,E),O=S+R.dist;O<m(E)&&(x(E,O),d[D]={node:k,edge:R.edge})}}return{distanceTo:function($){var M=ce($)?y.filter($)[0]:$[0];return f[M.id()]},pathTo:function($){var M=ce($)?y.filter($)[0]:$[0],I=[],F=M,V=F.id();if(M.length>0)for(I.unshift(M);d[V];){var N=d[V];I.unshift(N.edge),I.unshift(N.node),F=N.node,V=F.id()}return o.spawn(I)}}}},dF={kruskal:function(t){t=t||function(w){return 1};for(var r=this.byGroup(),a=r.nodes,i=r.edges,n=a.length,s=new Array(n),o=a,l=function(C){for(var T=0;T<s.length;T++){var k=s[T];if(k.has(C))return T}},u=0;u<n;u++)s[u]=this.spawn(a[u]);for(var h=i.sort(function(w,C){return t(w)-t(C)}),d=0;d<h.length;d++){var f=h[d],p=f.source()[0],y=f.target()[0],v=l(p),m=l(y),x=s[v],b=s[m];v!==m&&(o.merge(f),x.merge(b),s.splice(m,1))}return o}},fF=Fr({root:null,goal:null,weight:function(t){return 1},heuristic:function(t){return 0},directed:!1}),pF={aStar:function(t){var r=this.cy(),a=fF(t),i=a.root,n=a.goal,s=a.heuristic,o=a.directed,l=a.weight;i=r.collection(i)[0],n=r.collection(n)[0];var u=i.id(),h=n.id(),d={},f={},p={},y=new Ec(function(V,N){return f[V.id()]-f[N.id()]}),v=new jo,m={},x={},b=function(N,q){y.push(N),v.add(q)},w,C,T=function(){w=y.pop(),C=w.id(),v.delete(C)},k=function(N){return v.has(N)};b(i,u),d[u]=0,f[u]=s(i);for(var S=0;y.size()>0;){if(T(),S++,C===h){for(var L=[],_=n,A=h,E=x[A];L.unshift(_),E!=null&&L.unshift(E),_=m[A],_!=null;)A=_.id(),E=x[A];return{found:!0,distance:d[C],path:this.spawn(L),steps:S}}p[C]=!0;for(var D=w._private.edges,R=0;R<D.length;R++){var O=D[R];if(this.hasElementWithId(O.id())&&!(o&&O.data("source")!==C)){var P=O.source(),$=O.target(),M=P.id()!==C?P:$,I=M.id();if(this.hasElementWithId(I)&&!p[I]){var F=d[C]+l(O);if(!k(I)){d[I]=F,f[I]=F+s(M),b(M,I),m[I]=w,x[I]=O;continue}F<d[I]&&(d[I]=F,f[I]=F+s(M),m[I]=w,x[I]=O)}}}}return{found:!1,distance:void 0,path:void 0,steps:S}}},gF=Fr({weight:function(t){return 1},directed:!1}),yF={floydWarshall:function(t){for(var r=this.cy(),a=gF(t),i=a.weight,n=a.directed,s=i,o=this.byGroup(),l=o.nodes,u=o.edges,h=l.length,d=h*h,f=function(U){return l.indexOf(U)},p=function(U){return l[U]},y=new Array(d),v=0;v<d;v++){var m=v%h,x=(v-m)/h;x===m?y[v]=0:y[v]=1/0}for(var b=new Array(d),w=new Array(d),C=0;C<u.length;C++){var T=u[C],k=T.source()[0],S=T.target()[0];if(k!==S){var L=f(k),_=f(S),A=L*h+_,E=s(T);if(y[A]>E&&(y[A]=E,b[A]=_,w[A]=T),!n){var D=_*h+L;!n&&y[D]>E&&(y[D]=E,b[D]=L,w[D]=T)}}}for(var R=0;R<h;R++)for(var O=0;O<h;O++)for(var P=O*h+R,$=0;$<h;$++){var M=O*h+$,I=R*h+$;y[P]+y[I]<y[M]&&(y[M]=y[P]+y[I],b[M]=b[P])}var F=function(U){return(ce(U)?r.filter(U):U)[0]},V=function(U){return f(F(U))},N={distance:function(U,X){var lt=V(U),J=V(X);return y[lt*h+J]},path:function(U,X){var lt=V(U),J=V(X),ct=p(lt);if(lt===J)return ct.collection();if(b[lt*h+J]==null)return r.collection();var yt=r.collection(),ut=lt,Q;for(yt.merge(ct);lt!==J;)ut=lt,lt=b[lt*h+J],Q=w[ut*h+lt],yt.merge(Q),yt.merge(p(lt));return yt}};return N}},vF=Fr({weight:function(t){return 1},directed:!1,root:null}),mF={bellmanFord:function(t){var r=this,a=vF(t),i=a.weight,n=a.directed,s=a.root,o=i,l=this,u=this.cy(),h=this.byGroup(),d=h.edges,f=h.nodes,p=f.length,y=new Si,v=!1,m=[];s=u.collection(s)[0],d.unmergeBy(function(tt){return tt.isLoop()});for(var x=d.length,b=function(H){var Et=y.get(H.id());return Et||(Et={},y.set(H.id(),Et)),Et},w=function(H){return(ce(H)?u.$(H):H)[0]},C=function(H){return b(w(H)).dist},T=function(H){for(var Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s,nt=w(H),Lt=[],Dt=nt;;){if(Dt==null)return r.spawn();var At=b(Dt),xt=At.edge,_t=At.pred;if(Lt.unshift(Dt[0]),Dt.same(Et)&&Lt.length>0)break;xt!=null&&Lt.unshift(xt),Dt=_t}return l.spawn(Lt)},k=0;k<p;k++){var S=f[k],L=b(S);S.same(s)?L.dist=0:L.dist=1/0,L.pred=null,L.edge=null}for(var _=!1,A=function(H,Et,nt,Lt,Dt,At){var xt=Lt.dist+At;xt<Dt.dist&&!nt.same(Lt.edge)&&(Dt.dist=xt,Dt.pred=H,Dt.edge=nt,_=!0)},E=1;E<p;E++){_=!1;for(var D=0;D<x;D++){var R=d[D],O=R.source(),P=R.target(),$=o(R),M=b(O),I=b(P);A(O,P,R,M,I,$),n||A(P,O,R,I,M,$)}if(!_)break}if(_)for(var F=[],V=0;V<x;V++){var N=d[V],q=N.source(),U=N.target(),X=o(N),lt=b(q).dist,J=b(U).dist;if(lt+X<J||!n&&J+X<lt)if(v||(Pe("Graph contains a negative weight cycle for Bellman-Ford"),v=!0),t.findNegativeWeightCycles!==!1){var ct=[];lt+X<J&&ct.push(q),!n&&J+X<lt&&ct.push(U);for(var yt=ct.length,ut=0;ut<yt;ut++){var Q=ct[ut],K=[Q];K.push(b(Q).edge);for(var j=b(Q).pred;K.indexOf(j)===-1;)K.push(j),K.push(b(j).edge),j=b(j).pred;K=K.slice(K.indexOf(j));for(var Y=K[0].id(),st=0,W=2;W<K.length;W+=2)K[W].id()<Y&&(Y=K[W].id(),st=W);K=K.slice(st).concat(K.slice(0,st)),K.push(K[0]);var bt=K.map(function(tt){return tt.id()}).join(",");F.indexOf(bt)===-1&&(m.push(l.spawn(K)),F.push(bt))}}else break}return{distanceTo:C,pathTo:T,hasNegativeWeightCycle:v,negativeWeightCycles:m}}},xF=Math.sqrt(2),bF=function(t,r,a){a.length===0&&Qe("Karger-Stein must be run on a connected (sub)graph");for(var i=a[t],n=i[1],s=i[2],o=r[n],l=r[s],u=a,h=u.length-1;h>=0;h--){var d=u[h],f=d[1],p=d[2];(r[f]===o&&r[p]===l||r[f]===l&&r[p]===o)&&u.splice(h,1)}for(var y=0;y<u.length;y++){var v=u[y];v[1]===l?(u[y]=v.slice(),u[y][1]=o):v[2]===l&&(u[y]=v.slice(),u[y][2]=o)}for(var m=0;m<r.length;m++)r[m]===l&&(r[m]=o);return u},Jd=function(t,r,a,i){for(;a>i;){var n=Math.floor(Math.random()*r.length);r=bF(n,t,r),a--}return r},wF={kargerStein:function(){var t=this,r=this.byGroup(),a=r.nodes,i=r.edges;i.unmergeBy(function(I){return I.isLoop()});var n=a.length,s=i.length,o=Math.ceil(Math.pow(Math.log(n)/Math.LN2,2)),l=Math.floor(n/xF);if(n<2){Qe("At least 2 nodes are required for Karger-Stein algorithm");return}for(var u=[],h=0;h<s;h++){var d=i[h];u.push([h,a.indexOf(d.source()),a.indexOf(d.target())])}for(var f=1/0,p=[],y=new Array(n),v=new Array(n),m=new Array(n),x=function(F,V){for(var N=0;N<n;N++)V[N]=F[N]},b=0;b<=o;b++){for(var w=0;w<n;w++)v[w]=w;var C=Jd(v,u.slice(),n,l),T=C.slice();x(v,m);var k=Jd(v,C,l,2),S=Jd(m,T,l,2);k.length<=S.length&&k.length<f?(f=k.length,p=k,x(v,y)):S.length<=k.length&&S.length<f&&(f=S.length,p=S,x(m,y))}for(var L=this.spawn(p.map(function(I){return i[I[0]]})),_=this.spawn(),A=this.spawn(),E=y[0],D=0;D<y.length;D++){var R=y[D],O=a[D];R===E?_.merge(O):A.merge(O)}var P=function(F){var V=t.spawn();return F.forEach(function(N){V.merge(N),N.connectedEdges().forEach(function(q){t.contains(q)&&!L.contains(q)&&V.merge(q)})}),V},$=[P(_),P(A)],M={cut:L,components:$,partition1:_,partition2:A};return M}},kF=function(t){return{x:t.x,y:t.y}},Zh=function(t,r,a){return{x:t.x*r+a.x,y:t.y*r+a.y}},BT=function(t,r,a){return{x:(t.x-a.x)/r,y:(t.y-a.y)/r}},ws=function(t){return{x:t[0],y:t[1]}},TF=function(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.length,i=1/0,n=r;n<a;n++){var s=t[n];isFinite(s)&&(i=Math.min(s,i))}return i},CF=function(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.length,i=-1/0,n=r;n<a;n++){var s=t[n];isFinite(s)&&(i=Math.max(s,i))}return i},SF=function(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.length,i=0,n=0,s=r;s<a;s++){var o=t[s];isFinite(o)&&(i+=o,n++)}return i/n},EF=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.length,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;i?t=t.slice(r,a):(a<t.length&&t.splice(a,t.length-a),r>0&&t.splice(0,r));for(var o=0,l=t.length-1;l>=0;l--){var u=t[l];s?isFinite(u)||(t[l]=-1/0,o++):t.splice(l,1)}n&&t.sort(function(f,p){return f-p});var h=t.length,d=Math.floor(h/2);return h%2!==0?t[d+1+o]:(t[d-1+o]+t[d+o])/2},_F=function(t){return Math.PI*t/180},Hc=function(t,r){return Math.atan2(r,t)-Math.PI/2},g1=Math.log2||function(e){return Math.log(e)/Math.log(2)},y1=function(t){return t>0?1:t<0?-1:0},Hn=function(t,r){return Math.sqrt(kn(t,r))},kn=function(t,r){var a=r.x-t.x,i=r.y-t.y;return a*a+i*i},AF=function(t){for(var r=t.length,a=0,i=0;i<r;i++)a+=t[i];for(var n=0;n<r;n++)t[n]=t[n]/a;return t},Tr=function(t,r,a,i){return(1-i)*(1-i)*t+2*(1-i)*i*r+i*i*a},As=function(t,r,a,i){return{x:Tr(t.x,r.x,a.x,i),y:Tr(t.y,r.y,a.y,i)}},LF=function(t,r,a,i){var n={x:r.x-t.x,y:r.y-t.y},s=Hn(t,r),o={x:n.x/s,y:n.y/s};return a=a??0,i=i??a*s,{x:t.x+o.x*i,y:t.y+o.y*i}},tc=function(t,r,a){return Math.max(t,Math.min(a,r))},ha=function(t){if(t==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(t.x1!=null&&t.y1!=null){if(t.x2!=null&&t.y2!=null&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(t.w!=null&&t.h!=null&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},DF=function(t){return{x1:t.x1,x2:t.x2,w:t.w,y1:t.y1,y2:t.y2,h:t.h}},BF=function(t){t.x1=1/0,t.y1=1/0,t.x2=-1/0,t.y2=-1/0,t.w=0,t.h=0},RF=function(t,r,a){return{x1:t.x1+r,x2:t.x2+r,y1:t.y1+a,y2:t.y2+a,w:t.w,h:t.h}},RT=function(t,r){t.x1=Math.min(t.x1,r.x1),t.x2=Math.max(t.x2,r.x2),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,r.y1),t.y2=Math.max(t.y2,r.y2),t.h=t.y2-t.y1},IF=function(t,r,a){t.x1=Math.min(t.x1,r),t.x2=Math.max(t.x2,r),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,a),t.y2=Math.max(t.y2,a),t.h=t.y2-t.y1},wu=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.x1-=r,t.x2+=r,t.y1-=r,t.y2+=r,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},ku=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],a,i,n,s;if(r.length===1)a=i=n=s=r[0];else if(r.length===2)a=n=r[0],s=i=r[1];else if(r.length===4){var o=ur(r,4);a=o[0],i=o[1],n=o[2],s=o[3]}return t.x1-=s,t.x2+=i,t.y1-=a,t.y2+=n,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},Dv=function(t,r){t.x1=r.x1,t.y1=r.y1,t.x2=r.x2,t.y2=r.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1},v1=function(t,r){return!(t.x1>r.x2||r.x1>t.x2||t.x2<r.x1||r.x2<t.x1||t.y2<r.y1||r.y2<t.y1||t.y1>r.y2||r.y1>t.y2)},Fo=function(t,r,a){return t.x1<=r&&r<=t.x2&&t.y1<=a&&a<=t.y2},PF=function(t,r){return Fo(t,r.x,r.y)},NF=function(t,r){return Fo(t,r.x1,r.y1)&&Fo(t,r.x2,r.y2)},IT=function(t,r,a,i,n,s,o){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",u=l==="auto"?en(n,s):l,h=n/2,d=s/2;u=Math.min(u,h,d);var f=u!==h,p=u!==d,y;if(f){var v=a-h+u-o,m=i-d-o,x=a+h-u+o,b=m;if(y=Yi(t,r,a,i,v,m,x,b,!1),y.length>0)return y}if(p){var w=a+h+o,C=i-d+u-o,T=w,k=i+d-u+o;if(y=Yi(t,r,a,i,w,C,T,k,!1),y.length>0)return y}if(f){var S=a-h+u-o,L=i+d+o,_=a+h-u+o,A=L;if(y=Yi(t,r,a,i,S,L,_,A,!1),y.length>0)return y}if(p){var E=a-h-o,D=i-d+u-o,R=E,O=i+d-u+o;if(y=Yi(t,r,a,i,E,D,R,O,!1),y.length>0)return y}var P;{var $=a-h+u,M=i-d+u;if(P=Tl(t,r,a,i,$,M,u+o),P.length>0&&P[0]<=$&&P[1]<=M)return[P[0],P[1]]}{var I=a+h-u,F=i-d+u;if(P=Tl(t,r,a,i,I,F,u+o),P.length>0&&P[0]>=I&&P[1]<=F)return[P[0],P[1]]}{var V=a+h-u,N=i+d-u;if(P=Tl(t,r,a,i,V,N,u+o),P.length>0&&P[0]>=V&&P[1]>=N)return[P[0],P[1]]}{var q=a-h+u,U=i+d-u;if(P=Tl(t,r,a,i,q,U,u+o),P.length>0&&P[0]<=q&&P[1]>=U)return[P[0],P[1]]}return[]},MF=function(t,r,a,i,n,s,o){var l=o,u=Math.min(a,n),h=Math.max(a,n),d=Math.min(i,s),f=Math.max(i,s);return u-l<=t&&t<=h+l&&d-l<=r&&r<=f+l},FF=function(t,r,a,i,n,s,o,l,u){var h={x1:Math.min(a,o,n)-u,x2:Math.max(a,o,n)+u,y1:Math.min(i,l,s)-u,y2:Math.max(i,l,s)+u};return!(t<h.x1||t>h.x2||r<h.y1||r>h.y2)},OF=function(t,r,a,i){a-=i;var n=r*r-4*t*a;if(n<0)return[];var s=Math.sqrt(n),o=2*t,l=(-r+s)/o,u=(-r-s)/o;return[l,u]},$F=function(t,r,a,i,n){var s=1e-5;t===0&&(t=s),r/=t,a/=t,i/=t;var o,l,u,h,d,f,p,y;if(l=(3*a-r*r)/9,u=-(27*i)+r*(9*a-2*(r*r)),u/=54,o=l*l*l+u*u,n[1]=0,p=r/3,o>0){d=u+Math.sqrt(o),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),f=u-Math.sqrt(o),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),n[0]=-p+d+f,p+=(d+f)/2,n[4]=n[2]=-p,p=Math.sqrt(3)*(-f+d)/2,n[3]=p,n[5]=-p;return}if(n[5]=n[3]=0,o===0){y=u<0?-Math.pow(-u,1/3):Math.pow(u,1/3),n[0]=-p+2*y,n[4]=n[2]=-(y+p);return}l=-l,h=l*l*l,h=Math.acos(u/Math.sqrt(h)),y=2*Math.sqrt(l),n[0]=-p+y*Math.cos(h/3),n[2]=-p+y*Math.cos((h+2*Math.PI)/3),n[4]=-p+y*Math.cos((h+4*Math.PI)/3)},VF=function(t,r,a,i,n,s,o,l){var u=1*a*a-4*a*n+2*a*o+4*n*n-4*n*o+o*o+i*i-4*i*s+2*i*l+4*s*s-4*s*l+l*l,h=1*9*a*n-3*a*a-3*a*o-6*n*n+3*n*o+9*i*s-3*i*i-3*i*l-6*s*s+3*s*l,d=1*3*a*a-6*a*n+a*o-a*t+2*n*n+2*n*t-o*t+3*i*i-6*i*s+i*l-i*r+2*s*s+2*s*r-l*r,f=1*a*n-a*a+a*t-n*t+i*s-i*i+i*r-s*r,p=[];$F(u,h,d,f,p);for(var y=1e-7,v=[],m=0;m<6;m+=2)Math.abs(p[m+1])<y&&p[m]>=0&&p[m]<=1&&v.push(p[m]);v.push(1),v.push(0);for(var x=-1,b,w,C,T=0;T<v.length;T++)b=Math.pow(1-v[T],2)*a+2*(1-v[T])*v[T]*n+v[T]*v[T]*o,w=Math.pow(1-v[T],2)*i+2*(1-v[T])*v[T]*s+v[T]*v[T]*l,C=Math.pow(b-t,2)+Math.pow(w-r,2),x>=0?C<x&&(x=C):x=C;return x},zF=function(t,r,a,i,n,s){var o=[t-a,r-i],l=[n-a,s-i],u=l[0]*l[0]+l[1]*l[1],h=o[0]*o[0]+o[1]*o[1],d=o[0]*l[0]+o[1]*l[1],f=d*d/u;return d<0?h:f>u?(t-n)*(t-n)+(r-s)*(r-s):h-f},sa=function(t,r,a){for(var i,n,s,o,l,u=0,h=0;h<a.length/2;h++)if(i=a[h*2],n=a[h*2+1],h+1<a.length/2?(s=a[(h+1)*2],o=a[(h+1)*2+1]):(s=a[(h+1-a.length/2)*2],o=a[(h+1-a.length/2)*2+1]),!(i==t&&s==t))if(i>=t&&t>=s||i<=t&&t<=s)l=(t-i)/(s-i)*(o-n)+n,l>r&&u++;else continue;return u%2!==0},Di=function(t,r,a,i,n,s,o,l,u){var h=new Array(a.length),d;l[0]!=null?(d=Math.atan(l[1]/l[0]),l[0]<0?d=d+Math.PI/2:d=-d-Math.PI/2):d=l;for(var f=Math.cos(-d),p=Math.sin(-d),y=0;y<h.length/2;y++)h[y*2]=s/2*(a[y*2]*f-a[y*2+1]*p),h[y*2+1]=o/2*(a[y*2+1]*f+a[y*2]*p),h[y*2]+=i,h[y*2+1]+=n;var v;if(u>0){var m=dh(h,-u);v=hh(m)}else v=h;return sa(t,r,v)},qF=function(t,r,a,i,n,s,o,l){for(var u=new Array(a.length*2),h=0;h<l.length;h++){var d=l[h];u[h*4+0]=d.startX,u[h*4+1]=d.startY,u[h*4+2]=d.stopX,u[h*4+3]=d.stopY;var f=Math.pow(d.cx-t,2)+Math.pow(d.cy-r,2);if(f<=Math.pow(d.radius,2))return!0}return sa(t,r,u)},hh=function(t){for(var r=new Array(t.length/2),a,i,n,s,o,l,u,h,d=0;d<t.length/4;d++){a=t[d*4],i=t[d*4+1],n=t[d*4+2],s=t[d*4+3],d<t.length/4-1?(o=t[(d+1)*4],l=t[(d+1)*4+1],u=t[(d+1)*4+2],h=t[(d+1)*4+3]):(o=t[0],l=t[1],u=t[2],h=t[3]);var f=Yi(a,i,n,s,o,l,u,h,!0);r[d*2]=f[0],r[d*2+1]=f[1]}return r},dh=function(t,r){for(var a=new Array(t.length*2),i,n,s,o,l=0;l<t.length/2;l++){i=t[l*2],n=t[l*2+1],l<t.length/2-1?(s=t[(l+1)*2],o=t[(l+1)*2+1]):(s=t[0],o=t[1]);var u=o-n,h=-(s-i),d=Math.sqrt(u*u+h*h),f=u/d,p=h/d;a[l*4]=i+f*r,a[l*4+1]=n+p*r,a[l*4+2]=s+f*r,a[l*4+3]=o+p*r}return a},WF=function(t,r,a,i,n,s){var o=a-t,l=i-r;o/=n,l/=s;var u=Math.sqrt(o*o+l*l),h=u-1;if(h<0)return[];var d=h/u;return[(a-t)*d+t,(i-r)*d+r]},Mn=function(t,r,a,i,n,s,o){return t-=n,r-=s,t/=a/2+o,r/=i/2+o,t*t+r*r<=1},Tl=function(t,r,a,i,n,s,o){var l=[a-t,i-r],u=[t-n,r-s],h=l[0]*l[0]+l[1]*l[1],d=2*(u[0]*l[0]+u[1]*l[1]),f=u[0]*u[0]+u[1]*u[1]-o*o,p=d*d-4*h*f;if(p<0)return[];var y=(-d+Math.sqrt(p))/(2*h),v=(-d-Math.sqrt(p))/(2*h),m=Math.min(y,v),x=Math.max(y,v),b=[];if(m>=0&&m<=1&&b.push(m),x>=0&&x<=1&&b.push(x),b.length===0)return[];var w=b[0]*l[0]+t,C=b[0]*l[1]+r;if(b.length>1){if(b[0]==b[1])return[w,C];var T=b[1]*l[0]+t,k=b[1]*l[1]+r;return[w,C,T,k]}else return[w,C]},tf=function(t,r,a){return r<=t&&t<=a||a<=t&&t<=r?t:t<=r&&r<=a||a<=r&&r<=t?r:a},Yi=function(t,r,a,i,n,s,o,l,u){var h=t-n,d=a-t,f=o-n,p=r-s,y=i-r,v=l-s,m=f*p-v*h,x=d*p-y*h,b=v*d-f*y;if(b!==0){var w=m/b,C=x/b,T=.001,k=0-T,S=1+T;return k<=w&&w<=S&&k<=C&&C<=S?[t+w*d,r+w*y]:u?[t+w*d,r+w*y]:[]}else return m===0||x===0?tf(t,a,o)===o?[o,l]:tf(t,a,n)===n?[n,s]:tf(n,o,a)===a?[a,i]:[]:[]},ec=function(t,r,a,i,n,s,o,l){var u=[],h,d=new Array(a.length),f=!0;s==null&&(f=!1);var p;if(f){for(var y=0;y<d.length/2;y++)d[y*2]=a[y*2]*s+i,d[y*2+1]=a[y*2+1]*o+n;if(l>0){var v=dh(d,-l);p=hh(v)}else p=d}else p=a;for(var m,x,b,w,C=0;C<p.length/2;C++)m=p[C*2],x=p[C*2+1],C<p.length/2-1?(b=p[(C+1)*2],w=p[(C+1)*2+1]):(b=p[0],w=p[1]),h=Yi(t,r,i,n,m,x,b,w),h.length!==0&&u.push(h[0],h[1]);return u},GF=function(t,r,a,i,n,s,o,l,u){var h=[],d,f=new Array(a.length*2);u.forEach(function(b,w){w===0?(f[f.length-2]=b.startX,f[f.length-1]=b.startY):(f[w*4-2]=b.startX,f[w*4-1]=b.startY),f[w*4]=b.stopX,f[w*4+1]=b.stopY,d=Tl(t,r,i,n,b.cx,b.cy,b.radius),d.length!==0&&h.push(d[0],d[1])});for(var p=0;p<f.length/4;p++)d=Yi(t,r,i,n,f[p*4],f[p*4+1],f[p*4+2],f[p*4+3],!1),d.length!==0&&h.push(d[0],d[1]);if(h.length>2){for(var y=[h[0],h[1]],v=Math.pow(y[0]-t,2)+Math.pow(y[1]-r,2),m=1;m<h.length/2;m++){var x=Math.pow(h[m*2]-t,2)+Math.pow(h[m*2+1]-r,2);x<=v&&(y[0]=h[m*2],y[1]=h[m*2+1],v=x)}return y}return h},Yc=function(t,r,a){var i=[t[0]-r[0],t[1]-r[1]],n=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=(n-a)/n;return s<0&&(s=1e-5),[r[0]+s*i[0],r[1]+s*i[1]]},Xr=function(t,r){var a=yg(t,r);return a=PT(a),a},PT=function(t){for(var r,a,i=t.length/2,n=1/0,s=1/0,o=-1/0,l=-1/0,u=0;u<i;u++)r=t[2*u],a=t[2*u+1],n=Math.min(n,r),o=Math.max(o,r),s=Math.min(s,a),l=Math.max(l,a);for(var h=2/(o-n),d=2/(l-s),f=0;f<i;f++)r=t[2*f]=t[2*f]*h,a=t[2*f+1]=t[2*f+1]*d,n=Math.min(n,r),o=Math.max(o,r),s=Math.min(s,a),l=Math.max(l,a);if(s<-1)for(var p=0;p<i;p++)a=t[2*p+1]=t[2*p+1]+(-1-s);return t},yg=function(t,r){var a=1/t*2*Math.PI,i=t%2===0?Math.PI/2+a/2:Math.PI/2;i+=r;for(var n=new Array(t*2),s,o=0;o<t;o++)s=o*a+i,n[2*o]=Math.cos(s),n[2*o+1]=Math.sin(-s);return n},en=function(t,r){return Math.min(t/4,r/4,8)},NT=function(t,r){return Math.min(t/10,r/10,8)},m1=function(){return 8},HF=function(t,r,a){return[t-2*r+a,2*(r-t),t]},vg=function(t,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*t),ctrlPtOffsetPct:.05}};function YF(e,t){function r(d){for(var f=[],p=0;p<d.length;p++){var y=d[p],v=d[(p+1)%d.length],m={x:v.x-y.x,y:v.y-y.y},x={x:-m.y,y:m.x},b=Math.sqrt(x.x*x.x+x.y*x.y);f.push({x:x.x/b,y:x.y/b})}return f}function a(d,f){var p=1/0,y=-1/0,v=ca(d),m;try{for(v.s();!(m=v.n()).done;){var x=m.value,b=x.x*f.x+x.y*f.y;p=Math.min(p,b),y=Math.max(y,b)}}catch(w){v.e(w)}finally{v.f()}return{min:p,max:y}}function i(d,f){return!(d.max<f.min||f.max<d.min)}var n=[].concat(oh(r(e)),oh(r(t))),s=ca(n),o;try{for(s.s();!(o=s.n()).done;){var l=o.value,u=a(e,l),h=a(t,l);if(!i(u,h))return!1}}catch(d){s.e(d)}finally{s.f()}return!0}var UF=Fr({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(t){return 1}}),XF={pageRank:function(t){for(var r=UF(t),a=r.dampingFactor,i=r.precision,n=r.iterations,s=r.weight,o=this._private.cy,l=this.byGroup(),u=l.nodes,h=l.edges,d=u.length,f=d*d,p=h.length,y=new Array(f),v=new Array(d),m=(1-a)/d,x=0;x<d;x++){for(var b=0;b<d;b++){var w=x*d+b;y[w]=0}v[x]=0}for(var C=0;C<p;C++){var T=h[C],k=T.data("source"),S=T.data("target");if(k!==S){var L=u.indexOfId(k),_=u.indexOfId(S),A=s(T),E=_*d+L;y[E]+=A,v[L]+=A}}for(var D=1/d+m,R=0;R<d;R++)if(v[R]===0)for(var O=0;O<d;O++){var P=O*d+R;y[P]=D}else for(var $=0;$<d;$++){var M=$*d+R;y[M]=y[M]/v[R]+m}for(var I=new Array(d),F=new Array(d),V,N=0;N<d;N++)I[N]=1;for(var q=0;q<n;q++){for(var U=0;U<d;U++)F[U]=0;for(var X=0;X<d;X++)for(var lt=0;lt<d;lt++){var J=X*d+lt;F[X]+=y[J]*I[lt]}AF(F),V=I,I=F,F=V;for(var ct=0,yt=0;yt<d;yt++){var ut=V[yt]-I[yt];ct+=ut*ut}if(ct<i)break}var Q={rank:function(j){return j=o.collection(j)[0],I[u.indexOf(j)]}};return Q}},Bv=Fr({root:null,weight:function(t){return 1},directed:!1,alpha:0}),Ls={degreeCentralityNormalized:function(t){t=Bv(t);var r=this.cy(),a=this.nodes(),i=a.length;if(t.directed){for(var h={},d={},f=0,p=0,y=0;y<i;y++){var v=a[y],m=v.id();t.root=v;var x=this.degreeCentrality(t);f<x.indegree&&(f=x.indegree),p<x.outdegree&&(p=x.outdegree),h[m]=x.indegree,d[m]=x.outdegree}return{indegree:function(w){return f==0?0:(ce(w)&&(w=r.filter(w)),h[w.id()]/f)},outdegree:function(w){return p===0?0:(ce(w)&&(w=r.filter(w)),d[w.id()]/p)}}}else{for(var n={},s=0,o=0;o<i;o++){var l=a[o];t.root=l;var u=this.degreeCentrality(t);s<u.degree&&(s=u.degree),n[l.id()]=u.degree}return{degree:function(w){return s===0?0:(ce(w)&&(w=r.filter(w)),n[w.id()]/s)}}}},degreeCentrality:function(t){t=Bv(t);var r=this.cy(),a=this,i=t,n=i.root,s=i.weight,o=i.directed,l=i.alpha;if(n=r.collection(n)[0],o){for(var p=n.connectedEdges(),y=p.filter(function(k){return k.target().same(n)&&a.has(k)}),v=p.filter(function(k){return k.source().same(n)&&a.has(k)}),m=y.length,x=v.length,b=0,w=0,C=0;C<y.length;C++)b+=s(y[C]);for(var T=0;T<v.length;T++)w+=s(v[T]);return{indegree:Math.pow(m,1-l)*Math.pow(b,l),outdegree:Math.pow(x,1-l)*Math.pow(w,l)}}else{for(var u=n.connectedEdges().intersection(a),h=u.length,d=0,f=0;f<u.length;f++)d+=s(u[f]);return{degree:Math.pow(h,1-l)*Math.pow(d,l)}}}};Ls.dc=Ls.degreeCentrality;Ls.dcn=Ls.degreeCentralityNormalised=Ls.degreeCentralityNormalized;var Rv=Fr({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Ds={closenessCentralityNormalized:function(t){for(var r=Rv(t),a=r.harmonic,i=r.weight,n=r.directed,s=this.cy(),o={},l=0,u=this.nodes(),h=this.floydWarshall({weight:i,directed:n}),d=0;d<u.length;d++){for(var f=0,p=u[d],y=0;y<u.length;y++)if(d!==y){var v=h.distance(p,u[y]);a?f+=1/v:f+=v}a||(f=1/f),l<f&&(l=f),o[p.id()]=f}return{closeness:function(x){return l==0?0:(ce(x)?x=s.filter(x)[0].id():x=x.id(),o[x]/l)}}},closenessCentrality:function(t){var r=Rv(t),a=r.root,i=r.weight,n=r.directed,s=r.harmonic;a=this.filter(a)[0];for(var o=this.dijkstra({root:a,weight:i,directed:n}),l=0,u=this.nodes(),h=0;h<u.length;h++){var d=u[h];if(!d.same(a)){var f=o.distanceTo(d);s?l+=1/f:l+=f}}return s?l:1/l}};Ds.cc=Ds.closenessCentrality;Ds.ccn=Ds.closenessCentralityNormalised=Ds.closenessCentralityNormalized;var KF=Fr({weight:null,directed:!1}),mg={betweennessCentrality:function(t){for(var r=KF(t),a=r.directed,i=r.weight,n=i!=null,s=this.cy(),o=this.nodes(),l={},u={},h=0,d={set:function(w,C){u[w]=C,C>h&&(h=C)},get:function(w){return u[w]}},f=0;f<o.length;f++){var p=o[f],y=p.id();a?l[y]=p.outgoers().nodes():l[y]=p.openNeighborhood().nodes(),d.set(y,0)}for(var v=function(){for(var w=o[m].id(),C=[],T={},k={},S={},L=new Ec(function(X,lt){return S[X]-S[lt]}),_=0;_<o.length;_++){var A=o[_].id();T[A]=[],k[A]=0,S[A]=1/0}for(k[w]=1,S[w]=0,L.push(w);!L.empty();){var E=L.pop();if(C.push(E),n)for(var D=0;D<l[E].length;D++){var R=l[E][D],O=s.getElementById(E),P=void 0;O.edgesTo(R).length>0?P=O.edgesTo(R)[0]:P=R.edgesTo(O)[0];var $=i(P);R=R.id(),S[R]>S[E]+$&&(S[R]=S[E]+$,L.nodes.indexOf(R)<0?L.push(R):L.updateItem(R),k[R]=0,T[R]=[]),S[R]==S[E]+$&&(k[R]=k[R]+k[E],T[R].push(E))}else for(var M=0;M<l[E].length;M++){var I=l[E][M].id();S[I]==1/0&&(L.push(I),S[I]=S[E]+1),S[I]==S[E]+1&&(k[I]=k[I]+k[E],T[I].push(E))}}for(var F={},V=0;V<o.length;V++)F[o[V].id()]=0;for(;C.length>0;){for(var N=C.pop(),q=0;q<T[N].length;q++){var U=T[N][q];F[U]=F[U]+k[U]/k[N]*(1+F[N])}N!=o[m].id()&&d.set(N,d.get(N)+F[N])}},m=0;m<o.length;m++)v();var x={betweenness:function(w){var C=s.collection(w).id();return d.get(C)},betweennessNormalized:function(w){if(h==0)return 0;var C=s.collection(w).id();return d.get(C)/h}};return x.betweennessNormalised=x.betweennessNormalized,x}};mg.bc=mg.betweennessCentrality;var jF=Fr({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),QF=function(t){return jF(t)},ZF=function(t,r){for(var a=0,i=0;i<r.length;i++)a+=r[i](t);return a},JF=function(t,r,a){for(var i=0;i<r;i++)t[i*r+i]=a},MT=function(t,r){for(var a,i=0;i<r;i++){a=0;for(var n=0;n<r;n++)a+=t[n*r+i];for(var s=0;s<r;s++)t[s*r+i]=t[s*r+i]/a}},tO=function(t,r,a){for(var i=new Array(a*a),n=0;n<a;n++){for(var s=0;s<a;s++)i[n*a+s]=0;for(var o=0;o<a;o++)for(var l=0;l<a;l++)i[n*a+l]+=t[n*a+o]*r[o*a+l]}return i},eO=function(t,r,a){for(var i=t.slice(0),n=1;n<a;n++)t=tO(t,i,r);return t},rO=function(t,r,a){for(var i=new Array(r*r),n=0;n<r*r;n++)i[n]=Math.pow(t[n],a);return MT(i,r),i},aO=function(t,r,a,i){for(var n=0;n<a;n++){var s=Math.round(t[n]*Math.pow(10,i))/Math.pow(10,i),o=Math.round(r[n]*Math.pow(10,i))/Math.pow(10,i);if(s!==o)return!1}return!0},iO=function(t,r,a,i){for(var n=[],s=0;s<r;s++){for(var o=[],l=0;l<r;l++)Math.round(t[s*r+l]*1e3)/1e3>0&&o.push(a[l]);o.length!==0&&n.push(i.collection(o))}return n},nO=function(t,r){for(var a=0;a<t.length;a++)if(!r[a]||t[a].id()!==r[a].id())return!1;return!0},sO=function(t){for(var r=0;r<t.length;r++)for(var a=0;a<t.length;a++)r!=a&&nO(t[r],t[a])&&t.splice(a,1);return t},Iv=function(t){for(var r=this.nodes(),a=this.edges(),i=this.cy(),n=QF(t),s={},o=0;o<r.length;o++)s[r[o].id()]=o;for(var l=r.length,u=l*l,h=new Array(u),d,f=0;f<u;f++)h[f]=0;for(var p=0;p<a.length;p++){var y=a[p],v=s[y.source().id()],m=s[y.target().id()],x=ZF(y,n.attributes);h[v*l+m]+=x,h[m*l+v]+=x}JF(h,l,n.multFactor),MT(h,l);for(var b=!0,w=0;b&&w<n.maxIterations;)b=!1,d=eO(h,l,n.expandFactor),h=rO(d,l,n.inflateFactor),aO(h,d,u,4)||(b=!0),w++;var C=iO(h,l,r,i);return C=sO(C),C},oO={markovClustering:Iv,mcl:Iv},lO=function(t){return t},FT=function(t,r){return Math.abs(r-t)},Pv=function(t,r,a){return t+FT(r,a)},Nv=function(t,r,a){return t+Math.pow(a-r,2)},cO=function(t){return Math.sqrt(t)},uO=function(t,r,a){return Math.max(t,FT(r,a))},nl=function(t,r,a,i,n){for(var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:lO,o=i,l,u,h=0;h<t;h++)l=r(h),u=a(h),o=n(o,l,u);return s(o)},Oo={euclidean:function(t,r,a){return t>=2?nl(t,r,a,0,Nv,cO):nl(t,r,a,0,Pv)},squaredEuclidean:function(t,r,a){return nl(t,r,a,0,Nv)},manhattan:function(t,r,a){return nl(t,r,a,0,Pv)},max:function(t,r,a){return nl(t,r,a,-1/0,uO)}};Oo["squared-euclidean"]=Oo.squaredEuclidean;Oo.squaredeuclidean=Oo.squaredEuclidean;function Jh(e,t,r,a,i,n){var s;return Ze(e)?s=e:s=Oo[e]||Oo.euclidean,t===0&&Ze(e)?s(i,n):s(t,r,a,i,n)}var hO=Fr({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),x1=function(t){return hO(t)},fh=function(t,r,a,i,n){var s=n!=="kMedoids",o=s?function(d){return a[d]}:function(d){return i[d](a)},l=function(f){return i[f](r)},u=a,h=r;return Jh(t,i.length,o,l,u,h)},ef=function(t,r,a){for(var i=a.length,n=new Array(i),s=new Array(i),o=new Array(r),l=null,u=0;u<i;u++)n[u]=t.min(a[u]).value,s[u]=t.max(a[u]).value;for(var h=0;h<r;h++){l=[];for(var d=0;d<i;d++)l[d]=Math.random()*(s[d]-n[d])+n[d];o[h]=l}return o},OT=function(t,r,a,i,n){for(var s=1/0,o=0,l=0;l<r.length;l++){var u=fh(a,t,r[l],i,n);u<s&&(s=u,o=l)}return o},$T=function(t,r,a){for(var i=[],n=null,s=0;s<r.length;s++)n=r[s],a[n.id()]===t&&i.push(n);return i},dO=function(t,r,a){return Math.abs(r-t)<=a},fO=function(t,r,a){for(var i=0;i<t.length;i++)for(var n=0;n<t[i].length;n++){var s=Math.abs(t[i][n]-r[i][n]);if(s>a)return!1}return!0},pO=function(t,r,a){for(var i=0;i<a;i++)if(t===r[i])return!0;return!1},Mv=function(t,r){var a=new Array(r);if(t.length<50)for(var i=0;i<r;i++){for(var n=t[Math.floor(Math.random()*t.length)];pO(n,a,i);)n=t[Math.floor(Math.random()*t.length)];a[i]=n}else for(var s=0;s<r;s++)a[s]=t[Math.floor(Math.random()*t.length)];return a},Fv=function(t,r,a){for(var i=0,n=0;n<r.length;n++)i+=fh("manhattan",r[n],t,a,"kMedoids");return i},gO=function(t){var r=this.cy(),a=this.nodes(),i=null,n=x1(t),s=new Array(n.k),o={},l;n.testMode?typeof n.testCentroids=="number"?(n.testCentroids,l=ef(a,n.k,n.attributes)):mr(n.testCentroids)==="object"?l=n.testCentroids:l=ef(a,n.k,n.attributes):l=ef(a,n.k,n.attributes);for(var u=!0,h=0;u&&h<n.maxIterations;){for(var d=0;d<a.length;d++)i=a[d],o[i.id()]=OT(i,l,n.distance,n.attributes,"kMeans");u=!1;for(var f=0;f<n.k;f++){var p=$T(f,a,o);if(p.length!==0){for(var y=n.attributes.length,v=l[f],m=new Array(y),x=new Array(y),b=0;b<y;b++){x[b]=0;for(var w=0;w<p.length;w++)i=p[w],x[b]+=n.attributes[b](i);m[b]=x[b]/p.length,dO(m[b],v[b],n.sensitivityThreshold)||(u=!0)}l[f]=m,s[f]=r.collection(p)}}h++}return s},yO=function(t){var r=this.cy(),a=this.nodes(),i=null,n=x1(t),s=new Array(n.k),o,l={},u,h=new Array(n.k);n.testMode?typeof n.testCentroids=="number"||(mr(n.testCentroids)==="object"?o=n.testCentroids:o=Mv(a,n.k)):o=Mv(a,n.k);for(var d=!0,f=0;d&&f<n.maxIterations;){for(var p=0;p<a.length;p++)i=a[p],l[i.id()]=OT(i,o,n.distance,n.attributes,"kMedoids");d=!1;for(var y=0;y<o.length;y++){var v=$T(y,a,l);if(v.length!==0){h[y]=Fv(o[y],v,n.attributes);for(var m=0;m<v.length;m++)u=Fv(v[m],v,n.attributes),u<h[y]&&(h[y]=u,o[y]=v[m],d=!0);s[y]=r.collection(v)}}f++}return s},vO=function(t,r,a,i,n){for(var s,o,l=0;l<r.length;l++)for(var u=0;u<t.length;u++)i[l][u]=Math.pow(a[l][u],n.m);for(var h=0;h<t.length;h++)for(var d=0;d<n.attributes.length;d++){s=0,o=0;for(var f=0;f<r.length;f++)s+=i[f][h]*n.attributes[d](r[f]),o+=i[f][h];t[h][d]=s/o}},mO=function(t,r,a,i,n){for(var s=0;s<t.length;s++)r[s]=t[s].slice();for(var o,l,u,h=2/(n.m-1),d=0;d<a.length;d++)for(var f=0;f<i.length;f++){o=0;for(var p=0;p<a.length;p++)l=fh(n.distance,i[f],a[d],n.attributes,"cmeans"),u=fh(n.distance,i[f],a[p],n.attributes,"cmeans"),o+=Math.pow(l/u,h);t[f][d]=1/o}},xO=function(t,r,a,i){for(var n=new Array(a.k),s=0;s<n.length;s++)n[s]=[];for(var o,l,u=0;u<r.length;u++){o=-1/0,l=-1;for(var h=0;h<r[0].length;h++)r[u][h]>o&&(o=r[u][h],l=h);n[l].push(t[u])}for(var d=0;d<n.length;d++)n[d]=i.collection(n[d]);return n},Ov=function(t){var r=this.cy(),a=this.nodes(),i=x1(t),n,s,o,l,u;l=new Array(a.length);for(var h=0;h<a.length;h++)l[h]=new Array(i.k);o=new Array(a.length);for(var d=0;d<a.length;d++)o[d]=new Array(i.k);for(var f=0;f<a.length;f++){for(var p=0,y=0;y<i.k;y++)o[f][y]=Math.random(),p+=o[f][y];for(var v=0;v<i.k;v++)o[f][v]=o[f][v]/p}s=new Array(i.k);for(var m=0;m<i.k;m++)s[m]=new Array(i.attributes.length);u=new Array(a.length);for(var x=0;x<a.length;x++)u[x]=new Array(i.k);for(var b=!0,w=0;b&&w<i.maxIterations;)b=!1,vO(s,a,o,u,i),mO(o,l,s,a,i),fO(o,l,i.sensitivityThreshold)||(b=!0),w++;return n=xO(a,o,i,r),{clusters:n,degreeOfMembership:o}},bO={kMeans:gO,kMedoids:yO,fuzzyCMeans:Ov,fcm:Ov},wO=Fr({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),kO={single:"min",complete:"max"},TO=function(t){var r=wO(t),a=kO[r.linkage];return a!=null&&(r.linkage=a),r},$v=function(t,r,a,i,n){for(var s=0,o=1/0,l,u=n.attributes,h=function(_,A){return Jh(n.distance,u.length,function(E){return u[E](_)},function(E){return u[E](A)},_,A)},d=0;d<t.length;d++){var f=t[d].key,p=a[f][i[f]];p<o&&(s=f,o=p)}if(n.mode==="threshold"&&o>=n.threshold||n.mode==="dendrogram"&&t.length===1)return!1;var y=r[s],v=r[i[s]],m;n.mode==="dendrogram"?m={left:y,right:v,key:y.key}:m={value:y.value.concat(v.value),key:y.key},t[y.index]=m,t.splice(v.index,1),r[y.key]=m;for(var x=0;x<t.length;x++){var b=t[x];y.key===b.key?l=1/0:n.linkage==="min"?(l=a[y.key][b.key],a[y.key][b.key]>a[v.key][b.key]&&(l=a[v.key][b.key])):n.linkage==="max"?(l=a[y.key][b.key],a[y.key][b.key]<a[v.key][b.key]&&(l=a[v.key][b.key])):n.linkage==="mean"?l=(a[y.key][b.key]*y.size+a[v.key][b.key]*v.size)/(y.size+v.size):n.mode==="dendrogram"?l=h(b.value,y.value):l=h(b.value[0],y.value[0]),a[y.key][b.key]=a[b.key][y.key]=l}for(var w=0;w<t.length;w++){var C=t[w].key;if(i[C]===y.key||i[C]===v.key){for(var T=C,k=0;k<t.length;k++){var S=t[k].key;a[C][S]<a[C][T]&&(T=S)}i[C]=T}t[w].index=w}return y.key=v.key=y.index=v.index=null,!0},ks=function(t,r,a){t&&(t.value?r.push(t.value):(t.left&&ks(t.left,r),t.right&&ks(t.right,r)))},xg=function(t,r){if(!t)return"";if(t.left&&t.right){var a=xg(t.left,r),i=xg(t.right,r),n=r.add({group:"nodes",data:{id:a+","+i}});return r.add({group:"edges",data:{source:a,target:n.id()}}),r.add({group:"edges",data:{source:i,target:n.id()}}),n.id()}else if(t.value)return t.value.id()},bg=function(t,r,a){if(!t)return[];var i=[],n=[],s=[];return r===0?(t.left&&ks(t.left,i),t.right&&ks(t.right,n),s=i.concat(n),[a.collection(s)]):r===1?t.value?[a.collection(t.value)]:(t.left&&ks(t.left,i),t.right&&ks(t.right,n),[a.collection(i),a.collection(n)]):t.value?[a.collection(t.value)]:(t.left&&(i=bg(t.left,r-1,a)),t.right&&(n=bg(t.right,r-1,a)),i.concat(n))},Vv=function(t){for(var r=this.cy(),a=this.nodes(),i=TO(t),n=i.attributes,s=function(w,C){return Jh(i.distance,n.length,function(T){return n[T](w)},function(T){return n[T](C)},w,C)},o=[],l=[],u=[],h=[],d=0;d<a.length;d++){var f={value:i.mode==="dendrogram"?a[d]:[a[d]],key:d,index:d};o[d]=f,h[d]=f,l[d]=[],u[d]=0}for(var p=0;p<o.length;p++)for(var y=0;y<=p;y++){var v=void 0;i.mode==="dendrogram"?v=p===y?1/0:s(o[p].value,o[y].value):v=p===y?1/0:s(o[p].value[0],o[y].value[0]),l[p][y]=v,l[y][p]=v,v<l[p][u[p]]&&(u[p]=y)}for(var m=$v(o,h,l,u,i);m;)m=$v(o,h,l,u,i);var x;return i.mode==="dendrogram"?(x=bg(o[0],i.dendrogramDepth,r),i.addDendrogram&&xg(o[0],r)):(x=new Array(o.length),o.forEach(function(b,w){b.key=b.index=null,x[w]=r.collection(b.value)})),x},CO={hierarchicalClustering:Vv,hca:Vv},SO=Fr({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),EO=function(t){var r=t.damping,a=t.preference;.5<=r&&r<1||Qe("Damping must range on [0.5, 1).  Got: ".concat(r));var i=["median","mean","min","max"];return i.some(function(n){return n===a})||Vt(a)||Qe("Preference must be one of [".concat(i.map(function(n){return"'".concat(n,"'")}).join(", "),"] or a number.  Got: ").concat(a)),SO(t)},_O=function(t,r,a,i){var n=function(o,l){return i[l](o)};return-Jh(t,i.length,function(s){return n(r,s)},function(s){return n(a,s)},r,a)},AO=function(t,r){var a=null;return r==="median"?a=EF(t):r==="mean"?a=SF(t):r==="min"?a=TF(t):r==="max"?a=CF(t):a=r,a},LO=function(t,r,a){for(var i=[],n=0;n<t;n++)r[n*t+n]+a[n*t+n]>0&&i.push(n);return i},zv=function(t,r,a){for(var i=[],n=0;n<t;n++){for(var s=-1,o=-1/0,l=0;l<a.length;l++){var u=a[l];r[n*t+u]>o&&(s=u,o=r[n*t+u])}s>0&&i.push(s)}for(var h=0;h<a.length;h++)i[a[h]]=a[h];return i},DO=function(t,r,a){for(var i=zv(t,r,a),n=0;n<a.length;n++){for(var s=[],o=0;o<i.length;o++)i[o]===a[n]&&s.push(o);for(var l=-1,u=-1/0,h=0;h<s.length;h++){for(var d=0,f=0;f<s.length;f++)d+=r[s[f]*t+s[h]];d>u&&(l=h,u=d)}a[n]=s[l]}return i=zv(t,r,a),i},qv=function(t){for(var r=this.cy(),a=this.nodes(),i=EO(t),n={},s=0;s<a.length;s++)n[a[s].id()]=s;var o,l,u,h,d,f;o=a.length,l=o*o,u=new Array(l);for(var p=0;p<l;p++)u[p]=-1/0;for(var y=0;y<o;y++)for(var v=0;v<o;v++)y!==v&&(u[y*o+v]=_O(i.distance,a[y],a[v],i.attributes));h=AO(u,i.preference);for(var m=0;m<o;m++)u[m*o+m]=h;d=new Array(l);for(var x=0;x<l;x++)d[x]=0;f=new Array(l);for(var b=0;b<l;b++)f[b]=0;for(var w=new Array(o),C=new Array(o),T=new Array(o),k=0;k<o;k++)w[k]=0,C[k]=0,T[k]=0;for(var S=new Array(o*i.minIterations),L=0;L<S.length;L++)S[L]=0;var _;for(_=0;_<i.maxIterations;_++){for(var A=0;A<o;A++){for(var E=-1/0,D=-1/0,R=-1,O=0,P=0;P<o;P++)w[P]=d[A*o+P],O=f[A*o+P]+u[A*o+P],O>=E?(D=E,E=O,R=P):O>D&&(D=O);for(var $=0;$<o;$++)d[A*o+$]=(1-i.damping)*(u[A*o+$]-E)+i.damping*w[$];d[A*o+R]=(1-i.damping)*(u[A*o+R]-D)+i.damping*w[R]}for(var M=0;M<o;M++){for(var I=0,F=0;F<o;F++)w[F]=f[F*o+M],C[F]=Math.max(0,d[F*o+M]),I+=C[F];I-=C[M],C[M]=d[M*o+M],I+=C[M];for(var V=0;V<o;V++)f[V*o+M]=(1-i.damping)*Math.min(0,I-C[V])+i.damping*w[V];f[M*o+M]=(1-i.damping)*(I-C[M])+i.damping*w[M]}for(var N=0,q=0;q<o;q++){var U=f[q*o+q]+d[q*o+q]>0?1:0;S[_%i.minIterations*o+q]=U,N+=U}if(N>0&&(_>=i.minIterations-1||_==i.maxIterations-1)){for(var X=0,lt=0;lt<o;lt++){T[lt]=0;for(var J=0;J<i.minIterations;J++)T[lt]+=S[J*o+lt];(T[lt]===0||T[lt]===i.minIterations)&&X++}if(X===o)break}}for(var ct=LO(o,d,f),yt=DO(o,u,ct),ut={},Q=0;Q<ct.length;Q++)ut[ct[Q]]=[];for(var K=0;K<a.length;K++){var j=n[a[K].id()],Y=yt[j];Y!=null&&ut[Y].push(a[K])}for(var st=new Array(ct.length),W=0;W<ct.length;W++)st[W]=r.collection(ut[ct[W]]);return st},BO={affinityPropagation:qv,ap:qv},RO=Fr({root:void 0,directed:!1}),IO={hierholzer:function(t){if(!De(t)){var r=arguments;t={root:r[0],directed:r[1]}}var a=RO(t),i=a.root,n=a.directed,s=this,o=!1,l,u,h;i&&(h=ce(i)?this.filter(i)[0].id():i[0].id());var d={},f={};n?s.forEach(function(b){var w=b.id();if(b.isNode()){var C=b.indegree(!0),T=b.outdegree(!0),k=C-T,S=T-C;k==1?l?o=!0:l=w:S==1?u?o=!0:u=w:(S>1||k>1)&&(o=!0),d[w]=[],b.outgoers().forEach(function(L){L.isEdge()&&d[w].push(L.id())})}else f[w]=[void 0,b.target().id()]}):s.forEach(function(b){var w=b.id();if(b.isNode()){var C=b.degree(!0);C%2&&(l?u?o=!0:u=w:l=w),d[w]=[],b.connectedEdges().forEach(function(T){return d[w].push(T.id())})}else f[w]=[b.source().id(),b.target().id()]});var p={found:!1,trail:void 0};if(o)return p;if(u&&l)if(n){if(h&&u!=h)return p;h=u}else{if(h&&u!=h&&l!=h)return p;h||(h=u)}else h||(h=s[0].id());var y=function(w){for(var C=w,T=[w],k,S,L;d[C].length;)k=d[C].shift(),S=f[k][0],L=f[k][1],C!=L?(d[L]=d[L].filter(function(_){return _!=k}),C=L):!n&&C!=S&&(d[S]=d[S].filter(function(_){return _!=k}),C=S),T.unshift(k),T.unshift(C);return T},v=[],m=[];for(m=y(h);m.length!=1;)d[m[0]].length==0?(v.unshift(s.getElementById(m.shift())),v.unshift(s.getElementById(m.shift()))):m=y(m.shift()).concat(m);v.unshift(s.getElementById(m.shift()));for(var x in d)if(d[x].length)return p;return p.found=!0,p.trail=this.spawn(v,!0),p}},Uc=function(){var t=this,r={},a=0,i=0,n=[],s=[],o={},l=function(f,p){for(var y=s.length-1,v=[],m=t.spawn();s[y].x!=f||s[y].y!=p;)v.push(s.pop().edge),y--;v.push(s.pop().edge),v.forEach(function(x){var b=x.connectedNodes().intersection(t);m.merge(x),b.forEach(function(w){var C=w.id(),T=w.connectedEdges().intersection(t);m.merge(w),r[C].cutVertex?m.merge(T.filter(function(k){return k.isLoop()})):m.merge(T)})}),n.push(m)},u=function(f,p,y){f===y&&(i+=1),r[p]={id:a,low:a++,cutVertex:!1};var v=t.getElementById(p).connectedEdges().intersection(t);if(v.size()===0)n.push(t.spawn(t.getElementById(p)));else{var m,x,b,w;v.forEach(function(C){m=C.source().id(),x=C.target().id(),b=m===p?x:m,b!==y&&(w=C.id(),o[w]||(o[w]=!0,s.push({x:p,y:b,edge:C})),b in r?r[p].low=Math.min(r[p].low,r[b].id):(u(f,b,p),r[p].low=Math.min(r[p].low,r[b].low),r[p].id<=r[b].low&&(r[p].cutVertex=!0,l(p,b))))})}};t.forEach(function(d){if(d.isNode()){var f=d.id();f in r||(i=0,u(f,f),r[f].cutVertex=i>1)}});var h=Object.keys(r).filter(function(d){return r[d].cutVertex}).map(function(d){return t.getElementById(d)});return{cut:t.spawn(h),components:n}},PO={hopcroftTarjanBiconnected:Uc,htbc:Uc,htb:Uc,hopcroftTarjanBiconnectedComponents:Uc},Xc=function(){var t=this,r={},a=0,i=[],n=[],s=t.spawn(t),o=function(u){n.push(u),r[u]={index:a,low:a++,explored:!1};var h=t.getElementById(u).connectedEdges().intersection(t);if(h.forEach(function(v){var m=v.target().id();m!==u&&(m in r||o(m),r[m].explored||(r[u].low=Math.min(r[u].low,r[m].low)))}),r[u].index===r[u].low){for(var d=t.spawn();;){var f=n.pop();if(d.merge(t.getElementById(f)),r[f].low=r[u].index,r[f].explored=!0,f===u)break}var p=d.edgesWith(d),y=d.merge(p);i.push(y),s=s.difference(y)}};return t.forEach(function(l){if(l.isNode()){var u=l.id();u in r||o(u)}}),{cut:s,components:i}},NO={tarjanStronglyConnected:Xc,tsc:Xc,tscc:Xc,tarjanStronglyConnectedComponents:Xc},VT={};[Jl,hF,dF,pF,yF,mF,wF,XF,Ls,Ds,mg,oO,bO,CO,BO,IO,PO,NO].forEach(function(e){pe(VT,e)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var zT=0,qT=1,WT=2,Ua=function(t){if(!(this instanceof Ua))return new Ua(t);this.id="Thenable/1.0.7",this.state=zT,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof t=="function"&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))};Ua.prototype={fulfill:function(t){return Wv(this,qT,"fulfillValue",t)},reject:function(t){return Wv(this,WT,"rejectReason",t)},then:function(t,r){var a=this,i=new Ua;return a.onFulfilled.push(Hv(t,i,"fulfill")),a.onRejected.push(Hv(r,i,"reject")),GT(a),i.proxy}};var Wv=function(t,r,a,i){return t.state===zT&&(t.state=r,t[a]=i,GT(t)),t},GT=function(t){t.state===qT?Gv(t,"onFulfilled",t.fulfillValue):t.state===WT&&Gv(t,"onRejected",t.rejectReason)},Gv=function(t,r,a){if(t[r].length!==0){var i=t[r];t[r]=[];var n=function(){for(var o=0;o<i.length;o++)i[o](a)};typeof setImmediate=="function"?setImmediate(n):setTimeout(n,0)}},Hv=function(t,r,a){return function(i){if(typeof t!="function")r[a].call(r,i);else{var n;try{n=t(i)}catch(s){r.reject(s);return}HT(r,n)}}},HT=function(t,r){if(t===r||t.proxy===r){t.reject(new TypeError("cannot resolve promise with itself"));return}var a;if(mr(r)==="object"&&r!==null||typeof r=="function")try{a=r.then}catch(n){t.reject(n);return}if(typeof a=="function"){var i=!1;try{a.call(r,function(n){i||(i=!0,n===r?t.reject(new TypeError("circular thenable chain")):HT(t,n))},function(n){i||(i=!0,t.reject(n))})}catch(n){i||t.reject(n)}return}t.fulfill(r)};Ua.all=function(e){return new Ua(function(t,r){for(var a=new Array(e.length),i=0,n=function(l,u){a[l]=u,i++,i===e.length&&t(a)},s=0;s<e.length;s++)(function(o){var l=e[o],u=l!=null&&l.then!=null;if(u)l.then(function(d){n(o,d)},function(d){r(d)});else{var h=l;n(o,h)}})(s)})};Ua.resolve=function(e){return new Ua(function(t,r){t(e)})};Ua.reject=function(e){return new Ua(function(t,r){r(e)})};var Qo=typeof Promise<"u"?Promise:Ua,wg=function(t,r,a){var i=c1(t),n=!i,s=this._private=pe({duration:1e3},r,a);if(s.target=t,s.style=s.style||s.css,s.started=!1,s.playing=!1,s.hooked=!1,s.applying=!1,s.progress=0,s.completes=[],s.frames=[],s.complete&&Ze(s.complete)&&s.completes.push(s.complete),n){var o=t.position();s.startPosition=s.startPosition||{x:o.x,y:o.y},s.startStyle=s.startStyle||t.cy().style().getAnimationStartStyle(t,s.style)}if(i){var l=t.pan();s.startPan={x:l.x,y:l.y},s.startZoom=t.zoom()}this.length=1,this[0]=this},Yn=wg.prototype;pe(Yn,{instanceString:function(){return"animation"},hook:function(){var t=this._private;if(!t.hooked){var r,a=t.target._private.animation;t.queue?r=a.queue:r=a.current,r.push(this),ma(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this},play:function(){var t=this._private;return t.progress===1&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var t=this._private;return t.playing=!1,t.started=!1,this},stop:function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var r=this._private;return t===void 0?r.progress*r.duration:this.progress(t/r.duration)},progress:function(t){var r=this._private,a=r.playing;return t===void 0?r.progress:(a&&this.pause(),r.progress=t,r.started=!1,a&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var t=this._private,r=t.playing;r&&this.pause(),t.progress=1-t.progress,t.started=!1;var a=function(u,h){var d=t[u];d!=null&&(t[u]=t[h],t[h]=d)};if(a("zoom","startZoom"),a("pan","startPan"),a("position","startPosition"),t.style)for(var i=0;i<t.style.length;i++){var n=t.style[i],s=n.name,o=t.startStyle[s];t.startStyle[s]=n,t.style[i]=o}return r&&this.play(),this},promise:function(t){var r=this._private,a;switch(t){case"frame":a=r.frames;break;default:case"complete":case"completed":a=r.completes}return new Qo(function(i,n){a.push(function(){i()})})}});Yn.complete=Yn.completed;Yn.run=Yn.play;Yn.running=Yn.playing;var MO={animated:function(){return function(){var r=this,a=r.length!==void 0,i=a?r:[r],n=this._private.cy||this;if(!n.styleEnabled())return!1;var s=i[0];if(s)return s._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,a=r.length!==void 0,i=a?r:[r],n=this._private.cy||this;if(!n.styleEnabled())return this;for(var s=0;s<i.length;s++){var o=i[s];o._private.animation.queue=[]}return this}},delay:function(){return function(r,a){var i=this._private.cy||this;return i.styleEnabled()?this.animate({delay:r,duration:r,complete:a}):this}},delayAnimation:function(){return function(r,a){var i=this._private.cy||this;return i.styleEnabled()?this.animation({delay:r,duration:r,complete:a}):this}},animation:function(){return function(r,a){var i=this,n=i.length!==void 0,s=n?i:[i],o=this._private.cy||this,l=!n,u=!l;if(!o.styleEnabled())return this;var h=o.style();r=pe({},r,a);var d=Object.keys(r).length===0;if(d)return new wg(s[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(u&&(r.style=h.getPropsList(r.style||r.css),r.css=void 0),u&&r.renderedPosition!=null){var f=r.renderedPosition,p=o.pan(),y=o.zoom();r.position=BT(f,y,p)}if(l&&r.panBy!=null){var v=r.panBy,m=o.pan();r.pan={x:m.x+v.x,y:m.y+v.y}}var x=r.center||r.centre;if(l&&x!=null){var b=o.getCenterPan(x.eles,r.zoom);b!=null&&(r.pan=b)}if(l&&r.fit!=null){var w=r.fit,C=o.getFitViewport(w.eles||w.boundingBox,w.padding);C!=null&&(r.pan=C.pan,r.zoom=C.zoom)}if(l&&De(r.zoom)){var T=o.getZoomedViewport(r.zoom);T!=null?(T.zoomed&&(r.zoom=T.zoom),T.panned&&(r.pan=T.pan)):r.zoom=null}return new wg(s[0],r)}},animate:function(){return function(r,a){var i=this,n=i.length!==void 0,s=n?i:[i],o=this._private.cy||this;if(!o.styleEnabled())return this;a&&(r=pe({},r,a));for(var l=0;l<s.length;l++){var u=s[l],h=u.animated()&&(r.queue===void 0||r.queue),d=u.animation(r,h?{queue:!0}:void 0);d.play()}return this}},stop:function(){return function(r,a){var i=this,n=i.length!==void 0,s=n?i:[i],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var l=0;l<s.length;l++){for(var u=s[l],h=u._private,d=h.animation.current,f=0;f<d.length;f++){var p=d[f],y=p._private;a&&(y.duration=0)}r&&(h.animation.queue=[]),a||(h.animation.current=[])}return o.notify("draw"),this}}},rf,Yv;function td(){if(Yv)return rf;Yv=1;var e=Array.isArray;return rf=e,rf}var af,Uv;function FO(){if(Uv)return af;Uv=1;var e=td(),t=Cc(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function i(n,s){if(e(n))return!1;var o=typeof n;return o=="number"||o=="symbol"||o=="boolean"||n==null||t(n)?!0:a.test(n)||!r.test(n)||s!=null&&n in Object(s)}return af=i,af}var nf,Xv;function OO(){if(Xv)return nf;Xv=1;var e=kT(),t=Tc(),r="[object AsyncFunction]",a="[object Function]",i="[object GeneratorFunction]",n="[object Proxy]";function s(o){if(!t(o))return!1;var l=e(o);return l==a||l==i||l==r||l==n}return nf=s,nf}var sf,Kv;function $O(){if(Kv)return sf;Kv=1;var e=jh(),t=e["__core-js_shared__"];return sf=t,sf}var of,jv;function VO(){if(jv)return of;jv=1;var e=$O(),t=function(){var a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function r(a){return!!t&&t in a}return of=r,of}var lf,Qv;function zO(){if(Qv)return lf;Qv=1;var e=Function.prototype,t=e.toString;function r(a){if(a!=null){try{return t.call(a)}catch{}try{return a+""}catch{}}return""}return lf=r,lf}var cf,Zv;function qO(){if(Zv)return cf;Zv=1;var e=OO(),t=VO(),r=Tc(),a=zO(),i=/[\\^$.*+?()[\]{}|]/g,n=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,l=s.toString,u=o.hasOwnProperty,h=RegExp("^"+l.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!r(f)||t(f))return!1;var p=e(f)?h:n;return p.test(a(f))}return cf=d,cf}var uf,Jv;function WO(){if(Jv)return uf;Jv=1;function e(t,r){return t==null?void 0:t[r]}return uf=e,uf}var hf,tm;function b1(){if(tm)return hf;tm=1;var e=qO(),t=WO();function r(a,i){var n=t(a,i);return e(n)?n:void 0}return hf=r,hf}var df,em;function ed(){if(em)return df;em=1;var e=b1(),t=e(Object,"create");return df=t,df}var ff,rm;function GO(){if(rm)return ff;rm=1;var e=ed();function t(){this.__data__=e?e(null):{},this.size=0}return ff=t,ff}var pf,am;function HO(){if(am)return pf;am=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return pf=e,pf}var gf,im;function YO(){if(im)return gf;im=1;var e=ed(),t="__lodash_hash_undefined__",r=Object.prototype,a=r.hasOwnProperty;function i(n){var s=this.__data__;if(e){var o=s[n];return o===t?void 0:o}return a.call(s,n)?s[n]:void 0}return gf=i,gf}var yf,nm;function UO(){if(nm)return yf;nm=1;var e=ed(),t=Object.prototype,r=t.hasOwnProperty;function a(i){var n=this.__data__;return e?n[i]!==void 0:r.call(n,i)}return yf=a,yf}var vf,sm;function XO(){if(sm)return vf;sm=1;var e=ed(),t="__lodash_hash_undefined__";function r(a,i){var n=this.__data__;return this.size+=this.has(a)?0:1,n[a]=e&&i===void 0?t:i,this}return vf=r,vf}var mf,om;function KO(){if(om)return mf;om=1;var e=GO(),t=HO(),r=YO(),a=UO(),i=XO();function n(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return n.prototype.clear=e,n.prototype.delete=t,n.prototype.get=r,n.prototype.has=a,n.prototype.set=i,mf=n,mf}var xf,lm;function jO(){if(lm)return xf;lm=1;function e(){this.__data__=[],this.size=0}return xf=e,xf}var bf,cm;function YT(){if(cm)return bf;cm=1;function e(t,r){return t===r||t!==t&&r!==r}return bf=e,bf}var wf,um;function rd(){if(um)return wf;um=1;var e=YT();function t(r,a){for(var i=r.length;i--;)if(e(r[i][0],a))return i;return-1}return wf=t,wf}var kf,hm;function QO(){if(hm)return kf;hm=1;var e=rd(),t=Array.prototype,r=t.splice;function a(i){var n=this.__data__,s=e(n,i);if(s<0)return!1;var o=n.length-1;return s==o?n.pop():r.call(n,s,1),--this.size,!0}return kf=a,kf}var Tf,dm;function ZO(){if(dm)return Tf;dm=1;var e=rd();function t(r){var a=this.__data__,i=e(a,r);return i<0?void 0:a[i][1]}return Tf=t,Tf}var Cf,fm;function JO(){if(fm)return Cf;fm=1;var e=rd();function t(r){return e(this.__data__,r)>-1}return Cf=t,Cf}var Sf,pm;function t$(){if(pm)return Sf;pm=1;var e=rd();function t(r,a){var i=this.__data__,n=e(i,r);return n<0?(++this.size,i.push([r,a])):i[n][1]=a,this}return Sf=t,Sf}var Ef,gm;function e$(){if(gm)return Ef;gm=1;var e=jO(),t=QO(),r=ZO(),a=JO(),i=t$();function n(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return n.prototype.clear=e,n.prototype.delete=t,n.prototype.get=r,n.prototype.has=a,n.prototype.set=i,Ef=n,Ef}var _f,ym;function r$(){if(ym)return _f;ym=1;var e=b1(),t=jh(),r=e(t,"Map");return _f=r,_f}var Af,vm;function a$(){if(vm)return Af;vm=1;var e=KO(),t=e$(),r=r$();function a(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return Af=a,Af}var Lf,mm;function i$(){if(mm)return Lf;mm=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return Lf=e,Lf}var Df,xm;function ad(){if(xm)return Df;xm=1;var e=i$();function t(r,a){var i=r.__data__;return e(a)?i[typeof a=="string"?"string":"hash"]:i.map}return Df=t,Df}var Bf,bm;function n$(){if(bm)return Bf;bm=1;var e=ad();function t(r){var a=e(this,r).delete(r);return this.size-=a?1:0,a}return Bf=t,Bf}var Rf,wm;function s$(){if(wm)return Rf;wm=1;var e=ad();function t(r){return e(this,r).get(r)}return Rf=t,Rf}var If,km;function o$(){if(km)return If;km=1;var e=ad();function t(r){return e(this,r).has(r)}return If=t,If}var Pf,Tm;function l$(){if(Tm)return Pf;Tm=1;var e=ad();function t(r,a){var i=e(this,r),n=i.size;return i.set(r,a),this.size+=i.size==n?0:1,this}return Pf=t,Pf}var Nf,Cm;function c$(){if(Cm)return Nf;Cm=1;var e=a$(),t=n$(),r=s$(),a=o$(),i=l$();function n(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return n.prototype.clear=e,n.prototype.delete=t,n.prototype.get=r,n.prototype.has=a,n.prototype.set=i,Nf=n,Nf}var Mf,Sm;function u$(){if(Sm)return Mf;Sm=1;var e=c$(),t="Expected a function";function r(a,i){if(typeof a!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var n=function(){var s=arguments,o=i?i.apply(this,s):s[0],l=n.cache;if(l.has(o))return l.get(o);var u=a.apply(this,s);return n.cache=l.set(o,u)||l,u};return n.cache=new(r.Cache||e),n}return r.Cache=e,Mf=r,Mf}var Ff,Em;function h$(){if(Em)return Ff;Em=1;var e=u$(),t=500;function r(a){var i=e(a,function(s){return n.size===t&&n.clear(),s}),n=i.cache;return i}return Ff=r,Ff}var Of,_m;function UT(){if(_m)return Of;_m=1;var e=h$(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,a=e(function(i){var n=[];return i.charCodeAt(0)===46&&n.push(""),i.replace(t,function(s,o,l,u){n.push(l?u.replace(r,"$1"):o||s)}),n});return Of=a,Of}var $f,Am;function XT(){if(Am)return $f;Am=1;function e(t,r){for(var a=-1,i=t==null?0:t.length,n=Array(i);++a<i;)n[a]=r(t[a],a,t);return n}return $f=e,$f}var Vf,Lm;function d$(){if(Lm)return Vf;Lm=1;var e=h1(),t=XT(),r=td(),a=Cc(),i=e?e.prototype:void 0,n=i?i.toString:void 0;function s(o){if(typeof o=="string")return o;if(r(o))return t(o,s)+"";if(a(o))return n?n.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return Vf=s,Vf}var zf,Dm;function KT(){if(Dm)return zf;Dm=1;var e=d$();function t(r){return r==null?"":e(r)}return zf=t,zf}var qf,Bm;function jT(){if(Bm)return qf;Bm=1;var e=td(),t=FO(),r=UT(),a=KT();function i(n,s){return e(n)?n:t(n,s)?[n]:r(a(n))}return qf=i,qf}var Wf,Rm;function w1(){if(Rm)return Wf;Rm=1;var e=Cc();function t(r){if(typeof r=="string"||e(r))return r;var a=r+"";return a=="0"&&1/r==-1/0?"-0":a}return Wf=t,Wf}var Gf,Im;function f$(){if(Im)return Gf;Im=1;var e=jT(),t=w1();function r(a,i){i=e(i,a);for(var n=0,s=i.length;a!=null&&n<s;)a=a[t(i[n++])];return n&&n==s?a:void 0}return Gf=r,Gf}var Hf,Pm;function p$(){if(Pm)return Hf;Pm=1;var e=f$();function t(r,a,i){var n=r==null?void 0:e(r,a);return n===void 0?i:n}return Hf=t,Hf}var g$=p$(),y$=kc(g$),Yf,Nm;function v$(){if(Nm)return Yf;Nm=1;var e=b1(),t=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}}();return Yf=t,Yf}var Uf,Mm;function m$(){if(Mm)return Uf;Mm=1;var e=v$();function t(r,a,i){a=="__proto__"&&e?e(r,a,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[a]=i}return Uf=t,Uf}var Xf,Fm;function x$(){if(Fm)return Xf;Fm=1;var e=m$(),t=YT(),r=Object.prototype,a=r.hasOwnProperty;function i(n,s,o){var l=n[s];(!(a.call(n,s)&&t(l,o))||o===void 0&&!(s in n))&&e(n,s,o)}return Xf=i,Xf}var Kf,Om;function b$(){if(Om)return Kf;Om=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(a,i){var n=typeof a;return i=i??e,!!i&&(n=="number"||n!="symbol"&&t.test(a))&&a>-1&&a%1==0&&a<i}return Kf=r,Kf}var jf,$m;function w$(){if($m)return jf;$m=1;var e=x$(),t=jT(),r=b$(),a=Tc(),i=w1();function n(s,o,l,u){if(!a(s))return s;o=t(o,s);for(var h=-1,d=o.length,f=d-1,p=s;p!=null&&++h<d;){var y=i(o[h]),v=l;if(y==="__proto__"||y==="constructor"||y==="prototype")return s;if(h!=f){var m=p[y];v=u?u(m,y,p):void 0,v===void 0&&(v=a(m)?m:r(o[h+1])?[]:{})}e(p,y,v),p=p[y]}return s}return jf=n,jf}var Qf,Vm;function k$(){if(Vm)return Qf;Vm=1;var e=w$();function t(r,a,i){return r==null?r:e(r,a,i)}return Qf=t,Qf}var T$=k$(),C$=kc(T$),Zf,zm;function S$(){if(zm)return Zf;zm=1;function e(t,r){var a=-1,i=t.length;for(r||(r=Array(i));++a<i;)r[a]=t[a];return r}return Zf=e,Zf}var Jf,qm;function E$(){if(qm)return Jf;qm=1;var e=XT(),t=S$(),r=td(),a=Cc(),i=UT(),n=w1(),s=KT();function o(l){return r(l)?e(l,n):a(l)?[l]:t(i(s(l)))}return Jf=o,Jf}var _$=E$(),A$=kc(_$),L$={data:function(t){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(i){},beforeSet:function(i,n){},onSet:function(i){},canSet:function(i){return!0}};return t=pe({},r,t),function(i,n){var s=t,o=this,l=o.length!==void 0,u=l?o:[o],h=l?o[0]:o;if(ce(i)){var d=i.indexOf(".")!==-1,f=d&&A$(i);if(s.allowGetting&&n===void 0){var p;return h&&(s.beforeGet(h),f&&h._private[s.field][i]===void 0?p=y$(h._private[s.field],f):p=h._private[s.field][i]),p}else if(s.allowSetting&&n!==void 0){var y=!s.immutableKeys[i];if(y){var v=dT({},i,n);s.beforeSet(o,v);for(var m=0,x=u.length;m<x;m++){var b=u[m];s.canSet(b)&&(f&&h._private[s.field][i]===void 0?C$(b._private[s.field],f,n):b._private[s.field][i]=n)}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}}}else if(s.allowSetting&&De(i)){var w=i,C,T,k=Object.keys(w);s.beforeSet(o,w);for(var S=0;S<k.length;S++){C=k[S],T=w[C];var L=!s.immutableKeys[C];if(L)for(var _=0;_<u.length;_++){var A=u[_];s.canSet(A)&&(A._private[s.field][C]=T)}}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}else if(s.allowBinding&&Ze(i)){var E=i;o.on(s.bindingEvent,E)}else if(s.allowGetting&&i===void 0){var D;return h&&(s.beforeGet(h),D=h._private[s.field]),D}return o}},removeData:function(t){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return t=pe({},r,t),function(i){var n=t,s=this,o=s.length!==void 0,l=o?s:[s];if(ce(i)){for(var u=i.split(/\s+/),h=u.length,d=0;d<h;d++){var f=u[d];if(!Ji(f)){var p=!n.immutableKeys[f];if(p)for(var y=0,v=l.length;y<v;y++)l[y]._private[n.field][f]=void 0}}n.triggerEvent&&s[n.triggerFnName](n.event)}else if(i===void 0){for(var m=0,x=l.length;m<x;m++)for(var b=l[m]._private[n.field],w=Object.keys(b),C=0;C<w.length;C++){var T=w[C],k=!n.immutableKeys[T];k&&(b[T]=void 0)}n.triggerEvent&&s[n.triggerFnName](n.event)}return s}}},D$={eventAliasesOn:function(t){var r=t;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(a,i){var n=this,s=Array.prototype.slice.call(arguments,0);return new Qo(function(o,l){var u=function(p){n.off.apply(n,d),o(p)},h=s.concat([u]),d=h.concat([]);n.on.apply(n,h)})}}},Ie={};[MO,L$,D$].forEach(function(e){pe(Ie,e)});var B$={animate:Ie.animate(),animation:Ie.animation(),animated:Ie.animated(),clearQueue:Ie.clearQueue(),delay:Ie.delay(),delayAnimation:Ie.delayAnimation(),stop:Ie.stop()},Tu={classes:function(t){var r=this;if(t===void 0){var a=[];return r[0]._private.classes.forEach(function(y){return a.push(y)}),a}else Ge(t)||(t=(t||"").match(/\S+/g)||[]);for(var i=[],n=new jo(t),s=0;s<r.length;s++){for(var o=r[s],l=o._private,u=l.classes,h=!1,d=0;d<t.length;d++){var f=t[d],p=u.has(f);if(!p){h=!0;break}}h||(h=u.size!==t.length),h&&(l.classes=n,i.push(o))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),r},addClass:function(t){return this.toggleClass(t,!0)},hasClass:function(t){var r=this[0];return r!=null&&r._private.classes.has(t)},toggleClass:function(t,r){Ge(t)||(t=t.match(/\S+/g)||[]);for(var a=this,i=r===void 0,n=[],s=0,o=a.length;s<o;s++)for(var l=a[s],u=l._private.classes,h=!1,d=0;d<t.length;d++){var f=t[d],p=u.has(f),y=!1;r||i&&!p?(u.add(f),y=!0):(!r||i&&p)&&(u.delete(f),y=!0),!h&&y&&(n.push(l),h=!0)}return n.length>0&&this.spawn(n).updateStyle().emit("class"),a},removeClass:function(t){return this.toggleClass(t,!1)},flashClass:function(t,r){var a=this;if(r==null)r=250;else if(r===0)return a;return a.addClass(t),setTimeout(function(){a.removeClass(t)},r),a}};Tu.className=Tu.classNames=Tu.classes;var Le={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:gr,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Le.variable="(?:[\\w-.]|(?:\\\\"+Le.metaChar+"))+";Le.className="(?:[\\w-]|(?:\\\\"+Le.metaChar+"))+";Le.value=Le.string+"|"+Le.number;Le.id=Le.variable;(function(){var e,t,r;for(e=Le.comparatorOp.split("|"),r=0;r<e.length;r++)t=e[r],Le.comparatorOp+="|@"+t;for(e=Le.comparatorOp.split("|"),r=0;r<e.length;r++)t=e[r],!(t.indexOf("!")>=0)&&t!=="="&&(Le.comparatorOp+="|\\!"+t)})();var ze=function(){return{checks:[]}},Kt={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},kg=[{selector:":selected",matches:function(t){return t.selected()}},{selector:":unselected",matches:function(t){return!t.selected()}},{selector:":selectable",matches:function(t){return t.selectable()}},{selector:":unselectable",matches:function(t){return!t.selectable()}},{selector:":locked",matches:function(t){return t.locked()}},{selector:":unlocked",matches:function(t){return!t.locked()}},{selector:":visible",matches:function(t){return t.visible()}},{selector:":hidden",matches:function(t){return!t.visible()}},{selector:":transparent",matches:function(t){return t.transparent()}},{selector:":grabbed",matches:function(t){return t.grabbed()}},{selector:":free",matches:function(t){return!t.grabbed()}},{selector:":removed",matches:function(t){return t.removed()}},{selector:":inside",matches:function(t){return!t.removed()}},{selector:":grabbable",matches:function(t){return t.grabbable()}},{selector:":ungrabbable",matches:function(t){return!t.grabbable()}},{selector:":animated",matches:function(t){return t.animated()}},{selector:":unanimated",matches:function(t){return!t.animated()}},{selector:":parent",matches:function(t){return t.isParent()}},{selector:":childless",matches:function(t){return t.isChildless()}},{selector:":child",matches:function(t){return t.isChild()}},{selector:":orphan",matches:function(t){return t.isOrphan()}},{selector:":nonorphan",matches:function(t){return t.isChild()}},{selector:":compound",matches:function(t){return t.isNode()?t.isParent():t.source().isParent()||t.target().isParent()}},{selector:":loop",matches:function(t){return t.isLoop()}},{selector:":simple",matches:function(t){return t.isSimple()}},{selector:":active",matches:function(t){return t.active()}},{selector:":inactive",matches:function(t){return!t.active()}},{selector:":backgrounding",matches:function(t){return t.backgrounding()}},{selector:":nonbackgrounding",matches:function(t){return!t.backgrounding()}}].sort(function(e,t){return RM(e.selector,t.selector)}),R$=function(){for(var e={},t,r=0;r<kg.length;r++)t=kg[r],e[t.selector]=t.matches;return e}(),I$=function(t,r){return R$[t](r)},P$="("+kg.map(function(e){return e.selector}).join("|")+")",ns=function(t){return t.replace(new RegExp("\\\\("+Le.metaChar+")","g"),function(r,a){return a})},$i=function(t,r,a){t[t.length-1]=a},Tg=[{name:"group",query:!0,regex:"("+Le.group+")",populate:function(t,r,a){var i=ur(a,1),n=i[0];r.checks.push({type:Kt.GROUP,value:n==="*"?n:n+"s"})}},{name:"state",query:!0,regex:P$,populate:function(t,r,a){var i=ur(a,1),n=i[0];r.checks.push({type:Kt.STATE,value:n})}},{name:"id",query:!0,regex:"\\#("+Le.id+")",populate:function(t,r,a){var i=ur(a,1),n=i[0];r.checks.push({type:Kt.ID,value:ns(n)})}},{name:"className",query:!0,regex:"\\.("+Le.className+")",populate:function(t,r,a){var i=ur(a,1),n=i[0];r.checks.push({type:Kt.CLASS,value:ns(n)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Le.variable+")\\s*\\]",populate:function(t,r,a){var i=ur(a,1),n=i[0];r.checks.push({type:Kt.DATA_EXIST,field:ns(n)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Le.variable+")\\s*("+Le.comparatorOp+")\\s*("+Le.value+")\\s*\\]",populate:function(t,r,a){var i=ur(a,3),n=i[0],s=i[1],o=i[2],l=new RegExp("^"+Le.string+"$").exec(o)!=null;l?o=o.substring(1,o.length-1):o=parseFloat(o),r.checks.push({type:Kt.DATA_COMPARE,field:ns(n),operator:s,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Le.boolOp+")\\s*("+Le.variable+")\\s*\\]",populate:function(t,r,a){var i=ur(a,2),n=i[0],s=i[1];r.checks.push({type:Kt.DATA_BOOL,field:ns(s),operator:n})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Le.meta+")\\s*("+Le.comparatorOp+")\\s*("+Le.number+")\\s*\\]\\]",populate:function(t,r,a){var i=ur(a,3),n=i[0],s=i[1],o=i[2];r.checks.push({type:Kt.META_COMPARE,field:ns(n),operator:s,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:Le.separator,populate:function(t,r){var a=t.currentSubject,i=t.edgeCount,n=t.compoundCount,s=t[t.length-1];a!=null&&(s.subject=a,t.currentSubject=null),s.edgeCount=i,s.compoundCount=n,t.edgeCount=0,t.compoundCount=0;var o=t[t.length++]=ze();return o}},{name:"directedEdge",separator:!0,regex:Le.directedEdge,populate:function(t,r){if(t.currentSubject==null){var a=ze(),i=r,n=ze();return a.checks.push({type:Kt.DIRECTED_EDGE,source:i,target:n}),$i(t,r,a),t.edgeCount++,n}else{var s=ze(),o=r,l=ze();return s.checks.push({type:Kt.NODE_SOURCE,source:o,target:l}),$i(t,r,s),t.edgeCount++,l}}},{name:"undirectedEdge",separator:!0,regex:Le.undirectedEdge,populate:function(t,r){if(t.currentSubject==null){var a=ze(),i=r,n=ze();return a.checks.push({type:Kt.UNDIRECTED_EDGE,nodes:[i,n]}),$i(t,r,a),t.edgeCount++,n}else{var s=ze(),o=r,l=ze();return s.checks.push({type:Kt.NODE_NEIGHBOR,node:o,neighbor:l}),$i(t,r,s),l}}},{name:"child",separator:!0,regex:Le.child,populate:function(t,r){if(t.currentSubject==null){var a=ze(),i=ze(),n=t[t.length-1];return a.checks.push({type:Kt.CHILD,parent:n,child:i}),$i(t,r,a),t.compoundCount++,i}else if(t.currentSubject===r){var s=ze(),o=t[t.length-1],l=ze(),u=ze(),h=ze(),d=ze();return s.checks.push({type:Kt.COMPOUND_SPLIT,left:o,right:l,subject:u}),u.checks=r.checks,r.checks=[{type:Kt.TRUE}],d.checks.push({type:Kt.TRUE}),l.checks.push({type:Kt.PARENT,parent:d,child:h}),$i(t,o,s),t.currentSubject=u,t.compoundCount++,h}else{var f=ze(),p=ze(),y=[{type:Kt.PARENT,parent:f,child:p}];return f.checks=r.checks,r.checks=y,t.compoundCount++,p}}},{name:"descendant",separator:!0,regex:Le.descendant,populate:function(t,r){if(t.currentSubject==null){var a=ze(),i=ze(),n=t[t.length-1];return a.checks.push({type:Kt.DESCENDANT,ancestor:n,descendant:i}),$i(t,r,a),t.compoundCount++,i}else if(t.currentSubject===r){var s=ze(),o=t[t.length-1],l=ze(),u=ze(),h=ze(),d=ze();return s.checks.push({type:Kt.COMPOUND_SPLIT,left:o,right:l,subject:u}),u.checks=r.checks,r.checks=[{type:Kt.TRUE}],d.checks.push({type:Kt.TRUE}),l.checks.push({type:Kt.ANCESTOR,ancestor:d,descendant:h}),$i(t,o,s),t.currentSubject=u,t.compoundCount++,h}else{var f=ze(),p=ze(),y=[{type:Kt.ANCESTOR,ancestor:f,descendant:p}];return f.checks=r.checks,r.checks=y,t.compoundCount++,p}}},{name:"subject",modifier:!0,regex:Le.subject,populate:function(t,r){if(t.currentSubject!=null&&t.currentSubject!==r)return Pe("Redefinition of subject in selector `"+t.toString()+"`"),!1;t.currentSubject=r;var a=t[t.length-1],i=a.checks[0],n=i==null?null:i.type;n===Kt.DIRECTED_EDGE?i.type=Kt.NODE_TARGET:n===Kt.UNDIRECTED_EDGE&&(i.type=Kt.NODE_NEIGHBOR,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}];Tg.forEach(function(e){return e.regexObj=new RegExp("^"+e.regex)});var N$=function(t){for(var r,a,i,n=0;n<Tg.length;n++){var s=Tg[n],o=s.name,l=t.match(s.regexObj);if(l!=null){a=l,r=s,i=o;var u=l[0];t=t.substring(u.length);break}}return{expr:r,match:a,name:i,remaining:t}},M$=function(t){var r=t.match(/^\s+/);if(r){var a=r[0];t=t.substring(a.length)}return t},F$=function(t){var r=this,a=r.inputText=t,i=r[0]=ze();for(r.length=1,a=M$(a);;){var n=N$(a);if(n.expr==null)return Pe("The selector `"+t+"`is invalid"),!1;var s=n.match.slice(1),o=n.expr.populate(r,i,s);if(o===!1)return!1;if(o!=null&&(i=o),a=n.remaining,a.match(/^\s*$/))break}var l=r[r.length-1];r.currentSubject!=null&&(l.subject=r.currentSubject),l.edgeCount=r.edgeCount,l.compoundCount=r.compoundCount;for(var u=0;u<r.length;u++){var h=r[u];if(h.compoundCount>0&&h.edgeCount>0)return Pe("The selector `"+t+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(h.edgeCount>1)return Pe("The selector `"+t+"` is invalid because it uses multiple edge selectors"),!1;h.edgeCount===1&&Pe("The selector `"+t+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},O$=function(){if(this.toStringCache!=null)return this.toStringCache;for(var t=function(h){return h??""},r=function(h){return ce(h)?'"'+h+'"':t(h)},a=function(h){return" "+h+" "},i=function(h,d){var f=h.type,p=h.value;switch(f){case Kt.GROUP:{var y=t(p);return y.substring(0,y.length-1)}case Kt.DATA_COMPARE:{var v=h.field,m=h.operator;return"["+v+a(t(m))+r(p)+"]"}case Kt.DATA_BOOL:{var x=h.operator,b=h.field;return"["+t(x)+b+"]"}case Kt.DATA_EXIST:{var w=h.field;return"["+w+"]"}case Kt.META_COMPARE:{var C=h.operator,T=h.field;return"[["+T+a(t(C))+r(p)+"]]"}case Kt.STATE:return p;case Kt.ID:return"#"+p;case Kt.CLASS:return"."+p;case Kt.PARENT:case Kt.CHILD:return n(h.parent,d)+a(">")+n(h.child,d);case Kt.ANCESTOR:case Kt.DESCENDANT:return n(h.ancestor,d)+" "+n(h.descendant,d);case Kt.COMPOUND_SPLIT:{var k=n(h.left,d),S=n(h.subject,d),L=n(h.right,d);return k+(k.length>0?" ":"")+S+L}case Kt.TRUE:return""}},n=function(h,d){return h.checks.reduce(function(f,p,y){return f+(d===h&&y===0?"$":"")+i(p,d)},"")},s="",o=0;o<this.length;o++){var l=this[o];s+=n(l,l.subject),this.length>1&&o<this.length-1&&(s+=", ")}return this.toStringCache=s,s},$$={parse:F$,toString:O$},QT=function(t,r,a){var i,n=ce(t),s=Vt(t),o=ce(a),l,u,h=!1,d=!1,f=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),d=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),h=!0),(n||o||h)&&(l=!n&&!s?"":""+t,u=""+a),h&&(t=l=l.toLowerCase(),a=u=u.toLowerCase()),r){case"*=":i=l.indexOf(u)>=0;break;case"$=":i=l.indexOf(u,l.length-u.length)>=0;break;case"^=":i=l.indexOf(u)===0;break;case"=":i=t===a;break;case">":f=!0,i=t>a;break;case">=":f=!0,i=t>=a;break;case"<":f=!0,i=t<a;break;case"<=":f=!0,i=t<=a;break;default:i=!1;break}return d&&(t!=null||!f)&&(i=!i),i},V$=function(t,r){switch(r){case"?":return!!t;case"!":return!t;case"^":return t===void 0}},z$=function(t){return t!==void 0},k1=function(t,r){return t.data(r)},q$=function(t,r){return t[r]()},tr=[],Ue=function(t,r){return t.checks.every(function(a){return tr[a.type](a,r)})};tr[Kt.GROUP]=function(e,t){var r=e.value;return r==="*"||r===t.group()};tr[Kt.STATE]=function(e,t){var r=e.value;return I$(r,t)};tr[Kt.ID]=function(e,t){var r=e.value;return t.id()===r};tr[Kt.CLASS]=function(e,t){var r=e.value;return t.hasClass(r)};tr[Kt.META_COMPARE]=function(e,t){var r=e.field,a=e.operator,i=e.value;return QT(q$(t,r),a,i)};tr[Kt.DATA_COMPARE]=function(e,t){var r=e.field,a=e.operator,i=e.value;return QT(k1(t,r),a,i)};tr[Kt.DATA_BOOL]=function(e,t){var r=e.field,a=e.operator;return V$(k1(t,r),a)};tr[Kt.DATA_EXIST]=function(e,t){var r=e.field;return e.operator,z$(k1(t,r))};tr[Kt.UNDIRECTED_EDGE]=function(e,t){var r=e.nodes[0],a=e.nodes[1],i=t.source(),n=t.target();return Ue(r,i)&&Ue(a,n)||Ue(a,i)&&Ue(r,n)};tr[Kt.NODE_NEIGHBOR]=function(e,t){return Ue(e.node,t)&&t.neighborhood().some(function(r){return r.isNode()&&Ue(e.neighbor,r)})};tr[Kt.DIRECTED_EDGE]=function(e,t){return Ue(e.source,t.source())&&Ue(e.target,t.target())};tr[Kt.NODE_SOURCE]=function(e,t){return Ue(e.source,t)&&t.outgoers().some(function(r){return r.isNode()&&Ue(e.target,r)})};tr[Kt.NODE_TARGET]=function(e,t){return Ue(e.target,t)&&t.incomers().some(function(r){return r.isNode()&&Ue(e.source,r)})};tr[Kt.CHILD]=function(e,t){return Ue(e.child,t)&&Ue(e.parent,t.parent())};tr[Kt.PARENT]=function(e,t){return Ue(e.parent,t)&&t.children().some(function(r){return Ue(e.child,r)})};tr[Kt.DESCENDANT]=function(e,t){return Ue(e.descendant,t)&&t.ancestors().some(function(r){return Ue(e.ancestor,r)})};tr[Kt.ANCESTOR]=function(e,t){return Ue(e.ancestor,t)&&t.descendants().some(function(r){return Ue(e.descendant,r)})};tr[Kt.COMPOUND_SPLIT]=function(e,t){return Ue(e.subject,t)&&Ue(e.left,t)&&Ue(e.right,t)};tr[Kt.TRUE]=function(){return!0};tr[Kt.COLLECTION]=function(e,t){var r=e.value;return r.has(t)};tr[Kt.FILTER]=function(e,t){var r=e.value;return r(t)};var W$=function(t){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===Kt.ID)return t.getElementById(r[0].checks[0].value).collection();var a=function(n){for(var s=0;s<r.length;s++){var o=r[s];if(Ue(o,n))return!0}return!1};return r.text()==null&&(a=function(){return!0}),t.filter(a)},G$=function(t){for(var r=this,a=0;a<r.length;a++){var i=r[a];if(Ue(i,t))return!0}return!1},H$={matches:G$,filter:W$},rn=function(t){this.inputText=t,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,t==null||ce(t)&&t.match(/^\s*$/)||(ma(t)?this.addQuery({checks:[{type:Kt.COLLECTION,value:t.collection()}]}):Ze(t)?this.addQuery({checks:[{type:Kt.FILTER,value:t}]}):ce(t)?this.parse(t)||(this.invalid=!0):Qe("A selector must be created from a string; found "))},an=rn.prototype;[$$,H$].forEach(function(e){return pe(an,e)});an.text=function(){return this.inputText};an.size=function(){return this.length};an.eq=function(e){return this[e]};an.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()};an.addQuery=function(e){this[this.length++]=e};an.selector=an.toString;var Ki={allAre:function(t){var r=new rn(t);return this.every(function(a){return r.matches(a)})},is:function(t){var r=new rn(t);return this.some(function(a){return r.matches(a)})},some:function(t,r){for(var a=0;a<this.length;a++){var i=r?t.apply(r,[this[a],a,this]):t(this[a],a,this);if(i)return!0}return!1},every:function(t,r){for(var a=0;a<this.length;a++){var i=r?t.apply(r,[this[a],a,this]):t(this[a],a,this);if(!i)return!1}return!0},same:function(t){if(this===t)return!0;t=this.cy().collection(t);var r=this.length,a=t.length;return r!==a?!1:r===1?this[0]===t[0]:this.every(function(i){return t.hasElementWithId(i.id())})},anySame:function(t){return t=this.cy().collection(t),this.some(function(r){return t.hasElementWithId(r.id())})},allAreNeighbors:function(t){t=this.cy().collection(t);var r=this.neighborhood();return t.every(function(a){return r.hasElementWithId(a.id())})},contains:function(t){t=this.cy().collection(t);var r=this;return t.every(function(a){return r.hasElementWithId(a.id())})}};Ki.allAreNeighbours=Ki.allAreNeighbors;Ki.has=Ki.contains;Ki.equal=Ki.equals=Ki.same;var Ra=function(t,r){return function(i,n,s,o){var l=i,u=this,h;if(l==null?h="":ma(l)&&l.length===1&&(h=l.id()),u.length===1&&h){var d=u[0]._private,f=d.traversalCache=d.traversalCache||{},p=f[r]=f[r]||[],y=Gn(h),v=p[y];return v||(p[y]=t.call(u,i,n,s,o))}else return t.call(u,i,n,s,o)}},$o={parent:function(t){var r=[];if(this.length===1){var a=this[0]._private.parent;if(a)return a}for(var i=0;i<this.length;i++){var n=this[i],s=n._private.parent;s&&r.push(s)}return this.spawn(r,!0).filter(t)},parents:function(t){for(var r=[],a=this.parent();a.nonempty();){for(var i=0;i<a.length;i++){var n=a[i];r.push(n)}a=a.parent()}return this.spawn(r,!0).filter(t)},commonAncestors:function(t){for(var r,a=0;a<this.length;a++){var i=this[a],n=i.parents();r=r||n,r=r.intersect(n)}return r.filter(t)},orphans:function(t){return this.stdFilter(function(r){return r.isOrphan()}).filter(t)},nonorphans:function(t){return this.stdFilter(function(r){return r.isChild()}).filter(t)},children:Ra(function(e){for(var t=[],r=0;r<this.length;r++)for(var a=this[r],i=a._private.children,n=0;n<i.length;n++)t.push(i[n]);return this.spawn(t,!0).filter(e)},"children"),siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];if(t)return t.isNode()&&t._private.children.length!==0},isChildless:function(){var t=this[0];if(t)return t.isNode()&&t._private.children.length===0},isChild:function(){var t=this[0];if(t)return t.isNode()&&t._private.parent!=null},isOrphan:function(){var t=this[0];if(t)return t.isNode()&&t._private.parent==null},descendants:function(t){var r=[];function a(i){for(var n=0;n<i.length;n++){var s=i[n];r.push(s),s.children().nonempty()&&a(s.children())}}return a(this.children()),this.spawn(r,!0).filter(t)}};function T1(e,t,r,a){for(var i=[],n=new jo,s=e.cy(),o=s.hasCompoundNodes(),l=0;l<e.length;l++){var u=e[l];r?i.push(u):o&&a(i,n,u)}for(;i.length>0;){var h=i.shift();t(h),n.add(h.id()),o&&a(i,n,h)}return e}function ZT(e,t,r){if(r.isParent())for(var a=r._private.children,i=0;i<a.length;i++){var n=a[i];t.has(n.id())||e.push(n)}}$o.forEachDown=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return T1(this,e,t,ZT)};function JT(e,t,r){if(r.isChild()){var a=r._private.parent;t.has(a.id())||e.push(a)}}$o.forEachUp=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return T1(this,e,t,JT)};function Y$(e,t,r){JT(e,t,r),ZT(e,t,r)}$o.forEachUpAndDown=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return T1(this,e,t,Y$)};$o.ancestors=$o.parents;var rc,tC;rc=tC={data:Ie.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Ie.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Ie.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ie.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Ie.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Ie.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];if(t)return t._private.data.id}};rc.attr=rc.data;rc.removeAttr=rc.removeData;var U$=tC,id={};function tp(e){return function(t){var r=this;if(t===void 0&&(t=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var a=0,i=r[0],n=i._private.edges,s=0;s<n.length;s++){var o=n[s];!t&&o.isLoop()||(a+=e(i,o))}return a}else return}}pe(id,{degree:tp(function(e,t){return t.source().same(t.target())?2:1}),indegree:tp(function(e,t){return t.target().same(e)?1:0}),outdegree:tp(function(e,t){return t.source().same(e)?1:0})});function ss(e,t){return function(r){for(var a,i=this.nodes(),n=0;n<i.length;n++){var s=i[n],o=s[e](r);o!==void 0&&(a===void 0||t(o,a))&&(a=o)}return a}}pe(id,{minDegree:ss("degree",function(e,t){return e<t}),maxDegree:ss("degree",function(e,t){return e>t}),minIndegree:ss("indegree",function(e,t){return e<t}),maxIndegree:ss("indegree",function(e,t){return e>t}),minOutdegree:ss("outdegree",function(e,t){return e<t}),maxOutdegree:ss("outdegree",function(e,t){return e>t})});pe(id,{totalDegree:function(t){for(var r=0,a=this.nodes(),i=0;i<a.length;i++)r+=a[i].degree(t);return r}});var Wa,eC,rC=function(t,r,a){for(var i=0;i<t.length;i++){var n=t[i];if(!n.locked()){var s=n._private.position,o={x:r.x!=null?r.x-s.x:0,y:r.y!=null?r.y-s.y:0};n.isParent()&&!(o.x===0&&o.y===0)&&n.children().shift(o,a),n.dirtyBoundingBoxCache()}}},Wm={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(t){t.updateCompoundBounds()},beforeSet:function(t,r){rC(t,r,!1)},onSet:function(t){t.dirtyCompoundBoundsCache()},canSet:function(t){return!t.locked()}};Wa=eC={position:Ie.data(Wm),silentPosition:Ie.data(pe({},Wm,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(t,r){rC(t,r,!0)},onSet:function(t){t.dirtyCompoundBoundsCache()}})),positions:function(t,r){if(De(t))r?this.silentPosition(t):this.position(t);else if(Ze(t)){var a=t,i=this.cy();i.startBatch();for(var n=0;n<this.length;n++){var s=this[n],o=void 0;(o=a(s,n))&&(r?s.silentPosition(o):s.position(o))}i.endBatch()}return this},silentPositions:function(t){return this.positions(t,!0)},shift:function(t,r,a){var i;if(De(t)?(i={x:Vt(t.x)?t.x:0,y:Vt(t.y)?t.y:0},a=r):ce(t)&&Vt(r)&&(i={x:0,y:0},i[t]=r),i!=null){var n=this.cy();n.startBatch();for(var s=0;s<this.length;s++){var o=this[s];if(!(n.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var l=o.position(),u={x:l.x+i.x,y:l.y+i.y};a?o.silentPosition(u):o.position(u)}}n.endBatch()}return this},silentShift:function(t,r){return De(t)?this.shift(t,!0):ce(t)&&Vt(r)&&this.shift(t,r,!0),this},renderedPosition:function(t,r){var a=this[0],i=this.cy(),n=i.zoom(),s=i.pan(),o=De(t)?t:void 0,l=o!==void 0||r!==void 0&&ce(t);if(a&&a.isNode())if(l)for(var u=0;u<this.length;u++){var h=this[u];r!==void 0?h.position(t,(r-s[t])/n):o!==void 0&&h.position(BT(o,n,s))}else{var d=a.position();return o=Zh(d,n,s),t===void 0?o:o[t]}else if(!l)return;return this},relativePosition:function(t,r){var a=this[0],i=this.cy(),n=De(t)?t:void 0,s=n!==void 0||r!==void 0&&ce(t),o=i.hasCompoundNodes();if(a&&a.isNode())if(s)for(var l=0;l<this.length;l++){var u=this[l],h=o?u.parent():null,d=h&&h.length>0,f=d;d&&(h=h[0]);var p=f?h.position():{x:0,y:0};r!==void 0?u.position(t,r+p[t]):n!==void 0&&u.position({x:n.x+p.x,y:n.y+p.y})}else{var y=a.position(),v=o?a.parent():null,m=v&&v.length>0,x=m;m&&(v=v[0]);var b=x?v.position():{x:0,y:0};return n={x:y.x-b.x,y:y.y-b.y},t===void 0?n:n[t]}else if(!s)return;return this}};Wa.modelPosition=Wa.point=Wa.position;Wa.modelPositions=Wa.points=Wa.positions;Wa.renderedPoint=Wa.renderedPosition;Wa.relativePoint=Wa.relativePosition;var X$=eC,Bs,dn;Bs=dn={};dn.renderedBoundingBox=function(e){var t=this.boundingBox(e),r=this.cy(),a=r.zoom(),i=r.pan(),n=t.x1*a+i.x,s=t.x2*a+i.x,o=t.y1*a+i.y,l=t.y2*a+i.y;return{x1:n,x2:s,y1:o,y2:l,w:s-n,h:l-o}};dn.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.cy();return!t.styleEnabled()||!t.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var a=r._private;a.compoundBoundsClean=!1,a.bbCache=null,e||r.emitAndNotify("bounds")}}),this)};dn.updateCompoundBounds=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(!e&&t.batching())return this;function r(s){if(!s.isParent())return;var o=s._private,l=s.children(),u=s.pstyle("compound-sizing-wrt-labels").value==="include",h={width:{val:s.pstyle("min-width").pfValue,left:s.pstyle("min-width-bias-left"),right:s.pstyle("min-width-bias-right")},height:{val:s.pstyle("min-height").pfValue,top:s.pstyle("min-height-bias-top"),bottom:s.pstyle("min-height-bias-bottom")}},d=l.boundingBox({includeLabels:u,includeOverlays:!1,useCache:!1}),f=o.position;(d.w===0||d.h===0)&&(d={w:s.pstyle("width").pfValue,h:s.pstyle("height").pfValue},d.x1=f.x-d.w/2,d.x2=f.x+d.w/2,d.y1=f.y-d.h/2,d.y2=f.y+d.h/2);function p(_,A,E){var D=0,R=0,O=A+E;return _>0&&O>0&&(D=A/O*_,R=E/O*_),{biasDiff:D,biasComplementDiff:R}}function y(_,A,E,D){if(E.units==="%")switch(D){case"width":return _>0?E.pfValue*_:0;case"height":return A>0?E.pfValue*A:0;case"average":return _>0&&A>0?E.pfValue*(_+A)/2:0;case"min":return _>0&&A>0?_>A?E.pfValue*A:E.pfValue*_:0;case"max":return _>0&&A>0?_>A?E.pfValue*_:E.pfValue*A:0;default:return 0}else return E.units==="px"?E.pfValue:0}var v=h.width.left.value;h.width.left.units==="px"&&h.width.val>0&&(v=v*100/h.width.val);var m=h.width.right.value;h.width.right.units==="px"&&h.width.val>0&&(m=m*100/h.width.val);var x=h.height.top.value;h.height.top.units==="px"&&h.height.val>0&&(x=x*100/h.height.val);var b=h.height.bottom.value;h.height.bottom.units==="px"&&h.height.val>0&&(b=b*100/h.height.val);var w=p(h.width.val-d.w,v,m),C=w.biasDiff,T=w.biasComplementDiff,k=p(h.height.val-d.h,x,b),S=k.biasDiff,L=k.biasComplementDiff;o.autoPadding=y(d.w,d.h,s.pstyle("padding"),s.pstyle("padding-relative-to").value),o.autoWidth=Math.max(d.w,h.width.val),f.x=(-C+d.x1+d.x2+T)/2,o.autoHeight=Math.max(d.h,h.height.val),f.y=(-S+d.y1+d.y2+L)/2}for(var a=0;a<this.length;a++){var i=this[a],n=i._private;(!n.compoundBoundsClean||e)&&(r(i),t.batching()||(n.compoundBoundsClean=!0))}return this};var La=function(t){return t===1/0||t===-1/0?0:t},Va=function(t,r,a,i,n){i-r===0||n-a===0||r==null||a==null||i==null||n==null||(t.x1=r<t.x1?r:t.x1,t.x2=i>t.x2?i:t.x2,t.y1=a<t.y1?a:t.y1,t.y2=n>t.y2?n:t.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1)},Tn=function(t,r){return r==null?t:Va(t,r.x1,r.y1,r.x2,r.y2)},sl=function(t,r,a){return na(t,r,a)},Kc=function(t,r,a){if(!r.cy().headless()){var i=r._private,n=i.rstyle,s=n.arrowWidth/2,o=r.pstyle(a+"-arrow-shape").value,l,u;if(o!=="none"){a==="source"?(l=n.srcX,u=n.srcY):a==="target"?(l=n.tgtX,u=n.tgtY):(l=n.midX,u=n.midY);var h=i.arrowBounds=i.arrowBounds||{},d=h[a]=h[a]||{};d.x1=l-s,d.y1=u-s,d.x2=l+s,d.y2=u+s,d.w=d.x2-d.x1,d.h=d.y2-d.y1,wu(d,1),Va(t,d.x1,d.y1,d.x2,d.y2)}}},ep=function(t,r,a){if(!r.cy().headless()){var i;a?i=a+"-":i="";var n=r._private,s=n.rstyle,o=r.pstyle(i+"label").strValue;if(o){var l=r.pstyle("text-halign"),u=r.pstyle("text-valign"),h=sl(s,"labelWidth",a),d=sl(s,"labelHeight",a),f=sl(s,"labelX",a),p=sl(s,"labelY",a),y=r.pstyle(i+"text-margin-x").pfValue,v=r.pstyle(i+"text-margin-y").pfValue,m=r.isEdge(),x=r.pstyle(i+"text-rotation"),b=r.pstyle("text-outline-width").pfValue,w=r.pstyle("text-border-width").pfValue,C=w/2,T=r.pstyle("text-background-padding").pfValue,k=2,S=d,L=h,_=L/2,A=S/2,E,D,R,O;if(m)E=f-_,D=f+_,R=p-A,O=p+A;else{switch(l.value){case"left":E=f-L,D=f;break;case"center":E=f-_,D=f+_;break;case"right":E=f,D=f+L;break}switch(u.value){case"top":R=p-S,O=p;break;case"center":R=p-A,O=p+A;break;case"bottom":R=p,O=p+S;break}}var P=y-Math.max(b,C)-T-k,$=y+Math.max(b,C)+T+k,M=v-Math.max(b,C)-T-k,I=v+Math.max(b,C)+T+k;E+=P,D+=$,R+=M,O+=I;var F=a||"main",V=n.labelBounds,N=V[F]=V[F]||{};N.x1=E,N.y1=R,N.x2=D,N.y2=O,N.w=D-E,N.h=O-R,N.leftPad=P,N.rightPad=$,N.topPad=M,N.botPad=I;var q=m&&x.strValue==="autorotate",U=x.pfValue!=null&&x.pfValue!==0;if(q||U){var X=q?sl(n.rstyle,"labelAngle",a):x.pfValue,lt=Math.cos(X),J=Math.sin(X),ct=(E+D)/2,yt=(R+O)/2;if(!m){switch(l.value){case"left":ct=D;break;case"right":ct=E;break}switch(u.value){case"top":yt=O;break;case"bottom":yt=R;break}}var ut=function(tt,H){return tt=tt-ct,H=H-yt,{x:tt*lt-H*J+ct,y:tt*J+H*lt+yt}},Q=ut(E,R),K=ut(E,O),j=ut(D,R),Y=ut(D,O);E=Math.min(Q.x,K.x,j.x,Y.x),D=Math.max(Q.x,K.x,j.x,Y.x),R=Math.min(Q.y,K.y,j.y,Y.y),O=Math.max(Q.y,K.y,j.y,Y.y)}var st=F+"Rot",W=V[st]=V[st]||{};W.x1=E,W.y1=R,W.x2=D,W.y2=O,W.w=D-E,W.h=O-R,Va(t,E,R,D,O),Va(n.labelBounds.all,E,R,D,O)}return t}},K$=function(t,r){if(!r.cy().headless()){var a=r.pstyle("outline-opacity").value,i=r.pstyle("outline-width").value;if(a>0&&i>0){var n=r.pstyle("outline-offset").value,s=r.pstyle("shape").value,o=i+n,l=(t.w+o*2)/t.w,u=(t.h+o*2)/t.h,h=0,d=0;["diamond","pentagon","round-triangle"].includes(s)?(l=(t.w+o*2.4)/t.w,d=-o/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(s)?l=(t.w+o*2.4)/t.w:s==="star"?(l=(t.w+o*2.8)/t.w,u=(t.h+o*2.6)/t.h,d=-o/3.8):s==="triangle"?(l=(t.w+o*2.8)/t.w,u=(t.h+o*2.4)/t.h,d=-o/1.4):s==="vee"&&(l=(t.w+o*4.4)/t.w,u=(t.h+o*3.8)/t.h,d=-o*.5);var f=t.h*u-t.h,p=t.w*l-t.w;if(ku(t,[Math.ceil(f/2),Math.ceil(p/2)]),h!=0||d!==0){var y=RF(t,h,d);RT(t,y)}}}},j$=function(t,r){var a=t._private.cy,i=a.styleEnabled(),n=a.headless(),s=ha(),o=t._private,l=t.isNode(),u=t.isEdge(),h,d,f,p,y,v,m=o.rstyle,x=l&&i?t.pstyle("bounds-expansion").pfValue:[0],b=function(bt){return bt.pstyle("display").value!=="none"},w=!i||b(t)&&(!u||b(t.source())&&b(t.target()));if(w){var C=0,T=0;i&&r.includeOverlays&&(C=t.pstyle("overlay-opacity").value,C!==0&&(T=t.pstyle("overlay-padding").value));var k=0,S=0;i&&r.includeUnderlays&&(k=t.pstyle("underlay-opacity").value,k!==0&&(S=t.pstyle("underlay-padding").value));var L=Math.max(T,S),_=0,A=0;if(i&&(_=t.pstyle("width").pfValue,A=_/2),l&&r.includeNodes){var E=t.position();y=E.x,v=E.y;var D=t.outerWidth(),R=D/2,O=t.outerHeight(),P=O/2;h=y-R,d=y+R,f=v-P,p=v+P,Va(s,h,f,d,p),i&&r.includeOutlines&&K$(s,t)}else if(u&&r.includeEdges)if(i&&!n){var $=t.pstyle("curve-style").strValue;if(h=Math.min(m.srcX,m.midX,m.tgtX),d=Math.max(m.srcX,m.midX,m.tgtX),f=Math.min(m.srcY,m.midY,m.tgtY),p=Math.max(m.srcY,m.midY,m.tgtY),h-=A,d+=A,f-=A,p+=A,Va(s,h,f,d,p),$==="haystack"){var M=m.haystackPts;if(M&&M.length===2){if(h=M[0].x,f=M[0].y,d=M[1].x,p=M[1].y,h>d){var I=h;h=d,d=I}if(f>p){var F=f;f=p,p=F}Va(s,h-A,f-A,d+A,p+A)}}else if($==="bezier"||$==="unbundled-bezier"||$.endsWith("segments")||$.endsWith("taxi")){var V;switch($){case"bezier":case"unbundled-bezier":V=m.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":V=m.linePts;break}if(V!=null)for(var N=0;N<V.length;N++){var q=V[N];h=q.x-A,d=q.x+A,f=q.y-A,p=q.y+A,Va(s,h,f,d,p)}}}else{var U=t.source(),X=U.position(),lt=t.target(),J=lt.position();if(h=X.x,d=J.x,f=X.y,p=J.y,h>d){var ct=h;h=d,d=ct}if(f>p){var yt=f;f=p,p=yt}h-=A,d+=A,f-=A,p+=A,Va(s,h,f,d,p)}if(i&&r.includeEdges&&u&&(Kc(s,t,"mid-source"),Kc(s,t,"mid-target"),Kc(s,t,"source"),Kc(s,t,"target")),i){var ut=t.pstyle("ghost").value==="yes";if(ut){var Q=t.pstyle("ghost-offset-x").pfValue,K=t.pstyle("ghost-offset-y").pfValue;Va(s,s.x1+Q,s.y1+K,s.x2+Q,s.y2+K)}}var j=o.bodyBounds=o.bodyBounds||{};Dv(j,s),ku(j,x),wu(j,1),i&&(h=s.x1,d=s.x2,f=s.y1,p=s.y2,Va(s,h-L,f-L,d+L,p+L));var Y=o.overlayBounds=o.overlayBounds||{};Dv(Y,s),ku(Y,x),wu(Y,1);var st=o.labelBounds=o.labelBounds||{};st.all!=null?BF(st.all):st.all=ha(),i&&r.includeLabels&&(r.includeMainLabels&&ep(s,t,null),u&&(r.includeSourceLabels&&ep(s,t,"source"),r.includeTargetLabels&&ep(s,t,"target")))}return s.x1=La(s.x1),s.y1=La(s.y1),s.x2=La(s.x2),s.y2=La(s.y2),s.w=La(s.x2-s.x1),s.h=La(s.y2-s.y1),s.w>0&&s.h>0&&w&&(ku(s,x),wu(s,1)),s},aC=function(t){var r=0,a=function(s){return(s?1:0)<<r++},i=0;return i+=a(t.incudeNodes),i+=a(t.includeEdges),i+=a(t.includeLabels),i+=a(t.includeMainLabels),i+=a(t.includeSourceLabels),i+=a(t.includeTargetLabels),i+=a(t.includeOverlays),i+=a(t.includeOutlines),i},iC=function(t){var r=function(o){return Math.round(o)};if(t.isEdge()){var a=t.source().position(),i=t.target().position();return Cv([r(a.x),r(a.y),r(i.x),r(i.y)])}else{var n=t.position();return Cv([r(n.x),r(n.y)])}},Gm=function(t,r){var a=t._private,i,n=t.isEdge(),s=r==null?Hm:aC(r),o=s===Hm;if(a.bbCache==null?(i=j$(t,ac),a.bbCache=i,a.bbCachePosKey=iC(t)):i=a.bbCache,!o){var l=t.isNode();i=ha(),(r.includeNodes&&l||r.includeEdges&&!l)&&(r.includeOverlays?Tn(i,a.overlayBounds):Tn(i,a.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!n||r.includeSourceLabels&&r.includeTargetLabels)?Tn(i,a.labelBounds.all):(r.includeMainLabels&&Tn(i,a.labelBounds.mainRot),r.includeSourceLabels&&Tn(i,a.labelBounds.sourceRot),r.includeTargetLabels&&Tn(i,a.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},ac={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},Hm=aC(ac),Ym=Fr(ac);dn.boundingBox=function(e){var t,r=e===void 0||e.useCache===void 0||e.useCache===!0,a=Mo(function(h){var d=h._private;return d.bbCache==null||d.styleDirty||d.bbCachePosKey!==iC(h)},function(h){return h.id()});if(r&&this.length===1&&!a(this[0]))e===void 0?e=ac:e=Ym(e),t=Gm(this[0],e);else{t=ha(),e=e||ac;var i=Ym(e),n=this,s=n.cy(),o=s.styleEnabled();this.edges().forEach(a),this.nodes().forEach(a),o&&this.recalculateRenderedStyle(r),this.updateCompoundBounds(!r);for(var l=0;l<n.length;l++){var u=n[l];a(u)&&u.dirtyBoundingBoxCache(),Tn(t,Gm(u,i))}}return t.x1=La(t.x1),t.y1=La(t.y1),t.x2=La(t.x2),t.y2=La(t.y2),t.w=La(t.x2-t.x1),t.h=La(t.y2-t.y1),t};dn.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};dn.boundingBoxAt=function(e){var t=this.nodes(),r=this.cy(),a=r.hasCompoundNodes(),i=r.collection();if(a&&(i=t.filter(function(u){return u.isParent()}),t=t.not(i)),De(e)){var n=e;e=function(){return n}}var s=function(h,d){return h._private.bbAtOldPos=e(h,d)},o=function(h){return h._private.bbAtOldPos};r.startBatch(),t.forEach(s).silentPositions(e),a&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var l=DF(this.boundingBox({useCache:!1}));return t.silentPositions(o),a&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),r.endBatch(),l};Bs.boundingbox=Bs.bb=Bs.boundingBox;Bs.renderedBoundingbox=Bs.renderedBoundingBox;var Q$=dn,Cl,_c;Cl=_c={};var nC=function(t){t.uppercaseName=cv(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=cv(t.outerName),Cl[t.name]=function(){var a=this[0],i=a._private,n=i.cy,s=n._private.styleEnabled;if(a)if(s){if(a.isParent())return a.updateCompoundBounds(),i[t.autoName]||0;var o=a.pstyle(t.name);switch(o.strValue){case"label":return a.recalculateRenderedStyle(),i.rstyle[t.labelName]||0;default:return o.pfValue}}else return 1},Cl["outer"+t.uppercaseName]=function(){var a=this[0],i=a._private,n=i.cy,s=n._private.styleEnabled;if(a)if(s){var o=a[t.name](),l=a.pstyle("border-position").value,u;l==="center"?u=a.pstyle("border-width").pfValue:l==="outside"?u=2*a.pstyle("border-width").pfValue:u=0;var h=2*a.padding();return o+u+h}else return 1},Cl["rendered"+t.uppercaseName]=function(){var a=this[0];if(a){var i=a[t.name]();return i*this.cy().zoom()}},Cl["rendered"+t.uppercaseOuterName]=function(){var a=this[0];if(a){var i=a[t.outerName]();return i*this.cy().zoom()}}};nC({name:"width"});nC({name:"height"});_c.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),t.autoPadding!==void 0?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue};_c.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()};_c.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var Z$=_c,J$=function(t,r){if(t.isEdge()&&t.takesUpSpace())return r(t)},tV=function(t,r){if(t.isEdge()&&t.takesUpSpace()){var a=t.cy();return Zh(r(t),a.zoom(),a.pan())}},eV=function(t,r){if(t.isEdge()&&t.takesUpSpace()){var a=t.cy(),i=a.pan(),n=a.zoom();return r(t).map(function(s){return Zh(s,n,i)})}},rV=function(t){return t.renderer().getControlPoints(t)},aV=function(t){return t.renderer().getSegmentPoints(t)},iV=function(t){return t.renderer().getSourceEndpoint(t)},nV=function(t){return t.renderer().getTargetEndpoint(t)},sV=function(t){return t.renderer().getEdgeMidpoint(t)},Um={controlPoints:{get:rV,mult:!0},segmentPoints:{get:aV,mult:!0},sourceEndpoint:{get:iV},targetEndpoint:{get:nV},midpoint:{get:sV}},oV=function(t){return"rendered"+t[0].toUpperCase()+t.substr(1)},lV=Object.keys(Um).reduce(function(e,t){var r=Um[t],a=oV(t);return e[t]=function(){return J$(this,r.get)},r.mult?e[a]=function(){return eV(this,r.get)}:e[a]=function(){return tV(this,r.get)},e},{}),cV=pe({},X$,Q$,Z$,lV);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var sC=function(t,r){this.recycle(t,r)};function ol(){return!1}function jc(){return!0}sC.prototype={instanceString:function(){return"event"},recycle:function(t,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=ol,t!=null&&t.preventDefault?(this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?jc:ol):t!=null&&t.type?r=t:this.type=t,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var a=this.position,i=this.cy.zoom(),n=this.cy.pan();this.renderedPosition={x:a.x*i+n.x,y:a.y*i+n.y}}this.timeStamp=t&&t.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=jc;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=jc;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=jc,this.stopPropagation()},isDefaultPrevented:ol,isPropagationStopped:ol,isImmediatePropagationStopped:ol};var oC=/^([^.]+)(\.(?:[^.]+))?$/,uV=".*",lC={qualifierCompare:function(t,r){return t===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(t){return t},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},Xm=Object.keys(lC),hV={};function nd(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:hV,t=arguments.length>1?arguments[1]:void 0,r=0;r<Xm.length;r++){var a=Xm[r];this[a]=e[a]||lC[a]}this.context=t||this.context,this.listeners=[],this.emitting=0}var nn=nd.prototype,cC=function(t,r,a,i,n,s,o){Ze(i)&&(n=i,i=null),o&&(s==null?s=o:s=pe({},s,o));for(var l=Ge(a)?a:a.split(/\s+/),u=0;u<l.length;u++){var h=l[u];if(!Ji(h)){var d=h.match(oC);if(d){var f=d[1],p=d[2]?d[2]:null,y=r(t,h,f,p,i,n,s);if(y===!1)break}}}},Km=function(t,r){return t.addEventFields(t.context,r),new sC(r.type,r)},dV=function(t,r,a){if(wM(a)){r(t,a);return}else if(De(a)){r(t,Km(t,a));return}for(var i=Ge(a)?a:a.split(/\s+/),n=0;n<i.length;n++){var s=i[n];if(!Ji(s)){var o=s.match(oC);if(o){var l=o[1],u=o[2]?o[2]:null,h=Km(t,{type:l,namespace:u,target:t.context});r(t,h)}}}};nn.on=nn.addListener=function(e,t,r,a,i){return cC(this,function(n,s,o,l,u,h,d){Ze(h)&&n.listeners.push({event:s,callback:h,type:o,namespace:l,qualifier:u,conf:d})},e,t,r,a,i),this};nn.one=function(e,t,r,a){return this.on(e,t,r,a,{one:!0})};nn.removeListener=nn.off=function(e,t,r,a){var i=this;this.emitting!==0&&(this.listeners=tF(this.listeners));for(var n=this.listeners,s=function(u){var h=n[u];cC(i,function(d,f,p,y,v,m){if((h.type===p||e==="*")&&(!y&&h.namespace!==".*"||h.namespace===y)&&(!v||d.qualifierCompare(h.qualifier,v))&&(!m||h.callback===m))return n.splice(u,1),!1},e,t,r,a)},o=n.length-1;o>=0;o--)s(o);return this};nn.removeAllListeners=function(){return this.removeListener("*")};nn.emit=nn.trigger=function(e,t,r){var a=this.listeners,i=a.length;return this.emitting++,Ge(t)||(t=[t]),dV(this,function(n,s){r!=null&&(a=[{event:s.event,type:s.type,namespace:s.namespace,callback:r}],i=a.length);for(var o=function(){var h=a[l];if(h.type===s.type&&(!h.namespace||h.namespace===s.namespace||h.namespace===uV)&&n.eventMatches(n.context,h,s)){var d=[s];t!=null&&rF(d,t),n.beforeEmit(n.context,h,s),h.conf&&h.conf.one&&(n.listeners=n.listeners.filter(function(y){return y!==h}));var f=n.callbackContext(n.context,h,s),p=h.callback.apply(f,d);n.afterEmit(n.context,h,s),p===!1&&(s.stopPropagation(),s.preventDefault())}},l=0;l<i;l++)o();n.bubble(n.context)&&!s.isPropagationStopped()&&n.parent(n.context).emit(s,t)},e),this.emitting--,this};var fV={qualifierCompare:function(t,r){return t==null||r==null?t==null&&r==null:t.sameText(r)},eventMatches:function(t,r,a){var i=r.qualifier;return i!=null?t!==a.target&&wc(a.target)&&i.matches(a.target):!0},addEventFields:function(t,r){r.cy=t.cy(),r.target=t},callbackContext:function(t,r,a){return r.qualifier!=null?a.target:t},beforeEmit:function(t,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(t){return t.isChild()?t.parent():t.cy()}},Qc=function(t){return ce(t)?new rn(t):t},uC={createEmitter:function(){for(var t=0;t<this.length;t++){var r=this[t],a=r._private;a.emitter||(a.emitter=new nd(fV,r))}return this},emitter:function(){return this._private.emitter},on:function(t,r,a){for(var i=Qc(r),n=0;n<this.length;n++){var s=this[n];s.emitter().on(t,i,a)}return this},removeListener:function(t,r,a){for(var i=Qc(r),n=0;n<this.length;n++){var s=this[n];s.emitter().removeListener(t,i,a)}return this},removeAllListeners:function(){for(var t=0;t<this.length;t++){var r=this[t];r.emitter().removeAllListeners()}return this},one:function(t,r,a){for(var i=Qc(r),n=0;n<this.length;n++){var s=this[n];s.emitter().one(t,i,a)}return this},once:function(t,r,a){for(var i=Qc(r),n=0;n<this.length;n++){var s=this[n];s.emitter().on(t,i,a,{once:!0,onceCollection:this})}},emit:function(t,r){for(var a=0;a<this.length;a++){var i=this[a];i.emitter().emit(t,r)}return this},emitAndNotify:function(t,r){if(this.length!==0)return this.cy().notify(t,this),this.emit(t,r),this}};Ie.eventAliasesOn(uC);var hC={nodes:function(t){return this.filter(function(r){return r.isNode()}).filter(t)},edges:function(t){return this.filter(function(r){return r.isEdge()}).filter(t)},byGroup:function(){for(var t=this.spawn(),r=this.spawn(),a=0;a<this.length;a++){var i=this[a];i.isNode()?t.push(i):r.push(i)}return{nodes:t,edges:r}},filter:function(t,r){if(t===void 0)return this;if(ce(t)||ma(t))return new rn(t).filter(this);if(Ze(t)){for(var a=this.spawn(),i=this,n=0;n<i.length;n++){var s=i[n],o=r?t.apply(r,[s,n,i]):t(s,n,i);o&&a.push(s)}return a}return this.spawn()},not:function(t){if(t){ce(t)&&(t=this.filter(t));for(var r=this.spawn(),a=0;a<this.length;a++){var i=this[a],n=t.has(i);n||r.push(i)}return r}else return this},absoluteComplement:function(){var t=this.cy();return t.mutableElements().not(this)},intersect:function(t){if(ce(t)){var r=t;return this.filter(r)}for(var a=this.spawn(),i=this,n=t,s=this.length<t.length,o=s?i:n,l=s?n:i,u=0;u<o.length;u++){var h=o[u];l.has(h)&&a.push(h)}return a},xor:function(t){var r=this._private.cy;ce(t)&&(t=r.$(t));var a=this.spawn(),i=this,n=t,s=function(l,u){for(var h=0;h<l.length;h++){var d=l[h],f=d._private.data.id,p=u.hasElementWithId(f);p||a.push(d)}};return s(i,n),s(n,i),a},diff:function(t){var r=this._private.cy;ce(t)&&(t=r.$(t));var a=this.spawn(),i=this.spawn(),n=this.spawn(),s=this,o=t,l=function(h,d,f){for(var p=0;p<h.length;p++){var y=h[p],v=y._private.data.id,m=d.hasElementWithId(v);m?n.merge(y):f.push(y)}};return l(s,o,a),l(o,s,i),{left:a,right:i,both:n}},add:function(t){var r=this._private.cy;if(!t)return this;if(ce(t)){var a=t;t=r.mutableElements().filter(a)}for(var i=this.spawnSelf(),n=0;n<t.length;n++){var s=t[n],o=!this.has(s);o&&i.push(s)}return i},merge:function(t){var r=this._private,a=r.cy;if(!t)return this;if(t&&ce(t)){var i=t;t=a.mutableElements().filter(i)}for(var n=r.map,s=0;s<t.length;s++){var o=t[s],l=o._private.data.id,u=!n.has(l);if(u){var h=this.length++;this[h]=o,n.set(l,{ele:o,index:h})}}return this},unmergeAt:function(t){var r=this[t],a=r.id(),i=this._private,n=i.map;this[t]=void 0,n.delete(a);var s=t===this.length-1;if(this.length>1&&!s){var o=this.length-1,l=this[o],u=l._private.data.id;this[o]=void 0,this[t]=l,n.set(u,{ele:l,index:t})}return this.length--,this},unmergeOne:function(t){t=t[0];var r=this._private,a=t._private.data.id,i=r.map,n=i.get(a);if(!n)return this;var s=n.index;return this.unmergeAt(s),this},unmerge:function(t){var r=this._private.cy;if(!t)return this;if(t&&ce(t)){var a=t;t=r.mutableElements().filter(a)}for(var i=0;i<t.length;i++)this.unmergeOne(t[i]);return this},unmergeBy:function(t){for(var r=this.length-1;r>=0;r--){var a=this[r];t(a)&&this.unmergeAt(r)}return this},map:function(t,r){for(var a=[],i=this,n=0;n<i.length;n++){var s=i[n],o=r?t.apply(r,[s,n,i]):t(s,n,i);a.push(o)}return a},reduce:function(t,r){for(var a=r,i=this,n=0;n<i.length;n++)a=t(a,i[n],n,i);return a},max:function(t,r){for(var a=-1/0,i,n=this,s=0;s<n.length;s++){var o=n[s],l=r?t.apply(r,[o,s,n]):t(o,s,n);l>a&&(a=l,i=o)}return{value:a,ele:i}},min:function(t,r){for(var a=1/0,i,n=this,s=0;s<n.length;s++){var o=n[s],l=r?t.apply(r,[o,s,n]):t(o,s,n);l<a&&(a=l,i=o)}return{value:a,ele:i}}},Be=hC;Be.u=Be["|"]=Be["+"]=Be.union=Be.or=Be.add;Be["\\"]=Be["!"]=Be["-"]=Be.difference=Be.relativeComplement=Be.subtract=Be.not;Be.n=Be["&"]=Be["."]=Be.and=Be.intersection=Be.intersect;Be["^"]=Be["(+)"]=Be["(-)"]=Be.symmetricDifference=Be.symdiff=Be.xor;Be.fnFilter=Be.filterFn=Be.stdFilter=Be.filter;Be.complement=Be.abscomp=Be.absoluteComplement;var pV={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var t=this[0];if(t)return t._private.group}},dC=function(t,r){var a=t.cy(),i=a.hasCompoundNodes();function n(h){var d=h.pstyle("z-compound-depth");return d.value==="auto"?i?h.zDepth():0:d.value==="bottom"?-1:d.value==="top"?d1:0}var s=n(t)-n(r);if(s!==0)return s;function o(h){var d=h.pstyle("z-index-compare");return d.value==="auto"&&h.isNode()?1:0}var l=o(t)-o(r);if(l!==0)return l;var u=t.pstyle("z-index").value-r.pstyle("z-index").value;return u!==0?u:t.poolIndex()-r.poolIndex()},ph={forEach:function(t,r){if(Ze(t))for(var a=this.length,i=0;i<a;i++){var n=this[i],s=r?t.apply(r,[n,i,this]):t(n,i,this);if(s===!1)break}return this},toArray:function(){for(var t=[],r=0;r<this.length;r++)t.push(this[r]);return t},slice:function(t,r){var a=[],i=this.length;r==null&&(r=i),t==null&&(t=0),t<0&&(t=i+t),r<0&&(r=i+r);for(var n=t;n>=0&&n<r&&n<i;n++)a.push(this[n]);return this.spawn(a)},size:function(){return this.length},eq:function(t){return this[t]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(t){if(!Ze(t))return this;var r=this.toArray().sort(t);return this.spawn(r)},sortByZIndex:function(){return this.sort(dC)},zDepth:function(){var t=this[0];if(t){var r=t._private,a=r.group;if(a==="nodes"){var i=r.data.parent?t.parents().size():0;return t.isParent()?i:d1-1}else{var n=r.source,s=r.target,o=n.zDepth(),l=s.zDepth();return Math.max(o,l,0)}}}};ph.each=ph.forEach;var gV=function(){var t="undefined",r=(typeof Symbol>"u"?"undefined":mr(Symbol))!=t&&mr(Symbol.iterator)!=t;r&&(ph[Symbol.iterator]=function(){var a=this,i={value:void 0,done:!1},n=0,s=this.length;return dT({next:function(){return n<s?i.value=a[n++]:(i.value=void 0,i.done=!0),i}},Symbol.iterator,function(){return this})})};gV();var yV=Fr({nodeDimensionsIncludeLabels:!1}),Cu={layoutDimensions:function(t){t=yV(t);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(t.nodeDimensionsIncludeLabels){var a=this.boundingBox();r={w:a.w,h:a.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(t,r,a){var i=this.nodes().filter(function(T){return!T.isParent()}),n=this.cy(),s=r.eles,o=function(k){return k.id()},l=Mo(a,o);t.emit({type:"layoutstart",layout:t}),t.animations=[];var u=function(k,S,L){var _={x:S.x1+S.w/2,y:S.y1+S.h/2},A={x:(L.x-_.x)*k,y:(L.y-_.y)*k};return{x:_.x+A.x,y:_.y+A.y}},h=r.spacingFactor&&r.spacingFactor!==1,d=function(){if(!h)return null;for(var k=ha(),S=0;S<i.length;S++){var L=i[S],_=l(L,S);IF(k,_.x,_.y)}return k},f=d(),p=Mo(function(T,k){var S=l(T,k);if(h){var L=Math.abs(r.spacingFactor);S=u(L,f,S)}return r.transform!=null&&(S=r.transform(T,S)),S},o);if(r.animate){for(var y=0;y<i.length;y++){var v=i[y],m=p(v,y),x=r.animateFilter==null||r.animateFilter(v,y);if(x){var b=v.animation({position:m,duration:r.animationDuration,easing:r.animationEasing});t.animations.push(b)}else v.position(m)}if(r.fit){var w=n.animation({fit:{boundingBox:s.boundingBoxAt(p),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});t.animations.push(w)}else if(r.zoom!==void 0&&r.pan!==void 0){var C=n.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});t.animations.push(C)}t.animations.forEach(function(T){return T.play()}),t.one("layoutready",r.ready),t.emit({type:"layoutready",layout:t}),Qo.all(t.animations.map(function(T){return T.promise()})).then(function(){t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t})})}else i.positions(p),r.fit&&n.fit(r.eles,r.padding),r.zoom!=null&&n.zoom(r.zoom),r.pan&&n.pan(r.pan),t.one("layoutready",r.ready),t.emit({type:"layoutready",layout:t}),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});return this},layout:function(t){var r=this.cy();return r.makeLayout(pe({},t,{eles:this}))}};Cu.createLayout=Cu.makeLayout=Cu.layout;function fC(e,t,r){var a=r._private,i=a.styleCache=a.styleCache||[],n;return(n=i[e])!=null||(n=i[e]=t(r)),n}function sd(e,t){return e=Gn(e),function(a){return fC(e,t,a)}}function od(e,t){e=Gn(e);var r=function(i){return t.call(i)};return function(){var i=this[0];if(i)return fC(e,r,i)}}var Pr={recalculateRenderedStyle:function(t){var r=this.cy(),a=r.renderer(),i=r.styleEnabled();return a&&i&&a.recalculateRenderedStyle(this,t),this},dirtyStyleCache:function(){var t=this.cy(),r=function(n){return n._private.styleCache=null};if(t.hasCompoundNodes()){var a;a=this.spawnSelf().merge(this.descendants()).merge(this.parents()),a.merge(a.connectedEdges()),a.forEach(r)}else this.forEach(function(i){r(i),i.connectedEdges().forEach(r)});return this},updateStyle:function(t){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var a=r._private.batchStyleEles;return a.merge(this),this}var i=r.hasCompoundNodes(),n=this;t=!!(t||t===void 0),i&&(n=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var s=n;return t?s.emitAndNotify("style"):s.emit("style"),n.forEach(function(o){return o._private.styleDirty=!0}),this},cleanStyle:function(){var t=this.cy();if(t.styleEnabled())for(var r=0;r<this.length;r++){var a=this[r];a._private.styleDirty&&(a._private.styleDirty=!1,t.style().apply(a))}},parsedStyle:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=this[0],i=a.cy();if(i.styleEnabled()&&a){a._private.styleDirty&&(a._private.styleDirty=!1,i.style().apply(a));var n=a._private.style[t];return n??(r?i.style().getDefaultProperty(t):null)}},numericStyle:function(t){var r=this[0];if(r.cy().styleEnabled()&&r){var a=r.pstyle(t);return a.pfValue!==void 0?a.pfValue:a.value}},numericStyleUnits:function(t){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(t).units},renderedStyle:function(t){var r=this.cy();if(!r.styleEnabled())return this;var a=this[0];if(a)return r.style().getRenderedStyle(a,t)},style:function(t,r){var a=this.cy();if(!a.styleEnabled())return this;var i=!1,n=a.style();if(De(t)){var s=t;n.applyBypass(this,s,i),this.emitAndNotify("style")}else if(ce(t))if(r===void 0){var o=this[0];return o?n.getStylePropertyValue(o,t):void 0}else n.applyBypass(this,t,r,i),this.emitAndNotify("style");else if(t===void 0){var l=this[0];return l?n.getRawStyle(l):void 0}return this},removeStyle:function(t){var r=this.cy();if(!r.styleEnabled())return this;var a=!1,i=r.style(),n=this;if(t===void 0)for(var s=0;s<n.length;s++){var o=n[s];i.removeAllBypasses(o,a)}else{t=t.split(/\s+/);for(var l=0;l<n.length;l++){var u=n[l];i.removeBypasses(u,t,a)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var r=t.hasCompoundNodes(),a=this[0];if(a){var i=a._private,n=a.pstyle("opacity").value;if(!r)return n;var s=i.data.parent?a.parents():null;if(s)for(var o=0;o<s.length;o++){var l=s[o],u=l.pstyle("opacity").value;n=u*n}return n}},transparent:function(){var t=this.cy();if(!t.styleEnabled())return!1;var r=this[0],a=r.cy().hasCompoundNodes();if(r)return a?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var t=this.cy();if(!t.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};function rp(e,t){var r=e._private,a=r.data.parent?e.parents():null;if(a)for(var i=0;i<a.length;i++){var n=a[i];if(!t(n))return!1}return!0}function C1(e){var t=e.ok,r=e.edgeOkViaNode||e.ok,a=e.parentOk||e.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var n=this[0],s=i.hasCompoundNodes();if(n){var o=n._private;if(!t(n))return!1;if(n.isNode())return!s||rp(n,a);var l=o.source,u=o.target;return r(l)&&(!s||rp(l,r))&&(l===u||r(u)&&(!s||rp(u,r)))}}}var Zo=sd("eleTakesUpSpace",function(e){return e.pstyle("display").value==="element"&&e.width()!==0&&(e.isNode()?e.height()!==0:!0)});Pr.takesUpSpace=od("takesUpSpace",C1({ok:Zo}));var vV=sd("eleInteractive",function(e){return e.pstyle("events").value==="yes"&&e.pstyle("visibility").value==="visible"&&Zo(e)}),mV=sd("parentInteractive",function(e){return e.pstyle("visibility").value==="visible"&&Zo(e)});Pr.interactive=od("interactive",C1({ok:vV,parentOk:mV,edgeOkViaNode:Zo}));Pr.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var xV=sd("eleVisible",function(e){return e.pstyle("visibility").value==="visible"&&e.pstyle("opacity").pfValue!==0&&Zo(e)}),bV=Zo;Pr.visible=od("visible",C1({ok:xV,edgeOkViaNode:bV}));Pr.hidden=function(){var e=this[0];if(e)return!e.visible()};Pr.isBundledBezier=od("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});Pr.bypass=Pr.css=Pr.style;Pr.renderedCss=Pr.renderedStyle;Pr.removeBypass=Pr.removeCss=Pr.removeStyle;Pr.pstyle=Pr.parsedStyle;var ji={};function jm(e){return function(){var t=arguments,r=[];if(t.length===2){var a=t[0],i=t[1];this.on(e.event,a,i)}else if(t.length===1&&Ze(t[0])){var n=t[0];this.on(e.event,n)}else if(t.length===0||t.length===1&&Ge(t[0])){for(var s=t.length===1?t[0]:null,o=0;o<this.length;o++){var l=this[o],u=!e.ableField||l._private[e.ableField],h=l._private[e.field]!=e.value;if(e.overrideAble){var d=e.overrideAble(l);if(d!==void 0&&(u=d,!d))return this}u&&(l._private[e.field]=e.value,h&&r.push(l))}var f=this.spawn(r);f.updateStyle(),f.emit(e.event),s&&f.emit(s)}return this}}function Jo(e){ji[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var r=e.overrideField(t);if(r!==void 0)return r}return t._private[e.field]}},ji[e.on]=jm({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),ji[e.off]=jm({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}Jo({field:"locked",overrideField:function(t){return t.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});Jo({field:"grabbable",overrideField:function(t){return t.cy().autoungrabify()||t.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});Jo({field:"selected",ableField:"selectable",overrideAble:function(t){return t.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});Jo({field:"selectable",overrideField:function(t){return t.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});ji.deselect=ji.unselect;ji.grabbed=function(){var e=this[0];if(e)return e._private.grabbed};Jo({field:"active",on:"activate",off:"unactivate"});Jo({field:"pannable",on:"panify",off:"unpanify"});ji.inactive=function(){var e=this[0];if(e)return!e._private.active};var Wr={},Qm=function(t){return function(a){for(var i=this,n=[],s=0;s<i.length;s++){var o=i[s];if(o.isNode()){for(var l=!1,u=o.connectedEdges(),h=0;h<u.length;h++){var d=u[h],f=d.source(),p=d.target();if(t.noIncomingEdges&&p===o&&f!==o||t.noOutgoingEdges&&f===o&&p!==o){l=!0;break}}l||n.push(o)}}return this.spawn(n,!0).filter(a)}},Zm=function(t){return function(r){for(var a=this,i=[],n=0;n<a.length;n++){var s=a[n];if(s.isNode())for(var o=s.connectedEdges(),l=0;l<o.length;l++){var u=o[l],h=u.source(),d=u.target();t.outgoing&&h===s?(i.push(u),i.push(d)):t.incoming&&d===s&&(i.push(u),i.push(h))}}return this.spawn(i,!0).filter(r)}},Jm=function(t){return function(r){for(var a=this,i=[],n={};;){var s=t.outgoing?a.outgoers():a.incomers();if(s.length===0)break;for(var o=!1,l=0;l<s.length;l++){var u=s[l],h=u.id();n[h]||(n[h]=!0,i.push(u),o=!0)}if(!o)break;a=s}return this.spawn(i,!0).filter(r)}};Wr.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null};pe(Wr,{roots:Qm({noIncomingEdges:!0}),leaves:Qm({noOutgoingEdges:!0}),outgoers:Ra(Zm({outgoing:!0}),"outgoers"),successors:Jm({outgoing:!0}),incomers:Ra(Zm({incoming:!0}),"incomers"),predecessors:Jm({})});pe(Wr,{neighborhood:Ra(function(e){for(var t=[],r=this.nodes(),a=0;a<r.length;a++)for(var i=r[a],n=i.connectedEdges(),s=0;s<n.length;s++){var o=n[s],l=o.source(),u=o.target(),h=i===l?u:l;h.length>0&&t.push(h[0]),t.push(o[0])}return this.spawn(t,!0).filter(e)},"neighborhood"),closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}});Wr.neighbourhood=Wr.neighborhood;Wr.closedNeighbourhood=Wr.closedNeighborhood;Wr.openNeighbourhood=Wr.openNeighborhood;pe(Wr,{source:Ra(function(t){var r=this[0],a;return r&&(a=r._private.source||r.cy().collection()),a&&t?a.filter(t):a},"source"),target:Ra(function(t){var r=this[0],a;return r&&(a=r._private.target||r.cy().collection()),a&&t?a.filter(t):a},"target"),sources:t2({attr:"source"}),targets:t2({attr:"target"})});function t2(e){return function(r){for(var a=[],i=0;i<this.length;i++){var n=this[i],s=n._private[e.attr];s&&a.push(s)}return this.spawn(a,!0).filter(r)}}pe(Wr,{edgesWith:Ra(e2(),"edgesWith"),edgesTo:Ra(e2({thisIsSrc:!0}),"edgesTo")});function e2(e){return function(r){var a=[],i=this._private.cy,n=e||{};ce(r)&&(r=i.$(r));for(var s=0;s<r.length;s++)for(var o=r[s]._private.edges,l=0;l<o.length;l++){var u=o[l],h=u._private.data,d=this.hasElementWithId(h.source)&&r.hasElementWithId(h.target),f=r.hasElementWithId(h.source)&&this.hasElementWithId(h.target),p=d||f;p&&((n.thisIsSrc||n.thisIsTgt)&&(n.thisIsSrc&&!d||n.thisIsTgt&&!f)||a.push(u))}return this.spawn(a,!0)}}pe(Wr,{connectedEdges:Ra(function(e){for(var t=[],r=this,a=0;a<r.length;a++){var i=r[a];if(i.isNode())for(var n=i._private.edges,s=0;s<n.length;s++){var o=n[s];t.push(o)}}return this.spawn(t,!0).filter(e)},"connectedEdges"),connectedNodes:Ra(function(e){for(var t=[],r=this,a=0;a<r.length;a++){var i=r[a];i.isEdge()&&(t.push(i.source()[0]),t.push(i.target()[0]))}return this.spawn(t,!0).filter(e)},"connectedNodes"),parallelEdges:Ra(r2(),"parallelEdges"),codirectedEdges:Ra(r2({codirected:!0}),"codirectedEdges")});function r2(e){var t={codirected:!1};return e=pe({},t,e),function(a){for(var i=[],n=this.edges(),s=e,o=0;o<n.length;o++)for(var l=n[o],u=l._private,h=u.source,d=h._private.data.id,f=u.data.target,p=h._private.edges,y=0;y<p.length;y++){var v=p[y],m=v._private.data,x=m.target,b=m.source,w=x===f&&b===d,C=d===x&&f===b;(s.codirected&&w||!s.codirected&&(w||C))&&i.push(v)}return this.spawn(i,!0).filter(a)}}pe(Wr,{components:function(t){var r=this,a=r.cy(),i=a.collection(),n=t==null?r.nodes():t.nodes(),s=[];t!=null&&n.empty()&&(n=t.sources());var o=function(h,d){i.merge(h),n.unmerge(h),d.merge(h)};if(n.empty())return r.spawn();var l=function(){var h=a.collection();s.push(h);var d=n[0];o(d,h),r.bfs({directed:!1,roots:d,visit:function(p){return o(p,h)}}),h.forEach(function(f){f.connectedEdges().forEach(function(p){r.has(p)&&h.has(p.source())&&h.has(p.target())&&h.merge(p)})})};do l();while(n.length>0);return s},component:function(){var t=this[0];return t.cy().mutableElements().components(t)[0]}});Wr.componentsOf=Wr.components;var Nr=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(t===void 0){Qe("A collection must have a reference to the core");return}var n=new Si,s=!1;if(!r)r=[];else if(r.length>0&&De(r[0])&&!wc(r[0])){s=!0;for(var o=[],l=new jo,u=0,h=r.length;u<h;u++){var d=r[u];d.data==null&&(d.data={});var f=d.data;if(f.id==null)f.id=LT();else if(t.hasElementWithId(f.id)||l.has(f.id))continue;var p=new Qh(t,d,!1);o.push(p),l.add(f.id)}r=o}this.length=0;for(var y=0,v=r.length;y<v;y++){var m=r[y][0];if(m!=null){var x=m._private.data.id;(!a||!n.has(x))&&(a&&n.set(x,{index:this.length,ele:m}),this[this.length]=m,this.length++)}}this._private={eles:this,cy:t,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(b){this.lazyMap=b},rebuildMap:function(){for(var w=this.lazyMap=new Si,C=this.eles,T=0;T<C.length;T++){var k=C[T];w.set(k.id(),{index:T,ele:k})}}},a&&(this._private.map=n),s&&!i&&this.restore()},Ye=Qh.prototype=Nr.prototype=Object.create(Array.prototype);Ye.instanceString=function(){return"collection"};Ye.spawn=function(e,t){return new Nr(this.cy(),e,t)};Ye.spawnSelf=function(){return this.spawn(this)};Ye.cy=function(){return this._private.cy};Ye.renderer=function(){return this._private.cy.renderer()};Ye.element=function(){return this[0]};Ye.collection=function(){return gT(this)?this:new Nr(this._private.cy,[this])};Ye.unique=function(){return new Nr(this._private.cy,this,!0)};Ye.hasElementWithId=function(e){return e=""+e,this._private.map.has(e)};Ye.getElementById=function(e){e=""+e;var t=this._private.cy,r=this._private.map.get(e);return r?r.ele:new Nr(t)};Ye.$id=Ye.getElementById;Ye.poolIndex=function(){var e=this._private.cy,t=e._private.elements,r=this[0]._private.data.id;return t._private.map.get(r).index};Ye.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index};Ye.indexOfId=function(e){return e=""+e,this._private.map.get(e).index};Ye.json=function(e){var t=this.element(),r=this.cy();if(t==null&&e)return this;if(t!=null){var a=t._private;if(De(e)){if(r.startBatch(),e.data){t.data(e.data);var i=a.data;if(t.isEdge()){var n=!1,s={},o=e.data.source,l=e.data.target;o!=null&&o!=i.source&&(s.source=""+o,n=!0),l!=null&&l!=i.target&&(s.target=""+l,n=!0),n&&(t=t.move(s))}else{var u="parent"in e.data,h=e.data.parent;u&&(h!=null||i.parent!=null)&&h!=i.parent&&(h===void 0&&(h=null),h!=null&&(h=""+h),t=t.move({parent:h}))}}e.position&&t.position(e.position);var d=function(v,m,x){var b=e[v];b!=null&&b!==a[v]&&(b?t[m]():t[x]())};return d("removed","remove","restore"),d("selected","select","unselect"),d("selectable","selectify","unselectify"),d("locked","lock","unlock"),d("grabbable","grabify","ungrabify"),d("pannable","panify","unpanify"),e.classes!=null&&t.classes(e.classes),r.endBatch(),this}else if(e===void 0){var f={data:ni(a.data),position:ni(a.position),group:a.group,removed:a.removed,selected:a.selected,selectable:a.selectable,locked:a.locked,grabbable:a.grabbable,pannable:a.pannable,classes:null};f.classes="";var p=0;return a.classes.forEach(function(y){return f.classes+=p++===0?y:" "+y}),f}}};Ye.jsons=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t],a=r.json();e.push(a)}return e};Ye.clone=function(){for(var e=this.cy(),t=[],r=0;r<this.length;r++){var a=this[r],i=a.json(),n=new Qh(e,i,!1);t.push(n)}return new Nr(e,t)};Ye.copy=Ye.clone;Ye.restore=function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,a=r.cy(),i=a._private,n=[],s=[],o,l=0,u=r.length;l<u;l++){var h=r[l];t&&!h.removed()||(h.isNode()?n.push(h):s.push(h))}o=n.concat(s);var d,f=function(){o.splice(d,1),d--};for(d=0;d<o.length;d++){var p=o[d],y=p._private,v=y.data;if(p.clearTraversalCache(),!(!t&&!y.removed)){if(v.id===void 0)v.id=LT();else if(Vt(v.id))v.id=""+v.id;else if(Ji(v.id)||!ce(v.id)){Qe("Can not create element with invalid string ID `"+v.id+"`"),f();continue}else if(a.hasElementWithId(v.id)){Qe("Can not create second element with ID `"+v.id+"`"),f();continue}}var m=v.id;if(p.isNode()){var x=y.position;x.x==null&&(x.x=0),x.y==null&&(x.y=0)}if(p.isEdge()){for(var b=p,w=["source","target"],C=w.length,T=!1,k=0;k<C;k++){var S=w[k],L=v[S];Vt(L)&&(L=v[S]=""+v[S]),L==null||L===""?(Qe("Can not create edge `"+m+"` with unspecified "+S),T=!0):a.hasElementWithId(L)||(Qe("Can not create edge `"+m+"` with nonexistant "+S+" `"+L+"`"),T=!0)}if(T){f();continue}var _=a.getElementById(v.source),A=a.getElementById(v.target);_.same(A)?_._private.edges.push(b):(_._private.edges.push(b),A._private.edges.push(b)),b._private.source=_,b._private.target=A}y.map=new Si,y.map.set(m,{ele:p,index:0}),y.removed=!1,t&&a.addToPool(p)}for(var E=0;E<n.length;E++){var D=n[E],R=D._private.data;Vt(R.parent)&&(R.parent=""+R.parent);var O=R.parent,P=O!=null;if(P||D._private.parent){var $=D._private.parent?a.collection().merge(D._private.parent):a.getElementById(O);if($.empty())R.parent=void 0;else if($[0].removed())Pe("Node added with missing parent, reference to parent removed"),R.parent=void 0,D._private.parent=null;else{for(var M=!1,I=$;!I.empty();){if(D.same(I)){M=!0,R.parent=void 0;break}I=I.parent()}M||($[0]._private.children.push(D),D._private.parent=$[0],i.hasCompoundNodes=!0)}}}if(o.length>0){for(var F=o.length===r.length?r:new Nr(a,o),V=0;V<F.length;V++){var N=F[V];N.isNode()||(N.parallelEdges().clearTraversalCache(),N.source().clearTraversalCache(),N.target().clearTraversalCache())}var q;i.hasCompoundNodes?q=a.collection().merge(F).merge(F.connectedNodes()).merge(F.parent()):q=F,q.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(e),e?F.emitAndNotify("add"):t&&F.emit("add")}return r};Ye.removed=function(){var e=this[0];return e&&e._private.removed};Ye.inside=function(){var e=this[0];return e&&!e._private.removed};Ye.remove=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,a=[],i={},n=r._private.cy;function s(O){for(var P=O._private.edges,$=0;$<P.length;$++)l(P[$])}function o(O){for(var P=O._private.children,$=0;$<P.length;$++)l(P[$])}function l(O){var P=i[O.id()];t&&O.removed()||P||(i[O.id()]=!0,O.isNode()?(a.push(O),s(O),o(O)):a.unshift(O))}for(var u=0,h=r.length;u<h;u++){var d=r[u];l(d)}function f(O,P){var $=O._private.edges;tn($,P),O.clearTraversalCache()}function p(O){O.clearTraversalCache()}var y=[];y.ids={};function v(O,P){P=P[0],O=O[0];var $=O._private.children,M=O.id();tn($,P),P._private.parent=null,y.ids[M]||(y.ids[M]=!0,y.push(O))}r.dirtyCompoundBoundsCache(),t&&n.removeFromPool(a);for(var m=0;m<a.length;m++){var x=a[m];if(x.isEdge()){var b=x.source()[0],w=x.target()[0];f(b,x),f(w,x);for(var C=x.parallelEdges(),T=0;T<C.length;T++){var k=C[T];p(k),k.isBundledBezier()&&k.dirtyBoundingBoxCache()}}else{var S=x.parent();S.length!==0&&v(S,x)}t&&(x._private.removed=!0)}var L=n._private.elements;n._private.hasCompoundNodes=!1;for(var _=0;_<L.length;_++){var A=L[_];if(A.isParent()){n._private.hasCompoundNodes=!0;break}}var E=new Nr(this.cy(),a);E.size()>0&&(e?E.emitAndNotify("remove"):t&&E.emit("remove"));for(var D=0;D<y.length;D++){var R=y[D];(!t||!R.removed())&&R.updateStyle()}return E};Ye.move=function(e){var t=this._private.cy,r=this,a=!1,i=!1,n=function(y){return y==null?y:""+y};if(e.source!==void 0||e.target!==void 0){var s=n(e.source),o=n(e.target),l=s!=null&&t.hasElementWithId(s),u=o!=null&&t.hasElementWithId(o);(l||u)&&(t.batch(function(){r.remove(a,i),r.emitAndNotify("moveout");for(var p=0;p<r.length;p++){var y=r[p],v=y._private.data;y.isEdge()&&(l&&(v.source=s),u&&(v.target=o))}r.restore(a,i)}),r.emitAndNotify("move"))}else if(e.parent!==void 0){var h=n(e.parent),d=h===null||t.hasElementWithId(h);if(d){var f=h===null?void 0:h;t.batch(function(){var p=r.remove(a,i);p.emitAndNotify("moveout");for(var y=0;y<r.length;y++){var v=r[y],m=v._private.data;v.isNode()&&(m.parent=f)}p.restore(a,i)}),r.emitAndNotify("move")}}return this};[VT,B$,Tu,Ki,$o,U$,id,cV,uC,hC,pV,ph,Cu,Pr,ji,Wr].forEach(function(e){pe(Ye,e)});var wV={add:function(t){var r,a=this;if(ma(t)){var i=t;if(i._private.cy===a)r=i.restore();else{for(var n=[],s=0;s<i.length;s++){var o=i[s];n.push(o.json())}r=new Nr(a,n)}}else if(Ge(t)){var l=t;r=new Nr(a,l)}else if(De(t)&&(Ge(t.nodes)||Ge(t.edges))){for(var u=t,h=[],d=["nodes","edges"],f=0,p=d.length;f<p;f++){var y=d[f],v=u[y];if(Ge(v))for(var m=0,x=v.length;m<x;m++){var b=pe({group:y},v[m]);h.push(b)}}r=new Nr(a,h)}else{var w=t;r=new Qh(a,w).collection()}return r},remove:function(t){if(!ma(t)){if(ce(t)){var r=t;t=this.$(r)}}return t.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function kV(e,t,r,a){var i=4,n=.001,s=1e-7,o=10,l=11,u=1/(l-1),h=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var d=0;d<4;++d)if(typeof arguments[d]!="number"||isNaN(arguments[d])||!isFinite(arguments[d]))return!1;e=Math.min(e,1),r=Math.min(r,1),e=Math.max(e,0),r=Math.max(r,0);var f=h?new Float32Array(l):new Array(l);function p(A,E){return 1-3*E+3*A}function y(A,E){return 3*E-6*A}function v(A){return 3*A}function m(A,E,D){return((p(E,D)*A+y(E,D))*A+v(E))*A}function x(A,E,D){return 3*p(E,D)*A*A+2*y(E,D)*A+v(E)}function b(A,E){for(var D=0;D<i;++D){var R=x(E,e,r);if(R===0)return E;var O=m(E,e,r)-A;E-=O/R}return E}function w(){for(var A=0;A<l;++A)f[A]=m(A*u,e,r)}function C(A,E,D){var R,O,P=0;do O=E+(D-E)/2,R=m(O,e,r)-A,R>0?D=O:E=O;while(Math.abs(R)>s&&++P<o);return O}function T(A){for(var E=0,D=1,R=l-1;D!==R&&f[D]<=A;++D)E+=u;--D;var O=(A-f[D])/(f[D+1]-f[D]),P=E+O*u,$=x(P,e,r);return $>=n?b(A,P):$===0?P:C(A,E,E+u)}var k=!1;function S(){k=!0,(e!==t||r!==a)&&w()}var L=function(E){return k||S(),e===t&&r===a?E:E===0?0:E===1?1:m(T(E),t,a)};L.getControlPoints=function(){return[{x:e,y:t},{x:r,y:a}]};var _="generateBezier("+[e,t,r,a]+")";return L.toString=function(){return _},L}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var TV=function(){function e(a){return-a.tension*a.x-a.friction*a.v}function t(a,i,n){var s={x:a.x+n.dx*i,v:a.v+n.dv*i,tension:a.tension,friction:a.friction};return{dx:s.v,dv:e(s)}}function r(a,i){var n={dx:a.v,dv:e(a)},s=t(a,i*.5,n),o=t(a,i*.5,s),l=t(a,i,o),u=1/6*(n.dx+2*(s.dx+o.dx)+l.dx),h=1/6*(n.dv+2*(s.dv+o.dv)+l.dv);return a.x=a.x+u*i,a.v=a.v+h*i,a}return function a(i,n,s){var o={x:-1,v:0,tension:null,friction:null},l=[0],u=0,h=1/1e4,d=16/1e3,f,p,y;for(i=parseFloat(i)||500,n=parseFloat(n)||20,s=s||null,o.tension=i,o.friction=n,f=s!==null,f?(u=a(i,n),p=u/s*d):p=d;y=r(y||o,p),l.push(1+y.x),u+=16,Math.abs(y.x)>h&&Math.abs(y.v)>h;);return f?function(v){return l[v*(l.length-1)|0]}:u}}(),He=function(t,r,a,i){var n=kV(t,r,a,i);return function(s,o,l){return s+(o-s)*n(l)}},Su={linear:function(t,r,a){return t+(r-t)*a},ease:He(.25,.1,.25,1),"ease-in":He(.42,0,1,1),"ease-out":He(0,0,.58,1),"ease-in-out":He(.42,0,.58,1),"ease-in-sine":He(.47,0,.745,.715),"ease-out-sine":He(.39,.575,.565,1),"ease-in-out-sine":He(.445,.05,.55,.95),"ease-in-quad":He(.55,.085,.68,.53),"ease-out-quad":He(.25,.46,.45,.94),"ease-in-out-quad":He(.455,.03,.515,.955),"ease-in-cubic":He(.55,.055,.675,.19),"ease-out-cubic":He(.215,.61,.355,1),"ease-in-out-cubic":He(.645,.045,.355,1),"ease-in-quart":He(.895,.03,.685,.22),"ease-out-quart":He(.165,.84,.44,1),"ease-in-out-quart":He(.77,0,.175,1),"ease-in-quint":He(.755,.05,.855,.06),"ease-out-quint":He(.23,1,.32,1),"ease-in-out-quint":He(.86,0,.07,1),"ease-in-expo":He(.95,.05,.795,.035),"ease-out-expo":He(.19,1,.22,1),"ease-in-out-expo":He(1,0,0,1),"ease-in-circ":He(.6,.04,.98,.335),"ease-out-circ":He(.075,.82,.165,1),"ease-in-out-circ":He(.785,.135,.15,.86),spring:function(t,r,a){if(a===0)return Su.linear;var i=TV(t,r,a);return function(n,s,o){return n+(s-n)*i(o)}},"cubic-bezier":He};function a2(e,t,r,a,i){if(a===1||t===r)return r;var n=i(t,r,a);return e==null||((e.roundValue||e.color)&&(n=Math.round(n)),e.min!==void 0&&(n=Math.max(n,e.min)),e.max!==void 0&&(n=Math.min(n,e.max))),n}function i2(e,t){return e.pfValue!=null||e.value!=null?e.pfValue!=null&&(t==null||t.type.units!=="%")?e.pfValue:e.value:e}function os(e,t,r,a,i){var n=i!=null?i.type:null;r<0?r=0:r>1&&(r=1);var s=i2(e,i),o=i2(t,i);if(Vt(s)&&Vt(o))return a2(n,s,o,r,a);if(Ge(s)&&Ge(o)){for(var l=[],u=0;u<o.length;u++){var h=s[u],d=o[u];if(h!=null&&d!=null){var f=a2(n,h,d,r,a);l.push(f)}else l.push(d)}return l}}function CV(e,t,r,a){var i=!a,n=e._private,s=t._private,o=s.easing,l=s.startTime,u=a?e:e.cy(),h=u.style();if(!s.easingImpl)if(o==null)s.easingImpl=Su.linear;else{var d;if(ce(o)){var f=h.parse("transition-timing-function",o);d=f.value}else d=o;var p,y;ce(d)?(p=d,y=[]):(p=d[1],y=d.slice(2).map(function(F){return+F})),y.length>0?(p==="spring"&&y.push(s.duration),s.easingImpl=Su[p].apply(null,y)):s.easingImpl=Su[p]}var v=s.easingImpl,m;if(s.duration===0?m=1:m=(r-l)/s.duration,s.applying&&(m=s.progress),m<0?m=0:m>1&&(m=1),s.delay==null){var x=s.startPosition,b=s.position;if(b&&i&&!e.locked()){var w={};ll(x.x,b.x)&&(w.x=os(x.x,b.x,m,v)),ll(x.y,b.y)&&(w.y=os(x.y,b.y,m,v)),e.position(w)}var C=s.startPan,T=s.pan,k=n.pan,S=T!=null&&a;S&&(ll(C.x,T.x)&&(k.x=os(C.x,T.x,m,v)),ll(C.y,T.y)&&(k.y=os(C.y,T.y,m,v)),e.emit("pan"));var L=s.startZoom,_=s.zoom,A=_!=null&&a;A&&(ll(L,_)&&(n.zoom=tc(n.minZoom,os(L,_,m,v),n.maxZoom)),e.emit("zoom")),(S||A)&&e.emit("viewport");var E=s.style;if(E&&E.length>0&&i){for(var D=0;D<E.length;D++){var R=E[D],O=R.name,P=R,$=s.startStyle[O],M=h.properties[$.name],I=os($,P,m,v,M);h.overrideBypass(e,O,I)}e.emit("style")}}return s.progress=m,m}function ll(e,t){return e==null||t==null?!1:Vt(e)&&Vt(t)?!0:!!(e&&t)}function SV(e,t,r,a){var i=t._private;i.started=!0,i.startTime=r-i.progress*i.duration}function n2(e,t){var r=t._private.aniEles,a=[];function i(h,d){var f=h._private,p=f.animation.current,y=f.animation.queue,v=!1;if(p.length===0){var m=y.shift();m&&p.push(m)}for(var x=function(k){for(var S=k.length-1;S>=0;S--){var L=k[S];L()}k.splice(0,k.length)},b=p.length-1;b>=0;b--){var w=p[b],C=w._private;if(C.stopped){p.splice(b,1),C.hooked=!1,C.playing=!1,C.started=!1,x(C.frames);continue}!C.playing&&!C.applying||(C.playing&&C.applying&&(C.applying=!1),C.started||SV(h,w,e),CV(h,w,e,d),C.applying&&(C.applying=!1),x(C.frames),C.step!=null&&C.step(e),w.completed()&&(p.splice(b,1),C.hooked=!1,C.playing=!1,C.started=!1,x(C.completes)),v=!0)}return!d&&p.length===0&&y.length===0&&a.push(h),v}for(var n=!1,s=0;s<r.length;s++){var o=r[s],l=i(o);n=n||l}var u=i(t,!0);(n||u)&&(r.length>0?t.notify("draw",r):t.notify("draw")),r.unmerge(a),t.emit("step")}var EV={animate:Ie.animate(),animation:Ie.animation(),animated:Ie.animated(),clearQueue:Ie.clearQueue(),delay:Ie.delay(),delayAnimation:Ie.delayAnimation(),stop:Ie.stop(),addToAnimationPool:function(t){var r=this;r.styleEnabled()&&r._private.aniEles.merge(t)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var t=this;if(t._private.animationsRunning=!0,!t.styleEnabled())return;function r(){t._private.animationsRunning&&ch(function(n){n2(n,t),r()})}var a=t.renderer();a&&a.beforeRender?a.beforeRender(function(n,s){n2(s,t)},a.beforeRenderPriorities.animations):r()}},_V={qualifierCompare:function(t,r){return t==null||r==null?t==null&&r==null:t.sameText(r)},eventMatches:function(t,r,a){var i=r.qualifier;return i!=null?t!==a.target&&wc(a.target)&&i.matches(a.target):!0},addEventFields:function(t,r){r.cy=t,r.target=t},callbackContext:function(t,r,a){return r.qualifier!=null?a.target:t}},Zc=function(t){return ce(t)?new rn(t):t},pC={createEmitter:function(){var t=this._private;return t.emitter||(t.emitter=new nd(_V,this)),this},emitter:function(){return this._private.emitter},on:function(t,r,a){return this.emitter().on(t,Zc(r),a),this},removeListener:function(t,r,a){return this.emitter().removeListener(t,Zc(r),a),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(t,r,a){return this.emitter().one(t,Zc(r),a),this},once:function(t,r,a){return this.emitter().one(t,Zc(r),a),this},emit:function(t,r){return this.emitter().emit(t,r),this},emitAndNotify:function(t,r){return this.emit(t),this.notify(t,r),this}};Ie.eventAliasesOn(pC);var Cg={png:function(t){var r=this._private.renderer;return t=t||{},r.png(t)},jpg:function(t){var r=this._private.renderer;return t=t||{},t.bg=t.bg||"#fff",r.jpg(t)}};Cg.jpeg=Cg.jpg;var Eu={layout:function(t){var r=this;if(t==null){Qe("Layout options must be specified to make a layout");return}if(t.name==null){Qe("A `name` must be specified to make a layout");return}var a=t.name,i=r.extension("layout",a);if(i==null){Qe("No such layout `"+a+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var n;ce(t.eles)?n=r.$(t.eles):n=t.eles!=null?t.eles:r.$();var s=new i(pe({},t,{cy:r,eles:n}));return s}};Eu.createLayout=Eu.makeLayout=Eu.layout;var AV={notify:function(t,r){var a=this._private;if(this.batching()){a.batchNotifications=a.batchNotifications||{};var i=a.batchNotifications[t]=a.batchNotifications[t]||this.collection();r!=null&&i.merge(r);return}if(a.notificationsEnabled){var n=this.renderer();this.destroyed()||!n||n.notify(t,r)}},notifications:function(t){var r=this._private;return t===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!t,this)},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var t=this._private;return t.batchCount==null&&(t.batchCount=0),t.batchCount===0&&(t.batchStyleEles=this.collection(),t.batchNotifications={}),t.batchCount++,this},endBatch:function(){var t=this._private;if(t.batchCount===0)return this;if(t.batchCount--,t.batchCount===0){t.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(t.batchNotifications).forEach(function(a){var i=t.batchNotifications[a];i.empty()?r.notify(a):r.notify(a,i)})}return this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var r=this;return this.batch(function(){for(var a=Object.keys(t),i=0;i<a.length;i++){var n=a[i],s=t[n],o=r.getElementById(n);o.data(s)}})}},LV=Fr({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),Sg={renderTo:function(t,r,a,i){var n=this._private.renderer;return n.renderTo(t,r,a,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(t){var r=this,a=r.extension("renderer",t.name);if(a==null){Qe("Can not initialise: No such renderer `".concat(t.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}t.wheelSensitivity!==void 0&&Pe("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=LV(t);i.cy=r,r._private.renderer=new a(i),this.notify("init")},destroyRenderer:function(){var t=this;t.notify("destroy");var r=t.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);t._private.renderer=null,t.mutableElements().forEach(function(a){var i=a._private;i.rscratch={},i.rstyle={},i.animation.current=[],i.animation.queue=[]})},onRender:function(t){return this.on("render",t)},offRender:function(t){return this.off("render",t)}};Sg.invalidateDimensions=Sg.resize;var _u={collection:function(t,r){return ce(t)?this.$(t):ma(t)?t.collection():Ge(t)?(r||(r={}),new Nr(this,t,r.unique,r.removed)):new Nr(this)},nodes:function(t){var r=this.$(function(a){return a.isNode()});return t?r.filter(t):r},edges:function(t){var r=this.$(function(a){return a.isEdge()});return t?r.filter(t):r},$:function(t){var r=this._private.elements;return t?r.filter(t):r.spawnSelf()},mutableElements:function(){return this._private.elements}};_u.elements=_u.filter=_u.$;var Ar={},Rl="t",DV="f";Ar.apply=function(e){for(var t=this,r=t._private,a=r.cy,i=a.collection(),n=0;n<e.length;n++){var s=e[n],o=t.getContextMeta(s);if(!o.empty){var l=t.getContextStyle(o),u=t.applyContextStyle(o,l,s);s._private.appliedInitStyle?t.updateTransitions(s,u.diffProps):s._private.appliedInitStyle=!0;var h=t.updateStyleHints(s);h&&i.push(s)}}return i};Ar.getPropertiesDiff=function(e,t){var r=this,a=r._private.propDiffs=r._private.propDiffs||{},i=e+"-"+t,n=a[i];if(n)return n;for(var s=[],o={},l=0;l<r.length;l++){var u=r[l],h=e[l]===Rl,d=t[l]===Rl,f=h!==d,p=u.mappedProperties.length>0;if(f||d&&p){var y=void 0;f&&p||f?y=u.properties:p&&(y=u.mappedProperties);for(var v=0;v<y.length;v++){for(var m=y[v],x=m.name,b=!1,w=l+1;w<r.length;w++){var C=r[w],T=t[w]===Rl;if(T&&(b=C.properties[m.name]!=null,b))break}!o[x]&&!b&&(o[x]=!0,s.push(x))}}}return a[i]=s,s};Ar.getContextMeta=function(e){for(var t=this,r="",a,i=e._private.styleCxtKey||"",n=0;n<t.length;n++){var s=t[n],o=s.selector&&s.selector.matches(e);o?r+=Rl:r+=DV}return a=t.getPropertiesDiff(i,r),e._private.styleCxtKey=r,{key:r,diffPropNames:a,empty:a.length===0}};Ar.getContextStyle=function(e){var t=e.key,r=this,a=this._private.contextStyles=this._private.contextStyles||{};if(a[t])return a[t];for(var i={_private:{key:t}},n=0;n<r.length;n++){var s=r[n],o=t[n]===Rl;if(o)for(var l=0;l<s.properties.length;l++){var u=s.properties[l];i[u.name]=u}}return a[t]=i,i};Ar.applyContextStyle=function(e,t,r){for(var a=this,i=e.diffPropNames,n={},s=a.types,o=0;o<i.length;o++){var l=i[o],u=t[l],h=r.pstyle(l);if(!u)if(h)h.bypass?u={name:l,deleteBypassed:!0}:u={name:l,delete:!0};else continue;if(h!==u){if(u.mapped===s.fn&&h!=null&&h.mapping!=null&&h.mapping.value===u.value){var d=h.mapping,f=d.fnValue=u.value(r);if(f===d.prevFnValue)continue}var p=n[l]={prev:h};a.applyParsedProperty(r,u),p.next=r.pstyle(l),p.next&&p.next.bypass&&(p.next=p.next.bypassed)}}return{diffProps:n}};Ar.updateStyleHints=function(e){var t=e._private,r=this,a=r.propertyGroupNames,i=r.propertyGroupKeys,n=function(j,Y,st){return r.getPropertiesHash(j,Y,st)},s=t.styleKey;if(e.removed())return!1;var o=t.group==="nodes",l=e._private.style;a=Object.keys(l);for(var u=0;u<i.length;u++){var h=i[u];t.styleKeys[h]=[Ln,vs]}for(var d=function(j,Y){return t.styleKeys[Y][0]=Ql(j,t.styleKeys[Y][0])},f=function(j,Y){return t.styleKeys[Y][1]=Zl(j,t.styleKeys[Y][1])},p=function(j,Y){d(j,Y),f(j,Y)},y=function(j,Y){for(var st=0;st<j.length;st++){var W=j.charCodeAt(st);d(W,Y),f(W,Y)}},v=2e9,m=function(j){return-128<j&&j<128&&Math.floor(j)!==j?v-(j*1024|0):j},x=0;x<a.length;x++){var b=a[x],w=l[b];if(w!=null){var C=this.properties[b],T=C.type,k=C.groupKey,S=void 0;C.hashOverride!=null?S=C.hashOverride(e,w):w.pfValue!=null&&(S=w.pfValue);var L=C.enums==null?w.value:null,_=S!=null,A=L!=null,E=_||A,D=w.units;if(T.number&&E&&!T.multiple){var R=_?S:L;p(m(R),k),!_&&D!=null&&y(D,k)}else y(w.strValue,k)}}for(var O=[Ln,vs],P=0;P<i.length;P++){var $=i[P],M=t.styleKeys[$];O[0]=Ql(M[0],O[0]),O[1]=Zl(M[1],O[1])}t.styleKey=KM(O[0],O[1]);var I=t.styleKeys;t.labelDimsKey=Oi(I.labelDimensions);var F=n(e,["label"],I.labelDimensions);if(t.labelKey=Oi(F),t.labelStyleKey=Oi(Gc(I.commonLabel,F)),!o){var V=n(e,["source-label"],I.labelDimensions);t.sourceLabelKey=Oi(V),t.sourceLabelStyleKey=Oi(Gc(I.commonLabel,V));var N=n(e,["target-label"],I.labelDimensions);t.targetLabelKey=Oi(N),t.targetLabelStyleKey=Oi(Gc(I.commonLabel,N))}if(o){var q=t.styleKeys,U=q.nodeBody,X=q.nodeBorder,lt=q.nodeOutline,J=q.backgroundImage,ct=q.compound,yt=q.pie,ut=q.stripe,Q=[U,X,lt,J,ct,yt,ut].filter(function(K){return K!=null}).reduce(Gc,[Ln,vs]);t.nodeKey=Oi(Q),t.hasPie=yt!=null&&yt[0]!==Ln&&yt[1]!==vs,t.hasStripe=ut!=null&&ut[0]!==Ln&&ut[1]!==vs}return s!==t.styleKey};Ar.clearStyleHints=function(e){var t=e._private;t.styleCxtKey="",t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null,t.hasStripe=null};Ar.applyParsedProperty=function(e,t){var r=this,a=t,i=e._private.style,n,s=r.types,o=r.properties[a.name].type,l=a.bypass,u=i[a.name],h=u&&u.bypass,d=e._private,f="mapping",p=function(U){return U==null?null:U.pfValue!=null?U.pfValue:U.value},y=function(){var U=p(u),X=p(a);r.checkTriggers(e,a.name,U,X)};if(t.name==="curve-style"&&e.isEdge()&&(t.value!=="bezier"&&e.isLoop()||t.value==="haystack"&&(e.source().isParent()||e.target().isParent()))&&(a=t=this.parse(t.name,"bezier",l)),a.delete)return i[a.name]=void 0,y(),!0;if(a.deleteBypassed)return u?u.bypass?(u.bypassed=void 0,y(),!0):!1:(y(),!0);if(a.deleteBypass)return u?u.bypass?(i[a.name]=u.bypassed,y(),!0):!1:(y(),!0);var v=function(){Pe("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+a.name+"` with data field `"+a.field+"`); try a `["+a.field+"]` selector to limit scope to elements with `"+a.field+"` defined")};switch(a.mapped){case s.mapData:{for(var m=a.field.split("."),x=d.data,b=0;b<m.length&&x;b++){var w=m[b];x=x[w]}if(x==null)return v(),!1;var C;if(Vt(x)){var T=a.fieldMax-a.fieldMin;T===0?C=0:C=(x-a.fieldMin)/T}else return Pe("Do not use continuous mappers without specifying numeric data (i.e. `"+a.field+": "+x+"` for `"+e.id()+"` is non-numeric)"),!1;if(C<0?C=0:C>1&&(C=1),o.color){var k=a.valueMin[0],S=a.valueMax[0],L=a.valueMin[1],_=a.valueMax[1],A=a.valueMin[2],E=a.valueMax[2],D=a.valueMin[3]==null?1:a.valueMin[3],R=a.valueMax[3]==null?1:a.valueMax[3],O=[Math.round(k+(S-k)*C),Math.round(L+(_-L)*C),Math.round(A+(E-A)*C),Math.round(D+(R-D)*C)];n={bypass:a.bypass,name:a.name,value:O,strValue:"rgb("+O[0]+", "+O[1]+", "+O[2]+")"}}else if(o.number){var P=a.valueMin+(a.valueMax-a.valueMin)*C;n=this.parse(a.name,P,a.bypass,f)}else return!1;if(!n)return v(),!1;n.mapping=a,a=n;break}case s.data:{for(var $=a.field.split("."),M=d.data,I=0;I<$.length&&M;I++){var F=$[I];M=M[F]}if(M!=null&&(n=this.parse(a.name,M,a.bypass,f)),!n)return v(),!1;n.mapping=a,a=n;break}case s.fn:{var V=a.value,N=a.fnValue!=null?a.fnValue:V(e);if(a.prevFnValue=N,N==null)return Pe("Custom function mappers may not return null (i.e. `"+a.name+"` for ele `"+e.id()+"` is null)"),!1;if(n=this.parse(a.name,N,a.bypass,f),!n)return Pe("Custom function mappers may not return invalid values for the property type (i.e. `"+a.name+"` for ele `"+e.id()+"` is invalid)"),!1;n.mapping=ni(a),a=n;break}case void 0:break;default:return!1}return l?(h?a.bypassed=u.bypassed:a.bypassed=u,i[a.name]=a):h?u.bypassed=a:i[a.name]=a,y(),!0};Ar.cleanElements=function(e,t){for(var r=0;r<e.length;r++){var a=e[r];if(this.clearStyleHints(a),a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),!t)a._private.style={};else for(var i=a._private.style,n=Object.keys(i),s=0;s<n.length;s++){var o=n[s],l=i[o];l!=null&&(l.bypass?l.bypassed=null:i[o]=null)}}};Ar.update=function(){var e=this._private.cy,t=e.mutableElements();t.updateStyle()};Ar.updateTransitions=function(e,t){var r=this,a=e._private,i=e.pstyle("transition-property").value,n=e.pstyle("transition-duration").pfValue,s=e.pstyle("transition-delay").pfValue;if(i.length>0&&n>0){for(var o={},l=!1,u=0;u<i.length;u++){var h=i[u],d=e.pstyle(h),f=t[h];if(f){var p=f.prev,y=p,v=f.next!=null?f.next:d,m=!1,x=void 0,b=1e-6;y&&(Vt(y.pfValue)&&Vt(v.pfValue)?(m=v.pfValue-y.pfValue,x=y.pfValue+b*m):Vt(y.value)&&Vt(v.value)?(m=v.value-y.value,x=y.value+b*m):Ge(y.value)&&Ge(v.value)&&(m=y.value[0]!==v.value[0]||y.value[1]!==v.value[1]||y.value[2]!==v.value[2],x=y.strValue),m&&(o[h]=v.strValue,this.applyBypass(e,h,x),l=!0))}}if(!l)return;a.transitioning=!0,new Qo(function(w){s>0?e.delayAnimation(s).play().promise().then(w):w()}).then(function(){return e.animation({style:o,duration:n,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(e,i),e.emitAndNotify("style"),a.transitioning=!1})}else a.transitioning&&(this.removeBypasses(e,i),e.emitAndNotify("style"),a.transitioning=!1)};Ar.checkTrigger=function(e,t,r,a,i,n){var s=this.properties[t],o=i(s);e.removed()||o!=null&&o(r,a,e)&&n(s)};Ar.checkZOrderTrigger=function(e,t,r,a){var i=this;this.checkTrigger(e,t,r,a,function(n){return n.triggersZOrder},function(){i._private.cy.notify("zorder",e)})};Ar.checkBoundsTrigger=function(e,t,r,a){this.checkTrigger(e,t,r,a,function(i){return i.triggersBounds},function(i){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache()})};Ar.checkConnectedEdgesBoundsTrigger=function(e,t,r,a){this.checkTrigger(e,t,r,a,function(i){return i.triggersBoundsOfConnectedEdges},function(i){e.connectedEdges().forEach(function(n){n.dirtyBoundingBoxCache()})})};Ar.checkParallelEdgesBoundsTrigger=function(e,t,r,a){this.checkTrigger(e,t,r,a,function(i){return i.triggersBoundsOfParallelEdges},function(i){e.parallelEdges().forEach(function(n){n.dirtyBoundingBoxCache()})})};Ar.checkTriggers=function(e,t,r,a){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,r,a),this.checkBoundsTrigger(e,t,r,a),this.checkConnectedEdgesBoundsTrigger(e,t,r,a),this.checkParallelEdgesBoundsTrigger(e,t,r,a)};var Ac={};Ac.applyBypass=function(e,t,r,a){var i=this,n=[],s=!0;if(t==="*"||t==="**"){if(r!==void 0)for(var o=0;o<i.properties.length;o++){var l=i.properties[o],u=l.name,h=this.parse(u,r,!0);h&&n.push(h)}}else if(ce(t)){var d=this.parse(t,r,!0);d&&n.push(d)}else if(De(t)){var f=t;a=r;for(var p=Object.keys(f),y=0;y<p.length;y++){var v=p[y],m=f[v];if(m===void 0&&(m=f[Kh(v)]),m!==void 0){var x=this.parse(v,m,!0);x&&n.push(x)}}}else return!1;if(n.length===0)return!1;for(var b=!1,w=0;w<e.length;w++){for(var C=e[w],T={},k=void 0,S=0;S<n.length;S++){var L=n[S];if(a){var _=C.pstyle(L.name);k=T[L.name]={prev:_}}b=this.applyParsedProperty(C,ni(L))||b,a&&(k.next=C.pstyle(L.name))}b&&this.updateStyleHints(C),a&&this.updateTransitions(C,T,s)}return b};Ac.overrideBypass=function(e,t,r){t=u1(t);for(var a=0;a<e.length;a++){var i=e[a],n=i._private.style[t],s=this.properties[t].type,o=s.color,l=s.mutiple,u=n?n.pfValue!=null?n.pfValue:n.value:null;!n||!n.bypass?this.applyBypass(i,t,r):(n.value=r,n.pfValue!=null&&(n.pfValue=r),o?n.strValue="rgb("+r.join(",")+")":l?n.strValue=r.join(" "):n.strValue=""+r,this.updateStyleHints(i)),this.checkTriggers(i,t,u,r)}};Ac.removeAllBypasses=function(e,t){return this.removeBypasses(e,this.propertyNames,t)};Ac.removeBypasses=function(e,t,r){for(var a=!0,i=0;i<e.length;i++){for(var n=e[i],s={},o=0;o<t.length;o++){var l=t[o],u=this.properties[l],h=n.pstyle(u.name);if(!(!h||!h.bypass)){var d="",f=this.parse(l,d,!0),p=s[u.name]={prev:h};this.applyParsedProperty(n,f),p.next=n.pstyle(u.name)}}this.updateStyleHints(n),r&&this.updateTransitions(n,s,a)}};var S1={};S1.getEmSizeInPixels=function(){var e=this.containerCss("font-size");return e!=null?parseFloat(e):1};S1.containerCss=function(e){var t=this._private.cy,r=t.container(),a=t.window();if(a&&r&&a.getComputedStyle)return a.getComputedStyle(r).getPropertyValue(e)};var ci={};ci.getRenderedStyle=function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)};ci.getRawStyle=function(e,t){var r=this;if(e=e[0],e){for(var a={},i=0;i<r.properties.length;i++){var n=r.properties[i],s=r.getStylePropertyValue(e,n.name,t);s!=null&&(a[n.name]=s,a[Kh(n.name)]=s)}return a}};ci.getIndexedStyle=function(e,t,r,a){var i=e.pstyle(t)[r][a];return i??e.cy().style().getDefaultProperty(t)[r][0]};ci.getStylePropertyValue=function(e,t,r){var a=this;if(e=e[0],e){var i=a.properties[t];i.alias&&(i=i.pointsTo);var n=i.type,s=e.pstyle(i.name);if(s){var o=s.value,l=s.units,u=s.strValue;if(r&&n.number&&o!=null&&Vt(o)){var h=e.cy().zoom(),d=function(m){return m*h},f=function(m,x){return d(m)+x},p=Ge(o),y=p?l.every(function(v){return v!=null}):l!=null;return y?p?o.map(function(v,m){return f(v,l[m])}).join(" "):f(o,l):p?o.map(function(v){return ce(v)?v:""+d(v)}).join(" "):""+d(o)}else if(u!=null)return u}return null}};ci.getAnimationStartStyle=function(e,t){for(var r={},a=0;a<t.length;a++){var i=t[a],n=i.name,s=e.pstyle(n);s!==void 0&&(De(s)?s=this.parse(n,s.strValue):s=this.parse(n,s)),s&&(r[n]=s)}return r};ci.getPropsList=function(e){var t=this,r=[],a=e,i=t.properties;if(a)for(var n=Object.keys(a),s=0;s<n.length;s++){var o=n[s],l=a[o],u=i[o]||i[u1(o)],h=this.parse(u.name,l);h&&r.push(h)}return r};ci.getNonDefaultPropertiesHash=function(e,t,r){var a=r.slice(),i,n,s,o,l,u;for(l=0;l<t.length;l++)if(i=t[l],n=e.pstyle(i,!1),n!=null)if(n.pfValue!=null)a[0]=Ql(o,a[0]),a[1]=Zl(o,a[1]);else for(s=n.strValue,u=0;u<s.length;u++)o=s.charCodeAt(u),a[0]=Ql(o,a[0]),a[1]=Zl(o,a[1]);return a};ci.getPropertiesHash=ci.getNonDefaultPropertiesHash;var ld={};ld.appendFromJson=function(e){for(var t=this,r=0;r<e.length;r++){var a=e[r],i=a.selector,n=a.style||a.css,s=Object.keys(n);t.selector(i);for(var o=0;o<s.length;o++){var l=s[o],u=n[l];t.css(l,u)}}return t};ld.fromJson=function(e){var t=this;return t.resetToDefault(),t.appendFromJson(e),t};ld.json=function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var r=this[t],a=r.selector,i=r.properties,n={},s=0;s<i.length;s++){var o=i[s];n[o.name]=o.strValue}e.push({selector:a?a.toString():"core",style:n})}return e};var E1={};E1.appendFromString=function(e){var t=this,r=this,a=""+e,i,n,s;a=a.replace(/[/][*](\s|.)+?[*][/]/g,"");function o(){a.length>i.length?a=a.substr(i.length):a=""}function l(){n.length>s.length?n=n.substr(s.length):n=""}for(;;){var u=a.match(/^\s*$/);if(u)break;var h=a.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!h){Pe("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+a);break}i=h[0];var d=h[1];if(d!=="core"){var f=new rn(d);if(f.invalid){Pe("Skipping parsing of block: Invalid selector found in string stylesheet: "+d),o();continue}}var p=h[2],y=!1;n=p;for(var v=[];;){var m=n.match(/^\s*$/);if(m)break;var x=n.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!x){Pe("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+p),y=!0;break}s=x[0];var b=x[1],w=x[2],C=t.properties[b];if(!C){Pe("Skipping property: Invalid property name in: "+s),l();continue}var T=r.parse(b,w);if(!T){Pe("Skipping property: Invalid property definition in: "+s),l();continue}v.push({name:b,val:w}),l()}if(y){o();break}r.selector(d);for(var k=0;k<v.length;k++){var S=v[k];r.css(S.name,S.val)}o()}return r};E1.fromString=function(e){var t=this;return t.resetToDefault(),t.appendFromString(e),t};var sr={};(function(){var e=gr,t=_M,r=LM,a=DM,i=BM,n=function(K){return"^"+K+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(K){var j=e+"|\\w+|"+t+"|"+r+"|"+a+"|"+i;return"^"+K+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+j+")\\s*\\,\\s*("+j+")\\)$"},o=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];sr.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:n("data")},layoutData:{mapping:!0,regex:n("layoutData")},scratch:{mapping:!0,regex:n("scratch")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},mapScratch:{mapping:!0,regex:s("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:o,singleRegexMatchValue:!0},urls:{regexes:o,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(K,j){switch(K.length){case 2:return j[0]!=="deg"&&j[0]!=="rad"&&j[1]!=="deg"&&j[1]!=="rad";case 1:return ce(K[0])||j[0]==="deg"||j[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(K){var j=K.length;return j===1||j===2||j===4}}};var l={zeroNonZero:function(K,j){return(K==null||j==null)&&K!==j||K==0&&j!=0?!0:K!=0&&j==0},any:function(K,j){return K!=j},emptyNonEmpty:function(K,j){var Y=Ji(K),st=Ji(j);return Y&&!st||!Y&&st}},u=sr.types,h=[{name:"label",type:u.text,triggersBounds:l.any,triggersZOrder:l.emptyNonEmpty},{name:"text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any}],d=[{name:"source-label",type:u.text,triggersBounds:l.any},{name:"source-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:u.size,triggersBounds:l.any}],f=[{name:"target-label",type:u.text,triggersBounds:l.any},{name:"target-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:u.size,triggersBounds:l.any}],p=[{name:"font-family",type:u.fontFamily,triggersBounds:l.any},{name:"font-style",type:u.fontStyle,triggersBounds:l.any},{name:"font-weight",type:u.fontWeight,triggersBounds:l.any},{name:"font-size",type:u.size,triggersBounds:l.any},{name:"text-transform",type:u.textTransform,triggersBounds:l.any},{name:"text-wrap",type:u.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:u.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:u.size,triggersBounds:l.any},{name:"text-outline-width",type:u.size,triggersBounds:l.any},{name:"line-height",type:u.positiveNumber,triggersBounds:l.any}],y=[{name:"text-valign",type:u.valign,triggersBounds:l.any},{name:"text-halign",type:u.halign,triggersBounds:l.any},{name:"color",type:u.color},{name:"text-outline-color",type:u.color},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-background-color",type:u.color},{name:"text-background-opacity",type:u.zeroOneNumber},{name:"text-background-padding",type:u.size,triggersBounds:l.any},{name:"text-border-opacity",type:u.zeroOneNumber},{name:"text-border-color",type:u.color},{name:"text-border-width",type:u.size,triggersBounds:l.any},{name:"text-border-style",type:u.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:u.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:u.justification},{name:"box-select-labels",type:u.bool,triggersBounds:l.any}],v=[{name:"events",type:u.bool,triggersZOrder:l.any},{name:"text-events",type:u.bool,triggersZOrder:l.any}],m=[{name:"display",type:u.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfConnectedEdges:l.any,triggersBoundsOfParallelEdges:function(K,j,Y){return K===j?!1:Y.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:u.visibility,triggersZOrder:l.any},{name:"opacity",type:u.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:u.zeroOneNumber},{name:"min-zoomed-font-size",type:u.size},{name:"z-compound-depth",type:u.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:u.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:u.number,triggersZOrder:l.any}],x=[{name:"overlay-padding",type:u.size,triggersBounds:l.any},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"overlay-shape",type:u.overlayShape,triggersBounds:l.any},{name:"overlay-corner-radius",type:u.cornerRadius}],b=[{name:"underlay-padding",type:u.size,triggersBounds:l.any},{name:"underlay-color",type:u.color},{name:"underlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"underlay-shape",type:u.overlayShape,triggersBounds:l.any},{name:"underlay-corner-radius",type:u.cornerRadius}],w=[{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"transition-timing-function",type:u.easing}],C=function(K,j){return j.value==="label"?-K.poolIndex():j.pfValue},T=[{name:"height",type:u.nodeSize,triggersBounds:l.any,hashOverride:C},{name:"width",type:u.nodeSize,triggersBounds:l.any,hashOverride:C},{name:"shape",type:u.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:u.polygonPointList,triggersBounds:l.any},{name:"corner-radius",type:u.cornerRadius},{name:"background-color",type:u.color},{name:"background-fill",type:u.fill},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"background-gradient-stop-colors",type:u.colors},{name:"background-gradient-stop-positions",type:u.percentages},{name:"background-gradient-direction",type:u.gradientDirection},{name:"padding",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:u.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:u.boundsExpansion,triggersBounds:l.any}],k=[{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size,triggersBounds:l.any},{name:"border-style",type:u.borderStyle},{name:"border-cap",type:u.lineCap},{name:"border-join",type:u.lineJoin},{name:"border-dash-pattern",type:u.numbers},{name:"border-dash-offset",type:u.number},{name:"border-position",type:u.linePosition}],S=[{name:"outline-color",type:u.color},{name:"outline-opacity",type:u.zeroOneNumber},{name:"outline-width",type:u.size,triggersBounds:l.any},{name:"outline-style",type:u.borderStyle},{name:"outline-offset",type:u.size,triggersBounds:l.any}],L=[{name:"background-image",type:u.urls},{name:"background-image-crossorigin",type:u.bgCrossOrigin},{name:"background-image-opacity",type:u.zeroOneNumbers},{name:"background-image-containment",type:u.bgContainment},{name:"background-image-smoothing",type:u.bools},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-width-relative-to",type:u.bgRelativeTo},{name:"background-height-relative-to",type:u.bgRelativeTo},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"background-width",type:u.bgWH},{name:"background-height",type:u.bgWH},{name:"background-offset-x",type:u.bgPos},{name:"background-offset-y",type:u.bgPos}],_=[{name:"position",type:u.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:u.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:u.size,triggersBounds:l.any},{name:"min-width-bias-left",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:u.size,triggersBounds:l.any},{name:"min-height-bias-top",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:u.sizeMaybePercent,triggersBounds:l.any}],A=[{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"line-fill",type:u.fill},{name:"line-cap",type:u.lineCap},{name:"line-opacity",type:u.zeroOneNumber},{name:"line-dash-pattern",type:u.numbers},{name:"line-dash-offset",type:u.number},{name:"line-outline-width",type:u.size},{name:"line-outline-color",type:u.color},{name:"line-gradient-stop-colors",type:u.colors},{name:"line-gradient-stop-positions",type:u.percentages},{name:"curve-style",type:u.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelEdges:function(K,j){return K===j?!1:K==="bezier"||j==="bezier"}},{name:"haystack-radius",type:u.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:u.size,triggersBounds:l.any},{name:"control-point-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-radii",type:u.numbers,triggersBounds:l.any},{name:"radius-type",type:u.radiusType,triggersBounds:l.any},{name:"taxi-turn",type:u.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:u.size,triggersBounds:l.any},{name:"taxi-direction",type:u.axisDirection,triggersBounds:l.any},{name:"taxi-radius",type:u.number,triggersBounds:l.any},{name:"edge-distances",type:u.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:u.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:u.angle,triggersBounds:l.any},{name:"loop-sweep",type:u.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:u.size,triggersBounds:l.any},{name:"target-distance-from-node",type:u.size,triggersBounds:l.any}],E=[{name:"ghost",type:u.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:u.zeroOneNumber}],D=[{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}],R=[];sr.pieBackgroundN=16,R.push({name:"pie-size",type:u.sizeMaybePercent}),R.push({name:"pie-hole",type:u.sizeMaybePercent}),R.push({name:"pie-start-angle",type:u.angle});for(var O=1;O<=sr.pieBackgroundN;O++)R.push({name:"pie-"+O+"-background-color",type:u.color}),R.push({name:"pie-"+O+"-background-size",type:u.percent}),R.push({name:"pie-"+O+"-background-opacity",type:u.zeroOneNumber});var P=[];sr.stripeBackgroundN=16,P.push({name:"stripe-size",type:u.sizeMaybePercent}),P.push({name:"stripe-direction",type:u.axisDirectionPrimary});for(var $=1;$<=sr.stripeBackgroundN;$++)P.push({name:"stripe-"+$+"-background-color",type:u.color}),P.push({name:"stripe-"+$+"-background-size",type:u.percent}),P.push({name:"stripe-"+$+"-background-opacity",type:u.zeroOneNumber});var M=[],I=sr.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:u.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:u.color},{name:"arrow-fill",type:u.arrowFill},{name:"arrow-width",type:u.arrowWidth}].forEach(function(Q){I.forEach(function(K){var j=K+"-"+Q.name,Y=Q.type,st=Q.triggersBounds;M.push({name:j,type:Y,triggersBounds:st})})},{});var F=sr.properties=[].concat(v,w,m,x,b,E,y,p,h,d,f,T,k,S,L,R,P,_,A,M,D),V=sr.propertyGroups={behavior:v,transition:w,visibility:m,overlay:x,underlay:b,ghost:E,commonLabel:y,labelDimensions:p,mainLabel:h,sourceLabel:d,targetLabel:f,nodeBody:T,nodeBorder:k,nodeOutline:S,backgroundImage:L,pie:R,stripe:P,compound:_,edgeLine:A,edgeArrow:M,core:D},N=sr.propertyGroupNames={},q=sr.propertyGroupKeys=Object.keys(V);q.forEach(function(Q){N[Q]=V[Q].map(function(K){return K.name}),V[Q].forEach(function(K){return K.groupKey=Q})});var U=sr.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];sr.propertyNames=F.map(function(Q){return Q.name});for(var X=0;X<F.length;X++){var lt=F[X];F[lt.name]=lt}for(var J=0;J<U.length;J++){var ct=U[J],yt=F[ct.pointsTo],ut={name:ct.name,alias:!0,pointsTo:yt};F.push(ut),F[ct.name]=ut}})();sr.getDefaultProperty=function(e){return this.getDefaultProperties()[e]};sr.getDefaultProperties=function(){var e=this._private;if(e.defaultProperties!=null)return e.defaultProperties;for(var t=pe({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(l,u){for(var h=1;h<=sr.pieBackgroundN;h++){var d=u.name.replace("{{i}}",h),f=u.value;l[d]=f}return l},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(l,u){for(var h=1;h<=sr.stripeBackgroundN;h++){var d=u.name.replace("{{i}}",h),f=u.value;l[d]=f}return l},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(l,u){return sr.arrowPrefixes.forEach(function(h){var d=h+"-"+u.name,f=u.value;l[d]=f}),l},{})),r={},a=0;a<this.properties.length;a++){var i=this.properties[a];if(!i.pointsTo){var n=i.name,s=t[n],o=this.parse(n,s);r[n]=o}}return e.defaultProperties=r,e.defaultProperties};sr.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var cd={};cd.parse=function(e,t,r,a){var i=this;if(Ze(t))return i.parseImplWarn(e,t,r,a);var n=a==="mapping"||a===!0||a===!1||a==null?"dontcare":a,s=r?"t":"f",o=""+t,l=ET(e,o,s,n),u=i.propCache=i.propCache||[],h;return(h=u[l])||(h=u[l]=i.parseImplWarn(e,t,r,a)),(r||a==="mapping")&&(h=ni(h),h&&(h.value=ni(h.value))),h};cd.parseImplWarn=function(e,t,r,a){var i=this.parseImpl(e,t,r,a);return!i&&t!=null&&Pe("The style property `".concat(e,": ").concat(t,"` is invalid")),i&&(i.name==="width"||i.name==="height")&&t==="label"&&Pe("The style value of `label` is deprecated for `"+i.name+"`"),i};cd.parseImpl=function(e,t,r,a){var i=this;e=u1(e);var n=i.properties[e],s=t,o=i.types;if(!n||t===void 0)return null;n.alias&&(n=n.pointsTo,e=n.name);var l=ce(t);l&&(t=t.trim());var u=n.type;if(!u)return null;if(r&&(t===""||t===null))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(Ze(t))return{name:e,value:t,strValue:"fn",mapped:o.fn,bypass:r};var h,d;if(!(!l||a||t.length<7||t[1]!=="a")){if(t.length>=7&&t[0]==="d"&&(h=new RegExp(o.data.regex).exec(t))){if(r)return!1;var f=o.data;return{name:e,value:h,strValue:""+t,mapped:f,field:h[1],bypass:r}}else if(t.length>=10&&t[0]==="m"&&(d=new RegExp(o.mapData.regex).exec(t))){if(r||u.multiple)return!1;var p=o.mapData;if(!(u.color||u.number))return!1;var y=this.parse(e,d[4]);if(!y||y.mapped)return!1;var v=this.parse(e,d[5]);if(!v||v.mapped)return!1;if(y.pfValue===v.pfValue||y.strValue===v.strValue)return Pe("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+y.strValue+"`"),this.parse(e,y.strValue);if(u.color){var m=y.value,x=v.value,b=m[0]===x[0]&&m[1]===x[1]&&m[2]===x[2]&&(m[3]===x[3]||(m[3]==null||m[3]===1)&&(x[3]==null||x[3]===1));if(b)return!1}return{name:e,value:d,strValue:""+t,mapped:p,field:d[1],fieldMin:parseFloat(d[2]),fieldMax:parseFloat(d[3]),valueMin:y.value,valueMax:v.value,bypass:r}}}if(u.multiple&&a!=="multiple"){var w;if(l?w=t.split(/\s+/):Ge(t)?w=t:w=[t],u.evenMultiple&&w.length%2!==0)return null;for(var C=[],T=[],k=[],S="",L=!1,_=0;_<w.length;_++){var A=i.parse(e,w[_],r,"multiple");L=L||ce(A.value),C.push(A.value),k.push(A.pfValue!=null?A.pfValue:A.value),T.push(A.units),S+=(_>0?" ":"")+A.strValue}return u.validate&&!u.validate(C,T)?null:u.singleEnum&&L?C.length===1&&ce(C[0])?{name:e,value:C[0],strValue:C[0],bypass:r}:null:{name:e,value:C,pfValue:k,strValue:S,bypass:r,units:T}}var E=function(){for(var ut=0;ut<u.enums.length;ut++){var Q=u.enums[ut];if(Q===t)return{name:e,value:t,strValue:""+t,bypass:r}}return null};if(u.number){var D,R="px";if(u.units&&(D=u.units),u.implicitUnits&&(R=u.implicitUnits),!u.unitless)if(l){var O="px|em"+(u.allowPercent?"|\\%":"");D&&(O=D);var P=t.match("^("+gr+")("+O+")?$");P&&(t=P[1],D=P[2]||R)}else(!D||u.implicitUnits)&&(D=R);if(t=parseFloat(t),isNaN(t)&&u.enums===void 0)return null;if(isNaN(t)&&u.enums!==void 0)return t=s,E();if(u.integer&&!bM(t)||u.min!==void 0&&(t<u.min||u.strictMin&&t===u.min)||u.max!==void 0&&(t>u.max||u.strictMax&&t===u.max))return null;var $={name:e,value:t,strValue:""+t+(D||""),units:D,bypass:r};return u.unitless||D!=="px"&&D!=="em"?$.pfValue=t:$.pfValue=D==="px"||!D?t:this.getEmSizeInPixels()*t,(D==="ms"||D==="s")&&($.pfValue=D==="ms"?t:1e3*t),(D==="deg"||D==="rad")&&($.pfValue=D==="rad"?t:_F(t)),D==="%"&&($.pfValue=t/100),$}else if(u.propList){var M=[],I=""+t;if(I!=="none"){for(var F=I.split(/\s*,\s*|\s+/),V=0;V<F.length;V++){var N=F[V].trim();i.properties[N]?M.push(N):Pe("`"+N+"` is not a valid property name")}if(M.length===0)return null}return{name:e,value:M,strValue:M.length===0?"none":M.join(" "),bypass:r}}else if(u.color){var q=xT(t);return q?{name:e,value:q,pfValue:q,strValue:"rgb("+q[0]+","+q[1]+","+q[2]+")",bypass:r}:null}else if(u.regex||u.regexes){if(u.enums){var U=E();if(U)return U}for(var X=u.regexes?u.regexes:[u.regex],lt=0;lt<X.length;lt++){var J=new RegExp(X[lt]),ct=J.exec(t);if(ct)return{name:e,value:u.singleRegexMatchValue?ct[1]:ct,strValue:""+t,bypass:r}}return null}else return u.string?{name:e,value:""+t,strValue:""+t,bypass:r}:u.enums?E():null};var Cr=function(t){if(!(this instanceof Cr))return new Cr(t);if(!c1(t)){Qe("A style must have a core reference");return}this._private={cy:t,coreStyle:{}},this.length=0,this.resetToDefault()},Gr=Cr.prototype;Gr.instanceString=function(){return"style"};Gr.clear=function(){for(var e=this._private,t=e.cy,r=t.elements(),a=0;a<this.length;a++)this[a]=void 0;return this.length=0,e.contextStyles={},e.propDiffs={},this.cleanElements(r,!0),r.forEach(function(i){var n=i[0]._private;n.styleDirty=!0,n.appliedInitStyle=!1}),this};Gr.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};Gr.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)};Gr.selector=function(e){var t=e==="core"?null:new rn(e),r=this.length++;return this[r]={selector:t,properties:[],mappedProperties:[],index:r},this};Gr.css=function(){var e=this,t=arguments;if(t.length===1)for(var r=t[0],a=0;a<e.properties.length;a++){var i=e.properties[a],n=r[i.name];n===void 0&&(n=r[Kh(i.name)]),n!==void 0&&this.cssRule(i.name,n)}else t.length===2&&this.cssRule(t[0],t[1]);return this};Gr.style=Gr.css;Gr.cssRule=function(e,t){var r=this.parse(e,t);if(r){var a=this.length-1;this[a].properties.push(r),this[a].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.name.match(/stripe-(\d+)-background-size/)&&r.value&&(this._private.hasStripe=!0),r.mapped&&this[a].mappedProperties.push(r);var i=!this[a].selector;i&&(this._private.coreStyle[r.name]=r)}return this};Gr.append=function(e){return yT(e)?e.appendToStyle(this):Ge(e)?this.appendFromJson(e):ce(e)&&this.appendFromString(e),this};Cr.fromJson=function(e,t){var r=new Cr(e);return r.fromJson(t),r};Cr.fromString=function(e,t){return new Cr(e).fromString(t)};[Ar,Ac,S1,ci,ld,E1,sr,cd].forEach(function(e){pe(Gr,e)});Cr.types=Gr.types;Cr.properties=Gr.properties;Cr.propertyGroups=Gr.propertyGroups;Cr.propertyGroupNames=Gr.propertyGroupNames;Cr.propertyGroupKeys=Gr.propertyGroupKeys;var BV={style:function(t){if(t){var r=this.setStyle(t);r.update()}return this._private.style},setStyle:function(t){var r=this._private;return yT(t)?r.style=t.generateStyle(this):Ge(t)?r.style=Cr.fromJson(this,t):ce(t)?r.style=Cr.fromString(this,t):r.style=Cr(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},RV="single",Un={autolock:function(t){if(t!==void 0)this._private.autolock=!!t;else return this._private.autolock;return this},autoungrabify:function(t){if(t!==void 0)this._private.autoungrabify=!!t;else return this._private.autoungrabify;return this},autounselectify:function(t){if(t!==void 0)this._private.autounselectify=!!t;else return this._private.autounselectify;return this},selectionType:function(t){var r=this._private;if(r.selectionType==null&&(r.selectionType=RV),t!==void 0)(t==="additive"||t==="single")&&(r.selectionType=t);else return r.selectionType;return this},panningEnabled:function(t){if(t!==void 0)this._private.panningEnabled=!!t;else return this._private.panningEnabled;return this},userPanningEnabled:function(t){if(t!==void 0)this._private.userPanningEnabled=!!t;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(t){if(t!==void 0)this._private.zoomingEnabled=!!t;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(t){if(t!==void 0)this._private.userZoomingEnabled=!!t;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(t){if(t!==void 0)this._private.boxSelectionEnabled=!!t;else return this._private.boxSelectionEnabled;return this},pan:function(){var t=arguments,r=this._private.pan,a,i,n,s,o;switch(t.length){case 0:return r;case 1:if(ce(t[0]))return a=t[0],r[a];if(De(t[0])){if(!this._private.panningEnabled)return this;n=t[0],s=n.x,o=n.y,Vt(s)&&(r.x=s),Vt(o)&&(r.y=o),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;a=t[0],i=t[1],(a==="x"||a==="y")&&Vt(i)&&(r[a]=i),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(t,r){var a=arguments,i=this._private.pan,n,s,o,l,u;if(!this._private.panningEnabled)return this;switch(a.length){case 1:De(t)&&(o=a[0],l=o.x,u=o.y,Vt(l)&&(i.x+=l),Vt(u)&&(i.y+=u),this.emit("pan viewport"));break;case 2:n=t,s=r,(n==="x"||n==="y")&&Vt(s)&&(i[n]+=s),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(t,r){var a=this.getFitViewport(t,r);if(a){var i=this._private;i.zoom=a.zoom,i.pan=a.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(t,r){if(Vt(t)&&r===void 0&&(r=t,t=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var a;if(ce(t)){var i=t;t=this.$(i)}else if(TM(t)){var n=t;a={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2},a.w=a.x2-a.x1,a.h=a.y2-a.y1}else ma(t)||(t=this.mutableElements());if(!(ma(t)&&t.empty())){a=a||t.boundingBox();var s=this.width(),o=this.height(),l;if(r=Vt(r)?r:0,!isNaN(s)&&!isNaN(o)&&s>0&&o>0&&!isNaN(a.w)&&!isNaN(a.h)&&a.w>0&&a.h>0){l=Math.min((s-2*r)/a.w,(o-2*r)/a.h),l=l>this._private.maxZoom?this._private.maxZoom:l,l=l<this._private.minZoom?this._private.minZoom:l;var u={x:(s-l*(a.x1+a.x2))/2,y:(o-l*(a.y1+a.y2))/2};return{zoom:l,pan:u}}}}},zoomRange:function(t,r){var a=this._private;if(r==null){var i=t;t=i.min,r=i.max}return Vt(t)&&Vt(r)&&t<=r?(a.minZoom=t,a.maxZoom=r):Vt(t)&&r===void 0&&t<=a.maxZoom?a.minZoom=t:Vt(r)&&t===void 0&&r>=a.minZoom&&(a.maxZoom=r),this},minZoom:function(t){return t===void 0?this._private.minZoom:this.zoomRange({min:t})},maxZoom:function(t){return t===void 0?this._private.maxZoom:this.zoomRange({max:t})},getZoomedViewport:function(t){var r=this._private,a=r.pan,i=r.zoom,n,s,o=!1;if(r.zoomingEnabled||(o=!0),Vt(t)?s=t:De(t)&&(s=t.level,t.position!=null?n=Zh(t.position,i,a):t.renderedPosition!=null&&(n=t.renderedPosition),n!=null&&!r.panningEnabled&&(o=!0)),s=s>r.maxZoom?r.maxZoom:s,s=s<r.minZoom?r.minZoom:s,o||!Vt(s)||s===i||n!=null&&(!Vt(n.x)||!Vt(n.y)))return null;if(n!=null){var l=a,u=i,h=s,d={x:-h/u*(n.x-l.x)+n.x,y:-h/u*(n.y-l.y)+n.y};return{zoomed:!0,panned:!0,zoom:h,pan:d}}else return{zoomed:!0,panned:!1,zoom:s,pan:a}},zoom:function(t){if(t===void 0)return this._private.zoom;var r=this.getZoomedViewport(t),a=this._private;return r==null||!r.zoomed?this:(a.zoom=r.zoom,r.panned&&(a.pan.x=r.pan.x,a.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(t){var r=this._private,a=!0,i=!0,n=[],s=!1,o=!1;if(!t)return this;if(Vt(t.zoom)||(a=!1),De(t.pan)||(i=!1),!a&&!i)return this;if(a){var l=t.zoom;l<r.minZoom||l>r.maxZoom||!r.zoomingEnabled?s=!0:(r.zoom=l,n.push("zoom"))}if(i&&(!s||!t.cancelOnFailedZoom)&&r.panningEnabled){var u=t.pan;Vt(u.x)&&(r.pan.x=u.x,o=!1),Vt(u.y)&&(r.pan.y=u.y,o=!1),o||n.push("pan")}return n.length>0&&(n.push("viewport"),this.emit(n.join(" ")),this.notify("viewport")),this},center:function(t){var r=this.getCenterPan(t);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(t,r){if(this._private.panningEnabled){if(ce(t)){var a=t;t=this.mutableElements().filter(a)}else ma(t)||(t=this.mutableElements());if(t.length!==0){var i=t.boundingBox(),n=this.width(),s=this.height();r=r===void 0?this._private.zoom:r;var o={x:(n-r*(i.x1+i.x2))/2,y:(s-r*(i.y1+i.y2))/2};return o}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var t=this._private,r=t.container,a=this;return t.sizeCache=t.sizeCache||(r?function(){var i=a.window().getComputedStyle(r),n=function(o){return parseFloat(i.getPropertyValue(o))};return{width:r.clientWidth-n("padding-left")-n("padding-right"),height:r.clientHeight-n("padding-top")-n("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var t=this._private.pan,r=this._private.zoom,a=this.renderedExtent(),i={x1:(a.x1-t.x)/r,x2:(a.x2-t.x)/r,y1:(a.y1-t.y)/r,y2:(a.y2-t.y)/r};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var t=this.width(),r=this.height();return{x1:0,y1:0,x2:t,y2:r,w:t,h:r}},multiClickDebounceTime:function(t){if(t)this._private.multiClickDebounceTime=t;else return this._private.multiClickDebounceTime;return this}};Un.centre=Un.center;Un.autolockNodes=Un.autolock;Un.autoungrabifyNodes=Un.autoungrabify;var ic={data:Ie.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Ie.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Ie.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ie.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};ic.attr=ic.data;ic.removeAttr=ic.removeData;var nc=function(t){var r=this;t=pe({},t);var a=t.container;a&&!lh(a)&&lh(a[0])&&(a=a[0]);var i=a?a._cyreg:null;i=i||{},i&&i.cy&&(i.cy.destroy(),i={});var n=i.readies=i.readies||[];a&&(a._cyreg=i),i.cy=r;var s=cr!==void 0&&a!==void 0&&!t.headless,o=t;o.layout=pe({name:s?"grid":"null"},o.layout),o.renderer=pe({name:s?"canvas":"null"},o.renderer);var l=function(y,v,m){return v!==void 0?v:m!==void 0?m:y},u=this._private={container:a,ready:!1,options:o,elements:new Nr(this),listeners:[],aniEles:new Nr(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,o.zoomingEnabled),userZoomingEnabled:l(!0,o.userZoomingEnabled),panningEnabled:l(!0,o.panningEnabled),userPanningEnabled:l(!0,o.userPanningEnabled),boxSelectionEnabled:l(!0,o.boxSelectionEnabled),autolock:l(!1,o.autolock,o.autolockNodes),autoungrabify:l(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:l(!1,o.autounselectify),styleEnabled:o.styleEnabled===void 0?s:o.styleEnabled,zoom:Vt(o.zoom)?o.zoom:1,pan:{x:De(o.pan)&&Vt(o.pan.x)?o.pan.x:0,y:De(o.pan)&&Vt(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom});var h=function(y,v){var m=y.some(CM);if(m)return Qo.all(y).then(v);v(y)};u.styleEnabled&&r.setStyle([]);var d=pe({},o,o.renderer);r.initRenderer(d);var f=function(y,v,m){r.notifications(!1);var x=r.mutableElements();x.length>0&&x.remove(),y!=null&&(De(y)||Ge(y))&&r.add(y),r.one("layoutready",function(w){r.notifications(!0),r.emit(w),r.one("load",v),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",m),r.emit("done")});var b=pe({},r._private.options.layout);b.eles=r.elements(),r.layout(b).run()};h([o.style,o.elements],function(p){var y=p[0],v=p[1];u.styleEnabled&&r.style().append(y),f(v,function(){r.startAnimationLoop(),u.ready=!0,Ze(o.ready)&&r.on("ready",o.ready);for(var m=0;m<n.length;m++){var x=n[m];r.on("ready",x)}i&&(i.readies=[]),r.emit("ready")},o.done)})},gh=nc.prototype;pe(gh,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(t){return this.isReady()?this.emitter().emit("ready",[],t):this.on("ready",t),this},destroy:function(){var t=this;if(!t.destroyed())return t.stopAnimationLoop(),t.destroyRenderer(),this.emit("destroy"),t._private.destroyed=!0,t},hasElementWithId:function(t){return this._private.elements.hasElementWithId(t)},getElementById:function(t){return this._private.elements.getElementById(t)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){return this._private.elements.merge(t),this},removeFromPool:function(t){return this._private.elements.unmerge(t),this},container:function(){return this._private.container||null},window:function(){var t=this._private.container;if(t==null)return cr;var r=this._private.container.ownerDocument;return r===void 0||r==null?cr:r.defaultView||cr},mount:function(t){if(t!=null){var r=this,a=r._private,i=a.options;return!lh(t)&&lh(t[0])&&(t=t[0]),r.stopAnimationLoop(),r.destroyRenderer(),a.container=t,a.styleEnabled=!0,r.invalidateSize(),r.initRenderer(pe({},i,i.renderer,{name:i.renderer.name==="null"?"canvas":i.renderer.name})),r.startAnimationLoop(),r.style(i.style),r.emit("mount"),r}},unmount:function(){var t=this;return t.stopAnimationLoop(),t.destroyRenderer(),t.initRenderer({name:"null"}),t.emit("unmount"),t},options:function(){return ni(this._private.options)},json:function(t){var r=this,a=r._private,i=r.mutableElements(),n=function(C){return r.getElementById(C.id())};if(De(t)){if(r.startBatch(),t.elements){var s={},o=function(C,T){for(var k=[],S=[],L=0;L<C.length;L++){var _=C[L];if(!_.data.id){Pe("cy.json() cannot handle elements without an ID attribute");continue}var A=""+_.data.id,E=r.getElementById(A);s[A]=!0,E.length!==0?S.push({ele:E,json:_}):(T&&(_.group=T),k.push(_))}r.add(k);for(var D=0;D<S.length;D++){var R=S[D],O=R.ele,P=R.json;O.json(P)}};if(Ge(t.elements))o(t.elements);else for(var l=["nodes","edges"],u=0;u<l.length;u++){var h=l[u],d=t.elements[h];Ge(d)&&o(d,h)}var f=r.collection();i.filter(function(w){return!s[w.id()]}).forEach(function(w){w.isParent()?f.merge(w):w.remove()}),f.forEach(function(w){return w.children().move({parent:null})}),f.forEach(function(w){return n(w).remove()})}t.style&&r.style(t.style),t.zoom!=null&&t.zoom!==a.zoom&&r.zoom(t.zoom),t.pan&&(t.pan.x!==a.pan.x||t.pan.y!==a.pan.y)&&r.pan(t.pan),t.data&&r.data(t.data);for(var p=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],y=0;y<p.length;y++){var v=p[y];t[v]!=null&&r[v](t[v])}return r.endBatch(),this}else{var m=!!t,x={};m?x.elements=this.elements().map(function(w){return w.json()}):(x.elements={},i.forEach(function(w){var C=w.group();x.elements[C]||(x.elements[C]=[]),x.elements[C].push(w.json())})),this._private.styleEnabled&&(x.style=r.style().json()),x.data=ni(r.data());var b=a.options;return x.zoomingEnabled=a.zoomingEnabled,x.userZoomingEnabled=a.userZoomingEnabled,x.zoom=a.zoom,x.minZoom=a.minZoom,x.maxZoom=a.maxZoom,x.panningEnabled=a.panningEnabled,x.userPanningEnabled=a.userPanningEnabled,x.pan=ni(a.pan),x.boxSelectionEnabled=a.boxSelectionEnabled,x.renderer=ni(b.renderer),x.hideEdgesOnViewport=b.hideEdgesOnViewport,x.textureOnViewport=b.textureOnViewport,x.wheelSensitivity=b.wheelSensitivity,x.motionBlur=b.motionBlur,x.multiClickDebounceTime=b.multiClickDebounceTime,x}}});gh.$id=gh.getElementById;[wV,EV,pC,Cg,Eu,AV,Sg,_u,BV,Un,ic].forEach(function(e){pe(gh,e)});var IV={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}},PV={maximal:!1,acyclic:!1},ls=function(t){return t.scratch("breadthfirst")},s2=function(t,r){return t.scratch("breadthfirst",r)};function gC(e){this.options=pe({},IV,PV,e)}gC.prototype.run=function(){var e=this.options,t=e.cy,r=e.eles,a=r.nodes().filter(function(H){return H.isChildless()}),i=r,n=e.directed,s=e.acyclic||e.maximal||e.maximalAdjustments>0,o=!!e.boundingBox,l=t.extent(),u=ha(o?e.boundingBox:{x1:l.x1,y1:l.y1,w:l.w,h:l.h}),h;if(ma(e.roots))h=e.roots;else if(Ge(e.roots)){for(var d=[],f=0;f<e.roots.length;f++){var p=e.roots[f],y=t.getElementById(p);d.push(y)}h=t.collection(d)}else if(ce(e.roots))h=t.$(e.roots);else if(n)h=a.roots();else{var v=r.components();h=t.collection();for(var m=function(){var Et=v[x],nt=Et.maxDegree(!1),Lt=Et.filter(function(Dt){return Dt.degree(!1)===nt});h=h.add(Lt)},x=0;x<v.length;x++)m()}var b=[],w={},C=function(Et,nt){b[nt]==null&&(b[nt]=[]);var Lt=b[nt].length;b[nt].push(Et),s2(Et,{index:Lt,depth:nt})},T=function(Et,nt){var Lt=ls(Et),Dt=Lt.depth,At=Lt.index;b[Dt][At]=null,Et.isChildless()&&C(Et,nt)};i.bfs({roots:h,directed:e.directed,visit:function(Et,nt,Lt,Dt,At){var xt=Et[0],_t=xt.id();xt.isChildless()&&C(xt,At),w[_t]=!0}});for(var k=[],S=0;S<a.length;S++){var L=a[S];w[L.id()]||k.push(L)}var _=function(Et){for(var nt=b[Et],Lt=0;Lt<nt.length;Lt++){var Dt=nt[Lt];if(Dt==null){nt.splice(Lt,1),Lt--;continue}s2(Dt,{depth:Et,index:Lt})}},A=function(Et,nt){for(var Lt=ls(Et),Dt=Et.incomers().filter(function(at){return at.isNode()&&r.has(at)}),At=-1,xt=Et.id(),_t=0;_t<Dt.length;_t++){var vt=Dt[_t],wt=ls(vt);At=Math.max(At,wt.depth)}if(Lt.depth<=At){if(!e.acyclic&&nt[xt])return null;var St=At+1;return T(Et,St),nt[xt]=St,!0}return!1};if(n&&s){var E=[],D={},R=function(Et){return E.push(Et)},O=function(){return E.shift()};for(a.forEach(function(H){return E.push(H)});E.length>0;){var P=O(),$=A(P,D);if($)P.outgoers().filter(function(H){return H.isNode()&&r.has(H)}).forEach(R);else if($===null){Pe("Detected double maximal shift for node `"+P.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var M=0;if(e.avoidOverlap)for(var I=0;I<a.length;I++){var F=a[I],V=F.layoutDimensions(e),N=V.w,q=V.h;M=Math.max(M,N,q)}var U={},X=function(Et){if(U[Et.id()])return U[Et.id()];for(var nt=ls(Et).depth,Lt=Et.neighborhood(),Dt=0,At=0,xt=0;xt<Lt.length;xt++){var _t=Lt[xt];if(!(_t.isEdge()||_t.isParent()||!a.has(_t))){var vt=ls(_t);if(vt!=null){var wt=vt.index,St=vt.depth;if(!(wt==null||St==null)){var at=b[St].length;St<nt&&(Dt+=wt/at,At++)}}}}return At=Math.max(1,At),Dt=Dt/At,At===0&&(Dt=0),U[Et.id()]=Dt,Dt},lt=function(Et,nt){var Lt=X(Et),Dt=X(nt),At=Lt-Dt;return At===0?mT(Et.id(),nt.id()):At};e.depthSort!==void 0&&(lt=e.depthSort);for(var J=b.length,ct=0;ct<J;ct++)b[ct].sort(lt),_(ct);for(var yt=[],ut=0;ut<k.length;ut++)yt.push(k[ut]);var Q=function(){for(var Et=0;Et<J;Et++)_(Et)};yt.length&&(b.unshift(yt),J=b.length,Q());for(var K=0,j=0;j<J;j++)K=Math.max(b[j].length,K);var Y={x:u.x1+u.w/2,y:u.y1+u.h/2},st=a.reduce(function(H,Et){return function(nt){return{w:H.w===-1?nt.w:(H.w+nt.w)/2,h:H.h===-1?nt.h:(H.h+nt.h)/2}}(Et.boundingBox({includeLabels:e.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),W=Math.max(J===1?0:o?(u.h-e.padding*2-st.h)/(J-1):(u.h-e.padding*2-st.h)/(J+1),M),bt=b.reduce(function(H,Et){return Math.max(H,Et.length)},0),tt=function(Et){var nt=ls(Et),Lt=nt.depth,Dt=nt.index;if(e.circle){var At=Math.min(u.w/2/J,u.h/2/J);At=Math.max(At,M);var xt=At*Lt+At-(J>0&&b[0].length<=3?At/2:0),_t=2*Math.PI/b[Lt].length*Dt;return Lt===0&&b[0].length===1&&(xt=1),{x:Y.x+xt*Math.cos(_t),y:Y.y+xt*Math.sin(_t)}}else{var vt=b[Lt].length,wt=Math.max(vt===1?0:o?(u.w-e.padding*2-st.w)/((e.grid?bt:vt)-1):(u.w-e.padding*2-st.w)/((e.grid?bt:vt)+1),M),St={x:Y.x+(Dt+1-(vt+1)/2)*wt,y:Y.y+(Lt+1-(J+1)/2)*W};return St}};return r.nodes().layoutPositions(this,e,tt),this};var NV={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function yC(e){this.options=pe({},NV,e)}yC.prototype.run=function(){var e=this.options,t=e,r=e.cy,a=t.eles,i=t.counterclockwise!==void 0?!t.counterclockwise:t.clockwise,n=a.nodes().not(":parent");t.sort&&(n=n.sort(t.sort));for(var s=ha(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},l=t.sweep===void 0?2*Math.PI-2*Math.PI/n.length:t.sweep,u=l/Math.max(1,n.length-1),h,d=0,f=0;f<n.length;f++){var p=n[f],y=p.layoutDimensions(t),v=y.w,m=y.h;d=Math.max(d,v,m)}if(Vt(t.radius)?h=t.radius:n.length<=1?h=0:h=Math.min(s.h,s.w)/2-d,n.length>1&&t.avoidOverlap){d*=1.75;var x=Math.cos(u)-Math.cos(0),b=Math.sin(u)-Math.sin(0),w=Math.sqrt(d*d/(x*x+b*b));h=Math.max(w,h)}var C=function(k,S){var L=t.startAngle+S*u*(i?1:-1),_=h*Math.cos(L),A=h*Math.sin(L),E={x:o.x+_,y:o.y+A};return E};return a.nodes().layoutPositions(this,t,C),this};var MV={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function vC(e){this.options=pe({},MV,e)}vC.prototype.run=function(){for(var e=this.options,t=e,r=t.counterclockwise!==void 0?!t.counterclockwise:t.clockwise,a=e.cy,i=t.eles,n=i.nodes().not(":parent"),s=ha(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:a.width(),h:a.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},l=[],u=0,h=0;h<n.length;h++){var d=n[h],f=void 0;f=t.concentric(d),l.push({value:f,node:d}),d._private.scratch.concentric=f}n.updateStyle();for(var p=0;p<n.length;p++){var y=n[p],v=y.layoutDimensions(t);u=Math.max(u,v.w,v.h)}l.sort(function(st,W){return W.value-st.value});for(var m=t.levelWidth(n),x=[[]],b=x[0],w=0;w<l.length;w++){var C=l[w];if(b.length>0){var T=Math.abs(b[0].value-C.value);T>=m&&(b=[],x.push(b))}b.push(C)}var k=u+t.minNodeSpacing;if(!t.avoidOverlap){var S=x.length>0&&x[0].length>1,L=Math.min(s.w,s.h)/2-k,_=L/(x.length+S?1:0);k=Math.min(k,_)}for(var A=0,E=0;E<x.length;E++){var D=x[E],R=t.sweep===void 0?2*Math.PI-2*Math.PI/D.length:t.sweep,O=D.dTheta=R/Math.max(1,D.length-1);if(D.length>1&&t.avoidOverlap){var P=Math.cos(O)-Math.cos(0),$=Math.sin(O)-Math.sin(0),M=Math.sqrt(k*k/(P*P+$*$));A=Math.max(M,A)}D.r=A,A+=k}if(t.equidistant){for(var I=0,F=0,V=0;V<x.length;V++){var N=x[V],q=N.r-F;I=Math.max(I,q)}F=0;for(var U=0;U<x.length;U++){var X=x[U];U===0&&(F=X.r),X.r=F,F+=I}}for(var lt={},J=0;J<x.length;J++)for(var ct=x[J],yt=ct.dTheta,ut=ct.r,Q=0;Q<ct.length;Q++){var K=ct[Q],j=t.startAngle+(r?1:-1)*yt*Q,Y={x:o.x+ut*Math.cos(j),y:o.y+ut*Math.sin(j)};lt[K.node.id()]=Y}return i.nodes().layoutPositions(this,t,function(st){var W=st.id();return lt[W]}),this};var ap,FV={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(t,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(t){return 2048},nodeOverlap:4,idealEdgeLength:function(t){return 32},edgeElasticity:function(t){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function ud(e){this.options=pe({},FV,e),this.options.layout=this;var t=this.options.eles.nodes(),r=this.options.eles.edges(),a=r.filter(function(i){var n=i.source().data("id"),s=i.target().data("id"),o=t.some(function(u){return u.data("id")===n}),l=t.some(function(u){return u.data("id")===s});return!o||!l});this.options.eles=this.options.eles.not(a)}ud.prototype.run=function(){var e=this.options,t=e.cy,r=this;r.stopped=!1,(e.animate===!0||e.animate===!1)&&r.emit({type:"layoutstart",layout:r}),e.debug===!0?ap=!0:ap=!1;var a=OV(t,r,e);ap&&VV(a),e.randomize&&zV(a);var i=Li(),n=function(){qV(a,t,e),e.fit===!0&&t.fit(e.padding)},s=function(f){return!(r.stopped||f>=e.numIter||(WV(a,e),a.temperature=a.temperature*e.coolingFactor,a.temperature<e.minTemp))},o=function(){if(e.animate===!0||e.animate===!1)n(),r.one("layoutstop",e.stop),r.emit({type:"layoutstop",layout:r});else{var f=e.eles.nodes(),p=xC(a,e,f);f.layoutPositions(r,e,p)}},l=0,u=!0;if(e.animate===!0){var h=function(){for(var f=0;u&&f<e.refresh;)u=s(l),l++,f++;if(!u)l2(a,e),o();else{var p=Li();p-i>=e.animationThreshold&&n(),ch(h)}};h()}else{for(;u;)u=s(l),l++;l2(a,e),o()}return this};ud.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};ud.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var OV=function(t,r,a){for(var i=a.eles.edges(),n=a.eles.nodes(),s=ha(a.boundingBox?a.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),o={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:n.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:a.initialTemp,clientWidth:s.w,clientHeight:s.h,boundingBox:s},l=a.eles.components(),u={},h=0;h<l.length;h++)for(var d=l[h],f=0;f<d.length;f++){var p=d[f];u[p.id()]=h}for(var h=0;h<o.nodeSize;h++){var y=n[h],v=y.layoutDimensions(a),m={};m.isLocked=y.locked(),m.id=y.data("id"),m.parentId=y.data("parent"),m.cmptId=u[y.id()],m.children=[],m.positionX=y.position("x"),m.positionY=y.position("y"),m.offsetX=0,m.offsetY=0,m.height=v.w,m.width=v.h,m.maxX=m.positionX+m.width/2,m.minX=m.positionX-m.width/2,m.maxY=m.positionY+m.height/2,m.minY=m.positionY-m.height/2,m.padLeft=parseFloat(y.style("padding")),m.padRight=parseFloat(y.style("padding")),m.padTop=parseFloat(y.style("padding")),m.padBottom=parseFloat(y.style("padding")),m.nodeRepulsion=Ze(a.nodeRepulsion)?a.nodeRepulsion(y):a.nodeRepulsion,o.layoutNodes.push(m),o.idToIndex[m.id]=h}for(var x=[],b=0,w=-1,C=[],h=0;h<o.nodeSize;h++){var y=o.layoutNodes[h],T=y.parentId;T!=null?o.layoutNodes[o.idToIndex[T]].children.push(y.id):(x[++w]=y.id,C.push(y.id))}for(o.graphSet.push(C);b<=w;){var k=x[b++],S=o.idToIndex[k],p=o.layoutNodes[S],L=p.children;if(L.length>0){o.graphSet.push(L);for(var h=0;h<L.length;h++)x[++w]=L[h]}}for(var h=0;h<o.graphSet.length;h++)for(var _=o.graphSet[h],f=0;f<_.length;f++){var A=o.idToIndex[_[f]];o.indexToGraph[A]=h}for(var h=0;h<o.edgeSize;h++){var E=i[h],D={};D.id=E.data("id"),D.sourceId=E.data("source"),D.targetId=E.data("target");var R=Ze(a.idealEdgeLength)?a.idealEdgeLength(E):a.idealEdgeLength,O=Ze(a.edgeElasticity)?a.edgeElasticity(E):a.edgeElasticity,P=o.idToIndex[D.sourceId],$=o.idToIndex[D.targetId],M=o.indexToGraph[P],I=o.indexToGraph[$];if(M!=I){for(var F=$V(D.sourceId,D.targetId,o),V=o.graphSet[F],N=0,m=o.layoutNodes[P];V.indexOf(m.id)===-1;)m=o.layoutNodes[o.idToIndex[m.parentId]],N++;for(m=o.layoutNodes[$];V.indexOf(m.id)===-1;)m=o.layoutNodes[o.idToIndex[m.parentId]],N++;R*=N*a.nestingFactor}D.idealLength=R,D.elasticity=O,o.layoutEdges.push(D)}return o},$V=function(t,r,a){var i=mC(t,r,0,a);return 2>i.count?0:i.graph},mC=function(t,r,a,i){var n=i.graphSet[a];if(-1<n.indexOf(t)&&-1<n.indexOf(r))return{count:2,graph:a};for(var s=0,o=0;o<n.length;o++){var l=n[o],u=i.idToIndex[l],h=i.layoutNodes[u].children;if(h.length!==0){var d=i.indexToGraph[i.idToIndex[h[0]]],f=mC(t,r,d,i);if(f.count!==0)if(f.count===1){if(s++,s===2)break}else return f}}return{count:s,graph:a}},VV,zV=function(t,r){for(var a=t.clientWidth,i=t.clientHeight,n=0;n<t.nodeSize;n++){var s=t.layoutNodes[n];s.children.length===0&&!s.isLocked&&(s.positionX=Math.random()*a,s.positionY=Math.random()*i)}},xC=function(t,r,a){var i=t.boundingBox,n={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(a.forEach(function(s){var o=t.layoutNodes[t.idToIndex[s.data("id")]];n.x1=Math.min(n.x1,o.positionX),n.x2=Math.max(n.x2,o.positionX),n.y1=Math.min(n.y1,o.positionY),n.y2=Math.max(n.y2,o.positionY)}),n.w=n.x2-n.x1,n.h=n.y2-n.y1),function(s,o){var l=t.layoutNodes[t.idToIndex[s.data("id")]];if(r.boundingBox){var u=(l.positionX-n.x1)/n.w,h=(l.positionY-n.y1)/n.h;return{x:i.x1+u*i.w,y:i.y1+h*i.h}}else return{x:l.positionX,y:l.positionY}}},qV=function(t,r,a){var i=a.layout,n=a.eles.nodes(),s=xC(t,a,n);n.positions(s),t.ready!==!0&&(t.ready=!0,i.one("layoutready",a.ready),i.emit({type:"layoutready",layout:this}))},WV=function(t,r,a){GV(t,r),UV(t),XV(t,r),KV(t),jV(t)},GV=function(t,r){for(var a=0;a<t.graphSet.length;a++)for(var i=t.graphSet[a],n=i.length,s=0;s<n;s++)for(var o=t.layoutNodes[t.idToIndex[i[s]]],l=s+1;l<n;l++){var u=t.layoutNodes[t.idToIndex[i[l]]];HV(o,u,t,r)}},o2=function(t){return-1+2*t*Math.random()},HV=function(t,r,a,i){var n=t.cmptId,s=r.cmptId;if(!(n!==s&&!a.isCompound)){var o=r.positionX-t.positionX,l=r.positionY-t.positionY,u=1;o===0&&l===0&&(o=o2(u),l=o2(u));var h=YV(t,r,o,l);if(h>0)var d=i.nodeOverlap*h,f=Math.sqrt(o*o+l*l),p=d*o/f,y=d*l/f;else var v=yh(t,o,l),m=yh(r,-1*o,-1*l),x=m.x-v.x,b=m.y-v.y,w=x*x+b*b,f=Math.sqrt(w),d=(t.nodeRepulsion+r.nodeRepulsion)/w,p=d*x/f,y=d*b/f;t.isLocked||(t.offsetX-=p,t.offsetY-=y),r.isLocked||(r.offsetX+=p,r.offsetY+=y)}},YV=function(t,r,a,i){if(a>0)var n=t.maxX-r.minX;else var n=r.maxX-t.minX;if(i>0)var s=t.maxY-r.minY;else var s=r.maxY-t.minY;return n>=0&&s>=0?Math.sqrt(n*n+s*s):0},yh=function(t,r,a){var i=t.positionX,n=t.positionY,s=t.height||1,o=t.width||1,l=a/r,u=s/o,h={};return r===0&&0<a||r===0&&0>a?(h.x=i,h.y=n+s/2,h):0<r&&-1*u<=l&&l<=u?(h.x=i+o/2,h.y=n+o*a/2/r,h):0>r&&-1*u<=l&&l<=u?(h.x=i-o/2,h.y=n-o*a/2/r,h):0<a&&(l<=-1*u||l>=u)?(h.x=i+s*r/2/a,h.y=n+s/2,h):(0>a&&(l<=-1*u||l>=u)&&(h.x=i-s*r/2/a,h.y=n-s/2),h)},UV=function(t,r){for(var a=0;a<t.edgeSize;a++){var i=t.layoutEdges[a],n=t.idToIndex[i.sourceId],s=t.layoutNodes[n],o=t.idToIndex[i.targetId],l=t.layoutNodes[o],u=l.positionX-s.positionX,h=l.positionY-s.positionY;if(!(u===0&&h===0)){var d=yh(s,u,h),f=yh(l,-1*u,-1*h),p=f.x-d.x,y=f.y-d.y,v=Math.sqrt(p*p+y*y),m=Math.pow(i.idealLength-v,2)/i.elasticity;if(v!==0)var x=m*p/v,b=m*y/v;else var x=0,b=0;s.isLocked||(s.offsetX+=x,s.offsetY+=b),l.isLocked||(l.offsetX-=x,l.offsetY-=b)}}},XV=function(t,r){if(r.gravity!==0)for(var a=1,i=0;i<t.graphSet.length;i++){var n=t.graphSet[i],s=n.length;if(i===0)var o=t.clientHeight/2,l=t.clientWidth/2;else var u=t.layoutNodes[t.idToIndex[n[0]]],h=t.layoutNodes[t.idToIndex[u.parentId]],o=h.positionX,l=h.positionY;for(var d=0;d<s;d++){var f=t.layoutNodes[t.idToIndex[n[d]]];if(!f.isLocked){var p=o-f.positionX,y=l-f.positionY,v=Math.sqrt(p*p+y*y);if(v>a){var m=r.gravity*p/v,x=r.gravity*y/v;f.offsetX+=m,f.offsetY+=x}}}}},KV=function(t,r){var a=[],i=0,n=-1;for(a.push.apply(a,t.graphSet[0]),n+=t.graphSet[0].length;i<=n;){var s=a[i++],o=t.idToIndex[s],l=t.layoutNodes[o],u=l.children;if(0<u.length&&!l.isLocked){for(var h=l.offsetX,d=l.offsetY,f=0;f<u.length;f++){var p=t.layoutNodes[t.idToIndex[u[f]]];p.offsetX+=h,p.offsetY+=d,a[++n]=u[f]}l.offsetX=0,l.offsetY=0}}},jV=function(t,r){for(var a=0;a<t.nodeSize;a++){var i=t.layoutNodes[a];0<i.children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(var a=0;a<t.nodeSize;a++){var i=t.layoutNodes[a];if(!(0<i.children.length||i.isLocked)){var n=QV(i.offsetX,i.offsetY,t.temperature);i.positionX+=n.x,i.positionY+=n.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,bC(i,t)}}for(var a=0;a<t.nodeSize;a++){var i=t.layoutNodes[a];0<i.children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},QV=function(t,r,a){var i=Math.sqrt(t*t+r*r);if(i>a)var n={x:a*t/i,y:a*r/i};else var n={x:t,y:r};return n},bC=function(t,r){var a=t.parentId;if(a!=null){var i=r.layoutNodes[r.idToIndex[a]],n=!1;if((i.maxX==null||t.maxX+i.padRight>i.maxX)&&(i.maxX=t.maxX+i.padRight,n=!0),(i.minX==null||t.minX-i.padLeft<i.minX)&&(i.minX=t.minX-i.padLeft,n=!0),(i.maxY==null||t.maxY+i.padBottom>i.maxY)&&(i.maxY=t.maxY+i.padBottom,n=!0),(i.minY==null||t.minY-i.padTop<i.minY)&&(i.minY=t.minY-i.padTop,n=!0),n)return bC(i,r)}},l2=function(t,r){for(var a=t.layoutNodes,i=[],n=0;n<a.length;n++){var s=a[n],o=s.cmptId,l=i[o]=i[o]||[];l.push(s)}for(var u=0,n=0;n<i.length;n++){var h=i[n];if(h){h.x1=1/0,h.x2=-1/0,h.y1=1/0,h.y2=-1/0;for(var d=0;d<h.length;d++){var f=h[d];h.x1=Math.min(h.x1,f.positionX-f.width/2),h.x2=Math.max(h.x2,f.positionX+f.width/2),h.y1=Math.min(h.y1,f.positionY-f.height/2),h.y2=Math.max(h.y2,f.positionY+f.height/2)}h.w=h.x2-h.x1,h.h=h.y2-h.y1,u+=h.w*h.h}}i.sort(function(b,w){return w.w*w.h-b.w*b.h});for(var p=0,y=0,v=0,m=0,x=Math.sqrt(u)*t.clientWidth/t.clientHeight,n=0;n<i.length;n++){var h=i[n];if(h){for(var d=0;d<h.length;d++){var f=h[d];f.isLocked||(f.positionX+=p-h.x1,f.positionY+=y-h.y1)}p+=h.w+r.componentSpacing,v+=h.w+r.componentSpacing,m=Math.max(m,h.h),v>x&&(y+=m+r.componentSpacing,p=0,v=0,m=0)}}},ZV={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function wC(e){this.options=pe({},ZV,e)}wC.prototype.run=function(){var e=this.options,t=e,r=e.cy,a=t.eles,i=a.nodes().not(":parent");t.sort&&(i=i.sort(t.sort));var n=ha(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(n.h===0||n.w===0)a.nodes().layoutPositions(this,t,function(U){return{x:n.x1,y:n.y1}});else{var s=i.size(),o=Math.sqrt(s*n.h/n.w),l=Math.round(o),u=Math.round(n.w/n.h*o),h=function(X){if(X==null)return Math.min(l,u);var lt=Math.min(l,u);lt==l?l=X:u=X},d=function(X){if(X==null)return Math.max(l,u);var lt=Math.max(l,u);lt==l?l=X:u=X},f=t.rows,p=t.cols!=null?t.cols:t.columns;if(f!=null&&p!=null)l=f,u=p;else if(f!=null&&p==null)l=f,u=Math.ceil(s/l);else if(f==null&&p!=null)u=p,l=Math.ceil(s/u);else if(u*l>s){var y=h(),v=d();(y-1)*v>=s?h(y-1):(v-1)*y>=s&&d(v-1)}else for(;u*l<s;){var m=h(),x=d();(x+1)*m>=s?d(x+1):h(m+1)}var b=n.w/u,w=n.h/l;if(t.condense&&(b=0,w=0),t.avoidOverlap)for(var C=0;C<i.length;C++){var T=i[C],k=T._private.position;(k.x==null||k.y==null)&&(k.x=0,k.y=0);var S=T.layoutDimensions(t),L=t.avoidOverlapPadding,_=S.w+L,A=S.h+L;b=Math.max(b,_),w=Math.max(w,A)}for(var E={},D=function(X,lt){return!!E["c-"+X+"-"+lt]},R=function(X,lt){E["c-"+X+"-"+lt]=!0},O=0,P=0,$=function(){P++,P>=u&&(P=0,O++)},M={},I=0;I<i.length;I++){var F=i[I],V=t.position(F);if(V&&(V.row!==void 0||V.col!==void 0)){var N={row:V.row,col:V.col};if(N.col===void 0)for(N.col=0;D(N.row,N.col);)N.col++;else if(N.row===void 0)for(N.row=0;D(N.row,N.col);)N.row++;M[F.id()]=N,R(N.row,N.col)}}var q=function(X,lt){var J,ct;if(X.locked()||X.isParent())return!1;var yt=M[X.id()];if(yt)J=yt.col*b+b/2+n.x1,ct=yt.row*w+w/2+n.y1;else{for(;D(O,P);)$();J=P*b+b/2+n.x1,ct=O*w+w/2+n.y1,R(O,P),$()}return{x:J,y:ct}};i.layoutPositions(this,t,q)}return this};var JV={ready:function(){},stop:function(){}};function _1(e){this.options=pe({},JV,e)}_1.prototype.run=function(){var e=this.options,t=e.eles,r=this;return e.cy,r.emit("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",e.ready),r.emit("layoutready"),r.one("layoutstop",e.stop),r.emit("layoutstop"),this};_1.prototype.stop=function(){return this};var tz={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function kC(e){this.options=pe({},tz,e)}kC.prototype.run=function(){var e=this.options,t=e.eles,r=t.nodes(),a=Ze(e.positions);function i(n){if(e.positions==null)return kF(n.position());if(a)return e.positions(n);var s=e.positions[n._private.data.id];return s??null}return r.layoutPositions(this,e,function(n,s){var o=i(n);return n.locked()||o==null?!1:o}),this};var ez={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function TC(e){this.options=pe({},ez,e)}TC.prototype.run=function(){var e=this.options,t=e.cy,r=e.eles,a=ha(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),i=function(s,o){return{x:a.x1+Math.round(Math.random()*a.w),y:a.y1+Math.round(Math.random()*a.h)}};return r.nodes().layoutPositions(this,e,i),this};var rz=[{name:"breadthfirst",impl:gC},{name:"circle",impl:yC},{name:"concentric",impl:vC},{name:"cose",impl:ud},{name:"grid",impl:wC},{name:"null",impl:_1},{name:"preset",impl:kC},{name:"random",impl:TC}];function CC(e){this.options=e,this.notifications=0}var c2=function(){},u2=function(){throw new Error("A headless instance can not render images")};CC.prototype={recalculateRenderedStyle:c2,notify:function(){this.notifications++},init:c2,isHeadless:function(){return!0},png:u2,jpg:u2};var A1={};A1.arrowShapeWidth=.3;A1.registerArrowShapes=function(){var e=this.arrowShapes={},t=this,r=function(u,h,d,f,p,y,v){var m=p.x-d/2-v,x=p.x+d/2+v,b=p.y-d/2-v,w=p.y+d/2+v,C=m<=u&&u<=x&&b<=h&&h<=w;return C},a=function(u,h,d,f,p){var y=u*Math.cos(f)-h*Math.sin(f),v=u*Math.sin(f)+h*Math.cos(f),m=y*d,x=v*d,b=m+p.x,w=x+p.y;return{x:b,y:w}},i=function(u,h,d,f){for(var p=[],y=0;y<u.length;y+=2){var v=u[y],m=u[y+1];p.push(a(v,m,h,d,f))}return p},n=function(u){for(var h=[],d=0;d<u.length;d++){var f=u[d];h.push(f.x,f.y)}return h},s=function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").pfValue*2},o=function(u,h){ce(h)&&(h=e[h]),e[u]=pe({name:u,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(f,p,y,v,m,x){var b=n(i(this.points,y+2*x,v,m)),w=sa(f,p,b);return w},roughCollide:r,draw:function(f,p,y,v){var m=i(this.points,p,y,v);t.arrowShapeImpl("polygon")(f,m)},spacing:function(f){return 0},gap:s},h)};o("none",{collide:uh,roughCollide:uh,draw:f1,spacing:Ev,gap:Ev}),o("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),o("arrow","triangle"),o("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(u,h,d,f,p){var y=i(this.points,h,d,f),v=this.controlPoint,m=a(v[0],v[1],h,d,f);t.arrowShapeImpl(this.name)(u,y,m)},gap:function(u){return s(u)*.8}}),o("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(u,h,d,f,p,y,v){var m=n(i(this.points,d+2*v,f,p)),x=n(i(this.pointsTee,d+2*v,f,p)),b=sa(u,h,m)||sa(u,h,x);return b},draw:function(u,h,d,f,p){var y=i(this.points,h,d,f),v=i(this.pointsTee,h,d,f);t.arrowShapeImpl(this.name)(u,y,v)}}),o("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(u,h,d,f,p,y,v){var m=p,x=Math.pow(m.x-u,2)+Math.pow(m.y-h,2)<=Math.pow((d+2*v)*this.radius,2),b=n(i(this.points,d+2*v,f,p));return sa(u,h,b)||x},draw:function(u,h,d,f,p){var y=i(this.pointsTr,h,d,f);t.arrowShapeImpl(this.name)(u,y,f.x,f.y,this.radius*h)},spacing:function(u){return t.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),o("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(u,h){var d=this.baseCrossLinePts.slice(),f=h/u,p=3,y=5;return d[p]=d[p]-f,d[y]=d[y]-f,d},collide:function(u,h,d,f,p,y,v){var m=n(i(this.points,d+2*v,f,p)),x=n(i(this.crossLinePts(d,y),d+2*v,f,p)),b=sa(u,h,m)||sa(u,h,x);return b},draw:function(u,h,d,f,p){var y=i(this.points,h,d,f),v=i(this.crossLinePts(h,p),h,d,f);t.arrowShapeImpl(this.name)(u,y,v)}}),o("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(u){return s(u)*.525}}),o("circle",{radius:.15,collide:function(u,h,d,f,p,y,v){var m=p,x=Math.pow(m.x-u,2)+Math.pow(m.y-h,2)<=Math.pow((d+2*v)*this.radius,2);return x},draw:function(u,h,d,f,p){t.arrowShapeImpl(this.name)(u,f.x,f.y,this.radius*h)},spacing:function(u){return t.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),o("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(u){return 1},gap:function(u){return 1}}),o("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),o("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}}),o("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(u){return .95*u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}})};var es={};es.projectIntoViewport=function(e,t){var r=this.cy,a=this.findContainerClientCoords(),i=a[0],n=a[1],s=a[4],o=r.pan(),l=r.zoom(),u=((e-i)/s-o.x)/l,h=((t-n)/s-o.y)/l;return[u,h]};es.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),r=this.cy.window().getComputedStyle(e),a=function(x){return parseFloat(r.getPropertyValue(x))},i={left:a("padding-left"),right:a("padding-right"),top:a("padding-top"),bottom:a("padding-bottom")},n={left:a("border-left-width"),right:a("border-right-width"),top:a("border-top-width"),bottom:a("border-bottom-width")},s=e.clientWidth,o=e.clientHeight,l=i.left+i.right,u=i.top+i.bottom,h=n.left+n.right,d=t.width/(s+h),f=s-l,p=o-u,y=t.left+i.left+n.left,v=t.top+i.top+n.top;return this.containerBB=[y,v,f,p,d]};es.invalidateContainerClientCoordsCache=function(){this.containerBB=null};es.findNearestElement=function(e,t,r,a){return this.findNearestElements(e,t,r,a)[0]};es.findNearestElements=function(e,t,r,a){var i=this,n=this,s=n.getCachedZSortedEles(),o=[],l=n.cy.zoom(),u=n.cy.hasCompoundNodes(),h=(a?24:8)/l,d=(a?8:2)/l,f=(a?8:2)/l,p=1/0,y,v;r&&(s=s.interactive);function m(S,L){if(S.isNode()){if(v)return;v=S,o.push(S)}if(S.isEdge()&&(L==null||L<p))if(y){if(y.pstyle("z-compound-depth").value===S.pstyle("z-compound-depth").value&&y.pstyle("z-compound-depth").value===S.pstyle("z-compound-depth").value){for(var _=0;_<o.length;_++)if(o[_].isEdge()){o[_]=S,y=S,p=L??p;break}}}else o.push(S),y=S,p=L??p}function x(S){var L=S.outerWidth()+2*d,_=S.outerHeight()+2*d,A=L/2,E=_/2,D=S.position(),R=S.pstyle("corner-radius").value==="auto"?"auto":S.pstyle("corner-radius").pfValue,O=S._private.rscratch;if(D.x-A<=e&&e<=D.x+A&&D.y-E<=t&&t<=D.y+E){var P=n.nodeShapes[i.getNodeShape(S)];if(P.checkPoint(e,t,0,L,_,D.x,D.y,R,O))return m(S,0),!0}}function b(S){var L=S._private,_=L.rscratch,A=S.pstyle("width").pfValue,E=S.pstyle("arrow-scale").value,D=A/2+h,R=D*D,O=D*2,I=L.source,F=L.target,P;if(_.edgeType==="segments"||_.edgeType==="straight"||_.edgeType==="haystack"){for(var $=_.allpts,M=0;M+3<$.length;M+=2)if(MF(e,t,$[M],$[M+1],$[M+2],$[M+3],O)&&R>(P=zF(e,t,$[M],$[M+1],$[M+2],$[M+3])))return m(S,P),!0}else if(_.edgeType==="bezier"||_.edgeType==="multibezier"||_.edgeType==="self"||_.edgeType==="compound"){for(var $=_.allpts,M=0;M+5<_.allpts.length;M+=4)if(FF(e,t,$[M],$[M+1],$[M+2],$[M+3],$[M+4],$[M+5],O)&&R>(P=VF(e,t,$[M],$[M+1],$[M+2],$[M+3],$[M+4],$[M+5])))return m(S,P),!0}for(var I=I||L.source,F=F||L.target,V=i.getArrowWidth(A,E),N=[{name:"source",x:_.arrowStartX,y:_.arrowStartY,angle:_.srcArrowAngle},{name:"target",x:_.arrowEndX,y:_.arrowEndY,angle:_.tgtArrowAngle},{name:"mid-source",x:_.midX,y:_.midY,angle:_.midsrcArrowAngle},{name:"mid-target",x:_.midX,y:_.midY,angle:_.midtgtArrowAngle}],M=0;M<N.length;M++){var q=N[M],U=n.arrowShapes[S.pstyle(q.name+"-arrow-shape").value],X=S.pstyle("width").pfValue;if(U.roughCollide(e,t,V,q.angle,{x:q.x,y:q.y},X,h)&&U.collide(e,t,V,q.angle,{x:q.x,y:q.y},X,h))return m(S),!0}u&&o.length>0&&(x(I),x(F))}function w(S,L,_){return na(S,L,_)}function C(S,L){var _=S._private,A=f,E;L?E=L+"-":E="",S.boundingBox();var D=_.labelBounds[L||"main"],R=S.pstyle(E+"label").value,O=S.pstyle("text-events").strValue==="yes";if(!(!O||!R)){var P=w(_.rscratch,"labelX",L),$=w(_.rscratch,"labelY",L),M=w(_.rscratch,"labelAngle",L),I=S.pstyle(E+"text-margin-x").pfValue,F=S.pstyle(E+"text-margin-y").pfValue,V=D.x1-A-I,N=D.x2+A-I,q=D.y1-A-F,U=D.y2+A-F;if(M){var X=Math.cos(M),lt=Math.sin(M),J=function(Y,st){return Y=Y-P,st=st-$,{x:Y*X-st*lt+P,y:Y*lt+st*X+$}},ct=J(V,q),yt=J(V,U),ut=J(N,q),Q=J(N,U),K=[ct.x+I,ct.y+F,ut.x+I,ut.y+F,Q.x+I,Q.y+F,yt.x+I,yt.y+F];if(sa(e,t,K))return m(S),!0}else if(Fo(D,e,t))return m(S),!0}}for(var T=s.length-1;T>=0;T--){var k=s[T];k.isNode()?x(k)||C(k):b(k)||C(k)||C(k,"source")||C(k,"target")}return o};es.getAllInBox=function(e,t,r,a){var i=this.getCachedZSortedEles().interactive,n=this.cy.zoom(),s=2/n,o=[],l=Math.min(e,r),u=Math.max(e,r),h=Math.min(t,a),d=Math.max(t,a);e=l,r=u,t=h,a=d;var f=ha({x1:e,y1:t,x2:r,y2:a});function p(R,O,P){return na(R,O,P)}function y(R,O){var P=R._private,$=s,M="";R.boundingBox();var I=P.labelBounds.main,F=p(P.rscratch,"labelX",O),V=p(P.rscratch,"labelY",O),N=p(P.rscratch,"labelAngle",O),q=R.pstyle(M+"text-margin-x").pfValue,U=R.pstyle(M+"text-margin-y").pfValue,X=I.x1-$-q,lt=I.x2+$-q,J=I.y1-$-U,ct=I.y2+$-U;if(N){var yt=Math.cos(N),ut=Math.sin(N),Q=function(j,Y){return j=j-F,Y=Y-V,{x:j*yt-Y*ut+F,y:j*ut+Y*yt+V}};return[Q(X,J),Q(lt,J),Q(lt,ct),Q(X,ct)]}else return[{x:X,y:J},{x:lt,y:J},{x:lt,y:ct},{x:X,y:ct}]}for(var v=0;v<i.length;v++){var m=i[v];if(m.isNode()){var x=m,b=x.pstyle("text-events").strValue==="yes",w=x.pstyle("box-select-labels").strValue==="yes",C=x.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:w&&b});if(v1(f,C)){var T=y(x),k=[{x:f.x1,y:f.y1},{x:f.x2,y:f.y1},{x:f.x2,y:f.y2},{x:f.x1,y:f.y2}];YF(T,k)&&o.push(x)}}else{var S=m,L=S._private,_=L.rscratch;if(_.startX!=null&&_.startY!=null&&!Fo(f,_.startX,_.startY)||_.endX!=null&&_.endY!=null&&!Fo(f,_.endX,_.endY))continue;if(_.edgeType==="bezier"||_.edgeType==="multibezier"||_.edgeType==="self"||_.edgeType==="compound"||_.edgeType==="segments"||_.edgeType==="haystack"){for(var A=L.rstyle.bezierPts||L.rstyle.linePts||L.rstyle.haystackPts,E=!0,D=0;D<A.length;D++)if(!PF(f,A[D])){E=!1;break}E&&o.push(S)}else(_.edgeType==="haystack"||_.edgeType==="straight")&&o.push(S)}}return o};var vh={};vh.calculateArrowAngles=function(e){var t=e._private.rscratch,r=t.edgeType==="haystack",a=t.edgeType==="bezier",i=t.edgeType==="multibezier",n=t.edgeType==="segments",s=t.edgeType==="compound",o=t.edgeType==="self",l,u,h,d,f,p,x,b;if(r?(h=t.haystackPts[0],d=t.haystackPts[1],f=t.haystackPts[2],p=t.haystackPts[3]):(h=t.arrowStartX,d=t.arrowStartY,f=t.arrowEndX,p=t.arrowEndY),x=t.midX,b=t.midY,n)l=h-t.segpts[0],u=d-t.segpts[1];else if(i||s||o||a){var y=t.allpts,v=Tr(y[0],y[2],y[4],.1),m=Tr(y[1],y[3],y[5],.1);l=h-v,u=d-m}else l=h-x,u=d-b;t.srcArrowAngle=Hc(l,u);var x=t.midX,b=t.midY;if(r&&(x=(h+f)/2,b=(d+p)/2),l=f-h,u=p-d,n){var y=t.allpts;if(y.length/2%2===0){var w=y.length/2,C=w-2;l=y[w]-y[C],u=y[w+1]-y[C+1]}else if(t.isRound)l=t.midVector[1],u=-t.midVector[0];else{var w=y.length/2-1,C=w-2;l=y[w]-y[C],u=y[w+1]-y[C+1]}}else if(i||s||o){var y=t.allpts,T=t.ctrlpts,k,S,L,_;if(T.length/2%2===0){var A=y.length/2-1,E=A+2,D=E+2;k=Tr(y[A],y[E],y[D],0),S=Tr(y[A+1],y[E+1],y[D+1],0),L=Tr(y[A],y[E],y[D],1e-4),_=Tr(y[A+1],y[E+1],y[D+1],1e-4)}else{var E=y.length/2-1,A=E-2,D=E+2;k=Tr(y[A],y[E],y[D],.4999),S=Tr(y[A+1],y[E+1],y[D+1],.4999),L=Tr(y[A],y[E],y[D],.5),_=Tr(y[A+1],y[E+1],y[D+1],.5)}l=L-k,u=_-S}if(t.midtgtArrowAngle=Hc(l,u),t.midDispX=l,t.midDispY=u,l*=-1,u*=-1,n){var y=t.allpts;if(y.length/2%2!==0){if(!t.isRound){var w=y.length/2-1,R=w+2;l=-(y[R]-y[w]),u=-(y[R+1]-y[w+1])}}}if(t.midsrcArrowAngle=Hc(l,u),n)l=f-t.segpts[t.segpts.length-2],u=p-t.segpts[t.segpts.length-1];else if(i||s||o||a){var y=t.allpts,O=y.length,v=Tr(y[O-6],y[O-4],y[O-2],.9),m=Tr(y[O-5],y[O-3],y[O-1],.9);l=f-v,u=p-m}else l=f-x,u=p-b;t.tgtArrowAngle=Hc(l,u)};vh.getArrowWidth=vh.getArrowHeight=function(e,t){var r=this.arrowWidthCache=this.arrowWidthCache||{},a=r[e+", "+t];return a||(a=Math.max(Math.pow(e*13.37,.9),29)*t,r[e+", "+t]=a,a)};var Eg,_g,Ja={},Ea={},h2,d2,Dn,Au,mi,bn,Cn,ja,cs,Jc,SC,EC,Ag,Lg,f2,p2=function(t,r,a){a.x=r.x-t.x,a.y=r.y-t.y,a.len=Math.sqrt(a.x*a.x+a.y*a.y),a.nx=a.x/a.len,a.ny=a.y/a.len,a.ang=Math.atan2(a.ny,a.nx)},az=function(t,r){r.x=t.x*-1,r.y=t.y*-1,r.nx=t.nx*-1,r.ny=t.ny*-1,r.ang=t.ang>0?-(Math.PI-t.ang):Math.PI+t.ang},iz=function(t,r,a,i,n){if(t!==f2?p2(r,t,Ja):az(Ea,Ja),p2(r,a,Ea),h2=Ja.nx*Ea.ny-Ja.ny*Ea.nx,d2=Ja.nx*Ea.nx-Ja.ny*-Ea.ny,mi=Math.asin(Math.max(-1,Math.min(1,h2))),Math.abs(mi)<1e-6){Eg=r.x,_g=r.y,Cn=cs=0;return}Dn=1,Au=!1,d2<0?mi<0?mi=Math.PI+mi:(mi=Math.PI-mi,Dn=-1,Au=!0):mi>0&&(Dn=-1,Au=!0),r.radius!==void 0?cs=r.radius:cs=i,bn=mi/2,Jc=Math.min(Ja.len/2,Ea.len/2),n?(ja=Math.abs(Math.cos(bn)*cs/Math.sin(bn)),ja>Jc?(ja=Jc,Cn=Math.abs(ja*Math.sin(bn)/Math.cos(bn))):Cn=cs):(ja=Math.min(Jc,cs),Cn=Math.abs(ja*Math.sin(bn)/Math.cos(bn))),Ag=r.x+Ea.nx*ja,Lg=r.y+Ea.ny*ja,Eg=Ag-Ea.ny*Cn*Dn,_g=Lg+Ea.nx*Cn*Dn,SC=r.x+Ja.nx*ja,EC=r.y+Ja.ny*ja,f2=r};function _C(e,t){t.radius===0?e.lineTo(t.cx,t.cy):e.arc(t.cx,t.cy,t.radius,t.startAngle,t.endAngle,t.counterClockwise)}function L1(e,t,r,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return a===0||t.radius===0?{cx:t.x,cy:t.y,radius:0,startX:t.x,startY:t.y,stopX:t.x,stopY:t.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(iz(e,t,r,a,i),{cx:Eg,cy:_g,radius:Cn,startX:SC,startY:EC,stopX:Ag,stopY:Lg,startAngle:Ja.ang+Math.PI/2*Dn,endAngle:Ea.ang-Math.PI/2*Dn,counterClockwise:Au})}var sc=.01,nz=Math.sqrt(2*sc),Yr={};Yr.findMidptPtsEtc=function(e,t){var r=t.posPts,a=t.intersectionPts,i=t.vectorNormInverse,n,s=e.pstyle("source-endpoint"),o=e.pstyle("target-endpoint"),l=s.units!=null&&o.units!=null,u=function(T,k,S,L){var _=L-k,A=S-T,E=Math.sqrt(A*A+_*_);return{x:-_/E,y:A/E}},h=e.pstyle("edge-distances").value;switch(h){case"node-position":n=r;break;case"intersection":n=a;break;case"endpoints":{if(l){var d=this.manualEndptToPx(e.source()[0],s),f=ur(d,2),p=f[0],y=f[1],v=this.manualEndptToPx(e.target()[0],o),m=ur(v,2),x=m[0],b=m[1],w={x1:p,y1:y,x2:x,y2:b};i=u(p,y,x,b),n=w}else Pe("Edge ".concat(e.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),n=a;break}}return{midptPts:n,vectorNormInverse:i}};Yr.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var r=e[t],a=r._private,i=a.rscratch;if(!i.haystack){var n=Math.random()*2*Math.PI;i.source={x:Math.cos(n),y:Math.sin(n)},n=Math.random()*2*Math.PI,i.target={x:Math.cos(n),y:Math.sin(n)}}var s=a.source,o=a.target,l=s.position(),u=o.position(),h=s.width(),d=o.width(),f=s.height(),p=o.height(),y=r.pstyle("haystack-radius").value,v=y/2;i.haystackPts=i.allpts=[i.source.x*h*v+l.x,i.source.y*f*v+l.y,i.target.x*d*v+u.x,i.target.y*p*v+u.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}};Yr.findSegmentsPoints=function(e,t){var r=e._private.rscratch,a=e.pstyle("segment-weights"),i=e.pstyle("segment-distances"),n=e.pstyle("segment-radii"),s=e.pstyle("radius-type"),o=Math.min(a.pfValue.length,i.pfValue.length),l=n.pfValue[n.pfValue.length-1],u=s.pfValue[s.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var h=0;h<o;h++){var d=a.pfValue[h],f=i.pfValue[h],p=1-d,y=d,v=this.findMidptPtsEtc(e,t),m=v.midptPts,x=v.vectorNormInverse,b={x:m.x1*p+m.x2*y,y:m.y1*p+m.y2*y};r.segpts.push(b.x+x.x*f,b.y+x.y*f),r.radii.push(n.pfValue[h]!==void 0?n.pfValue[h]:l),r.isArcRadius.push((s.pfValue[h]!==void 0?s.pfValue[h]:u)==="arc-radius")}};Yr.findLoopPoints=function(e,t,r,a){var i=e._private.rscratch,n=t.dirCounts,s=t.srcPos,o=e.pstyle("control-point-distances"),l=o?o.pfValue[0]:void 0,u=e.pstyle("loop-direction").pfValue,h=e.pstyle("loop-sweep").pfValue,d=e.pstyle("control-point-step-size").pfValue;i.edgeType="self";var f=r,p=d;a&&(f=0,p=l);var y=u-Math.PI/2,v=y-h/2,m=y+h/2,x=u+"_"+h;f=n[x]===void 0?n[x]=0:++n[x],i.ctrlpts=[s.x+Math.cos(v)*1.4*p*(f/3+1),s.y+Math.sin(v)*1.4*p*(f/3+1),s.x+Math.cos(m)*1.4*p*(f/3+1),s.y+Math.sin(m)*1.4*p*(f/3+1)]};Yr.findCompoundLoopPoints=function(e,t,r,a){var i=e._private.rscratch;i.edgeType="compound";var n=t.srcPos,s=t.tgtPos,o=t.srcW,l=t.srcH,u=t.tgtW,h=t.tgtH,d=e.pstyle("control-point-step-size").pfValue,f=e.pstyle("control-point-distances"),p=f?f.pfValue[0]:void 0,y=r,v=d;a&&(y=0,v=p);var m=50,x={x:n.x-o/2,y:n.y-l/2},b={x:s.x-u/2,y:s.y-h/2},w={x:Math.min(x.x,b.x),y:Math.min(x.y,b.y)},C=.5,T=Math.max(C,Math.log(o*sc)),k=Math.max(C,Math.log(u*sc));i.ctrlpts=[w.x,w.y-(1+Math.pow(m,1.12)/100)*v*(y/3+1)*T,w.x-(1+Math.pow(m,1.12)/100)*v*(y/3+1)*k,w.y]};Yr.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"};Yr.findBezierPoints=function(e,t,r,a,i){var n=e._private.rscratch,s=e.pstyle("control-point-step-size").pfValue,o=e.pstyle("control-point-distances"),l=e.pstyle("control-point-weights"),u=o&&l?Math.min(o.value.length,l.value.length):1,h=o?o.pfValue[0]:void 0,d=l.value[0],f=a;n.edgeType=f?"multibezier":"bezier",n.ctrlpts=[];for(var p=0;p<u;p++){var y=(.5-t.eles.length/2+r)*s*(i?-1:1),v=void 0,m=y1(y);f&&(h=o?o.pfValue[p]:s,d=l.value[p]),a?v=h:v=h!==void 0?m*h:void 0;var x=v!==void 0?v:y,b=1-d,w=d,C=this.findMidptPtsEtc(e,t),T=C.midptPts,k=C.vectorNormInverse,S={x:T.x1*b+T.x2*w,y:T.y1*b+T.y2*w};n.ctrlpts.push(S.x+k.x*x,S.y+k.y*x)}};Yr.findTaxiPoints=function(e,t){var r=e._private.rscratch;r.edgeType="segments";var a="vertical",i="horizontal",n="leftward",s="rightward",o="downward",l="upward",u="auto",h=t.posPts,d=t.srcW,f=t.srcH,p=t.tgtW,y=t.tgtH,v=e.pstyle("edge-distances").value,m=v!=="node-position",x=e.pstyle("taxi-direction").value,b=x,w=e.pstyle("taxi-turn"),C=w.units==="%",T=w.pfValue,k=T<0,S=e.pstyle("taxi-turn-min-distance").pfValue,L=m?(d+p)/2:0,_=m?(f+y)/2:0,A=h.x2-h.x1,E=h.y2-h.y1,D=function(B,et){return B>0?Math.max(B-et,0):Math.min(B+et,0)},R=D(A,L),O=D(E,_),P=!1;b===u?x=Math.abs(R)>Math.abs(O)?i:a:b===l||b===o?(x=a,P=!0):(b===n||b===s)&&(x=i,P=!0);var $=x===a,M=$?O:R,I=$?E:A,F=y1(I),V=!1;!(P&&(C||k))&&(b===o&&I<0||b===l&&I>0||b===n&&I>0||b===s&&I<0)&&(F*=-1,M=F*Math.abs(M),V=!0);var N;if(C){var q=T<0?1+T:T;N=q*M}else{var U=T<0?M:0;N=U+T*F}var X=function(B){return Math.abs(B)<S||Math.abs(B)>=Math.abs(M)},lt=X(N),J=X(Math.abs(M)-Math.abs(N)),ct=lt||J;if(ct&&!V)if($){var yt=Math.abs(I)<=f/2,ut=Math.abs(A)<=p/2;if(yt){var Q=(h.x1+h.x2)/2,K=h.y1,j=h.y2;r.segpts=[Q,K,Q,j]}else if(ut){var Y=(h.y1+h.y2)/2,st=h.x1,W=h.x2;r.segpts=[st,Y,W,Y]}else r.segpts=[h.x1,h.y2]}else{var bt=Math.abs(I)<=d/2,tt=Math.abs(E)<=y/2;if(bt){var H=(h.y1+h.y2)/2,Et=h.x1,nt=h.x2;r.segpts=[Et,H,nt,H]}else if(tt){var Lt=(h.x1+h.x2)/2,Dt=h.y1,At=h.y2;r.segpts=[Lt,Dt,Lt,At]}else r.segpts=[h.x2,h.y1]}else if($){var xt=h.y1+N+(m?f/2*F:0),_t=h.x1,vt=h.x2;r.segpts=[_t,xt,vt,xt]}else{var wt=h.x1+N+(m?d/2*F:0),St=h.y1,at=h.y2;r.segpts=[wt,St,wt,at]}if(r.isRound){var Ct=e.pstyle("taxi-radius").value,z=e.pstyle("radius-type").value[0]==="arc-radius";r.radii=new Array(r.segpts.length/2).fill(Ct),r.isArcRadius=new Array(r.segpts.length/2).fill(z)}};Yr.tryToCorrectInvalidPoints=function(e,t){var r=e._private.rscratch;if(r.edgeType==="bezier"){var a=t.srcPos,i=t.tgtPos,n=t.srcW,s=t.srcH,o=t.tgtW,l=t.tgtH,u=t.srcShape,h=t.tgtShape,d=t.srcCornerRadius,f=t.tgtCornerRadius,p=t.srcRs,y=t.tgtRs,v=!Vt(r.startX)||!Vt(r.startY),m=!Vt(r.arrowStartX)||!Vt(r.arrowStartY),x=!Vt(r.endX)||!Vt(r.endY),b=!Vt(r.arrowEndX)||!Vt(r.arrowEndY),w=3,C=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth,T=w*C,k=Hn({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),S=k<T,L=Hn({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),_=L<T,A=!1;if(v||m||S){A=!0;var E={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},D=Math.sqrt(E.x*E.x+E.y*E.y),R={x:E.x/D,y:E.y/D},O=Math.max(n,s),P={x:r.ctrlpts[0]+R.x*2*O,y:r.ctrlpts[1]+R.y*2*O},$=u.intersectLine(a.x,a.y,n,s,P.x,P.y,0,d,p);S?(r.ctrlpts[0]=r.ctrlpts[0]+R.x*(T-k),r.ctrlpts[1]=r.ctrlpts[1]+R.y*(T-k)):(r.ctrlpts[0]=$[0]+R.x*T,r.ctrlpts[1]=$[1]+R.y*T)}if(x||b||_){A=!0;var M={x:r.ctrlpts[0]-i.x,y:r.ctrlpts[1]-i.y},I=Math.sqrt(M.x*M.x+M.y*M.y),F={x:M.x/I,y:M.y/I},V=Math.max(n,s),N={x:r.ctrlpts[0]+F.x*2*V,y:r.ctrlpts[1]+F.y*2*V},q=h.intersectLine(i.x,i.y,o,l,N.x,N.y,0,f,y);_?(r.ctrlpts[0]=r.ctrlpts[0]+F.x*(T-L),r.ctrlpts[1]=r.ctrlpts[1]+F.y*(T-L)):(r.ctrlpts[0]=q[0]+F.x*T,r.ctrlpts[1]=q[1]+F.y*T)}A&&this.findEndpoints(e)}};Yr.storeAllpts=function(e){var t=e._private.rscratch;if(t.edgeType==="multibezier"||t.edgeType==="bezier"||t.edgeType==="self"||t.edgeType==="compound"){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var r=0;r+1<t.ctrlpts.length;r+=2)t.allpts.push(t.ctrlpts[r],t.ctrlpts[r+1]),r+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[r]+t.ctrlpts[r+2])/2,(t.ctrlpts[r+1]+t.ctrlpts[r+3])/2);t.allpts.push(t.endX,t.endY);var a,i;t.ctrlpts.length/2%2===0?(a=t.allpts.length/2-1,t.midX=t.allpts[a],t.midY=t.allpts[a+1]):(a=t.allpts.length/2-3,i=.5,t.midX=Tr(t.allpts[a],t.allpts[a+2],t.allpts[a+4],i),t.midY=Tr(t.allpts[a+1],t.allpts[a+3],t.allpts[a+5],i))}else if(t.edgeType==="straight")t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if(t.edgeType==="segments"){if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.isRound){t.roundCorners=[];for(var n=2;n+3<t.allpts.length;n+=2){var s=t.radii[n/2-1],o=t.isArcRadius[n/2-1];t.roundCorners.push(L1({x:t.allpts[n-2],y:t.allpts[n-1]},{x:t.allpts[n],y:t.allpts[n+1],radius:s},{x:t.allpts[n+2],y:t.allpts[n+3]},s,o))}}if(t.segpts.length%4===0){var l=t.segpts.length/2,u=l-2;t.midX=(t.segpts[u]+t.segpts[l])/2,t.midY=(t.segpts[u+1]+t.segpts[l+1])/2}else{var h=t.segpts.length/2-1;if(!t.isRound)t.midX=t.segpts[h],t.midY=t.segpts[h+1];else{var d={x:t.segpts[h],y:t.segpts[h+1]},f=t.roundCorners[h/2];if(f.radius===0){var p={x:t.segpts[h+2],y:t.segpts[h+3]};t.midX=d.x,t.midY=d.y,t.midVector=[d.y-p.y,p.x-d.x]}else{var y=[d.x-f.cx,d.y-f.cy],v=f.radius/Math.sqrt(Math.pow(y[0],2)+Math.pow(y[1],2));y=y.map(function(m){return m*v}),t.midX=f.cx+y[0],t.midY=f.cy+y[1],t.midVector=y}}}}};Yr.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||Vt(t.startX)&&Vt(t.startY)&&Vt(t.endX)&&Vt(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,Pe("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};Yr.findEdgeControlPoints=function(e){var t=this;if(!(!e||e.length===0)){for(var r=this,a=r.cy,i=a.hasCompoundNodes(),n=new Si,s=function(_,A){return[].concat(oh(_),[A?1:0]).join("-")},o=[],l=[],u=0;u<e.length;u++){var h=e[u],d=h._private,f=h.pstyle("curve-style").value;if(!(h.removed()||!h.takesUpSpace())){if(f==="haystack"){l.push(h);continue}var p=f==="unbundled-bezier"||f.endsWith("segments")||f==="straight"||f==="straight-triangle"||f.endsWith("taxi"),y=f==="unbundled-bezier"||f==="bezier",v=d.source,m=d.target,x=v.poolIndex(),b=m.poolIndex(),w=[x,b].sort(),C=s(w,p),T=n.get(C);T==null&&(T={eles:[]},o.push({pairId:w,edgeIsUnbundled:p}),n.set(C,T)),T.eles.push(h),p&&(T.hasUnbundled=!0),y&&(T.hasBezier=!0)}}for(var k=function(){var _=o[S],A=_.pairId,E=_.edgeIsUnbundled,D=s(A,E),R=n.get(D),O;if(!R.hasUnbundled){var P=R.eles[0].parallelEdges().filter(function(z){return z.isBundledBezier()});p1(R.eles),P.forEach(function(z){return R.eles.push(z)}),R.eles.sort(function(z,ft){return z.poolIndex()-ft.poolIndex()})}var $=R.eles[0],M=$.source(),I=$.target();if(M.poolIndex()>I.poolIndex()){var F=M;M=I,I=F}var V=R.srcPos=M.position(),N=R.tgtPos=I.position(),q=R.srcW=M.outerWidth(),U=R.srcH=M.outerHeight(),X=R.tgtW=I.outerWidth(),lt=R.tgtH=I.outerHeight(),J=R.srcShape=r.nodeShapes[t.getNodeShape(M)],ct=R.tgtShape=r.nodeShapes[t.getNodeShape(I)],yt=R.srcCornerRadius=M.pstyle("corner-radius").value==="auto"?"auto":M.pstyle("corner-radius").pfValue,ut=R.tgtCornerRadius=I.pstyle("corner-radius").value==="auto"?"auto":I.pstyle("corner-radius").pfValue,Q=R.tgtRs=I._private.rscratch,K=R.srcRs=M._private.rscratch;R.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var j=0;j<R.eles.length;j++){var Y=R.eles[j],st=Y[0]._private.rscratch,W=Y.pstyle("curve-style").value,bt=W==="unbundled-bezier"||W.endsWith("segments")||W.endsWith("taxi"),tt=!M.same(Y.source());if(!R.calculatedIntersection&&M!==I&&(R.hasBezier||R.hasUnbundled)){R.calculatedIntersection=!0;var H=J.intersectLine(V.x,V.y,q,U,N.x,N.y,0,yt,K),Et=R.srcIntn=H,nt=ct.intersectLine(N.x,N.y,X,lt,V.x,V.y,0,ut,Q),Lt=R.tgtIntn=nt,Dt=R.intersectionPts={x1:H[0],x2:nt[0],y1:H[1],y2:nt[1]},At=R.posPts={x1:V.x,x2:N.x,y1:V.y,y2:N.y},xt=nt[1]-H[1],_t=nt[0]-H[0],vt=Math.sqrt(_t*_t+xt*xt);Vt(vt)&&vt>=nz||(vt=Math.sqrt(Math.max(_t*_t,sc)+Math.max(xt*xt,sc)));var wt=R.vector={x:_t,y:xt},St=R.vectorNorm={x:wt.x/vt,y:wt.y/vt},at={x:-St.y,y:St.x};R.nodesOverlap=!Vt(vt)||ct.checkPoint(H[0],H[1],0,X,lt,N.x,N.y,ut,Q)||J.checkPoint(nt[0],nt[1],0,q,U,V.x,V.y,yt,K),R.vectorNormInverse=at,O={nodesOverlap:R.nodesOverlap,dirCounts:R.dirCounts,calculatedIntersection:!0,hasBezier:R.hasBezier,hasUnbundled:R.hasUnbundled,eles:R.eles,srcPos:N,srcRs:Q,tgtPos:V,tgtRs:K,srcW:X,srcH:lt,tgtW:q,tgtH:U,srcIntn:Lt,tgtIntn:Et,srcShape:ct,tgtShape:J,posPts:{x1:At.x2,y1:At.y2,x2:At.x1,y2:At.y1},intersectionPts:{x1:Dt.x2,y1:Dt.y2,x2:Dt.x1,y2:Dt.y1},vector:{x:-wt.x,y:-wt.y},vectorNorm:{x:-St.x,y:-St.y},vectorNormInverse:{x:-at.x,y:-at.y}}}var Ct=tt?O:R;st.nodesOverlap=Ct.nodesOverlap,st.srcIntn=Ct.srcIntn,st.tgtIntn=Ct.tgtIntn,st.isRound=W.startsWith("round"),i&&(M.isParent()||M.isChild()||I.isParent()||I.isChild())&&(M.parents().anySame(I)||I.parents().anySame(M)||M.same(I)&&M.isParent())?t.findCompoundLoopPoints(Y,Ct,j,bt):M===I?t.findLoopPoints(Y,Ct,j,bt):W.endsWith("segments")?t.findSegmentsPoints(Y,Ct):W.endsWith("taxi")?t.findTaxiPoints(Y,Ct):W==="straight"||!bt&&R.eles.length%2===1&&j===Math.floor(R.eles.length/2)?t.findStraightEdgePoints(Y):t.findBezierPoints(Y,Ct,j,bt,tt),t.findEndpoints(Y),t.tryToCorrectInvalidPoints(Y,Ct),t.checkForInvalidEdgeWarning(Y),t.storeAllpts(Y),t.storeEdgeProjections(Y),t.calculateArrowAngles(Y),t.recalculateEdgeLabelProjections(Y),t.calculateLabelAngles(Y)}},S=0;S<o.length;S++)k();this.findHaystackPoints(l)}};function AC(e){var t=[];if(e!=null){for(var r=0;r<e.length;r+=2){var a=e[r],i=e[r+1];t.push({x:a,y:i})}return t}}Yr.getSegmentPoints=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);var r=t.edgeType;if(r==="segments")return AC(t.segpts)};Yr.getControlPoints=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);var r=t.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return AC(t.ctrlpts)};Yr.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var Lc={};Lc.manualEndptToPx=function(e,t){var r=this,a=e.position(),i=e.outerWidth(),n=e.outerHeight(),s=e._private.rscratch;if(t.value.length===2){var o=[t.pfValue[0],t.pfValue[1]];return t.units[0]==="%"&&(o[0]=o[0]*i),t.units[1]==="%"&&(o[1]=o[1]*n),o[0]+=a.x,o[1]+=a.y,o}else{var l=t.pfValue[0];l=-Math.PI/2+l;var u=2*Math.max(i,n),h=[a.x+Math.cos(l)*u,a.y+Math.sin(l)*u];return r.nodeShapes[this.getNodeShape(e)].intersectLine(a.x,a.y,i,n,h[0],h[1],0,e.pstyle("corner-radius").value==="auto"?"auto":e.pstyle("corner-radius").pfValue,s)}};Lc.findEndpoints=function(e){var t=this,r,a=e.source()[0],i=e.target()[0],n=a.position(),s=i.position(),o=e.pstyle("target-arrow-shape").value,l=e.pstyle("source-arrow-shape").value,u=e.pstyle("target-distance-from-node").pfValue,h=e.pstyle("source-distance-from-node").pfValue,d=a._private.rscratch,f=i._private.rscratch,p=e.pstyle("curve-style").value,y=e._private.rscratch,v=y.edgeType,m=p==="taxi",x=v==="self"||v==="compound",b=v==="bezier"||v==="multibezier"||x,w=v!=="bezier",C=v==="straight"||v==="segments",T=v==="segments",k=b||w||C,S=x||m,L=e.pstyle("source-endpoint"),_=S?"outside-to-node":L.value,A=a.pstyle("corner-radius").value==="auto"?"auto":a.pstyle("corner-radius").pfValue,E=e.pstyle("target-endpoint"),D=S?"outside-to-node":E.value,R=i.pstyle("corner-radius").value==="auto"?"auto":i.pstyle("corner-radius").pfValue;y.srcManEndpt=L,y.tgtManEndpt=E;var O,P,$,M;if(b){var I=[y.ctrlpts[0],y.ctrlpts[1]],F=w?[y.ctrlpts[y.ctrlpts.length-2],y.ctrlpts[y.ctrlpts.length-1]]:I;O=F,P=I}else if(C){var V=T?y.segpts.slice(0,2):[s.x,s.y],N=T?y.segpts.slice(y.segpts.length-2):[n.x,n.y];O=N,P=V}if(D==="inside-to-node")r=[s.x,s.y];else if(E.units)r=this.manualEndptToPx(i,E);else if(D==="outside-to-line")r=y.tgtIntn;else if(D==="outside-to-node"||D==="outside-to-node-or-label"?$=O:(D==="outside-to-line"||D==="outside-to-line-or-label")&&($=[n.x,n.y]),r=t.nodeShapes[this.getNodeShape(i)].intersectLine(s.x,s.y,i.outerWidth(),i.outerHeight(),$[0],$[1],0,R,f),D==="outside-to-node-or-label"||D==="outside-to-line-or-label"){var q=i._private.rscratch,U=q.labelWidth,X=q.labelHeight,lt=q.labelX,J=q.labelY,ct=U/2,yt=X/2,ut=i.pstyle("text-valign").value;ut==="top"?J-=yt:ut==="bottom"&&(J+=yt);var Q=i.pstyle("text-halign").value;Q==="left"?lt-=ct:Q==="right"&&(lt+=ct);var K=ec($[0],$[1],[lt-ct,J-yt,lt+ct,J-yt,lt+ct,J+yt,lt-ct,J+yt],s.x,s.y);if(K.length>0){var j=n,Y=kn(j,ws(r)),st=kn(j,ws(K)),W=Y;if(st<Y&&(r=K,W=st),K.length>2){var bt=kn(j,{x:K[2],y:K[3]});bt<W&&(r=[K[2],K[3]])}}}var tt=Yc(r,O,t.arrowShapes[o].spacing(e)+u),H=Yc(r,O,t.arrowShapes[o].gap(e)+u);if(y.endX=H[0],y.endY=H[1],y.arrowEndX=tt[0],y.arrowEndY=tt[1],_==="inside-to-node")r=[n.x,n.y];else if(L.units)r=this.manualEndptToPx(a,L);else if(_==="outside-to-line")r=y.srcIntn;else if(_==="outside-to-node"||_==="outside-to-node-or-label"?M=P:(_==="outside-to-line"||_==="outside-to-line-or-label")&&(M=[s.x,s.y]),r=t.nodeShapes[this.getNodeShape(a)].intersectLine(n.x,n.y,a.outerWidth(),a.outerHeight(),M[0],M[1],0,A,d),_==="outside-to-node-or-label"||_==="outside-to-line-or-label"){var Et=a._private.rscratch,nt=Et.labelWidth,Lt=Et.labelHeight,Dt=Et.labelX,At=Et.labelY,xt=nt/2,_t=Lt/2,vt=a.pstyle("text-valign").value;vt==="top"?At-=_t:vt==="bottom"&&(At+=_t);var wt=a.pstyle("text-halign").value;wt==="left"?Dt-=xt:wt==="right"&&(Dt+=xt);var St=ec(M[0],M[1],[Dt-xt,At-_t,Dt+xt,At-_t,Dt+xt,At+_t,Dt-xt,At+_t],n.x,n.y);if(St.length>0){var at=s,Ct=kn(at,ws(r)),z=kn(at,ws(St)),ft=Ct;if(z<Ct&&(r=[St[0],St[1]],ft=z),St.length>2){var B=kn(at,{x:St[2],y:St[3]});B<ft&&(r=[St[2],St[3]])}}}var et=Yc(r,P,t.arrowShapes[l].spacing(e)+h),Z=Yc(r,P,t.arrowShapes[l].gap(e)+h);y.startX=Z[0],y.startY=Z[1],y.arrowStartX=et[0],y.arrowStartY=et[1],k&&(!Vt(y.startX)||!Vt(y.startY)||!Vt(y.endX)||!Vt(y.endY)?y.badLine=!0:y.badLine=!1)};Lc.getSourceEndpoint=function(e){var t=e[0]._private.rscratch;switch(this.recalculateRenderedStyle(e),t.edgeType){case"haystack":return{x:t.haystackPts[0],y:t.haystackPts[1]};default:return{x:t.arrowStartX,y:t.arrowStartY}}};Lc.getTargetEndpoint=function(e){var t=e[0]._private.rscratch;switch(this.recalculateRenderedStyle(e),t.edgeType){case"haystack":return{x:t.haystackPts[2],y:t.haystackPts[3]};default:return{x:t.arrowEndX,y:t.arrowEndY}}};var D1={};function sz(e,t,r){for(var a=function(u,h,d,f){return Tr(u,h,d,f)},i=t._private,n=i.rstyle.bezierPts,s=0;s<e.bezierProjPcts.length;s++){var o=e.bezierProjPcts[s];n.push({x:a(r[0],r[2],r[4],o),y:a(r[1],r[3],r[5],o)})}}D1.storeEdgeProjections=function(e){var t=e._private,r=t.rscratch,a=r.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,a==="multibezier"||a==="bezier"||a==="self"||a==="compound"){t.rstyle.bezierPts=[];for(var i=0;i+5<r.allpts.length;i+=4)sz(this,e,r.allpts.slice(i,i+6))}else if(a==="segments")for(var n=t.rstyle.linePts=[],i=0;i+1<r.allpts.length;i+=2)n.push({x:r.allpts[i],y:r.allpts[i+1]});else if(a==="haystack"){var s=r.haystackPts;t.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth};D1.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var di={};di.recalculateNodeLabelProjection=function(e){var t=e.pstyle("label").strValue;if(!Ji(t)){var r,a,i=e._private,n=e.width(),s=e.height(),o=e.padding(),l=e.position(),u=e.pstyle("text-halign").strValue,h=e.pstyle("text-valign").strValue,d=i.rscratch,f=i.rstyle;switch(u){case"left":r=l.x-n/2-o;break;case"right":r=l.x+n/2+o;break;default:r=l.x}switch(h){case"top":a=l.y-s/2-o;break;case"bottom":a=l.y+s/2+o;break;default:a=l.y}d.labelX=r,d.labelY=a,f.labelX=r,f.labelY=a,this.calculateLabelAngles(e),this.applyLabelDimensions(e)}};var LC=function(t,r){var a=Math.atan(r/t);return t===0&&a<0&&(a=a*-1),a},DC=function(t,r){var a=r.x-t.x,i=r.y-t.y;return LC(a,i)},oz=function(t,r,a,i){var n=tc(0,i-.001,1),s=tc(0,i+.001,1),o=As(t,r,a,n),l=As(t,r,a,s);return DC(o,l)};di.recalculateEdgeLabelProjections=function(e){var t,r=e._private,a=r.rscratch,i=this,n={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(n.mid||n.source||n.target){t={x:a.midX,y:a.midY};var s=function(d,f,p){ki(r.rscratch,d,f,p),ki(r.rstyle,d,f,p)};s("labelX",null,t.x),s("labelY",null,t.y);var o=LC(a.midDispX,a.midDispY);s("labelAutoAngle",null,o);var l=function(){if(l.cache)return l.cache;for(var d=[],f=0;f+5<a.allpts.length;f+=4){var p={x:a.allpts[f],y:a.allpts[f+1]},y={x:a.allpts[f+2],y:a.allpts[f+3]},v={x:a.allpts[f+4],y:a.allpts[f+5]};d.push({p0:p,p1:y,p2:v,startDist:0,length:0,segments:[]})}var m=r.rstyle.bezierPts,x=i.bezierProjPcts.length;function b(S,L,_,A,E){var D=Hn(L,_),R=S.segments[S.segments.length-1],O={p0:L,p1:_,t0:A,t1:E,startDist:R?R.startDist+R.length:0,length:D};S.segments.push(O),S.length+=D}for(var w=0;w<d.length;w++){var C=d[w],T=d[w-1];T&&(C.startDist=T.startDist+T.length),b(C,C.p0,m[w*x],0,i.bezierProjPcts[0]);for(var k=0;k<x-1;k++)b(C,m[w*x+k],m[w*x+k+1],i.bezierProjPcts[k],i.bezierProjPcts[k+1]);b(C,m[w*x+x-1],C.p2,i.bezierProjPcts[x-1],1)}return l.cache=d},u=function(d){var f,p=d==="source";if(n[d]){var y=e.pstyle(d+"-text-offset").pfValue;switch(a.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var v=l(),m,x=0,b=0,w=0;w<v.length;w++){for(var C=v[p?w:v.length-1-w],T=0;T<C.segments.length;T++){var k=C.segments[p?T:C.segments.length-1-T],S=w===v.length-1&&T===C.segments.length-1;if(x=b,b+=k.length,b>=y||S){m={cp:C,segment:k};break}}if(m)break}var L=m.cp,_=m.segment,A=(y-x)/_.length,E=_.t1-_.t0,D=p?_.t0+E*A:_.t1-E*A;D=tc(0,D,1),t=As(L.p0,L.p1,L.p2,D),f=oz(L.p0,L.p1,L.p2,D);break}case"straight":case"segments":case"haystack":{for(var R=0,O,P,$,M,I=a.allpts.length,F=0;F+3<I&&(p?($={x:a.allpts[F],y:a.allpts[F+1]},M={x:a.allpts[F+2],y:a.allpts[F+3]}):($={x:a.allpts[I-2-F],y:a.allpts[I-1-F]},M={x:a.allpts[I-4-F],y:a.allpts[I-3-F]}),O=Hn($,M),P=R,R+=O,!(R>=y));F+=2);var V=y-P,N=V/O;N=tc(0,N,1),t=LF($,M,N),f=DC($,M);break}}s("labelX",d,t.x),s("labelY",d,t.y),s("labelAutoAngle",d,f)}};u("source"),u("target"),this.applyLabelDimensions(e)}};di.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))};di.applyPrefixedLabelDimensions=function(e,t){var r=e._private,a=this.getLabelText(e,t),i=Gn(a,e._private.labelDimsKey);if(na(r.rscratch,"prefixedLabelDimsKey",t)!==i){ki(r.rscratch,"prefixedLabelDimsKey",t,i);var n=this.calculateLabelDimensions(e,a),s=e.pstyle("line-height").pfValue,o=e.pstyle("text-wrap").strValue,l=na(r.rscratch,"labelWrapCachedLines",t)||[],u=o!=="wrap"?1:Math.max(l.length,1),h=n.height/u,d=h*s,f=n.width,p=n.height+(u-1)*(s-1)*h;ki(r.rstyle,"labelWidth",t,f),ki(r.rscratch,"labelWidth",t,f),ki(r.rstyle,"labelHeight",t,p),ki(r.rscratch,"labelHeight",t,p),ki(r.rscratch,"labelLineHeight",t,d)}};di.getLabelText=function(e,t){var r=e._private,a=t?t+"-":"",i=e.pstyle(a+"label").strValue,n=e.pstyle("text-transform").value,s=function(U,X){return X?(ki(r.rscratch,U,t,X),X):na(r.rscratch,U,t)};if(!i)return"";n=="none"||(n=="uppercase"?i=i.toUpperCase():n=="lowercase"&&(i=i.toLowerCase()));var o=e.pstyle("text-wrap").value;if(o==="wrap"){var l=s("labelKey");if(l!=null&&s("labelWrapKey")===l)return s("labelWrapCachedText");for(var u="​",h=i.split(`
`),d=e.pstyle("text-max-width").pfValue,f=e.pstyle("text-overflow-wrap").value,p=f==="anywhere",y=[],v=/[\s\u200b]+|$/g,m=0;m<h.length;m++){var x=h[m],b=this.calculateLabelDimensions(e,x),w=b.width;if(p){var C=x.split("").join(u);x=C}if(w>d){var T=x.matchAll(v),k="",S=0,L=ca(T),_;try{for(L.s();!(_=L.n()).done;){var A=_.value,E=A[0],D=x.substring(S,A.index);S=A.index+E.length;var R=k.length===0?D:k+D+E,O=this.calculateLabelDimensions(e,R),P=O.width;P<=d?k+=D+E:(k&&y.push(k),k=D+E)}}catch(q){L.e(q)}finally{L.f()}k.match(/^[\s\u200b]+$/)||y.push(k)}else y.push(x)}s("labelWrapCachedLines",y),i=s("labelWrapCachedText",y.join(`
`)),s("labelWrapKey",l)}else if(o==="ellipsis"){var $=e.pstyle("text-max-width").pfValue,M="",I="…",F=!1;if(this.calculateLabelDimensions(e,i).width<$)return i;for(var V=0;V<i.length;V++){var N=this.calculateLabelDimensions(e,M+i[V]+I).width;if(N>$)break;M+=i[V],V===i.length-1&&(F=!0)}return F||(M+=I),M}return i};di.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,r=e.pstyle("text-halign").strValue;if(t==="auto")if(e.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return t};di.calculateLabelDimensions=function(e,t){var r=this,a=r.cy.window(),i=a.document,n=0,s=e.pstyle("font-style").strValue,o=e.pstyle("font-size").pfValue,l=e.pstyle("font-family").strValue,u=e.pstyle("font-weight").strValue,h=this.labelCalcCanvas,d=this.labelCalcCanvasContext;if(!h){h=this.labelCalcCanvas=i.createElement("canvas"),d=this.labelCalcCanvasContext=h.getContext("2d");var f=h.style;f.position="absolute",f.left="-9999px",f.top="-9999px",f.zIndex="-1",f.visibility="hidden",f.pointerEvents="none"}d.font="".concat(s," ").concat(u," ").concat(o,"px ").concat(l);for(var p=0,y=0,v=t.split(`
`),m=0;m<v.length;m++){var x=v[m],b=d.measureText(x),w=Math.ceil(b.width),C=o;p=Math.max(w,p),y+=C}return p+=n,y+=n,{width:p,height:y}};di.calculateLabelAngle=function(e,t){var r=e._private,a=r.rscratch,i=e.isEdge(),n=t?t+"-":"",s=e.pstyle(n+"text-rotation"),o=s.strValue;return o==="none"?0:i&&o==="autorotate"?a.labelAutoAngle:o==="autorotate"?0:s.pfValue};di.calculateLabelAngles=function(e){var t=this,r=e.isEdge(),a=e._private,i=a.rscratch;i.labelAngle=t.calculateLabelAngle(e),r&&(i.sourceLabelAngle=t.calculateLabelAngle(e,"source"),i.targetLabelAngle=t.calculateLabelAngle(e,"target"))};var BC={},g2=28,y2=!1;BC.getNodeShape=function(e){var t=this,r=e.pstyle("shape").value;if(r==="cutrectangle"&&(e.width()<g2||e.height()<g2))return y2||(Pe("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),y2=!0),"rectangle";if(e.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var a=e.pstyle("shape-polygon-points").value;return t.nodeShapes.makePolygon(a).name}return r};var hd={};hd.registerCalculationListeners=function(){var e=this.cy,t=e.collection(),r=this,a=function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t.merge(s),o)for(var l=0;l<s.length;l++){var u=s[l],h=u._private,d=h.rstyle;d.clean=!1,d.cleanConnected=!1}};r.binder(e).on("bounds.* dirty.*",function(s){var o=s.target;a(o)}).on("style.* background.*",function(s){var o=s.target;a(o,!1)});var i=function(s){if(s){var o=r.onUpdateEleCalcsFns;t.cleanStyle();for(var l=0;l<t.length;l++){var u=t[l],h=u._private.rstyle;u.isNode()&&!h.cleanConnected&&(a(u.connectedEdges()),h.cleanConnected=!0)}if(o)for(var d=0;d<o.length;d++){var f=o[d];f(s,t)}r.recalculateRenderedStyle(t),t=e.collection()}};r.flushRenderedStyleQueue=function(){i(!0)},r.beforeRender(i,r.beforeRenderPriorities.eleCalcs)};hd.onUpdateEleCalcs=function(e){var t=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];t.push(e)};hd.recalculateRenderedStyle=function(e,t){var r=function(C){return C._private.rstyle.cleanConnected};if(e.length!==0){var a=[],i=[];if(!this.destroyed){t===void 0&&(t=!0);for(var n=0;n<e.length;n++){var s=e[n],o=s._private,l=o.rstyle;s.isEdge()&&(!r(s.source())||!r(s.target()))&&(l.clean=!1),s.isEdge()&&s.isBundledBezier()&&s.parallelEdges().some(function(w){return!w._private.rstyle.clean&&w.isBundledBezier()})&&(l.clean=!1),!(t&&l.clean||s.removed())&&s.pstyle("display").value!=="none"&&(o.group==="nodes"?i.push(s):a.push(s),l.clean=!0)}for(var u=0;u<i.length;u++){var h=i[u],d=h._private,f=d.rstyle,p=h.position();this.recalculateNodeLabelProjection(h),f.nodeX=p.x,f.nodeY=p.y,f.nodeW=h.pstyle("width").pfValue,f.nodeH=h.pstyle("height").pfValue}this.recalculateEdgeProjections(a);for(var y=0;y<a.length;y++){var v=a[y],m=v._private,x=m.rstyle,b=m.rscratch;x.srcX=b.arrowStartX,x.srcY=b.arrowStartY,x.tgtX=b.arrowEndX,x.tgtY=b.arrowEndY,x.midX=b.midX,x.midY=b.midY,x.labelAngle=b.labelAngle,x.sourceLabelAngle=b.sourceLabelAngle,x.targetLabelAngle=b.targetLabelAngle}}}};var dd={};dd.updateCachedGrabbedEles=function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],r=0;r<e.length;r++){var a=e[r],i=a._private.rscratch;a.grabbed()&&!a.isParent()?t.push(a):i.inDragLayer?e.drag.push(a):e.nondrag.push(a)}for(var r=0;r<t.length;r++){var a=t[r];e.drag.push(a)}}};dd.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};dd.getCachedZSortedEles=function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(dC),t.interactive=t.filter(function(r){return r.interactive()}),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t};var RC={};[es,vh,Yr,Lc,D1,di,BC,hd,dd].forEach(function(e){pe(RC,e)});var IC={};IC.getCachedImage=function(e,t,r){var a=this,i=a.imageCache=a.imageCache||{},n=i[e];if(n)return n.image.complete||n.image.addEventListener("load",r),n.image;n=i[e]=i[e]||{};var s=n.image=new Image;s.addEventListener("load",r),s.addEventListener("error",function(){s.error=!0});var o="data:",l=e.substring(0,o.length).toLowerCase()===o;return l||(t=t==="null"?null:t,s.crossOrigin=t),s.src=e,s};var tl={};tl.registerBinding=function(e,t,r,a){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(e)){for(var n=[],s=0;s<e.length;s++){var o=e[s];if(o!==void 0){var l=this.binder(o);n.push(l.on.apply(l,i))}}return n}var l=this.binder(e);return l.on.apply(l,i)};tl.binder=function(e){var t=this,r=t.cy.window(),a=e===r||e===r.document||e===r.document.body||kM(e);if(t.supportsPassiveEvents==null){var i=!1;try{var n=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});r.addEventListener("test",null,n)}catch{}t.supportsPassiveEvents=i}var s=function(l,u,h){var d=Array.prototype.slice.call(arguments);return a&&t.supportsPassiveEvents&&(d[2]={capture:h??!1,passive:!1,once:!1}),t.bindings.push({target:e,args:d}),(e.addEventListener||e.on).apply(e,d),this};return{on:s,addEventListener:s,addListener:s,bind:s}};tl.nodeIsDraggable=function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()};tl.nodeIsGrabbable=function(e){return this.nodeIsDraggable(e)&&e.interactive()};tl.load=function(){var e=this,t=e.cy.window(),r=function(B){return B.selected()},a=function(B){var et=B.getRootNode();if(et&&et.nodeType===11&&et.host!==void 0)return et},i=function(B,et,Z,ht){B==null&&(B=e.cy);for(var ot=0;ot<et.length;ot++){var pt=et[ot];B.emit({originalEvent:Z,type:pt,position:ht})}},n=function(B){return B.shiftKey||B.metaKey||B.ctrlKey},s=function(B,et){var Z=!0;if(e.cy.hasCompoundNodes()&&B&&B.pannable())for(var ht=0;et&&ht<et.length;ht++){var B=et[ht];if(B.isNode()&&B.isParent()&&!B.pannable()){Z=!1;break}}else Z=!0;return Z},o=function(B){B[0]._private.grabbed=!0},l=function(B){B[0]._private.grabbed=!1},u=function(B){B[0]._private.rscratch.inDragLayer=!0},h=function(B){B[0]._private.rscratch.inDragLayer=!1},d=function(B){B[0]._private.rscratch.isGrabTarget=!0},f=function(B){B[0]._private.rscratch.isGrabTarget=!1},p=function(B,et){var Z=et.addToList,ht=Z.has(B);!ht&&B.grabbable()&&!B.locked()&&(Z.merge(B),o(B))},y=function(B,et){if(B.cy().hasCompoundNodes()&&!(et.inDragLayer==null&&et.addToList==null)){var Z=B.descendants();et.inDragLayer&&(Z.forEach(u),Z.connectedEdges().forEach(u)),et.addToList&&p(Z,et)}},v=function(B,et){et=et||{};var Z=B.cy().hasCompoundNodes();et.inDragLayer&&(B.forEach(u),B.neighborhood().stdFilter(function(ht){return!Z||ht.isEdge()}).forEach(u)),et.addToList&&B.forEach(function(ht){p(ht,et)}),y(B,et),b(B,{inDragLayer:et.inDragLayer}),e.updateCachedGrabbedEles()},m=v,x=function(B){B&&(e.getCachedZSortedEles().forEach(function(et){l(et),h(et),f(et)}),e.updateCachedGrabbedEles())},b=function(B,et){if(!(et.inDragLayer==null&&et.addToList==null)&&B.cy().hasCompoundNodes()){var Z=B.ancestors().orphans();if(!Z.same(B)){var ht=Z.descendants().spawnSelf().merge(Z).unmerge(B).unmerge(B.descendants()),ot=ht.connectedEdges();et.inDragLayer&&(ot.forEach(u),ht.forEach(u)),et.addToList&&ht.forEach(function(pt){p(pt,et)})}}},w=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},C=typeof MutationObserver<"u",T=typeof ResizeObserver<"u";C?(e.removeObserver=new MutationObserver(function(ft){for(var B=0;B<ft.length;B++){var et=ft[B],Z=et.removedNodes;if(Z)for(var ht=0;ht<Z.length;ht++){var ot=Z[ht];if(ot===e.container){e.destroy();break}}}}),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",function(ft){e.destroy()});var k=Sc(function(){e.cy.resize()},100);C&&(e.styleObserver=new MutationObserver(k),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(t,"resize",k),T&&(e.resizeObserver=new ResizeObserver(k),e.resizeObserver.observe(e.container));var S=function(B,et){for(;B!=null;)et(B),B=B.parentNode},L=function(){e.invalidateContainerClientCoordsCache()};S(e.container,function(ft){e.registerBinding(ft,"transitionend",L),e.registerBinding(ft,"animationend",L),e.registerBinding(ft,"scroll",L)}),e.registerBinding(e.container,"contextmenu",function(ft){ft.preventDefault()});var _=function(){return e.selection[4]!==0},A=function(B){for(var et=e.findContainerClientCoords(),Z=et[0],ht=et[1],ot=et[2],pt=et[3],gt=B.touches?B.touches:[B],kt=!1,Ft=0;Ft<gt.length;Ft++){var Ht=gt[Ft];if(Z<=Ht.clientX&&Ht.clientX<=Z+ot&&ht<=Ht.clientY&&Ht.clientY<=ht+pt){kt=!0;break}}if(!kt)return!1;for(var Pt=e.container,Ot=B.target,Gt=Ot.parentNode,Bt=!1;Gt;){if(Gt===Pt){Bt=!0;break}Gt=Gt.parentNode}return!!Bt};e.registerBinding(e.container,"mousedown",function(B){if(A(B)&&!(e.hoverData.which===1&&B.which!==1)){B.preventDefault(),w(),e.hoverData.capture=!0,e.hoverData.which=B.which;var et=e.cy,Z=[B.clientX,B.clientY],ht=e.projectIntoViewport(Z[0],Z[1]),ot=e.selection,pt=e.findNearestElements(ht[0],ht[1],!0,!1),gt=pt[0],kt=e.dragData.possibleDragElements;e.hoverData.mdownPos=ht,e.hoverData.mdownGPos=Z;var Ft=function(){e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var te=e.hoverData.down;te?te.emit({originalEvent:B,type:"taphold",position:{x:ht[0],y:ht[1]}}):et.emit({originalEvent:B,type:"taphold",position:{x:ht[0],y:ht[1]}})}},e.tapholdDuration)};if(B.which==3){e.hoverData.cxtStarted=!0;var Ht={originalEvent:B,type:"cxttapstart",position:{x:ht[0],y:ht[1]}};gt?(gt.activate(),gt.emit(Ht),e.hoverData.down=gt):et.emit(Ht),e.hoverData.downTime=new Date().getTime(),e.hoverData.cxtDragged=!1}else if(B.which==1){gt&&gt.activate();{if(gt!=null&&e.nodeIsGrabbable(gt)){var Pt=function(te){return{originalEvent:B,type:te,position:{x:ht[0],y:ht[1]}}},Ot=function(te){te.emit(Pt("grab"))};if(d(gt),!gt.selected())kt=e.dragData.possibleDragElements=et.collection(),m(gt,{addToList:kt}),gt.emit(Pt("grabon")).emit(Pt("grab"));else{kt=e.dragData.possibleDragElements=et.collection();var Gt=et.$(function(Bt){return Bt.isNode()&&Bt.selected()&&e.nodeIsGrabbable(Bt)});v(Gt,{addToList:kt}),gt.emit(Pt("grabon")),Gt.forEach(Ot)}e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=gt,e.hoverData.downs=pt,e.hoverData.downTime=new Date().getTime()}i(gt,["mousedown","tapstart","vmousedown"],B,{x:ht[0],y:ht[1]}),gt==null?(ot[4]=1,e.data.bgActivePosistion={x:ht[0],y:ht[1]},e.redrawHint("select",!0),e.redraw()):gt.pannable()&&(ot[4]=1),Ft()}ot[0]=ot[2]=ht[0],ot[1]=ot[3]=ht[1]}},!1);var E=a(e.container);e.registerBinding([t,E],"mousemove",function(B){var et=e.hoverData.capture;if(!(!et&&!A(B))){var Z=!1,ht=e.cy,ot=ht.zoom(),pt=[B.clientX,B.clientY],gt=e.projectIntoViewport(pt[0],pt[1]),kt=e.hoverData.mdownPos,Ft=e.hoverData.mdownGPos,Ht=e.selection,Pt=null;!e.hoverData.draggingEles&&!e.hoverData.dragging&&!e.hoverData.selecting&&(Pt=e.findNearestElement(gt[0],gt[1],!0,!1));var Ot=e.hoverData.last,Gt=e.hoverData.down,Bt=[gt[0]-Ht[2],gt[1]-Ht[3]],te=e.dragData.possibleDragElements,ue;if(Ft){var Ce=pt[0]-Ft[0],Wt=Ce*Ce,de=pt[1]-Ft[1],$t=de*de,Jt=Wt+$t;e.hoverData.isOverThresholdDrag=ue=Jt>=e.desktopTapThreshold2}var jt=n(B);ue&&(e.hoverData.tapholdCancelled=!0);var Qt=function(){var nr=e.hoverData.dragDelta=e.hoverData.dragDelta||[];nr.length===0?(nr.push(Bt[0]),nr.push(Bt[1])):(nr[0]+=Bt[0],nr[1]+=Bt[1])};Z=!0,i(Pt,["mousemove","vmousemove","tapdrag"],B,{x:gt[0],y:gt[1]});var Yt=function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||ht.emit({originalEvent:B,type:"boxstart",position:{x:gt[0],y:gt[1]}}),Ht[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()};if(e.hoverData.which===3){if(ue){var fe={originalEvent:B,type:"cxtdrag",position:{x:gt[0],y:gt[1]}};Gt?Gt.emit(fe):ht.emit(fe),e.hoverData.cxtDragged=!0,(!e.hoverData.cxtOver||Pt!==e.hoverData.cxtOver)&&(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit({originalEvent:B,type:"cxtdragout",position:{x:gt[0],y:gt[1]}}),e.hoverData.cxtOver=Pt,Pt&&Pt.emit({originalEvent:B,type:"cxtdragover",position:{x:gt[0],y:gt[1]}}))}}else if(e.hoverData.dragging){if(Z=!0,ht.panningEnabled()&&ht.userPanningEnabled()){var je;if(e.hoverData.justStartedPan){var me=e.hoverData.mdownPos;je={x:(gt[0]-me[0])*ot,y:(gt[1]-me[1])*ot},e.hoverData.justStartedPan=!1}else je={x:Bt[0]*ot,y:Bt[1]*ot};ht.panBy(je),ht.emit("dragpan"),e.hoverData.dragged=!0}gt=e.projectIntoViewport(B.clientX,B.clientY)}else if(Ht[4]==1&&(Gt==null||Gt.pannable())){if(ue){if(!e.hoverData.dragging&&ht.boxSelectionEnabled()&&(jt||!ht.panningEnabled()||!ht.userPanningEnabled()))Yt();else if(!e.hoverData.selecting&&ht.panningEnabled()&&ht.userPanningEnabled()){var We=s(Gt,e.hoverData.downs);We&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,Ht[4]=0,e.data.bgActivePosistion=ws(kt),e.redrawHint("select",!0),e.redraw())}Gt&&Gt.pannable()&&Gt.active()&&Gt.unactivate()}}else{if(Gt&&Gt.pannable()&&Gt.active()&&Gt.unactivate(),(!Gt||!Gt.grabbed())&&Pt!=Ot&&(Ot&&i(Ot,["mouseout","tapdragout"],B,{x:gt[0],y:gt[1]}),Pt&&i(Pt,["mouseover","tapdragover"],B,{x:gt[0],y:gt[1]}),e.hoverData.last=Pt),Gt)if(ue){if(ht.boxSelectionEnabled()&&jt)Gt&&Gt.grabbed()&&(x(te),Gt.emit("freeon"),te.emit("free"),e.dragData.didDrag&&(Gt.emit("dragfreeon"),te.emit("dragfree"))),Yt();else if(Gt&&Gt.grabbed()&&e.nodeIsDraggable(Gt)){var Ve=!e.dragData.didDrag;Ve&&e.redrawHint("eles",!0),e.dragData.didDrag=!0,e.hoverData.draggingEles||v(te,{inDragLayer:!0});var Re={x:0,y:0};if(Vt(Bt[0])&&Vt(Bt[1])&&(Re.x+=Bt[0],Re.y+=Bt[1],Ve)){var Te=e.hoverData.dragDelta;Te&&Vt(Te[0])&&Vt(Te[1])&&(Re.x+=Te[0],Re.y+=Te[1])}e.hoverData.draggingEles=!0,te.silentShift(Re).emit("position drag"),e.redrawHint("drag",!0),e.redraw()}}else Qt();Z=!0}if(Ht[2]=gt[0],Ht[3]=gt[1],Z)return B.stopPropagation&&B.stopPropagation(),B.preventDefault&&B.preventDefault(),!1}},!1);var D,R,O;e.registerBinding(t,"mouseup",function(B){if(!(e.hoverData.which===1&&B.which!==1&&e.hoverData.capture)){var et=e.hoverData.capture;if(et){e.hoverData.capture=!1;var Z=e.cy,ht=e.projectIntoViewport(B.clientX,B.clientY),ot=e.selection,pt=e.findNearestElement(ht[0],ht[1],!0,!1),gt=e.dragData.possibleDragElements,kt=e.hoverData.down,Ft=n(B);if(e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,kt&&kt.unactivate(),e.hoverData.which===3){var Ht={originalEvent:B,type:"cxttapend",position:{x:ht[0],y:ht[1]}};if(kt?kt.emit(Ht):Z.emit(Ht),!e.hoverData.cxtDragged){var Pt={originalEvent:B,type:"cxttap",position:{x:ht[0],y:ht[1]}};kt?kt.emit(Pt):Z.emit(Pt)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(e.hoverData.which===1){if(i(pt,["mouseup","tapend","vmouseup"],B,{x:ht[0],y:ht[1]}),!e.dragData.didDrag&&!e.hoverData.dragged&&!e.hoverData.selecting&&!e.hoverData.isOverThresholdDrag&&(i(kt,["click","tap","vclick"],B,{x:ht[0],y:ht[1]}),R=!1,B.timeStamp-O<=Z.multiClickDebounceTime()?(D&&clearTimeout(D),R=!0,O=null,i(kt,["dblclick","dbltap","vdblclick"],B,{x:ht[0],y:ht[1]})):(D=setTimeout(function(){R||i(kt,["oneclick","onetap","voneclick"],B,{x:ht[0],y:ht[1]})},Z.multiClickDebounceTime()),O=B.timeStamp)),kt==null&&!e.dragData.didDrag&&!e.hoverData.selecting&&!e.hoverData.dragged&&!n(B)&&(Z.$(r).unselect(["tapunselect"]),gt.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=gt=Z.collection()),pt==kt&&!e.dragData.didDrag&&!e.hoverData.selecting&&pt!=null&&pt._private.selectable&&(e.hoverData.dragging||(Z.selectionType()==="additive"||Ft?pt.selected()?pt.unselect(["tapunselect"]):pt.select(["tapselect"]):Ft||(Z.$(r).unmerge(pt).unselect(["tapunselect"]),pt.select(["tapselect"]))),e.redrawHint("eles",!0)),e.hoverData.selecting){var Ot=Z.collection(e.getAllInBox(ot[0],ot[1],ot[2],ot[3]));e.redrawHint("select",!0),Ot.length>0&&e.redrawHint("eles",!0),Z.emit({type:"boxend",originalEvent:B,position:{x:ht[0],y:ht[1]}});var Gt=function(ue){return ue.selectable()&&!ue.selected()};Z.selectionType()==="additive"||Ft||Z.$(r).unmerge(Ot).unselect(),Ot.emit("box").stdFilter(Gt).select().emit("boxselect"),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!ot[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var Bt=kt&&kt.grabbed();x(gt),Bt&&(kt.emit("freeon"),gt.emit("free"),e.dragData.didDrag&&(kt.emit("dragfreeon"),gt.emit("dragfree")))}}ot[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null,e.hoverData.which=null}}},!1);var P=[],$=4,M,I=1e5,F=function(B,et){for(var Z=0;Z<B.length;Z++)if(B[Z]%et!==0)return!1;return!0},V=function(B){for(var et=Math.abs(B[0]),Z=1;Z<B.length;Z++)if(Math.abs(B[Z])!==et)return!1;return!0},N=function(B){var et=!1,Z=B.deltaY;if(Z==null&&(B.wheelDeltaY!=null?Z=B.wheelDeltaY/4:B.wheelDelta!=null&&(Z=B.wheelDelta/4)),M==null)if(P.length>=$){var ht=P;if(M=F(ht,5),!M){var ot=Math.abs(ht[0]);M=V(ht)&&ot>5}if(M)for(var pt=0;pt<ht.length;pt++)I=Math.min(Math.abs(ht[pt]),I)}else P.push(Z),et=!0;else M&&(I=Math.min(Math.abs(Z),I));if(!e.scrollingPage){var gt=e.cy,kt=gt.zoom(),Ft=gt.pan(),Ht=e.projectIntoViewport(B.clientX,B.clientY),Pt=[Ht[0]*kt+Ft.x,Ht[1]*kt+Ft.y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||_()){B.preventDefault();return}if(gt.panningEnabled()&&gt.userPanningEnabled()&&gt.zoomingEnabled()&&gt.userZoomingEnabled()){B.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()},150);var Ot;et&&Math.abs(Z)>5&&(Z=y1(Z)*5),Ot=Z/-250,M&&(Ot/=I,Ot*=3),Ot=Ot*e.wheelSensitivity;var Gt=B.deltaMode===1;Gt&&(Ot*=33);var Bt=gt.zoom()*Math.pow(10,Ot);B.type==="gesturechange"&&(Bt=e.gestureStartZoom*B.scale),gt.zoom({level:Bt,renderedPosition:{x:Pt[0],y:Pt[1]}}),gt.emit(B.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};e.registerBinding(e.container,"wheel",N,!0),e.registerBinding(t,"scroll",function(B){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},!0),e.registerBinding(e.container,"gesturestart",function(B){e.gestureStartZoom=e.cy.zoom(),e.hasTouchStarted||B.preventDefault()},!0),e.registerBinding(e.container,"gesturechange",function(ft){e.hasTouchStarted||N(ft)},!0),e.registerBinding(e.container,"mouseout",function(B){var et=e.projectIntoViewport(B.clientX,B.clientY);e.cy.emit({originalEvent:B,type:"mouseout",position:{x:et[0],y:et[1]}})},!1),e.registerBinding(e.container,"mouseover",function(B){var et=e.projectIntoViewport(B.clientX,B.clientY);e.cy.emit({originalEvent:B,type:"mouseover",position:{x:et[0],y:et[1]}})},!1);var q,U,X,lt,J,ct,yt,ut,Q,K,j,Y,st,W=function(B,et,Z,ht){return Math.sqrt((Z-B)*(Z-B)+(ht-et)*(ht-et))},bt=function(B,et,Z,ht){return(Z-B)*(Z-B)+(ht-et)*(ht-et)},tt;e.registerBinding(e.container,"touchstart",tt=function(B){if(e.hasTouchStarted=!0,!!A(B)){w(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var et=e.cy,Z=e.touchData.now,ht=e.touchData.earlier;if(B.touches[0]){var ot=e.projectIntoViewport(B.touches[0].clientX,B.touches[0].clientY);Z[0]=ot[0],Z[1]=ot[1]}if(B.touches[1]){var ot=e.projectIntoViewport(B.touches[1].clientX,B.touches[1].clientY);Z[2]=ot[0],Z[3]=ot[1]}if(B.touches[2]){var ot=e.projectIntoViewport(B.touches[2].clientX,B.touches[2].clientY);Z[4]=ot[0],Z[5]=ot[1]}if(B.touches[1]){e.touchData.singleTouchMoved=!0,x(e.dragData.touchDragEles);var pt=e.findContainerClientCoords();Q=pt[0],K=pt[1],j=pt[2],Y=pt[3],q=B.touches[0].clientX-Q,U=B.touches[0].clientY-K,X=B.touches[1].clientX-Q,lt=B.touches[1].clientY-K,st=0<=q&&q<=j&&0<=X&&X<=j&&0<=U&&U<=Y&&0<=lt&&lt<=Y;var gt=et.pan(),kt=et.zoom();J=W(q,U,X,lt),ct=bt(q,U,X,lt),yt=[(q+X)/2,(U+lt)/2],ut=[(yt[0]-gt.x)/kt,(yt[1]-gt.y)/kt];var Ft=200,Ht=Ft*Ft;if(ct<Ht&&!B.touches[2]){var Pt=e.findNearestElement(Z[0],Z[1],!0,!0),Ot=e.findNearestElement(Z[2],Z[3],!0,!0);Pt&&Pt.isNode()?(Pt.activate().emit({originalEvent:B,type:"cxttapstart",position:{x:Z[0],y:Z[1]}}),e.touchData.start=Pt):Ot&&Ot.isNode()?(Ot.activate().emit({originalEvent:B,type:"cxttapstart",position:{x:Z[0],y:Z[1]}}),e.touchData.start=Ot):et.emit({originalEvent:B,type:"cxttapstart",position:{x:Z[0],y:Z[1]}}),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,e.redraw();return}}if(B.touches[2])et.boxSelectionEnabled()&&B.preventDefault();else if(!B.touches[1]){if(B.touches[0]){var Gt=e.findNearestElements(Z[0],Z[1],!0,!0),Bt=Gt[0];if(Bt!=null&&(Bt.activate(),e.touchData.start=Bt,e.touchData.starts=Gt,e.nodeIsGrabbable(Bt))){var te=e.dragData.touchDragEles=et.collection(),ue=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),Bt.selected()?(ue=et.$(function(Jt){return Jt.selected()&&e.nodeIsGrabbable(Jt)}),v(ue,{addToList:te})):m(Bt,{addToList:te}),d(Bt);var Ce=function(jt){return{originalEvent:B,type:jt,position:{x:Z[0],y:Z[1]}}};Bt.emit(Ce("grabon")),ue?ue.forEach(function(Jt){Jt.emit(Ce("grab"))}):Bt.emit(Ce("grab"))}i(Bt,["touchstart","tapstart","vmousedown"],B,{x:Z[0],y:Z[1]}),Bt==null&&(e.data.bgActivePosistion={x:ot[0],y:ot[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){e.touchData.singleTouchMoved===!1&&!e.pinching&&!e.touchData.selecting&&i(e.touchData.start,["taphold"],B,{x:Z[0],y:Z[1]})},e.tapholdDuration)}}if(B.touches.length>=1){for(var Wt=e.touchData.startPosition=[null,null,null,null,null,null],de=0;de<Z.length;de++)Wt[de]=ht[de]=Z[de];var $t=B.touches[0];e.touchData.startGPosition=[$t.clientX,$t.clientY]}}},!1);var H;e.registerBinding(t,"touchmove",H=function(B){var et=e.touchData.capture;if(!(!et&&!A(B))){var Z=e.selection,ht=e.cy,ot=e.touchData.now,pt=e.touchData.earlier,gt=ht.zoom();if(B.touches[0]){var kt=e.projectIntoViewport(B.touches[0].clientX,B.touches[0].clientY);ot[0]=kt[0],ot[1]=kt[1]}if(B.touches[1]){var kt=e.projectIntoViewport(B.touches[1].clientX,B.touches[1].clientY);ot[2]=kt[0],ot[3]=kt[1]}if(B.touches[2]){var kt=e.projectIntoViewport(B.touches[2].clientX,B.touches[2].clientY);ot[4]=kt[0],ot[5]=kt[1]}var Ft=e.touchData.startGPosition,Ht;if(et&&B.touches[0]&&Ft){for(var Pt=[],Ot=0;Ot<ot.length;Ot++)Pt[Ot]=ot[Ot]-pt[Ot];var Gt=B.touches[0].clientX-Ft[0],Bt=Gt*Gt,te=B.touches[0].clientY-Ft[1],ue=te*te,Ce=Bt+ue;Ht=Ce>=e.touchTapThreshold2}if(et&&e.touchData.cxt){B.preventDefault();var Wt=B.touches[0].clientX-Q,de=B.touches[0].clientY-K,$t=B.touches[1].clientX-Q,Jt=B.touches[1].clientY-K,jt=bt(Wt,de,$t,Jt),Qt=jt/ct,Yt=150,fe=Yt*Yt,je=1.5,me=je*je;if(Qt>=me||jt>=fe){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var We={originalEvent:B,type:"cxttapend",position:{x:ot[0],y:ot[1]}};e.touchData.start?(e.touchData.start.unactivate().emit(We),e.touchData.start=null):ht.emit(We)}}if(et&&e.touchData.cxt){var We={originalEvent:B,type:"cxtdrag",position:{x:ot[0],y:ot[1]}};e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(We):ht.emit(We),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var Ve=e.findNearestElement(ot[0],ot[1],!0,!0);(!e.touchData.cxtOver||Ve!==e.touchData.cxtOver)&&(e.touchData.cxtOver&&e.touchData.cxtOver.emit({originalEvent:B,type:"cxtdragout",position:{x:ot[0],y:ot[1]}}),e.touchData.cxtOver=Ve,Ve&&Ve.emit({originalEvent:B,type:"cxtdragover",position:{x:ot[0],y:ot[1]}}))}else if(et&&B.touches[2]&&ht.boxSelectionEnabled())B.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||ht.emit({originalEvent:B,type:"boxstart",position:{x:ot[0],y:ot[1]}}),e.touchData.selecting=!0,e.touchData.didSelect=!0,Z[4]=1,!Z||Z.length===0||Z[0]===void 0?(Z[0]=(ot[0]+ot[2]+ot[4])/3,Z[1]=(ot[1]+ot[3]+ot[5])/3,Z[2]=(ot[0]+ot[2]+ot[4])/3+1,Z[3]=(ot[1]+ot[3]+ot[5])/3+1):(Z[2]=(ot[0]+ot[2]+ot[4])/3,Z[3]=(ot[1]+ot[3]+ot[5])/3),e.redrawHint("select",!0),e.redraw();else if(et&&B.touches[1]&&!e.touchData.didSelect&&ht.zoomingEnabled()&&ht.panningEnabled()&&ht.userZoomingEnabled()&&ht.userPanningEnabled()){B.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var Re=e.dragData.touchDragEles;if(Re){e.redrawHint("drag",!0);for(var Te=0;Te<Re.length;Te++){var ra=Re[Te]._private;ra.grabbed=!1,ra.rscratch.inDragLayer=!1}}var nr=e.touchData.start,Wt=B.touches[0].clientX-Q,de=B.touches[0].clientY-K,$t=B.touches[1].clientX-Q,Jt=B.touches[1].clientY-K,ba=W(Wt,de,$t,Jt),Na=ba/J;if(st){var Ma=Wt-q,Fa=de-U,Mi=$t-X,Rc=Jt-lt,wa=(Ma+Mi)/2,rl=(Fa+Rc)/2,gn=ht.zoom(),Fi=gn*Na,pa=ht.pan(),re=ut[0]*gn+pa.x,he=ut[1]*gn+pa.y,ye={x:-Fi/gn*(re-pa.x-wa)+re,y:-Fi/gn*(he-pa.y-rl)+he};if(nr&&nr.active()){var Re=e.dragData.touchDragEles;x(Re),e.redrawHint("drag",!0),e.redrawHint("eles",!0),nr.unactivate().emit("freeon"),Re.emit("free"),e.dragData.didDrag&&(nr.emit("dragfreeon"),Re.emit("dragfree"))}ht.viewport({zoom:Fi,pan:ye,cancelOnFailedZoom:!0}),ht.emit("pinchzoom"),J=ba,q=Wt,U=de,X=$t,lt=Jt,e.pinching=!0}if(B.touches[0]){var kt=e.projectIntoViewport(B.touches[0].clientX,B.touches[0].clientY);ot[0]=kt[0],ot[1]=kt[1]}if(B.touches[1]){var kt=e.projectIntoViewport(B.touches[1].clientX,B.touches[1].clientY);ot[2]=kt[0],ot[3]=kt[1]}if(B.touches[2]){var kt=e.projectIntoViewport(B.touches[2].clientX,B.touches[2].clientY);ot[4]=kt[0],ot[5]=kt[1]}}else if(B.touches[0]&&!e.touchData.didSelect){var Nt=e.touchData.start,Ne=e.touchData.last,Ve;if(!e.hoverData.draggingEles&&!e.swipePanning&&(Ve=e.findNearestElement(ot[0],ot[1],!0,!0)),et&&Nt!=null&&B.preventDefault(),et&&Nt!=null&&e.nodeIsDraggable(Nt))if(Ht){var Re=e.dragData.touchDragEles,rt=!e.dragData.didDrag;rt&&v(Re,{inDragLayer:!0}),e.dragData.didDrag=!0;var Oa={x:0,y:0};if(Vt(Pt[0])&&Vt(Pt[1])&&(Oa.x+=Pt[0],Oa.y+=Pt[1],rt)){e.redrawHint("eles",!0);var it=e.touchData.dragDelta;it&&Vt(it[0])&&Vt(it[1])&&(Oa.x+=it[0],Oa.y+=it[1])}e.hoverData.draggingEles=!0,Re.silentShift(Oa).emit("position drag"),e.redrawHint("drag",!0),e.touchData.startPosition[0]==pt[0]&&e.touchData.startPosition[1]==pt[1]&&e.redrawHint("eles",!0),e.redraw()}else{var it=e.touchData.dragDelta=e.touchData.dragDelta||[];it.length===0?(it.push(Pt[0]),it.push(Pt[1])):(it[0]+=Pt[0],it[1]+=Pt[1])}if(i(Nt||Ve,["touchmove","tapdrag","vmousemove"],B,{x:ot[0],y:ot[1]}),(!Nt||!Nt.grabbed())&&Ve!=Ne&&(Ne&&Ne.emit({originalEvent:B,type:"tapdragout",position:{x:ot[0],y:ot[1]}}),Ve&&Ve.emit({originalEvent:B,type:"tapdragover",position:{x:ot[0],y:ot[1]}})),e.touchData.last=Ve,et)for(var Te=0;Te<ot.length;Te++)ot[Te]&&e.touchData.startPosition[Te]&&Ht&&(e.touchData.singleTouchMoved=!0);if(et&&(Nt==null||Nt.pannable())&&ht.panningEnabled()&&ht.userPanningEnabled()){var Je=s(Nt,e.touchData.starts);Je&&(B.preventDefault(),e.data.bgActivePosistion||(e.data.bgActivePosistion=ws(e.touchData.startPosition)),e.swipePanning?(ht.panBy({x:Pt[0]*gt,y:Pt[1]*gt}),ht.emit("dragpan")):Ht&&(e.swipePanning=!0,ht.panBy({x:Gt*gt,y:te*gt}),ht.emit("dragpan"),Nt&&(Nt.unactivate(),e.redrawHint("select",!0),e.touchData.start=null)));var kt=e.projectIntoViewport(B.touches[0].clientX,B.touches[0].clientY);ot[0]=kt[0],ot[1]=kt[1]}}for(var Ot=0;Ot<ot.length;Ot++)pt[Ot]=ot[Ot];et&&B.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&e.data.bgActivePosistion!=null&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}},!1);var Et;e.registerBinding(t,"touchcancel",Et=function(B){var et=e.touchData.start;e.touchData.capture=!1,et&&et.unactivate()});var nt,Lt,Dt,At;if(e.registerBinding(t,"touchend",nt=function(B){var et=e.touchData.start,Z=e.touchData.capture;if(Z)B.touches.length===0&&(e.touchData.capture=!1),B.preventDefault();else return;var ht=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var ot=e.cy,pt=ot.zoom(),gt=e.touchData.now,kt=e.touchData.earlier;if(B.touches[0]){var Ft=e.projectIntoViewport(B.touches[0].clientX,B.touches[0].clientY);gt[0]=Ft[0],gt[1]=Ft[1]}if(B.touches[1]){var Ft=e.projectIntoViewport(B.touches[1].clientX,B.touches[1].clientY);gt[2]=Ft[0],gt[3]=Ft[1]}if(B.touches[2]){var Ft=e.projectIntoViewport(B.touches[2].clientX,B.touches[2].clientY);gt[4]=Ft[0],gt[5]=Ft[1]}et&&et.unactivate();var Ht;if(e.touchData.cxt){if(Ht={originalEvent:B,type:"cxttapend",position:{x:gt[0],y:gt[1]}},et?et.emit(Ht):ot.emit(Ht),!e.touchData.cxtDragged){var Pt={originalEvent:B,type:"cxttap",position:{x:gt[0],y:gt[1]}};et?et.emit(Pt):ot.emit(Pt)}e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,e.redraw();return}if(!B.touches[2]&&ot.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var Ot=ot.collection(e.getAllInBox(ht[0],ht[1],ht[2],ht[3]));ht[0]=void 0,ht[1]=void 0,ht[2]=void 0,ht[3]=void 0,ht[4]=0,e.redrawHint("select",!0),ot.emit({type:"boxend",originalEvent:B,position:{x:gt[0],y:gt[1]}});var Gt=function(fe){return fe.selectable()&&!fe.selected()};Ot.emit("box").stdFilter(Gt).select().emit("boxselect"),Ot.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(et!=null&&et.unactivate(),B.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(!B.touches[1]){if(!B.touches[0]){if(!B.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var Bt=e.dragData.touchDragEles;if(et!=null){var te=et._private.grabbed;x(Bt),e.redrawHint("drag",!0),e.redrawHint("eles",!0),te&&(et.emit("freeon"),Bt.emit("free"),e.dragData.didDrag&&(et.emit("dragfreeon"),Bt.emit("dragfree"))),i(et,["touchend","tapend","vmouseup","tapdragout"],B,{x:gt[0],y:gt[1]}),et.unactivate(),e.touchData.start=null}else{var ue=e.findNearestElement(gt[0],gt[1],!0,!0);i(ue,["touchend","tapend","vmouseup","tapdragout"],B,{x:gt[0],y:gt[1]})}var Ce=e.touchData.startPosition[0]-gt[0],Wt=Ce*Ce,de=e.touchData.startPosition[1]-gt[1],$t=de*de,Jt=Wt+$t,jt=Jt*pt*pt;e.touchData.singleTouchMoved||(et||ot.$(":selected").unselect(["tapunselect"]),i(et,["tap","vclick"],B,{x:gt[0],y:gt[1]}),Lt=!1,B.timeStamp-At<=ot.multiClickDebounceTime()?(Dt&&clearTimeout(Dt),Lt=!0,At=null,i(et,["dbltap","vdblclick"],B,{x:gt[0],y:gt[1]})):(Dt=setTimeout(function(){Lt||i(et,["onetap","voneclick"],B,{x:gt[0],y:gt[1]})},ot.multiClickDebounceTime()),At=B.timeStamp)),et!=null&&!e.dragData.didDrag&&et._private.selectable&&jt<e.touchTapThreshold2&&!e.pinching&&(ot.selectionType()==="single"?(ot.$(r).unmerge(et).unselect(["tapunselect"]),et.select(["tapselect"])):et.selected()?et.unselect(["tapunselect"]):et.select(["tapselect"]),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved=!0}}}for(var Qt=0;Qt<gt.length;Qt++)kt[Qt]=gt[Qt];e.dragData.didDrag=!1,B.touches.length===0&&(e.touchData.dragDelta=[],e.touchData.startPosition=[null,null,null,null,null,null],e.touchData.startGPosition=null,e.touchData.didSelect=!1),B.touches.length<2&&(B.touches.length===1&&(e.touchData.startGPosition=[B.touches[0].clientX,B.touches[0].clientY]),e.pinching=!1,e.redrawHint("eles",!0),e.redraw())},!1),typeof TouchEvent>"u"){var xt=[],_t=function(B){return{clientX:B.clientX,clientY:B.clientY,force:1,identifier:B.pointerId,pageX:B.pageX,pageY:B.pageY,radiusX:B.width/2,radiusY:B.height/2,screenX:B.screenX,screenY:B.screenY,target:B.target}},vt=function(B){return{event:B,touch:_t(B)}},wt=function(B){xt.push(vt(B))},St=function(B){for(var et=0;et<xt.length;et++){var Z=xt[et];if(Z.event.pointerId===B.pointerId){xt.splice(et,1);return}}},at=function(B){var et=xt.filter(function(Z){return Z.event.pointerId===B.pointerId})[0];et.event=B,et.touch=_t(B)},Ct=function(B){B.touches=xt.map(function(et){return et.touch})},z=function(B){return B.pointerType==="mouse"||B.pointerType===4};e.registerBinding(e.container,"pointerdown",function(ft){z(ft)||(ft.preventDefault(),wt(ft),Ct(ft),tt(ft))}),e.registerBinding(e.container,"pointerup",function(ft){z(ft)||(St(ft),Ct(ft),nt(ft))}),e.registerBinding(e.container,"pointercancel",function(ft){z(ft)||(St(ft),Ct(ft),Et(ft))}),e.registerBinding(e.container,"pointermove",function(ft){z(ft)||(ft.preventDefault(),at(ft),Ct(ft),H(ft))})}};var Pi={};Pi.generatePolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function(a,i,n,s,o,l){this.renderer.nodeShapeImpl("polygon",a,i,n,s,o,this.points)},intersectLine:function(a,i,n,s,o,l,u,h){return ec(o,l,this.points,a,i,n/2,s/2,u)},checkPoint:function(a,i,n,s,o,l,u,h){return Di(a,i,this.points,l,u,s,o,[0,-1],n)}}};Pi.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(t,r,a,i,n,s){this.renderer.nodeShapeImpl(this.name,t,r,a,i,n)},intersectLine:function(t,r,a,i,n,s,o,l){return WF(n,s,t,r,a/2+o,i/2+o)},checkPoint:function(t,r,a,i,n,s,o,l){return Mn(t,r,i,n,s,o,a)}}};Pi.generateRoundPolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,getOrCreateCorners:function(a,i,n,s,o,l,u){if(l[u]!==void 0&&l[u+"-cx"]===a&&l[u+"-cy"]===i)return l[u];l[u]=new Array(t.length/2),l[u+"-cx"]=a,l[u+"-cy"]=i;var h=n/2,d=s/2;o=o==="auto"?NT(n,s):o;for(var f=new Array(t.length/2),p=0;p<t.length/2;p++)f[p]={x:a+h*t[p*2],y:i+d*t[p*2+1]};var y,v,m,x,b=f.length;for(v=f[b-1],y=0;y<b;y++)m=f[y%b],x=f[(y+1)%b],l[u][y]=L1(v,m,x,o),v=m,m=x;return l[u]},draw:function(a,i,n,s,o,l,u){this.renderer.nodeShapeImpl("round-polygon",a,i,n,s,o,this.points,this.getOrCreateCorners(i,n,s,o,l,u,"drawCorners"))},intersectLine:function(a,i,n,s,o,l,u,h,d){return GF(o,l,this.points,a,i,n,s,u,this.getOrCreateCorners(a,i,n,s,h,d,"corners"))},checkPoint:function(a,i,n,s,o,l,u,h,d){return qF(a,i,this.points,l,u,s,o,this.getOrCreateCorners(l,u,s,o,h,d,"corners"))}}};Pi.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Xr(4,0),draw:function(t,r,a,i,n,s){this.renderer.nodeShapeImpl(this.name,t,r,a,i,n,this.points,s)},intersectLine:function(t,r,a,i,n,s,o,l){return IT(n,s,t,r,a,i,o,l)},checkPoint:function(t,r,a,i,n,s,o,l){var u=i/2,h=n/2;l=l==="auto"?en(i,n):l,l=Math.min(u,h,l);var d=l*2;return!!(Di(t,r,this.points,s,o,i,n-d,[0,-1],a)||Di(t,r,this.points,s,o,i-d,n,[0,-1],a)||Mn(t,r,d,d,s-u+l,o-h+l,a)||Mn(t,r,d,d,s+u-l,o-h+l,a)||Mn(t,r,d,d,s+u-l,o+h-l,a)||Mn(t,r,d,d,s-u+l,o+h-l,a))}}};Pi.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:m1(),points:Xr(4,0),draw:function(t,r,a,i,n,s){this.renderer.nodeShapeImpl(this.name,t,r,a,i,n,null,s)},generateCutTrianglePts:function(t,r,a,i,n){var s=n==="auto"?this.cornerLength:n,o=r/2,l=t/2,u=a-l,h=a+l,d=i-o,f=i+o;return{topLeft:[u,d+s,u+s,d,u+s,d+s],topRight:[h-s,d,h,d+s,h-s,d+s],bottomRight:[h,f-s,h-s,f,h-s,f-s],bottomLeft:[u+s,f,u,f-s,u+s,f-s]}},intersectLine:function(t,r,a,i,n,s,o,l){var u=this.generateCutTrianglePts(a+2*o,i+2*o,t,r,l),h=[].concat.apply([],[u.topLeft.splice(0,4),u.topRight.splice(0,4),u.bottomRight.splice(0,4),u.bottomLeft.splice(0,4)]);return ec(n,s,h,t,r)},checkPoint:function(t,r,a,i,n,s,o,l){var u=l==="auto"?this.cornerLength:l;if(Di(t,r,this.points,s,o,i,n-2*u,[0,-1],a)||Di(t,r,this.points,s,o,i-2*u,n,[0,-1],a))return!0;var h=this.generateCutTrianglePts(i,n,s,o);return sa(t,r,h.topLeft)||sa(t,r,h.topRight)||sa(t,r,h.bottomRight)||sa(t,r,h.bottomLeft)}}};Pi.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Xr(4,0),draw:function(t,r,a,i,n,s){this.renderer.nodeShapeImpl(this.name,t,r,a,i,n)},intersectLine:function(t,r,a,i,n,s,o,l){var u=.15,h=.5,d=.85,f=this.generateBarrelBezierPts(a+2*o,i+2*o,t,r),p=function(m){var x=As({x:m[0],y:m[1]},{x:m[2],y:m[3]},{x:m[4],y:m[5]},u),b=As({x:m[0],y:m[1]},{x:m[2],y:m[3]},{x:m[4],y:m[5]},h),w=As({x:m[0],y:m[1]},{x:m[2],y:m[3]},{x:m[4],y:m[5]},d);return[m[0],m[1],x.x,x.y,b.x,b.y,w.x,w.y,m[4],m[5]]},y=[].concat(p(f.topLeft),p(f.topRight),p(f.bottomRight),p(f.bottomLeft));return ec(n,s,y,t,r)},generateBarrelBezierPts:function(t,r,a,i){var n=r/2,s=t/2,o=a-s,l=a+s,u=i-n,h=i+n,d=vg(t,r),f=d.heightOffset,p=d.widthOffset,y=d.ctrlPtOffsetPct*t,v={topLeft:[o,u+f,o+y,u,o+p,u],topRight:[l-p,u,l-y,u,l,u+f],bottomRight:[l,h-f,l-y,h,l-p,h],bottomLeft:[o+p,h,o+y,h,o,h-f]};return v.topLeft.isTop=!0,v.topRight.isTop=!0,v.bottomLeft.isBottom=!0,v.bottomRight.isBottom=!0,v},checkPoint:function(t,r,a,i,n,s,o,l){var u=vg(i,n),h=u.heightOffset,d=u.widthOffset;if(Di(t,r,this.points,s,o,i,n-2*h,[0,-1],a)||Di(t,r,this.points,s,o,i-2*d,n,[0,-1],a))return!0;for(var f=this.generateBarrelBezierPts(i,n,s,o),p=function(L,_,A){var E=A[4],D=A[2],R=A[0],O=A[5],P=A[1],$=Math.min(E,R),M=Math.max(E,R),I=Math.min(O,P),F=Math.max(O,P);if($<=L&&L<=M&&I<=_&&_<=F){var V=HF(E,D,R),N=OF(V[0],V[1],V[2],L),q=N.filter(function(U){return 0<=U&&U<=1});if(q.length>0)return q[0]}return null},y=Object.keys(f),v=0;v<y.length;v++){var m=y[v],x=f[m],b=p(t,r,x);if(b!=null){var w=x[5],C=x[3],T=x[1],k=Tr(w,C,T,b);if(x.isTop&&k<=r||x.isBottom&&r<=k)return!0}}return!1}}};Pi.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Xr(4,0),draw:function(t,r,a,i,n,s){this.renderer.nodeShapeImpl(this.name,t,r,a,i,n,this.points,s)},intersectLine:function(t,r,a,i,n,s,o,l){var u=t-(a/2+o),h=r-(i/2+o),d=h,f=t+(a/2+o),p=Yi(n,s,t,r,u,h,f,d,!1);return p.length>0?p:IT(n,s,t,r,a,i,o,l)},checkPoint:function(t,r,a,i,n,s,o,l){l=l==="auto"?en(i,n):l;var u=2*l;if(Di(t,r,this.points,s,o,i,n-u,[0,-1],a)||Di(t,r,this.points,s,o,i-u,n,[0,-1],a))return!0;var h=i/2+2*a,d=n/2+2*a,f=[s-h,o-d,s-h,o,s+h,o,s+h,o-d];return!!(sa(t,r,f)||Mn(t,r,u,u,s+i/2-l,o+n/2-l,a)||Mn(t,r,u,u,s-i/2+l,o+n/2-l,a))}}};Pi.registerNodeShapes=function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",Xr(3,0)),this.generateRoundPolygon("round-triangle",Xr(3,0)),this.generatePolygon("rectangle",Xr(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",Xr(5,0)),this.generateRoundPolygon("round-pentagon",Xr(5,0)),this.generatePolygon("hexagon",Xr(6,0)),this.generateRoundPolygon("round-hexagon",Xr(6,0)),this.generatePolygon("heptagon",Xr(7,0)),this.generateRoundPolygon("round-heptagon",Xr(7,0)),this.generatePolygon("octagon",Xr(8,0)),this.generateRoundPolygon("round-octagon",Xr(8,0));var a=new Array(20);{var i=yg(5,0),n=yg(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var o=0;o<n.length/2;o++)n[o*2]*=s,n[o*2+1]*=s;for(var o=0;o<20/4;o++)a[o*4]=i[o*2],a[o*4+1]=i[o*2+1],a[o*4+2]=n[o*2],a[o*4+3]=n[o*2+1]}a=PT(a),this.generatePolygon("star",a),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l)}e.makePolygon=function(u){var h=u.join("$"),d="polygon-"+h,f;return(f=this[d])?f:t.generatePolygon(d,u)}};var Dc={};Dc.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};Dc.redraw=function(e){e=e||DT();var t=this;t.averageRedrawTime===void 0&&(t.averageRedrawTime=0),t.lastRedrawTime===void 0&&(t.lastRedrawTime=0),t.lastDrawTime===void 0&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e};Dc.beforeRender=function(e,t){if(!this.destroyed){t==null&&Qe("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:e,priority:t}),r.sort(function(a,i){return i.priority-a.priority})}};var v2=function(t,r,a){for(var i=t.beforeRenderCallbacks,n=0;n<i.length;n++)i[n].fn(r,a)};Dc.startRenderLoop=function(){var e=this,t=e.cy;if(!e.renderLoopStarted){e.renderLoopStarted=!0;var r=function(i){if(!e.destroyed){if(!t.batching())if(e.requestedFrame&&!e.skipFrame){v2(e,!0,i);var n=Li();e.render(e.renderOptions);var s=e.lastDrawTime=Li();e.averageRedrawTime===void 0&&(e.averageRedrawTime=s-n),e.redrawCount===void 0&&(e.redrawCount=0),e.redrawCount++,e.redrawTotalTime===void 0&&(e.redrawTotalTime=0);var o=s-n;e.redrawTotalTime+=o,e.lastRedrawTime=o,e.averageRedrawTime=e.averageRedrawTime/2+o/2,e.requestedFrame=!1}else v2(e,!1,i);e.skipFrame=!1,ch(r)}};ch(r)}};var lz=function(t){this.init(t)},PC=lz,el=PC.prototype;el.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];el.init=function(e){var t=this;t.options=e,t.cy=e.cy;var r=t.container=e.cy.container(),a=t.cy.window();if(a){var i=a.document,n=i.head,s="__________cytoscape_stylesheet",o="__________cytoscape_container",l=i.getElementById(s)!=null;if(r.className.indexOf(o)<0&&(r.className=(r.className||"")+" "+o),!l){var u=i.createElement("style");u.id=s,u.textContent="."+o+" { position: relative; }",n.insertBefore(u,n.children[0])}var h=a.getComputedStyle(r),d=h.getPropertyValue("position");d==="static"&&Pe("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.webgl=e.webgl,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=Vt(e.pixelRatio)?e.pixelRatio:null,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()};el.notify=function(e,t){var r=this,a=r.cy;if(!this.destroyed){if(e==="init"){r.load();return}if(e==="destroy"){r.destroy();return}(e==="add"||e==="remove"||e==="move"&&a.hasCompoundNodes()||e==="load"||e==="zorder"||e==="mount")&&r.invalidateCachedZSortedEles(),e==="viewport"&&r.redrawHint("select",!0),e==="gc"&&r.redrawHint("gc",!0),(e==="load"||e==="resize"||e==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};el.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var r=e.bindings[t],a=r,i=a.target;(i.off||i.removeEventListener).apply(i,a.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.resizeObserver&&e.resizeObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch{}};el.isHeadless=function(){return!1};[A1,RC,IC,tl,Pi,Dc].forEach(function(e){pe(el,e)});var ip=1e3/60,NC={setupDequeueing:function(t){return function(){var a=this,i=this.renderer;if(!a.dequeueingSetup){a.dequeueingSetup=!0;var n=Sc(function(){i.redrawHint("eles",!0),i.redrawHint("drag",!0),i.redraw()},t.deqRedrawThreshold),s=function(u,h){var d=Li(),f=i.averageRedrawTime,p=i.lastRedrawTime,y=[],v=i.cy.extent(),m=i.getPixelRatio();for(u||i.flushRenderedStyleQueue();;){var x=Li(),b=x-d,w=x-h;if(p<ip){var C=ip-(u?f:0);if(w>=t.deqFastCost*C)break}else if(u){if(b>=t.deqCost*p||b>=t.deqAvgCost*f)break}else if(w>=t.deqNoDrawCost*ip)break;var T=t.deq(a,m,v);if(T.length>0)for(var k=0;k<T.length;k++)y.push(T[k]);else break}y.length>0&&(t.onDeqd(a,y),!u&&t.shouldRedraw(a,y,m,v)&&n())},o=t.priority||f1;i.beforeRender(s,o(a))}}}},cz=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:uh;un(this,e),this.idsByKey=new Si,this.keyForId=new Si,this.cachesByLvl=new Si,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=r}return hn(e,[{key:"getIdsFor",value:function(r){r==null&&Qe("Can not get id list for null key");var a=this.idsByKey,i=this.idsByKey.get(r);return i||(i=new jo,a.set(r,i)),i}},{key:"addIdForKey",value:function(r,a){r!=null&&this.getIdsFor(r).add(a)}},{key:"deleteIdForKey",value:function(r,a){r!=null&&this.getIdsFor(r).delete(a)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var a=r.id(),i=this.keyForId.get(a),n=this.getKey(r);this.deleteIdForKey(i,a),this.addIdForKey(n,a),this.keyForId.set(a,n)}},{key:"deleteKeyMappingFor",value:function(r){var a=r.id(),i=this.keyForId.get(a);this.deleteIdForKey(i,a),this.keyForId.delete(a)}},{key:"keyHasChangedFor",value:function(r){var a=r.id(),i=this.keyForId.get(a),n=this.getKey(r);return i!==n}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var a=this.cachesByLvl,i=this.lvls,n=a.get(r);return n||(n=new Si,a.set(r,n),i.push(r)),n}},{key:"getCache",value:function(r,a){return this.getCachesAt(a).get(r)}},{key:"get",value:function(r,a){var i=this.getKey(r),n=this.getCache(i,a);return n!=null&&this.updateKeyMappingFor(r),n}},{key:"getForCachedKey",value:function(r,a){var i=this.keyForId.get(r.id()),n=this.getCache(i,a);return n}},{key:"hasCache",value:function(r,a){return this.getCachesAt(a).has(r)}},{key:"has",value:function(r,a){var i=this.getKey(r);return this.hasCache(i,a)}},{key:"setCache",value:function(r,a,i){i.key=r,this.getCachesAt(a).set(r,i)}},{key:"set",value:function(r,a,i){var n=this.getKey(r);this.setCache(n,a,i),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,a){this.getCachesAt(a).delete(r)}},{key:"delete",value:function(r,a){var i=this.getKey(r);this.deleteCache(i,a)}},{key:"invalidateKey",value:function(r){var a=this;this.lvls.forEach(function(i){return a.deleteCache(r,i)})}},{key:"invalidate",value:function(r){var a=r.id(),i=this.keyForId.get(a);this.deleteKeyMappingFor(r);var n=this.doesEleInvalidateKey(r);return n&&this.invalidateKey(i),n||this.getNumberOfIdsForKey(i)===0}}])}(),m2=25,tu=50,Lu=-4,Dg=3,MC=7.99,uz=8,hz=1024,dz=1024,fz=1024,pz=.2,gz=.8,yz=10,vz=.15,mz=.1,xz=.9,bz=.9,wz=100,kz=1,Ts={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},Tz=Fr({getKey:null,doesEleInvalidateKey:uh,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:_T,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Sl=function(t,r){var a=this;a.renderer=t,a.onDequeues=[];var i=Tz(r);pe(a,i),a.lookup=new cz(i.getKey,i.doesEleInvalidateKey),a.setupDequeueing()},wr=Sl.prototype;wr.reasons=Ts;wr.getTextureQueue=function(e){var t=this;return t.eleImgCaches=t.eleImgCaches||{},t.eleImgCaches[e]=t.eleImgCaches[e]||[]};wr.getRetiredTextureQueue=function(e){var t=this,r=t.eleImgCaches.retired=t.eleImgCaches.retired||{},a=r[e]=r[e]||[];return a};wr.getElementQueue=function(){var e=this,t=e.eleCacheQueue=e.eleCacheQueue||new Ec(function(r,a){return a.reqs-r.reqs});return t};wr.getElementKeyToQueue=function(){var e=this,t=e.eleKeyToCacheQueue=e.eleKeyToCacheQueue||{};return t};wr.getElement=function(e,t,r,a,i){var n=this,s=this.renderer,o=s.cy.zoom(),l=this.lookup;if(!t||t.w===0||t.h===0||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed()||!n.allowEdgeTxrCaching&&e.isEdge()||!n.allowParentTxrCaching&&e.isParent())return null;if(a==null&&(a=Math.ceil(g1(o*r))),a<Lu)a=Lu;else if(o>=MC||a>Dg)return null;var u=Math.pow(2,a),h=t.h*u,d=t.w*u,f=s.eleTextBiggerThanMin(e,u);if(!this.isVisible(e,f))return null;var p=l.get(e,a);if(p&&p.invalidated&&(p.invalidated=!1,p.texture.invalidatedWidth-=p.width),p)return p;var y;if(h<=m2?y=m2:h<=tu?y=tu:y=Math.ceil(h/tu)*tu,h>fz||d>dz)return null;var v=n.getTextureQueue(y),m=v[v.length-2],x=function(){return n.recycleTexture(y,d)||n.addTexture(y,d)};m||(m=v[v.length-1]),m||(m=x()),m.width-m.usedWidth<d&&(m=x());for(var b=function($){return $&&$.scaledLabelShown===f},w=i&&i===Ts.dequeue,C=i&&i===Ts.highQuality,T=i&&i===Ts.downscale,k,S=a+1;S<=Dg;S++){var L=l.get(e,S);if(L){k=L;break}}var _=k&&k.level===a+1?k:null,A=function(){m.context.drawImage(_.texture.canvas,_.x,0,_.width,_.height,m.usedWidth,0,d,h)};if(m.context.setTransform(1,0,0,1,0,0),m.context.clearRect(m.usedWidth,0,d,y),b(_))A();else if(b(k))if(C){for(var E=k.level;E>a;E--)_=n.getElement(e,t,r,E,Ts.downscale);A()}else return n.queueElement(e,k.level-1),k;else{var D;if(!w&&!C&&!T)for(var R=a-1;R>=Lu;R--){var O=l.get(e,R);if(O){D=O;break}}if(b(D))return n.queueElement(e,a),D;m.context.translate(m.usedWidth,0),m.context.scale(u,u),this.drawElement(m.context,e,t,f,!1),m.context.scale(1/u,1/u),m.context.translate(-m.usedWidth,0)}return p={x:m.usedWidth,texture:m,level:a,scale:u,width:d,height:h,scaledLabelShown:f},m.usedWidth+=Math.ceil(d+uz),m.eleCaches.push(p),l.set(e,a,p),n.checkTextureFullness(m),p};wr.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])};wr.invalidateElement=function(e){var t=this,r=t.lookup,a=[],i=r.isInvalid(e);if(i){for(var n=Lu;n<=Dg;n++){var s=r.getForCachedKey(e,n);s&&a.push(s)}var o=r.invalidate(e);if(o)for(var l=0;l<a.length;l++){var u=a[l],h=u.texture;h.invalidatedWidth+=u.width,u.invalidated=!0,t.checkTextureUtility(h)}t.removeFromQueue(e)}};wr.checkTextureUtility=function(e){e.invalidatedWidth>=pz*e.width&&this.retireTexture(e)};wr.checkTextureFullness=function(e){var t=this,r=t.getTextureQueue(e.height);e.usedWidth/e.width>gz&&e.fullnessChecks>=yz?tn(r,e):e.fullnessChecks++};wr.retireTexture=function(e){var t=this,r=e.height,a=t.getTextureQueue(r),i=this.lookup;tn(a,e),e.retired=!0;for(var n=e.eleCaches,s=0;s<n.length;s++){var o=n[s];i.deleteCache(o.key,o.level)}p1(n);var l=t.getRetiredTextureQueue(r);l.push(e)};wr.addTexture=function(e,t){var r=this,a=r.getTextureQueue(e),i={};return a.push(i),i.eleCaches=[],i.height=e,i.width=Math.max(hz,t),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=r.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i};wr.recycleTexture=function(e,t){for(var r=this,a=r.getTextureQueue(e),i=r.getRetiredTextureQueue(e),n=0;n<i.length;n++){var s=i[n];if(s.width>=t)return s.retired=!1,s.usedWidth=0,s.invalidatedWidth=0,s.fullnessChecks=0,p1(s.eleCaches),s.context.setTransform(1,0,0,1,0,0),s.context.clearRect(0,0,s.width,s.height),tn(i,s),a.push(s),s}};wr.queueElement=function(e,t){var r=this,a=r.getElementQueue(),i=r.getElementKeyToQueue(),n=this.getKey(e),s=i[n];if(s)s.level=Math.max(s.level,t),s.eles.merge(e),s.reqs++,a.updateItem(s);else{var o={eles:e.spawn().merge(e),level:t,reqs:1,key:n};a.push(o),i[n]=o}};wr.dequeue=function(e){for(var t=this,r=t.getElementQueue(),a=t.getElementKeyToQueue(),i=[],n=t.lookup,s=0;s<kz&&r.size()>0;s++){var o=r.pop(),l=o.key,u=o.eles[0],h=n.hasCache(u,o.level);if(a[l]=null,h)continue;i.push(o);var d=t.getBoundingBox(u);t.getElement(u,d,e,o.level,Ts.dequeue)}return i};wr.removeFromQueue=function(e){var t=this,r=t.getElementQueue(),a=t.getElementKeyToQueue(),i=this.getKey(e),n=a[i];n!=null&&(n.eles.length===1?(n.reqs=d1,r.updateItem(n),r.pop(),a[i]=null):n.eles.unmerge(e))};wr.onDequeue=function(e){this.onDequeues.push(e)};wr.offDequeue=function(e){tn(this.onDequeues,e)};wr.setupDequeueing=NC.setupDequeueing({deqRedrawThreshold:wz,deqCost:vz,deqAvgCost:mz,deqNoDrawCost:xz,deqFastCost:bz,deq:function(t,r,a){return t.dequeue(r,a)},onDeqd:function(t,r){for(var a=0;a<t.onDequeues.length;a++){var i=t.onDequeues[a];i(r)}},shouldRedraw:function(t,r,a,i){for(var n=0;n<r.length;n++)for(var s=r[n].eles,o=0;o<s.length;o++){var l=s[o].boundingBox();if(v1(l,i))return!0}return!1},priority:function(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}});var Cz=1,Il=-4,mh=2,Sz=3.99,Ez=50,_z=50,Az=.15,Lz=.1,Dz=.9,Bz=.9,Rz=1,x2=250,Iz=4e3*4e3,b2=32767,Pz=!0,FC=function(t){var r=this,a=r.renderer=t,i=a.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=Li()-2*x2,r.skipping=!1,r.eleTxrDeqs=i.collection(),r.scheduleElementRefinement=Sc(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},_z),a.beforeRender(function(s,o){o-r.lastInvalidationTime<=x2?r.skipping=!0:r.skipping=!1},a.beforeRenderPriorities.lyrTxrSkip);var n=function(o,l){return l.reqs-o.reqs};r.layersQueue=new Ec(n),r.setupDequeueing()},Or=FC.prototype,w2=0,Nz=Math.pow(2,53)-1;Or.makeLayer=function(e,t){var r=Math.pow(2,t),a=Math.ceil(e.w*r),i=Math.ceil(e.h*r),n=this.renderer.makeOffscreenCanvas(a,i),s={id:w2=++w2%Nz,bb:e,level:t,width:a,height:i,canvas:n,context:n.getContext("2d"),eles:[],elesQueue:[],reqs:0},o=s.context,l=-s.bb.x1,u=-s.bb.y1;return o.scale(r,r),o.translate(l,u),s};Or.getLayers=function(e,t,r){var a=this,i=a.renderer,n=i.cy,s=n.zoom(),o=a.firstGet;if(a.firstGet=!1,r==null){if(r=Math.ceil(g1(s*t)),r<Il)r=Il;else if(s>=Sz||r>mh)return null}a.validateLayersElesOrdering(r,e);var l=a.layersByLevel,u=Math.pow(2,r),h=l[r]=l[r]||[],d,f=a.levelIsComplete(r,e),p,y=function(){var A=function(P){if(a.validateLayersElesOrdering(P,e),a.levelIsComplete(P,e))return p=l[P],!0},E=function(P){if(!p)for(var $=r+P;Il<=$&&$<=mh&&!A($);$+=P);};E(1),E(-1);for(var D=h.length-1;D>=0;D--){var R=h[D];R.invalid&&tn(h,R)}};if(!f)y();else return h;var v=function(){if(!d){d=ha();for(var A=0;A<e.length;A++)RT(d,e[A].boundingBox())}return d},m=function(A){A=A||{};var E=A.after;v();var D=Math.ceil(d.w*u),R=Math.ceil(d.h*u);if(D>b2||R>b2)return null;var O=D*R;if(O>Iz)return null;var P=a.makeLayer(d,r);if(E!=null){var $=h.indexOf(E)+1;h.splice($,0,P)}else(A.insert===void 0||A.insert)&&h.unshift(P);return P};if(a.skipping&&!o)return null;for(var x=null,b=e.length/Cz,w=!o,C=0;C<e.length;C++){var T=e[C],k=T._private.rscratch,S=k.imgLayerCaches=k.imgLayerCaches||{},L=S[r];if(L){x=L;continue}if((!x||x.eles.length>=b||!NF(x.bb,T.boundingBox()))&&(x=m({insert:!0,after:x}),!x))return null;p||w?a.queueLayer(x,T):a.drawEleInLayer(x,T,r,t),x.eles.push(T),S[r]=x}return p||(w?null:h)};Or.getEleLevelForLayerLevel=function(e,t){return e};Or.drawEleInLayer=function(e,t,r,a){var i=this,n=this.renderer,s=e.context,o=t.boundingBox();o.w===0||o.h===0||!t.visible()||(r=i.getEleLevelForLayerLevel(r,a),n.setImgSmoothing(s,!1),n.drawCachedElement(s,t,null,null,r,Pz),n.setImgSmoothing(s,!0))};Or.levelIsComplete=function(e,t){var r=this,a=r.layersByLevel[e];if(!a||a.length===0)return!1;for(var i=0,n=0;n<a.length;n++){var s=a[n];if(s.reqs>0||s.invalid)return!1;i+=s.eles.length}return i===t.length};Or.validateLayersElesOrdering=function(e,t){var r=this.layersByLevel[e];if(r)for(var a=0;a<r.length;a++){for(var i=r[a],n=-1,s=0;s<t.length;s++)if(i.eles[0]===t[s]){n=s;break}if(n<0){this.invalidateLayer(i);continue}for(var o=n,s=0;s<i.eles.length;s++)if(i.eles[s]!==t[o+s]){this.invalidateLayer(i);break}}};Or.updateElementsInLayers=function(e,t){for(var r=this,a=wc(e[0]),i=0;i<e.length;i++)for(var n=a?null:e[i],s=a?e[i]:e[i].ele,o=s._private.rscratch,l=o.imgLayerCaches=o.imgLayerCaches||{},u=Il;u<=mh;u++){var h=l[u];h&&(n&&r.getEleLevelForLayerLevel(h.level)!==n.level||t(h,s,n))}};Or.haveLayers=function(){for(var e=this,t=!1,r=Il;r<=mh;r++){var a=e.layersByLevel[r];if(a&&a.length>0){t=!0;break}}return t};Or.invalidateElements=function(e){var t=this;e.length!==0&&(t.lastInvalidationTime=Li(),!(e.length===0||!t.haveLayers())&&t.updateElementsInLayers(e,function(a,i,n){t.invalidateLayer(a)}))};Or.invalidateLayer=function(e){if(this.lastInvalidationTime=Li(),!e.invalid){var t=e.level,r=e.eles,a=this.layersByLevel[t];tn(a,e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var i=0;i<r.length;i++){var n=r[i]._private.rscratch.imgLayerCaches;n&&(n[t]=null)}}};Or.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,function(a,i,n){var s=a.replacement;if(s||(s=a.replacement=t.makeLayer(a.bb,a.level),s.replaces=a,s.eles=a.eles),!s.reqs)for(var o=0;o<s.eles.length;o++)t.queueLayer(s,s.eles[o])})};Or.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()};Or.queueLayer=function(e,t){var r=this,a=r.layersQueue,i=e.elesQueue,n=i.hasId=i.hasId||{};if(!e.replacement){if(t){if(n[t.id()])return;i.push(t),n[t.id()]=!0}e.reqs?(e.reqs++,a.updateItem(e)):(e.reqs=1,a.push(e))}};Or.dequeue=function(e){for(var t=this,r=t.layersQueue,a=[],i=0;i<Rz&&r.size()!==0;){var n=r.peek();if(n.replacement){r.pop();continue}if(n.replaces&&n!==n.replaces.replacement){r.pop();continue}if(n.invalid){r.pop();continue}var s=n.elesQueue.shift();s&&(t.drawEleInLayer(n,s,n.level,e),i++),a.length===0&&a.push(!0),n.elesQueue.length===0&&(r.pop(),n.reqs=0,n.replaces&&t.applyLayerReplacement(n),t.requestRedraw())}return a};Or.applyLayerReplacement=function(e){var t=this,r=t.layersByLevel[e.level],a=e.replaces,i=r.indexOf(a);if(!(i<0||a.invalid)){r[i]=e;for(var n=0;n<e.eles.length;n++){var s=e.eles[n]._private,o=s.imgLayerCaches=s.imgLayerCaches||{};o&&(o[e.level]=e)}t.requestRedraw()}};Or.requestRedraw=Sc(function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()},100);Or.setupDequeueing=NC.setupDequeueing({deqRedrawThreshold:Ez,deqCost:Az,deqAvgCost:Lz,deqNoDrawCost:Dz,deqFastCost:Bz,deq:function(t,r){return t.dequeue(r)},onDeqd:f1,shouldRedraw:_T,priority:function(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}});var OC={},k2;function Mz(e,t){for(var r=0;r<t.length;r++){var a=t[r];e.lineTo(a.x,a.y)}}function Fz(e,t,r){for(var a,i=0;i<t.length;i++){var n=t[i];i===0&&(a=n),e.lineTo(n.x,n.y)}e.quadraticCurveTo(r.x,r.y,a.x,a.y)}function T2(e,t,r){e.beginPath&&e.beginPath();for(var a=t,i=0;i<a.length;i++){var n=a[i];e.lineTo(n.x,n.y)}var s=r,o=r[0];e.moveTo(o.x,o.y);for(var i=1;i<s.length;i++){var n=s[i];e.lineTo(n.x,n.y)}e.closePath&&e.closePath()}function Oz(e,t,r,a,i){e.beginPath&&e.beginPath(),e.arc(r,a,i,0,Math.PI*2,!1);var n=t,s=n[0];e.moveTo(s.x,s.y);for(var o=0;o<n.length;o++){var l=n[o];e.lineTo(l.x,l.y)}e.closePath&&e.closePath()}function $z(e,t,r,a){e.arc(t,r,a,0,Math.PI*2,!1)}OC.arrowShapeImpl=function(e){return(k2||(k2={polygon:Mz,"triangle-backcurve":Fz,"triangle-tee":T2,"circle-triangle":Oz,"triangle-cross":T2,circle:$z}))[e]};var fi={};fi.drawElement=function(e,t,r,a,i,n){var s=this;t.isNode()?s.drawNode(e,t,r,a,i,n):s.drawEdge(e,t,r,a,i,n)};fi.drawElementOverlay=function(e,t){var r=this;t.isNode()?r.drawNodeOverlay(e,t):r.drawEdgeOverlay(e,t)};fi.drawElementUnderlay=function(e,t){var r=this;t.isNode()?r.drawNodeUnderlay(e,t):r.drawEdgeUnderlay(e,t)};fi.drawCachedElementPortion=function(e,t,r,a,i,n,s,o){var l=this,u=r.getBoundingBox(t);if(!(u.w===0||u.h===0)){var h=r.getElement(t,u,a,i,n);if(h!=null){var d=o(l,t);if(d===0)return;var f=s(l,t),p=u.x1,y=u.y1,v=u.w,m=u.h,x,b,w,C,T;if(f!==0){var k=r.getRotationPoint(t);w=k.x,C=k.y,e.translate(w,C),e.rotate(f),T=l.getImgSmoothing(e),T||l.setImgSmoothing(e,!0);var S=r.getRotationOffset(t);x=S.x,b=S.y}else x=p,b=y;var L;d!==1&&(L=e.globalAlpha,e.globalAlpha=L*d),e.drawImage(h.texture.canvas,h.x,0,h.width,h.height,x,b,v,m),d!==1&&(e.globalAlpha=L),f!==0&&(e.rotate(-f),e.translate(-w,-C),T||l.setImgSmoothing(e,!1))}else r.drawElement(e,t)}};var Vz=function(){return 0},zz=function(t,r){return t.getTextAngle(r,null)},qz=function(t,r){return t.getTextAngle(r,"source")},Wz=function(t,r){return t.getTextAngle(r,"target")},Gz=function(t,r){return r.effectiveOpacity()},np=function(t,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};fi.drawCachedElement=function(e,t,r,a,i,n){var s=this,o=s.data,l=o.eleTxrCache,u=o.lblTxrCache,h=o.slbTxrCache,d=o.tlbTxrCache,f=t.boundingBox(),p=n===!0?l.reasons.highQuality:null;if(!(f.w===0||f.h===0||!t.visible())&&(!a||v1(f,a))){var y=t.isEdge(),v=t.element()._private.rscratch.badLine;s.drawElementUnderlay(e,t),s.drawCachedElementPortion(e,t,l,r,i,p,Vz,Gz),(!y||!v)&&s.drawCachedElementPortion(e,t,u,r,i,p,zz,np),y&&!v&&(s.drawCachedElementPortion(e,t,h,r,i,p,qz,np),s.drawCachedElementPortion(e,t,d,r,i,p,Wz,np)),s.drawElementOverlay(e,t)}};fi.drawElements=function(e,t){for(var r=this,a=0;a<t.length;a++){var i=t[a];r.drawElement(e,i)}};fi.drawCachedElements=function(e,t,r,a){for(var i=this,n=0;n<t.length;n++){var s=t[n];i.drawCachedElement(e,s,r,a)}};fi.drawCachedNodes=function(e,t,r,a){for(var i=this,n=0;n<t.length;n++){var s=t[n];s.isNode()&&i.drawCachedElement(e,s,r,a)}};fi.drawLayeredElements=function(e,t,r,a){var i=this,n=i.data.lyrTxrCache.getLayers(t,r);if(n)for(var s=0;s<n.length;s++){var o=n[s],l=o.bb;l.w===0||l.h===0||e.drawImage(o.canvas,l.x1,l.y1,l.w,l.h)}else i.drawCachedElements(e,t,r,a)};var Ni={};Ni.drawEdge=function(e,t,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,n=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,o=t._private.rscratch;if(!(n&&!t.visible())&&!(o.badLine||o.allpts==null||isNaN(o.allpts[0]))){var l;r&&(l=r,e.translate(-l.x1,-l.y1));var u=n?t.pstyle("opacity").value:1,h=n?t.pstyle("line-opacity").value:1,d=t.pstyle("curve-style").value,f=t.pstyle("line-style").value,p=t.pstyle("width").pfValue,y=t.pstyle("line-cap").value,v=t.pstyle("line-outline-width").value,m=t.pstyle("line-outline-color").value,x=u*h,b=u*h,w=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x;d==="straight-triangle"?(s.eleStrokeStyle(e,t,P),s.drawEdgeTrianglePath(t,e,o.allpts)):(e.lineWidth=p,e.lineCap=y,s.eleStrokeStyle(e,t,P),s.drawEdgePath(t,e,o.allpts,f),e.lineCap="butt")},C=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x;if(e.lineWidth=p+v,e.lineCap=y,v>0)s.colorStrokeStyle(e,m[0],m[1],m[2],P);else{e.lineCap="butt";return}d==="straight-triangle"?s.drawEdgeTrianglePath(t,e,o.allpts):(s.drawEdgePath(t,e,o.allpts,f),e.lineCap="butt")},T=function(){i&&s.drawEdgeOverlay(e,t)},k=function(){i&&s.drawEdgeUnderlay(e,t)},S=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;s.drawArrowheads(e,t,P)},L=function(){s.drawElementText(e,t,null,a)};e.lineJoin="round";var _=t.pstyle("ghost").value==="yes";if(_){var A=t.pstyle("ghost-offset-x").pfValue,E=t.pstyle("ghost-offset-y").pfValue,D=t.pstyle("ghost-opacity").value,R=x*D;e.translate(A,E),w(R),S(R),e.translate(-A,-E)}else C();k(),w(),S(),T(),L(),r&&e.translate(l.x1,l.y1)}};var $C=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(r,a){if(a.visible()){var i=a.pstyle("".concat(t,"-opacity")).value;if(i!==0){var n=this,s=n.usePaths(),o=a._private.rscratch,l=a.pstyle("".concat(t,"-padding")).pfValue,u=2*l,h=a.pstyle("".concat(t,"-color")).value;r.lineWidth=u,o.edgeType==="self"&&!s?r.lineCap="butt":r.lineCap="round",n.colorStrokeStyle(r,h[0],h[1],h[2],i),n.drawEdgePath(a,r,o.allpts,"solid")}}}};Ni.drawEdgeOverlay=$C("overlay");Ni.drawEdgeUnderlay=$C("underlay");Ni.drawEdgePath=function(e,t,r,a){var i=e._private.rscratch,n=t,s,o=!1,l=this.usePaths(),u=e.pstyle("line-dash-pattern").pfValue,h=e.pstyle("line-dash-offset").pfValue;if(l){var d=r.join("$"),f=i.pathCacheKey&&i.pathCacheKey===d;f?(s=t=i.pathCache,o=!0):(s=t=new Path2D,i.pathCacheKey=d,i.pathCache=s)}if(n.setLineDash)switch(a){case"dotted":n.setLineDash([1,1]);break;case"dashed":n.setLineDash(u),n.lineDashOffset=h;break;case"solid":n.setLineDash([]);break}if(!o&&!i.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(r[0],r[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var p=2;p+3<r.length;p+=4)t.quadraticCurveTo(r[p],r[p+1],r[p+2],r[p+3]);break;case"straight":case"haystack":for(var y=2;y+1<r.length;y+=2)t.lineTo(r[y],r[y+1]);break;case"segments":if(i.isRound){var v=ca(i.roundCorners),m;try{for(v.s();!(m=v.n()).done;){var x=m.value;_C(t,x)}}catch(w){v.e(w)}finally{v.f()}t.lineTo(r[r.length-2],r[r.length-1])}else for(var b=2;b+1<r.length;b+=2)t.lineTo(r[b],r[b+1]);break}t=n,l?t.stroke(s):t.stroke(),t.setLineDash&&t.setLineDash([])};Ni.drawEdgeTrianglePath=function(e,t,r){t.fillStyle=t.strokeStyle;for(var a=e.pstyle("width").pfValue,i=0;i+1<r.length;i+=2){var n=[r[i+2]-r[i],r[i+3]-r[i+1]],s=Math.sqrt(n[0]*n[0]+n[1]*n[1]),o=[n[1]/s,-n[0]/s],l=[o[0]*a/2,o[1]*a/2];t.beginPath(),t.moveTo(r[i]-l[0],r[i+1]-l[1]),t.lineTo(r[i]+l[0],r[i+1]+l[1]),t.lineTo(r[i+2],r[i+3]),t.closePath(),t.fill()}};Ni.drawArrowheads=function(e,t,r){var a=t._private.rscratch,i=a.edgeType==="haystack";i||this.drawArrowhead(e,t,"source",a.arrowStartX,a.arrowStartY,a.srcArrowAngle,r),this.drawArrowhead(e,t,"mid-target",a.midX,a.midY,a.midtgtArrowAngle,r),this.drawArrowhead(e,t,"mid-source",a.midX,a.midY,a.midsrcArrowAngle,r),i||this.drawArrowhead(e,t,"target",a.arrowEndX,a.arrowEndY,a.tgtArrowAngle,r)};Ni.drawArrowhead=function(e,t,r,a,i,n,s){if(!(isNaN(a)||a==null||isNaN(i)||i==null||isNaN(n)||n==null)){var o=this,l=t.pstyle(r+"-arrow-shape").value;if(l!=="none"){var u=t.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",h=t.pstyle(r+"-arrow-fill").value,d=t.pstyle("width").pfValue,f=t.pstyle(r+"-arrow-width"),p=f.value==="match-line"?d:f.pfValue;f.units==="%"&&(p*=d);var y=t.pstyle("opacity").value;s===void 0&&(s=y);var v=e.globalCompositeOperation;(s!==1||h==="hollow")&&(e.globalCompositeOperation="destination-out",o.colorFillStyle(e,255,255,255,1),o.colorStrokeStyle(e,255,255,255,1),o.drawArrowShape(t,e,u,d,l,p,a,i,n),e.globalCompositeOperation=v);var m=t.pstyle(r+"-arrow-color").value;o.colorFillStyle(e,m[0],m[1],m[2],s),o.colorStrokeStyle(e,m[0],m[1],m[2],s),o.drawArrowShape(t,e,h,d,l,p,a,i,n)}}};Ni.drawArrowShape=function(e,t,r,a,i,n,s,o,l){var u=this,h=this.usePaths()&&i!=="triangle-cross",d=!1,f,p=t,y={x:s,y:o},v=e.pstyle("arrow-scale").value,m=this.getArrowWidth(a,v),x=u.arrowShapes[i];if(h){var b=u.arrowPathCache=u.arrowPathCache||[],w=Gn(i),C=b[w];C!=null?(f=t=C,d=!0):(f=t=new Path2D,b[w]=f)}d||(t.beginPath&&t.beginPath(),h?x.draw(t,1,0,{x:0,y:0},1):x.draw(t,m,l,y,a),t.closePath&&t.closePath()),t=p,h&&(t.translate(s,o),t.rotate(l),t.scale(m,m)),(r==="filled"||r==="both")&&(h?t.fill(f):t.fill()),(r==="hollow"||r==="both")&&(t.lineWidth=n/(h?m:1),t.lineJoin="miter",h?t.stroke(f):t.stroke()),h&&(t.scale(1/m,1/m),t.rotate(-l),t.translate(-s,-o))};var B1={};B1.safeDrawImage=function(e,t,r,a,i,n,s,o,l,u){if(!(i<=0||n<=0||l<=0||u<=0))try{e.drawImage(t,r,a,i,n,s,o,l,u)}catch(h){Pe(h)}};B1.drawInscribedImage=function(e,t,r,a,i){var n=this,s=r.position(),o=s.x,l=s.y,u=r.cy().style(),h=u.getIndexedStyle.bind(u),d=h(r,"background-fit","value",a),f=h(r,"background-repeat","value",a),p=r.width(),y=r.height(),v=r.padding()*2,m=p+(h(r,"background-width-relative-to","value",a)==="inner"?0:v),x=y+(h(r,"background-height-relative-to","value",a)==="inner"?0:v),b=r._private.rscratch,w=h(r,"background-clip","value",a),C=w==="node",T=h(r,"background-image-opacity","value",a)*i,k=h(r,"background-image-smoothing","value",a),S=r.pstyle("corner-radius").value;S!=="auto"&&(S=r.pstyle("corner-radius").pfValue);var L=t.width||t.cachedW,_=t.height||t.cachedH;(L==null||_==null)&&(document.body.appendChild(t),L=t.cachedW=t.width||t.offsetWidth,_=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var A=L,E=_;if(h(r,"background-width","value",a)!=="auto"&&(h(r,"background-width","units",a)==="%"?A=h(r,"background-width","pfValue",a)*m:A=h(r,"background-width","pfValue",a)),h(r,"background-height","value",a)!=="auto"&&(h(r,"background-height","units",a)==="%"?E=h(r,"background-height","pfValue",a)*x:E=h(r,"background-height","pfValue",a)),!(A===0||E===0)){if(d==="contain"){var D=Math.min(m/A,x/E);A*=D,E*=D}else if(d==="cover"){var D=Math.max(m/A,x/E);A*=D,E*=D}var R=o-m/2,O=h(r,"background-position-x","units",a),P=h(r,"background-position-x","pfValue",a);O==="%"?R+=(m-A)*P:R+=P;var $=h(r,"background-offset-x","units",a),M=h(r,"background-offset-x","pfValue",a);$==="%"?R+=(m-A)*M:R+=M;var I=l-x/2,F=h(r,"background-position-y","units",a),V=h(r,"background-position-y","pfValue",a);F==="%"?I+=(x-E)*V:I+=V;var N=h(r,"background-offset-y","units",a),q=h(r,"background-offset-y","pfValue",a);N==="%"?I+=(x-E)*q:I+=q,b.pathCache&&(R-=o,I-=l,o=0,l=0);var U=e.globalAlpha;e.globalAlpha=T;var X=n.getImgSmoothing(e),lt=!1;if(k==="no"&&X?(n.setImgSmoothing(e,!1),lt=!0):k==="yes"&&!X&&(n.setImgSmoothing(e,!0),lt=!0),f==="no-repeat")C&&(e.save(),b.pathCache?e.clip(b.pathCache):(n.nodeShapes[n.getNodeShape(r)].draw(e,o,l,m,x,S,b),e.clip())),n.safeDrawImage(e,t,0,0,L,_,R,I,A,E),C&&e.restore();else{var J=e.createPattern(t,f);e.fillStyle=J,n.nodeShapes[n.getNodeShape(r)].draw(e,o,l,m,x,S,b),e.translate(R,I),e.fill(),e.translate(-R,-I)}e.globalAlpha=U,lt&&n.setImgSmoothing(e,X)}};var rs={};rs.eleTextBiggerThanMin=function(e,t){if(!t){var r=e.cy().zoom(),a=this.getPixelRatio(),i=Math.ceil(g1(r*a));t=Math.pow(2,i)}var n=e.pstyle("font-size").pfValue*t,s=e.pstyle("min-zoomed-font-size").pfValue;return!(n<s)};rs.drawElementText=function(e,t,r,a,i){var n=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this;if(a==null){if(n&&!s.eleTextBiggerThanMin(t))return}else if(a===!1)return;if(t.isNode()){var o=t.pstyle("label");if(!o||!o.value)return;var l=s.getLabelJustification(t);e.textAlign=l,e.textBaseline="bottom"}else{var u=t.element()._private.rscratch.badLine,h=t.pstyle("label"),d=t.pstyle("source-label"),f=t.pstyle("target-label");if(u||(!h||!h.value)&&(!d||!d.value)&&(!f||!f.value))return;e.textAlign="center",e.textBaseline="bottom"}var p=!r,y;r&&(y=r,e.translate(-y.x1,-y.y1)),i==null?(s.drawText(e,t,null,p,n),t.isEdge()&&(s.drawText(e,t,"source",p,n),s.drawText(e,t,"target",p,n))):s.drawText(e,t,i,p,n),r&&e.translate(y.x1,y.y1)};rs.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(t=this.fontCaches[r],t.context===e)return t;return t={context:e},this.fontCaches.push(t),t};rs.setupTextStyle=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=t.pstyle("font-style").strValue,i=t.pstyle("font-size").pfValue+"px",n=t.pstyle("font-family").strValue,s=t.pstyle("font-weight").strValue,o=r?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,l=t.pstyle("text-outline-opacity").value*o,u=t.pstyle("color").value,h=t.pstyle("text-outline-color").value;e.font=a+" "+s+" "+i+" "+n,e.lineJoin="round",this.colorFillStyle(e,u[0],u[1],u[2],o),this.colorStrokeStyle(e,h[0],h[1],h[2],l)};function sp(e,t,r,a,i){var n=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,s=arguments.length>6?arguments[6]:void 0;e.beginPath(),e.moveTo(t+n,r),e.lineTo(t+a-n,r),e.quadraticCurveTo(t+a,r,t+a,r+n),e.lineTo(t+a,r+i-n),e.quadraticCurveTo(t+a,r+i,t+a-n,r+i),e.lineTo(t+n,r+i),e.quadraticCurveTo(t,r+i,t,r+i-n),e.lineTo(t,r+n),e.quadraticCurveTo(t,r,t+n,r),e.closePath(),s?e.stroke():e.fill()}rs.getTextAngle=function(e,t){var r,a=e._private,i=a.rscratch,n=t?t+"-":"",s=e.pstyle(n+"text-rotation");if(s.strValue==="autorotate"){var o=na(i,"labelAngle",t);r=e.isEdge()?o:0}else s.strValue==="none"?r=0:r=s.pfValue;return r};rs.drawText=function(e,t,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,n=t._private,s=n.rscratch,o=i?t.effectiveOpacity():1;if(!(i&&(o===0||t.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var l=na(s,"labelX",r),u=na(s,"labelY",r),h,d,f=this.getLabelText(t,r);if(f!=null&&f!==""&&!isNaN(l)&&!isNaN(u)){this.setupTextStyle(e,t,i);var p=r?r+"-":"",y=na(s,"labelWidth",r),v=na(s,"labelHeight",r),m=t.pstyle(p+"text-margin-x").pfValue,x=t.pstyle(p+"text-margin-y").pfValue,b=t.isEdge(),w=t.pstyle("text-halign").value,C=t.pstyle("text-valign").value;b&&(w="center",C="center"),l+=m,u+=x;var T;switch(a?T=this.getTextAngle(t,r):T=0,T!==0&&(h=l,d=u,e.translate(h,d),e.rotate(T),l=0,u=0),C){case"top":break;case"center":u+=v/2;break;case"bottom":u+=v;break}var k=t.pstyle("text-background-opacity").value,S=t.pstyle("text-border-opacity").value,L=t.pstyle("text-border-width").pfValue,_=t.pstyle("text-background-padding").pfValue,A=t.pstyle("text-background-shape").strValue,E=A.indexOf("round")===0,D=2;if(k>0||L>0&&S>0){var R=l-_;switch(w){case"left":R-=y;break;case"center":R-=y/2;break}var O=u-v-_,P=y+2*_,$=v+2*_;if(k>0){var M=e.fillStyle,I=t.pstyle("text-background-color").value;e.fillStyle="rgba("+I[0]+","+I[1]+","+I[2]+","+k*o+")",E?sp(e,R,O,P,$,D):e.fillRect(R,O,P,$),e.fillStyle=M}if(L>0&&S>0){var F=e.strokeStyle,V=e.lineWidth,N=t.pstyle("text-border-color").value,q=t.pstyle("text-border-style").value;if(e.strokeStyle="rgba("+N[0]+","+N[1]+","+N[2]+","+S*o+")",e.lineWidth=L,e.setLineDash)switch(q){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=L/4,e.setLineDash([]);break;case"solid":e.setLineDash([]);break}if(E?sp(e,R,O,P,$,D,"stroke"):e.strokeRect(R,O,P,$),q==="double"){var U=L/2;E?sp(e,R+U,O+U,P-U*2,$-U*2,D,"stroke"):e.strokeRect(R+U,O+U,P-U*2,$-U*2)}e.setLineDash&&e.setLineDash([]),e.lineWidth=V,e.strokeStyle=F}}var X=2*t.pstyle("text-outline-width").pfValue;if(X>0&&(e.lineWidth=X),t.pstyle("text-wrap").value==="wrap"){var lt=na(s,"labelWrapCachedLines",r),J=na(s,"labelLineHeight",r),ct=y/2,yt=this.getLabelJustification(t);switch(yt==="auto"||(w==="left"?yt==="left"?l+=-y:yt==="center"&&(l+=-ct):w==="center"?yt==="left"?l+=-ct:yt==="right"&&(l+=ct):w==="right"&&(yt==="center"?l+=ct:yt==="right"&&(l+=y))),C){case"top":u-=(lt.length-1)*J;break;case"center":case"bottom":u-=(lt.length-1)*J;break}for(var ut=0;ut<lt.length;ut++)X>0&&e.strokeText(lt[ut],l,u),e.fillText(lt[ut],l,u),u+=J}else X>0&&e.strokeText(f,l,u),e.fillText(f,l,u);T!==0&&(e.rotate(-T),e.translate(-h,-d))}}};var fn={};fn.drawNode=function(e,t,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,n=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,o,l,u=t._private,h=u.rscratch,d=t.position();if(!(!Vt(d.x)||!Vt(d.y))&&!(n&&!t.visible())){var f=n?t.effectiveOpacity():1,p=s.usePaths(),y,v=!1,m=t.padding();o=t.width()+2*m,l=t.height()+2*m;var x;r&&(x=r,e.translate(-x.x1,-x.y1));for(var b=t.pstyle("background-image"),w=b.value,C=new Array(w.length),T=new Array(w.length),k=0,S=0;S<w.length;S++){var L=w[S],_=C[S]=L!=null&&L!=="none";if(_){var A=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",S);k++,T[S]=s.getCachedImage(L,A,function(){u.backgroundTimestamp=Date.now(),t.emitAndNotify("background")})}}var E=t.pstyle("background-blacken").value,D=t.pstyle("border-width").pfValue,R=t.pstyle("background-opacity").value*f,O=t.pstyle("border-color").value,P=t.pstyle("border-style").value,$=t.pstyle("border-join").value,M=t.pstyle("border-cap").value,I=t.pstyle("border-position").value,F=t.pstyle("border-dash-pattern").pfValue,V=t.pstyle("border-dash-offset").pfValue,N=t.pstyle("border-opacity").value*f,q=t.pstyle("outline-width").pfValue,U=t.pstyle("outline-color").value,X=t.pstyle("outline-style").value,lt=t.pstyle("outline-opacity").value*f,J=t.pstyle("outline-offset").value,ct=t.pstyle("corner-radius").value;ct!=="auto"&&(ct=t.pstyle("corner-radius").pfValue);var yt=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:R;s.eleFillStyle(e,t,z)},ut=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N;s.colorStrokeStyle(e,O[0],O[1],O[2],z)},Q=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:lt;s.colorStrokeStyle(e,U[0],U[1],U[2],z)},K=function(z,ft,B,et){var Z=s.nodePathCache=s.nodePathCache||[],ht=ET(B==="polygon"?B+","+et.join(","):B,""+ft,""+z,""+ct),ot=Z[ht],pt,gt=!1;return ot!=null?(pt=ot,gt=!0,h.pathCache=pt):(pt=new Path2D,Z[ht]=h.pathCache=pt),{path:pt,cacheHit:gt}},j=t.pstyle("shape").strValue,Y=t.pstyle("shape-polygon-points").pfValue;if(p){e.translate(d.x,d.y);var st=K(o,l,j,Y);y=st.path,v=st.cacheHit}var W=function(){if(!v){var z=d;p&&(z={x:0,y:0}),s.nodeShapes[s.getNodeShape(t)].draw(y||e,z.x,z.y,o,l,ct,h)}p?e.fill(y):e.fill()},bt=function(){for(var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f,ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,B=u.backgrounding,et=0,Z=0;Z<T.length;Z++){var ht=t.cy().style().getIndexedStyle(t,"background-image-containment","value",Z);if(ft&&ht==="over"||!ft&&ht==="inside"){et++;continue}C[Z]&&T[Z].complete&&!T[Z].error&&(et++,s.drawInscribedImage(e,T[Z],t,Z,z))}u.backgrounding=et!==k,B!==u.backgrounding&&t.updateStyle(!1)},tt=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f;s.hasPie(t)&&(s.drawPie(e,t,ft),z&&(p||s.nodeShapes[s.getNodeShape(t)].draw(e,d.x,d.y,o,l,ct,h)))},H=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f;s.hasStripe(t)&&(e.save(),p?e.clip(h.pathCache):(s.nodeShapes[s.getNodeShape(t)].draw(e,d.x,d.y,o,l,ct,h),e.clip()),s.drawStripe(e,t,ft),e.restore(),z&&(p||s.nodeShapes[s.getNodeShape(t)].draw(e,d.x,d.y,o,l,ct,h)))},Et=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f,ft=(E>0?E:-E)*z,B=E>0?0:255;E!==0&&(s.colorFillStyle(e,B,B,B,ft),p?e.fill(y):e.fill())},nt=function(){if(D>0){if(e.lineWidth=D,e.lineCap=M,e.lineJoin=$,e.setLineDash)switch(P){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash(F),e.lineDashOffset=V;break;case"solid":case"double":e.setLineDash([]);break}if(I!=="center"){if(e.save(),e.lineWidth*=2,I==="inside")p?e.clip(y):e.clip();else{var z=new Path2D;z.rect(-o/2-D,-l/2-D,o+2*D,l+2*D),z.addPath(y),e.clip(z,"evenodd")}p?e.stroke(y):e.stroke(),e.restore()}else p?e.stroke(y):e.stroke();if(P==="double"){e.lineWidth=D/3;var ft=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",p?e.stroke(y):e.stroke(),e.globalCompositeOperation=ft}e.setLineDash&&e.setLineDash([])}},Lt=function(){if(q>0){if(e.lineWidth=q,e.lineCap="butt",e.setLineDash)switch(X){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([]);break}var z=d;p&&(z={x:0,y:0});var ft=s.getNodeShape(t),B=D;I==="inside"&&(B=0),I==="outside"&&(B*=2);var et=(o+B+(q+J))/o,Z=(l+B+(q+J))/l,ht=o*et,ot=l*Z,pt=s.nodeShapes[ft].points,gt;if(p){var kt=K(ht,ot,ft,pt);gt=kt.path}if(ft==="ellipse")s.drawEllipsePath(gt||e,z.x,z.y,ht,ot);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(ft)){var Ft=0,Ht=0,Pt=0;ft==="round-diamond"?Ft=(B+J+q)*1.4:ft==="round-heptagon"?(Ft=(B+J+q)*1.075,Pt=-(B/2+J+q)/35):ft==="round-hexagon"?Ft=(B+J+q)*1.12:ft==="round-pentagon"?(Ft=(B+J+q)*1.13,Pt=-(B/2+J+q)/15):ft==="round-tag"?(Ft=(B+J+q)*1.12,Ht=(B/2+q+J)*.07):ft==="round-triangle"&&(Ft=(B+J+q)*(Math.PI/2),Pt=-(B+J/2+q)/Math.PI),Ft!==0&&(et=(o+Ft)/o,ht=o*et,["round-hexagon","round-tag"].includes(ft)||(Z=(l+Ft)/l,ot=l*Z)),ct=ct==="auto"?NT(ht,ot):ct;for(var Ot=ht/2,Gt=ot/2,Bt=ct+(B+q+J)/2,te=new Array(pt.length/2),ue=new Array(pt.length/2),Ce=0;Ce<pt.length/2;Ce++)te[Ce]={x:z.x+Ht+Ot*pt[Ce*2],y:z.y+Pt+Gt*pt[Ce*2+1]};var Wt,de,$t,Jt,jt=te.length;for(de=te[jt-1],Wt=0;Wt<jt;Wt++)$t=te[Wt%jt],Jt=te[(Wt+1)%jt],ue[Wt]=L1(de,$t,Jt,Bt),de=$t,$t=Jt;s.drawRoundPolygonPath(gt||e,z.x+Ht,z.y+Pt,o*et,l*Z,pt,ue)}else if(["roundrectangle","round-rectangle"].includes(ft))ct=ct==="auto"?en(ht,ot):ct,s.drawRoundRectanglePath(gt||e,z.x,z.y,ht,ot,ct+(B+q+J)/2);else if(["cutrectangle","cut-rectangle"].includes(ft))ct=ct==="auto"?m1():ct,s.drawCutRectanglePath(gt||e,z.x,z.y,ht,ot,null,ct+(B+q+J)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(ft))ct=ct==="auto"?en(ht,ot):ct,s.drawBottomRoundRectanglePath(gt||e,z.x,z.y,ht,ot,ct+(B+q+J)/2);else if(ft==="barrel")s.drawBarrelPath(gt||e,z.x,z.y,ht,ot);else if(ft.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(ft)){var Qt=(B+q+J)/o;pt=hh(dh(pt,Qt)),s.drawPolygonPath(gt||e,z.x,z.y,o,l,pt)}else{var Yt=(B+q+J)/o;pt=hh(dh(pt,-Yt)),s.drawPolygonPath(gt||e,z.x,z.y,o,l,pt)}if(p?e.stroke(gt):e.stroke(),X==="double"){e.lineWidth=B/3;var fe=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",p?e.stroke(gt):e.stroke(),e.globalCompositeOperation=fe}e.setLineDash&&e.setLineDash([])}},Dt=function(){i&&s.drawNodeOverlay(e,t,d,o,l)},At=function(){i&&s.drawNodeUnderlay(e,t,d,o,l)},xt=function(){s.drawElementText(e,t,null,a)},_t=t.pstyle("ghost").value==="yes";if(_t){var vt=t.pstyle("ghost-offset-x").pfValue,wt=t.pstyle("ghost-offset-y").pfValue,St=t.pstyle("ghost-opacity").value,at=St*f;e.translate(vt,wt),Q(),Lt(),yt(St*R),W(),bt(at,!0),ut(St*N),nt(),tt(E!==0||D!==0),H(E!==0||D!==0),bt(at,!1),Et(at),e.translate(-vt,-wt)}p&&e.translate(-d.x,-d.y),At(),p&&e.translate(d.x,d.y),Q(),Lt(),yt(),W(),bt(f,!0),ut(),nt(),tt(E!==0||D!==0),H(E!==0||D!==0),bt(f,!1),Et(),p&&e.translate(-d.x,-d.y),xt(),Dt(),r&&e.translate(x.x1,x.y1)}};var VC=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(r,a,i,n,s){var o=this;if(a.visible()){var l=a.pstyle("".concat(t,"-padding")).pfValue,u=a.pstyle("".concat(t,"-opacity")).value,h=a.pstyle("".concat(t,"-color")).value,d=a.pstyle("".concat(t,"-shape")).value,f=a.pstyle("".concat(t,"-corner-radius")).value;if(u>0){if(i=i||a.position(),n==null||s==null){var p=a.padding();n=a.width()+2*p,s=a.height()+2*p}o.colorFillStyle(r,h[0],h[1],h[2],u),o.nodeShapes[d].draw(r,i.x,i.y,n+l*2,s+l*2,f),r.fill()}}}};fn.drawNodeOverlay=VC("overlay");fn.drawNodeUnderlay=VC("underlay");fn.hasPie=function(e){return e=e[0],e._private.hasPie};fn.hasStripe=function(e){return e=e[0],e._private.hasStripe};fn.drawPie=function(e,t,r,a){t=t[0],a=a||t.position();var i=t.cy().style(),n=t.pstyle("pie-size"),s=t.pstyle("pie-hole"),o=t.pstyle("pie-start-angle").pfValue,l=a.x,u=a.y,h=t.width(),d=t.height(),f=Math.min(h,d)/2,p,y=0,v=this.usePaths();if(v&&(l=0,u=0),n.units==="%"?f=f*n.pfValue:n.pfValue!==void 0&&(f=n.pfValue/2),s.units==="%"?p=f*s.pfValue:s.pfValue!==void 0&&(p=s.pfValue/2),!(p>=f))for(var m=1;m<=i.pieBackgroundN;m++){var x=t.pstyle("pie-"+m+"-background-size").value,b=t.pstyle("pie-"+m+"-background-color").value,w=t.pstyle("pie-"+m+"-background-opacity").value*r,C=x/100;C+y>1&&(C=1-y);var T=1.5*Math.PI+2*Math.PI*y;T+=o;var k=2*Math.PI*C,S=T+k;x===0||y>=1||y+C>1||(p===0?(e.beginPath(),e.moveTo(l,u),e.arc(l,u,f,T,S),e.closePath()):(e.beginPath(),e.arc(l,u,f,T,S),e.arc(l,u,p,S,T,!0),e.closePath()),this.colorFillStyle(e,b[0],b[1],b[2],w),e.fill(),y+=C)}};fn.drawStripe=function(e,t,r,a){t=t[0],a=a||t.position();var i=t.cy().style(),n=a.x,s=a.y,o=t.width(),l=t.height(),u=0,h=this.usePaths();e.save();var d=t.pstyle("stripe-direction").value,f=t.pstyle("stripe-size");switch(d){case"vertical":break;case"righward":e.rotate(-Math.PI/2);break}var p=o,y=l;f.units==="%"?(p=p*f.pfValue,y=y*f.pfValue):f.pfValue!==void 0&&(p=f.pfValue,y=f.pfValue),h&&(n=0,s=0),s-=p/2,n-=y/2;for(var v=1;v<=i.stripeBackgroundN;v++){var m=t.pstyle("stripe-"+v+"-background-size").value,x=t.pstyle("stripe-"+v+"-background-color").value,b=t.pstyle("stripe-"+v+"-background-opacity").value*r,w=m/100;w+u>1&&(w=1-u),!(m===0||u>=1||u+w>1)&&(e.beginPath(),e.rect(n,s+y*u,p,y*w),e.closePath(),this.colorFillStyle(e,x[0],x[1],x[2],b),e.fill(),u+=w)}e.restore()};var ea={},Hz=100;ea.getPixelRatio=function(){var e=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var t=this.cy.window(),r=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(t.devicePixelRatio||1)/r};ea.paintCache=function(e){for(var t=this.paintCaches=this.paintCaches||[],r=!0,a,i=0;i<t.length;i++)if(a=t[i],a.context===e){r=!1;break}return r&&(a={context:e},t.push(a)),a};ea.createGradientStyleFor=function(e,t,r,a,i){var n,s=this.usePaths(),o=r.pstyle(t+"-gradient-stop-colors").value,l=r.pstyle(t+"-gradient-stop-positions").pfValue;if(a==="radial-gradient")if(r.isEdge()){var u=r.sourceEndpoint(),h=r.targetEndpoint(),d=r.midpoint(),f=Hn(u,d),p=Hn(h,d);n=e.createRadialGradient(d.x,d.y,0,d.x,d.y,Math.max(f,p))}else{var y=s?{x:0,y:0}:r.position(),v=r.paddedWidth(),m=r.paddedHeight();n=e.createRadialGradient(y.x,y.y,0,y.x,y.y,Math.max(v,m))}else if(r.isEdge()){var x=r.sourceEndpoint(),b=r.targetEndpoint();n=e.createLinearGradient(x.x,x.y,b.x,b.y)}else{var w=s?{x:0,y:0}:r.position(),C=r.paddedWidth(),T=r.paddedHeight(),k=C/2,S=T/2,L=r.pstyle("background-gradient-direction").value;switch(L){case"to-bottom":n=e.createLinearGradient(w.x,w.y-S,w.x,w.y+S);break;case"to-top":n=e.createLinearGradient(w.x,w.y+S,w.x,w.y-S);break;case"to-left":n=e.createLinearGradient(w.x+k,w.y,w.x-k,w.y);break;case"to-right":n=e.createLinearGradient(w.x-k,w.y,w.x+k,w.y);break;case"to-bottom-right":case"to-right-bottom":n=e.createLinearGradient(w.x-k,w.y-S,w.x+k,w.y+S);break;case"to-top-right":case"to-right-top":n=e.createLinearGradient(w.x-k,w.y+S,w.x+k,w.y-S);break;case"to-bottom-left":case"to-left-bottom":n=e.createLinearGradient(w.x+k,w.y-S,w.x-k,w.y+S);break;case"to-top-left":case"to-left-top":n=e.createLinearGradient(w.x+k,w.y+S,w.x-k,w.y-S);break}}if(!n)return null;for(var _=l.length===o.length,A=o.length,E=0;E<A;E++)n.addColorStop(_?l[E]:E/(A-1),"rgba("+o[E][0]+","+o[E][1]+","+o[E][2]+","+i+")");return n};ea.gradientFillStyle=function(e,t,r,a){var i=this.createGradientStyleFor(e,"background",t,r,a);if(!i)return null;e.fillStyle=i};ea.colorFillStyle=function(e,t,r,a,i){e.fillStyle="rgba("+t+","+r+","+a+","+i+")"};ea.eleFillStyle=function(e,t,r){var a=t.pstyle("background-fill").value;if(a==="linear-gradient"||a==="radial-gradient")this.gradientFillStyle(e,t,a,r);else{var i=t.pstyle("background-color").value;this.colorFillStyle(e,i[0],i[1],i[2],r)}};ea.gradientStrokeStyle=function(e,t,r,a){var i=this.createGradientStyleFor(e,"line",t,r,a);if(!i)return null;e.strokeStyle=i};ea.colorStrokeStyle=function(e,t,r,a,i){e.strokeStyle="rgba("+t+","+r+","+a+","+i+")"};ea.eleStrokeStyle=function(e,t,r){var a=t.pstyle("line-fill").value;if(a==="linear-gradient"||a==="radial-gradient")this.gradientStrokeStyle(e,t,a,r);else{var i=t.pstyle("line-color").value;this.colorStrokeStyle(e,i[0],i[1],i[2],r)}};ea.matchCanvasSize=function(e){var t=this,r=t.data,a=t.findContainerClientCoords(),i=a[2],n=a[3],s=t.getPixelRatio(),o=t.motionBlurPxRatio;(e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]||e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG])&&(s=o);var l=i*s,u=n*s,h;if(!(l===t.canvasWidth&&u===t.canvasHeight)){t.fontCaches=null;var d=r.canvasContainer;d.style.width=i+"px",d.style.height=n+"px";for(var f=0;f<t.CANVAS_LAYERS;f++)h=r.canvases[f],h.width=l,h.height=u,h.style.width=i+"px",h.style.height=n+"px";for(var f=0;f<t.BUFFER_COUNT;f++)h=r.bufferCanvases[f],h.width=l,h.height=u,h.style.width=i+"px",h.style.height=n+"px";t.textureMult=1,s<=1&&(h=r.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,h.width=l*t.textureMult,h.height=u*t.textureMult),t.canvasWidth=l,t.canvasHeight=u,t.pixelRatio=s}};ea.renderTo=function(e,t,r,a){this.render({forcedContext:e,forcedZoom:t,forcedPan:r,drawAllLayers:!0,forcedPxRatio:a})};ea.clearCanvas=function(){var e=this,t=e.data;function r(a){a.clearRect(0,0,e.canvasWidth,e.canvasHeight)}r(t.contexts[e.NODE]),r(t.contexts[e.DRAG])};ea.render=function(e){var t=this;e=e||DT();var r=t.cy,a=e.forcedContext,i=e.drawAllLayers,n=e.drawOnlyNodeLayer,s=e.forcedZoom,o=e.forcedPan,l=e.forcedPxRatio===void 0?this.getPixelRatio():e.forcedPxRatio,u=t.data,h=u.canvasNeedsRedraw,d=t.textureOnViewport&&!a&&(t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming),f=e.motionBlur!==void 0?e.motionBlur:t.motionBlur,p=t.motionBlurPxRatio,y=r.hasCompoundNodes(),v=t.hoverData.draggingEles,m=!!(t.hoverData.selecting||t.touchData.selecting);f=f&&!a&&t.motionBlurEnabled&&!m;var x=f;a||(t.prevPxRatio!==l&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container),t.redrawHint("eles",!0),t.redrawHint("drag",!0)),t.prevPxRatio=l),!a&&t.motionBlurTimeout&&clearTimeout(t.motionBlurTimeout),f&&(t.mbFrames==null&&(t.mbFrames=0),t.mbFrames++,t.mbFrames<3&&(x=!1),t.mbFrames>t.minMbLowQualFrames&&(t.motionBlurPxRatio=t.mbPxRBlurry)),t.clearingMotionBlur&&(t.motionBlurPxRatio=1),t.textureDrawLastFrame&&!d&&(h[t.NODE]=!0,h[t.SELECT_BOX]=!0);var b=r.style(),w=r.zoom(),C=s!==void 0?s:w,T=r.pan(),k={x:T.x,y:T.y},S={zoom:w,pan:{x:T.x,y:T.y}},L=t.prevViewport,_=L===void 0||S.zoom!==L.zoom||S.pan.x!==L.pan.x||S.pan.y!==L.pan.y;!_&&!(v&&!y)&&(t.motionBlurPxRatio=1),o&&(k=o),C*=l,k.x*=l,k.y*=l;var A=t.getCachedZSortedEles();function E(ut,Q,K,j,Y){var st=ut.globalCompositeOperation;ut.globalCompositeOperation="destination-out",t.colorFillStyle(ut,255,255,255,t.motionBlurTransparency),ut.fillRect(Q,K,j,Y),ut.globalCompositeOperation=st}function D(ut,Q){var K,j,Y,st;!t.clearingMotionBlur&&(ut===u.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]||ut===u.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG])?(K={x:T.x*p,y:T.y*p},j=w*p,Y=t.canvasWidth*p,st=t.canvasHeight*p):(K=k,j=C,Y=t.canvasWidth,st=t.canvasHeight),ut.setTransform(1,0,0,1,0,0),Q==="motionBlur"?E(ut,0,0,Y,st):!a&&(Q===void 0||Q)&&ut.clearRect(0,0,Y,st),i||(ut.translate(K.x,K.y),ut.scale(j,j)),o&&ut.translate(o.x,o.y),s&&ut.scale(s,s)}if(d||(t.textureDrawLastFrame=!1),d){if(t.textureDrawLastFrame=!0,!t.textureCache){t.textureCache={},t.textureCache.bb=r.mutableElements().boundingBox(),t.textureCache.texture=t.data.bufferCanvases[t.TEXTURE_BUFFER];var R=t.data.bufferContexts[t.TEXTURE_BUFFER];R.setTransform(1,0,0,1,0,0),R.clearRect(0,0,t.canvasWidth*t.textureMult,t.canvasHeight*t.textureMult),t.render({forcedContext:R,drawOnlyNodeLayer:!0,forcedPxRatio:l*t.textureMult});var S=t.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:t.canvasWidth,height:t.canvasHeight};S.mpan={x:(0-S.pan.x)/S.zoom,y:(0-S.pan.y)/S.zoom}}h[t.DRAG]=!1,h[t.NODE]=!1;var O=u.contexts[t.NODE],P=t.textureCache.texture,S=t.textureCache.viewport;O.setTransform(1,0,0,1,0,0),f?E(O,0,0,S.width,S.height):O.clearRect(0,0,S.width,S.height);var $=b.core("outside-texture-bg-color").value,M=b.core("outside-texture-bg-opacity").value;t.colorFillStyle(O,$[0],$[1],$[2],M),O.fillRect(0,0,S.width,S.height);var w=r.zoom();D(O,!1),O.clearRect(S.mpan.x,S.mpan.y,S.width/S.zoom/l,S.height/S.zoom/l),O.drawImage(P,S.mpan.x,S.mpan.y,S.width/S.zoom/l,S.height/S.zoom/l)}else t.textureOnViewport&&!a&&(t.textureCache=null);var I=r.extent(),F=t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming||t.hoverData.draggingEles||t.cy.animated(),V=t.hideEdgesOnViewport&&F,N=[];if(N[t.NODE]=!h[t.NODE]&&f&&!t.clearedForMotionBlur[t.NODE]||t.clearingMotionBlur,N[t.NODE]&&(t.clearedForMotionBlur[t.NODE]=!0),N[t.DRAG]=!h[t.DRAG]&&f&&!t.clearedForMotionBlur[t.DRAG]||t.clearingMotionBlur,N[t.DRAG]&&(t.clearedForMotionBlur[t.DRAG]=!0),h[t.NODE]||i||n||N[t.NODE]){var q=f&&!N[t.NODE]&&p!==1,O=a||(q?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]:u.contexts[t.NODE]),U=f&&!q?"motionBlur":void 0;D(O,U),V?t.drawCachedNodes(O,A.nondrag,l,I):t.drawLayeredElements(O,A.nondrag,l,I),t.debug&&t.drawDebugPoints(O,A.nondrag),!i&&!f&&(h[t.NODE]=!1)}if(!n&&(h[t.DRAG]||i||N[t.DRAG])){var q=f&&!N[t.DRAG]&&p!==1,O=a||(q?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]:u.contexts[t.DRAG]);D(O,f&&!q?"motionBlur":void 0),V?t.drawCachedNodes(O,A.drag,l,I):t.drawCachedElements(O,A.drag,l,I),t.debug&&t.drawDebugPoints(O,A.drag),!i&&!f&&(h[t.DRAG]=!1)}if(this.drawSelectionRectangle(e,D),f&&p!==1){var X=u.contexts[t.NODE],lt=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE],J=u.contexts[t.DRAG],ct=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG],yt=function(Q,K,j){Q.setTransform(1,0,0,1,0,0),j||!x?Q.clearRect(0,0,t.canvasWidth,t.canvasHeight):E(Q,0,0,t.canvasWidth,t.canvasHeight);var Y=p;Q.drawImage(K,0,0,t.canvasWidth*Y,t.canvasHeight*Y,0,0,t.canvasWidth,t.canvasHeight)};(h[t.NODE]||N[t.NODE])&&(yt(X,lt,N[t.NODE]),h[t.NODE]=!1),(h[t.DRAG]||N[t.DRAG])&&(yt(J,ct,N[t.DRAG]),h[t.DRAG]=!1)}t.prevViewport=S,t.clearingMotionBlur&&(t.clearingMotionBlur=!1,t.motionBlurCleared=!0,t.motionBlur=!0),f&&(t.motionBlurTimeout=setTimeout(function(){t.motionBlurTimeout=null,t.clearedForMotionBlur[t.NODE]=!1,t.clearedForMotionBlur[t.DRAG]=!1,t.motionBlur=!1,t.clearingMotionBlur=!d,t.mbFrames=0,h[t.NODE]=!0,h[t.DRAG]=!0,t.redraw()},Hz)),a||r.emit("render")};var cl;ea.drawSelectionRectangle=function(e,t){var r=this,a=r.cy,i=r.data,n=a.style(),s=e.drawOnlyNodeLayer,o=e.drawAllLayers,l=i.canvasNeedsRedraw,u=e.forcedContext;if(r.showFps||!s&&l[r.SELECT_BOX]&&!o){var h=u||i.contexts[r.SELECT_BOX];if(t(h),r.selection[4]==1&&(r.hoverData.selecting||r.touchData.selecting)){var d=r.cy.zoom(),f=n.core("selection-box-border-width").value/d;h.lineWidth=f,h.fillStyle="rgba("+n.core("selection-box-color").value[0]+","+n.core("selection-box-color").value[1]+","+n.core("selection-box-color").value[2]+","+n.core("selection-box-opacity").value+")",h.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),f>0&&(h.strokeStyle="rgba("+n.core("selection-box-border-color").value[0]+","+n.core("selection-box-border-color").value[1]+","+n.core("selection-box-border-color").value[2]+","+n.core("selection-box-opacity").value+")",h.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]))}if(i.bgActivePosistion&&!r.hoverData.selecting){var d=r.cy.zoom(),p=i.bgActivePosistion;h.fillStyle="rgba("+n.core("active-bg-color").value[0]+","+n.core("active-bg-color").value[1]+","+n.core("active-bg-color").value[2]+","+n.core("active-bg-opacity").value+")",h.beginPath(),h.arc(p.x,p.y,n.core("active-bg-size").pfValue/d,0,2*Math.PI),h.fill()}var y=r.lastRedrawTime;if(r.showFps&&y){y=Math.round(y);var v=Math.round(1e3/y),m="1 frame = "+y+" ms = "+v+" fps";if(h.setTransform(1,0,0,1,0,0),h.fillStyle="rgba(255, 0, 0, 0.75)",h.strokeStyle="rgba(255, 0, 0, 0.75)",h.font="30px Arial",!cl){var x=h.measureText(m);cl=x.actualBoundingBoxAscent}h.fillText(m,0,cl);var b=60;h.strokeRect(0,cl+10,250,20),h.fillRect(0,cl+10,250*Math.min(v/b,1),20)}o||(l[r.SELECT_BOX]=!1)}};function C2(e,t,r){var a=e.createShader(t);if(e.shaderSource(a,r),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw new Error(e.getShaderInfoLog(a));return a}function Yz(e,t,r){var a=C2(e,e.VERTEX_SHADER,t),i=C2(e,e.FRAGMENT_SHADER,r),n=e.createProgram();if(e.attachShader(n,a),e.attachShader(n,i),e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS))throw new Error("Could not initialize shaders");return n}function Uz(e,t,r){r===void 0&&(r=t);var a=e.makeOffscreenCanvas(t,r),i=a.context=a.getContext("2d");return a.clear=function(){return i.clearRect(0,0,a.width,a.height)},a.clear(),a}function R1(e){var t=e.pixelRatio,r=e.cy.zoom(),a=e.cy.pan();return{zoom:r*t,pan:{x:a.x*t,y:a.y*t}}}function Xz(e){var t=e.pixelRatio,r=e.cy.zoom();return r*t}function Kz(e,t,r,a,i){var n=a*r+t.x,s=i*r+t.y;return s=Math.round(e.canvasHeight-s),[n,s]}function jz(e){return e.pstyle("background-fill").value!=="solid"||e.pstyle("background-image").strValue!=="none"?!1:e.pstyle("border-width").value===0||e.pstyle("border-opacity").value===0?!0:e.pstyle("border-style").value==="solid"}function Qz(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function wn(e,t,r){var a=e[0]/255,i=e[1]/255,n=e[2]/255,s=t,o=r||new Array(4);return o[0]=a*s,o[1]=i*s,o[2]=n*s,o[3]=s,o}function us(e,t){var r=t||new Array(4);return r[0]=(e>>0&255)/255,r[1]=(e>>8&255)/255,r[2]=(e>>16&255)/255,r[3]=(e>>24&255)/255,r}function Zz(e){return e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24)}function Jz(e,t){var r=e.createTexture();return r.buffer=function(a){e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null)},r.deleteTexture=function(){e.deleteTexture(r)},r}function zC(e,t){switch(t){case"float":return[1,e.FLOAT,4];case"vec2":return[2,e.FLOAT,4];case"vec3":return[3,e.FLOAT,4];case"vec4":return[4,e.FLOAT,4];case"int":return[1,e.INT,4];case"ivec2":return[2,e.INT,4]}}function qC(e,t,r){switch(t){case e.FLOAT:return new Float32Array(r);case e.INT:return new Int32Array(r)}}function tq(e,t,r,a,i,n){switch(t){case e.FLOAT:return new Float32Array(r.buffer,n*a,i);case e.INT:return new Int32Array(r.buffer,n*a,i)}}function eq(e,t,r,a){var i=zC(e,t),n=ur(i,2),s=n[0],o=n[1],l=qC(e,o,a),u=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferData(e.ARRAY_BUFFER,l,e.STATIC_DRAW),o===e.FLOAT?e.vertexAttribPointer(r,s,o,!1,0,0):o===e.INT&&e.vertexAttribIPointer(r,s,o,0,0),e.enableVertexAttribArray(r),e.bindBuffer(e.ARRAY_BUFFER,null),u}function Qa(e,t,r,a){var i=zC(e,r),n=ur(i,3),s=n[0],o=n[1],l=n[2],u=qC(e,o,t*s),h=s*l,d=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,d),e.bufferData(e.ARRAY_BUFFER,t*h,e.DYNAMIC_DRAW),e.enableVertexAttribArray(a),o===e.FLOAT?e.vertexAttribPointer(a,s,o,!1,h,0):o===e.INT&&e.vertexAttribIPointer(a,s,o,h,0),e.vertexAttribDivisor(a,1),e.bindBuffer(e.ARRAY_BUFFER,null);for(var f=new Array(t),p=0;p<t;p++)f[p]=tq(e,o,u,h,s,p);return d.dataArray=u,d.stride=h,d.size=s,d.getView=function(y){return f[y]},d.setPoint=function(y,v,m){var x=f[y];x[0]=v,x[1]=m},d.bufferSubData=function(y){e.bindBuffer(e.ARRAY_BUFFER,d),y?e.bufferSubData(e.ARRAY_BUFFER,0,u,0,y*s):e.bufferSubData(e.ARRAY_BUFFER,0,u)},d}function rq(e,t,r){for(var a=9,i=new Float32Array(t*a),n=new Array(t),s=0;s<t;s++){var o=s*a*4;n[s]=new Float32Array(i.buffer,o,a)}var l=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferData(e.ARRAY_BUFFER,i.byteLength,e.DYNAMIC_DRAW);for(var u=0;u<3;u++){var h=r+u;e.enableVertexAttribArray(h),e.vertexAttribPointer(h,3,e.FLOAT,!1,3*12,u*12),e.vertexAttribDivisor(h,1)}return e.bindBuffer(e.ARRAY_BUFFER,null),l.getMatrixView=function(d){return n[d]},l.setData=function(d,f){n[f].set(d,0)},l.bufferSubData=function(){e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferSubData(e.ARRAY_BUFFER,0,i)},l}function aq(e){var t=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,t);var r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),e.bindFramebuffer(e.FRAMEBUFFER,null),t.setFramebufferAttachmentSizes=function(a,i){e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,a,i,0,e.RGBA,e.UNSIGNED_BYTE,null)},t}var S2=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function op(){var e=new S2(9);return S2!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function E2(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function iq(e,t,r){var a=t[0],i=t[1],n=t[2],s=t[3],o=t[4],l=t[5],u=t[6],h=t[7],d=t[8],f=r[0],p=r[1],y=r[2],v=r[3],m=r[4],x=r[5],b=r[6],w=r[7],C=r[8];return e[0]=f*a+p*s+y*u,e[1]=f*i+p*o+y*h,e[2]=f*n+p*l+y*d,e[3]=v*a+m*s+x*u,e[4]=v*i+m*o+x*h,e[5]=v*n+m*l+x*d,e[6]=b*a+w*s+C*u,e[7]=b*i+w*o+C*h,e[8]=b*n+w*l+C*d,e}function Du(e,t,r){var a=t[0],i=t[1],n=t[2],s=t[3],o=t[4],l=t[5],u=t[6],h=t[7],d=t[8],f=r[0],p=r[1];return e[0]=a,e[1]=i,e[2]=n,e[3]=s,e[4]=o,e[5]=l,e[6]=f*a+p*s+u,e[7]=f*i+p*o+h,e[8]=f*n+p*l+d,e}function _2(e,t,r){var a=t[0],i=t[1],n=t[2],s=t[3],o=t[4],l=t[5],u=t[6],h=t[7],d=t[8],f=Math.sin(r),p=Math.cos(r);return e[0]=p*a+f*s,e[1]=p*i+f*o,e[2]=p*n+f*l,e[3]=p*s-f*a,e[4]=p*o-f*i,e[5]=p*l-f*n,e[6]=u,e[7]=h,e[8]=d,e}function Bg(e,t,r){var a=r[0],i=r[1];return e[0]=a*t[0],e[1]=a*t[1],e[2]=a*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function nq(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}var sq=function(){function e(t,r,a,i){un(this,e),this.debugID=Math.floor(Math.random()*1e4),this.r=t,this.texSize=r,this.texRows=a,this.texHeight=Math.floor(r/a),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=i(t,r,r),this.scratch=i(t,r,this.texHeight,"scratch")}return hn(e,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(r){var a=r.w,i=r.h,n=this.texHeight,s=this.texSize,o=n/i,l=a*o,u=i*o;return l>s&&(o=s/a,l=a*o,u=i*o),{scale:o,texW:l,texH:u}}},{key:"draw",value:function(r,a,i){var n=this;if(this.locked)throw new Error("can't draw, atlas is locked");var s=this.texSize,o=this.texRows,l=this.texHeight,u=this.getScale(a),h=u.scale,d=u.texW,f=u.texH,p=function(w,C){if(i&&C){var T=C.context,k=w.x,S=w.row,L=k,_=l*S;T.save(),T.translate(L,_),T.scale(h,h),i(T,a),T.restore()}},y=[null,null],v=function(){p(n.freePointer,n.canvas),y[0]={x:n.freePointer.x,y:n.freePointer.row*l,w:d,h:f},y[1]={x:n.freePointer.x+d,y:n.freePointer.row*l,w:0,h:f},n.freePointer.x+=d,n.freePointer.x==s&&(n.freePointer.x=0,n.freePointer.row++)},m=function(){var w=n.scratch,C=n.canvas;w.clear(),p({x:0,row:0},w);var T=s-n.freePointer.x,k=d-T,S=l;{var L=n.freePointer.x,_=n.freePointer.row*l,A=T;C.context.drawImage(w,0,0,A,S,L,_,A,S),y[0]={x:L,y:_,w:A,h:f}}{var E=T,D=(n.freePointer.row+1)*l,R=k;C&&C.context.drawImage(w,E,0,R,S,0,D,R,S),y[1]={x:0,y:D,w:R,h:f}}n.freePointer.x=k,n.freePointer.row++},x=function(){n.freePointer.x=0,n.freePointer.row++};if(this.freePointer.x+d<=s)v();else{if(this.freePointer.row>=o-1)return!1;this.freePointer.x===s?(x(),v()):this.enableWrapping?m():(x(),v())}return this.keyToLocation.set(r,y),this.needsBuffer=!0,y}},{key:"getOffsets",value:function(r){return this.keyToLocation.get(r)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(r){if(this.locked)return!1;var a=this.texSize,i=this.texRows,n=this.getScale(r),s=n.texW;return this.freePointer.x+s>a?this.freePointer.row<i-1:!0}},{key:"bufferIfNeeded",value:function(r){this.texture||(this.texture=Jz(r,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),oq=function(){function e(t,r,a,i){un(this,e),this.r=t,this.texSize=r,this.texRows=a,this.createTextureCanvas=i,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return hn(e,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var r=this.r,a=this.texSize,i=this.texRows,n=this.createTextureCanvas;return new sq(r,a,i,n)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var r=this.r,a=this.texSize,i=this.texRows,n=this.createTextureCanvas,s=Math.floor(a/i);this.scratch=n(r,a,s,"scratch")}return this.scratch}},{key:"draw",value:function(r,a,i){var n=this.styleKeyToAtlas.get(r);return n||(n=this.atlases[this.atlases.length-1],(!n||!n.canFit(a))&&(n&&n.lock(),n=this._createAtlas(),this.atlases.push(n)),n.draw(r,a,i),this.styleKeyToAtlas.set(r,n)),n}},{key:"getAtlas",value:function(r){return this.styleKeyToAtlas.get(r)}},{key:"hasAtlas",value:function(r){return this.styleKeyToAtlas.has(r)}},{key:"markKeyForGC",value:function(r){this.markedKeys.add(r)}},{key:"gc",value:function(){var r=this,a=this.markedKeys;if(a.size===0){console.log("nothing to garbage collect");return}var i=[],n=new Map,s=null,o=ca(this.atlases),l;try{var u=function(){var d=l.value,f=d.getKeys(),p=lq(a,f);if(p.size===0)return i.push(d),f.forEach(function(T){return n.set(T,d)}),1;s||(s=r._createAtlas(),i.push(s));var y=ca(f),v;try{for(y.s();!(v=y.n()).done;){var m=v.value;if(!p.has(m)){var x=d.getOffsets(m),b=ur(x,2),w=b[0],C=b[1];s.canFit({w:w.w+C.w,h:w.h})||(s.lock(),s=r._createAtlas(),i.push(s)),d.canvas&&(r._copyTextureToNewAtlas(m,d,s),n.set(m,s))}}}catch(T){y.e(T)}finally{y.f()}d.dispose()};for(o.s();!(l=o.n()).done;)u()}catch(h){o.e(h)}finally{o.f()}this.atlases=i,this.styleKeyToAtlas=n,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(r,a,i){var n=a.getOffsets(r),s=ur(n,2),o=s[0],l=s[1];if(l.w===0)i.draw(r,o,function(f){f.drawImage(a.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h)});else{var u=this._getScratchCanvas();u.clear(),u.context.drawImage(a.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h),u.context.drawImage(a.canvas,l.x,l.y,l.w,l.h,o.w,0,l.w,l.h);var h=o.w+l.w,d=o.h;i.draw(r,{w:h,h:d},function(f){f.drawImage(u,0,0,h,d,0,0,h,d)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();function lq(e,t){return e.intersection?e.intersection(t):new Set(oh(e).filter(function(r){return t.has(r)}))}var cq=function(){function e(t,r){un(this,e),this.r=t,this.globalOptions=r,this.atlasSize=r.webglTexSize,this.maxAtlasesPerBatch=r.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return hn(e,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(r,a){var i=this.globalOptions,n=i.webglTexSize,s=i.createTextureCanvas,o=a.texRows,l=this._cacheScratchCanvas(s),u=new oq(this.r,n,o,l);this.collections.set(r,u)}},{key:"addRenderType",value:function(r,a){var i=a.collection;if(!this.collections.has(i))throw new Error("invalid atlas collection name '".concat(i,"'"));var n=this.collections.get(i),s=pe({type:r,atlasCollection:n},a);this.renderTypes.set(r,s)}},{key:"getRenderTypeOpts",value:function(r){return this.renderTypes.get(r)}},{key:"getAtlasCollection",value:function(r){return this.collections.get(r)}},{key:"_cacheScratchCanvas",value:function(r){var a=-1,i=-1,n=null;return function(s,o,l,u){return u?((!n||o!=a||l!=i)&&(a=o,i=l,n=r(s,o,l)),n):r(s,o,l)}}},{key:"_key",value:function(r,a){return"".concat(r,"-").concat(a)}},{key:"invalidate",value:function(r){var a=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=i.forceRedraw,s=n===void 0?!1:n,o=i.filterEle,l=o===void 0?function(){return!0}:o,u=i.filterType,h=u===void 0?function(){return!0}:u,d=!1,f=!1,p=ca(r),y;try{for(p.s();!(y=p.n()).done;){var v=y.value;if(l(v)){var m=ca(this.renderTypes.values()),x;try{var b=function(){var C=x.value,T=C.type;if(h(T)){var k=a.collections.get(C.collection),S=C.getKey(v),L=Array.isArray(S)?S:[S];if(s)L.forEach(function(D){return k.markKeyForGC(D)}),f=!0;else{var _=C.getID?C.getID(v):v.id(),A=a._key(T,_),E=a.typeAndIdToKey.get(A);E!==void 0&&!Qz(L,E)&&(d=!0,a.typeAndIdToKey.delete(A),E.forEach(function(D){return k.markKeyForGC(D)}))}}};for(m.s();!(x=m.n()).done;)b()}catch(w){m.e(w)}finally{m.f()}}}}catch(w){p.e(w)}finally{p.f()}return f&&(this.gc(),d=!1),d}},{key:"gc",value:function(){var r=ca(this.collections.values()),a;try{for(r.s();!(a=r.n()).done;){var i=a.value;i.gc()}}catch(n){r.e(n)}finally{r.f()}}},{key:"getOrCreateAtlas",value:function(r,a,i,n){var s=this.renderTypes.get(a),o=this.collections.get(s.collection),l=!1,u=o.draw(n,i,function(f){s.drawClipped?(f.save(),f.beginPath(),f.rect(0,0,i.w,i.h),f.clip(),s.drawElement(f,r,i,!0,!0),f.restore()):s.drawElement(f,r,i,!0,!0),l=!0});if(l){var h=s.getID?s.getID(r):r.id(),d=this._key(a,h);this.typeAndIdToKey.has(d)?this.typeAndIdToKey.get(d).push(n):this.typeAndIdToKey.set(d,[n])}return u}},{key:"getAtlasInfo",value:function(r,a){var i=this,n=this.renderTypes.get(a),s=n.getKey(r),o=Array.isArray(s)?s:[s];return o.map(function(l){var u=n.getBoundingBox(r,l),h=i.getOrCreateAtlas(r,a,u,l),d=h.getOffsets(l),f=ur(d,2),p=f[0],y=f[1];return{atlas:h,tex:p,tex1:p,tex2:y,bb:u}})}},{key:"getDebugInfo",value:function(){var r=[],a=ca(this.collections),i;try{for(a.s();!(i=a.n()).done;){var n=ur(i.value,2),s=n[0],o=n[1],l=o.getCounts(),u=l.keyCount,h=l.atlasCount;r.push({type:s,keyCount:u,atlasCount:h})}}catch(d){a.e(d)}finally{a.f()}return r}}])}(),uq=function(){function e(t){un(this,e),this.globalOptions=t,this.atlasSize=t.webglTexSize,this.maxAtlasesPerBatch=t.webglTexPerBatch,this.batchAtlases=[]}return hn(e,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(r,a){return a})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(r){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(r):!0}},{key:"getAtlasIndexForBatch",value:function(r){var a=this.batchAtlases.indexOf(r);if(a<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(r),a=this.batchAtlases.length-1}return a}}])}(),hq=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,dq=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,fq=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,pq=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,Pl={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},xh={IGNORE:1,USE_BB:2},lp=0,A2=1,L2=2,cp=3,hs=4,eu=5,ul=6,hl=7,gq=function(){function e(t,r,a){un(this,e),this.r=t,this.gl=r,this.maxInstances=a.webglBatchSize,this.atlasSize=a.webglTexSize,this.bgColor=a.bgColor,this.debug=a.webglDebug,this.batchDebugInfo=[],a.enableWrapping=!0,a.createTextureCanvas=Uz,this.atlasManager=new cq(t,a),this.batchManager=new uq(a),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(Pl.SCREEN),this.pickingProgram=this._createShaderProgram(Pl.PICKING),this.vao=this._createVAO()}return hn(e,[{key:"addAtlasCollection",value:function(r,a){this.atlasManager.addAtlasCollection(r,a)}},{key:"addTextureAtlasRenderType",value:function(r,a){this.atlasManager.addRenderType(r,a)}},{key:"addSimpleShapeRenderType",value:function(r,a){this.simpleShapeOptions.set(r,a)}},{key:"invalidate",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.type,n=this.atlasManager;return i?n.invalidate(r,{filterType:function(o){return o===i},forceRedraw:!0}):n.invalidate(r)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(r){var a=this.gl,i=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(lp,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(hs," || aVertType == ").concat(hl,` 
             || aVertType == `).concat(eu," || aVertType == ").concat(ul,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(A2,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(L2,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(cp,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),n=this.batchManager.getIndexArray(),s=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(n.map(function(u){return"uniform sampler2D uTexture".concat(u,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(hq,`
      `).concat(dq,`
      `).concat(fq,`
      `).concat(pq,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(lp,`) {
          // look up the texel from the texture unit
          `).concat(n.map(function(u){return"if(vAtlasId == ".concat(u,") outColor = texture(uTexture").concat(u,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(cp,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(hs,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(hs," || vVertType == ").concat(hl,` 
          || vVertType == `).concat(eu," || vVertType == ").concat(ul,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(hs,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(hl,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(hl,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(r.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),o=Yz(a,i,s);o.aPosition=a.getAttribLocation(o,"aPosition"),o.aIndex=a.getAttribLocation(o,"aIndex"),o.aVertType=a.getAttribLocation(o,"aVertType"),o.aTransform=a.getAttribLocation(o,"aTransform"),o.aAtlasId=a.getAttribLocation(o,"aAtlasId"),o.aTex=a.getAttribLocation(o,"aTex"),o.aPointAPointB=a.getAttribLocation(o,"aPointAPointB"),o.aPointCPointD=a.getAttribLocation(o,"aPointCPointD"),o.aLineWidth=a.getAttribLocation(o,"aLineWidth"),o.aColor=a.getAttribLocation(o,"aColor"),o.aCornerRadius=a.getAttribLocation(o,"aCornerRadius"),o.aBorderColor=a.getAttribLocation(o,"aBorderColor"),o.uPanZoomMatrix=a.getUniformLocation(o,"uPanZoomMatrix"),o.uAtlasSize=a.getUniformLocation(o,"uAtlasSize"),o.uBGColor=a.getUniformLocation(o,"uBGColor"),o.uZoom=a.getUniformLocation(o,"uZoom"),o.uTextures=[];for(var l=0;l<this.batchManager.getMaxAtlasesPerBatch();l++)o.uTextures.push(a.getUniformLocation(o,"uTexture".concat(l)));return o}},{key:"_createVAO",value:function(){var r=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=r.length/2;var a=this.maxInstances,i=this.gl,n=this.program,s=i.createVertexArray();return i.bindVertexArray(s),eq(i,"vec2",n.aPosition,r),this.transformBuffer=rq(i,a,n.aTransform),this.indexBuffer=Qa(i,a,"vec4",n.aIndex),this.vertTypeBuffer=Qa(i,a,"int",n.aVertType),this.atlasIdBuffer=Qa(i,a,"int",n.aAtlasId),this.texBuffer=Qa(i,a,"vec4",n.aTex),this.pointAPointBBuffer=Qa(i,a,"vec4",n.aPointAPointB),this.pointCPointDBuffer=Qa(i,a,"vec4",n.aPointCPointD),this.lineWidthBuffer=Qa(i,a,"vec2",n.aLineWidth),this.colorBuffer=Qa(i,a,"vec4",n.aColor),this.cornerRadiusBuffer=Qa(i,a,"vec4",n.aCornerRadius),this.borderColorBuffer=Qa(i,a,"vec4",n.aBorderColor),i.bindVertexArray(null),s}},{key:"buffers",get:function(){var r=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(a){return a.endsWith("Buffer")}).map(function(a){return r[a]})),this._buffers}},{key:"startFrame",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pl.SCREEN;this.panZoomMatrix=r,this.renderTarget=a,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(r,a){return r.visible()?a&&a.isVisible?a.isVisible(r):!0:!1}},{key:"drawTexture",value:function(r,a,i){var n=this.atlasManager,s=this.batchManager,o=n.getRenderTypeOpts(i);if(this._isVisible(r,o)){if(this.renderTarget.picking&&o.getTexPickingMode){var l=o.getTexPickingMode(r);if(l===xh.IGNORE)return;if(l==xh.USE_BB){this.drawPickingRectangle(r,a,i);return}}var u=n.getAtlasInfo(r,i),h=ca(u),d;try{for(h.s();!(d=h.n()).done;){var f=d.value,p=f.atlas,y=f.tex1,v=f.tex2;s.canAddToCurrentBatch(p)||this.endBatch();for(var m=s.getAtlasIndexForBatch(p),x=0,b=[[y,!0],[v,!1]];x<b.length;x++){var w=ur(b[x],2),C=w[0],T=w[1];if(C.w!=0){var k=this.instanceCount;this.vertTypeBuffer.getView(k)[0]=lp;var S=this.indexBuffer.getView(k);us(a,S);var L=this.atlasIdBuffer.getView(k);L[0]=m;var _=this.texBuffer.getView(k);_[0]=C.x,_[1]=C.y,_[2]=C.w,_[3]=C.h;var A=this.transformBuffer.getMatrixView(k);this.setTransformMatrix(r,A,o,f,T),this.instanceCount++,T||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(E){h.e(E)}finally{h.f()}}}},{key:"setTransformMatrix",value:function(r,a,i,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=0;if(i.shapeProps&&i.shapeProps.padding&&(o=r.pstyle(i.shapeProps.padding).pfValue),n){var l=n.bb,u=n.tex1,h=n.tex2,d=u.w/(u.w+h.w);s||(d=1-d);var f=this._getAdjustedBB(l,o,s,d);this._applyTransformMatrix(a,f,i,r)}else{var p=i.getBoundingBox(r),y=this._getAdjustedBB(p,o,!0,1);this._applyTransformMatrix(a,y,i,r)}}},{key:"_applyTransformMatrix",value:function(r,a,i,n){var s,o;E2(r);var l=i.getRotation?i.getRotation(n):0;if(l!==0){var u=i.getRotationPoint(n),h=u.x,d=u.y;Du(r,r,[h,d]),_2(r,r,l);var f=i.getRotationOffset(n);s=f.x+(a.xOffset||0),o=f.y+(a.yOffset||0)}else s=a.x1,o=a.y1;Du(r,r,[s,o]),Bg(r,r,[a.w,a.h])}},{key:"_getAdjustedBB",value:function(r,a,i,n){var s=r.x1,o=r.y1,l=r.w,u=r.h,h=r.yOffset;a&&(s-=a,o-=a,l+=2*a,u+=2*a);var d=0,f=l*n;return i&&n<1?l=f:!i&&n<1&&(d=l-f,s+=d,l=f),{x1:s,y1:o,w:l,h:u,xOffset:d,yOffset:h}}},{key:"drawPickingRectangle",value:function(r,a,i){var n=this.atlasManager.getRenderTypeOpts(i),s=this.instanceCount;this.vertTypeBuffer.getView(s)[0]=hs;var o=this.indexBuffer.getView(s);us(a,o);var l=this.colorBuffer.getView(s);wn([0,0,0],1,l);var u=this.transformBuffer.getMatrixView(s);this.setTransformMatrix(r,u,n),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(r,a,i){var n=this.simpleShapeOptions.get(i);if(this._isVisible(r,n)){var s=n.shapeProps,o=this._getVertTypeForShape(r,s.shape);if(o===void 0||n.isSimple&&!n.isSimple(r)){this.drawTexture(r,a,i);return}var l=this.instanceCount;if(this.vertTypeBuffer.getView(l)[0]=o,o===eu||o===ul){var u=n.getBoundingBox(r),h=this._getCornerRadius(r,s.radius,u),d=this.cornerRadiusBuffer.getView(l);d[0]=h,d[1]=h,d[2]=h,d[3]=h,o===ul&&(d[0]=0,d[2]=0)}var f=this.indexBuffer.getView(l);us(a,f);var p=r.pstyle(s.color).value,y=r.pstyle(s.opacity).value,v=this.colorBuffer.getView(l);wn(p,y,v);var m=this.lineWidthBuffer.getView(l);if(m[0]=0,m[1]=0,s.border){var x=r.pstyle("border-width").value;if(x>0){var b=r.pstyle("border-color").value,w=r.pstyle("border-opacity").value,C=this.borderColorBuffer.getView(l);wn(b,w,C);var T=r.pstyle("border-position").value;if(T==="inside")m[0]=0,m[1]=-x;else if(T==="outside")m[0]=x,m[1]=0;else{var k=x/2;m[0]=k,m[1]=-k}}}var S=this.transformBuffer.getMatrixView(l);this.setTransformMatrix(r,S,n),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(r,a){var i=r.pstyle(a).value;switch(i){case"rectangle":return hs;case"ellipse":return hl;case"roundrectangle":case"round-rectangle":return eu;case"bottom-round-rectangle":return ul;default:return}}},{key:"_getCornerRadius",value:function(r,a,i){var n=i.w,s=i.h;if(r.pstyle(a).value==="auto")return en(n,s);var o=r.pstyle(a).pfValue,l=n/2,u=s/2;return Math.min(o,u,l)}},{key:"drawEdgeArrow",value:function(r,a,i){if(r.visible()){var n=r._private.rscratch,s,o,l;if(i==="source"?(s=n.arrowStartX,o=n.arrowStartY,l=n.srcArrowAngle):(s=n.arrowEndX,o=n.arrowEndY,l=n.tgtArrowAngle),!(isNaN(s)||s==null||isNaN(o)||o==null||isNaN(l)||l==null)){var u=r.pstyle(i+"-arrow-shape").value;if(u!=="none"){var h=r.pstyle(i+"-arrow-color").value,d=r.pstyle("opacity").value,f=r.pstyle("line-opacity").value,p=d*f,y=r.pstyle("width").pfValue,v=r.pstyle("arrow-scale").value,m=this.r.getArrowWidth(y,v),x=this.instanceCount,b=this.transformBuffer.getMatrixView(x);E2(b),Du(b,b,[s,o]),Bg(b,b,[m,m]),_2(b,b,l),this.vertTypeBuffer.getView(x)[0]=cp;var w=this.indexBuffer.getView(x);us(a,w);var C=this.colorBuffer.getView(x);wn(h,p,C),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(r,a){if(r.visible()){var i=this._getEdgePoints(r);if(i){var n=r.pstyle("opacity").value,s=r.pstyle("line-opacity").value,o=r.pstyle("width").pfValue,l=r.pstyle("line-color").value,u=n*s;if(i.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),i.length==4){var h=this.instanceCount;this.vertTypeBuffer.getView(h)[0]=A2;var d=this.indexBuffer.getView(h);us(a,d);var f=this.colorBuffer.getView(h);wn(l,u,f);var p=this.lineWidthBuffer.getView(h);p[0]=o;var y=this.pointAPointBBuffer.getView(h);y[0]=i[0],y[1]=i[1],y[2]=i[2],y[3]=i[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var v=0;v<i.length-2;v+=2){var m=this.instanceCount;this.vertTypeBuffer.getView(m)[0]=L2;var x=this.indexBuffer.getView(m);us(a,x);var b=this.colorBuffer.getView(m);wn(l,u,b);var w=this.lineWidthBuffer.getView(m);w[0]=o;var C=i[v-2],T=i[v-1],k=i[v],S=i[v+1],L=i[v+2],_=i[v+3],A=i[v+4],E=i[v+5];v==0&&(C=2*k-L+.001,T=2*S-_+.001),v==i.length-4&&(A=2*L-k+.001,E=2*_-S+.001);var D=this.pointAPointBBuffer.getView(m);D[0]=C,D[1]=T,D[2]=k,D[3]=S;var R=this.pointCPointDBuffer.getView(m);R[0]=L,R[1]=_,R[2]=A,R[3]=E,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_getEdgePoints",value:function(r){var a=r._private.rscratch;if(!(a.badLine||a.allpts==null||isNaN(a.allpts[0]))){var i=a.allpts;if(i.length==4)return i;var n=this._getNumSegments(r);return this._getCurveSegmentPoints(i,n)}}},{key:"_getNumSegments",value:function(r){var a=15;return Math.min(Math.max(a,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(r,a){if(r.length==4)return r;for(var i=Array((a+1)*2),n=0;n<=a;n++)if(n==0)i[0]=r[0],i[1]=r[1];else if(n==a)i[n*2]=r[r.length-2],i[n*2+1]=r[r.length-1];else{var s=n/a;this._setCurvePoint(r,s,i,n*2)}return i}},{key:"_setCurvePoint",value:function(r,a,i,n){if(r.length<=2)i[n]=r[0],i[n+1]=r[1];else{for(var s=Array(r.length-2),o=0;o<s.length;o+=2){var l=(1-a)*r[o]+a*r[o+2],u=(1-a)*r[o+1]+a*r[o+3];s[o]=l,s[o+1]=u}return this._setCurvePoint(s,a,i,n)}}},{key:"endBatch",value:function(){var r=this.gl,a=this.vao,i=this.vertexCount,n=this.instanceCount;if(n!==0){var s=this.renderTarget.picking?this.pickingProgram:this.program;r.useProgram(s),r.bindVertexArray(a);var o=ca(this.buffers),l;try{for(o.s();!(l=o.n()).done;){var u=l.value;u.bufferSubData(n)}}catch(y){o.e(y)}finally{o.f()}for(var h=this.batchManager.getAtlases(),d=0;d<h.length;d++)h[d].bufferIfNeeded(r);for(var f=0;f<h.length;f++)r.activeTexture(r.TEXTURE0+f),r.bindTexture(r.TEXTURE_2D,h[f].texture),r.uniform1i(s.uTextures[f],f);r.uniform1f(s.uZoom,Xz(this.r)),r.uniformMatrix3fv(s.uPanZoomMatrix,!1,this.panZoomMatrix),r.uniform1i(s.uAtlasSize,this.batchManager.getAtlasSize());var p=wn(this.bgColor,1);r.uniform4fv(s.uBGColor,p),r.drawArraysInstanced(r.TRIANGLES,0,i,n),r.bindVertexArray(null),r.bindTexture(r.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:n,atlasCount:h.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var r=this.atlasManager.getDebugInfo(),a=r.reduce(function(s,o){return s+o.atlasCount},0),i=this.batchDebugInfo,n=i.reduce(function(s,o){return s+o.count},0);return{atlasInfo:r,totalAtlases:a,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:i.length,batchInfo:i,totalInstances:n}}}])}(),WC={};WC.initWebgl=function(e,t){var r=this,a=r.data.contexts[r.WEBGL];e.bgColor=yq(r),e.webglTexSize=Math.min(e.webglTexSize,a.getParameter(a.MAX_TEXTURE_SIZE)),e.webglTexRows=Math.min(e.webglTexRows,54),e.webglTexRowsNodes=Math.min(e.webglTexRowsNodes,54),e.webglBatchSize=Math.min(e.webglBatchSize,16384),e.webglTexPerBatch=Math.min(e.webglTexPerBatch,a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS)),r.webglDebug=e.webglDebug,r.webglDebugShowAtlases=e.webglDebugShowAtlases,r.pickingFrameBuffer=aq(a),r.pickingFrameBuffer.needsDraw=!0,r.drawing=new gq(r,a,e);var i=function(d){return function(f){return r.getTextAngle(f,d)}},n=function(d){return function(f){var p=f.pstyle(d);return p&&p.value}},s=function(d){return function(f){return f.pstyle("".concat(d,"-opacity")).value>0}},o=function(d){var f=d.pstyle("text-events").strValue==="yes";return f?xh.USE_BB:xh.IGNORE},l=function(d){var f=d.position(),p=f.x,y=f.y,v=d.outerWidth(),m=d.outerHeight();return{w:v,h:m,x1:p-v/2,y1:y-m/2}};r.drawing.addAtlasCollection("node",{texRows:e.webglTexRowsNodes}),r.drawing.addAtlasCollection("label",{texRows:e.webglTexRows}),r.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:t.getStyleKey,getBoundingBox:t.getElementBox,drawElement:t.drawElement}),r.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:l,isSimple:jz,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),r.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:l,isVisible:s("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),r.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:l,isVisible:s("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),r.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:o,getKey:up(t.getLabelKey,null),getBoundingBox:hp(t.getLabelBox,null),drawClipped:!0,drawElement:t.drawLabel,getRotation:i(null),getRotationPoint:t.getLabelRotationPoint,getRotationOffset:t.getLabelRotationOffset,isVisible:n("label")}),r.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:o,getKey:up(t.getSourceLabelKey,"source"),getBoundingBox:hp(t.getSourceLabelBox,"source"),drawClipped:!0,drawElement:t.drawSourceLabel,getRotation:i("source"),getRotationPoint:t.getSourceLabelRotationPoint,getRotationOffset:t.getSourceLabelRotationOffset,isVisible:n("source-label")}),r.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:o,getKey:up(t.getTargetLabelKey,"target"),getBoundingBox:hp(t.getTargetLabelBox,"target"),drawClipped:!0,drawElement:t.drawTargetLabel,getRotation:i("target"),getRotationPoint:t.getTargetLabelRotationPoint,getRotationOffset:t.getTargetLabelRotationOffset,isVisible:n("target-label")});var u=Sc(function(){console.log("garbage collect flag set"),r.data.gc=!0},1e4);r.onUpdateEleCalcs(function(h,d){var f=!1;d&&d.length>0&&(f|=r.drawing.invalidate(d)),f&&u()}),vq(r)};function yq(e){var t=e.cy.container(),r=t&&t.style&&t.style.backgroundColor||"white";return xT(r)}function GC(e,t){var r=e._private.rscratch;return na(r,"labelWrapCachedLines",t)||[]}var up=function(t,r){return function(a){var i=t(a),n=GC(a,r);return n.length>1?n.map(function(s,o){return"".concat(i,"_").concat(o)}):i}},hp=function(t,r){return function(a,i){var n=t(a);if(typeof i=="string"){var s=i.indexOf("_");if(s>0){var o=Number(i.substring(s+1)),l=GC(a,r),u=n.h/l.length,h=u*o,d=n.y1+h;return{x1:n.x1,w:n.w,y1:d,h:u,yOffset:h}}}return n}};function vq(e){{var t=e.render;e.render=function(n){n=n||{};var s=e.cy;e.webgl&&(s.zoom()>MC?(mq(e),t.call(e,n)):(xq(e),YC(e,n,Pl.SCREEN)))}}{var r=e.matchCanvasSize;e.matchCanvasSize=function(n){r.call(e,n),e.pickingFrameBuffer.setFramebufferAttachmentSizes(e.canvasWidth,e.canvasHeight),e.pickingFrameBuffer.needsDraw=!0}}e.findNearestElements=function(n,s,o,l){return Sq(e,n,s)};{var a=e.invalidateCachedZSortedEles;e.invalidateCachedZSortedEles=function(){a.call(e),e.pickingFrameBuffer.needsDraw=!0}}{var i=e.notify;e.notify=function(n,s){i.call(e,n,s),n==="viewport"||n==="bounds"?e.pickingFrameBuffer.needsDraw=!0:n==="background"&&e.drawing.invalidate(s,{type:"node-body"})}}}function mq(e){var t=e.data.contexts[e.WEBGL];t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}function xq(e){var t=function(a){a.save(),a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,e.canvasWidth,e.canvasHeight),a.restore()};t(e.data.contexts[e.NODE]),t(e.data.contexts[e.DRAG])}function bq(e){var t=e.canvasWidth,r=e.canvasHeight,a=R1(e),i=a.pan,n=a.zoom,s=op();Du(s,s,[i.x,i.y]),Bg(s,s,[n,n]);var o=op();nq(o,t,r);var l=op();return iq(l,o,s),l}function HC(e,t){var r=e.canvasWidth,a=e.canvasHeight,i=R1(e),n=i.pan,s=i.zoom;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,r,a),t.translate(n.x,n.y),t.scale(s,s)}function wq(e,t){e.drawSelectionRectangle(t,function(r){return HC(e,r)})}function kq(e){var t=e.data.contexts[e.NODE];t.save(),HC(e,t),t.strokeStyle="rgba(0, 0, 0, 0.3)",t.beginPath(),t.moveTo(-1e3,0),t.lineTo(1e3,0),t.stroke(),t.beginPath(),t.moveTo(0,-1e3),t.lineTo(0,1e3),t.stroke(),t.restore()}function Tq(e){var t=function(i,n,s){for(var o=i.atlasManager.getAtlasCollection(n),l=e.data.contexts[e.NODE],u=o.atlases,h=0;h<u.length;h++){var d=u[h],f=d.canvas;if(f){var p=f.width,y=f.height,v=p*h,m=f.height*s,x=.4;l.save(),l.scale(x,x),l.drawImage(f,v,m),l.strokeStyle="black",l.rect(v,m,p,y),l.stroke(),l.restore()}}},r=0;t(e.drawing,"node",r++),t(e.drawing,"label",r++)}function Cq(e,t,r,a,i){var n,s,o,l,u=R1(e),h=u.pan,d=u.zoom;{var f=Kz(e,h,d,t,r),p=ur(f,2),y=p[0],v=p[1],m=6;n=y-m/2,s=v-m/2,o=m,l=m}if(o===0||l===0)return[];var x=e.data.contexts[e.WEBGL];x.bindFramebuffer(x.FRAMEBUFFER,e.pickingFrameBuffer),e.pickingFrameBuffer.needsDraw&&(x.viewport(0,0,x.canvas.width,x.canvas.height),YC(e,null,Pl.PICKING),e.pickingFrameBuffer.needsDraw=!1);var b=o*l,w=new Uint8Array(b*4);x.readPixels(n,s,o,l,x.RGBA,x.UNSIGNED_BYTE,w),x.bindFramebuffer(x.FRAMEBUFFER,null);for(var C=new Set,T=0;T<b;T++){var k=w.slice(T*4,T*4+4),S=Zz(k)-1;S>=0&&C.add(S)}return C}function Sq(e,t,r){var a=Cq(e,t,r),i=e.getCachedZSortedEles(),n,s,o=ca(a),l;try{for(o.s();!(l=o.n()).done;){var u=l.value,h=i[u];if(!n&&h.isNode()&&(n=h),!s&&h.isEdge()&&(s=h),n&&s)break}}catch(d){o.e(d)}finally{o.f()}return[n,s].filter(Boolean)}function dp(e,t,r){var a=e.drawing;t+=1,r.isNode()?(a.drawNode(r,t,"node-underlay"),a.drawNode(r,t,"node-body"),a.drawTexture(r,t,"label"),a.drawNode(r,t,"node-overlay")):(a.drawEdgeLine(r,t),a.drawEdgeArrow(r,t,"source"),a.drawEdgeArrow(r,t,"target"),a.drawTexture(r,t,"label"),a.drawTexture(r,t,"edge-source-label"),a.drawTexture(r,t,"edge-target-label"))}function YC(e,t,r){var a;e.webglDebug&&(a=performance.now());var i=e.drawing,n=0;if(r.screen&&e.data.canvasNeedsRedraw[e.SELECT_BOX]&&wq(e,t),e.data.canvasNeedsRedraw[e.NODE]||r.picking){var s=e.data.contexts[e.WEBGL];r.screen?(s.clearColor(0,0,0,0),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA)):s.disable(s.BLEND),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.viewport(0,0,s.canvas.width,s.canvas.height);var o=bq(e),l=e.getCachedZSortedEles();if(n=l.length,i.startFrame(o,r),r.screen){for(var u=0;u<l.nondrag.length;u++)dp(e,u,l.nondrag[u]);for(var h=0;h<l.drag.length;h++)dp(e,h,l.drag[h])}else if(r.picking)for(var d=0;d<l.length;d++)dp(e,d,l[d]);i.endFrame(),r.screen&&e.webglDebugShowAtlases&&(kq(e),Tq(e)),e.data.canvasNeedsRedraw[e.NODE]=!1,e.data.canvasNeedsRedraw[e.DRAG]=!1}if(e.webglDebug){var f=performance.now(),p=!1,y=Math.ceil(f-a),v=i.getDebugInfo(),m=["".concat(n," elements"),"".concat(v.totalInstances," instances"),"".concat(v.batchCount," batches"),"".concat(v.totalAtlases," atlases"),"".concat(v.wrappedCount," wrapped textures"),"".concat(v.simpleCount," simple shapes")].join(", ");if(p)console.log("WebGL (".concat(r.name,") - time ").concat(y,"ms, ").concat(m));else{console.log("WebGL (".concat(r.name,") - frame time ").concat(y,"ms")),console.log("Totals:"),console.log("  ".concat(m)),console.log("Texture Atlases Used:");var x=v.atlasInfo,b=ca(x),w;try{for(b.s();!(w=b.n()).done;){var C=w.value;console.log("  ".concat(C.type,": ").concat(C.keyCount," keys, ").concat(C.atlasCount," atlases"))}}catch(T){b.e(T)}finally{b.f()}console.log("")}}e.data.gc&&(console.log("Garbage Collect!"),e.data.gc=!1,i.gc())}var pn={};pn.drawPolygonPath=function(e,t,r,a,i,n){var s=a/2,o=i/2;e.beginPath&&e.beginPath(),e.moveTo(t+s*n[0],r+o*n[1]);for(var l=1;l<n.length/2;l++)e.lineTo(t+s*n[l*2],r+o*n[l*2+1]);e.closePath()};pn.drawRoundPolygonPath=function(e,t,r,a,i,n,s){s.forEach(function(o){return _C(e,o)}),e.closePath()};pn.drawRoundRectanglePath=function(e,t,r,a,i,n){var s=a/2,o=i/2,l=n==="auto"?en(a,i):Math.min(n,o,s);e.beginPath&&e.beginPath(),e.moveTo(t,r-o),e.arcTo(t+s,r-o,t+s,r,l),e.arcTo(t+s,r+o,t,r+o,l),e.arcTo(t-s,r+o,t-s,r,l),e.arcTo(t-s,r-o,t,r-o,l),e.lineTo(t,r-o),e.closePath()};pn.drawBottomRoundRectanglePath=function(e,t,r,a,i,n){var s=a/2,o=i/2,l=n==="auto"?en(a,i):n;e.beginPath&&e.beginPath(),e.moveTo(t,r-o),e.lineTo(t+s,r-o),e.lineTo(t+s,r),e.arcTo(t+s,r+o,t,r+o,l),e.arcTo(t-s,r+o,t-s,r,l),e.lineTo(t-s,r-o),e.lineTo(t,r-o),e.closePath()};pn.drawCutRectanglePath=function(e,t,r,a,i,n,s){var o=a/2,l=i/2,u=s==="auto"?m1():s;e.beginPath&&e.beginPath(),e.moveTo(t-o+u,r-l),e.lineTo(t+o-u,r-l),e.lineTo(t+o,r-l+u),e.lineTo(t+o,r+l-u),e.lineTo(t+o-u,r+l),e.lineTo(t-o+u,r+l),e.lineTo(t-o,r+l-u),e.lineTo(t-o,r-l+u),e.closePath()};pn.drawBarrelPath=function(e,t,r,a,i){var n=a/2,s=i/2,o=t-n,l=t+n,u=r-s,h=r+s,d=vg(a,i),f=d.widthOffset,p=d.heightOffset,y=d.ctrlPtOffsetPct*f;e.beginPath&&e.beginPath(),e.moveTo(o,u+p),e.lineTo(o,h-p),e.quadraticCurveTo(o+y,h,o+f,h),e.lineTo(l-f,h),e.quadraticCurveTo(l-y,h,l,h-p),e.lineTo(l,u+p),e.quadraticCurveTo(l-y,u,l-f,u),e.lineTo(o+f,u),e.quadraticCurveTo(o+y,u,o,u+p),e.closePath()};var D2=Math.sin(0),B2=Math.cos(0),Rg={},Ig={},UC=Math.PI/40;for(var ds=0*Math.PI;ds<2*Math.PI;ds+=UC)Rg[ds]=Math.sin(ds),Ig[ds]=Math.cos(ds);pn.drawEllipsePath=function(e,t,r,a,i){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,r,a/2,i/2,0,0,2*Math.PI);else for(var n,s,o=a/2,l=i/2,u=0*Math.PI;u<2*Math.PI;u+=UC)n=t-o*Rg[u]*D2+o*Ig[u]*B2,s=r+l*Ig[u]*D2+l*Rg[u]*B2,u===0?e.moveTo(n,s):e.lineTo(n,s);e.closePath()};var Bc={};Bc.createBuffer=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,[r,r.getContext("2d")]};Bc.bufferCanvasImage=function(e){var t=this.cy,r=t.mutableElements(),a=r.boundingBox(),i=this.findContainerClientCoords(),n=e.full?Math.ceil(a.w):i[2],s=e.full?Math.ceil(a.h):i[3],o=Vt(e.maxWidth)||Vt(e.maxHeight),l=this.getPixelRatio(),u=1;if(e.scale!==void 0)n*=e.scale,s*=e.scale,u=e.scale;else if(o){var h=1/0,d=1/0;Vt(e.maxWidth)&&(h=u*e.maxWidth/n),Vt(e.maxHeight)&&(d=u*e.maxHeight/s),u=Math.min(h,d),n*=u,s*=u}o||(n*=l,s*=l,u*=l);var f=document.createElement("canvas");f.width=n,f.height=s,f.style.width=n+"px",f.style.height=s+"px";var p=f.getContext("2d");if(n>0&&s>0){p.clearRect(0,0,n,s),p.globalCompositeOperation="source-over";var y=this.getCachedZSortedEles();if(e.full)p.translate(-a.x1*u,-a.y1*u),p.scale(u,u),this.drawElements(p,y),p.scale(1/u,1/u),p.translate(a.x1*u,a.y1*u);else{var v=t.pan(),m={x:v.x*u,y:v.y*u};u*=t.zoom(),p.translate(m.x,m.y),p.scale(u,u),this.drawElements(p,y),p.scale(1/u,1/u),p.translate(-m.x,-m.y)}e.bg&&(p.globalCompositeOperation="destination-over",p.fillStyle=e.bg,p.rect(0,0,n,s),p.fill())}return f};function Eq(e,t){for(var r=atob(e),a=new ArrayBuffer(r.length),i=new Uint8Array(a),n=0;n<r.length;n++)i[n]=r.charCodeAt(n);return new Blob([a],{type:t})}function R2(e){var t=e.indexOf(",");return e.substr(t+1)}function XC(e,t,r){var a=function(){return t.toDataURL(r,e.quality)};switch(e.output){case"blob-promise":return new Qo(function(i,n){try{t.toBlob(function(s){s!=null?i(s):n(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,e.quality)}catch(s){n(s)}});case"blob":return Eq(R2(a()),r);case"base64":return R2(a());case"base64uri":default:return a()}}Bc.png=function(e){return XC(e,this.bufferCanvasImage(e),"image/png")};Bc.jpg=function(e){return XC(e,this.bufferCanvasImage(e),"image/jpeg")};var KC={};KC.nodeShapeImpl=function(e,t,r,a,i,n,s,o){switch(e){case"ellipse":return this.drawEllipsePath(t,r,a,i,n);case"polygon":return this.drawPolygonPath(t,r,a,i,n,s);case"round-polygon":return this.drawRoundPolygonPath(t,r,a,i,n,s,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,r,a,i,n,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,r,a,i,n,s,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,r,a,i,n,o);case"barrel":return this.drawBarrelPath(t,r,a,i,n)}};var _q=jC,we=jC.prototype;we.CANVAS_LAYERS=3;we.SELECT_BOX=0;we.DRAG=1;we.NODE=2;we.WEBGL=3;we.CANVAS_TYPES=["2d","2d","2d","webgl2"];we.BUFFER_COUNT=3;we.TEXTURE_BUFFER=0;we.MOTIONBLUR_BUFFER_NODE=1;we.MOTIONBLUR_BUFFER_DRAG=2;function jC(e){var t=this,r=t.cy.window(),a=r.document;e.webgl&&(we.CANVAS_LAYERS=t.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),t.data={canvases:new Array(we.CANVAS_LAYERS),contexts:new Array(we.CANVAS_LAYERS),canvasNeedsRedraw:new Array(we.CANVAS_LAYERS),bufferCanvases:new Array(we.BUFFER_COUNT),bufferContexts:new Array(we.CANVAS_LAYERS)};var i="-webkit-tap-highlight-color",n="rgba(0,0,0,0)";t.data.canvasContainer=a.createElement("div");var s=t.data.canvasContainer.style;t.data.canvasContainer.style[i]=n,s.position="relative",s.zIndex="0",s.overflow="hidden";var o=e.cy.container();o.appendChild(t.data.canvasContainer),o.style[i]=n;var l={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};SM()&&(l["-ms-touch-action"]="none",l["touch-action"]="none");for(var u=0;u<we.CANVAS_LAYERS;u++){var h=t.data.canvases[u]=a.createElement("canvas"),d=we.CANVAS_TYPES[u];t.data.contexts[u]=h.getContext(d),t.data.contexts[u]||Qe("Could not create canvas of type "+d),Object.keys(l).forEach(function(ut){h.style[ut]=l[ut]}),h.style.position="absolute",h.setAttribute("data-id","layer"+u),h.style.zIndex=String(we.CANVAS_LAYERS-u),t.data.canvasContainer.appendChild(h),t.data.canvasNeedsRedraw[u]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[we.NODE].setAttribute("data-id","layer"+we.NODE+"-node"),t.data.canvases[we.SELECT_BOX].setAttribute("data-id","layer"+we.SELECT_BOX+"-selectbox"),t.data.canvases[we.DRAG].setAttribute("data-id","layer"+we.DRAG+"-drag"),t.data.canvases[we.WEBGL]&&t.data.canvases[we.WEBGL].setAttribute("data-id","layer"+we.WEBGL+"-webgl");for(var u=0;u<we.BUFFER_COUNT;u++)t.data.bufferCanvases[u]=a.createElement("canvas"),t.data.bufferContexts[u]=t.data.bufferCanvases[u].getContext("2d"),t.data.bufferCanvases[u].style.position="absolute",t.data.bufferCanvases[u].setAttribute("data-id","buffer"+u),t.data.bufferCanvases[u].style.zIndex=String(-u-1),t.data.bufferCanvases[u].style.visibility="hidden";t.pathsEnabled=!0;var f=ha(),p=function(Q){return{x:(Q.x1+Q.x2)/2,y:(Q.y1+Q.y2)/2}},y=function(Q){return{x:-Q.w/2,y:-Q.h/2}},v=function(Q){var K=Q[0]._private,j=K.oldBackgroundTimestamp===K.backgroundTimestamp;return!j},m=function(Q){return Q[0]._private.nodeKey},x=function(Q){return Q[0]._private.labelStyleKey},b=function(Q){return Q[0]._private.sourceLabelStyleKey},w=function(Q){return Q[0]._private.targetLabelStyleKey},C=function(Q,K,j,Y,st){return t.drawElement(Q,K,j,!1,!1,st)},T=function(Q,K,j,Y,st){return t.drawElementText(Q,K,j,Y,"main",st)},k=function(Q,K,j,Y,st){return t.drawElementText(Q,K,j,Y,"source",st)},S=function(Q,K,j,Y,st){return t.drawElementText(Q,K,j,Y,"target",st)},L=function(Q){return Q.boundingBox(),Q[0]._private.bodyBounds},_=function(Q){return Q.boundingBox(),Q[0]._private.labelBounds.main||f},A=function(Q){return Q.boundingBox(),Q[0]._private.labelBounds.source||f},E=function(Q){return Q.boundingBox(),Q[0]._private.labelBounds.target||f},D=function(Q,K){return K},R=function(Q){return p(L(Q))},O=function(Q,K,j){var Y=Q?Q+"-":"";return{x:K.x+j.pstyle(Y+"text-margin-x").pfValue,y:K.y+j.pstyle(Y+"text-margin-y").pfValue}},P=function(Q,K,j){var Y=Q[0]._private.rscratch;return{x:Y[K],y:Y[j]}},$=function(Q){return O("",P(Q,"labelX","labelY"),Q)},M=function(Q){return O("source",P(Q,"sourceLabelX","sourceLabelY"),Q)},I=function(Q){return O("target",P(Q,"targetLabelX","targetLabelY"),Q)},F=function(Q){return y(L(Q))},V=function(Q){return y(A(Q))},N=function(Q){return y(E(Q))},q=function(Q){var K=_(Q),j=y(_(Q));if(Q.isNode()){switch(Q.pstyle("text-halign").value){case"left":j.x=-K.w-(K.leftPad||0);break;case"right":j.x=-(K.rightPad||0);break}switch(Q.pstyle("text-valign").value){case"top":j.y=-K.h-(K.topPad||0);break;case"bottom":j.y=-(K.botPad||0);break}}return j},U=t.data.eleTxrCache=new Sl(t,{getKey:m,doesEleInvalidateKey:v,drawElement:C,getBoundingBox:L,getRotationPoint:R,getRotationOffset:F,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),X=t.data.lblTxrCache=new Sl(t,{getKey:x,drawElement:T,getBoundingBox:_,getRotationPoint:$,getRotationOffset:q,isVisible:D}),lt=t.data.slbTxrCache=new Sl(t,{getKey:b,drawElement:k,getBoundingBox:A,getRotationPoint:M,getRotationOffset:V,isVisible:D}),J=t.data.tlbTxrCache=new Sl(t,{getKey:w,drawElement:S,getBoundingBox:E,getRotationPoint:I,getRotationOffset:N,isVisible:D}),ct=t.data.lyrTxrCache=new FC(t);t.onUpdateEleCalcs(function(Q,K){U.invalidateElements(K),X.invalidateElements(K),lt.invalidateElements(K),J.invalidateElements(K),ct.invalidateElements(K);for(var j=0;j<K.length;j++){var Y=K[j]._private;Y.oldBackgroundTimestamp=Y.backgroundTimestamp}});var yt=function(Q){for(var K=0;K<Q.length;K++)ct.enqueueElementRefinement(Q[K].ele)};U.onDequeue(yt),X.onDequeue(yt),lt.onDequeue(yt),J.onDequeue(yt),e.webgl&&t.initWebgl(e,{getStyleKey:m,getLabelKey:x,getSourceLabelKey:b,getTargetLabelKey:w,drawElement:C,drawLabel:T,drawSourceLabel:k,drawTargetLabel:S,getElementBox:L,getLabelBox:_,getSourceLabelBox:A,getTargetLabelBox:E,getElementRotationPoint:R,getElementRotationOffset:F,getLabelRotationPoint:$,getSourceLabelRotationPoint:M,getTargetLabelRotationPoint:I,getLabelRotationOffset:q,getSourceLabelRotationOffset:V,getTargetLabelRotationOffset:N})}we.redrawHint=function(e,t){var r=this;switch(e){case"eles":r.data.canvasNeedsRedraw[we.NODE]=t;break;case"drag":r.data.canvasNeedsRedraw[we.DRAG]=t;break;case"select":r.data.canvasNeedsRedraw[we.SELECT_BOX]=t;break;case"gc":r.data.gc=!0;break}};var Aq=typeof Path2D<"u";we.path2dEnabled=function(e){if(e===void 0)return this.pathsEnabled;this.pathsEnabled=!!e};we.usePaths=function(){return Aq&&this.pathsEnabled};we.setImgSmoothing=function(e,t){e.imageSmoothingEnabled!=null?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)};we.getImgSmoothing=function(e){return e.imageSmoothingEnabled!=null?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled};we.makeOffscreenCanvas=function(e,t){var r;if((typeof OffscreenCanvas>"u"?"undefined":mr(OffscreenCanvas))!=="undefined")r=new OffscreenCanvas(e,t);else{var a=this.cy.window(),i=a.document;r=i.createElement("canvas"),r.width=e,r.height=t}return r};[OC,fi,Ni,B1,rs,fn,ea,WC,pn,Bc,KC].forEach(function(e){pe(we,e)});var Lq=[{name:"null",impl:CC},{name:"base",impl:PC},{name:"canvas",impl:_q}],Dq=[{type:"layout",extensions:rz},{type:"renderer",extensions:Lq}],QC={},ZC={};function JC(e,t,r){var a=r,i=function(L){Pe("Can not register `"+t+"` for `"+e+"` since `"+L+"` already exists in the prototype and can not be overridden")};if(e==="core"){if(nc.prototype[t])return i(t);nc.prototype[t]=r}else if(e==="collection"){if(Nr.prototype[t])return i(t);Nr.prototype[t]=r}else if(e==="layout"){for(var n=function(L){this.options=L,r.call(this,L),De(this._private)||(this._private={}),this._private.cy=L.cy,this._private.listeners=[],this.createEmitter()},s=n.prototype=Object.create(r.prototype),o=[],l=0;l<o.length;l++){var u=o[l];s[u]=s[u]||function(){return this}}s.start&&!s.run?s.run=function(){return this.start(),this}:!s.start&&s.run&&(s.start=function(){return this.run(),this});var h=r.prototype.stop;s.stop=function(){var S=this.options;if(S&&S.animate){var L=this.animations;if(L)for(var _=0;_<L.length;_++)L[_].stop()}return h?h.call(this):this.emit("layoutstop"),this},s.destroy||(s.destroy=function(){return this}),s.cy=function(){return this._private.cy};var d=function(L){return L._private.cy},f={addEventFields:function(L,_){_.layout=L,_.cy=d(L),_.target=L},bubble:function(){return!0},parent:function(L){return d(L)}};pe(s,{createEmitter:function(){return this._private.emitter=new nd(f,this),this},emitter:function(){return this._private.emitter},on:function(L,_){return this.emitter().on(L,_),this},one:function(L,_){return this.emitter().one(L,_),this},once:function(L,_){return this.emitter().one(L,_),this},removeListener:function(L,_){return this.emitter().removeListener(L,_),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(L,_){return this.emitter().emit(L,_),this}}),Ie.eventAliasesOn(s),a=n}else if(e==="renderer"&&t!=="null"&&t!=="base"){var p=tS("renderer","base"),y=p.prototype,v=r,m=r.prototype,x=function(){p.apply(this,arguments),v.apply(this,arguments)},b=x.prototype;for(var w in y){var C=y[w],T=m[w]!=null;if(T)return i(w);b[w]=C}for(var k in m)b[k]=m[k];y.clientFunctions.forEach(function(S){b[S]=b[S]||function(){Qe("Renderer does not implement `renderer."+S+"()` on its prototype")}}),a=x}else if(e==="__proto__"||e==="constructor"||e==="prototype")return Qe(e+" is an illegal type to be registered, possibly lead to prototype pollutions");return bT({map:QC,keys:[e,t],value:a})}function tS(e,t){return wT({map:QC,keys:[e,t]})}function Bq(e,t,r,a,i){return bT({map:ZC,keys:[e,t,r,a],value:i})}function Rq(e,t,r,a){return wT({map:ZC,keys:[e,t,r,a]})}var Pg=function(){if(arguments.length===2)return tS.apply(null,arguments);if(arguments.length===3)return JC.apply(null,arguments);if(arguments.length===4)return Rq.apply(null,arguments);if(arguments.length===5)return Bq.apply(null,arguments);Qe("Invalid extension access syntax")};nc.prototype.extension=Pg;Dq.forEach(function(e){e.extensions.forEach(function(t){JC(e.type,t.name,t.impl)})});var bh=function(){if(!(this instanceof bh))return new bh;this.length=0},Xn=bh.prototype;Xn.instanceString=function(){return"stylesheet"};Xn.selector=function(e){var t=this.length++;return this[t]={selector:e,properties:[]},this};Xn.css=function(e,t){var r=this.length-1;if(ce(e))this[r].properties.push({name:e,value:t});else if(De(e))for(var a=e,i=Object.keys(a),n=0;n<i.length;n++){var s=i[n],o=a[s];if(o!=null){var l=Cr.properties[s]||Cr.properties[Kh(s)];if(l!=null){var u=l.name,h=o;this[r].properties.push({name:u,value:h})}}}return this};Xn.style=Xn.css;Xn.generateStyle=function(e){var t=new Cr(e);return this.appendToStyle(t)};Xn.appendToStyle=function(e){for(var t=0;t<this.length;t++){var r=this[t],a=r.selector,i=r.properties;e.selector(a);for(var n=0;n<i.length;n++){var s=i[n];e.css(s.name,s.value)}}return e};var Iq="3.32.0",ui=function(t){if(t===void 0&&(t={}),De(t))return new nc(t);if(ce(t))return Pg.apply(Pg,arguments)};ui.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(ui),e.apply(null,t),this};ui.warnings=function(e){return AT(e)};ui.version=Iq;ui.stylesheet=ui.Stylesheet=bh;var Bu={exports:{}},Pq=Bu.exports,I2;function Nq(){return I2||(I2=1,function(e,t){(function(a,i){e.exports=i(lE())})(Pq,function(r){return function(a){var i={};function n(s){if(i[s])return i[s].exports;var o=i[s]={i:s,l:!1,exports:{}};return a[s].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=a,n.c=i,n.i=function(s){return s},n.d=function(s,o,l){n.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:l})},n.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return n.d(o,"a",o),o},n.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},n.p="",n(n.s=1)}([function(a,i){a.exports=r},function(a,i,n){var s=n(0).layoutBase.LayoutConstants,o=n(0).layoutBase.FDLayoutConstants,l=n(0).CoSEConstants,u=n(0).CoSELayout,h=n(0).CoSENode,d=n(0).layoutBase.PointD,f=n(0).layoutBase.DimensionD,p={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function y(b,w){var C={};for(var T in b)C[T]=b[T];for(var T in w)C[T]=w[T];return C}function v(b){this.options=y(p,b),m(this.options)}var m=function(w){w.nodeRepulsion!=null&&(l.DEFAULT_REPULSION_STRENGTH=o.DEFAULT_REPULSION_STRENGTH=w.nodeRepulsion),w.idealEdgeLength!=null&&(l.DEFAULT_EDGE_LENGTH=o.DEFAULT_EDGE_LENGTH=w.idealEdgeLength),w.edgeElasticity!=null&&(l.DEFAULT_SPRING_STRENGTH=o.DEFAULT_SPRING_STRENGTH=w.edgeElasticity),w.nestingFactor!=null&&(l.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=w.nestingFactor),w.gravity!=null&&(l.DEFAULT_GRAVITY_STRENGTH=o.DEFAULT_GRAVITY_STRENGTH=w.gravity),w.numIter!=null&&(l.MAX_ITERATIONS=o.MAX_ITERATIONS=w.numIter),w.gravityRange!=null&&(l.DEFAULT_GRAVITY_RANGE_FACTOR=o.DEFAULT_GRAVITY_RANGE_FACTOR=w.gravityRange),w.gravityCompound!=null&&(l.DEFAULT_COMPOUND_GRAVITY_STRENGTH=o.DEFAULT_COMPOUND_GRAVITY_STRENGTH=w.gravityCompound),w.gravityRangeCompound!=null&&(l.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=w.gravityRangeCompound),w.initialEnergyOnIncremental!=null&&(l.DEFAULT_COOLING_FACTOR_INCREMENTAL=o.DEFAULT_COOLING_FACTOR_INCREMENTAL=w.initialEnergyOnIncremental),w.quality=="draft"?s.QUALITY=0:w.quality=="proof"?s.QUALITY=2:s.QUALITY=1,l.NODE_DIMENSIONS_INCLUDE_LABELS=o.NODE_DIMENSIONS_INCLUDE_LABELS=s.NODE_DIMENSIONS_INCLUDE_LABELS=w.nodeDimensionsIncludeLabels,l.DEFAULT_INCREMENTAL=o.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=!w.randomize,l.ANIMATE=o.ANIMATE=s.ANIMATE=w.animate,l.TILE=w.tile,l.TILING_PADDING_VERTICAL=typeof w.tilingPaddingVertical=="function"?w.tilingPaddingVertical.call():w.tilingPaddingVertical,l.TILING_PADDING_HORIZONTAL=typeof w.tilingPaddingHorizontal=="function"?w.tilingPaddingHorizontal.call():w.tilingPaddingHorizontal};v.prototype.run=function(){var b,w,C=this.options;this.idToLNode={};var T=this.layout=new u,k=this;k.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var S=T.newGraphManager();this.gm=S;var L=this.options.eles.nodes(),_=this.options.eles.edges();this.root=S.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(L),T);for(var A=0;A<_.length;A++){var E=_[A],D=this.idToLNode[E.data("source")],R=this.idToLNode[E.data("target")];if(D!==R&&D.getEdgesBetween(R).length==0){var O=S.add(T.newEdge(),D,R);O.id=E.id()}}var P=function(I,F){typeof I=="number"&&(I=F);var V=I.data("id"),N=k.idToLNode[V];return{x:N.getRect().getCenterX(),y:N.getRect().getCenterY()}},$=function M(){for(var I=function(){C.fit&&C.cy.fit(C.eles,C.padding),b||(b=!0,k.cy.one("layoutready",C.ready),k.cy.trigger({type:"layoutready",layout:k}))},F=k.options.refresh,V,N=0;N<F&&!V;N++)V=k.stopped||k.layout.tick();if(V){T.checkLayoutSuccess()&&!T.isSubLayout&&T.doPostLayout(),T.tilingPostLayout&&T.tilingPostLayout(),T.isLayoutFinished=!0,k.options.eles.nodes().positions(P),I(),k.cy.one("layoutstop",k.options.stop),k.cy.trigger({type:"layoutstop",layout:k}),w&&cancelAnimationFrame(w),b=!1;return}var q=k.layout.getPositionsData();C.eles.nodes().positions(function(U,X){if(typeof U=="number"&&(U=X),!U.isParent()){for(var lt=U.id(),J=q[lt],ct=U;J==null&&(J=q[ct.data("parent")]||q["DummyCompound_"+ct.data("parent")],q[lt]=J,ct=ct.parent()[0],ct!=null););return J!=null?{x:J.x,y:J.y}:{x:U.position("x"),y:U.position("y")}}}),I(),w=requestAnimationFrame(M)};return T.addListener("layoutstarted",function(){k.options.animate==="during"&&(w=requestAnimationFrame($))}),T.runLayout(),this.options.animate!=="during"&&(k.options.eles.nodes().not(":parent").layoutPositions(k,k.options,P),b=!1),this},v.prototype.getTopMostNodes=function(b){for(var w={},C=0;C<b.length;C++)w[b[C].id()]=!0;var T=b.filter(function(k,S){typeof k=="number"&&(k=S);for(var L=k.parent()[0];L!=null;){if(w[L.id()])return!1;L=L.parent()[0]}return!0});return T},v.prototype.processChildrenList=function(b,w,C){for(var T=w.length,k=0;k<T;k++){var S=w[k],L=S.children(),_,A=S.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if(S.outerWidth()!=null&&S.outerHeight()!=null?_=b.add(new h(C.graphManager,new d(S.position("x")-A.w/2,S.position("y")-A.h/2),new f(parseFloat(A.w),parseFloat(A.h)))):_=b.add(new h(this.graphManager)),_.id=S.data("id"),_.paddingLeft=parseInt(S.css("padding")),_.paddingTop=parseInt(S.css("padding")),_.paddingRight=parseInt(S.css("padding")),_.paddingBottom=parseInt(S.css("padding")),this.options.nodeDimensionsIncludeLabels&&S.isParent()){var E=S.boundingBox({includeLabels:!0,includeNodes:!1}).w,D=S.boundingBox({includeLabels:!0,includeNodes:!1}).h,R=S.css("text-halign");_.labelWidth=E,_.labelHeight=D,_.labelPos=R}if(this.idToLNode[S.data("id")]=_,isNaN(_.rect.x)&&(_.rect.x=0),isNaN(_.rect.y)&&(_.rect.y=0),L!=null&&L.length>0){var O;O=C.getGraphManager().add(C.newGraph(),_),this.processChildrenList(O,L,C)}}},v.prototype.stop=function(){return this.stopped=!0,this};var x=function(w){w("layout","cose-bilkent",v)};typeof cytoscape<"u"&&x(cytoscape),a.exports=x}])})}(Bu)),Bu.exports}var Mq=Nq();const Fq=hx(Mq);var Ng=function(){var e=g(function(C,T,k,S){for(k=k||{},S=C.length;S--;k[C[S]]=T);return k},"o"),t=[1,4],r=[1,13],a=[1,12],i=[1,15],n=[1,16],s=[1,20],o=[1,19],l=[6,7,8],u=[1,26],h=[1,24],d=[1,25],f=[6,7,11],p=[1,6,13,15,16,19,22],y=[1,33],v=[1,34],m=[1,6,7,11,13,15,16,19,22],x={trace:g(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,MINDMAP:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,ICON:15,CLASS:16,nodeWithId:17,nodeWithoutId:18,NODE_DSTART:19,NODE_DESCR:20,NODE_DEND:21,NODE_ID:22,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"MINDMAP",11:"EOF",13:"SPACELIST",15:"ICON",16:"CLASS",19:"NODE_DSTART",20:"NODE_DESCR",21:"NODE_DEND",22:"NODE_ID"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,2],[12,2],[12,2],[12,1],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[18,3],[17,1],[17,4]],performAction:g(function(T,k,S,L,_,A,E){var D=A.length-1;switch(_){case 6:case 7:return L;case 8:L.getLogger().trace("Stop NL ");break;case 9:L.getLogger().trace("Stop EOF ");break;case 11:L.getLogger().trace("Stop NL2 ");break;case 12:L.getLogger().trace("Stop EOF2 ");break;case 15:L.getLogger().info("Node: ",A[D].id),L.addNode(A[D-1].length,A[D].id,A[D].descr,A[D].type);break;case 16:L.getLogger().trace("Icon: ",A[D]),L.decorateNode({icon:A[D]});break;case 17:case 21:L.decorateNode({class:A[D]});break;case 18:L.getLogger().trace("SPACELIST");break;case 19:L.getLogger().trace("Node: ",A[D].id),L.addNode(0,A[D].id,A[D].descr,A[D].type);break;case 20:L.decorateNode({icon:A[D]});break;case 25:L.getLogger().trace("node found ..",A[D-2]),this.$={id:A[D-1],descr:A[D-1],type:L.getType(A[D-2],A[D])};break;case 26:this.$={id:A[D],descr:A[D],type:L.nodeType.DEFAULT};break;case 27:L.getLogger().trace("node found ..",A[D-3]),this.$={id:A[D-3],descr:A[D-1],type:L.getType(A[D-2],A[D])};break}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],8:t},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:t},{6:r,7:[1,10],9:9,12:11,13:a,14:14,15:i,16:n,17:17,18:18,19:s,22:o},e(l,[2,3]),{1:[2,2]},e(l,[2,4]),e(l,[2,5]),{1:[2,6],6:r,12:21,13:a,14:14,15:i,16:n,17:17,18:18,19:s,22:o},{6:r,9:22,12:11,13:a,14:14,15:i,16:n,17:17,18:18,19:s,22:o},{6:u,7:h,10:23,11:d},e(f,[2,22],{17:17,18:18,14:27,15:[1,28],16:[1,29],19:s,22:o}),e(f,[2,18]),e(f,[2,19]),e(f,[2,20]),e(f,[2,21]),e(f,[2,23]),e(f,[2,24]),e(f,[2,26],{19:[1,30]}),{20:[1,31]},{6:u,7:h,10:32,11:d},{1:[2,7],6:r,12:21,13:a,14:14,15:i,16:n,17:17,18:18,19:s,22:o},e(p,[2,14],{7:y,11:v}),e(m,[2,8]),e(m,[2,9]),e(m,[2,10]),e(f,[2,15]),e(f,[2,16]),e(f,[2,17]),{20:[1,35]},{21:[1,36]},e(p,[2,13],{7:y,11:v}),e(m,[2,11]),e(m,[2,12]),{21:[1,37]},e(f,[2,25]),e(f,[2,27])],defaultActions:{2:[2,1],6:[2,2]},parseError:g(function(T,k){if(k.recoverable)this.trace(T);else{var S=new Error(T);throw S.hash=k,S}},"parseError"),parse:g(function(T){var k=this,S=[0],L=[],_=[null],A=[],E=this.table,D="",R=0,O=0,P=2,$=1,M=A.slice.call(arguments,1),I=Object.create(this.lexer),F={yy:{}};for(var V in this.yy)Object.prototype.hasOwnProperty.call(this.yy,V)&&(F.yy[V]=this.yy[V]);I.setInput(T,F.yy),F.yy.lexer=I,F.yy.parser=this,typeof I.yylloc>"u"&&(I.yylloc={});var N=I.yylloc;A.push(N);var q=I.options&&I.options.ranges;typeof F.yy.parseError=="function"?this.parseError=F.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function U(W){S.length=S.length-2*W,_.length=_.length-W,A.length=A.length-W}g(U,"popStack");function X(){var W;return W=L.pop()||I.lex()||$,typeof W!="number"&&(W instanceof Array&&(L=W,W=L.pop()),W=k.symbols_[W]||W),W}g(X,"lex");for(var lt,J,ct,yt,ut={},Q,K,j,Y;;){if(J=S[S.length-1],this.defaultActions[J]?ct=this.defaultActions[J]:((lt===null||typeof lt>"u")&&(lt=X()),ct=E[J]&&E[J][lt]),typeof ct>"u"||!ct.length||!ct[0]){var st="";Y=[];for(Q in E[J])this.terminals_[Q]&&Q>P&&Y.push("'"+this.terminals_[Q]+"'");I.showPosition?st="Parse error on line "+(R+1)+`:
`+I.showPosition()+`
Expecting `+Y.join(", ")+", got '"+(this.terminals_[lt]||lt)+"'":st="Parse error on line "+(R+1)+": Unexpected "+(lt==$?"end of input":"'"+(this.terminals_[lt]||lt)+"'"),this.parseError(st,{text:I.match,token:this.terminals_[lt]||lt,line:I.yylineno,loc:N,expected:Y})}if(ct[0]instanceof Array&&ct.length>1)throw new Error("Parse Error: multiple actions possible at state: "+J+", token: "+lt);switch(ct[0]){case 1:S.push(lt),_.push(I.yytext),A.push(I.yylloc),S.push(ct[1]),lt=null,O=I.yyleng,D=I.yytext,R=I.yylineno,N=I.yylloc;break;case 2:if(K=this.productions_[ct[1]][1],ut.$=_[_.length-K],ut._$={first_line:A[A.length-(K||1)].first_line,last_line:A[A.length-1].last_line,first_column:A[A.length-(K||1)].first_column,last_column:A[A.length-1].last_column},q&&(ut._$.range=[A[A.length-(K||1)].range[0],A[A.length-1].range[1]]),yt=this.performAction.apply(ut,[D,O,R,F.yy,ct[1],_,A].concat(M)),typeof yt<"u")return yt;K&&(S=S.slice(0,-1*K*2),_=_.slice(0,-1*K),A=A.slice(0,-1*K)),S.push(this.productions_[ct[1]][0]),_.push(ut.$),A.push(ut._$),j=E[S[S.length-2]][S[S.length-1]],S.push(j);break;case 3:return!0}}return!0},"parse")},b=function(){var C={EOF:1,parseError:g(function(k,S){if(this.yy.parser)this.yy.parser.parseError(k,S);else throw new Error(k)},"parseError"),setInput:g(function(T,k){return this.yy=k||this.yy||{},this._input=T,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:g(function(){var T=this._input[0];this.yytext+=T,this.yyleng++,this.offset++,this.match+=T,this.matched+=T;var k=T.match(/(?:\r\n?|\n).*/g);return k?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),T},"input"),unput:g(function(T){var k=T.length,S=T.split(/(?:\r\n?|\n)/g);this._input=T+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-k),this.offset-=k;var L=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),S.length-1&&(this.yylineno-=S.length-1);var _=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:S?(S.length===L.length?this.yylloc.first_column:0)+L[L.length-S.length].length-S[0].length:this.yylloc.first_column-k},this.options.ranges&&(this.yylloc.range=[_[0],_[0]+this.yyleng-k]),this.yyleng=this.yytext.length,this},"unput"),more:g(function(){return this._more=!0,this},"more"),reject:g(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:g(function(T){this.unput(this.match.slice(T))},"less"),pastInput:g(function(){var T=this.matched.substr(0,this.matched.length-this.match.length);return(T.length>20?"...":"")+T.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:g(function(){var T=this.match;return T.length<20&&(T+=this._input.substr(0,20-T.length)),(T.substr(0,20)+(T.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:g(function(){var T=this.pastInput(),k=new Array(T.length+1).join("-");return T+this.upcomingInput()+`
`+k+"^"},"showPosition"),test_match:g(function(T,k){var S,L,_;if(this.options.backtrack_lexer&&(_={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(_.yylloc.range=this.yylloc.range.slice(0))),L=T[0].match(/(?:\r\n?|\n).*/g),L&&(this.yylineno+=L.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:L?L[L.length-1].length-L[L.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+T[0].length},this.yytext+=T[0],this.match+=T[0],this.matches=T,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(T[0].length),this.matched+=T[0],S=this.performAction.call(this,this.yy,this,k,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),S)return S;if(this._backtrack){for(var A in _)this[A]=_[A];return!1}return!1},"test_match"),next:g(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var T,k,S,L;this._more||(this.yytext="",this.match="");for(var _=this._currentRules(),A=0;A<_.length;A++)if(S=this._input.match(this.rules[_[A]]),S&&(!k||S[0].length>k[0].length)){if(k=S,L=A,this.options.backtrack_lexer){if(T=this.test_match(S,_[A]),T!==!1)return T;if(this._backtrack){k=!1;continue}else return!1}else if(!this.options.flex)break}return k?(T=this.test_match(k,_[L]),T!==!1?T:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:g(function(){var k=this.next();return k||this.lex()},"lex"),begin:g(function(k){this.conditionStack.push(k)},"begin"),popState:g(function(){var k=this.conditionStack.length-1;return k>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:g(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:g(function(k){return k=this.conditionStack.length-1-Math.abs(k||0),k>=0?this.conditionStack[k]:"INITIAL"},"topState"),pushState:g(function(k){this.begin(k)},"pushState"),stateStackSize:g(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:g(function(k,S,L,_){switch(L){case 0:return k.getLogger().trace("Found comment",S.yytext),6;case 1:return 8;case 2:this.begin("CLASS");break;case 3:return this.popState(),16;case 4:this.popState();break;case 5:k.getLogger().trace("Begin icon"),this.begin("ICON");break;case 6:return k.getLogger().trace("SPACELINE"),6;case 7:return 7;case 8:return 15;case 9:k.getLogger().trace("end icon"),this.popState();break;case 10:return k.getLogger().trace("Exploding node"),this.begin("NODE"),19;case 11:return k.getLogger().trace("Cloud"),this.begin("NODE"),19;case 12:return k.getLogger().trace("Explosion Bang"),this.begin("NODE"),19;case 13:return k.getLogger().trace("Cloud Bang"),this.begin("NODE"),19;case 14:return this.begin("NODE"),19;case 15:return this.begin("NODE"),19;case 16:return this.begin("NODE"),19;case 17:return this.begin("NODE"),19;case 18:return 13;case 19:return 22;case 20:return 11;case 21:this.begin("NSTR2");break;case 22:return"NODE_DESCR";case 23:this.popState();break;case 24:k.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 25:return k.getLogger().trace("description:",S.yytext),"NODE_DESCR";case 26:this.popState();break;case 27:return this.popState(),k.getLogger().trace("node end ))"),"NODE_DEND";case 28:return this.popState(),k.getLogger().trace("node end )"),"NODE_DEND";case 29:return this.popState(),k.getLogger().trace("node end ...",S.yytext),"NODE_DEND";case 30:return this.popState(),k.getLogger().trace("node end (("),"NODE_DEND";case 31:return this.popState(),k.getLogger().trace("node end (-"),"NODE_DEND";case 32:return this.popState(),k.getLogger().trace("node end (-"),"NODE_DEND";case 33:return this.popState(),k.getLogger().trace("node end (("),"NODE_DEND";case 34:return this.popState(),k.getLogger().trace("node end (("),"NODE_DEND";case 35:return k.getLogger().trace("Long description:",S.yytext),20;case 36:return k.getLogger().trace("Long description:",S.yytext),20}},"anonymous"),rules:[/^(?:\s*%%.*)/i,/^(?:mindmap\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{CLASS:{rules:[3,4],inclusive:!1},ICON:{rules:[8,9],inclusive:!1},NSTR2:{rules:[22,23],inclusive:!1},NSTR:{rules:[25,26],inclusive:!1},NODE:{rules:[21,24,27,28,29,30,31,32,33,34,35,36],inclusive:!1},INITIAL:{rules:[0,1,2,5,6,7,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}};return C}();x.lexer=b;function w(){this.yy={}}return g(w,"Parser"),w.prototype=x,x.Parser=w,new w}();Ng.parser=Ng;var Oq=Ng,Ga=[],eS=0,I1={},$q=g(()=>{Ga=[],eS=0,I1={}},"clear"),Vq=g(function(e){for(let t=Ga.length-1;t>=0;t--)if(Ga[t].level<e)return Ga[t];return null},"getParent"),zq=g(()=>Ga.length>0?Ga[0]:null,"getMindmap"),qq=g((e,t,r,a)=>{var l,u;G.info("addNode",e,t,r,a);const i=dt();let n=((l=i.mindmap)==null?void 0:l.padding)??Ee.mindmap.padding;switch(a){case hr.ROUNDED_RECT:case hr.RECT:case hr.HEXAGON:n*=2}const s={id:eS++,nodeId:qe(t,i),level:e,descr:qe(r,i),type:a,children:[],width:((u=i.mindmap)==null?void 0:u.maxNodeWidth)??Ee.mindmap.maxNodeWidth,padding:n},o=Vq(e);if(o)o.children.push(s),Ga.push(s);else if(Ga.length===0)Ga.push(s);else throw new Error('There can be only one root. No parent could be found for ("'+s.descr+'")')},"addNode"),hr={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},Wq=g((e,t)=>{switch(G.debug("In get type",e,t),e){case"[":return hr.RECT;case"(":return t===")"?hr.ROUNDED_RECT:hr.CLOUD;case"((":return hr.CIRCLE;case")":return hr.CLOUD;case"))":return hr.BANG;case"{{":return hr.HEXAGON;default:return hr.DEFAULT}},"getType"),Gq=g((e,t)=>{I1[e]=t},"setElementForId"),Hq=g(e=>{if(!e)return;const t=dt(),r=Ga[Ga.length-1];e.icon&&(r.icon=qe(e.icon,t)),e.class&&(r.class=qe(e.class,t))},"decorateNode"),Yq=g(e=>{switch(e){case hr.DEFAULT:return"no-border";case hr.RECT:return"rect";case hr.ROUNDED_RECT:return"rounded-rect";case hr.CIRCLE:return"circle";case hr.CLOUD:return"cloud";case hr.BANG:return"bang";case hr.HEXAGON:return"hexgon";default:return"no-border"}},"type2Str"),Uq=g(()=>G,"getLogger"),Xq=g(e=>I1[e],"getElementById"),Kq={clear:$q,addNode:qq,getMindmap:zq,nodeType:hr,getType:Wq,setElementForId:Gq,decorateNode:Hq,type2Str:Yq,getLogger:Uq,getElementById:Xq},jq=Kq,Qq=12,Zq=g(function(e,t,r,a){t.append("path").attr("id","node-"+r.id).attr("class","node-bkg node-"+e.type2Str(r.type)).attr("d",`M0 ${r.height-5} v${-r.height+2*5} q0,-5 5,-5 h${r.width-2*5} q5,0 5,5 v${r.height-5} H0 Z`),t.append("line").attr("class","node-line-"+a).attr("x1",0).attr("y1",r.height).attr("x2",r.width).attr("y2",r.height)},"defaultBkg"),Jq=g(function(e,t,r){t.append("rect").attr("id","node-"+r.id).attr("class","node-bkg node-"+e.type2Str(r.type)).attr("height",r.height).attr("width",r.width)},"rectBkg"),tW=g(function(e,t,r){const a=r.width,i=r.height,n=.15*a,s=.25*a,o=.35*a,l=.2*a;t.append("path").attr("id","node-"+r.id).attr("class","node-bkg node-"+e.type2Str(r.type)).attr("d",`M0 0 a${n},${n} 0 0,1 ${a*.25},${-1*a*.1}
      a${o},${o} 1 0,1 ${a*.4},${-1*a*.1}
      a${s},${s} 1 0,1 ${a*.35},${1*a*.2}

      a${n},${n} 1 0,1 ${a*.15},${1*i*.35}
      a${l},${l} 1 0,1 ${-1*a*.15},${1*i*.65}

      a${s},${n} 1 0,1 ${-1*a*.25},${a*.15}
      a${o},${o} 1 0,1 ${-1*a*.5},0
      a${n},${n} 1 0,1 ${-1*a*.25},${-1*a*.15}

      a${n},${n} 1 0,1 ${-1*a*.1},${-1*i*.35}
      a${l},${l} 1 0,1 ${a*.1},${-1*i*.65}

    H0 V0 Z`)},"cloudBkg"),eW=g(function(e,t,r){const a=r.width,i=r.height,n=.15*a;t.append("path").attr("id","node-"+r.id).attr("class","node-bkg node-"+e.type2Str(r.type)).attr("d",`M0 0 a${n},${n} 1 0,0 ${a*.25},${-1*i*.1}
      a${n},${n} 1 0,0 ${a*.25},0
      a${n},${n} 1 0,0 ${a*.25},0
      a${n},${n} 1 0,0 ${a*.25},${1*i*.1}

      a${n},${n} 1 0,0 ${a*.15},${1*i*.33}
      a${n*.8},${n*.8} 1 0,0 0,${1*i*.34}
      a${n},${n} 1 0,0 ${-1*a*.15},${1*i*.33}

      a${n},${n} 1 0,0 ${-1*a*.25},${i*.15}
      a${n},${n} 1 0,0 ${-1*a*.25},0
      a${n},${n} 1 0,0 ${-1*a*.25},0
      a${n},${n} 1 0,0 ${-1*a*.25},${-1*i*.15}

      a${n},${n} 1 0,0 ${-1*a*.1},${-1*i*.33}
      a${n*.8},${n*.8} 1 0,0 0,${-1*i*.34}
      a${n},${n} 1 0,0 ${a*.1},${-1*i*.33}

    H0 V0 Z`)},"bangBkg"),rW=g(function(e,t,r){t.append("circle").attr("id","node-"+r.id).attr("class","node-bkg node-"+e.type2Str(r.type)).attr("r",r.width/2)},"circleBkg");function rS(e,t,r,a,i){return e.insert("polygon",":first-child").attr("points",a.map(function(n){return n.x+","+n.y}).join(" ")).attr("transform","translate("+(i.width-t)/2+", "+r+")")}g(rS,"insertPolygonShape");var aW=g(function(e,t,r){const a=r.height,n=a/4,s=r.width-r.padding+2*n,o=[{x:n,y:0},{x:s-n,y:0},{x:s,y:-a/2},{x:s-n,y:-a},{x:n,y:-a},{x:0,y:-a/2}];rS(t,s,a,o,r)},"hexagonBkg"),iW=g(function(e,t,r){t.append("rect").attr("id","node-"+r.id).attr("class","node-bkg node-"+e.type2Str(r.type)).attr("height",r.height).attr("rx",r.padding).attr("ry",r.padding).attr("width",r.width)},"roundedRectBkg"),nW=g(async function(e,t,r,a,i){const n=i.htmlLabels,s=a%(Qq-1),o=t.append("g");r.section=s;let l="section-"+s;s<0&&(l+=" section-root"),o.attr("class",(r.class?r.class+" ":"")+"mindmap-node "+l);const u=o.append("g"),h=o.append("g"),d=r.descr.replace(/(<br\/*>)/g,`
`);await fa(h,d,{useHtmlLabels:n,width:r.width,classes:"mindmap-node-label"},i),n||h.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle");const f=h.node().getBBox(),[p]=ln(i.fontSize);if(r.height=f.height+p*1.1*.5+r.padding,r.width=f.width+2*r.padding,r.icon)if(r.type===e.nodeType.CIRCLE)r.height+=50,r.width+=50,o.append("foreignObject").attr("height","50px").attr("width",r.width).attr("style","text-align: center;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+s+" "+r.icon),h.attr("transform","translate("+r.width/2+", "+(r.height/2-1.5*r.padding)+")");else{r.width+=50;const y=r.height;r.height=Math.max(y,60);const v=Math.abs(r.height-y);o.append("foreignObject").attr("width","60px").attr("height",r.height).attr("style","text-align: center;margin-top:"+v/2+"px;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+s+" "+r.icon),h.attr("transform","translate("+(25+r.width/2)+", "+(v/2+r.padding/2)+")")}else if(n){const y=(r.width-f.width)/2,v=(r.height-f.height)/2;h.attr("transform","translate("+y+", "+v+")")}else{const y=r.width/2,v=r.padding/2;h.attr("transform","translate("+y+", "+v+")")}switch(r.type){case e.nodeType.DEFAULT:Zq(e,u,r,s);break;case e.nodeType.ROUNDED_RECT:iW(e,u,r,s);break;case e.nodeType.RECT:Jq(e,u,r,s);break;case e.nodeType.CIRCLE:u.attr("transform","translate("+r.width/2+", "+ +r.height/2+")"),rW(e,u,r,s);break;case e.nodeType.CLOUD:tW(e,u,r,s);break;case e.nodeType.BANG:eW(e,u,r,s);break;case e.nodeType.HEXAGON:aW(e,u,r,s);break}return e.setElementForId(r.id,o),r.height},"drawNode"),sW=g(function(e,t){const r=e.getElementById(t.id),a=t.x||0,i=t.y||0;r.attr("transform","translate("+a+","+i+")")},"positionNode");ui.use(Fq);async function P1(e,t,r,a,i){await nW(e,t,r,a,i),r.children&&await Promise.all(r.children.map((n,s)=>P1(e,t,n,a<0?s:a,i)))}g(P1,"drawNodes");function aS(e,t){t.edges().map((r,a)=>{const i=r.data();if(r[0]._private.bodyBounds){const n=r[0]._private.rscratch;G.trace("Edge: ",a,i),e.insert("path").attr("d",`M ${n.startX},${n.startY} L ${n.midX},${n.midY} L${n.endX},${n.endY} `).attr("class","edge section-edge-"+i.section+" edge-depth-"+i.depth)}})}g(aS,"drawEdges");function N1(e,t,r,a){t.add({group:"nodes",data:{id:e.id.toString(),labelText:e.descr,height:e.height,width:e.width,level:a,nodeId:e.id,padding:e.padding,type:e.type},position:{x:e.x,y:e.y}}),e.children&&e.children.forEach(i=>{N1(i,t,r,a+1),t.add({group:"edges",data:{id:`${e.id}_${i.id}`,source:e.id,target:i.id,depth:a,section:i.section}})})}g(N1,"addNodes");function iS(e,t){return new Promise(r=>{const a=It("body").append("div").attr("id","cy").attr("style","display:none"),i=ui({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});a.remove(),N1(e,i,t,0),i.nodes().forEach(function(n){n.layoutDimensions=()=>{const s=n.data();return{w:s.width,h:s.height}}}),i.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),i.ready(n=>{G.info("Ready",n),r(i)})})}g(iS,"layoutMindmap");function nS(e,t){t.nodes().map((r,a)=>{const i=r.data();i.x=r.position().x,i.y=r.position().y,sW(e,i);const n=e.getElementById(i.nodeId);G.info("Id:",a,"Position: (",r.position().x,", ",r.position().y,")",i),n.attr("transform",`translate(${r.position().x-i.width/2}, ${r.position().y-i.height/2})`),n.attr("attr",`apa-${a})`)})}g(nS,"positionNodes");var oW=g(async(e,t,r,a)=>{var d,f;G.debug(`Rendering mindmap diagram
`+e);const i=a.db,n=i.getMindmap();if(!n)return;const s=dt();s.htmlLabels=!1;const o=Ii(t),l=o.append("g");l.attr("class","mindmap-edges");const u=o.append("g");u.attr("class","mindmap-nodes"),await P1(i,u,n,-1,s);const h=await iS(n,s);aS(l,h),nS(i,h),Ho(void 0,o,((d=s.mindmap)==null?void 0:d.padding)??Ee.mindmap.padding,((f=s.mindmap)==null?void 0:f.useMaxWidth)??Ee.mindmap.useMaxWidth)},"draw"),lW={draw:oW},cW=g(e=>{let t="";for(let r=0;r<e.THEME_COLOR_LIMIT;r++)e["lineColor"+r]=e["lineColor"+r]||e["cScaleInv"+r],on(e["lineColor"+r])?e["lineColor"+r]=Xt(e["lineColor"+r],20):e["lineColor"+r]=ne(e["lineColor"+r],20);for(let r=0;r<e.THEME_COLOR_LIMIT;r++){const a=""+(17-3*r);t+=`
    .section-${r-1} rect, .section-${r-1} path, .section-${r-1} circle, .section-${r-1} polygon, .section-${r-1} path  {
      fill: ${e["cScale"+r]};
    }
    .section-${r-1} text {
     fill: ${e["cScaleLabel"+r]};
    }
    .node-icon-${r-1} {
      font-size: 40px;
      color: ${e["cScaleLabel"+r]};
    }
    .section-edge-${r-1}{
      stroke: ${e["cScale"+r]};
    }
    .edge-depth-${r-1}{
      stroke-width: ${a};
    }
    .section-${r-1} line {
      stroke: ${e["cScaleInv"+r]} ;
      stroke-width: 3;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return t},"genSections"),uW=g(e=>`
  .edge {
    stroke-width: 3;
  }
  ${cW(e)}
  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {
    fill: ${e.git0};
  }
  .section-root text {
    fill: ${e.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .mindmap-node-label {
    dy: 1em;
    alignment-baseline: middle;
    text-anchor: middle;
    dominant-baseline: middle;
    text-align: center;
  }
`,"getStyles"),hW=uW,dW={db:jq,renderer:lW,parser:Oq,styles:hW};const fW=Object.freeze({__proto__:null,diagram:dW});var Mg=function(){var e=g(function(S,L,_,A){for(_=_||{},A=S.length;A--;_[S[A]]=L);return _},"o"),t=[1,4],r=[1,13],a=[1,12],i=[1,15],n=[1,16],s=[1,20],o=[1,19],l=[6,7,8],u=[1,26],h=[1,24],d=[1,25],f=[6,7,11],p=[1,31],y=[6,7,11,24],v=[1,6,13,16,17,20,23],m=[1,35],x=[1,36],b=[1,6,7,11,13,16,17,20,23],w=[1,38],C={trace:g(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,KANBAN:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,shapeData:15,ICON:16,CLASS:17,nodeWithId:18,nodeWithoutId:19,NODE_DSTART:20,NODE_DESCR:21,NODE_DEND:22,NODE_ID:23,SHAPE_DATA:24,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"KANBAN",11:"EOF",13:"SPACELIST",16:"ICON",17:"CLASS",20:"NODE_DSTART",21:"NODE_DESCR",22:"NODE_DEND",23:"NODE_ID",24:"SHAPE_DATA"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,3],[12,2],[12,2],[12,2],[12,1],[12,2],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[19,3],[18,1],[18,4],[15,2],[15,1]],performAction:g(function(L,_,A,E,D,R,O){var P=R.length-1;switch(D){case 6:case 7:return E;case 8:E.getLogger().trace("Stop NL ");break;case 9:E.getLogger().trace("Stop EOF ");break;case 11:E.getLogger().trace("Stop NL2 ");break;case 12:E.getLogger().trace("Stop EOF2 ");break;case 15:E.getLogger().info("Node: ",R[P-1].id),E.addNode(R[P-2].length,R[P-1].id,R[P-1].descr,R[P-1].type,R[P]);break;case 16:E.getLogger().info("Node: ",R[P].id),E.addNode(R[P-1].length,R[P].id,R[P].descr,R[P].type);break;case 17:E.getLogger().trace("Icon: ",R[P]),E.decorateNode({icon:R[P]});break;case 18:case 23:E.decorateNode({class:R[P]});break;case 19:E.getLogger().trace("SPACELIST");break;case 20:E.getLogger().trace("Node: ",R[P-1].id),E.addNode(0,R[P-1].id,R[P-1].descr,R[P-1].type,R[P]);break;case 21:E.getLogger().trace("Node: ",R[P].id),E.addNode(0,R[P].id,R[P].descr,R[P].type);break;case 22:E.decorateNode({icon:R[P]});break;case 27:E.getLogger().trace("node found ..",R[P-2]),this.$={id:R[P-1],descr:R[P-1],type:E.getType(R[P-2],R[P])};break;case 28:this.$={id:R[P],descr:R[P],type:0};break;case 29:E.getLogger().trace("node found ..",R[P-3]),this.$={id:R[P-3],descr:R[P-1],type:E.getType(R[P-2],R[P])};break;case 30:this.$=R[P-1]+R[P];break;case 31:this.$=R[P];break}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],8:t},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:t},{6:r,7:[1,10],9:9,12:11,13:a,14:14,16:i,17:n,18:17,19:18,20:s,23:o},e(l,[2,3]),{1:[2,2]},e(l,[2,4]),e(l,[2,5]),{1:[2,6],6:r,12:21,13:a,14:14,16:i,17:n,18:17,19:18,20:s,23:o},{6:r,9:22,12:11,13:a,14:14,16:i,17:n,18:17,19:18,20:s,23:o},{6:u,7:h,10:23,11:d},e(f,[2,24],{18:17,19:18,14:27,16:[1,28],17:[1,29],20:s,23:o}),e(f,[2,19]),e(f,[2,21],{15:30,24:p}),e(f,[2,22]),e(f,[2,23]),e(y,[2,25]),e(y,[2,26]),e(y,[2,28],{20:[1,32]}),{21:[1,33]},{6:u,7:h,10:34,11:d},{1:[2,7],6:r,12:21,13:a,14:14,16:i,17:n,18:17,19:18,20:s,23:o},e(v,[2,14],{7:m,11:x}),e(b,[2,8]),e(b,[2,9]),e(b,[2,10]),e(f,[2,16],{15:37,24:p}),e(f,[2,17]),e(f,[2,18]),e(f,[2,20],{24:w}),e(y,[2,31]),{21:[1,39]},{22:[1,40]},e(v,[2,13],{7:m,11:x}),e(b,[2,11]),e(b,[2,12]),e(f,[2,15],{24:w}),e(y,[2,30]),{22:[1,41]},e(y,[2,27]),e(y,[2,29])],defaultActions:{2:[2,1],6:[2,2]},parseError:g(function(L,_){if(_.recoverable)this.trace(L);else{var A=new Error(L);throw A.hash=_,A}},"parseError"),parse:g(function(L){var _=this,A=[0],E=[],D=[null],R=[],O=this.table,P="",$=0,M=0,I=2,F=1,V=R.slice.call(arguments,1),N=Object.create(this.lexer),q={yy:{}};for(var U in this.yy)Object.prototype.hasOwnProperty.call(this.yy,U)&&(q.yy[U]=this.yy[U]);N.setInput(L,q.yy),q.yy.lexer=N,q.yy.parser=this,typeof N.yylloc>"u"&&(N.yylloc={});var X=N.yylloc;R.push(X);var lt=N.options&&N.options.ranges;typeof q.yy.parseError=="function"?this.parseError=q.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function J(H){A.length=A.length-2*H,D.length=D.length-H,R.length=R.length-H}g(J,"popStack");function ct(){var H;return H=E.pop()||N.lex()||F,typeof H!="number"&&(H instanceof Array&&(E=H,H=E.pop()),H=_.symbols_[H]||H),H}g(ct,"lex");for(var yt,ut,Q,K,j={},Y,st,W,bt;;){if(ut=A[A.length-1],this.defaultActions[ut]?Q=this.defaultActions[ut]:((yt===null||typeof yt>"u")&&(yt=ct()),Q=O[ut]&&O[ut][yt]),typeof Q>"u"||!Q.length||!Q[0]){var tt="";bt=[];for(Y in O[ut])this.terminals_[Y]&&Y>I&&bt.push("'"+this.terminals_[Y]+"'");N.showPosition?tt="Parse error on line "+($+1)+`:
`+N.showPosition()+`
Expecting `+bt.join(", ")+", got '"+(this.terminals_[yt]||yt)+"'":tt="Parse error on line "+($+1)+": Unexpected "+(yt==F?"end of input":"'"+(this.terminals_[yt]||yt)+"'"),this.parseError(tt,{text:N.match,token:this.terminals_[yt]||yt,line:N.yylineno,loc:X,expected:bt})}if(Q[0]instanceof Array&&Q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ut+", token: "+yt);switch(Q[0]){case 1:A.push(yt),D.push(N.yytext),R.push(N.yylloc),A.push(Q[1]),yt=null,M=N.yyleng,P=N.yytext,$=N.yylineno,X=N.yylloc;break;case 2:if(st=this.productions_[Q[1]][1],j.$=D[D.length-st],j._$={first_line:R[R.length-(st||1)].first_line,last_line:R[R.length-1].last_line,first_column:R[R.length-(st||1)].first_column,last_column:R[R.length-1].last_column},lt&&(j._$.range=[R[R.length-(st||1)].range[0],R[R.length-1].range[1]]),K=this.performAction.apply(j,[P,M,$,q.yy,Q[1],D,R].concat(V)),typeof K<"u")return K;st&&(A=A.slice(0,-1*st*2),D=D.slice(0,-1*st),R=R.slice(0,-1*st)),A.push(this.productions_[Q[1]][0]),D.push(j.$),R.push(j._$),W=O[A[A.length-2]][A[A.length-1]],A.push(W);break;case 3:return!0}}return!0},"parse")},T=function(){var S={EOF:1,parseError:g(function(_,A){if(this.yy.parser)this.yy.parser.parseError(_,A);else throw new Error(_)},"parseError"),setInput:g(function(L,_){return this.yy=_||this.yy||{},this._input=L,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:g(function(){var L=this._input[0];this.yytext+=L,this.yyleng++,this.offset++,this.match+=L,this.matched+=L;var _=L.match(/(?:\r\n?|\n).*/g);return _?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),L},"input"),unput:g(function(L){var _=L.length,A=L.split(/(?:\r\n?|\n)/g);this._input=L+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-_),this.offset-=_;var E=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),A.length-1&&(this.yylineno-=A.length-1);var D=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:A?(A.length===E.length?this.yylloc.first_column:0)+E[E.length-A.length].length-A[0].length:this.yylloc.first_column-_},this.options.ranges&&(this.yylloc.range=[D[0],D[0]+this.yyleng-_]),this.yyleng=this.yytext.length,this},"unput"),more:g(function(){return this._more=!0,this},"more"),reject:g(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:g(function(L){this.unput(this.match.slice(L))},"less"),pastInput:g(function(){var L=this.matched.substr(0,this.matched.length-this.match.length);return(L.length>20?"...":"")+L.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:g(function(){var L=this.match;return L.length<20&&(L+=this._input.substr(0,20-L.length)),(L.substr(0,20)+(L.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:g(function(){var L=this.pastInput(),_=new Array(L.length+1).join("-");return L+this.upcomingInput()+`
`+_+"^"},"showPosition"),test_match:g(function(L,_){var A,E,D;if(this.options.backtrack_lexer&&(D={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(D.yylloc.range=this.yylloc.range.slice(0))),E=L[0].match(/(?:\r\n?|\n).*/g),E&&(this.yylineno+=E.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:E?E[E.length-1].length-E[E.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+L[0].length},this.yytext+=L[0],this.match+=L[0],this.matches=L,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(L[0].length),this.matched+=L[0],A=this.performAction.call(this,this.yy,this,_,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),A)return A;if(this._backtrack){for(var R in D)this[R]=D[R];return!1}return!1},"test_match"),next:g(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var L,_,A,E;this._more||(this.yytext="",this.match="");for(var D=this._currentRules(),R=0;R<D.length;R++)if(A=this._input.match(this.rules[D[R]]),A&&(!_||A[0].length>_[0].length)){if(_=A,E=R,this.options.backtrack_lexer){if(L=this.test_match(A,D[R]),L!==!1)return L;if(this._backtrack){_=!1;continue}else return!1}else if(!this.options.flex)break}return _?(L=this.test_match(_,D[E]),L!==!1?L:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:g(function(){var _=this.next();return _||this.lex()},"lex"),begin:g(function(_){this.conditionStack.push(_)},"begin"),popState:g(function(){var _=this.conditionStack.length-1;return _>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:g(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:g(function(_){return _=this.conditionStack.length-1-Math.abs(_||0),_>=0?this.conditionStack[_]:"INITIAL"},"topState"),pushState:g(function(_){this.begin(_)},"pushState"),stateStackSize:g(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:g(function(_,A,E,D){switch(E){case 0:return this.pushState("shapeData"),A.yytext="",24;case 1:return this.pushState("shapeDataStr"),24;case 2:return this.popState(),24;case 3:const R=/\n\s*/g;return A.yytext=A.yytext.replace(R,"<br/>"),24;case 4:return 24;case 5:this.popState();break;case 6:return _.getLogger().trace("Found comment",A.yytext),6;case 7:return 8;case 8:this.begin("CLASS");break;case 9:return this.popState(),17;case 10:this.popState();break;case 11:_.getLogger().trace("Begin icon"),this.begin("ICON");break;case 12:return _.getLogger().trace("SPACELINE"),6;case 13:return 7;case 14:return 16;case 15:_.getLogger().trace("end icon"),this.popState();break;case 16:return _.getLogger().trace("Exploding node"),this.begin("NODE"),20;case 17:return _.getLogger().trace("Cloud"),this.begin("NODE"),20;case 18:return _.getLogger().trace("Explosion Bang"),this.begin("NODE"),20;case 19:return _.getLogger().trace("Cloud Bang"),this.begin("NODE"),20;case 20:return this.begin("NODE"),20;case 21:return this.begin("NODE"),20;case 22:return this.begin("NODE"),20;case 23:return this.begin("NODE"),20;case 24:return 13;case 25:return 23;case 26:return 11;case 27:this.begin("NSTR2");break;case 28:return"NODE_DESCR";case 29:this.popState();break;case 30:_.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 31:return _.getLogger().trace("description:",A.yytext),"NODE_DESCR";case 32:this.popState();break;case 33:return this.popState(),_.getLogger().trace("node end ))"),"NODE_DEND";case 34:return this.popState(),_.getLogger().trace("node end )"),"NODE_DEND";case 35:return this.popState(),_.getLogger().trace("node end ...",A.yytext),"NODE_DEND";case 36:return this.popState(),_.getLogger().trace("node end (("),"NODE_DEND";case 37:return this.popState(),_.getLogger().trace("node end (-"),"NODE_DEND";case 38:return this.popState(),_.getLogger().trace("node end (-"),"NODE_DEND";case 39:return this.popState(),_.getLogger().trace("node end (("),"NODE_DEND";case 40:return this.popState(),_.getLogger().trace("node end (("),"NODE_DEND";case 41:return _.getLogger().trace("Long description:",A.yytext),21;case 42:return _.getLogger().trace("Long description:",A.yytext),21}},"anonymous"),rules:[/^(?:@\{)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^\"]+)/i,/^(?:[^}^"]+)/i,/^(?:\})/i,/^(?:\s*%%.*)/i,/^(?:kanban\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}@]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{shapeDataEndBracket:{rules:[],inclusive:!1},shapeDataStr:{rules:[2,3],inclusive:!1},shapeData:{rules:[1,4,5],inclusive:!1},CLASS:{rules:[9,10],inclusive:!1},ICON:{rules:[14,15],inclusive:!1},NSTR2:{rules:[28,29],inclusive:!1},NSTR:{rules:[31,32],inclusive:!1},NODE:{rules:[27,30,33,34,35,36,37,38,39,40,41,42],inclusive:!1},INITIAL:{rules:[0,6,7,8,11,12,13,16,17,18,19,20,21,22,23,24,25,26],inclusive:!0}}};return S}();C.lexer=T;function k(){this.yy={}}return g(k,"Parser"),k.prototype=C,C.Parser=k,new k}();Mg.parser=Mg;var pW=Mg,Aa=[],M1=[],Fg=0,F1={},gW=g(()=>{Aa=[],M1=[],Fg=0,F1={}},"clear"),yW=g(e=>{if(Aa.length===0)return null;const t=Aa[0].level;let r=null;for(let a=Aa.length-1;a>=0;a--)if(Aa[a].level===t&&!r&&(r=Aa[a]),Aa[a].level<t)throw new Error('Items without section detected, found section ("'+Aa[a].label+'")');return e===(r==null?void 0:r.level)?null:r},"getSection"),sS=g(function(){return M1},"getSections"),vW=g(function(){const e=[],t=[],r=sS(),a=dt();for(const i of r){const n={id:i.id,label:qe(i.label??"",a),isGroup:!0,ticket:i.ticket,shape:"kanbanSection",level:i.level,look:a.look};t.push(n);const s=Aa.filter(o=>o.parentId===i.id);for(const o of s){const l={id:o.id,parentId:i.id,label:qe(o.label??"",a),isGroup:!1,ticket:o==null?void 0:o.ticket,priority:o==null?void 0:o.priority,assigned:o==null?void 0:o.assigned,icon:o==null?void 0:o.icon,shape:"kanbanItem",level:o.level,rx:5,ry:5,cssStyles:["text-align: left"]};t.push(l)}}return{nodes:t,edges:e,other:{},config:dt()}},"getData"),mW=g((e,t,r,a,i)=>{var u,h;const n=dt();let s=((u=n.mindmap)==null?void 0:u.padding)??Ee.mindmap.padding;switch(a){case dr.ROUNDED_RECT:case dr.RECT:case dr.HEXAGON:s*=2}const o={id:qe(t,n)||"kbn"+Fg++,level:e,label:qe(r,n),width:((h=n.mindmap)==null?void 0:h.maxNodeWidth)??Ee.mindmap.maxNodeWidth,padding:s,isGroup:!1};if(i!==void 0){let d;i.includes(`
`)?d=i+`
`:d=`{
`+i+`
}`;const f=u0(d,{schema:c0});if(f.shape&&(f.shape!==f.shape.toLowerCase()||f.shape.includes("_")))throw new Error(`No such shape: ${f.shape}. Shape names should be lowercase.`);f!=null&&f.shape&&f.shape==="kanbanItem"&&(o.shape=f==null?void 0:f.shape),f!=null&&f.label&&(o.label=f==null?void 0:f.label),f!=null&&f.icon&&(o.icon=f==null?void 0:f.icon.toString()),f!=null&&f.assigned&&(o.assigned=f==null?void 0:f.assigned.toString()),f!=null&&f.ticket&&(o.ticket=f==null?void 0:f.ticket.toString()),f!=null&&f.priority&&(o.priority=f==null?void 0:f.priority)}const l=yW(e);l?o.parentId=l.id||"kbn"+Fg++:M1.push(o),Aa.push(o)},"addNode"),dr={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},xW=g((e,t)=>{switch(G.debug("In get type",e,t),e){case"[":return dr.RECT;case"(":return t===")"?dr.ROUNDED_RECT:dr.CLOUD;case"((":return dr.CIRCLE;case")":return dr.CLOUD;case"))":return dr.BANG;case"{{":return dr.HEXAGON;default:return dr.DEFAULT}},"getType"),bW=g((e,t)=>{F1[e]=t},"setElementForId"),wW=g(e=>{if(!e)return;const t=dt(),r=Aa[Aa.length-1];e.icon&&(r.icon=qe(e.icon,t)),e.class&&(r.cssClasses=qe(e.class,t))},"decorateNode"),kW=g(e=>{switch(e){case dr.DEFAULT:return"no-border";case dr.RECT:return"rect";case dr.ROUNDED_RECT:return"rounded-rect";case dr.CIRCLE:return"circle";case dr.CLOUD:return"cloud";case dr.BANG:return"bang";case dr.HEXAGON:return"hexgon";default:return"no-border"}},"type2Str"),TW=g(()=>G,"getLogger"),CW=g(e=>F1[e],"getElementById"),SW={clear:gW,addNode:mW,getSections:sS,getData:vW,nodeType:dr,getType:xW,setElementForId:bW,decorateNode:wW,type2Str:kW,getLogger:TW,getElementById:CW},EW=SW,_W=g(async(e,t,r,a)=>{var m,x,b,w,C;G.debug(`Rendering kanban diagram
`+e);const n=a.db.getData(),s=dt();s.htmlLabels=!1;const o=Ii(t),l=o.append("g");l.attr("class","sections");const u=o.append("g");u.attr("class","items");const h=n.nodes.filter(T=>T.isGroup);let d=0;const f=10,p=[];let y=25;for(const T of h){const k=((m=s==null?void 0:s.kanban)==null?void 0:m.sectionWidth)||200;d=d+1,T.x=k*d+(d-1)*f/2,T.width=k,T.y=0,T.height=k*3,T.rx=5,T.ry=5,T.cssClasses=T.cssClasses+" section-"+d;const S=await b0(l,T);y=Math.max(y,(x=S==null?void 0:S.labelBBox)==null?void 0:x.height),p.push(S)}let v=0;for(const T of h){const k=p[v];v=v+1;const S=((b=s==null?void 0:s.kanban)==null?void 0:b.sectionWidth)||200,L=-S*3/2+y;let _=L;const A=n.nodes.filter(R=>R.parentId===T.id);for(const R of A){if(R.isGroup)throw new Error("Groups within groups are not allowed in Kanban diagrams");R.x=T.x,R.width=S-1.5*f;const P=(await Fh(u,R,{config:s})).node().getBBox();R.y=_+P.height/2,await Op(R),_=R.y+P.height/2+f/2}const E=k.cluster.select("rect"),D=Math.max(_-L+3*f,50)+(y-25);E.attr("height",D)}Ho(void 0,o,((w=s.mindmap)==null?void 0:w.padding)??Ee.kanban.padding,((C=s.mindmap)==null?void 0:C.useMaxWidth)??Ee.kanban.useMaxWidth)},"draw"),AW={draw:_W},LW=g(e=>{let t="";for(let a=0;a<e.THEME_COLOR_LIMIT;a++)e["lineColor"+a]=e["lineColor"+a]||e["cScaleInv"+a],on(e["lineColor"+a])?e["lineColor"+a]=Xt(e["lineColor"+a],20):e["lineColor"+a]=ne(e["lineColor"+a],20);const r=g((a,i)=>e.darkMode?ne(a,i):Xt(a,i),"adjuster");for(let a=0;a<e.THEME_COLOR_LIMIT;a++){const i=""+(17-3*a);t+=`
    .section-${a-1} rect, .section-${a-1} path, .section-${a-1} circle, .section-${a-1} polygon, .section-${a-1} path  {
      fill: ${r(e["cScale"+a],10)};
      stroke: ${r(e["cScale"+a],10)};

    }
    .section-${a-1} text {
     fill: ${e["cScaleLabel"+a]};
    }
    .node-icon-${a-1} {
      font-size: 40px;
      color: ${e["cScaleLabel"+a]};
    }
    .section-edge-${a-1}{
      stroke: ${e["cScale"+a]};
    }
    .edge-depth-${a-1}{
      stroke-width: ${i};
    }
    .section-${a-1} line {
      stroke: ${e["cScaleInv"+a]} ;
      stroke-width: 3;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.background};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }

  .kanban-ticket-link {
    fill: ${e.background};
    stroke: ${e.nodeBorder};
    text-decoration: underline;
  }
    `}return t},"genSections"),DW=g(e=>`
  .edge {
    stroke-width: 3;
  }
  ${LW(e)}
  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {
    fill: ${e.git0};
  }
  .section-root text {
    fill: ${e.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .cluster-label, .label {
    color: ${e.textColor};
    fill: ${e.textColor};
    }
  .kanban-label {
    dy: 1em;
    alignment-baseline: middle;
    text-anchor: middle;
    dominant-baseline: middle;
    text-align: center;
  }
`,"getStyles"),BW=DW,RW={db:EW,renderer:AW,parser:pW,styles:BW};const IW=Object.freeze({__proto__:null,diagram:RW});var Og=function(){var e=g(function(o,l,u,h){for(u=u||{},h=o.length;h--;u[o[h]]=l);return u},"o"),t=[1,9],r=[1,10],a=[1,5,10,12],i={trace:g(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SANKEY:4,NEWLINE:5,csv:6,opt_eof:7,record:8,csv_tail:9,EOF:10,"field[source]":11,COMMA:12,"field[target]":13,"field[value]":14,field:15,escaped:16,non_escaped:17,DQUOTE:18,ESCAPED_TEXT:19,NON_ESCAPED_TEXT:20,$accept:0,$end:1},terminals_:{2:"error",4:"SANKEY",5:"NEWLINE",10:"EOF",11:"field[source]",12:"COMMA",13:"field[target]",14:"field[value]",18:"DQUOTE",19:"ESCAPED_TEXT",20:"NON_ESCAPED_TEXT"},productions_:[0,[3,4],[6,2],[9,2],[9,0],[7,1],[7,0],[8,5],[15,1],[15,1],[16,3],[17,1]],performAction:g(function(l,u,h,d,f,p,y){var v=p.length-1;switch(f){case 7:const m=d.findOrCreateNode(p[v-4].trim().replaceAll('""','"')),x=d.findOrCreateNode(p[v-2].trim().replaceAll('""','"')),b=parseFloat(p[v].trim());d.addLink(m,x,b);break;case 8:case 9:case 11:this.$=p[v];break;case 10:this.$=p[v-1];break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},{5:[1,3]},{6:4,8:5,15:6,16:7,17:8,18:t,20:r},{1:[2,6],7:11,10:[1,12]},e(r,[2,4],{9:13,5:[1,14]}),{12:[1,15]},e(a,[2,8]),e(a,[2,9]),{19:[1,16]},e(a,[2,11]),{1:[2,1]},{1:[2,5]},e(r,[2,2]),{6:17,8:5,15:6,16:7,17:8,18:t,20:r},{15:18,16:7,17:8,18:t,20:r},{18:[1,19]},e(r,[2,3]),{12:[1,20]},e(a,[2,10]),{15:21,16:7,17:8,18:t,20:r},e([1,5,10],[2,7])],defaultActions:{11:[2,1],12:[2,5]},parseError:g(function(l,u){if(u.recoverable)this.trace(l);else{var h=new Error(l);throw h.hash=u,h}},"parseError"),parse:g(function(l){var u=this,h=[0],d=[],f=[null],p=[],y=this.table,v="",m=0,x=0,b=2,w=1,C=p.slice.call(arguments,1),T=Object.create(this.lexer),k={yy:{}};for(var S in this.yy)Object.prototype.hasOwnProperty.call(this.yy,S)&&(k.yy[S]=this.yy[S]);T.setInput(l,k.yy),k.yy.lexer=T,k.yy.parser=this,typeof T.yylloc>"u"&&(T.yylloc={});var L=T.yylloc;p.push(L);var _=T.options&&T.options.ranges;typeof k.yy.parseError=="function"?this.parseError=k.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function A(q){h.length=h.length-2*q,f.length=f.length-q,p.length=p.length-q}g(A,"popStack");function E(){var q;return q=d.pop()||T.lex()||w,typeof q!="number"&&(q instanceof Array&&(d=q,q=d.pop()),q=u.symbols_[q]||q),q}g(E,"lex");for(var D,R,O,P,$={},M,I,F,V;;){if(R=h[h.length-1],this.defaultActions[R]?O=this.defaultActions[R]:((D===null||typeof D>"u")&&(D=E()),O=y[R]&&y[R][D]),typeof O>"u"||!O.length||!O[0]){var N="";V=[];for(M in y[R])this.terminals_[M]&&M>b&&V.push("'"+this.terminals_[M]+"'");T.showPosition?N="Parse error on line "+(m+1)+`:
`+T.showPosition()+`
Expecting `+V.join(", ")+", got '"+(this.terminals_[D]||D)+"'":N="Parse error on line "+(m+1)+": Unexpected "+(D==w?"end of input":"'"+(this.terminals_[D]||D)+"'"),this.parseError(N,{text:T.match,token:this.terminals_[D]||D,line:T.yylineno,loc:L,expected:V})}if(O[0]instanceof Array&&O.length>1)throw new Error("Parse Error: multiple actions possible at state: "+R+", token: "+D);switch(O[0]){case 1:h.push(D),f.push(T.yytext),p.push(T.yylloc),h.push(O[1]),D=null,x=T.yyleng,v=T.yytext,m=T.yylineno,L=T.yylloc;break;case 2:if(I=this.productions_[O[1]][1],$.$=f[f.length-I],$._$={first_line:p[p.length-(I||1)].first_line,last_line:p[p.length-1].last_line,first_column:p[p.length-(I||1)].first_column,last_column:p[p.length-1].last_column},_&&($._$.range=[p[p.length-(I||1)].range[0],p[p.length-1].range[1]]),P=this.performAction.apply($,[v,x,m,k.yy,O[1],f,p].concat(C)),typeof P<"u")return P;I&&(h=h.slice(0,-1*I*2),f=f.slice(0,-1*I),p=p.slice(0,-1*I)),h.push(this.productions_[O[1]][0]),f.push($.$),p.push($._$),F=y[h[h.length-2]][h[h.length-1]],h.push(F);break;case 3:return!0}}return!0},"parse")},n=function(){var o={EOF:1,parseError:g(function(u,h){if(this.yy.parser)this.yy.parser.parseError(u,h);else throw new Error(u)},"parseError"),setInput:g(function(l,u){return this.yy=u||this.yy||{},this._input=l,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:g(function(){var l=this._input[0];this.yytext+=l,this.yyleng++,this.offset++,this.match+=l,this.matched+=l;var u=l.match(/(?:\r\n?|\n).*/g);return u?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),l},"input"),unput:g(function(l){var u=l.length,h=l.split(/(?:\r\n?|\n)/g);this._input=l+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-u),this.offset-=u;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),h.length-1&&(this.yylineno-=h.length-1);var f=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:h?(h.length===d.length?this.yylloc.first_column:0)+d[d.length-h.length].length-h[0].length:this.yylloc.first_column-u},this.options.ranges&&(this.yylloc.range=[f[0],f[0]+this.yyleng-u]),this.yyleng=this.yytext.length,this},"unput"),more:g(function(){return this._more=!0,this},"more"),reject:g(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:g(function(l){this.unput(this.match.slice(l))},"less"),pastInput:g(function(){var l=this.matched.substr(0,this.matched.length-this.match.length);return(l.length>20?"...":"")+l.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:g(function(){var l=this.match;return l.length<20&&(l+=this._input.substr(0,20-l.length)),(l.substr(0,20)+(l.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:g(function(){var l=this.pastInput(),u=new Array(l.length+1).join("-");return l+this.upcomingInput()+`
`+u+"^"},"showPosition"),test_match:g(function(l,u){var h,d,f;if(this.options.backtrack_lexer&&(f={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(f.yylloc.range=this.yylloc.range.slice(0))),d=l[0].match(/(?:\r\n?|\n).*/g),d&&(this.yylineno+=d.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:d?d[d.length-1].length-d[d.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+l[0].length},this.yytext+=l[0],this.match+=l[0],this.matches=l,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(l[0].length),this.matched+=l[0],h=this.performAction.call(this,this.yy,this,u,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),h)return h;if(this._backtrack){for(var p in f)this[p]=f[p];return!1}return!1},"test_match"),next:g(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var l,u,h,d;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),p=0;p<f.length;p++)if(h=this._input.match(this.rules[f[p]]),h&&(!u||h[0].length>u[0].length)){if(u=h,d=p,this.options.backtrack_lexer){if(l=this.test_match(h,f[p]),l!==!1)return l;if(this._backtrack){u=!1;continue}else return!1}else if(!this.options.flex)break}return u?(l=this.test_match(u,f[d]),l!==!1?l:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:g(function(){var u=this.next();return u||this.lex()},"lex"),begin:g(function(u){this.conditionStack.push(u)},"begin"),popState:g(function(){var u=this.conditionStack.length-1;return u>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:g(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:g(function(u){return u=this.conditionStack.length-1-Math.abs(u||0),u>=0?this.conditionStack[u]:"INITIAL"},"topState"),pushState:g(function(u){this.begin(u)},"pushState"),stateStackSize:g(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:g(function(u,h,d,f){switch(d){case 0:return this.pushState("csv"),4;case 1:return 10;case 2:return 5;case 3:return 12;case 4:return this.pushState("escaped_text"),18;case 5:return 20;case 6:return this.popState("escaped_text"),18;case 7:return 19}},"anonymous"),rules:[/^(?:sankey-beta\b)/i,/^(?:$)/i,/^(?:((\u000D\u000A)|(\u000A)))/i,/^(?:(\u002C))/i,/^(?:(\u0022))/i,/^(?:([\u0020-\u0021\u0023-\u002B\u002D-\u007E])*)/i,/^(?:(\u0022)(?!(\u0022)))/i,/^(?:(([\u0020-\u0021\u0023-\u002B\u002D-\u007E])|(\u002C)|(\u000D)|(\u000A)|(\u0022)(\u0022))*)/i],conditions:{csv:{rules:[1,2,3,4,5,6,7],inclusive:!1},escaped_text:{rules:[6,7],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7],inclusive:!0}}};return o}();i.lexer=n;function s(){this.yy={}}return g(s,"Parser"),s.prototype=i,i.Parser=s,new s}();Og.parser=Og;var wh=Og,fd=[],pd=[],kh=new Map,PW=g(()=>{fd=[],pd=[],kh=new Map,xr()},"clear"),ko,NW=(ko=class{constructor(t,r,a=0){this.source=t,this.target=r,this.value=a}},g(ko,"SankeyLink"),ko),MW=g((e,t,r)=>{fd.push(new NW(e,t,r))},"addLink"),To,FW=(To=class{constructor(t){this.ID=t}},g(To,"SankeyNode"),To),OW=g(e=>{e=Mt.sanitizeText(e,dt());let t=kh.get(e);return t===void 0&&(t=new FW(e),kh.set(e,t),pd.push(t)),t},"findOrCreateNode"),$W=g(()=>pd,"getNodes"),VW=g(()=>fd,"getLinks"),zW=g(()=>({nodes:pd.map(e=>({id:e.ID})),links:fd.map(e=>({source:e.source.ID,target:e.target.ID,value:e.value}))}),"getGraph"),qW={nodesMap:kh,getConfig:g(()=>dt().sankey,"getConfig"),getNodes:$W,getLinks:VW,getGraph:zW,addLink:MW,findOrCreateNode:OW,getAccTitle:Sr,setAccTitle:vr,getAccDescription:_r,setAccDescription:Er,getDiagramTitle:br,setDiagramTitle:Mr,clear:PW},Ei,P2=(Ei=class{static next(t){return new Ei(t+ ++Ei.count)}constructor(t){this.id=t,this.href=`#${t}`}toString(){return"url("+this.href+")"}},g(Ei,"Uid"),Ei.count=0,Ei),WW={left:ME,right:NE,center:PE,justify:IE},GW=g(function(e,t,r,a){const{securityLevel:i,sankey:n}=dt(),s=_x.sankey;let o;i==="sandbox"&&(o=It("#i"+t));const l=i==="sandbox"?It(o.nodes()[0].contentDocument.body):It("body"),u=i==="sandbox"?l.select(`[id="${t}"]`):It(`[id="${t}"]`),h=(n==null?void 0:n.width)??s.width,d=(n==null?void 0:n.height)??s.width,f=(n==null?void 0:n.useMaxWidth)??s.useMaxWidth,p=(n==null?void 0:n.nodeAlignment)??s.nodeAlignment,y=(n==null?void 0:n.prefix)??s.prefix,v=(n==null?void 0:n.suffix)??s.suffix,m=(n==null?void 0:n.showValues)??s.showValues,x=a.db.getGraph(),b=WW[p];RE().nodeId(A=>A.id).nodeWidth(10).nodePadding(10+(m?15:0)).nodeAlign(b).extent([[0,0],[h,d]])(x);const T=ux(FE);u.append("g").attr("class","nodes").selectAll(".node").data(x.nodes).join("g").attr("class","node").attr("id",A=>(A.uid=P2.next("node-")).id).attr("transform",function(A){return"translate("+A.x0+","+A.y0+")"}).attr("x",A=>A.x0).attr("y",A=>A.y0).append("rect").attr("height",A=>A.y1-A.y0).attr("width",A=>A.x1-A.x0).attr("fill",A=>T(A.id));const k=g(({id:A,value:E})=>m?`${A}
${y}${Math.round(E*100)/100}${v}`:A,"getText");u.append("g").attr("class","node-labels").attr("font-size",14).selectAll("text").data(x.nodes).join("text").attr("x",A=>A.x0<h/2?A.x1+6:A.x0-6).attr("y",A=>(A.y1+A.y0)/2).attr("dy",`${m?"0":"0.35"}em`).attr("text-anchor",A=>A.x0<h/2?"start":"end").text(k);const S=u.append("g").attr("class","links").attr("fill","none").attr("stroke-opacity",.5).selectAll(".link").data(x.links).join("g").attr("class","link").style("mix-blend-mode","multiply"),L=(n==null?void 0:n.linkColor)??"gradient";if(L==="gradient"){const A=S.append("linearGradient").attr("id",E=>(E.uid=P2.next("linearGradient-")).id).attr("gradientUnits","userSpaceOnUse").attr("x1",E=>E.source.x1).attr("x2",E=>E.target.x0);A.append("stop").attr("offset","0%").attr("stop-color",E=>T(E.source.id)),A.append("stop").attr("offset","100%").attr("stop-color",E=>T(E.target.id))}let _;switch(L){case"gradient":_=g(A=>A.uid,"coloring");break;case"source":_=g(A=>T(A.source.id),"coloring");break;case"target":_=g(A=>T(A.target.id),"coloring");break;default:_=L}S.append("path").attr("d",OE()).attr("stroke",_).attr("stroke-width",A=>Math.max(1,A.width)),Ho(void 0,u,0,f)},"draw"),HW={draw:GW},YW=g(e=>e.replaceAll(/^[^\S\n\r]+|[^\S\n\r]+$/g,"").replaceAll(/([\n\r])+/g,`
`).trim(),"prepareTextForParsing"),UW=g(e=>`.label {
      font-family: ${e.fontFamily};
    }`,"getStyles"),XW=UW,KW=wh.parse.bind(wh);wh.parse=e=>KW(YW(e));var jW={styles:XW,parser:wh,db:qW,renderer:HW};const QW=Object.freeze({__proto__:null,diagram:jW});var oS={packet:[]},O1=structuredClone(oS),ZW=Ee.packet,JW=g(()=>{const e=Pa({...ZW,...$e().packet});return e.showBits&&(e.paddingY+=10),e},"getConfig"),tG=g(()=>O1.packet,"getPacket"),eG=g(e=>{e.length>0&&O1.packet.push(e)},"pushWord"),rG=g(()=>{xr(),O1=structuredClone(oS)},"clear"),ms={pushWord:eG,getPacket:tG,getConfig:JW,clear:rG,setAccTitle:vr,getAccTitle:Sr,setDiagramTitle:Mr,getDiagramTitle:br,getAccDescription:_r,setAccDescription:Er},aG=1e4,iG=g(e=>{Xo(e,ms);let t=-1,r=[],a=1;const{bitsPerRow:i}=ms.getConfig();for(let{start:n,end:s,label:o}of e.blocks){if(s&&s<n)throw new Error(`Packet block ${n} - ${s} is invalid. End must be greater than start.`);if(n!==t+1)throw new Error(`Packet block ${n} - ${s??n} is not contiguous. It should start from ${t+1}.`);for(t=s??n,G.debug(`Packet block ${n} - ${t} with label ${o}`);r.length<=i+1&&ms.getPacket().length<aG;){const[l,u]=nG({start:n,end:s,label:o},a,i);if(r.push(l),l.end+1===a*i&&(ms.pushWord(r),r=[],a++),!u)break;({start:n,end:s,label:o}=u)}}ms.pushWord(r)},"populate"),nG=g((e,t,r)=>{if(e.end===void 0&&(e.end=e.start),e.start>e.end)throw new Error(`Block start ${e.start} is greater than block end ${e.end}.`);return e.end+1<=t*r?[e,void 0]:[{start:e.start,end:t*r-1,label:e.label},{start:t*r,end:e.end,label:e.label}]},"getNextFittingBlock"),sG={parse:g(async e=>{const t=await Zn("packet",e);G.debug(t),iG(t)},"parse")},oG=g((e,t,r,a)=>{const i=a.db,n=i.getConfig(),{rowHeight:s,paddingY:o,bitWidth:l,bitsPerRow:u}=n,h=i.getPacket(),d=i.getDiagramTitle(),f=s+o,p=f*(h.length+1)-(d?0:s),y=l*u+2,v=Ii(t);v.attr("viewbox",`0 0 ${y} ${p}`),da(v,p,y,n.useMaxWidth);for(const[m,x]of h.entries())lG(v,x,m,n);v.append("text").text(d).attr("x",y/2).attr("y",p-f/2).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","packetTitle")},"draw"),lG=g((e,t,r,{rowHeight:a,paddingX:i,paddingY:n,bitWidth:s,bitsPerRow:o,showBits:l})=>{const u=e.append("g"),h=r*(a+n)+n;for(const d of t){const f=d.start%o*s+1,p=(d.end-d.start+1)*s-i;if(u.append("rect").attr("x",f).attr("y",h).attr("width",p).attr("height",a).attr("class","packetBlock"),u.append("text").attr("x",f+p/2).attr("y",h+a/2).attr("class","packetLabel").attr("dominant-baseline","middle").attr("text-anchor","middle").text(d.label),!l)continue;const y=d.end===d.start,v=h-2;u.append("text").attr("x",f+(y?p/2:0)).attr("y",v).attr("class","packetByte start").attr("dominant-baseline","auto").attr("text-anchor",y?"middle":"start").text(d.start),y||u.append("text").attr("x",f+p).attr("y",v).attr("class","packetByte end").attr("dominant-baseline","auto").attr("text-anchor","end").text(d.end)}},"drawWord"),cG={draw:oG},uG={byteFontSize:"10px",startByteColor:"black",endByteColor:"black",labelColor:"black",labelFontSize:"12px",titleColor:"black",titleFontSize:"14px",blockStrokeColor:"black",blockStrokeWidth:"1",blockFillColor:"#efefef"},hG=g(({packet:e}={})=>{const t=Pa(uG,e);return`
	.packetByte {
		font-size: ${t.byteFontSize};
	}
	.packetByte.start {
		fill: ${t.startByteColor};
	}
	.packetByte.end {
		fill: ${t.endByteColor};
	}
	.packetLabel {
		fill: ${t.labelColor};
		font-size: ${t.labelFontSize};
	}
	.packetTitle {
		fill: ${t.titleColor};
		font-size: ${t.titleFontSize};
	}
	.packetBlock {
		stroke: ${t.blockStrokeColor};
		stroke-width: ${t.blockStrokeWidth};
		fill: ${t.blockFillColor};
	}
	`},"styles"),dG={parser:sG,db:ms,renderer:cG,styles:hG};const fG=Object.freeze({__proto__:null,diagram:dG});var xs={showLegend:!0,ticks:5,max:null,min:0,graticule:"circle"},lS={axes:[],curves:[],options:xs},as=structuredClone(lS),pG=Ee.radar,gG=g(()=>Pa({...pG,...$e().radar}),"getConfig"),cS=g(()=>as.axes,"getAxes"),yG=g(()=>as.curves,"getCurves"),vG=g(()=>as.options,"getOptions"),mG=g(e=>{as.axes=e.map(t=>({name:t.name,label:t.label??t.name}))},"setAxes"),xG=g(e=>{as.curves=e.map(t=>({name:t.name,label:t.label??t.name,entries:bG(t.entries)}))},"setCurves"),bG=g(e=>{if(e[0].axis==null)return e.map(r=>r.value);const t=cS();if(t.length===0)throw new Error("Axes must be populated before curves for reference entries");return t.map(r=>{const a=e.find(i=>{var n;return((n=i.axis)==null?void 0:n.$refText)===r.name});if(a===void 0)throw new Error("Missing entry for axis "+r.label);return a.value})},"computeCurveEntries"),wG=g(e=>{var r,a,i,n,s;const t=e.reduce((o,l)=>(o[l.name]=l,o),{});as.options={showLegend:((r=t.showLegend)==null?void 0:r.value)??xs.showLegend,ticks:((a=t.ticks)==null?void 0:a.value)??xs.ticks,max:((i=t.max)==null?void 0:i.value)??xs.max,min:((n=t.min)==null?void 0:n.value)??xs.min,graticule:((s=t.graticule)==null?void 0:s.value)??xs.graticule}},"setOptions"),kG=g(()=>{xr(),as=structuredClone(lS)},"clear"),El={getAxes:cS,getCurves:yG,getOptions:vG,setAxes:mG,setCurves:xG,setOptions:wG,getConfig:gG,clear:kG,setAccTitle:vr,getAccTitle:Sr,setDiagramTitle:Mr,getDiagramTitle:br,getAccDescription:_r,setAccDescription:Er},TG=g(e=>{Xo(e,El);const{axes:t,curves:r,options:a}=e;El.setAxes(t),El.setCurves(r),El.setOptions(a)},"populate"),CG={parse:g(async e=>{const t=await Zn("radar",e);G.debug(t),TG(t)},"parse")},SG=g((e,t,r,a)=>{const i=a.db,n=i.getAxes(),s=i.getCurves(),o=i.getOptions(),l=i.getConfig(),u=i.getDiagramTitle(),h=Ii(t),d=EG(h,l),f=o.max??Math.max(...s.map(v=>Math.max(...v.entries))),p=o.min,y=Math.min(l.width,l.height)/2;_G(d,n,y,o.ticks,o.graticule),AG(d,n,y,l),uS(d,n,s,p,f,o.graticule,l),fS(d,s,o.showLegend,l),d.append("text").attr("class","radarTitle").text(u).attr("x",0).attr("y",-l.height/2-l.marginTop)},"draw"),EG=g((e,t)=>{const r=t.width+t.marginLeft+t.marginRight,a=t.height+t.marginTop+t.marginBottom,i={x:t.marginLeft+t.width/2,y:t.marginTop+t.height/2};return e.attr("viewbox",`0 0 ${r} ${a}`).attr("width",r).attr("height",a),e.append("g").attr("transform",`translate(${i.x}, ${i.y})`)},"drawFrame"),_G=g((e,t,r,a,i)=>{if(i==="circle")for(let n=0;n<a;n++){const s=r*(n+1)/a;e.append("circle").attr("r",s).attr("class","radarGraticule")}else if(i==="polygon"){const n=t.length;for(let s=0;s<a;s++){const o=r*(s+1)/a,l=t.map((u,h)=>{const d=2*h*Math.PI/n-Math.PI/2,f=o*Math.cos(d),p=o*Math.sin(d);return`${f},${p}`}).join(" ");e.append("polygon").attr("points",l).attr("class","radarGraticule")}}},"drawGraticule"),AG=g((e,t,r,a)=>{const i=t.length;for(let n=0;n<i;n++){const s=t[n].label,o=2*n*Math.PI/i-Math.PI/2;e.append("line").attr("x1",0).attr("y1",0).attr("x2",r*a.axisScaleFactor*Math.cos(o)).attr("y2",r*a.axisScaleFactor*Math.sin(o)).attr("class","radarAxisLine"),e.append("text").text(s).attr("x",r*a.axisLabelFactor*Math.cos(o)).attr("y",r*a.axisLabelFactor*Math.sin(o)).attr("class","radarAxisLabel")}},"drawAxes");function uS(e,t,r,a,i,n,s){const o=t.length,l=Math.min(s.width,s.height)/2;r.forEach((u,h)=>{if(u.entries.length!==o)return;const d=u.entries.map((f,p)=>{const y=2*Math.PI*p/o-Math.PI/2,v=hS(f,a,i,l),m=v*Math.cos(y),x=v*Math.sin(y);return{x:m,y:x}});n==="circle"?e.append("path").attr("d",dS(d,s.curveTension)).attr("class",`radarCurve-${h}`):n==="polygon"&&e.append("polygon").attr("points",d.map(f=>`${f.x},${f.y}`).join(" ")).attr("class",`radarCurve-${h}`)})}g(uS,"drawCurves");function hS(e,t,r,a){const i=Math.min(Math.max(e,t),r);return a*(i-t)/(r-t)}g(hS,"relativeRadius");function dS(e,t){const r=e.length;let a=`M${e[0].x},${e[0].y}`;for(let i=0;i<r;i++){const n=e[(i-1+r)%r],s=e[i],o=e[(i+1)%r],l=e[(i+2)%r],u={x:s.x+(o.x-n.x)*t,y:s.y+(o.y-n.y)*t},h={x:o.x-(l.x-s.x)*t,y:o.y-(l.y-s.y)*t};a+=` C${u.x},${u.y} ${h.x},${h.y} ${o.x},${o.y}`}return`${a} Z`}g(dS,"closedRoundCurve");function fS(e,t,r,a){if(!r)return;const i=(a.width/2+a.marginRight)*3/4,n=-(a.height/2+a.marginTop)*3/4,s=20;t.forEach((o,l)=>{const u=e.append("g").attr("transform",`translate(${i}, ${n+l*s})`);u.append("rect").attr("width",12).attr("height",12).attr("class",`radarLegendBox-${l}`),u.append("text").attr("x",16).attr("y",0).attr("class","radarLegendText").text(o.label)})}g(fS,"drawLegend");var LG={draw:SG},DG=g((e,t)=>{let r="";for(let a=0;a<e.THEME_COLOR_LIMIT;a++){const i=e[`cScale${a}`];r+=`
		.radarCurve-${a} {
			color: ${i};
			fill: ${i};
			fill-opacity: ${t.curveOpacity};
			stroke: ${i};
			stroke-width: ${t.curveStrokeWidth};
		}
		.radarLegendBox-${a} {
			fill: ${i};
			fill-opacity: ${t.curveOpacity};
			stroke: ${i};
		}
		`}return r},"genIndexStyles"),BG=g(e=>{const t=Dh(),r=$e(),a=Pa(t,r.themeVariables),i=Pa(a.radar,e);return{themeVariables:a,radarOptions:i}},"buildRadarStyleOptions"),RG=g(({radar:e}={})=>{const{themeVariables:t,radarOptions:r}=BG(e);return`
	.radarTitle {
		font-size: ${t.fontSize};
		color: ${t.titleColor};
		dominant-baseline: hanging;
		text-anchor: middle;
	}
	.radarAxisLine {
		stroke: ${r.axisColor};
		stroke-width: ${r.axisStrokeWidth};
	}
	.radarAxisLabel {
		dominant-baseline: middle;
		text-anchor: middle;
		font-size: ${r.axisLabelFontSize}px;
		color: ${r.axisColor};
	}
	.radarGraticule {
		fill: ${r.graticuleColor};
		fill-opacity: ${r.graticuleOpacity};
		stroke: ${r.graticuleColor};
		stroke-width: ${r.graticuleStrokeWidth};
	}
	.radarLegendText {
		text-anchor: start;
		font-size: ${r.legendFontSize}px;
		dominant-baseline: hanging;
	}
	${DG(t,r)}
	`},"styles"),IG={parser:CG,db:El,renderer:LG,styles:RG};const PG=Object.freeze({__proto__:null,diagram:IG});var $g=function(){var e=g(function(w,C,T,k){for(T=T||{},k=w.length;k--;T[w[k]]=C);return T},"o"),t=[1,7],r=[1,13],a=[1,14],i=[1,15],n=[1,19],s=[1,16],o=[1,17],l=[1,18],u=[8,30],h=[8,21,28,29,30,31,32,40,44,47],d=[1,23],f=[1,24],p=[8,15,16,21,28,29,30,31,32,40,44,47],y=[8,15,16,21,27,28,29,30,31,32,40,44,47],v=[1,49],m={trace:g(function(){},"trace"),yy:{},symbols_:{error:2,spaceLines:3,SPACELINE:4,NL:5,separator:6,SPACE:7,EOF:8,start:9,BLOCK_DIAGRAM_KEY:10,document:11,stop:12,statement:13,link:14,LINK:15,START_LINK:16,LINK_LABEL:17,STR:18,nodeStatement:19,columnsStatement:20,SPACE_BLOCK:21,blockStatement:22,classDefStatement:23,cssClassStatement:24,styleStatement:25,node:26,SIZE:27,COLUMNS:28,"id-block":29,end:30,block:31,NODE_ID:32,nodeShapeNLabel:33,dirList:34,DIR:35,NODE_DSTART:36,NODE_DEND:37,BLOCK_ARROW_START:38,BLOCK_ARROW_END:39,classDef:40,CLASSDEF_ID:41,CLASSDEF_STYLEOPTS:42,DEFAULT:43,class:44,CLASSENTITY_IDS:45,STYLECLASS:46,style:47,STYLE_ENTITY_IDS:48,STYLE_DEFINITION_DATA:49,$accept:0,$end:1},terminals_:{2:"error",4:"SPACELINE",5:"NL",7:"SPACE",8:"EOF",10:"BLOCK_DIAGRAM_KEY",15:"LINK",16:"START_LINK",17:"LINK_LABEL",18:"STR",21:"SPACE_BLOCK",27:"SIZE",28:"COLUMNS",29:"id-block",30:"end",31:"block",32:"NODE_ID",35:"DIR",36:"NODE_DSTART",37:"NODE_DEND",38:"BLOCK_ARROW_START",39:"BLOCK_ARROW_END",40:"classDef",41:"CLASSDEF_ID",42:"CLASSDEF_STYLEOPTS",43:"DEFAULT",44:"class",45:"CLASSENTITY_IDS",46:"STYLECLASS",47:"style",48:"STYLE_ENTITY_IDS",49:"STYLE_DEFINITION_DATA"},productions_:[0,[3,1],[3,2],[3,2],[6,1],[6,1],[6,1],[9,3],[12,1],[12,1],[12,2],[12,2],[11,1],[11,2],[14,1],[14,4],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[19,3],[19,2],[19,1],[20,1],[22,4],[22,3],[26,1],[26,2],[34,1],[34,2],[33,3],[33,4],[23,3],[23,3],[24,3],[25,3]],performAction:g(function(C,T,k,S,L,_,A){var E=_.length-1;switch(L){case 4:S.getLogger().debug("Rule: separator (NL) ");break;case 5:S.getLogger().debug("Rule: separator (Space) ");break;case 6:S.getLogger().debug("Rule: separator (EOF) ");break;case 7:S.getLogger().debug("Rule: hierarchy: ",_[E-1]),S.setHierarchy(_[E-1]);break;case 8:S.getLogger().debug("Stop NL ");break;case 9:S.getLogger().debug("Stop EOF ");break;case 10:S.getLogger().debug("Stop NL2 ");break;case 11:S.getLogger().debug("Stop EOF2 ");break;case 12:S.getLogger().debug("Rule: statement: ",_[E]),typeof _[E].length=="number"?this.$=_[E]:this.$=[_[E]];break;case 13:S.getLogger().debug("Rule: statement #2: ",_[E-1]),this.$=[_[E-1]].concat(_[E]);break;case 14:S.getLogger().debug("Rule: link: ",_[E],C),this.$={edgeTypeStr:_[E],label:""};break;case 15:S.getLogger().debug("Rule: LABEL link: ",_[E-3],_[E-1],_[E]),this.$={edgeTypeStr:_[E],label:_[E-1]};break;case 18:const D=parseInt(_[E]),R=S.generateId();this.$={id:R,type:"space",label:"",width:D,children:[]};break;case 23:S.getLogger().debug("Rule: (nodeStatement link node) ",_[E-2],_[E-1],_[E]," typestr: ",_[E-1].edgeTypeStr);const O=S.edgeStrToEdgeData(_[E-1].edgeTypeStr);this.$=[{id:_[E-2].id,label:_[E-2].label,type:_[E-2].type,directions:_[E-2].directions},{id:_[E-2].id+"-"+_[E].id,start:_[E-2].id,end:_[E].id,label:_[E-1].label,type:"edge",directions:_[E].directions,arrowTypeEnd:O,arrowTypeStart:"arrow_open"},{id:_[E].id,label:_[E].label,type:S.typeStr2Type(_[E].typeStr),directions:_[E].directions}];break;case 24:S.getLogger().debug("Rule: nodeStatement (abc88 node size) ",_[E-1],_[E]),this.$={id:_[E-1].id,label:_[E-1].label,type:S.typeStr2Type(_[E-1].typeStr),directions:_[E-1].directions,widthInColumns:parseInt(_[E],10)};break;case 25:S.getLogger().debug("Rule: nodeStatement (node) ",_[E]),this.$={id:_[E].id,label:_[E].label,type:S.typeStr2Type(_[E].typeStr),directions:_[E].directions,widthInColumns:1};break;case 26:S.getLogger().debug("APA123",this?this:"na"),S.getLogger().debug("COLUMNS: ",_[E]),this.$={type:"column-setting",columns:_[E]==="auto"?-1:parseInt(_[E])};break;case 27:S.getLogger().debug("Rule: id-block statement : ",_[E-2],_[E-1]),S.generateId(),this.$={..._[E-2],type:"composite",children:_[E-1]};break;case 28:S.getLogger().debug("Rule: blockStatement : ",_[E-2],_[E-1],_[E]);const P=S.generateId();this.$={id:P,type:"composite",label:"",children:_[E-1]};break;case 29:S.getLogger().debug("Rule: node (NODE_ID separator): ",_[E]),this.$={id:_[E]};break;case 30:S.getLogger().debug("Rule: node (NODE_ID nodeShapeNLabel separator): ",_[E-1],_[E]),this.$={id:_[E-1],label:_[E].label,typeStr:_[E].typeStr,directions:_[E].directions};break;case 31:S.getLogger().debug("Rule: dirList: ",_[E]),this.$=[_[E]];break;case 32:S.getLogger().debug("Rule: dirList: ",_[E-1],_[E]),this.$=[_[E-1]].concat(_[E]);break;case 33:S.getLogger().debug("Rule: nodeShapeNLabel: ",_[E-2],_[E-1],_[E]),this.$={typeStr:_[E-2]+_[E],label:_[E-1]};break;case 34:S.getLogger().debug("Rule: BLOCK_ARROW nodeShapeNLabel: ",_[E-3],_[E-2]," #3:",_[E-1],_[E]),this.$={typeStr:_[E-3]+_[E],label:_[E-2],directions:_[E-1]};break;case 35:case 36:this.$={type:"classDef",id:_[E-1].trim(),css:_[E].trim()};break;case 37:this.$={type:"applyClass",id:_[E-1].trim(),styleClass:_[E].trim()};break;case 38:this.$={type:"applyStyles",id:_[E-1].trim(),stylesStr:_[E].trim()};break}},"anonymous"),table:[{9:1,10:[1,2]},{1:[3]},{11:3,13:4,19:5,20:6,21:t,22:8,23:9,24:10,25:11,26:12,28:r,29:a,31:i,32:n,40:s,44:o,47:l},{8:[1,20]},e(u,[2,12],{13:4,19:5,20:6,22:8,23:9,24:10,25:11,26:12,11:21,21:t,28:r,29:a,31:i,32:n,40:s,44:o,47:l}),e(h,[2,16],{14:22,15:d,16:f}),e(h,[2,17]),e(h,[2,18]),e(h,[2,19]),e(h,[2,20]),e(h,[2,21]),e(h,[2,22]),e(p,[2,25],{27:[1,25]}),e(h,[2,26]),{19:26,26:12,32:n},{11:27,13:4,19:5,20:6,21:t,22:8,23:9,24:10,25:11,26:12,28:r,29:a,31:i,32:n,40:s,44:o,47:l},{41:[1,28],43:[1,29]},{45:[1,30]},{48:[1,31]},e(y,[2,29],{33:32,36:[1,33],38:[1,34]}),{1:[2,7]},e(u,[2,13]),{26:35,32:n},{32:[2,14]},{17:[1,36]},e(p,[2,24]),{11:37,13:4,14:22,15:d,16:f,19:5,20:6,21:t,22:8,23:9,24:10,25:11,26:12,28:r,29:a,31:i,32:n,40:s,44:o,47:l},{30:[1,38]},{42:[1,39]},{42:[1,40]},{46:[1,41]},{49:[1,42]},e(y,[2,30]),{18:[1,43]},{18:[1,44]},e(p,[2,23]),{18:[1,45]},{30:[1,46]},e(h,[2,28]),e(h,[2,35]),e(h,[2,36]),e(h,[2,37]),e(h,[2,38]),{37:[1,47]},{34:48,35:v},{15:[1,50]},e(h,[2,27]),e(y,[2,33]),{39:[1,51]},{34:52,35:v,39:[2,31]},{32:[2,15]},e(y,[2,34]),{39:[2,32]}],defaultActions:{20:[2,7],23:[2,14],50:[2,15],52:[2,32]},parseError:g(function(C,T){if(T.recoverable)this.trace(C);else{var k=new Error(C);throw k.hash=T,k}},"parseError"),parse:g(function(C){var T=this,k=[0],S=[],L=[null],_=[],A=this.table,E="",D=0,R=0,O=2,P=1,$=_.slice.call(arguments,1),M=Object.create(this.lexer),I={yy:{}};for(var F in this.yy)Object.prototype.hasOwnProperty.call(this.yy,F)&&(I.yy[F]=this.yy[F]);M.setInput(C,I.yy),I.yy.lexer=M,I.yy.parser=this,typeof M.yylloc>"u"&&(M.yylloc={});var V=M.yylloc;_.push(V);var N=M.options&&M.options.ranges;typeof I.yy.parseError=="function"?this.parseError=I.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function q(st){k.length=k.length-2*st,L.length=L.length-st,_.length=_.length-st}g(q,"popStack");function U(){var st;return st=S.pop()||M.lex()||P,typeof st!="number"&&(st instanceof Array&&(S=st,st=S.pop()),st=T.symbols_[st]||st),st}g(U,"lex");for(var X,lt,J,ct,yt={},ut,Q,K,j;;){if(lt=k[k.length-1],this.defaultActions[lt]?J=this.defaultActions[lt]:((X===null||typeof X>"u")&&(X=U()),J=A[lt]&&A[lt][X]),typeof J>"u"||!J.length||!J[0]){var Y="";j=[];for(ut in A[lt])this.terminals_[ut]&&ut>O&&j.push("'"+this.terminals_[ut]+"'");M.showPosition?Y="Parse error on line "+(D+1)+`:
`+M.showPosition()+`
Expecting `+j.join(", ")+", got '"+(this.terminals_[X]||X)+"'":Y="Parse error on line "+(D+1)+": Unexpected "+(X==P?"end of input":"'"+(this.terminals_[X]||X)+"'"),this.parseError(Y,{text:M.match,token:this.terminals_[X]||X,line:M.yylineno,loc:V,expected:j})}if(J[0]instanceof Array&&J.length>1)throw new Error("Parse Error: multiple actions possible at state: "+lt+", token: "+X);switch(J[0]){case 1:k.push(X),L.push(M.yytext),_.push(M.yylloc),k.push(J[1]),X=null,R=M.yyleng,E=M.yytext,D=M.yylineno,V=M.yylloc;break;case 2:if(Q=this.productions_[J[1]][1],yt.$=L[L.length-Q],yt._$={first_line:_[_.length-(Q||1)].first_line,last_line:_[_.length-1].last_line,first_column:_[_.length-(Q||1)].first_column,last_column:_[_.length-1].last_column},N&&(yt._$.range=[_[_.length-(Q||1)].range[0],_[_.length-1].range[1]]),ct=this.performAction.apply(yt,[E,R,D,I.yy,J[1],L,_].concat($)),typeof ct<"u")return ct;Q&&(k=k.slice(0,-1*Q*2),L=L.slice(0,-1*Q),_=_.slice(0,-1*Q)),k.push(this.productions_[J[1]][0]),L.push(yt.$),_.push(yt._$),K=A[k[k.length-2]][k[k.length-1]],k.push(K);break;case 3:return!0}}return!0},"parse")},x=function(){var w={EOF:1,parseError:g(function(T,k){if(this.yy.parser)this.yy.parser.parseError(T,k);else throw new Error(T)},"parseError"),setInput:g(function(C,T){return this.yy=T||this.yy||{},this._input=C,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:g(function(){var C=this._input[0];this.yytext+=C,this.yyleng++,this.offset++,this.match+=C,this.matched+=C;var T=C.match(/(?:\r\n?|\n).*/g);return T?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),C},"input"),unput:g(function(C){var T=C.length,k=C.split(/(?:\r\n?|\n)/g);this._input=C+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-T),this.offset-=T;var S=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),k.length-1&&(this.yylineno-=k.length-1);var L=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:k?(k.length===S.length?this.yylloc.first_column:0)+S[S.length-k.length].length-k[0].length:this.yylloc.first_column-T},this.options.ranges&&(this.yylloc.range=[L[0],L[0]+this.yyleng-T]),this.yyleng=this.yytext.length,this},"unput"),more:g(function(){return this._more=!0,this},"more"),reject:g(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:g(function(C){this.unput(this.match.slice(C))},"less"),pastInput:g(function(){var C=this.matched.substr(0,this.matched.length-this.match.length);return(C.length>20?"...":"")+C.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:g(function(){var C=this.match;return C.length<20&&(C+=this._input.substr(0,20-C.length)),(C.substr(0,20)+(C.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:g(function(){var C=this.pastInput(),T=new Array(C.length+1).join("-");return C+this.upcomingInput()+`
`+T+"^"},"showPosition"),test_match:g(function(C,T){var k,S,L;if(this.options.backtrack_lexer&&(L={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(L.yylloc.range=this.yylloc.range.slice(0))),S=C[0].match(/(?:\r\n?|\n).*/g),S&&(this.yylineno+=S.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:S?S[S.length-1].length-S[S.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+C[0].length},this.yytext+=C[0],this.match+=C[0],this.matches=C,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(C[0].length),this.matched+=C[0],k=this.performAction.call(this,this.yy,this,T,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),k)return k;if(this._backtrack){for(var _ in L)this[_]=L[_];return!1}return!1},"test_match"),next:g(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var C,T,k,S;this._more||(this.yytext="",this.match="");for(var L=this._currentRules(),_=0;_<L.length;_++)if(k=this._input.match(this.rules[L[_]]),k&&(!T||k[0].length>T[0].length)){if(T=k,S=_,this.options.backtrack_lexer){if(C=this.test_match(k,L[_]),C!==!1)return C;if(this._backtrack){T=!1;continue}else return!1}else if(!this.options.flex)break}return T?(C=this.test_match(T,L[S]),C!==!1?C:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:g(function(){var T=this.next();return T||this.lex()},"lex"),begin:g(function(T){this.conditionStack.push(T)},"begin"),popState:g(function(){var T=this.conditionStack.length-1;return T>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:g(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:g(function(T){return T=this.conditionStack.length-1-Math.abs(T||0),T>=0?this.conditionStack[T]:"INITIAL"},"topState"),pushState:g(function(T){this.begin(T)},"pushState"),stateStackSize:g(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:g(function(T,k,S,L){switch(S){case 0:return 10;case 1:return T.getLogger().debug("Found space-block"),31;case 2:return T.getLogger().debug("Found nl-block"),31;case 3:return T.getLogger().debug("Found space-block"),29;case 4:T.getLogger().debug(".",k.yytext);break;case 5:T.getLogger().debug("_",k.yytext);break;case 6:return 5;case 7:return k.yytext=-1,28;case 8:return k.yytext=k.yytext.replace(/columns\s+/,""),T.getLogger().debug("COLUMNS (LEX)",k.yytext),28;case 9:this.pushState("md_string");break;case 10:return"MD_STR";case 11:this.popState();break;case 12:this.pushState("string");break;case 13:T.getLogger().debug("LEX: POPPING STR:",k.yytext),this.popState();break;case 14:return T.getLogger().debug("LEX: STR end:",k.yytext),"STR";case 15:return k.yytext=k.yytext.replace(/space\:/,""),T.getLogger().debug("SPACE NUM (LEX)",k.yytext),21;case 16:return k.yytext="1",T.getLogger().debug("COLUMNS (LEX)",k.yytext),21;case 17:return 43;case 18:return"LINKSTYLE";case 19:return"INTERPOLATE";case 20:return this.pushState("CLASSDEF"),40;case 21:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 22:return this.popState(),this.pushState("CLASSDEFID"),41;case 23:return this.popState(),42;case 24:return this.pushState("CLASS"),44;case 25:return this.popState(),this.pushState("CLASS_STYLE"),45;case 26:return this.popState(),46;case 27:return this.pushState("STYLE_STMNT"),47;case 28:return this.popState(),this.pushState("STYLE_DEFINITION"),48;case 29:return this.popState(),49;case 30:return this.pushState("acc_title"),"acc_title";case 31:return this.popState(),"acc_title_value";case 32:return this.pushState("acc_descr"),"acc_descr";case 33:return this.popState(),"acc_descr_value";case 34:this.pushState("acc_descr_multiline");break;case 35:this.popState();break;case 36:return"acc_descr_multiline_value";case 37:return 30;case 38:return this.popState(),T.getLogger().debug("Lex: (("),"NODE_DEND";case 39:return this.popState(),T.getLogger().debug("Lex: (("),"NODE_DEND";case 40:return this.popState(),T.getLogger().debug("Lex: ))"),"NODE_DEND";case 41:return this.popState(),T.getLogger().debug("Lex: (("),"NODE_DEND";case 42:return this.popState(),T.getLogger().debug("Lex: (("),"NODE_DEND";case 43:return this.popState(),T.getLogger().debug("Lex: (-"),"NODE_DEND";case 44:return this.popState(),T.getLogger().debug("Lex: -)"),"NODE_DEND";case 45:return this.popState(),T.getLogger().debug("Lex: (("),"NODE_DEND";case 46:return this.popState(),T.getLogger().debug("Lex: ]]"),"NODE_DEND";case 47:return this.popState(),T.getLogger().debug("Lex: ("),"NODE_DEND";case 48:return this.popState(),T.getLogger().debug("Lex: ])"),"NODE_DEND";case 49:return this.popState(),T.getLogger().debug("Lex: /]"),"NODE_DEND";case 50:return this.popState(),T.getLogger().debug("Lex: /]"),"NODE_DEND";case 51:return this.popState(),T.getLogger().debug("Lex: )]"),"NODE_DEND";case 52:return this.popState(),T.getLogger().debug("Lex: )"),"NODE_DEND";case 53:return this.popState(),T.getLogger().debug("Lex: ]>"),"NODE_DEND";case 54:return this.popState(),T.getLogger().debug("Lex: ]"),"NODE_DEND";case 55:return T.getLogger().debug("Lexa: -)"),this.pushState("NODE"),36;case 56:return T.getLogger().debug("Lexa: (-"),this.pushState("NODE"),36;case 57:return T.getLogger().debug("Lexa: ))"),this.pushState("NODE"),36;case 58:return T.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 59:return T.getLogger().debug("Lex: ((("),this.pushState("NODE"),36;case 60:return T.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 61:return T.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 62:return T.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 63:return T.getLogger().debug("Lexc: >"),this.pushState("NODE"),36;case 64:return T.getLogger().debug("Lexa: (["),this.pushState("NODE"),36;case 65:return T.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 66:return this.pushState("NODE"),36;case 67:return this.pushState("NODE"),36;case 68:return this.pushState("NODE"),36;case 69:return this.pushState("NODE"),36;case 70:return this.pushState("NODE"),36;case 71:return this.pushState("NODE"),36;case 72:return this.pushState("NODE"),36;case 73:return T.getLogger().debug("Lexa: ["),this.pushState("NODE"),36;case 74:return this.pushState("BLOCK_ARROW"),T.getLogger().debug("LEX ARR START"),38;case 75:return T.getLogger().debug("Lex: NODE_ID",k.yytext),32;case 76:return T.getLogger().debug("Lex: EOF",k.yytext),8;case 77:this.pushState("md_string");break;case 78:this.pushState("md_string");break;case 79:return"NODE_DESCR";case 80:this.popState();break;case 81:T.getLogger().debug("Lex: Starting string"),this.pushState("string");break;case 82:T.getLogger().debug("LEX ARR: Starting string"),this.pushState("string");break;case 83:return T.getLogger().debug("LEX: NODE_DESCR:",k.yytext),"NODE_DESCR";case 84:T.getLogger().debug("LEX POPPING"),this.popState();break;case 85:T.getLogger().debug("Lex: =>BAE"),this.pushState("ARROW_DIR");break;case 86:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (right): dir:",k.yytext),"DIR";case 87:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (left):",k.yytext),"DIR";case 88:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (x):",k.yytext),"DIR";case 89:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (y):",k.yytext),"DIR";case 90:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (up):",k.yytext),"DIR";case 91:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (down):",k.yytext),"DIR";case 92:return k.yytext="]>",T.getLogger().debug("Lex (ARROW_DIR end):",k.yytext),this.popState(),this.popState(),"BLOCK_ARROW_END";case 93:return T.getLogger().debug("Lex: LINK","#"+k.yytext+"#"),15;case 94:return T.getLogger().debug("Lex: LINK",k.yytext),15;case 95:return T.getLogger().debug("Lex: LINK",k.yytext),15;case 96:return T.getLogger().debug("Lex: LINK",k.yytext),15;case 97:return T.getLogger().debug("Lex: START_LINK",k.yytext),this.pushState("LLABEL"),16;case 98:return T.getLogger().debug("Lex: START_LINK",k.yytext),this.pushState("LLABEL"),16;case 99:return T.getLogger().debug("Lex: START_LINK",k.yytext),this.pushState("LLABEL"),16;case 100:this.pushState("md_string");break;case 101:return T.getLogger().debug("Lex: Starting string"),this.pushState("string"),"LINK_LABEL";case 102:return this.popState(),T.getLogger().debug("Lex: LINK","#"+k.yytext+"#"),15;case 103:return this.popState(),T.getLogger().debug("Lex: LINK",k.yytext),15;case 104:return this.popState(),T.getLogger().debug("Lex: LINK",k.yytext),15;case 105:return T.getLogger().debug("Lex: COLON",k.yytext),k.yytext=k.yytext.slice(1),27}},"anonymous"),rules:[/^(?:block-beta\b)/,/^(?:block\s+)/,/^(?:block\n+)/,/^(?:block:)/,/^(?:[\s]+)/,/^(?:[\n]+)/,/^(?:((\u000D\u000A)|(\u000A)))/,/^(?:columns\s+auto\b)/,/^(?:columns\s+[\d]+)/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:space[:]\d+)/,/^(?:space\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\s+)/,/^(?:DEFAULT\s+)/,/^(?:\w+\s+)/,/^(?:[^\n]*)/,/^(?:class\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:style\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:end\b\s*)/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:[\)]\))/,/^(?:\}\})/,/^(?:\})/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\()/,/^(?:\]\])/,/^(?:\()/,/^(?:\]\))/,/^(?:\\\])/,/^(?:\/\])/,/^(?:\)\])/,/^(?:[\)])/,/^(?:\]>)/,/^(?:[\]])/,/^(?:-\))/,/^(?:\(-)/,/^(?:\)\))/,/^(?:\))/,/^(?:\(\(\()/,/^(?:\(\()/,/^(?:\{\{)/,/^(?:\{)/,/^(?:>)/,/^(?:\(\[)/,/^(?:\()/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\[\\)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:\[)/,/^(?:<\[)/,/^(?:[^\(\[\n\-\)\{\}\s\<\>:]+)/,/^(?:$)/,/^(?:["][`])/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:\]>\s*\()/,/^(?:,?\s*right\s*)/,/^(?:,?\s*left\s*)/,/^(?:,?\s*x\s*)/,/^(?:,?\s*y\s*)/,/^(?:,?\s*up\s*)/,/^(?:,?\s*down\s*)/,/^(?:\)\s*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*~~[\~]+\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:["][`])/,/^(?:["])/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?::\d+)/],conditions:{STYLE_DEFINITION:{rules:[29],inclusive:!1},STYLE_STMNT:{rules:[28],inclusive:!1},CLASSDEFID:{rules:[23],inclusive:!1},CLASSDEF:{rules:[21,22],inclusive:!1},CLASS_STYLE:{rules:[26],inclusive:!1},CLASS:{rules:[25],inclusive:!1},LLABEL:{rules:[100,101,102,103,104],inclusive:!1},ARROW_DIR:{rules:[86,87,88,89,90,91,92],inclusive:!1},BLOCK_ARROW:{rules:[77,82,85],inclusive:!1},NODE:{rules:[38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,78,81],inclusive:!1},md_string:{rules:[10,11,79,80],inclusive:!1},space:{rules:[],inclusive:!1},string:{rules:[13,14,83,84],inclusive:!1},acc_descr_multiline:{rules:[35,36],inclusive:!1},acc_descr:{rules:[33],inclusive:!1},acc_title:{rules:[31],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,12,15,16,17,18,19,20,24,27,30,32,34,37,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,93,94,95,96,97,98,99,105],inclusive:!0}}};return w}();m.lexer=x;function b(){this.yy={}}return g(b,"Parser"),b.prototype=m,m.Parser=b,new b}();$g.parser=$g;var NG=$g,Ha=new Map,$1=[],Vg=new Map,N2="color",M2="fill",MG="bgFill",pS=",",FG=dt(),Th=new Map,OG=g(e=>Mt.sanitizeText(e,FG),"sanitizeText"),$G=g(function(e,t=""){let r=Th.get(e);r||(r={id:e,styles:[],textStyles:[]},Th.set(e,r)),t!=null&&t.split(pS).forEach(a=>{const i=a.replace(/([^;]*);/,"$1").trim();if(RegExp(N2).exec(a)){const s=i.replace(M2,MG).replace(N2,M2);r.textStyles.push(s)}r.styles.push(i)})},"addStyleClass"),VG=g(function(e,t=""){const r=Ha.get(e);t!=null&&(r.styles=t.split(pS))},"addStyle2Node"),zG=g(function(e,t){e.split(",").forEach(function(r){let a=Ha.get(r);if(a===void 0){const i=r.trim();a={id:i,type:"na",children:[]},Ha.set(i,a)}a.classes||(a.classes=[]),a.classes.push(t)})},"setCssClass"),gS=g((e,t)=>{const r=e.flat(),a=[];for(const i of r){if(i.label&&(i.label=OG(i.label)),i.type==="classDef"){$G(i.id,i.css);continue}if(i.type==="applyClass"){zG(i.id,(i==null?void 0:i.styleClass)??"");continue}if(i.type==="applyStyles"){i!=null&&i.stylesStr&&VG(i.id,i==null?void 0:i.stylesStr);continue}if(i.type==="column-setting")t.columns=i.columns??-1;else if(i.type==="edge"){const n=(Vg.get(i.id)??0)+1;Vg.set(i.id,n),i.id=n+"-"+i.id,$1.push(i)}else{i.label||(i.type==="composite"?i.label="":i.label=i.id);const n=Ha.get(i.id);if(n===void 0?Ha.set(i.id,i):(i.type!=="na"&&(n.type=i.type),i.label!==i.id&&(n.label=i.label)),i.children&&gS(i.children,i),i.type==="space"){const s=i.width??1;for(let o=0;o<s;o++){const l=VE(i);l.id=l.id+"-"+o,Ha.set(l.id,l),a.push(l)}}else n===void 0&&a.push(i)}}t.children=a},"populateBlockDatabase"),V1=[],Nl={id:"root",type:"composite",children:[],columns:-1},qG=g(()=>{G.debug("Clear called"),xr(),Nl={id:"root",type:"composite",children:[],columns:-1},Ha=new Map([["root",Nl]]),V1=[],Th=new Map,$1=[],Vg=new Map},"clear");function yS(e){switch(G.debug("typeStr2Type",e),e){case"[]":return"square";case"()":return G.debug("we have a round"),"round";case"(())":return"circle";case">]":return"rect_left_inv_arrow";case"{}":return"diamond";case"{{}}":return"hexagon";case"([])":return"stadium";case"[[]]":return"subroutine";case"[()]":return"cylinder";case"((()))":return"doublecircle";case"[//]":return"lean_right";case"[\\\\]":return"lean_left";case"[/\\]":return"trapezoid";case"[\\/]":return"inv_trapezoid";case"<[]>":return"block_arrow";default:return"na"}}g(yS,"typeStr2Type");function vS(e){switch(G.debug("typeStr2Type",e),e){case"==":return"thick";default:return"normal"}}g(vS,"edgeTypeStr2Type");function mS(e){switch(e.trim()){case"--x":return"arrow_cross";case"--o":return"arrow_circle";default:return"arrow_point"}}g(mS,"edgeStrToEdgeData");var F2=0,WG=g(()=>(F2++,"id-"+Math.random().toString(36).substr(2,12)+"-"+F2),"generateId"),GG=g(e=>{Nl.children=e,gS(e,Nl),V1=Nl.children},"setHierarchy"),HG=g(e=>{const t=Ha.get(e);return t?t.columns?t.columns:t.children?t.children.length:-1:-1},"getColumns"),YG=g(()=>[...Ha.values()],"getBlocksFlat"),UG=g(()=>V1||[],"getBlocks"),XG=g(()=>$1,"getEdges"),KG=g(e=>Ha.get(e),"getBlock"),jG=g(e=>{Ha.set(e.id,e)},"setBlock"),QG=g(()=>console,"getLogger"),ZG=g(function(){return Th},"getClasses"),JG={getConfig:g(()=>$e().block,"getConfig"),typeStr2Type:yS,edgeTypeStr2Type:vS,edgeStrToEdgeData:mS,getLogger:QG,getBlocksFlat:YG,getBlocks:UG,getEdges:XG,setHierarchy:GG,getBlock:KG,setBlock:jG,getColumns:HG,getClasses:ZG,clear:qG,generateId:WG},tH=JG,ru=g((e,t)=>{const r=Yg,a=r(e,"r"),i=r(e,"g"),n=r(e,"b");return On(a,i,n,t)},"fade"),eH=g(e=>`.label {
    font-family: ${e.fontFamily};
    color: ${e.nodeTextColor||e.textColor};
  }
  .cluster-label text {
    fill: ${e.titleColor};
  }
  .cluster-label span,p {
    color: ${e.titleColor};
  }



  .label text,span,p {
    fill: ${e.nodeTextColor||e.textColor};
    color: ${e.nodeTextColor||e.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }
  .flowchart-label text {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${e.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${e.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${e.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${e.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${e.edgeLabelBackground};
      fill: ${e.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${ru(e.edgeLabelBackground,.5)};
    // background-color:
  }

  .node .cluster {
    // fill: ${ru(e.mainBkg,.5)};
    fill: ${ru(e.clusterBkg,.5)};
    stroke: ${ru(e.clusterBorder,.2)};
    box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${e.titleColor};
  }

  .cluster span,p {
    color: ${e.titleColor};
  }
  /* .cluster div {
    color: ${e.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${e.fontFamily};
    font-size: 12px;
    background: ${e.tertiaryColor};
    border: 1px solid ${e.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }
`,"getStyles"),rH=eH,aH=g((e,t,r,a)=>{t.forEach(i=>{fH[i](e,r,a)})},"insertMarkers"),iH=g((e,t,r)=>{G.trace("Making markers for ",r),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),nH=g((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),sH=g((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),oH=g((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),lH=g((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),cH=g((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),uH=g((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),hH=g((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),dH=g((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),fH={extension:iH,composition:nH,aggregation:sH,dependency:oH,lollipop:lH,point:cH,circle:uH,cross:hH,barb:dH},pH=aH,X2,K2,ar=((K2=(X2=dt())==null?void 0:X2.block)==null?void 0:K2.padding)??8;function xS(e,t){if(e===0||!Number.isInteger(e))throw new Error("Columns must be an integer !== 0.");if(t<0||!Number.isInteger(t))throw new Error("Position must be a non-negative integer."+t);if(e<0)return{px:t,py:0};if(e===1)return{px:0,py:t};const r=t%e,a=Math.floor(t/e);return{px:r,py:a}}g(xS,"calculateBlockPosition");var gH=g(e=>{let t=0,r=0;for(const a of e.children){const{width:i,height:n,x:s,y:o}=a.size??{width:0,height:0,x:0,y:0};G.debug("getMaxChildSize abc95 child:",a.id,"width:",i,"height:",n,"x:",s,"y:",o,a.type),a.type!=="space"&&(i>t&&(t=i/(e.widthInColumns??1)),n>r&&(r=n))}return{width:t,height:r}},"getMaxChildSize");function Ch(e,t,r=0,a=0){var s,o,l,u,h,d,f,p,y,v,m;G.debug("setBlockSizes abc95 (start)",e.id,(s=e==null?void 0:e.size)==null?void 0:s.x,"block width =",e==null?void 0:e.size,"sieblingWidth",r),(o=e==null?void 0:e.size)!=null&&o.width||(e.size={width:r,height:a,x:0,y:0});let i=0,n=0;if(((l=e.children)==null?void 0:l.length)>0){for(const L of e.children)Ch(L,t);const x=gH(e);i=x.width,n=x.height,G.debug("setBlockSizes abc95 maxWidth of",e.id,":s children is ",i,n);for(const L of e.children)L.size&&(G.debug(`abc95 Setting size of children of ${e.id} id=${L.id} ${i} ${n} ${JSON.stringify(L.size)}`),L.size.width=i*(L.widthInColumns??1)+ar*((L.widthInColumns??1)-1),L.size.height=n,L.size.x=0,L.size.y=0,G.debug(`abc95 updating size of ${e.id} children child:${L.id} maxWidth:${i} maxHeight:${n}`));for(const L of e.children)Ch(L,t,i,n);const b=e.columns??-1;let w=0;for(const L of e.children)w+=L.widthInColumns??1;let C=e.children.length;b>0&&b<w&&(C=b);const T=Math.ceil(w/C);let k=C*(i+ar)+ar,S=T*(n+ar)+ar;if(k<r){G.debug(`Detected to small siebling: abc95 ${e.id} sieblingWidth ${r} sieblingHeight ${a} width ${k}`),k=r,S=a;const L=(r-C*ar-ar)/C,_=(a-T*ar-ar)/T;G.debug("Size indata abc88",e.id,"childWidth",L,"maxWidth",i),G.debug("Size indata abc88",e.id,"childHeight",_,"maxHeight",n),G.debug("Size indata abc88 xSize",C,"padding",ar);for(const A of e.children)A.size&&(A.size.width=L,A.size.height=_,A.size.x=0,A.size.y=0)}if(G.debug(`abc95 (finale calc) ${e.id} xSize ${C} ySize ${T} columns ${b}${e.children.length} width=${Math.max(k,((u=e.size)==null?void 0:u.width)||0)}`),k<(((h=e==null?void 0:e.size)==null?void 0:h.width)||0)){k=((d=e==null?void 0:e.size)==null?void 0:d.width)||0;const L=b>0?Math.min(e.children.length,b):e.children.length;if(L>0){const _=(k-L*ar-ar)/L;G.debug("abc95 (growing to fit) width",e.id,k,(f=e.size)==null?void 0:f.width,_);for(const A of e.children)A.size&&(A.size.width=_)}}e.size={width:k,height:S,x:0,y:0}}G.debug("setBlockSizes abc94 (done)",e.id,(p=e==null?void 0:e.size)==null?void 0:p.x,(y=e==null?void 0:e.size)==null?void 0:y.width,(v=e==null?void 0:e.size)==null?void 0:v.y,(m=e==null?void 0:e.size)==null?void 0:m.height)}g(Ch,"setBlockSizes");function z1(e,t){var a,i,n,s,o,l,u,h,d,f,p,y,v,m,x,b,w;G.debug(`abc85 layout blocks (=>layoutBlocks) ${e.id} x: ${(a=e==null?void 0:e.size)==null?void 0:a.x} y: ${(i=e==null?void 0:e.size)==null?void 0:i.y} width: ${(n=e==null?void 0:e.size)==null?void 0:n.width}`);const r=e.columns??-1;if(G.debug("layoutBlocks columns abc95",e.id,"=>",r,e),e.children&&e.children.length>0){const C=((o=(s=e==null?void 0:e.children[0])==null?void 0:s.size)==null?void 0:o.width)??0,T=e.children.length*C+(e.children.length-1)*ar;G.debug("widthOfChildren 88",T,"posX");let k=0;G.debug("abc91 block?.size?.x",e.id,(l=e==null?void 0:e.size)==null?void 0:l.x);let S=(u=e==null?void 0:e.size)!=null&&u.x?((h=e==null?void 0:e.size)==null?void 0:h.x)+(-((d=e==null?void 0:e.size)==null?void 0:d.width)/2||0):-ar,L=0;for(const _ of e.children){const A=e;if(!_.size)continue;const{width:E,height:D}=_.size,{px:R,py:O}=xS(r,k);if(O!=L&&(L=O,S=(f=e==null?void 0:e.size)!=null&&f.x?((p=e==null?void 0:e.size)==null?void 0:p.x)+(-((y=e==null?void 0:e.size)==null?void 0:y.width)/2||0):-ar,G.debug("New row in layout for block",e.id," and child ",_.id,L)),G.debug(`abc89 layout blocks (child) id: ${_.id} Pos: ${k} (px, py) ${R},${O} (${(v=A==null?void 0:A.size)==null?void 0:v.x},${(m=A==null?void 0:A.size)==null?void 0:m.y}) parent: ${A.id} width: ${E}${ar}`),A.size){const P=E/2;_.size.x=S+ar+P,G.debug(`abc91 layout blocks (calc) px, pyid:${_.id} startingPos=X${S} new startingPosX${_.size.x} ${P} padding=${ar} width=${E} halfWidth=${P} => x:${_.size.x} y:${_.size.y} ${_.widthInColumns} (width * (child?.w || 1)) / 2 ${E*((_==null?void 0:_.widthInColumns)??1)/2}`),S=_.size.x+P,_.size.y=A.size.y-A.size.height/2+O*(D+ar)+D/2+ar,G.debug(`abc88 layout blocks (calc) px, pyid:${_.id}startingPosX${S}${ar}${P}=>x:${_.size.x}y:${_.size.y}${_.widthInColumns}(width * (child?.w || 1)) / 2${E*((_==null?void 0:_.widthInColumns)??1)/2}`)}_.children&&z1(_),k+=(_==null?void 0:_.widthInColumns)??1,G.debug("abc88 columnsPos",_,k)}}G.debug(`layout blocks (<==layoutBlocks) ${e.id} x: ${(x=e==null?void 0:e.size)==null?void 0:x.x} y: ${(b=e==null?void 0:e.size)==null?void 0:b.y} width: ${(w=e==null?void 0:e.size)==null?void 0:w.width}`)}g(z1,"layoutBlocks");function q1(e,{minX:t,minY:r,maxX:a,maxY:i}={minX:0,minY:0,maxX:0,maxY:0}){if(e.size&&e.id!=="root"){const{x:n,y:s,width:o,height:l}=e.size;n-o/2<t&&(t=n-o/2),s-l/2<r&&(r=s-l/2),n+o/2>a&&(a=n+o/2),s+l/2>i&&(i=s+l/2)}if(e.children)for(const n of e.children)({minX:t,minY:r,maxX:a,maxY:i}=q1(n,{minX:t,minY:r,maxX:a,maxY:i}));return{minX:t,minY:r,maxX:a,maxY:i}}g(q1,"findBounds");function bS(e){const t=e.getBlock("root");if(!t)return;Ch(t,e,0,0),z1(t),G.debug("getBlocks",JSON.stringify(t,null,2));const{minX:r,minY:a,maxX:i,maxY:n}=q1(t),s=n-a,o=i-r;return{x:r,y:a,width:o,height:s}}g(bS,"layout");function zg(e,t){t&&e.attr("style",t)}g(zg,"applyStyle");function wS(e){const t=It(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=t.append("xhtml:div"),a=e.label,i=e.isNode?"nodeLabel":"edgeLabel",n=r.append("span");return n.html(a),zg(n,e.labelStyle),n.attr("class",i),zg(r,e.labelStyle),r.style("display","inline-block"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}g(wS,"addHtmlLabel");var yH=g((e,t,r,a)=>{let i=e||"";if(typeof i=="object"&&(i=i[0]),Oe(dt().flowchart.htmlLabels)){i=i.replace(/\\n|\n/g,"<br />"),G.debug("vertexText"+i);const n={isNode:a,label:m0(oi(i)),labelStyle:t.replace("fill:","color:")};return wS(n)}else{const n=document.createElementNS("http://www.w3.org/2000/svg","text");n.setAttribute("style",t.replace("color:","fill:"));let s=[];typeof i=="string"?s=i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?s=i:s=[];for(const o of s){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),r?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=o.trim(),n.appendChild(l)}return n}},"createLabel"),Da=yH,vH=g((e,t,r,a,i)=>{t.arrowTypeStart&&O2(e,"start",t.arrowTypeStart,r,a,i),t.arrowTypeEnd&&O2(e,"end",t.arrowTypeEnd,r,a,i)},"addEdgeMarkers"),mH={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},O2=g((e,t,r,a,i,n)=>{const s=mH[r];if(!s){G.warn(`Unknown arrow type: ${r}`);return}const o=t==="start"?"Start":"End";e.attr(`marker-${t}`,`url(${a}#${i}_${n}-${s}${o})`)},"addEdgeMarker"),qg={},$r={},xH=g((e,t)=>{const r=dt(),a=Oe(r.flowchart.htmlLabels),i=t.labelType==="markdown"?fa(e,t.label,{style:t.labelStyle,useHtmlLabels:a,addSvgBackground:!0},r):Da(t.label,t.labelStyle),n=e.insert("g").attr("class","edgeLabel"),s=n.insert("g").attr("class","label");s.node().appendChild(i);let o=i.getBBox();if(a){const u=i.children[0],h=It(i);o=u.getBoundingClientRect(),h.attr("width",o.width),h.attr("height",o.height)}s.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),qg[t.id]=n,t.width=o.width,t.height=o.height;let l;if(t.startLabelLeft){const u=Da(t.startLabelLeft,t.labelStyle),h=e.insert("g").attr("class","edgeTerminals"),d=h.insert("g").attr("class","inner");l=d.node().appendChild(u);const f=u.getBBox();d.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),$r[t.id]||($r[t.id]={}),$r[t.id].startLeft=h,_l(l,t.startLabelLeft)}if(t.startLabelRight){const u=Da(t.startLabelRight,t.labelStyle),h=e.insert("g").attr("class","edgeTerminals"),d=h.insert("g").attr("class","inner");l=h.node().appendChild(u),d.node().appendChild(u);const f=u.getBBox();d.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),$r[t.id]||($r[t.id]={}),$r[t.id].startRight=h,_l(l,t.startLabelRight)}if(t.endLabelLeft){const u=Da(t.endLabelLeft,t.labelStyle),h=e.insert("g").attr("class","edgeTerminals"),d=h.insert("g").attr("class","inner");l=d.node().appendChild(u);const f=u.getBBox();d.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),h.node().appendChild(u),$r[t.id]||($r[t.id]={}),$r[t.id].endLeft=h,_l(l,t.endLabelLeft)}if(t.endLabelRight){const u=Da(t.endLabelRight,t.labelStyle),h=e.insert("g").attr("class","edgeTerminals"),d=h.insert("g").attr("class","inner");l=d.node().appendChild(u);const f=u.getBBox();d.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),h.node().appendChild(u),$r[t.id]||($r[t.id]={}),$r[t.id].endRight=h,_l(l,t.endLabelRight)}return i},"insertEdgeLabel");function _l(e,t){dt().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+"px",e.style.height="12px")}g(_l,"setTerminalWidth");var bH=g((e,t)=>{G.debug("Moving label abc88 ",e.id,e.label,qg[e.id],t);let r=t.updatedPath?t.updatedPath:t.originalPath;const a=dt(),{subGraphTitleTotalMargin:i}=hc(a);if(e.label){const n=qg[e.id];let s=e.x,o=e.y;if(r){const l=xe.calcLabelPosition(r);G.debug("Moving label "+e.label+" from (",s,",",o,") to (",l.x,",",l.y,") abc88"),t.updatedPath&&(s=l.x,o=l.y)}n.attr("transform",`translate(${s}, ${o+i/2})`)}if(e.startLabelLeft){const n=$r[e.id].startLeft;let s=e.x,o=e.y;if(r){const l=xe.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",r);s=l.x,o=l.y}n.attr("transform",`translate(${s}, ${o})`)}if(e.startLabelRight){const n=$r[e.id].startRight;let s=e.x,o=e.y;if(r){const l=xe.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",r);s=l.x,o=l.y}n.attr("transform",`translate(${s}, ${o})`)}if(e.endLabelLeft){const n=$r[e.id].endLeft;let s=e.x,o=e.y;if(r){const l=xe.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",r);s=l.x,o=l.y}n.attr("transform",`translate(${s}, ${o})`)}if(e.endLabelRight){const n=$r[e.id].endRight;let s=e.x,o=e.y;if(r){const l=xe.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",r);s=l.x,o=l.y}n.attr("transform",`translate(${s}, ${o})`)}},"positionEdgeLabel"),wH=g((e,t)=>{const r=e.x,a=e.y,i=Math.abs(t.x-r),n=Math.abs(t.y-a),s=e.width/2,o=e.height/2;return i>=s||n>=o},"outsideNode"),kH=g((e,t,r)=>{G.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);const a=e.x,i=e.y,n=Math.abs(a-r.x),s=e.width/2;let o=r.x<t.x?s-n:s+n;const l=e.height/2,u=Math.abs(t.y-r.y),h=Math.abs(t.x-r.x);if(Math.abs(i-t.y)*s>Math.abs(a-t.x)*l){let d=r.y<t.y?t.y-l-i:i-l-t.y;o=h*d/u;const f={x:r.x<t.x?r.x+o:r.x-h+o,y:r.y<t.y?r.y+u-d:r.y-u+d};return o===0&&(f.x=t.x,f.y=t.y),h===0&&(f.x=t.x),u===0&&(f.y=t.y),G.debug(`abc89 topp/bott calc, Q ${u}, q ${d}, R ${h}, r ${o}`,f),f}else{r.x<t.x?o=t.x-s-a:o=a-s-t.x;let d=u*o/h,f=r.x<t.x?r.x+h-o:r.x-h+o,p=r.y<t.y?r.y+d:r.y-d;return G.debug(`sides calc abc89, Q ${u}, q ${d}, R ${h}, r ${o}`,{_x:f,_y:p}),o===0&&(f=t.x,p=t.y),h===0&&(f=t.x),u===0&&(p=t.y),{x:f,y:p}}},"intersection"),$2=g((e,t)=>{G.debug("abc88 cutPathAtIntersect",e,t);let r=[],a=e[0],i=!1;return e.forEach(n=>{if(!wH(t,n)&&!i){const s=kH(t,a,n);let o=!1;r.forEach(l=>{o=o||l.x===s.x&&l.y===s.y}),r.some(l=>l.x===s.x&&l.y===s.y)||r.push(s),i=!0}else a=n,i||r.push(n)}),r},"cutPathAtIntersect"),TH=g(function(e,t,r,a,i,n,s){let o=r.points;G.debug("abc88 InsertEdge: edge=",r,"e=",t);let l=!1;const u=n.node(t.v);var h=n.node(t.w);h!=null&&h.intersect&&(u!=null&&u.intersect)&&(o=o.slice(1,r.points.length-1),o.unshift(u.intersect(o[0])),o.push(h.intersect(o[o.length-1]))),r.toCluster&&(G.debug("to cluster abc88",a[r.toCluster]),o=$2(r.points,a[r.toCluster].node),l=!0),r.fromCluster&&(G.debug("from cluster abc88",a[r.fromCluster]),o=$2(o.reverse(),a[r.fromCluster].node).reverse(),l=!0);const d=o.filter(C=>!Number.isNaN(C.y));let f=Ss;r.curve&&(i==="graph"||i==="flowchart")&&(f=r.curve);const{x:p,y}=u4(r),v=Ml().x(p).y(y).curve(f);let m;switch(r.thickness){case"normal":m="edge-thickness-normal";break;case"thick":m="edge-thickness-thick";break;case"invisible":m="edge-thickness-thick";break;default:m=""}switch(r.pattern){case"solid":m+=" edge-pattern-solid";break;case"dotted":m+=" edge-pattern-dotted";break;case"dashed":m+=" edge-pattern-dashed";break}const x=e.append("path").attr("d",v(d)).attr("id",r.id).attr("class"," "+m+(r.classes?" "+r.classes:"")).attr("style",r.style);let b="";(dt().flowchart.arrowMarkerAbsolute||dt().state.arrowMarkerAbsolute)&&(b=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,b=b.replace(/\(/g,"\\("),b=b.replace(/\)/g,"\\)")),vH(x,r,b,s,i);let w={};return l&&(w.updatedPath=o),w.originalPath=r.points,w},"insertEdge"),CH=g(e=>{const t=new Set;for(const r of e)switch(r){case"x":t.add("right"),t.add("left");break;case"y":t.add("up"),t.add("down");break;default:t.add(r);break}return t},"expandAndDeduplicateDirections"),SH=g((e,t,r)=>{const a=CH(e),i=2,n=t.height+2*r.padding,s=n/i,o=t.width+2*s+r.padding,l=r.padding/2;return a.has("right")&&a.has("left")&&a.has("up")&&a.has("down")?[{x:0,y:0},{x:s,y:0},{x:o/2,y:2*l},{x:o-s,y:0},{x:o,y:0},{x:o,y:-n/3},{x:o+2*l,y:-n/2},{x:o,y:-2*n/3},{x:o,y:-n},{x:o-s,y:-n},{x:o/2,y:-n-2*l},{x:s,y:-n},{x:0,y:-n},{x:0,y:-2*n/3},{x:-2*l,y:-n/2},{x:0,y:-n/3}]:a.has("right")&&a.has("left")&&a.has("up")?[{x:s,y:0},{x:o-s,y:0},{x:o,y:-n/2},{x:o-s,y:-n},{x:s,y:-n},{x:0,y:-n/2}]:a.has("right")&&a.has("left")&&a.has("down")?[{x:0,y:0},{x:s,y:-n},{x:o-s,y:-n},{x:o,y:0}]:a.has("right")&&a.has("up")&&a.has("down")?[{x:0,y:0},{x:o,y:-s},{x:o,y:-n+s},{x:0,y:-n}]:a.has("left")&&a.has("up")&&a.has("down")?[{x:o,y:0},{x:0,y:-s},{x:0,y:-n+s},{x:o,y:-n}]:a.has("right")&&a.has("left")?[{x:s,y:0},{x:s,y:-l},{x:o-s,y:-l},{x:o-s,y:0},{x:o,y:-n/2},{x:o-s,y:-n},{x:o-s,y:-n+l},{x:s,y:-n+l},{x:s,y:-n},{x:0,y:-n/2}]:a.has("up")&&a.has("down")?[{x:o/2,y:0},{x:0,y:-l},{x:s,y:-l},{x:s,y:-n+l},{x:0,y:-n+l},{x:o/2,y:-n},{x:o,y:-n+l},{x:o-s,y:-n+l},{x:o-s,y:-l},{x:o,y:-l}]:a.has("right")&&a.has("up")?[{x:0,y:0},{x:o,y:-s},{x:0,y:-n}]:a.has("right")&&a.has("down")?[{x:0,y:0},{x:o,y:0},{x:0,y:-n}]:a.has("left")&&a.has("up")?[{x:o,y:0},{x:0,y:-s},{x:o,y:-n}]:a.has("left")&&a.has("down")?[{x:o,y:0},{x:0,y:0},{x:o,y:-n}]:a.has("right")?[{x:s,y:-l},{x:s,y:-l},{x:o-s,y:-l},{x:o-s,y:0},{x:o,y:-n/2},{x:o-s,y:-n},{x:o-s,y:-n+l},{x:s,y:-n+l},{x:s,y:-n+l}]:a.has("left")?[{x:s,y:0},{x:s,y:-l},{x:o-s,y:-l},{x:o-s,y:-n+l},{x:s,y:-n+l},{x:s,y:-n},{x:0,y:-n/2}]:a.has("up")?[{x:s,y:-l},{x:s,y:-n+l},{x:0,y:-n+l},{x:o/2,y:-n},{x:o,y:-n+l},{x:o-s,y:-n+l},{x:o-s,y:-l}]:a.has("down")?[{x:o/2,y:0},{x:0,y:-l},{x:s,y:-l},{x:s,y:-n+l},{x:o-s,y:-n+l},{x:o-s,y:-l},{x:o,y:-l}]:[{x:0,y:0}]},"getArrowPoints");function kS(e,t){return e.intersect(t)}g(kS,"intersectNode");var EH=kS;function TS(e,t,r,a){var i=e.x,n=e.y,s=i-a.x,o=n-a.y,l=Math.sqrt(t*t*o*o+r*r*s*s),u=Math.abs(t*r*s/l);a.x<i&&(u=-u);var h=Math.abs(t*r*o/l);return a.y<n&&(h=-h),{x:i+u,y:n+h}}g(TS,"intersectEllipse");var CS=TS;function SS(e,t,r){return CS(e,t,t,r)}g(SS,"intersectCircle");var _H=SS;function ES(e,t,r,a){var i,n,s,o,l,u,h,d,f,p,y,v,m,x,b;if(i=t.y-e.y,s=e.x-t.x,l=t.x*e.y-e.x*t.y,f=i*r.x+s*r.y+l,p=i*a.x+s*a.y+l,!(f!==0&&p!==0&&Wg(f,p))&&(n=a.y-r.y,o=r.x-a.x,u=a.x*r.y-r.x*a.y,h=n*e.x+o*e.y+u,d=n*t.x+o*t.y+u,!(h!==0&&d!==0&&Wg(h,d))&&(y=i*o-n*s,y!==0)))return v=Math.abs(y/2),m=s*u-o*l,x=m<0?(m-v)/y:(m+v)/y,m=n*l-i*u,b=m<0?(m-v)/y:(m+v)/y,{x,y:b}}g(ES,"intersectLine");function Wg(e,t){return e*t>0}g(Wg,"sameSign");var AH=ES,LH=_S;function _S(e,t,r){var a=e.x,i=e.y,n=[],s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(y){s=Math.min(s,y.x),o=Math.min(o,y.y)}):(s=Math.min(s,t.x),o=Math.min(o,t.y));for(var l=a-e.width/2-s,u=i-e.height/2-o,h=0;h<t.length;h++){var d=t[h],f=t[h<t.length-1?h+1:0],p=AH(e,r,{x:l+d.x,y:u+d.y},{x:l+f.x,y:u+f.y});p&&n.push(p)}return n.length?(n.length>1&&n.sort(function(y,v){var m=y.x-r.x,x=y.y-r.y,b=Math.sqrt(m*m+x*x),w=v.x-r.x,C=v.y-r.y,T=Math.sqrt(w*w+C*C);return b<T?-1:b===T?0:1}),n[0]):e}g(_S,"intersectPolygon");var DH=g((e,t)=>{var r=e.x,a=e.y,i=t.x-r,n=t.y-a,s=e.width/2,o=e.height/2,l,u;return Math.abs(n)*s>Math.abs(i)*o?(n<0&&(o=-o),l=n===0?0:o*i/n,u=o):(i<0&&(s=-s),l=s,u=i===0?0:s*n/i),{x:r+l,y:a+u}},"intersectRect"),BH=DH,Ke={node:EH,circle:_H,ellipse:CS,polygon:LH,rect:BH},Lr=g(async(e,t,r,a)=>{const i=dt();let n;const s=t.useHtmlLabels||Oe(i.flowchart.htmlLabels);r?n=r:n="node default";const o=e.insert("g").attr("class",n).attr("id",t.domId||t.id),l=o.insert("g").attr("class","label").attr("style",t.labelStyle);let u;t.labelText===void 0?u="":u=typeof t.labelText=="string"?t.labelText:t.labelText[0];const h=l.node();let d;t.labelType==="markdown"?d=fa(l,qe(oi(u),i),{useHtmlLabels:s,width:t.width||i.flowchart.wrappingWidth,classes:"markdown-node-label"},i):d=h.appendChild(Da(qe(oi(u),i),t.labelStyle,!1,a));let f=d.getBBox();const p=t.padding/2;if(Oe(i.flowchart.htmlLabels)){const y=d.children[0],v=It(d),m=y.getElementsByTagName("img");if(m){const x=u.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...m].map(b=>new Promise(w=>{function C(){if(b.style.display="flex",b.style.flexDirection="column",x){const T=i.fontSize?i.fontSize:window.getComputedStyle(document.body).fontSize,S=parseInt(T,10)*5+"px";b.style.minWidth=S,b.style.maxWidth=S}else b.style.width="100%";w(b)}g(C,"setupImage"),setTimeout(()=>{b.complete&&C()}),b.addEventListener("error",C),b.addEventListener("load",C)})))}f=y.getBoundingClientRect(),v.attr("width",f.width),v.attr("height",f.height)}return s?l.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"):l.attr("transform","translate(0, "+-f.height/2+")"),t.centerLabel&&l.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),l.insert("rect",":first-child"),{shapeSvg:o,bbox:f,halfPadding:p,label:l}},"labelHelper"),er=g((e,t)=>{const r=t.node().getBBox();e.width=r.width,e.height=r.height},"updateNodeBounds");function Ka(e,t,r,a){return e.insert("polygon",":first-child").attr("points",a.map(function(i){return i.x+","+i.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+r/2+")")}g(Ka,"insertPolygonShape");var RH=g(async(e,t)=>{t.useHtmlLabels||dt().flowchart.htmlLabels||(t.centerLabel=!0);const{shapeSvg:a,bbox:i,halfPadding:n}=await Lr(e,t,"node "+t.classes,!0);G.info("Classes = ",t.classes);const s=a.insert("rect",":first-child");return s.attr("rx",t.rx).attr("ry",t.ry).attr("x",-i.width/2-n).attr("y",-i.height/2-n).attr("width",i.width+t.padding).attr("height",i.height+t.padding),er(t,s),t.intersect=function(o){return Ke.rect(t,o)},a},"note"),IH=RH,V2=g(e=>e?" "+e:"","formatClass"),xa=g((e,t)=>`${t||"node default"}${V2(e.classes)} ${V2(e.class)}`,"getClassesFromNode"),z2=g(async(e,t)=>{const{shapeSvg:r,bbox:a}=await Lr(e,t,xa(t,void 0),!0),i=a.width+t.padding,n=a.height+t.padding,s=i+n,o=[{x:s/2,y:0},{x:s,y:-s/2},{x:s/2,y:-s},{x:0,y:-s/2}];G.info("Question main (Circle)");const l=Ka(r,s,s,o);return l.attr("style",t.style),er(t,l),t.intersect=function(u){return G.warn("Intersect called"),Ke.polygon(t,o,u)},r},"question"),PH=g((e,t)=>{const r=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),a=28,i=[{x:0,y:a/2},{x:a/2,y:0},{x:0,y:-a/2},{x:-a/2,y:0}];return r.insert("polygon",":first-child").attr("points",i.map(function(s){return s.x+","+s.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),t.width=28,t.height=28,t.intersect=function(s){return Ke.circle(t,14,s)},r},"choice"),NH=g(async(e,t)=>{const{shapeSvg:r,bbox:a}=await Lr(e,t,xa(t,void 0),!0),i=4,n=a.height+t.padding,s=n/i,o=a.width+2*s+t.padding,l=[{x:s,y:0},{x:o-s,y:0},{x:o,y:-n/2},{x:o-s,y:-n},{x:s,y:-n},{x:0,y:-n/2}],u=Ka(r,o,n,l);return u.attr("style",t.style),er(t,u),t.intersect=function(h){return Ke.polygon(t,l,h)},r},"hexagon"),MH=g(async(e,t)=>{const{shapeSvg:r,bbox:a}=await Lr(e,t,void 0,!0),i=2,n=a.height+2*t.padding,s=n/i,o=a.width+2*s+t.padding,l=SH(t.directions,a,t),u=Ka(r,o,n,l);return u.attr("style",t.style),er(t,u),t.intersect=function(h){return Ke.polygon(t,l,h)},r},"block_arrow"),FH=g(async(e,t)=>{const{shapeSvg:r,bbox:a}=await Lr(e,t,xa(t,void 0),!0),i=a.width+t.padding,n=a.height+t.padding,s=[{x:-n/2,y:0},{x:i,y:0},{x:i,y:-n},{x:-n/2,y:-n},{x:0,y:-n/2}];return Ka(r,i,n,s).attr("style",t.style),t.width=i+n,t.height=n,t.intersect=function(l){return Ke.polygon(t,s,l)},r},"rect_left_inv_arrow"),OH=g(async(e,t)=>{const{shapeSvg:r,bbox:a}=await Lr(e,t,xa(t),!0),i=a.width+t.padding,n=a.height+t.padding,s=[{x:-2*n/6,y:0},{x:i-n/6,y:0},{x:i+2*n/6,y:-n},{x:n/6,y:-n}],o=Ka(r,i,n,s);return o.attr("style",t.style),er(t,o),t.intersect=function(l){return Ke.polygon(t,s,l)},r},"lean_right"),$H=g(async(e,t)=>{const{shapeSvg:r,bbox:a}=await Lr(e,t,xa(t,void 0),!0),i=a.width+t.padding,n=a.height+t.padding,s=[{x:2*n/6,y:0},{x:i+n/6,y:0},{x:i-2*n/6,y:-n},{x:-n/6,y:-n}],o=Ka(r,i,n,s);return o.attr("style",t.style),er(t,o),t.intersect=function(l){return Ke.polygon(t,s,l)},r},"lean_left"),VH=g(async(e,t)=>{const{shapeSvg:r,bbox:a}=await Lr(e,t,xa(t,void 0),!0),i=a.width+t.padding,n=a.height+t.padding,s=[{x:-2*n/6,y:0},{x:i+2*n/6,y:0},{x:i-n/6,y:-n},{x:n/6,y:-n}],o=Ka(r,i,n,s);return o.attr("style",t.style),er(t,o),t.intersect=function(l){return Ke.polygon(t,s,l)},r},"trapezoid"),zH=g(async(e,t)=>{const{shapeSvg:r,bbox:a}=await Lr(e,t,xa(t,void 0),!0),i=a.width+t.padding,n=a.height+t.padding,s=[{x:n/6,y:0},{x:i-n/6,y:0},{x:i+2*n/6,y:-n},{x:-2*n/6,y:-n}],o=Ka(r,i,n,s);return o.attr("style",t.style),er(t,o),t.intersect=function(l){return Ke.polygon(t,s,l)},r},"inv_trapezoid"),qH=g(async(e,t)=>{const{shapeSvg:r,bbox:a}=await Lr(e,t,xa(t,void 0),!0),i=a.width+t.padding,n=a.height+t.padding,s=[{x:0,y:0},{x:i+n/2,y:0},{x:i,y:-n/2},{x:i+n/2,y:-n},{x:0,y:-n}],o=Ka(r,i,n,s);return o.attr("style",t.style),er(t,o),t.intersect=function(l){return Ke.polygon(t,s,l)},r},"rect_right_inv_arrow"),WH=g(async(e,t)=>{const{shapeSvg:r,bbox:a}=await Lr(e,t,xa(t,void 0),!0),i=a.width+t.padding,n=i/2,s=n/(2.5+i/50),o=a.height+s+t.padding,l="M 0,"+s+" a "+n+","+s+" 0,0,0 "+i+" 0 a "+n+","+s+" 0,0,0 "+-i+" 0 l 0,"+o+" a "+n+","+s+" 0,0,0 "+i+" 0 l 0,"+-o,u=r.attr("label-offset-y",s).insert("path",":first-child").attr("style",t.style).attr("d",l).attr("transform","translate("+-i/2+","+-(o/2+s)+")");return er(t,u),t.intersect=function(h){const d=Ke.rect(t,h),f=d.x-t.x;if(n!=0&&(Math.abs(f)<t.width/2||Math.abs(f)==t.width/2&&Math.abs(d.y-t.y)>t.height/2-s)){let p=s*s*(1-f*f/(n*n));p!=0&&(p=Math.sqrt(p)),p=s-p,h.y-t.y>0&&(p=-p),d.y+=p}return d},r},"cylinder"),GH=g(async(e,t)=>{const{shapeSvg:r,bbox:a,halfPadding:i}=await Lr(e,t,"node "+t.classes+" "+t.class,!0),n=r.insert("rect",":first-child"),s=t.positioned?t.width:a.width+t.padding,o=t.positioned?t.height:a.height+t.padding,l=t.positioned?-s/2:-a.width/2-i,u=t.positioned?-o/2:-a.height/2-i;if(n.attr("class","basic label-container").attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("x",l).attr("y",u).attr("width",s).attr("height",o),t.props){const h=new Set(Object.keys(t.props));t.props.borders&&(gd(n,t.props.borders,s,o),h.delete("borders")),h.forEach(d=>{G.warn(`Unknown node property ${d}`)})}return er(t,n),t.intersect=function(h){return Ke.rect(t,h)},r},"rect"),HH=g(async(e,t)=>{const{shapeSvg:r,bbox:a,halfPadding:i}=await Lr(e,t,"node "+t.classes,!0),n=r.insert("rect",":first-child"),s=t.positioned?t.width:a.width+t.padding,o=t.positioned?t.height:a.height+t.padding,l=t.positioned?-s/2:-a.width/2-i,u=t.positioned?-o/2:-a.height/2-i;if(n.attr("class","basic cluster composite label-container").attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("x",l).attr("y",u).attr("width",s).attr("height",o),t.props){const h=new Set(Object.keys(t.props));t.props.borders&&(gd(n,t.props.borders,s,o),h.delete("borders")),h.forEach(d=>{G.warn(`Unknown node property ${d}`)})}return er(t,n),t.intersect=function(h){return Ke.rect(t,h)},r},"composite"),YH=g(async(e,t)=>{const{shapeSvg:r}=await Lr(e,t,"label",!0);G.trace("Classes = ",t.class);const a=r.insert("rect",":first-child"),i=0,n=0;if(a.attr("width",i).attr("height",n),r.attr("class","label edgeLabel"),t.props){const s=new Set(Object.keys(t.props));t.props.borders&&(gd(a,t.props.borders,i,n),s.delete("borders")),s.forEach(o=>{G.warn(`Unknown node property ${o}`)})}return er(t,a),t.intersect=function(s){return Ke.rect(t,s)},r},"labelRect");function gd(e,t,r,a){const i=[],n=g(o=>{i.push(o,0)},"addBorder"),s=g(o=>{i.push(0,o)},"skipBorder");t.includes("t")?(G.debug("add top border"),n(r)):s(r),t.includes("r")?(G.debug("add right border"),n(a)):s(a),t.includes("b")?(G.debug("add bottom border"),n(r)):s(r),t.includes("l")?(G.debug("add left border"),n(a)):s(a),e.attr("stroke-dasharray",i.join(" "))}g(gd,"applyNodePropertyBorders");var UH=g((e,t)=>{let r;t.classes?r="node "+t.classes:r="node default";const a=e.insert("g").attr("class",r).attr("id",t.domId||t.id),i=a.insert("rect",":first-child"),n=a.insert("line"),s=a.insert("g").attr("class","label"),o=t.labelText.flat?t.labelText.flat():t.labelText;let l="";typeof o=="object"?l=o[0]:l=o,G.info("Label text abc79",l,o,typeof o=="object");const u=s.node().appendChild(Da(l,t.labelStyle,!0,!0));let h={width:0,height:0};if(Oe(dt().flowchart.htmlLabels)){const v=u.children[0],m=It(u);h=v.getBoundingClientRect(),m.attr("width",h.width),m.attr("height",h.height)}G.info("Text 2",o);const d=o.slice(1,o.length);let f=u.getBBox();const p=s.node().appendChild(Da(d.join?d.join("<br/>"):d,t.labelStyle,!0,!0));if(Oe(dt().flowchart.htmlLabels)){const v=p.children[0],m=It(p);h=v.getBoundingClientRect(),m.attr("width",h.width),m.attr("height",h.height)}const y=t.padding/2;return It(p).attr("transform","translate( "+(h.width>f.width?0:(f.width-h.width)/2)+", "+(f.height+y+5)+")"),It(u).attr("transform","translate( "+(h.width<f.width?0:-(f.width-h.width)/2)+", 0)"),h=s.node().getBBox(),s.attr("transform","translate("+-h.width/2+", "+(-h.height/2-y+3)+")"),i.attr("class","outer title-state").attr("x",-h.width/2-y).attr("y",-h.height/2-y).attr("width",h.width+t.padding).attr("height",h.height+t.padding),n.attr("class","divider").attr("x1",-h.width/2-y).attr("x2",h.width/2+y).attr("y1",-h.height/2-y+f.height+y).attr("y2",-h.height/2-y+f.height+y),er(t,i),t.intersect=function(v){return Ke.rect(t,v)},a},"rectWithTitle"),XH=g(async(e,t)=>{const{shapeSvg:r,bbox:a}=await Lr(e,t,xa(t,void 0),!0),i=a.height+t.padding,n=a.width+i/4+t.padding,s=r.insert("rect",":first-child").attr("style",t.style).attr("rx",i/2).attr("ry",i/2).attr("x",-n/2).attr("y",-i/2).attr("width",n).attr("height",i);return er(t,s),t.intersect=function(o){return Ke.rect(t,o)},r},"stadium"),KH=g(async(e,t)=>{const{shapeSvg:r,bbox:a,halfPadding:i}=await Lr(e,t,xa(t,void 0),!0),n=r.insert("circle",":first-child");return n.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("r",a.width/2+i).attr("width",a.width+t.padding).attr("height",a.height+t.padding),G.info("Circle main"),er(t,n),t.intersect=function(s){return G.info("Circle intersect",t,a.width/2+i,s),Ke.circle(t,a.width/2+i,s)},r},"circle"),jH=g(async(e,t)=>{const{shapeSvg:r,bbox:a,halfPadding:i}=await Lr(e,t,xa(t,void 0),!0),n=5,s=r.insert("g",":first-child"),o=s.insert("circle"),l=s.insert("circle");return s.attr("class",t.class),o.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("r",a.width/2+i+n).attr("width",a.width+t.padding+n*2).attr("height",a.height+t.padding+n*2),l.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("r",a.width/2+i).attr("width",a.width+t.padding).attr("height",a.height+t.padding),G.info("DoubleCircle main"),er(t,o),t.intersect=function(u){return G.info("DoubleCircle intersect",t,a.width/2+i+n,u),Ke.circle(t,a.width/2+i+n,u)},r},"doublecircle"),QH=g(async(e,t)=>{const{shapeSvg:r,bbox:a}=await Lr(e,t,xa(t,void 0),!0),i=a.width+t.padding,n=a.height+t.padding,s=[{x:0,y:0},{x:i,y:0},{x:i,y:-n},{x:0,y:-n},{x:0,y:0},{x:-8,y:0},{x:i+8,y:0},{x:i+8,y:-n},{x:-8,y:-n},{x:-8,y:0}],o=Ka(r,i,n,s);return o.attr("style",t.style),er(t,o),t.intersect=function(l){return Ke.polygon(t,s,l)},r},"subroutine"),ZH=g((e,t)=>{const r=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),a=r.insert("circle",":first-child");return a.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),er(t,a),t.intersect=function(i){return Ke.circle(t,7,i)},r},"start"),q2=g((e,t,r)=>{const a=e.insert("g").attr("class","node default").attr("id",t.domId||t.id);let i=70,n=10;r==="LR"&&(i=10,n=70);const s=a.append("rect").attr("x",-1*i/2).attr("y",-1*n/2).attr("width",i).attr("height",n).attr("class","fork-join");return er(t,s),t.height=t.height+t.padding/2,t.width=t.width+t.padding/2,t.intersect=function(o){return Ke.rect(t,o)},a},"forkJoin"),JH=g((e,t)=>{const r=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),a=r.insert("circle",":first-child"),i=r.insert("circle",":first-child");return i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),a.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),er(t,i),t.intersect=function(n){return Ke.circle(t,7,n)},r},"end"),tY=g((e,t)=>{var L;const r=t.padding/2,a=4,i=8;let n;t.classes?n="node "+t.classes:n="node default";const s=e.insert("g").attr("class",n).attr("id",t.domId||t.id),o=s.insert("rect",":first-child"),l=s.insert("line"),u=s.insert("line");let h=0,d=a;const f=s.insert("g").attr("class","label");let p=0;const y=(L=t.classData.annotations)==null?void 0:L[0],v=t.classData.annotations[0]?"«"+t.classData.annotations[0]+"»":"",m=f.node().appendChild(Da(v,t.labelStyle,!0,!0));let x=m.getBBox();if(Oe(dt().flowchart.htmlLabels)){const _=m.children[0],A=It(m);x=_.getBoundingClientRect(),A.attr("width",x.width),A.attr("height",x.height)}t.classData.annotations[0]&&(d+=x.height+a,h+=x.width);let b=t.classData.label;t.classData.type!==void 0&&t.classData.type!==""&&(dt().flowchart.htmlLabels?b+="&lt;"+t.classData.type+"&gt;":b+="<"+t.classData.type+">");const w=f.node().appendChild(Da(b,t.labelStyle,!0,!0));It(w).attr("class","classTitle");let C=w.getBBox();if(Oe(dt().flowchart.htmlLabels)){const _=w.children[0],A=It(w);C=_.getBoundingClientRect(),A.attr("width",C.width),A.attr("height",C.height)}d+=C.height+a,C.width>h&&(h=C.width);const T=[];t.classData.members.forEach(_=>{const A=_.getDisplayDetails();let E=A.displayText;dt().flowchart.htmlLabels&&(E=E.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const D=f.node().appendChild(Da(E,A.cssStyle?A.cssStyle:t.labelStyle,!0,!0));let R=D.getBBox();if(Oe(dt().flowchart.htmlLabels)){const O=D.children[0],P=It(D);R=O.getBoundingClientRect(),P.attr("width",R.width),P.attr("height",R.height)}R.width>h&&(h=R.width),d+=R.height+a,T.push(D)}),d+=i;const k=[];if(t.classData.methods.forEach(_=>{const A=_.getDisplayDetails();let E=A.displayText;dt().flowchart.htmlLabels&&(E=E.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const D=f.node().appendChild(Da(E,A.cssStyle?A.cssStyle:t.labelStyle,!0,!0));let R=D.getBBox();if(Oe(dt().flowchart.htmlLabels)){const O=D.children[0],P=It(D);R=O.getBoundingClientRect(),P.attr("width",R.width),P.attr("height",R.height)}R.width>h&&(h=R.width),d+=R.height+a,k.push(D)}),d+=i,y){let _=(h-x.width)/2;It(m).attr("transform","translate( "+(-1*h/2+_)+", "+-1*d/2+")"),p=x.height+a}let S=(h-C.width)/2;return It(w).attr("transform","translate( "+(-1*h/2+S)+", "+(-1*d/2+p)+")"),p+=C.height+a,l.attr("class","divider").attr("x1",-h/2-r).attr("x2",h/2+r).attr("y1",-d/2-r+i+p).attr("y2",-d/2-r+i+p),p+=i,T.forEach(_=>{It(_).attr("transform","translate( "+-h/2+", "+(-1*d/2+p+i/2)+")");const A=_==null?void 0:_.getBBox();p+=((A==null?void 0:A.height)??0)+a}),p+=i,u.attr("class","divider").attr("x1",-h/2-r).attr("x2",h/2+r).attr("y1",-d/2-r+i+p).attr("y2",-d/2-r+i+p),p+=i,k.forEach(_=>{It(_).attr("transform","translate( "+-h/2+", "+(-1*d/2+p)+")");const A=_==null?void 0:_.getBBox();p+=((A==null?void 0:A.height)??0)+a}),o.attr("style",t.style).attr("class","outer title-state").attr("x",-h/2-r).attr("y",-(d/2)-r).attr("width",h+t.padding).attr("height",d+t.padding),er(t,o),t.intersect=function(_){return Ke.rect(t,_)},s},"class_box"),W2={rhombus:z2,composite:HH,question:z2,rect:GH,labelRect:YH,rectWithTitle:UH,choice:PH,circle:KH,doublecircle:jH,stadium:XH,hexagon:NH,block_arrow:MH,rect_left_inv_arrow:FH,lean_right:OH,lean_left:$H,trapezoid:VH,inv_trapezoid:zH,rect_right_inv_arrow:qH,cylinder:WH,start:ZH,end:JH,note:IH,subroutine:QH,fork:q2,join:q2,class_box:tY},Ru={},AS=g(async(e,t,r)=>{let a,i;if(t.link){let n;dt().securityLevel==="sandbox"?n="_top":t.linkTarget&&(n=t.linkTarget||"_blank"),a=e.insert("svg:a").attr("xlink:href",t.link).attr("target",n),i=await W2[t.shape](a,t,r)}else i=await W2[t.shape](e,t,r),a=i;return t.tooltip&&i.attr("title",t.tooltip),t.class&&i.attr("class","node default "+t.class),Ru[t.id]=a,t.haveCallback&&Ru[t.id].attr("class",Ru[t.id].attr("class")+" clickable"),a},"insertNode"),eY=g(e=>{const t=Ru[e.id];G.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");const r=8,a=e.diff||0;return e.clusterNode?t.attr("transform","translate("+(e.x+a-e.width/2)+", "+(e.y-e.height/2-r)+")"):t.attr("transform","translate("+e.x+", "+e.y+")"),a},"positionNode");function W1(e,t,r=!1){var f,p,y;const a=e;let i="default";(((f=a==null?void 0:a.classes)==null?void 0:f.length)||0)>0&&(i=((a==null?void 0:a.classes)??[]).join(" ")),i=i+" flowchart-label";let n=0,s="",o;switch(a.type){case"round":n=5,s="rect";break;case"composite":n=0,s="composite",o=0;break;case"square":s="rect";break;case"diamond":s="question";break;case"hexagon":s="hexagon";break;case"block_arrow":s="block_arrow";break;case"odd":s="rect_left_inv_arrow";break;case"lean_right":s="lean_right";break;case"lean_left":s="lean_left";break;case"trapezoid":s="trapezoid";break;case"inv_trapezoid":s="inv_trapezoid";break;case"rect_left_inv_arrow":s="rect_left_inv_arrow";break;case"circle":s="circle";break;case"ellipse":s="ellipse";break;case"stadium":s="stadium";break;case"subroutine":s="subroutine";break;case"cylinder":s="cylinder";break;case"group":s="rect";break;case"doublecircle":s="doublecircle";break;default:s="rect"}const l=p0((a==null?void 0:a.styles)??[]),u=a.label,h=a.size??{width:0,height:0,x:0,y:0};return{labelStyle:l.labelStyle,shape:s,labelText:u,rx:n,ry:n,class:i,style:l.style,id:a.id,directions:a.directions,width:h.width,height:h.height,x:h.x,y:h.y,positioned:r,intersect:void 0,type:a.type,padding:o??((y=(p=$e())==null?void 0:p.block)==null?void 0:y.padding)??0}}g(W1,"getNodeFromBlock");async function LS(e,t,r){const a=W1(t,r,!1);if(a.type==="group")return;const i=$e(),n=await AS(e,a,{config:i}),s=n.node().getBBox(),o=r.getBlock(a.id);o.size={width:s.width,height:s.height,x:0,y:0,node:n},r.setBlock(o),n.remove()}g(LS,"calculateBlockSize");async function DS(e,t,r){const a=W1(t,r,!0);if(r.getBlock(a.id).type!=="space"){const n=$e();await AS(e,a,{config:n}),t.intersect=a==null?void 0:a.intersect,eY(a)}}g(DS,"insertBlockPositioned");async function yd(e,t,r,a){for(const i of t)await a(e,i,r),i.children&&await yd(e,i.children,r,a)}g(yd,"performOperations");async function BS(e,t,r){await yd(e,t,r,LS)}g(BS,"calculateBlockSizes");async function RS(e,t,r){await yd(e,t,r,DS)}g(RS,"insertBlocks");async function IS(e,t,r,a,i){const n=new Eh({multigraph:!0,compound:!0});n.setGraph({rankdir:"TB",nodesep:10,ranksep:10,marginx:8,marginy:8});for(const s of r)s.size&&n.setNode(s.id,{width:s.size.width,height:s.size.height,intersect:s.intersect});for(const s of t)if(s.start&&s.end){const o=a.getBlock(s.start),l=a.getBlock(s.end);if(o!=null&&o.size&&(l!=null&&l.size)){const u=o.size,h=l.size,d=[{x:u.x,y:u.y},{x:u.x+(h.x-u.x)/2,y:u.y+(h.y-u.y)/2},{x:h.x,y:h.y}];TH(e,{v:s.start,w:s.end,name:s.id},{...s,arrowTypeEnd:s.arrowTypeEnd,arrowTypeStart:s.arrowTypeStart,points:d,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"},void 0,"block",n,i),s.label&&(await xH(e,{...s,label:s.label,labelStyle:"stroke: #333; stroke-width: 1.5px;fill:none;",arrowTypeEnd:s.arrowTypeEnd,arrowTypeStart:s.arrowTypeStart,points:d,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"}),bH({...s,x:d[1].x,y:d[1].y},{originalPath:d}))}}}g(IS,"insertEdges");var rY=g(function(e,t){return t.db.getClasses()},"getClasses"),aY=g(async function(e,t,r,a){const{securityLevel:i,block:n}=$e(),s=a.db;let o;i==="sandbox"&&(o=It("#i"+t));const l=i==="sandbox"?It(o.nodes()[0].contentDocument.body):It("body"),u=i==="sandbox"?l.select(`[id="${t}"]`):It(`[id="${t}"]`);pH(u,["point","circle","cross"],a.type,t);const d=s.getBlocks(),f=s.getBlocksFlat(),p=s.getEdges(),y=u.insert("g").attr("class","block");await BS(y,d,s);const v=bS(s);if(await RS(y,d,s),await IS(y,p,f,s,t),v){const m=v,x=Math.max(1,Math.round(.125*(m.width/m.height))),b=m.height+x+10,w=m.width+10,{useMaxWidth:C}=n;da(u,b,w,!!C),G.debug("Here Bounds",v,m),u.attr("viewBox",`${m.x-5} ${m.y-5} ${m.width+10} ${m.height+10}`)}},"draw"),iY={draw:aY,getClasses:rY},nY={parser:NG,db:tH,renderer:iY,styles:rH};const sY=Object.freeze({__proto__:null,diagram:nY});var Iu={exports:{}},oY=Iu.exports,G2;function lY(){return G2||(G2=1,function(e,t){(function(a,i){e.exports=i(cE())})(oY,function(r){return(()=>{var a={658:o=>{o.exports=Object.assign!=null?Object.assign.bind(Object):function(l){for(var u=arguments.length,h=Array(u>1?u-1:0),d=1;d<u;d++)h[d-1]=arguments[d];return h.forEach(function(f){Object.keys(f).forEach(function(p){return l[p]=f[p]})}),l}},548:(o,l,u)=>{var h=function(){function p(y,v){var m=[],x=!0,b=!1,w=void 0;try{for(var C=y[Symbol.iterator](),T;!(x=(T=C.next()).done)&&(m.push(T.value),!(v&&m.length===v));x=!0);}catch(k){b=!0,w=k}finally{try{!x&&C.return&&C.return()}finally{if(b)throw w}}return m}return function(y,v){if(Array.isArray(y))return y;if(Symbol.iterator in Object(y))return p(y,v);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=u(140).layoutBase.LinkedList,f={};f.getTopMostNodes=function(p){for(var y={},v=0;v<p.length;v++)y[p[v].id()]=!0;var m=p.filter(function(x,b){typeof x=="number"&&(x=b);for(var w=x.parent()[0];w!=null;){if(y[w.id()])return!1;w=w.parent()[0]}return!0});return m},f.connectComponents=function(p,y,v,m){var x=new d,b=new Set,w=[],C=void 0,T=void 0,k=void 0,S=!1,L=1,_=[],A=[],E=function(){var R=p.collection();A.push(R);var O=v[0],P=p.collection();P.merge(O).merge(O.descendants().intersection(y)),w.push(O),P.forEach(function(I){x.push(I),b.add(I),R.merge(I)});for(var $=function(){O=x.shift();var F=p.collection();O.neighborhood().nodes().forEach(function(U){y.intersection(O.edgesWith(U)).length>0&&F.merge(U)});for(var V=0;V<F.length;V++){var N=F[V];if(C=v.intersection(N.union(N.ancestors())),C!=null&&!b.has(C[0])){var q=C.union(C.descendants());q.forEach(function(U){x.push(U),b.add(U),R.merge(U),v.has(U)&&w.push(U)})}}};x.length!=0;)$();if(R.forEach(function(I){y.intersection(I.connectedEdges()).forEach(function(F){R.has(F.source())&&R.has(F.target())&&R.merge(F)})}),w.length==v.length&&(S=!0),!S||S&&L>1){T=w[0],k=T.connectedEdges().length,w.forEach(function(I){I.connectedEdges().length<k&&(k=I.connectedEdges().length,T=I)}),_.push(T.id());var M=p.collection();M.merge(w[0]),w.forEach(function(I){M.merge(I)}),w=[],v=v.difference(M),L++}};do E();while(!S);return m&&_.length>0&&m.set("dummy"+(m.size+1),_),A},f.relocateComponent=function(p,y,v){if(!v.fixedNodeConstraint){var m=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY,b=Number.POSITIVE_INFINITY,w=Number.NEGATIVE_INFINITY;if(v.quality=="draft"){var C=!0,T=!1,k=void 0;try{for(var S=y.nodeIndexes[Symbol.iterator](),L;!(C=(L=S.next()).done);C=!0){var _=L.value,A=h(_,2),E=A[0],D=A[1],R=v.cy.getElementById(E);if(R){var O=R.boundingBox(),P=y.xCoords[D]-O.w/2,$=y.xCoords[D]+O.w/2,M=y.yCoords[D]-O.h/2,I=y.yCoords[D]+O.h/2;P<m&&(m=P),$>x&&(x=$),M<b&&(b=M),I>w&&(w=I)}}}catch(U){T=!0,k=U}finally{try{!C&&S.return&&S.return()}finally{if(T)throw k}}var F=p.x-(x+m)/2,V=p.y-(w+b)/2;y.xCoords=y.xCoords.map(function(U){return U+F}),y.yCoords=y.yCoords.map(function(U){return U+V})}else{Object.keys(y).forEach(function(U){var X=y[U],lt=X.getRect().x,J=X.getRect().x+X.getRect().width,ct=X.getRect().y,yt=X.getRect().y+X.getRect().height;lt<m&&(m=lt),J>x&&(x=J),ct<b&&(b=ct),yt>w&&(w=yt)});var N=p.x-(x+m)/2,q=p.y-(w+b)/2;Object.keys(y).forEach(function(U){var X=y[U];X.setCenter(X.getCenterX()+N,X.getCenterY()+q)})}}},f.calcBoundingBox=function(p,y,v,m){for(var x=Number.MAX_SAFE_INTEGER,b=Number.MIN_SAFE_INTEGER,w=Number.MAX_SAFE_INTEGER,C=Number.MIN_SAFE_INTEGER,T=void 0,k=void 0,S=void 0,L=void 0,_=p.descendants().not(":parent"),A=_.length,E=0;E<A;E++){var D=_[E];T=y[m.get(D.id())]-D.width()/2,k=y[m.get(D.id())]+D.width()/2,S=v[m.get(D.id())]-D.height()/2,L=v[m.get(D.id())]+D.height()/2,x>T&&(x=T),b<k&&(b=k),w>S&&(w=S),C<L&&(C=L)}var R={};return R.topLeftX=x,R.topLeftY=w,R.width=b-x,R.height=C-w,R},f.calcParentsWithoutChildren=function(p,y){var v=p.collection();return y.nodes(":parent").forEach(function(m){var x=!1;m.children().forEach(function(b){b.css("display")!="none"&&(x=!0)}),x||v.merge(m)}),v},o.exports=f},816:(o,l,u)=>{var h=u(548),d=u(140).CoSELayout,f=u(140).CoSENode,p=u(140).layoutBase.PointD,y=u(140).layoutBase.DimensionD,v=u(140).layoutBase.LayoutConstants,m=u(140).layoutBase.FDLayoutConstants,x=u(140).CoSEConstants,b=function(C,T){var k=C.cy,S=C.eles,L=S.nodes(),_=S.edges(),A=void 0,E=void 0,D=void 0,R={};C.randomize&&(A=T.nodeIndexes,E=T.xCoords,D=T.yCoords);var O=function(U){return typeof U=="function"},P=function(U,X){return O(U)?U(X):U},$=h.calcParentsWithoutChildren(k,S),M=function q(U,X,lt,J){for(var ct=X.length,yt=0;yt<ct;yt++){var ut=X[yt],Q=null;ut.intersection($).length==0&&(Q=ut.children());var K=void 0,j=ut.layoutDimensions({nodeDimensionsIncludeLabels:J.nodeDimensionsIncludeLabels});if(ut.outerWidth()!=null&&ut.outerHeight()!=null)if(J.randomize)if(!ut.isParent())K=U.add(new f(lt.graphManager,new p(E[A.get(ut.id())]-j.w/2,D[A.get(ut.id())]-j.h/2),new y(parseFloat(j.w),parseFloat(j.h))));else{var Y=h.calcBoundingBox(ut,E,D,A);ut.intersection($).length==0?K=U.add(new f(lt.graphManager,new p(Y.topLeftX,Y.topLeftY),new y(Y.width,Y.height))):K=U.add(new f(lt.graphManager,new p(Y.topLeftX,Y.topLeftY),new y(parseFloat(j.w),parseFloat(j.h))))}else K=U.add(new f(lt.graphManager,new p(ut.position("x")-j.w/2,ut.position("y")-j.h/2),new y(parseFloat(j.w),parseFloat(j.h))));else K=U.add(new f(this.graphManager));if(K.id=ut.data("id"),K.nodeRepulsion=P(J.nodeRepulsion,ut),K.paddingLeft=parseInt(ut.css("padding")),K.paddingTop=parseInt(ut.css("padding")),K.paddingRight=parseInt(ut.css("padding")),K.paddingBottom=parseInt(ut.css("padding")),J.nodeDimensionsIncludeLabels&&(K.labelWidth=ut.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,K.labelHeight=ut.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,K.labelPosVertical=ut.css("text-valign"),K.labelPosHorizontal=ut.css("text-halign")),R[ut.data("id")]=K,isNaN(K.rect.x)&&(K.rect.x=0),isNaN(K.rect.y)&&(K.rect.y=0),Q!=null&&Q.length>0){var st=void 0;st=lt.getGraphManager().add(lt.newGraph(),K),q(st,Q,lt,J)}}},I=function(U,X,lt){for(var J=0,ct=0,yt=0;yt<lt.length;yt++){var ut=lt[yt],Q=R[ut.data("source")],K=R[ut.data("target")];if(Q&&K&&Q!==K&&Q.getEdgesBetween(K).length==0){var j=X.add(U.newEdge(),Q,K);j.id=ut.id(),j.idealLength=P(C.idealEdgeLength,ut),j.edgeElasticity=P(C.edgeElasticity,ut),J+=j.idealLength,ct++}}C.idealEdgeLength!=null&&(ct>0?x.DEFAULT_EDGE_LENGTH=m.DEFAULT_EDGE_LENGTH=J/ct:O(C.idealEdgeLength)?x.DEFAULT_EDGE_LENGTH=m.DEFAULT_EDGE_LENGTH=50:x.DEFAULT_EDGE_LENGTH=m.DEFAULT_EDGE_LENGTH=C.idealEdgeLength,x.MIN_REPULSION_DIST=m.MIN_REPULSION_DIST=m.DEFAULT_EDGE_LENGTH/10,x.DEFAULT_RADIAL_SEPARATION=m.DEFAULT_EDGE_LENGTH)},F=function(U,X){X.fixedNodeConstraint&&(U.constraints.fixedNodeConstraint=X.fixedNodeConstraint),X.alignmentConstraint&&(U.constraints.alignmentConstraint=X.alignmentConstraint),X.relativePlacementConstraint&&(U.constraints.relativePlacementConstraint=X.relativePlacementConstraint)};C.nestingFactor!=null&&(x.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=m.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=C.nestingFactor),C.gravity!=null&&(x.DEFAULT_GRAVITY_STRENGTH=m.DEFAULT_GRAVITY_STRENGTH=C.gravity),C.numIter!=null&&(x.MAX_ITERATIONS=m.MAX_ITERATIONS=C.numIter),C.gravityRange!=null&&(x.DEFAULT_GRAVITY_RANGE_FACTOR=m.DEFAULT_GRAVITY_RANGE_FACTOR=C.gravityRange),C.gravityCompound!=null&&(x.DEFAULT_COMPOUND_GRAVITY_STRENGTH=m.DEFAULT_COMPOUND_GRAVITY_STRENGTH=C.gravityCompound),C.gravityRangeCompound!=null&&(x.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=m.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=C.gravityRangeCompound),C.initialEnergyOnIncremental!=null&&(x.DEFAULT_COOLING_FACTOR_INCREMENTAL=m.DEFAULT_COOLING_FACTOR_INCREMENTAL=C.initialEnergyOnIncremental),C.tilingCompareBy!=null&&(x.TILING_COMPARE_BY=C.tilingCompareBy),C.quality=="proof"?v.QUALITY=2:v.QUALITY=0,x.NODE_DIMENSIONS_INCLUDE_LABELS=m.NODE_DIMENSIONS_INCLUDE_LABELS=v.NODE_DIMENSIONS_INCLUDE_LABELS=C.nodeDimensionsIncludeLabels,x.DEFAULT_INCREMENTAL=m.DEFAULT_INCREMENTAL=v.DEFAULT_INCREMENTAL=!C.randomize,x.ANIMATE=m.ANIMATE=v.ANIMATE=C.animate,x.TILE=C.tile,x.TILING_PADDING_VERTICAL=typeof C.tilingPaddingVertical=="function"?C.tilingPaddingVertical.call():C.tilingPaddingVertical,x.TILING_PADDING_HORIZONTAL=typeof C.tilingPaddingHorizontal=="function"?C.tilingPaddingHorizontal.call():C.tilingPaddingHorizontal,x.DEFAULT_INCREMENTAL=m.DEFAULT_INCREMENTAL=v.DEFAULT_INCREMENTAL=!0,x.PURE_INCREMENTAL=!C.randomize,v.DEFAULT_UNIFORM_LEAF_NODE_SIZES=C.uniformNodeDimensions,C.step=="transformed"&&(x.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,x.ENFORCE_CONSTRAINTS=!1,x.APPLY_LAYOUT=!1),C.step=="enforced"&&(x.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,x.ENFORCE_CONSTRAINTS=!0,x.APPLY_LAYOUT=!1),C.step=="cose"&&(x.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,x.ENFORCE_CONSTRAINTS=!1,x.APPLY_LAYOUT=!0),C.step=="all"&&(C.randomize?x.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:x.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,x.ENFORCE_CONSTRAINTS=!0,x.APPLY_LAYOUT=!0),C.fixedNodeConstraint||C.alignmentConstraint||C.relativePlacementConstraint?x.TREE_REDUCTION_ON_INCREMENTAL=!1:x.TREE_REDUCTION_ON_INCREMENTAL=!0;var V=new d,N=V.newGraphManager();return M(N.addRoot(),h.getTopMostNodes(L),V,C),I(V,N,_),F(V,C),V.runLayout(),R};o.exports={coseLayout:b}},212:(o,l,u)=>{var h=function(){function C(T,k){for(var S=0;S<k.length;S++){var L=k[S];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(T,L.key,L)}}return function(T,k,S){return k&&C(T.prototype,k),S&&C(T,S),T}}();function d(C,T){if(!(C instanceof T))throw new TypeError("Cannot call a class as a function")}var f=u(658),p=u(548),y=u(657),v=y.spectralLayout,m=u(816),x=m.coseLayout,b=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:function(T){return 4500},idealEdgeLength:function(T){return 50},edgeElasticity:function(T){return .45},nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:function(){},stop:function(){}}),w=function(){function C(T){d(this,C),this.options=f({},b,T)}return h(C,[{key:"run",value:function(){var k=this,S=this.options,L=S.cy,_=S.eles,A=[],E=[],D=void 0,R=[];S.fixedNodeConstraint&&(!Array.isArray(S.fixedNodeConstraint)||S.fixedNodeConstraint.length==0)&&(S.fixedNodeConstraint=void 0),S.alignmentConstraint&&(S.alignmentConstraint.vertical&&(!Array.isArray(S.alignmentConstraint.vertical)||S.alignmentConstraint.vertical.length==0)&&(S.alignmentConstraint.vertical=void 0),S.alignmentConstraint.horizontal&&(!Array.isArray(S.alignmentConstraint.horizontal)||S.alignmentConstraint.horizontal.length==0)&&(S.alignmentConstraint.horizontal=void 0)),S.relativePlacementConstraint&&(!Array.isArray(S.relativePlacementConstraint)||S.relativePlacementConstraint.length==0)&&(S.relativePlacementConstraint=void 0);var O=S.fixedNodeConstraint||S.alignmentConstraint||S.relativePlacementConstraint;O&&(S.tile=!1,S.packComponents=!1);var P=void 0,$=!1;if(L.layoutUtilities&&S.packComponents&&(P=L.layoutUtilities("get"),P||(P=L.layoutUtilities()),$=!0),_.nodes().length>0)if($){var F=p.getTopMostNodes(S.eles.nodes());if(D=p.connectComponents(L,S.eles,F),D.forEach(function(tt){var H=tt.boundingBox();R.push({x:H.x1+H.w/2,y:H.y1+H.h/2})}),S.randomize&&D.forEach(function(tt){S.eles=tt,A.push(v(S))}),S.quality=="default"||S.quality=="proof"){var V=L.collection();if(S.tile){var N=new Map,q=[],U=[],X=0,lt={nodeIndexes:N,xCoords:q,yCoords:U},J=[];if(D.forEach(function(tt,H){tt.edges().length==0&&(tt.nodes().forEach(function(Et,nt){V.merge(tt.nodes()[nt]),Et.isParent()||(lt.nodeIndexes.set(tt.nodes()[nt].id(),X++),lt.xCoords.push(tt.nodes()[0].position().x),lt.yCoords.push(tt.nodes()[0].position().y))}),J.push(H))}),V.length>1){var ct=V.boundingBox();R.push({x:ct.x1+ct.w/2,y:ct.y1+ct.h/2}),D.push(V),A.push(lt);for(var yt=J.length-1;yt>=0;yt--)D.splice(J[yt],1),A.splice(J[yt],1),R.splice(J[yt],1)}}D.forEach(function(tt,H){S.eles=tt,E.push(x(S,A[H])),p.relocateComponent(R[H],E[H],S)})}else D.forEach(function(tt,H){p.relocateComponent(R[H],A[H],S)});var ut=new Set;if(D.length>1){var Q=[],K=_.filter(function(tt){return tt.css("display")=="none"});D.forEach(function(tt,H){var Et=void 0;if(S.quality=="draft"&&(Et=A[H].nodeIndexes),tt.nodes().not(K).length>0){var nt={};nt.edges=[],nt.nodes=[];var Lt=void 0;tt.nodes().not(K).forEach(function(Dt){if(S.quality=="draft")if(!Dt.isParent())Lt=Et.get(Dt.id()),nt.nodes.push({x:A[H].xCoords[Lt]-Dt.boundingbox().w/2,y:A[H].yCoords[Lt]-Dt.boundingbox().h/2,width:Dt.boundingbox().w,height:Dt.boundingbox().h});else{var At=p.calcBoundingBox(Dt,A[H].xCoords,A[H].yCoords,Et);nt.nodes.push({x:At.topLeftX,y:At.topLeftY,width:At.width,height:At.height})}else E[H][Dt.id()]&&nt.nodes.push({x:E[H][Dt.id()].getLeft(),y:E[H][Dt.id()].getTop(),width:E[H][Dt.id()].getWidth(),height:E[H][Dt.id()].getHeight()})}),tt.edges().forEach(function(Dt){var At=Dt.source(),xt=Dt.target();if(At.css("display")!="none"&&xt.css("display")!="none")if(S.quality=="draft"){var _t=Et.get(At.id()),vt=Et.get(xt.id()),wt=[],St=[];if(At.isParent()){var at=p.calcBoundingBox(At,A[H].xCoords,A[H].yCoords,Et);wt.push(at.topLeftX+at.width/2),wt.push(at.topLeftY+at.height/2)}else wt.push(A[H].xCoords[_t]),wt.push(A[H].yCoords[_t]);if(xt.isParent()){var Ct=p.calcBoundingBox(xt,A[H].xCoords,A[H].yCoords,Et);St.push(Ct.topLeftX+Ct.width/2),St.push(Ct.topLeftY+Ct.height/2)}else St.push(A[H].xCoords[vt]),St.push(A[H].yCoords[vt]);nt.edges.push({startX:wt[0],startY:wt[1],endX:St[0],endY:St[1]})}else E[H][At.id()]&&E[H][xt.id()]&&nt.edges.push({startX:E[H][At.id()].getCenterX(),startY:E[H][At.id()].getCenterY(),endX:E[H][xt.id()].getCenterX(),endY:E[H][xt.id()].getCenterY()})}),nt.nodes.length>0&&(Q.push(nt),ut.add(H))}});var j=P.packComponents(Q,S.randomize).shifts;if(S.quality=="draft")A.forEach(function(tt,H){var Et=tt.xCoords.map(function(Lt){return Lt+j[H].dx}),nt=tt.yCoords.map(function(Lt){return Lt+j[H].dy});tt.xCoords=Et,tt.yCoords=nt});else{var Y=0;ut.forEach(function(tt){Object.keys(E[tt]).forEach(function(H){var Et=E[tt][H];Et.setCenter(Et.getCenterX()+j[Y].dx,Et.getCenterY()+j[Y].dy)}),Y++})}}}else{var M=S.eles.boundingBox();if(R.push({x:M.x1+M.w/2,y:M.y1+M.h/2}),S.randomize){var I=v(S);A.push(I)}S.quality=="default"||S.quality=="proof"?(E.push(x(S,A[0])),p.relocateComponent(R[0],E[0],S)):p.relocateComponent(R[0],A[0],S)}var st=function(H,Et){if(S.quality=="default"||S.quality=="proof"){typeof H=="number"&&(H=Et);var nt=void 0,Lt=void 0,Dt=H.data("id");return E.forEach(function(xt){Dt in xt&&(nt={x:xt[Dt].getRect().getCenterX(),y:xt[Dt].getRect().getCenterY()},Lt=xt[Dt])}),S.nodeDimensionsIncludeLabels&&(Lt.labelWidth&&(Lt.labelPosHorizontal=="left"?nt.x+=Lt.labelWidth/2:Lt.labelPosHorizontal=="right"&&(nt.x-=Lt.labelWidth/2)),Lt.labelHeight&&(Lt.labelPosVertical=="top"?nt.y+=Lt.labelHeight/2:Lt.labelPosVertical=="bottom"&&(nt.y-=Lt.labelHeight/2))),nt==null&&(nt={x:H.position("x"),y:H.position("y")}),{x:nt.x,y:nt.y}}else{var At=void 0;return A.forEach(function(xt){var _t=xt.nodeIndexes.get(H.id());_t!=null&&(At={x:xt.xCoords[_t],y:xt.yCoords[_t]})}),At==null&&(At={x:H.position("x"),y:H.position("y")}),{x:At.x,y:At.y}}};if(S.quality=="default"||S.quality=="proof"||S.randomize){var W=p.calcParentsWithoutChildren(L,_),bt=_.filter(function(tt){return tt.css("display")=="none"});S.eles=_.not(bt),_.nodes().not(":parent").not(bt).layoutPositions(k,S,st),W.length>0&&W.forEach(function(tt){tt.position(st(tt))})}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}}]),C}();o.exports=w},657:(o,l,u)=>{var h=u(548),d=u(140).layoutBase.Matrix,f=u(140).layoutBase.SVD,p=function(v){var m=v.cy,x=v.eles,b=x.nodes(),w=x.nodes(":parent"),C=new Map,T=new Map,k=new Map,S=[],L=[],_=[],A=[],E=[],D=[],R=[],O=[],P=void 0,$=1e8,M=1e-9,I=v.piTol,F=v.samplingType,V=v.nodeSeparation,N=void 0,q=function(){for(var B=0,et=0,Z=!1;et<N;){B=Math.floor(Math.random()*P),Z=!1;for(var ht=0;ht<et;ht++)if(A[ht]==B){Z=!0;break}if(!Z)A[et]=B,et++;else continue}},U=function(B,et,Z){for(var ht=[],ot=0,pt=0,gt=0,kt=void 0,Ft=[],Ht=0,Pt=1,Ot=0;Ot<P;Ot++)Ft[Ot]=$;for(ht[pt]=B,Ft[B]=0;pt>=ot;){gt=ht[ot++];for(var Gt=S[gt],Bt=0;Bt<Gt.length;Bt++)kt=T.get(Gt[Bt]),Ft[kt]==$&&(Ft[kt]=Ft[gt]+1,ht[++pt]=kt);D[gt][et]=Ft[gt]*V}if(Z){for(var te=0;te<P;te++)D[te][et]<E[te]&&(E[te]=D[te][et]);for(var ue=0;ue<P;ue++)E[ue]>Ht&&(Ht=E[ue],Pt=ue)}return Pt},X=function(B){var et=void 0;if(B){et=Math.floor(Math.random()*P);for(var ht=0;ht<P;ht++)E[ht]=$;for(var ot=0;ot<N;ot++)A[ot]=et,et=U(et,ot,B)}else{q();for(var Z=0;Z<N;Z++)U(A[Z],Z,B)}for(var pt=0;pt<P;pt++)for(var gt=0;gt<N;gt++)D[pt][gt]*=D[pt][gt];for(var kt=0;kt<N;kt++)R[kt]=[];for(var Ft=0;Ft<N;Ft++)for(var Ht=0;Ht<N;Ht++)R[Ft][Ht]=D[A[Ht]][Ft]},lt=function(){for(var B=f.svd(R),et=B.S,Z=B.U,ht=B.V,ot=et[0]*et[0]*et[0],pt=[],gt=0;gt<N;gt++){pt[gt]=[];for(var kt=0;kt<N;kt++)pt[gt][kt]=0,gt==kt&&(pt[gt][kt]=et[gt]/(et[gt]*et[gt]+ot/(et[gt]*et[gt])))}O=d.multMat(d.multMat(ht,pt),d.transpose(Z))},J=function(){for(var B=void 0,et=void 0,Z=[],ht=[],ot=[],pt=[],gt=0;gt<P;gt++)Z[gt]=Math.random(),ht[gt]=Math.random();Z=d.normalize(Z),ht=d.normalize(ht);for(var kt=M,Ft=M,Ht=void 0;;){for(var Pt=0;Pt<P;Pt++)ot[Pt]=Z[Pt];if(Z=d.multGamma(d.multL(d.multGamma(ot),D,O)),B=d.dotProduct(ot,Z),Z=d.normalize(Z),kt=d.dotProduct(ot,Z),Ht=Math.abs(kt/Ft),Ht<=1+I&&Ht>=1)break;Ft=kt}for(var Ot=0;Ot<P;Ot++)ot[Ot]=Z[Ot];for(Ft=M;;){for(var Gt=0;Gt<P;Gt++)pt[Gt]=ht[Gt];if(pt=d.minusOp(pt,d.multCons(ot,d.dotProduct(ot,pt))),ht=d.multGamma(d.multL(d.multGamma(pt),D,O)),et=d.dotProduct(pt,ht),ht=d.normalize(ht),kt=d.dotProduct(pt,ht),Ht=Math.abs(kt/Ft),Ht<=1+I&&Ht>=1)break;Ft=kt}for(var Bt=0;Bt<P;Bt++)pt[Bt]=ht[Bt];L=d.multCons(ot,Math.sqrt(Math.abs(B))),_=d.multCons(pt,Math.sqrt(Math.abs(et)))};h.connectComponents(m,x,h.getTopMostNodes(b),C),w.forEach(function(ft){h.connectComponents(m,x,h.getTopMostNodes(ft.descendants().intersection(x)),C)});for(var ct=0,yt=0;yt<b.length;yt++)b[yt].isParent()||T.set(b[yt].id(),ct++);var ut=!0,Q=!1,K=void 0;try{for(var j=C.keys()[Symbol.iterator](),Y;!(ut=(Y=j.next()).done);ut=!0){var st=Y.value;T.set(st,ct++)}}catch(ft){Q=!0,K=ft}finally{try{!ut&&j.return&&j.return()}finally{if(Q)throw K}}for(var W=0;W<T.size;W++)S[W]=[];w.forEach(function(ft){for(var B=ft.children().intersection(x);B.nodes(":childless").length==0;)B=B.nodes()[0].children().intersection(x);var et=0,Z=B.nodes(":childless")[0].connectedEdges().length;B.nodes(":childless").forEach(function(ht,ot){ht.connectedEdges().length<Z&&(Z=ht.connectedEdges().length,et=ot)}),k.set(ft.id(),B.nodes(":childless")[et].id())}),b.forEach(function(ft){var B=void 0;ft.isParent()?B=T.get(k.get(ft.id())):B=T.get(ft.id()),ft.neighborhood().nodes().forEach(function(et){x.intersection(ft.edgesWith(et)).length>0&&(et.isParent()?S[B].push(k.get(et.id())):S[B].push(et.id()))})});var bt=function(B){var et=T.get(B),Z=void 0;C.get(B).forEach(function(ht){m.getElementById(ht).isParent()?Z=k.get(ht):Z=ht,S[et].push(Z),S[T.get(Z)].push(B)})},tt=!0,H=!1,Et=void 0;try{for(var nt=C.keys()[Symbol.iterator](),Lt;!(tt=(Lt=nt.next()).done);tt=!0){var Dt=Lt.value;bt(Dt)}}catch(ft){H=!0,Et=ft}finally{try{!tt&&nt.return&&nt.return()}finally{if(H)throw Et}}P=T.size;var At=void 0;if(P>2){N=P<v.sampleSize?P:v.sampleSize;for(var xt=0;xt<P;xt++)D[xt]=[];for(var _t=0;_t<N;_t++)O[_t]=[];return v.quality=="draft"||v.step=="all"?(X(F),lt(),J(),At={nodeIndexes:T,xCoords:L,yCoords:_}):(T.forEach(function(ft,B){L.push(m.getElementById(B).position("x")),_.push(m.getElementById(B).position("y"))}),At={nodeIndexes:T,xCoords:L,yCoords:_}),At}else{var vt=T.keys(),wt=m.getElementById(vt.next().value),St=wt.position(),at=wt.outerWidth();if(L.push(St.x),_.push(St.y),P==2){var Ct=m.getElementById(vt.next().value),z=Ct.outerWidth();L.push(St.x+at/2+z/2+v.idealEdgeLength),_.push(St.y)}return At={nodeIndexes:T,xCoords:L,yCoords:_},At}};o.exports={spectralLayout:p}},579:(o,l,u)=>{var h=u(212),d=function(p){p&&p("layout","fcose",h)};typeof cytoscape<"u"&&d(cytoscape),o.exports=d},140:o=>{o.exports=r}},i={};function n(o){var l=i[o];if(l!==void 0)return l.exports;var u=i[o]={exports:{}};return a[o](u,u.exports,n),u.exports}var s=n(579);return s})()})}(Iu)),Iu.exports}var cY=lY();const uY=hx(cY);var H2={L:"left",R:"right",T:"top",B:"bottom"},Y2={L:g(e=>`${e},${e/2} 0,${e} 0,0`,"L"),R:g(e=>`0,${e/2} ${e},0 ${e},${e}`,"R"),T:g(e=>`0,0 ${e},0 ${e/2},${e}`,"T"),B:g(e=>`${e/2},0 ${e},${e} 0,${e}`,"B")},au={L:g((e,t)=>e-t+2,"L"),R:g((e,t)=>e-2,"R"),T:g((e,t)=>e-t+2,"T"),B:g((e,t)=>e-2,"B")},hY=g(function(e){return Kr(e)?e==="L"?"R":"L":e==="T"?"B":"T"},"getOppositeArchitectureDirection"),U2=g(function(e){const t=e;return t==="L"||t==="R"||t==="T"||t==="B"},"isArchitectureDirection"),Kr=g(function(e){const t=e;return t==="L"||t==="R"},"isArchitectureDirectionX"),sn=g(function(e){const t=e;return t==="T"||t==="B"},"isArchitectureDirectionY"),G1=g(function(e,t){const r=Kr(e)&&sn(t),a=sn(e)&&Kr(t);return r||a},"isArchitectureDirectionXY"),dY=g(function(e){const t=e[0],r=e[1],a=Kr(t)&&sn(r),i=sn(t)&&Kr(r);return a||i},"isArchitecturePairXY"),fY=g(function(e){return e!=="LL"&&e!=="RR"&&e!=="TT"&&e!=="BB"},"isValidArchitectureDirectionPair"),Gg=g(function(e,t){const r=`${e}${t}`;return fY(r)?r:void 0},"getArchitectureDirectionPair"),pY=g(function([e,t],r){const a=r[0],i=r[1];return Kr(a)?sn(i)?[e+(a==="L"?-1:1),t+(i==="T"?1:-1)]:[e+(a==="L"?-1:1),t]:Kr(i)?[e+(i==="L"?1:-1),t+(a==="T"?1:-1)]:[e,t+(a==="T"?1:-1)]},"shiftPositionByArchitectureDirectionPair"),gY=g(function(e){return e==="LT"||e==="TL"?[1,1]:e==="BL"||e==="LB"?[1,-1]:e==="BR"||e==="RB"?[-1,-1]:[-1,1]},"getArchitectureDirectionXYFactors"),yY=g(function(e,t){return G1(e,t)?"bend":Kr(e)?"horizontal":"vertical"},"getArchitectureDirectionAlignment"),vY=g(function(e){return e.type==="service"},"isArchitectureService"),mY=g(function(e){return e.type==="junction"},"isArchitectureJunction"),PS=g(e=>e.data(),"edgeData"),Cs=g(e=>e.data(),"nodeData"),NS=Ee.architecture,be=new D0(()=>({nodes:{},groups:{},edges:[],registeredIds:{},config:NS,dataStructures:void 0,elements:{}})),xY=g(()=>{be.reset(),xr()},"clear"),bY=g(function({id:e,icon:t,in:r,title:a,iconText:i}){if(be.records.registeredIds[e]!==void 0)throw new Error(`The service id [${e}] is already in use by another ${be.records.registeredIds[e]}`);if(r!==void 0){if(e===r)throw new Error(`The service [${e}] cannot be placed within itself`);if(be.records.registeredIds[r]===void 0)throw new Error(`The service [${e}]'s parent does not exist. Please make sure the parent is created before this service`);if(be.records.registeredIds[r]==="node")throw new Error(`The service [${e}]'s parent is not a group`)}be.records.registeredIds[e]="node",be.records.nodes[e]={id:e,type:"service",icon:t,iconText:i,title:a,edges:[],in:r}},"addService"),wY=g(()=>Object.values(be.records.nodes).filter(vY),"getServices"),kY=g(function({id:e,in:t}){be.records.registeredIds[e]="node",be.records.nodes[e]={id:e,type:"junction",edges:[],in:t}},"addJunction"),TY=g(()=>Object.values(be.records.nodes).filter(mY),"getJunctions"),CY=g(()=>Object.values(be.records.nodes),"getNodes"),Hg=g(e=>be.records.nodes[e],"getNode"),SY=g(function({id:e,icon:t,in:r,title:a}){if(be.records.registeredIds[e]!==void 0)throw new Error(`The group id [${e}] is already in use by another ${be.records.registeredIds[e]}`);if(r!==void 0){if(e===r)throw new Error(`The group [${e}] cannot be placed within itself`);if(be.records.registeredIds[r]===void 0)throw new Error(`The group [${e}]'s parent does not exist. Please make sure the parent is created before this group`);if(be.records.registeredIds[r]==="node")throw new Error(`The group [${e}]'s parent is not a group`)}be.records.registeredIds[e]="group",be.records.groups[e]={id:e,icon:t,title:a,in:r}},"addGroup"),EY=g(()=>Object.values(be.records.groups),"getGroups"),_Y=g(function({lhsId:e,rhsId:t,lhsDir:r,rhsDir:a,lhsInto:i,rhsInto:n,lhsGroup:s,rhsGroup:o,title:l}){if(!U2(r))throw new Error(`Invalid direction given for left hand side of edge ${e}--${t}. Expected (L,R,T,B) got ${r}`);if(!U2(a))throw new Error(`Invalid direction given for right hand side of edge ${e}--${t}. Expected (L,R,T,B) got ${a}`);if(be.records.nodes[e]===void 0&&be.records.groups[e]===void 0)throw new Error(`The left-hand id [${e}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(be.records.nodes[t]===void 0&&be.records.groups[e]===void 0)throw new Error(`The right-hand id [${t}] does not yet exist. Please create the service/group before declaring an edge to it.`);const u=be.records.nodes[e].in,h=be.records.nodes[t].in;if(s&&u&&h&&u==h)throw new Error(`The left-hand id [${e}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if(o&&u&&h&&u==h)throw new Error(`The right-hand id [${t}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);const d={lhsId:e,lhsDir:r,lhsInto:i,lhsGroup:s,rhsId:t,rhsDir:a,rhsInto:n,rhsGroup:o,title:l};be.records.edges.push(d),be.records.nodes[e]&&be.records.nodes[t]&&(be.records.nodes[e].edges.push(be.records.edges[be.records.edges.length-1]),be.records.nodes[t].edges.push(be.records.edges[be.records.edges.length-1]))},"addEdge"),AY=g(()=>be.records.edges,"getEdges"),LY=g(()=>{if(be.records.dataStructures===void 0){const e={},t=Object.entries(be.records.nodes).reduce((o,[l,u])=>(o[l]=u.edges.reduce((h,d)=>{var y,v;const f=(y=Hg(d.lhsId))==null?void 0:y.in,p=(v=Hg(d.rhsId))==null?void 0:v.in;if(f&&p&&f!==p){const m=yY(d.lhsDir,d.rhsDir);m!=="bend"&&(e[f]??(e[f]={}),e[f][p]=m,e[p]??(e[p]={}),e[p][f]=m)}if(d.lhsId===l){const m=Gg(d.lhsDir,d.rhsDir);m&&(h[m]=d.rhsId)}else{const m=Gg(d.rhsDir,d.lhsDir);m&&(h[m]=d.lhsId)}return h},{}),o),{}),r=Object.keys(t)[0],a={[r]:1},i=Object.keys(t).reduce((o,l)=>l===r?o:{...o,[l]:1},{}),n=g(o=>{const l={[o]:[0,0]},u=[o];for(;u.length>0;){const h=u.shift();if(h){a[h]=1,delete i[h];const d=t[h],[f,p]=l[h];Object.entries(d).forEach(([y,v])=>{a[v]||(l[v]=pY([f,p],y),u.push(v))})}}return l},"BFS"),s=[n(r)];for(;Object.keys(i).length>0;)s.push(n(Object.keys(i)[0]));be.records.dataStructures={adjList:t,spatialMaps:s,groupAlignments:e}}return be.records.dataStructures},"getDataStructures"),DY=g((e,t)=>{be.records.elements[e]=t},"setElementForId"),BY=g(e=>be.records.elements[e],"getElementById"),Sh={clear:xY,setDiagramTitle:Mr,getDiagramTitle:br,setAccTitle:vr,getAccTitle:Sr,setAccDescription:Er,getAccDescription:_r,addService:bY,getServices:wY,addJunction:kY,getJunctions:TY,getNodes:CY,getNode:Hg,addGroup:SY,getGroups:EY,addEdge:_Y,getEdges:AY,setElementForId:DY,getElementById:BY,getDataStructures:LY};function yr(e){const t=dt().architecture;return t!=null&&t[e]?t[e]:NS[e]}g(yr,"getConfigField");var RY=g((e,t)=>{Xo(e,t),e.groups.map(t.addGroup),e.services.map(r=>t.addService({...r,type:"service"})),e.junctions.map(r=>t.addJunction({...r,type:"junction"})),e.edges.map(t.addEdge)},"populateDb"),IY={parse:g(async e=>{const t=await Zn("architecture",e);G.debug(t),RY(t,Sh)},"parse")},PY=g(e=>`
  .edge {
    stroke-width: ${e.archEdgeWidth};
    stroke: ${e.archEdgeColor};
    fill: none;
  }

  .arrow {
    fill: ${e.archEdgeArrowColor};
  }

  .node-bkg {
    fill: none;
    stroke: ${e.archGroupBorderColor};
    stroke-width: ${e.archGroupBorderWidth};
    stroke-dasharray: 8;
  }
  .node-icon-text {
    display: flex; 
    align-items: center;
  }
  
  .node-icon-text > div {
    color: #fff;
    margin: 1px;
    height: fit-content;
    text-align: center;
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
  }
`,"getStyles"),NY=PY,fs=g(e=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${e}</g>`,"wrapIcon"),oc={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:fs('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:fs('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:fs('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:fs('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:fs('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:h4,blank:{body:fs("")}}},MY=g(async function(e,t){const r=yr("padding"),a=yr("iconSize"),i=a/2,n=a/6,s=n/2;await Promise.all(t.edges().map(async o=>{var L,_;const{source:l,sourceDir:u,sourceArrow:h,sourceGroup:d,target:f,targetDir:p,targetArrow:y,targetGroup:v,label:m}=PS(o);let{x,y:b}=o[0].sourceEndpoint();const{x:w,y:C}=o[0].midpoint();let{x:T,y:k}=o[0].targetEndpoint();const S=r+4;if(d&&(Kr(u)?x+=u==="L"?-S:S:b+=u==="T"?-S:S+18),v&&(Kr(p)?T+=p==="L"?-S:S:k+=p==="T"?-S:S+18),!d&&((L=Sh.getNode(l))==null?void 0:L.type)==="junction"&&(Kr(u)?x+=u==="L"?i:-i:b+=u==="T"?i:-i),!v&&((_=Sh.getNode(f))==null?void 0:_.type)==="junction"&&(Kr(p)?T+=p==="L"?i:-i:k+=p==="T"?i:-i),o[0]._private.rscratch){const A=e.insert("g");if(A.insert("path").attr("d",`M ${x},${b} L ${w},${C} L${T},${k} `).attr("class","edge"),h){const E=Kr(u)?au[u](x,n):x-s,D=sn(u)?au[u](b,n):b-s;A.insert("polygon").attr("points",Y2[u](n)).attr("transform",`translate(${E},${D})`).attr("class","arrow")}if(y){const E=Kr(p)?au[p](T,n):T-s,D=sn(p)?au[p](k,n):k-s;A.insert("polygon").attr("points",Y2[p](n)).attr("transform",`translate(${E},${D})`).attr("class","arrow")}if(m){const E=G1(u,p)?"XY":Kr(u)?"X":"Y";let D=0;E==="X"?D=Math.abs(x-T):E==="Y"?D=Math.abs(b-k)/1.5:D=Math.abs(x-T)/2;const R=A.append("g");if(await fa(R,m,{useHtmlLabels:!1,width:D,classes:"architecture-service-label"},dt()),R.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),E==="X")R.attr("transform","translate("+w+", "+C+")");else if(E==="Y")R.attr("transform","translate("+w+", "+C+") rotate(-90)");else if(E==="XY"){const O=Gg(u,p);if(O&&dY(O)){const P=R.node().getBoundingClientRect(),[$,M]=gY(O);R.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*$*M*45})`);const I=R.node().getBoundingClientRect();R.attr("transform",`
                translate(${w}, ${C-P.height/2})
                translate(${$*I.width/2}, ${M*I.height/2})
                rotate(${-1*$*M*45}, 0, ${P.height/2})
              `)}}}}}))},"drawEdges"),FY=g(async function(e,t){const a=yr("padding")*.75,i=yr("fontSize"),s=yr("iconSize")/2;await Promise.all(t.nodes().map(async o=>{const l=Cs(o);if(l.type==="group"){const{h:u,w:h,x1:d,y1:f}=o.boundingBox();e.append("rect").attr("x",d+s).attr("y",f+s).attr("width",h).attr("height",u).attr("class","node-bkg");const p=e.append("g");let y=d,v=f;if(l.icon){const m=p.append("g");m.html(`<g>${await zn(l.icon,{height:a,width:a,fallbackPrefix:oc.prefix})}</g>`),m.attr("transform","translate("+(y+s+1)+", "+(v+s+1)+")"),y+=a,v+=i/2-1-2}if(l.label){const m=p.append("g");await fa(m,l.label,{useHtmlLabels:!1,width:h,classes:"architecture-service-label"},dt()),m.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),m.attr("transform","translate("+(y+s+4)+", "+(v+s+2)+")")}}}))},"drawGroups"),OY=g(async function(e,t,r){for(const a of r){const i=t.append("g"),n=yr("iconSize");if(a.title){const u=i.append("g");await fa(u,a.title,{useHtmlLabels:!1,width:n*1.5,classes:"architecture-service-label"},dt()),u.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),u.attr("transform","translate("+n/2+", "+n+")")}const s=i.append("g");if(a.icon)s.html(`<g>${await zn(a.icon,{height:n,width:n,fallbackPrefix:oc.prefix})}</g>`);else if(a.iconText){s.html(`<g>${await zn("blank",{height:n,width:n,fallbackPrefix:oc.prefix})}</g>`);const d=s.append("g").append("foreignObject").attr("width",n).attr("height",n).append("div").attr("class","node-icon-text").attr("style",`height: ${n}px;`).append("div").html(a.iconText),f=parseInt(window.getComputedStyle(d.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;d.attr("style",`-webkit-line-clamp: ${Math.floor((n-2)/f)};`)}else s.append("path").attr("class","node-bkg").attr("id","node-"+a.id).attr("d",`M0 ${n} v${-n} q0,-5 5,-5 h${n} q5,0 5,5 v${n} H0 Z`);i.attr("class","architecture-service");const{width:o,height:l}=i._groups[0][0].getBBox();a.width=o,a.height=l,e.setElementForId(a.id,i)}return 0},"drawServices"),$Y=g(function(e,t,r){r.forEach(a=>{const i=t.append("g"),n=yr("iconSize");i.append("g").append("rect").attr("id","node-"+a.id).attr("fill-opacity","0").attr("width",n).attr("height",n),i.attr("class","architecture-junction");const{width:o,height:l}=i._groups[0][0].getBBox();i.width=o,i.height=l,e.setElementForId(a.id,i)})},"drawJunctions");f4([{name:oc.prefix,icons:oc}]);ui.use(uY);function MS(e,t){e.forEach(r=>{t.add({group:"nodes",data:{type:"service",id:r.id,icon:r.icon,label:r.title,parent:r.in,width:yr("iconSize"),height:yr("iconSize")},classes:"node-service"})})}g(MS,"addServices");function FS(e,t){e.forEach(r=>{t.add({group:"nodes",data:{type:"junction",id:r.id,parent:r.in,width:yr("iconSize"),height:yr("iconSize")},classes:"node-junction"})})}g(FS,"addJunctions");function OS(e,t){t.nodes().map(r=>{const a=Cs(r);if(a.type==="group")return;a.x=r.position().x,a.y=r.position().y,e.getElementById(a.id).attr("transform","translate("+(a.x||0)+","+(a.y||0)+")")})}g(OS,"positionNodes");function $S(e,t){e.forEach(r=>{t.add({group:"nodes",data:{type:"group",id:r.id,icon:r.icon,label:r.title,parent:r.in},classes:"node-group"})})}g($S,"addGroups");function VS(e,t){e.forEach(r=>{const{lhsId:a,rhsId:i,lhsInto:n,lhsGroup:s,rhsInto:o,lhsDir:l,rhsDir:u,rhsGroup:h,title:d}=r,f=G1(r.lhsDir,r.rhsDir)?"segments":"straight",p={id:`${a}-${i}`,label:d,source:a,sourceDir:l,sourceArrow:n,sourceGroup:s,sourceEndpoint:l==="L"?"0 50%":l==="R"?"100% 50%":l==="T"?"50% 0":"50% 100%",target:i,targetDir:u,targetArrow:o,targetGroup:h,targetEndpoint:u==="L"?"0 50%":u==="R"?"100% 50%":u==="T"?"50% 0":"50% 100%"};t.add({group:"edges",data:p,classes:f})})}g(VS,"addEdges");function zS(e,t,r){const a=g((o,l)=>Object.entries(o).reduce((u,[h,d])=>{var y;let f=0;const p=Object.entries(d);if(p.length===1)return u[h]=p[0][1],u;for(let v=0;v<p.length-1;v++)for(let m=v+1;m<p.length;m++){const[x,b]=p[v],[w,C]=p[m];if(((y=r[x])==null?void 0:y[w])===l)u[h]??(u[h]=[]),u[h]=[...u[h],...b,...C];else if(x==="default"||w==="default")u[h]??(u[h]=[]),u[h]=[...u[h],...b,...C];else{const k=`${h}-${f++}`;u[k]=b;const S=`${h}-${f++}`;u[S]=C}}return u},{}),"flattenAlignments"),i=t.map(o=>{const l={},u={};return Object.entries(o).forEach(([h,[d,f]])=>{var y,v,m;const p=((y=e.getNode(h))==null?void 0:y.in)??"default";l[f]??(l[f]={}),(v=l[f])[p]??(v[p]=[]),l[f][p].push(h),u[d]??(u[d]={}),(m=u[d])[p]??(m[p]=[]),u[d][p].push(h)}),{horiz:Object.values(a(l,"horizontal")).filter(h=>h.length>1),vert:Object.values(a(u,"vertical")).filter(h=>h.length>1)}}),[n,s]=i.reduce(([o,l],{horiz:u,vert:h})=>[[...o,...u],[...l,...h]],[[],[]]);return{horizontal:n,vertical:s}}g(zS,"getAlignments");function qS(e){const t=[],r=g(i=>`${i[0]},${i[1]}`,"posToStr"),a=g(i=>i.split(",").map(n=>parseInt(n)),"strToPos");return e.forEach(i=>{const n=Object.fromEntries(Object.entries(i).map(([u,h])=>[r(h),u])),s=[r([0,0])],o={},l={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;s.length>0;){const u=s.shift();if(u){o[u]=1;const h=n[u];if(h){const d=a(u);Object.entries(l).forEach(([f,p])=>{const y=r([d[0]+p[0],d[1]+p[1]]),v=n[y];v&&!o[y]&&(s.push(y),t.push({[H2[f]]:v,[H2[hY(f)]]:h,gap:1.5*yr("iconSize")}))})}}}}),t}g(qS,"getRelativeConstraints");function WS(e,t,r,a,i,{spatialMaps:n,groupAlignments:s}){return new Promise(o=>{const l=It("body").append("div").attr("id","cy").attr("style","display:none"),u=ui({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${yr("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${yr("padding")}px`}}]});l.remove(),$S(r,u),MS(e,u),FS(t,u),VS(a,u);const h=zS(i,n,s),d=qS(n),f=u.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(p){const[y,v]=p.connectedNodes(),{parent:m}=Cs(y),{parent:x}=Cs(v);return m===x?1.5*yr("iconSize"):.5*yr("iconSize")},edgeElasticity(p){const[y,v]=p.connectedNodes(),{parent:m}=Cs(y),{parent:x}=Cs(v);return m===x?.45:.001},alignmentConstraint:h,relativePlacementConstraint:d});f.one("layoutstop",()=>{var y;function p(v,m,x,b){let w,C;const{x:T,y:k}=v,{x:S,y:L}=m;C=(b-k+(T-x)*(k-L)/(T-S))/Math.sqrt(1+Math.pow((k-L)/(T-S),2)),w=Math.sqrt(Math.pow(b-k,2)+Math.pow(x-T,2)-Math.pow(C,2));const _=Math.sqrt(Math.pow(S-T,2)+Math.pow(L-k,2));w=w/_;let A=(S-T)*(b-k)-(L-k)*(x-T);switch(!0){case A>=0:A=1;break;case A<0:A=-1;break}let E=(S-T)*(x-T)+(L-k)*(b-k);switch(!0){case E>=0:E=1;break;case E<0:E=-1;break}return C=Math.abs(C)*A,w=w*E,{distances:C,weights:w}}g(p,"getSegmentWeights"),u.startBatch();for(const v of Object.values(u.edges()))if((y=v.data)!=null&&y.call(v)){const{x:m,y:x}=v.source().position(),{x:b,y:w}=v.target().position();if(m!==b&&x!==w){const C=v.sourceEndpoint(),T=v.targetEndpoint(),{sourceDir:k}=PS(v),[S,L]=sn(k)?[C.x,T.y]:[T.x,C.y],{weights:_,distances:A}=p(C,T,S,L);v.style("segment-distances",A),v.style("segment-weights",_)}}u.endBatch(),f.run()}),f.run(),u.ready(p=>{G.info("Ready",p),o(u)})})}g(WS,"layoutArchitecture");var VY=g(async(e,t,r,a)=>{const i=a.db,n=i.getServices(),s=i.getJunctions(),o=i.getGroups(),l=i.getEdges(),u=i.getDataStructures(),h=Ii(t),d=h.append("g");d.attr("class","architecture-edges");const f=h.append("g");f.attr("class","architecture-services");const p=h.append("g");p.attr("class","architecture-groups"),await OY(i,f,n),$Y(i,f,s);const y=await WS(n,s,o,l,i,u);await MY(d,y),await FY(p,y),OS(i,y),Ho(void 0,h,yr("padding"),yr("useMaxWidth"))},"draw"),zY={draw:VY},qY={parser:IY,db:Sh,renderer:zY,styles:NY};const WY=Object.freeze({__proto__:null,diagram:qY}),GY=Object.freeze({__proto__:null,InfoModule:fw,createInfoServices:pw}),HY=Object.freeze({__proto__:null,PacketModule:gw,createPacketServices:yw}),YY=Object.freeze({__proto__:null,PieModule:vw,createPieServices:mw}),UY=Object.freeze({__proto__:null,ArchitectureModule:xw,createArchitectureServices:bw}),XY=Object.freeze({__proto__:null,GitGraphModule:hw,createGitGraphServices:dw}),KY=Object.freeze({__proto__:null,RadarModule:ww,createRadarServices:kw});export{_e as _,eU as m};

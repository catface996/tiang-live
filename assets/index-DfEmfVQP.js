import{a as c,j as e}from"./react-D_ZWy-Ho.js";import{u as Q,aC as d,a3 as S,S as m,ab as I,B as h,a9 as Y,b6 as G,aW as K,c as X,b7 as w,ai as Z,aa as ee,U as C,V as l,W as f,h as R,b8 as $,j as F,_ as y,ag as te,aF as ae,az as A,b9 as se,a1 as P,n as re,k as oe,ah as b,d as g}from"./react-dom-CRymxTn5.js";import{u as ne}from"./index-ICAg9FmD.js";import{s as le}from"./index-Daowydkz.js";import{S as ie}from"./SearchFilterBar-4BgSZdRI.js";import"./vendor-VHja5XRA.js";import"./cytoscape-DXzeTOL3.js";import"./media-BPG7piku.js";import"./lodash-D08E6HgQ.js";import"./redux-CiqK6azd.js";import"./echarts-core-CW0Gv0IT.js";import"./antd-icons-CI4I6I7B.js";import"./dayjs-CrhenB4N.js";import"./emotion-BhZTwsuK.js";import"./mermaid-AggIEIwl.js";import"./d3-Dbz_rnoS.js";import"./i18n-CMVetavo.js";const{Title:M,Paragraph:ce}=X,{Option:de}=P,me=g.div`
  padding: 24px;
`,ge=g.div`
  margin-bottom: 24px;
`,j=g(y)`
  .ant-card-body {
    padding: 16px;
  }
`,ue=g(y)`
  height: 100%;
  transition: all 0.3s ease;
  cursor: pointer;
  
  .ant-card-body {
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 16px;
  }
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
`,xe=g.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 0;
`,pe=g.div`
  display: flex;
  flex-wrap: wrap;
  margin: -4px; /* 负边距抵消子元素的边距 */
  
  .ant-tag {
    margin: 4px !important; /* 所有方向统一4px边距，总间距为8px */
  }
`,qe=()=>{const{t}=Q(["tags","common"]),{currentTheme:B}=ne(a=>a.theme),q=B==="dark"?"#ffffff":"#1890ff",[z,fe]=c.useState(!1),[O,p]=c.useState(!1),[k,v]=c.useState(null),[D,V]=c.useState(""),[E,N]=c.useState("all"),[i]=d.useForm();c.useEffect(()=>{le(t("tags:title"))},[t]);const o=[{key:"1",name:"生产环境",color:"#f5222d",category:"environment",description:"标识生产环境相关的资源",usageCount:156,createdAt:"2024-06-10"},{key:"2",name:"测试环境",color:"#faad14",category:"environment",description:"标识测试环境相关的资源",usageCount:89,createdAt:"2024-06-10"},{key:"3",name:"核心业务",color:"#1890ff",category:"business",description:"标识核心业务相关的组件",usageCount:234,createdAt:"2024-06-08"},{key:"4",name:"高可用",color:"#52c41a",category:"feature",description:"标识具有高可用特性的服务",usageCount:67,createdAt:"2024-06-05"},{key:"5",name:"微服务",color:"#722ed1",category:"architecture",description:"标识微服务架构组件",usageCount:123,createdAt:"2024-06-03"},{key:"6",name:"数据库",color:"#13c2c2",category:"component",description:"标识数据库相关组件",usageCount:45,createdAt:"2024-06-01"}],u={environment:{name:"环境",icon:e.jsx(R,{}),color:"#1890ff"},business:{name:"业务",icon:e.jsx(F,{}),color:"#52c41a"},feature:{name:"特性",icon:e.jsx($,{}),color:"#faad14"},architecture:{name:"架构",icon:e.jsx(oe,{}),color:"#722ed1"},component:{name:"组件",icon:e.jsx(re,{}),color:"#13c2c2"}},U=()=>{v(null),i.resetFields(),p(!0)},T=a=>{v(a),i.setFieldsValue({name:a.name,color:a.color,category:a.category,description:a.description}),p(!0)},L=a=>{b.success(t("tags:messages.deleteSuccess"))},H=async()=>{try{const a=await i.validateFields();k?b.success(t("tags:messages.updateSuccess")):b.success(t("tags:messages.createSuccess")),p(!1),i.resetFields()}catch(a){console.error("表单验证失败:",a)}},W=()=>{p(!1),i.resetFields()},_=[{title:t("tags:table.tagName"),dataIndex:"name",key:"name",render:(a,s)=>e.jsx(S,{color:s.color,style:{fontSize:14,padding:"4px 8px"},children:a})},{title:t("tags:table.category"),dataIndex:"category",key:"category",render:a=>{const s=u[a];return e.jsxs(m,{children:[s==null?void 0:s.icon,e.jsx("span",{children:(s==null?void 0:s.name)||a})]})}},{title:t("tags:table.description"),dataIndex:"description",key:"description",ellipsis:!0},{title:t("tags:table.usageCount"),dataIndex:"usageCount",key:"usageCount",render:a=>e.jsx(I,{count:a,style:{backgroundColor:"#52c41a"}})},{title:t("tags:table.createTime"),dataIndex:"createdAt",key:"createdAt"},{title:t("tags:table.actions"),key:"action",render:(a,s)=>e.jsxs(m,{children:[e.jsx(h,{type:"link",icon:e.jsx(Y,{}),size:"small",onClick:()=>T(s),children:t("tags:actions.edit")}),e.jsx(G,{title:t("tags:actions.deleteConfirm"),description:t("tags:actions.deleteDescription"),onConfirm:()=>L(s.key),okText:t("common:confirm"),cancelText:t("common:cancel"),children:e.jsx(h,{type:"link",icon:e.jsx(K,{}),size:"small",danger:!0,children:t("tags:actions.delete")})})]})}],J=()=>{const a=o.reduce((s,n)=>(s[n.category]||(s[n.category]=[]),s[n.category].push(n),s),{});return Object.entries(a).map(([s,n])=>{const r=u[s];return e.jsx(l,{xs:24,md:12,lg:8,children:e.jsxs(ue,{children:[e.jsxs(xe,{children:[e.jsxs(m,{children:[r==null?void 0:r.icon,e.jsx(M,{level:4,style:{margin:0},children:(r==null?void 0:r.name)||s})]}),e.jsx(I,{count:n.length,style:{backgroundColor:r==null?void 0:r.color}})]}),e.jsx(pe,{children:n.map(x=>e.jsxs(S,{color:x.color,style:{cursor:"pointer"},onClick:()=>T(x),children:[x.name," (",x.usageCount,")"]},x.key))})]})},s)})};return e.jsxs(me,{children:[e.jsx(ge,{children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx(M,{level:2,style:{margin:0},children:e.jsxs(m,{children:[e.jsx(w,{style:{color:q}}),t("tags:title")]})}),e.jsx(ce,{style:{marginTop:8,marginBottom:0,fontSize:16},children:t("tags:subtitle")})]}),e.jsxs(m,{children:[e.jsx(h,{icon:e.jsx(Z,{}),children:t("common:refresh")}),e.jsx(h,{type:"primary",icon:e.jsx(ee,{}),onClick:U,children:t("tags:createTag")})]})]})}),e.jsxs(C,{gutter:[16,16],style:{marginBottom:24},children:[e.jsx(l,{xs:24,sm:12,md:6,children:e.jsx(j,{children:e.jsx(f,{title:t("tags:stats.totalTags"),value:o.length,suffix:t("common:unit.count"),valueStyle:{color:"#1890ff"},prefix:e.jsx(w,{})})})}),e.jsx(l,{xs:24,sm:12,md:6,children:e.jsx(j,{children:e.jsx(f,{title:t("tags:stats.categoryCount"),value:Object.keys(u).length,suffix:t("common:unit.count"),valueStyle:{color:"#52c41a"},prefix:e.jsx(R,{})})})}),e.jsx(l,{xs:24,sm:12,md:6,children:e.jsx(j,{children:e.jsx(f,{title:t("tags:stats.totalUsage"),value:o.reduce((a,s)=>a+s.usageCount,0),suffix:t("common:unit.times"),valueStyle:{color:"#faad14"},prefix:e.jsx($,{})})})}),e.jsx(l,{xs:24,sm:12,md:6,children:e.jsx(j,{children:e.jsx(f,{title:t("tags:stats.averageUsage"),value:Math.round(o.reduce((a,s)=>a+s.usageCount,0)/o.length),suffix:t("tags:stats.averageUsageSuffix"),valueStyle:{color:"#722ed1"},prefix:e.jsx(F,{})})})})]}),e.jsx(y,{title:t("tags:categoryDisplay.title"),style:{marginBottom:24},children:e.jsx(C,{gutter:[16,16],children:J()})}),e.jsx(ie,{searchValue:D,onSearchChange:V,searchPlaceholder:t("tags:search.placeholder"),filters:[{key:"category",value:E,onChange:N,placeholder:t("tags:search.category"),width:120,options:[{value:"all",label:t("tags:search.allCategories")},...Object.entries(u).map(([a,s])=>({value:a,label:s.name}))]}],onRefresh:()=>window.location.reload(),style:{marginBottom:24}}),e.jsx(y,{title:t("tags:table.title"),children:e.jsx(te,{columns:_,dataSource:o,loading:z,pagination:{total:o.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(a,s)=>`第 ${s[0]}-${s[1]} 条，共 ${a} 条记录`}})}),e.jsx(ae,{title:t(k?"tags:editTitle":"tags:createTitle"),open:O,onOk:H,onCancel:W,width:600,children:e.jsxs(d,{form:i,layout:"vertical",initialValues:{color:"#1890ff",category:"business"},children:[e.jsx(d.Item,{name:"name",label:t("tags:form.tagName"),rules:[{required:!0,message:t("tags:form.tagNameRequired")},{max:20,message:t("validation.maxLength",{max:20})}],children:e.jsx(A,{placeholder:t("tags:form.tagNamePlaceholder")})}),e.jsxs(C,{gutter:16,children:[e.jsx(l,{span:12,children:e.jsx(d.Item,{name:"color",label:t("tags:form.color"),rules:[{required:!0,message:t("tags:form.colorRequired")}],children:e.jsx(se,{showText:!0})})}),e.jsx(l,{span:12,children:e.jsx(d.Item,{name:"category",label:t("tags:form.category"),rules:[{required:!0,message:t("tags:form.categoryRequired")}],children:e.jsx(P,{placeholder:t("tags:form.categoryPlaceholder"),children:Object.entries(u).map(([a,s])=>e.jsx(de,{value:a,children:e.jsxs(m,{children:[s.icon,s.name]})},a))})})})]}),e.jsx(d.Item,{name:"description",label:t("tags:form.description"),rules:[{required:!0,message:t("tags:form.descriptionRequired")},{max:100,message:t("validation.maxLength",{max:100})}],children:e.jsx(A.TextArea,{rows:3,placeholder:t("tags:form.descriptionPlaceholder")})})]})})]})};export{qe as default};

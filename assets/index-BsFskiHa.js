import{u as U,j as e,b as X}from"./index-DWPu_TRF.js";import{u as T,B as p,v as K,w as Q,W,ab as q,i as r,A as J,T as z,t as I,j as g,S as u,ae as d,O as P,aX as Y,V as Z,a as _,r as h,ai as m,n as E,o as ee,d as k,C as x,at as te,f as se,ax as ae,af as oe,l as b,X as ne,ao as le}from"./antd-DnS9M1TX.js";import"./vendor-DJG_os-6.js";const{Text:R,Paragraph:ie}=z,ce=({topology:t,onView:N,onEdit:C,onDelete:j,onRefresh:v,onClick:i})=>{const{t:o}=U(["entityTopology","common"]),w=a=>({network:e.jsx(d,{}),application:e.jsx(d,{}),database:e.jsx(d,{}),system:e.jsx(d,{})})[a]||e.jsx(d,{}),y=a=>{switch(a){case"active":return e.jsx(_,{className:"status-icon status-active"});case"warning":return e.jsx(Z,{className:"status-icon status-warning"});case"error":return e.jsx(Y,{className:"status-icon status-error"});case"inactive":return e.jsx(P,{className:"status-icon status-inactive"});default:return e.jsx(P,{className:"status-icon status-inactive"})}},S=a=>{switch(a){case"active":return"success";case"warning":return"warning";case"error":return"error";case"inactive":return"default";default:return"default"}},n=a=>{switch(a){case"network":return"blue";case"application":return"green";case"database":return"orange";case"system":return"purple";default:return"default"}},$=[e.jsx(T,{title:o("common:view"),children:e.jsx(p,{type:"text",icon:e.jsx(K,{}),onClick:a=>{a.stopPropagation(),N(t)}})},"view"),e.jsx(T,{title:o("common:edit"),children:e.jsx(p,{type:"text",icon:e.jsx(Q,{}),onClick:a=>{a.stopPropagation(),C(t)}})},"edit"),e.jsx(T,{title:o("common:refresh"),children:e.jsx(p,{type:"text",icon:e.jsx(W,{}),onClick:a=>{a.stopPropagation(),v(t.id)}})},"refresh"),e.jsx(T,{title:o("common:delete"),children:e.jsx(p,{type:"text",icon:e.jsx(q,{}),danger:!0,onClick:a=>{a.stopPropagation(),j(t.id)}})},"delete")];return e.jsxs(r,{className:"topology-card",actions:$,onClick:()=>i==null?void 0:i(t),style:{cursor:i?"pointer":"default"},children:[e.jsx("div",{className:"topology-card-header",children:e.jsxs("div",{className:"topology-card-avatar-section",children:[e.jsx(J,{size:48,icon:w(t.type),className:"topology-card-avatar"}),e.jsxs("div",{className:"topology-card-info",children:[e.jsxs("div",{className:"topology-card-title-row",children:[e.jsx(R,{strong:!0,className:"topology-card-title",children:t.name}),y(t.status)]}),e.jsxs("div",{className:"topology-card-tags-row",children:[e.jsx("div",{className:`status-dot status-${t.status}`}),e.jsx(I,{color:S(t.status),size:"small",children:o(`entityTopology:status.${t.status}`)}),e.jsx(I,{color:n(t.type),size:"small",children:o(`entityTopology:types.${t.type}`)})]})]})]})}),e.jsx("div",{className:"topology-card-description",children:e.jsx(ie,{ellipsis:{rows:2,tooltip:t.description},className:"topology-card-description-text",children:t.description})}),e.jsx("div",{className:"topology-card-plane",children:e.jsxs(R,{type:"secondary",className:"topology-card-plane-text",children:[o("entityTopology:labels.plane"),": ",t.plane]})}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"topology-card-custom-tags",children:e.jsx(g,{wrap:!0,size:[4,4],children:t.tags.map(a=>e.jsx(I,{size:"small",color:"default",children:a},a))})}),e.jsxs("div",{className:"topology-card-stats",children:[e.jsxs(g,{split:e.jsx("div",{className:"topology-card-stats-divider"}),children:[e.jsx(u,{title:o("entityTopology:labels.nodeCount"),value:t.stats.nodeCount,className:"topology-card-statistic"}),e.jsx(u,{title:o("entityTopology:labels.linkCount"),value:t.stats.linkCount,className:"topology-card-statistic"}),e.jsx(u,{title:o("entityTopology:labels.healthScore"),value:t.stats.healthScore,suffix:"%",className:`topology-card-statistic health-score-${t.stats.healthScore>=80?"good":t.stats.healthScore>=60?"warning":"error"}`})]}),e.jsx("div",{className:"topology-card-update-time",children:e.jsxs(R,{type:"secondary",className:"topology-card-update-time-text",children:[o("entityTopology:labels.updateTime"),": ",t.stats.lastUpdated]})})]})]})},{Search:re}=oe,{Option:l}=b,{Title:de,Paragraph:pe}=z,ye=()=>{const{t}=U(["entityTopology","common"]),N=X(),[C,j]=h.useState(!1),[v,i]=h.useState(""),[o,w]=h.useState("all"),[y,S]=h.useState("all"),[n,$]=h.useState([]),a=[{id:"1",name:"核心网络拓扑",type:"network",status:"active",description:"企业核心网络基础设施拓扑图，包含主要路由器、交换机和防火墙设备的连接关系。",plane:"网络平面",tags:["核心","生产环境","高可用"],stats:{nodeCount:156,linkCount:234,healthScore:95,lastUpdated:"2024-01-15 14:30:25"},createdAt:"2024-01-10 09:00:00"},{id:"2",name:"应用服务拓扑",type:"application",status:"warning",description:"微服务架构应用拓扑，展示各个服务之间的依赖关系和调用链路。",plane:"应用平面",tags:["微服务","容器化","K8s"],stats:{nodeCount:89,linkCount:145,healthScore:78,lastUpdated:"2024-01-15 14:25:10"},createdAt:"2024-01-12 10:30:00"},{id:"3",name:"数据库集群拓扑",type:"database",status:"active",description:"数据库集群架构拓扑，包含主从复制、分片和备份策略的完整视图。",plane:"数据平面",tags:["MySQL","集群","主从复制"],stats:{nodeCount:24,linkCount:36,healthScore:92,lastUpdated:"2024-01-15 14:20:45"},createdAt:"2024-01-08 16:45:00"},{id:"4",name:"系统监控拓扑",type:"system",status:"error",description:"系统监控基础设施拓扑，展示监控代理、收集器和存储系统的部署结构。",plane:"监控平面",tags:["监控","Prometheus","Grafana"],stats:{nodeCount:45,linkCount:67,healthScore:45,lastUpdated:"2024-01-15 14:15:30"},createdAt:"2024-01-14 11:20:00"},{id:"5",name:"边缘计算拓扑",type:"network",status:"inactive",description:"边缘计算节点拓扑，展示边缘设备与中心云平台的连接和数据流向。",plane:"边缘平面",tags:["边缘计算","IoT","5G"],stats:{nodeCount:78,linkCount:112,healthScore:0,lastUpdated:"2024-01-14 18:45:20"},createdAt:"2024-01-13 14:10:00"},{id:"6",name:"安全防护拓扑",type:"system",status:"active",description:"网络安全防护体系拓扑，包含防火墙、入侵检测和安全审计系统的部署架构。",plane:"安全平面",tags:["安全","防火墙","IDS"],stats:{nodeCount:32,linkCount:48,healthScore:88,lastUpdated:"2024-01-15 14:10:15"},createdAt:"2024-01-11 13:25:00"}];h.useEffect(()=>{f()},[]);const f=async()=>{j(!0);try{$(a)}catch{m.error(t("entityTopology:messages.loadFailed"))}finally{j(!1)}},A=n.filter(s=>{const c=s.name.toLowerCase().includes(v.toLowerCase())||s.description.toLowerCase().includes(v.toLowerCase()),H=o==="all"||s.status===o,O=y==="all"||s.type===y;return c&&H&&O}),F=s=>{N(`/test-tools/entity-topology/${s.id}`)},L=s=>{m.info(`${t("entityTopology:actions.edit")} ${s.name}`)},D=s=>{m.info(`${t("entityTopology:actions.delete")} ID: ${s}`)},M=s=>{m.success(`${t("entityTopology:actions.refreshSuccess")} ID: ${s}`)},V=n.filter(s=>s.status==="active").length,B=n.reduce((s,c)=>s+c.stats.nodeCount,0);n.reduce((s,c)=>s+c.stats.linkCount,0);const G=n.length>0?(n.reduce((s,c)=>s+c.stats.healthScore,0)/n.length).toFixed(1):"0";return e.jsxs("div",{className:"entity-topology-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx(de,{level:2,className:"page-title",children:e.jsxs(g,{children:[e.jsx(d,{}),t("entityTopology:title")]})}),e.jsxs(g,{children:[e.jsx(p,{icon:e.jsx(E,{}),onClick:()=>f(),children:t("common:refresh")}),e.jsx(p,{type:"primary",icon:e.jsx(ee,{}),onClick:()=>m.info(t("entityTopology:actions.createTopology")+"功能开发中..."),children:t("entityTopology:actions.createTopology")})]})]}),e.jsx(pe,{className:"page-description",children:t("entityTopology:description")}),e.jsxs(k,{gutter:16,className:"stats-row",children:[e.jsx(x,{xs:24,sm:12,md:6,children:e.jsx(r,{className:"stats-card stats-primary",children:e.jsx(u,{title:t("entityTopology:stats.totalTopologies"),value:n.length,prefix:e.jsx(d,{})})})}),e.jsx(x,{xs:24,sm:12,md:6,children:e.jsx(r,{className:"stats-card stats-success",children:e.jsx(u,{title:t("entityTopology:stats.activeTopologies"),value:V,prefix:e.jsx(te,{})})})}),e.jsx(x,{xs:24,sm:12,md:6,children:e.jsx(r,{className:"stats-card stats-warning",children:e.jsx(u,{title:t("entityTopology:stats.totalNodes"),value:B,prefix:e.jsx(se,{})})})}),e.jsx(x,{xs:24,sm:12,md:6,children:e.jsx(r,{className:"stats-card stats-info",children:e.jsx(u,{title:t("entityTopology:stats.avgHealthScore"),value:G,suffix:"%",prefix:e.jsx(ae,{})})})})]}),e.jsx(r,{className:"filter-card",children:e.jsx(k,{gutter:[16,16],align:"middle",children:e.jsx(x,{xs:24,sm:16,md:18,children:e.jsxs(g,{wrap:!0,size:[8,8],className:"filter-controls",children:[e.jsx(re,{placeholder:t("entityTopology:search.placeholder"),allowClear:!0,className:"search-input",onSearch:i,onChange:s=>i(s.target.value)}),e.jsxs(b,{value:o,onChange:w,className:"filter-select",placeholder:t("entityTopology:search.statusFilter"),children:[e.jsx(l,{value:"all",children:t("entityTopology:filters.allStatus")}),e.jsx(l,{value:"active",children:t("entityTopology:status.active")}),e.jsx(l,{value:"inactive",children:t("entityTopology:status.inactive")}),e.jsx(l,{value:"warning",children:t("entityTopology:status.warning")}),e.jsx(l,{value:"error",children:t("entityTopology:status.error")})]}),e.jsxs(b,{value:y,onChange:S,className:"filter-select",placeholder:t("entityTopology:search.typeFilter"),children:[e.jsx(l,{value:"all",children:t("entityTopology:filters.allTypes")}),e.jsx(l,{value:"network",children:t("entityTopology:types.network")}),e.jsx(l,{value:"application",children:t("entityTopology:types.application")}),e.jsx(l,{value:"database",children:t("entityTopology:types.database")}),e.jsx(l,{value:"system",children:t("entityTopology:types.system")})]}),e.jsx(p,{icon:e.jsx(E,{}),onClick:()=>f(),title:t("common:refresh")})]})})})}),e.jsx("div",{className:"topology-content",children:e.jsx(ne,{spinning:C,children:A.length===0?e.jsx(r,{className:"empty-card",children:e.jsx(le,{description:t("entityTopology:empty.description"),className:"empty-state"})}):e.jsx(k,{gutter:[24,24],children:A.map(s=>e.jsx(x,{xs:24,sm:12,lg:8,xl:6,children:e.jsx(ce,{topology:s,onView:F,onEdit:L,onDelete:D,onRefresh:M,onClick:F})},s.id))})})})]})};export{ye as default};

import{a as c,j as e}from"./react-D_ZWy-Ho.js";import{u as Q,aC as d,a3 as T,S as m,ab as I,B as p,a9 as Y,b6 as G,aW as K,c as X,b7 as w,ai as Z,aa as ee,U as S,V as i,W as h,h as R,b8 as $,j as F,_ as j,ag as te,aF as se,az as A,b9 as ae,a1 as P,n as ne,k as re,ah as C,d as g}from"./react-dom-C5h-mI7H.js";import{u as oe}from"./index-BS6KRDnO.js";import{s as ie}from"./index-Daowydkz.js";import{S as le}from"./SearchFilterBar-ZQit0ro2.js";import"./vendor-VHja5XRA.js";import"./cytoscape-DXzeTOL3.js";import"./media-BPG7piku.js";import"./lodash-D08E6HgQ.js";import"./redux-CiqK6azd.js";import"./echarts-core-CW0Gv0IT.js";import"./antd-icons-CI4I6I7B.js";import"./dayjs-CrhenB4N.js";import"./emotion-BhZTwsuK.js";import"./mermaid-AggIEIwl.js";import"./d3-Dbz_rnoS.js";import"./i18n-CMVetavo.js";const{Title:M,Paragraph:ce}=X,{Option:de}=P,me=g.div`
  padding: 24px;
`,ge=g.div`
  margin-bottom: 24px;
`,f=g(j)`
  .ant-card-body {
    padding: 16px;
  }
`,ue=g(j)`
  height: 100%;
  transition: all 0.3s ease;
  cursor: pointer;
  
  .ant-card-body {
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 16px;
  }
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
`,xe=g.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 0;
`,ye=g.div`
  display: flex;
  flex-wrap: wrap;
  margin: -4px; /* 负边距抵消子元素的边距 */
  
  .ant-tag {
    margin: 4px !important; /* 所有方向统一4px边距，总间距为8px */
  }
`,qe=()=>{const{t}=Q(),{currentTheme:B}=oe(s=>s.theme),q=B==="dark"?"#ffffff":"#1890ff",[z,he]=c.useState(!1),[O,y]=c.useState(!1),[b,k]=c.useState(null),[D,V]=c.useState(""),[E,N]=c.useState("all"),[l]=d.useForm();c.useEffect(()=>{ie(t("systemSettings.tags.title"))},[t]);const r=[{key:"1",name:"生产环境",color:"#f5222d",category:"environment",description:"标识生产环境相关的资源",usageCount:156,createdAt:"2024-06-10"},{key:"2",name:"测试环境",color:"#faad14",category:"environment",description:"标识测试环境相关的资源",usageCount:89,createdAt:"2024-06-10"},{key:"3",name:"核心业务",color:"#1890ff",category:"business",description:"标识核心业务相关的组件",usageCount:234,createdAt:"2024-06-08"},{key:"4",name:"高可用",color:"#52c41a",category:"feature",description:"标识具有高可用特性的服务",usageCount:67,createdAt:"2024-06-05"},{key:"5",name:"微服务",color:"#722ed1",category:"architecture",description:"标识微服务架构组件",usageCount:123,createdAt:"2024-06-03"},{key:"6",name:"数据库",color:"#13c2c2",category:"component",description:"标识数据库相关组件",usageCount:45,createdAt:"2024-06-01"}],u={environment:{name:"环境",icon:e.jsx(R,{}),color:"#1890ff"},business:{name:"业务",icon:e.jsx(F,{}),color:"#52c41a"},feature:{name:"特性",icon:e.jsx($,{}),color:"#faad14"},architecture:{name:"架构",icon:e.jsx(re,{}),color:"#722ed1"},component:{name:"组件",icon:e.jsx(ne,{}),color:"#13c2c2"}},U=()=>{k(null),l.resetFields(),y(!0)},v=s=>{k(s),l.setFieldsValue({name:s.name,color:s.color,category:s.category,description:s.description}),y(!0)},L=s=>{C.success(t("systemSettings.tags.messages.deleteSuccess"))},H=async()=>{try{const s=await l.validateFields();b?C.success(t("systemSettings.tags.messages.updateSuccess")):C.success(t("systemSettings.tags.messages.createSuccess")),y(!1),l.resetFields()}catch(s){console.error("表单验证失败:",s)}},W=()=>{y(!1),l.resetFields()},_=[{title:t("systemSettings.tags.table.tagName"),dataIndex:"name",key:"name",render:(s,a)=>e.jsx(T,{color:a.color,style:{fontSize:14,padding:"4px 8px"},children:s})},{title:t("systemSettings.tags.table.category"),dataIndex:"category",key:"category",render:s=>{const a=u[s];return e.jsxs(m,{children:[a==null?void 0:a.icon,e.jsx("span",{children:(a==null?void 0:a.name)||s})]})}},{title:t("systemSettings.tags.table.description"),dataIndex:"description",key:"description",ellipsis:!0},{title:t("systemSettings.tags.table.usageCount"),dataIndex:"usageCount",key:"usageCount",render:s=>e.jsx(I,{count:s,style:{backgroundColor:"#52c41a"}})},{title:t("systemSettings.tags.table.createTime"),dataIndex:"createdAt",key:"createdAt"},{title:t("systemSettings.tags.table.actions"),key:"action",render:(s,a)=>e.jsxs(m,{children:[e.jsx(p,{type:"link",icon:e.jsx(Y,{}),size:"small",onClick:()=>v(a),children:t("systemSettings.tags.actions.edit")}),e.jsx(G,{title:t("systemSettings.tags.actions.deleteConfirm"),description:t("systemSettings.tags.actions.deleteDescription"),onConfirm:()=>L(a.key),okText:t("common.confirm"),cancelText:t("common.cancel"),children:e.jsx(p,{type:"link",icon:e.jsx(K,{}),size:"small",danger:!0,children:t("systemSettings.tags.actions.delete")})})]})}],J=()=>{const s=r.reduce((a,o)=>(a[o.category]||(a[o.category]=[]),a[o.category].push(o),a),{});return Object.entries(s).map(([a,o])=>{const n=u[a];return e.jsx(i,{xs:24,md:12,lg:8,children:e.jsxs(ue,{children:[e.jsxs(xe,{children:[e.jsxs(m,{children:[n==null?void 0:n.icon,e.jsx(M,{level:4,style:{margin:0},children:(n==null?void 0:n.name)||a})]}),e.jsx(I,{count:o.length,style:{backgroundColor:n==null?void 0:n.color}})]}),e.jsx(ye,{children:o.map(x=>e.jsxs(T,{color:x.color,style:{cursor:"pointer"},onClick:()=>v(x),children:[x.name," (",x.usageCount,")"]},x.key))})]})},a)})};return e.jsxs(me,{children:[e.jsx(ge,{children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx(M,{level:2,style:{margin:0},children:e.jsxs(m,{children:[e.jsx(w,{style:{color:q}}),t("systemSettings.tags.title")]})}),e.jsx(ce,{style:{marginTop:8,marginBottom:0,fontSize:16},children:t("systemSettings.tags.subtitle")})]}),e.jsxs(m,{children:[e.jsx(p,{icon:e.jsx(Z,{}),children:t("common.refresh")}),e.jsx(p,{type:"primary",icon:e.jsx(ee,{}),onClick:U,children:t("systemSettings.tags.createTag")})]})]})}),e.jsxs(S,{gutter:[16,16],style:{marginBottom:24},children:[e.jsx(i,{xs:24,sm:12,md:6,children:e.jsx(f,{children:e.jsx(h,{title:t("systemSettings.tags.stats.totalTags"),value:r.length,suffix:t("common.unit.count"),valueStyle:{color:"#1890ff"},prefix:e.jsx(w,{})})})}),e.jsx(i,{xs:24,sm:12,md:6,children:e.jsx(f,{children:e.jsx(h,{title:t("systemSettings.tags.stats.categoryCount"),value:Object.keys(u).length,suffix:t("common.unit.count"),valueStyle:{color:"#52c41a"},prefix:e.jsx(R,{})})})}),e.jsx(i,{xs:24,sm:12,md:6,children:e.jsx(f,{children:e.jsx(h,{title:t("systemSettings.tags.stats.totalUsage"),value:r.reduce((s,a)=>s+a.usageCount,0),suffix:t("common.unit.times"),valueStyle:{color:"#faad14"},prefix:e.jsx($,{})})})}),e.jsx(i,{xs:24,sm:12,md:6,children:e.jsx(f,{children:e.jsx(h,{title:t("systemSettings.tags.stats.averageUsage"),value:Math.round(r.reduce((s,a)=>s+a.usageCount,0)/r.length),suffix:t("systemSettings.tags.stats.averageUsageSuffix"),valueStyle:{color:"#722ed1"},prefix:e.jsx(F,{})})})})]}),e.jsx(j,{title:t("systemSettings.tags.categoryDisplay.title"),style:{marginBottom:24},children:e.jsx(S,{gutter:[16,16],children:J()})}),e.jsx(le,{searchValue:D,onSearchChange:V,searchPlaceholder:t("systemSettings.tags.search.placeholder"),filters:[{key:"category",value:E,onChange:N,placeholder:t("systemSettings.tags.search.category"),width:120,options:[{value:"all",label:t("systemSettings.tags.search.allCategories")},...Object.entries(u).map(([s,a])=>({value:s,label:a.name}))]}],onRefresh:()=>window.location.reload(),style:{marginBottom:24}}),e.jsx(j,{title:t("systemSettings.tags.table.title"),children:e.jsx(te,{columns:_,dataSource:r,loading:z,pagination:{total:r.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(s,a)=>`第 ${a[0]}-${a[1]} 条，共 ${s} 条记录`}})}),e.jsx(se,{title:t(b?"systemSettings.tags.editTitle":"systemSettings.tags.createTitle"),open:O,onOk:H,onCancel:W,width:600,children:e.jsxs(d,{form:l,layout:"vertical",initialValues:{color:"#1890ff",category:"business"},children:[e.jsx(d.Item,{name:"name",label:t("systemSettings.tags.form.tagName"),rules:[{required:!0,message:t("systemSettings.tags.form.tagNameRequired")},{max:20,message:t("validation.maxLength",{max:20})}],children:e.jsx(A,{placeholder:t("systemSettings.tags.form.tagNamePlaceholder")})}),e.jsxs(S,{gutter:16,children:[e.jsx(i,{span:12,children:e.jsx(d.Item,{name:"color",label:t("systemSettings.tags.form.color"),rules:[{required:!0,message:t("systemSettings.tags.form.colorRequired")}],children:e.jsx(ae,{showText:!0})})}),e.jsx(i,{span:12,children:e.jsx(d.Item,{name:"category",label:t("systemSettings.tags.form.category"),rules:[{required:!0,message:t("systemSettings.tags.form.categoryRequired")}],children:e.jsx(P,{placeholder:t("systemSettings.tags.form.categoryPlaceholder"),children:Object.entries(u).map(([s,a])=>e.jsx(de,{value:s,children:e.jsxs(m,{children:[a.icon,a.name]})},s))})})})]}),e.jsx(d.Item,{name:"description",label:t("systemSettings.tags.form.description"),rules:[{required:!0,message:t("systemSettings.tags.form.descriptionRequired")},{max:100,message:t("validation.maxLength",{max:100})}],children:e.jsx(A.TextArea,{rows:3,placeholder:t("systemSettings.tags.form.descriptionPlaceholder")})})]})})]})};export{qe as default};

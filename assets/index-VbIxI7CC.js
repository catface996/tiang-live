import{a as r,j as e}from"./react-D_ZWy-Ho.js";import{u as ce,aC as d,c as me,S as h,q as pe,B as k,ai as ue,aa as xe,U as c,V as o,W as j,bl as M,K as F,Y as G,aQ as O,aF as V,az as S,a1 as A,bm as he,bf as je,ap as ge,ax as i,a3 as p,au as P,_ as g,d as b,X as ye,aG as ve,p as be,an as fe,T as K,a8 as Te,a9 as ke,ah as L}from"./react-dom-CRymxTn5.js";import{s as Pe}from"./index-Daowydkz.js";import{S as Ie}from"./SearchFilterBar-4BgSZdRI.js";import"./vendor-VHja5XRA.js";import"./cytoscape-DXzeTOL3.js";import"./media-BPG7piku.js";import"./lodash-D08E6HgQ.js";import"./redux-CiqK6azd.js";import"./echarts-core-CW0Gv0IT.js";import"./antd-icons-CI4I6I7B.js";import"./dayjs-CrhenB4N.js";import"./emotion-BhZTwsuK.js";const Se=[{id:"1",name:"GPT-4 Turbo",provider:"OpenAI",modelType:"llm",version:"gpt-4-1106-preview",apiEndpoint:"https://api.openai.com/v1/chat/completions",apiKey:"sk-*********************",maxTokens:4096,temperature:.7,topP:1,frequencyPenalty:0,presencePenalty:0,status:"active",description:"models.mockData.gpt4Description",capabilities:["models.capabilities.textGeneration","models.capabilities.codeGeneration","models.capabilities.qaDialog","models.capabilities.textAnalysis","models.capabilities.translation"],pricing:{inputTokens:.01,outputTokens:.03,currency:"USD"},limits:{requestsPerMinute:500,tokensPerMinute:15e4,dailyLimit:1e6},createdBy:"models.mockData.systemAdmin",createdAt:"2024-01-15 10:30:00",lastModified:"2024-01-20 14:25:00",lastUsed:"2024-01-20 16:45:00",usageCount:15420},{id:"2",name:"Claude-3 Sonnet",provider:"Anthropic",modelType:"llm",version:"claude-3-sonnet-20240229",apiEndpoint:"https://api.anthropic.com/v1/messages",apiKey:"sk-ant-*********************",maxTokens:4096,temperature:.8,topP:1,frequencyPenalty:0,presencePenalty:0,status:"active",description:"models.mockData.claudeDescription",capabilities:["models.capabilities.textGeneration","models.capabilities.codeAnalysis","models.capabilities.logicalReasoning","models.capabilities.mathCalculation","models.capabilities.documentAnalysis"],pricing:{inputTokens:.003,outputTokens:.015,currency:"USD"},limits:{requestsPerMinute:1e3,tokensPerMinute:2e5,dailyLimit:2e6},createdBy:"models.mockData.systemAdmin",createdAt:"2024-01-10 09:15:00",lastModified:"2024-01-18 11:20:00",lastUsed:"2024-01-20 15:30:00",usageCount:8750},{id:"3",name:"Text-Embedding-3-Large",provider:"OpenAI",modelType:"embedding",version:"text-embedding-3-large",apiEndpoint:"https://api.openai.com/v1/embeddings",apiKey:"sk-*********************",maxTokens:8191,temperature:0,topP:1,frequencyPenalty:0,presencePenalty:0,status:"active",description:"models.mockData.embeddingDescription",capabilities:["models.capabilities.textEmbedding","models.capabilities.semanticSearch","models.capabilities.similarityCalculation","models.capabilities.clusterAnalysis"],pricing:{inputTokens:1e-4,outputTokens:0,currency:"USD"},limits:{requestsPerMinute:3e3,tokensPerMinute:1e6,dailyLimit:1e7},createdBy:"models.mockData.systemAdmin",createdAt:"2024-01-12 14:45:00",lastModified:"2024-01-19 16:10:00",lastUsed:"2024-01-20 17:20:00",usageCount:25680},{id:"4",name:"Gemini Pro",provider:"Google",modelType:"llm",version:"gemini-pro",apiEndpoint:"https://generativelanguage.googleapis.com/v1/models/gemini-pro:generateContent",apiKey:"AIza*********************",maxTokens:2048,temperature:.9,topP:1,frequencyPenalty:0,presencePenalty:0,status:"testing",description:"models.mockData.geminiDescription",capabilities:["models.capabilities.textGeneration","models.capabilities.multimodalUnderstanding","models.capabilities.creativeWriting","models.capabilities.codeGeneration"],pricing:{inputTokens:5e-4,outputTokens:.0015,currency:"USD"},limits:{requestsPerMinute:60,tokensPerMinute:32e3,dailyLimit:1e5},createdBy:"models.mockData.systemAdmin",createdAt:"2024-01-08 16:20:00",lastModified:"2024-01-17 13:45:00",lastUsed:"2024-01-20 12:15:00",usageCount:3240}],Me={models:Se},{Title:Ae,Paragraph:N,Text:qe}=me,{Option:m}=A,{TextArea:we}=S,Re=b.div`
  padding: 24px;
`,Be=b.div`
  margin-bottom: 24px;
`,I=b(g)`
  .ant-card-body {
    padding: 16px;
  }
`,Ce=b(g)`
  height: 100%;
  transition: all 0.3s ease;
  cursor: pointer;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
  
  .ant-card-head {
    padding: 12px 16px;
    min-height: 57px;
    
    .ant-card-head-title {
      padding: 0;
      font-size: 14px;
      font-weight: 500;
      width: 100%;
    }
    
    .ant-card-extra {
      padding: 0;
    }
    
    .card-title {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      
      .title-left {
        flex: 1;
        min-width: 0; /* 允许文本截断 */
        
        span {
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }
      }
      
      .title-right {
        flex-shrink: 0;
        margin-left: 8px;
      }
    }
  }
  
  .card-actions {
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid #f0f0f0;
    display: flex;
    justify-content: flex-end;
    
    .ant-btn {
      color: #666;
      
      &:hover {
        color: #1890ff;
        background-color: rgba(24, 144, 255, 0.1);
      }
    }
  }
`;b.div`
  background: #fafafa;
  padding: 16px;
  border-radius: 6px;
  margin-bottom: 16px;
`;const Qe=()=>{var D,z,E,U,$;const{t:s}=ce(["models","common"]),[De,ze]=r.useState(!1),[H,f]=r.useState(!1),[W,q]=r.useState(!1),[w,R]=r.useState(null),[l,Y]=r.useState(null),[Q,X]=r.useState(""),[_,J]=r.useState("all"),[Z,ee]=r.useState("all"),[se,te]=r.useState("all"),[y]=d.useForm();r.useEffect(()=>{Pe(s("models:title"))},[s]);const u=Me.models.map(t=>({...t,description:s(t.description.replace("models.","models:")),capabilities:t.capabilities.map(a=>s(a.replace("models.","models:"))),createdBy:s(t.createdBy.replace("models.","models:"))})),T={OpenAI:{color:"green",icon:e.jsx(M,{})},Anthropic:{color:"blue",icon:e.jsx(be,{})},Google:{color:"red",icon:e.jsx(ve,{})},Azure:{color:"cyan",icon:e.jsx(ye,{})}},v={llm:{name:s("models:types.llm"),color:"blue",icon:e.jsx(M,{})},embedding:{name:s("models:types.embedding"),color:"green",icon:e.jsx(fe,{})},image:{name:s("models:types.image"),color:"orange",icon:e.jsx(O,{})},audio:{name:s("models:types.audio"),color:"purple",icon:e.jsx(G,{})}},B=t=>{const n={active:{color:"green",text:s("models:status.active")},inactive:{color:"red",text:s("models:status.inactive")},testing:{color:"orange",text:s("models:status.testing")}}[t];return e.jsx(p,{color:n.color,children:n.text})},le=()=>{R(null),y.resetFields(),f(!0)},ie=t=>{R(t),y.setFieldsValue({name:t.name,provider:t.provider,modelType:t.modelType,version:t.version,apiEndpoint:t.apiEndpoint,maxTokens:t.maxTokens,temperature:t.temperature,description:t.description}),f(!0)},C=t=>{Y(t),q(!0)},ae=async()=>{try{const t=await y.validateFields();w?L.success(s("models:alerts.updateSuccess")):L.success(s("models:alerts.createSuccess")),f(!1),y.resetFields()}catch(t){console.error("表单验证失败:",t)}},oe=()=>u.map(t=>{const a=T[t.provider],n=v[t.modelType];return e.jsx(o,{xs:24,sm:24,md:12,lg:8,xl:8,children:e.jsxs(Ce,{title:e.jsxs("div",{className:"card-title",children:[e.jsx("div",{className:"title-left",children:e.jsxs(h,{children:[a==null?void 0:a.icon,e.jsx("span",{children:t.name})]})}),e.jsx("div",{className:"title-right",children:B(t.status)})]}),onClick:()=>C(t),children:[e.jsx("div",{style:{marginBottom:12},children:e.jsxs(h,{wrap:!0,children:[e.jsx(p,{color:a==null?void 0:a.color,icon:a==null?void 0:a.icon,children:t.provider}),e.jsx(p,{color:n==null?void 0:n.color,icon:n==null?void 0:n.icon,children:n==null?void 0:n.name})]})}),e.jsx(N,{ellipsis:{rows:2},style:{marginBottom:16,minHeight:40},children:t.description}),e.jsx("div",{style:{marginBottom:12},children:e.jsxs(c,{gutter:16,children:[e.jsx(o,{span:12,children:e.jsx(j,{title:s("models:stats.usageCount"),value:t.usageCount,valueStyle:{fontSize:14}})}),e.jsx(o,{span:12,children:e.jsx(j,{title:s("models:stats.maxTokens"),value:t.maxTokens,valueStyle:{fontSize:14}})})]})}),e.jsx("div",{style:{marginBottom:12},children:e.jsxs(h,{wrap:!0,children:[t.capabilities.slice(0,3).map(x=>e.jsx(p,{size:"small",children:x},x)),t.capabilities.length>3&&e.jsxs(p,{size:"small",children:["+",t.capabilities.length-3]})]})}),e.jsxs("div",{style:{fontSize:12,color:"#666"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[e.jsxs("span",{children:[s("models:stats.version"),":"]}),e.jsx("span",{children:t.version})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{children:[s("models:stats.lastUsed"),":"]}),e.jsx("span",{children:t.lastUsed})]})]}),e.jsx("div",{className:"card-actions",children:e.jsxs(h,{children:[e.jsx(K,{title:s("models:viewDetails"),children:e.jsx(k,{type:"text",icon:e.jsx(Te,{}),size:"small",onClick:x=>{x.stopPropagation(),C(t)}})}),e.jsx(K,{title:s("common:edit"),children:e.jsx(k,{type:"text",icon:e.jsx(ke,{}),size:"small",onClick:x=>{x.stopPropagation(),ie(t)}})})]})})]})},t.id)}),ne=u.filter(t=>t.status==="active").length,re=u.reduce((t,a)=>t+a.usageCount,0),de=u.reduce((t,a)=>t+a.temperature,0)/u.length;return e.jsxs(Re,{children:[e.jsx(Be,{children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx(Ae,{className:"page-title",level:2,style:{margin:0},children:e.jsxs(h,{children:[e.jsx(pe,{}),s("models:title")]})}),e.jsx(N,{style:{marginTop:8,marginBottom:0,fontSize:16},children:s("models:subtitle")})]}),e.jsxs(h,{children:[e.jsx(k,{icon:e.jsx(ue,{}),children:s("common:refresh")}),e.jsx(k,{type:"primary",icon:e.jsx(xe,{}),onClick:le,children:s("models:addModel")})]})]})}),e.jsxs(c,{gutter:16,style:{marginBottom:24},children:[e.jsx(o,{xs:24,sm:12,md:6,children:e.jsx(I,{children:e.jsx(j,{title:s("models:stats.totalModels"),value:u.length,suffix:s("models:stats.unit"),valueStyle:{color:"#1890ff"},prefix:e.jsx(M,{})})})}),e.jsx(o,{xs:24,sm:12,md:6,children:e.jsx(I,{children:e.jsx(j,{title:s("models:stats.activeModels"),value:ne,suffix:s("models:stats.unit"),valueStyle:{color:"#52c41a"},prefix:e.jsx(F,{})})})}),e.jsx(o,{xs:24,sm:12,md:6,children:e.jsx(I,{children:e.jsx(j,{title:s("models:stats.totalUsage"),value:re,valueStyle:{color:"#faad14"},prefix:e.jsx(G,{})})})}),e.jsx(o,{xs:24,sm:12,md:6,children:e.jsx(I,{children:e.jsx(j,{title:s("models:stats.avgTemperature"),value:de.toFixed(1),valueStyle:{color:"#722ed1"},prefix:e.jsx(O,{})})})})]}),e.jsx(Ie,{searchValue:Q,onSearchChange:X,searchPlaceholder:s("models:searchPlaceholder"),filters:[{key:"provider",value:_,onChange:J,placeholder:s("models:filterByProvider"),width:120,options:[{value:"all",label:s("models:providers.all")},...Object.entries(T).map(([t,a])=>({value:t,label:s(`models.providers.${t}`)}))]},{key:"type",value:Z,onChange:ee,placeholder:s("models:filterByType"),width:120,options:[{value:"all",label:s("common:all")},...Object.entries(v).map(([t,a])=>({value:t,label:a.name}))]},{key:"status",value:se,onChange:te,placeholder:s("models:filterByStatus"),width:100,options:[{value:"all",label:s("common:all")},{value:"active",label:s("models:status.active")},{value:"inactive",label:s("models:status.inactive")},{value:"testing",label:s("models:status.testing")}]}],onRefresh:()=>window.location.reload()}),e.jsx(c,{gutter:[16,16],children:oe()}),e.jsx(V,{title:s(w?"models:editModel":"models:createModel"),open:H,onOk:ae,onCancel:()=>f(!1),width:800,children:e.jsxs(d,{form:y,layout:"vertical",initialValues:{temperature:.7,topP:1,maxTokens:4096},children:[e.jsxs(c,{gutter:16,children:[e.jsx(o,{span:12,children:e.jsx(d.Item,{name:"name",label:s("models:form.name"),rules:[{required:!0,message:s("models:form.nameRequired")}],children:e.jsx(S,{placeholder:s("models:form.namePlaceholder")})})}),e.jsx(o,{span:12,children:e.jsx(d.Item,{name:"provider",label:s("models:form.provider"),rules:[{required:!0,message:s("models:form.providerRequired")}],children:e.jsxs(A,{placeholder:s("models:form.providerPlaceholder"),children:[e.jsx(m,{value:"OpenAI",children:s("models:providers.OpenAI")}),e.jsx(m,{value:"Anthropic",children:s("models:providers.Anthropic")}),e.jsx(m,{value:"Google",children:s("models:providers.Google")}),e.jsx(m,{value:"Azure",children:s("models:providers.Azure")})]})})})]}),e.jsxs(c,{gutter:16,children:[e.jsx(o,{span:12,children:e.jsx(d.Item,{name:"modelType",label:s("models:form.modelType"),rules:[{required:!0,message:s("models:form.typeRequired")}],children:e.jsxs(A,{placeholder:s("models:form.typePlaceholder"),children:[e.jsx(m,{value:"llm",children:s("models:types.llm")}),e.jsx(m,{value:"embedding",children:s("models:types.embedding")}),e.jsx(m,{value:"image",children:s("models:types.image")}),e.jsx(m,{value:"audio",children:s("models:types.audio")})]})})}),e.jsx(o,{span:12,children:e.jsx(d.Item,{name:"version",label:s("models:form.version"),rules:[{required:!0,message:s("models:form.versionRequired")}],children:e.jsx(S,{placeholder:s("models:form.versionPlaceholder")})})})]}),e.jsx(d.Item,{name:"apiEndpoint",label:s("models:form.apiEndpoint"),rules:[{required:!0,message:s("models:form.endpointRequired")}],children:e.jsx(S,{placeholder:s("models:form.endpointPlaceholder")})}),e.jsxs(c,{gutter:16,children:[e.jsx(o,{span:12,children:e.jsx(d.Item,{name:"maxTokens",label:s("models:form.maxTokens"),rules:[{required:!0,message:s("models:form.maxTokensRequired")}],children:e.jsx(he,{min:1,max:128e3,style:{width:"100%"},placeholder:s("models:form.maxTokensPlaceholder")})})}),e.jsx(o,{span:12,children:e.jsx(d.Item,{name:"temperature",label:s("models:form.temperature"),rules:[{required:!0,message:s("models:form.temperatureRequired")}],children:e.jsx(je,{min:0,max:2,step:.1,marks:{0:"0",1:"1",2:"2"}})})})]}),e.jsx(d.Item,{name:"description",label:s("models:form.description"),rules:[{required:!0,message:s("models:form.descriptionRequired")}],children:e.jsx(we,{rows:3,placeholder:s("models:form.descriptionPlaceholder")})}),e.jsx(ge,{message:"提示",description:"API密钥等敏感信息将在保存后进行加密存储，请确保API端点的正确性。",type:"info",showIcon:!0,style:{marginTop:16}})]})}),e.jsx(V,{title:l==null?void 0:l.name,open:W,onCancel:()=>q(!1),footer:null,width:1e3,style:{top:20},children:l&&e.jsxs("div",{children:[e.jsxs(i,{bordered:!0,column:2,style:{marginBottom:24},children:[e.jsx(i.Item,{label:s("models:detail.name"),span:2,children:l.name}),e.jsx(i.Item,{label:s("models:detail.provider"),children:e.jsx(p,{color:(D=T[l.provider])==null?void 0:D.color,icon:(z=T[l.provider])==null?void 0:z.icon,children:l.provider})}),e.jsx(i.Item,{label:s("models:detail.type"),children:e.jsx(p,{color:(E=v[l.modelType])==null?void 0:E.color,icon:(U=v[l.modelType])==null?void 0:U.icon,children:($=v[l.modelType])==null?void 0:$.name})}),e.jsx(i.Item,{label:s("models:detail.version"),children:l.version}),e.jsx(i.Item,{label:s("models:detail.status"),children:B(l.status)}),e.jsx(i.Item,{label:s("models:detail.apiEndpoint"),span:2,children:e.jsx(qe,{code:!0,children:l.apiEndpoint})}),e.jsxs(i.Item,{label:s("models:detail.usageCount"),children:[l.usageCount,s("models:stats.requestUnit")]}),e.jsx(i.Item,{label:s("models:detail.lastUsed"),children:l.lastUsed}),e.jsx(i.Item,{label:s("models:detail.createdBy"),children:l.createdBy}),e.jsx(i.Item,{label:s("models:detail.createdAt"),children:l.createdAt}),e.jsx(i.Item,{label:s("models:detail.description"),span:2,children:l.description})]}),e.jsxs(P,{defaultActiveKey:"parameters",children:[e.jsx(P.TabPane,{tab:s("models:detail.parameters"),children:e.jsxs(c,{gutter:16,children:[e.jsx(o,{span:12,children:e.jsx(g,{title:s("models:detail.parameters"),size:"small",children:e.jsxs(i,{column:1,size:"small",children:[e.jsx(i.Item,{label:s("models:detail.maxTokens"),children:l.maxTokens}),e.jsx(i.Item,{label:s("models:detail.temperature"),children:l.temperature}),e.jsx(i.Item,{label:s("models:detail.topP"),children:l.topP}),e.jsx(i.Item,{label:s("models:detail.frequencyPenalty"),children:l.frequencyPenalty}),e.jsx(i.Item,{label:s("models:detail.presencePenalty"),children:l.presencePenalty})]})})}),e.jsx(o,{span:12,children:e.jsx(g,{title:s("models:detail.limits"),size:"small",children:e.jsxs(i,{column:1,size:"small",children:[e.jsx(i.Item,{label:s("models:detail.requestsPerMinute"),children:l.limits.requestsPerMinute}),e.jsx(i.Item,{label:s("models:detail.tokensPerMinute"),children:l.limits.tokensPerMinute}),e.jsx(i.Item,{label:s("models:detail.dailyLimit"),children:l.limits.dailyLimit})]})})})]})},"parameters"),e.jsx(P.TabPane,{tab:s("models:detail.capabilities"),children:e.jsx(c,{gutter:16,children:l.capabilities.map(t=>e.jsx(o,{xs:24,sm:12,lg:8,children:e.jsx(g,{size:"small",style:{marginBottom:16},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(F,{style:{color:"#52c41a",fontSize:24,marginBottom:8}}),e.jsx("div",{children:t})]})})},t))})},"capabilities"),e.jsx(P.TabPane,{tab:s("models:detail.pricing"),children:e.jsx(g,{title:s("models:detail.pricingDetails"),size:"small",children:e.jsxs(i,{column:2,size:"small",children:[e.jsxs(i.Item,{label:s("models:detail.inputTokenPrice"),children:["$",l.pricing.inputTokens," / 1K tokens"]}),e.jsxs(i.Item,{label:s("models:detail.outputTokenPrice"),children:["$",l.pricing.outputTokens," / 1K tokens"]}),e.jsx(i.Item,{label:s("models:detail.currency"),children:l.pricing.currency})]})})},"pricing")]})]})})]})};export{Qe as default};

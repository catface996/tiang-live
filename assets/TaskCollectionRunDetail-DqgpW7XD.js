import{b as re,j as e,d as C,a as le,u as oe}from"./index-CLn_jbkO.js";import{Q as ce,r as p,P as q,d as N,C as o,S as T,a_ as X,T as M,u as w,aj as Y,g as de,L as B,j as f,N as H,v as he,a$ as me,aJ as D,V as U,l as Z,aN as ee,_ as te,as as se,a5 as ae,$ as E,b0 as ie,a as L,b1 as ue,b2 as pe,b3 as ye,b4 as xe,y as u,k as A,a3 as G,af as fe,U as ge,aq as je,B as K,o as ve,ab as be}from"./antd-CtXjdSWW.js";import{s as _e}from"./index-Daowydkz.js";import{s as ke}from"./transform-DnhttqEe.js";import{s as Se,l as Ie,m as we,c as Te,d as Re}from"./manyBody-B5inEzsj.js";import"./vendor-DJG_os-6.js";const Ce=C(ce)`
  margin-bottom: 16px;
  
  .ant-breadcrumb-link {
    cursor: pointer;
    
    &:hover {
      color: #1890ff;
    }
  }
`,ze=({items:c})=>{const r=re(),_=a=>{a&&r(a)},j=c.map((a,y)=>({title:e.jsxs("span",{onClick:()=>_(a.path),style:{cursor:a.path?"pointer":"default",display:"flex",alignItems:"center",gap:"4px"},children:[a.icon,a.title]})}));return e.jsx(Ce,{items:j})},Ne=[{nodeId:"node_1",nodeName:"ç”¨æˆ·æœåŠ¡",nodeType:"entity",status:"completed",executionTime:{startTime:"2024-06-24 13:00:00",endTime:"2024-06-24 13:02:30",totalDuration:150},actions:[{id:"health_check_1",name:"å¥åº·æ£€æŸ¥",description:"æ£€æŸ¥æœåŠ¡åŸºç¡€å¥åº·çŠ¶æ€å’Œå¯ç”¨æ€§",type:"health_check",status:"success",startTime:"2024-06-24 13:00:00",endTime:"2024-06-24 13:01:00",duration:60,overallScore:95,summary:"æœåŠ¡è¿è¡ŒçŠ¶æ€è‰¯å¥½ï¼Œæ‰€æœ‰å¥åº·æŒ‡æ ‡å‡åœ¨æ­£å¸¸èŒƒå›´å†…",metrics:[{id:"response_time",name:"å“åº”æ—¶é—´",description:"APIå¹³å‡å“åº”æ—¶é—´",unit:"ms",healthyRange:{max:200,optimal:100,description:"< 200ms æ­£å¸¸, < 100ms ä¼˜ç§€"},actualValue:85,health:"healthy",healthScore:95,timestamp:"2024-06-24 13:01:00",trend:"stable",previousValue:88},{id:"availability",name:"å¯ç”¨æ€§",description:"æœåŠ¡å¯ç”¨æ€§ç™¾åˆ†æ¯”",unit:"%",healthyRange:{min:99,optimal:99.9,description:"> 99% æ­£å¸¸, > 99.9% ä¼˜ç§€"},actualValue:99.8,health:"healthy",healthScore:98,timestamp:"2024-06-24 13:01:00",trend:"up",previousValue:99.5},{id:"error_rate",name:"é”™è¯¯ç‡",description:"è¯·æ±‚é”™è¯¯ç‡",unit:"%",healthyRange:{max:1,optimal:.1,description:"< 1% æ­£å¸¸, < 0.1% ä¼˜ç§€"},actualValue:.2,health:"healthy",healthScore:90,timestamp:"2024-06-24 13:01:00",trend:"down",previousValue:.5}]},{id:"performance_analysis_1",name:"æ€§èƒ½åˆ†æ",description:"åˆ†ææœåŠ¡æ€§èƒ½æŒ‡æ ‡å’Œèµ„æºä½¿ç”¨æƒ…å†µ",type:"performance_analysis",status:"success",startTime:"2024-06-24 13:01:30",endTime:"2024-06-24 13:02:30",duration:60,overallScore:88,summary:"æ€§èƒ½è¡¨ç°è‰¯å¥½ï¼ŒCPUå’Œå†…å­˜ä½¿ç”¨ç‡åœ¨åˆç†èŒƒå›´å†…",metrics:[{id:"cpu_usage",name:"CPUä½¿ç”¨ç‡",description:"æœåŠ¡å™¨CPUå¹³å‡ä½¿ç”¨ç‡",unit:"%",healthyRange:{max:80,optimal:50,description:"< 80% æ­£å¸¸, < 50% ä¼˜ç§€"},actualValue:45,health:"healthy",healthScore:85,timestamp:"2024-06-24 13:02:30",trend:"stable",previousValue:47},{id:"memory_usage",name:"å†…å­˜ä½¿ç”¨ç‡",description:"æœåŠ¡å™¨å†…å­˜å¹³å‡ä½¿ç”¨ç‡",unit:"%",healthyRange:{max:85,optimal:60,description:"< 85% æ­£å¸¸, < 60% ä¼˜ç§€"},actualValue:60,health:"healthy",healthScore:80,timestamp:"2024-06-24 13:02:30",trend:"up",previousValue:55},{id:"throughput",name:"ååé‡",description:"æ¯ç§’å¤„ç†è¯·æ±‚æ•°",unit:"req/s",healthyRange:{min:100,optimal:500,description:"> 100 req/s æ­£å¸¸, > 500 req/s ä¼˜ç§€"},actualValue:320,health:"healthy",healthScore:85,timestamp:"2024-06-24 13:02:30",trend:"stable",previousValue:315}]}],analysis:{overallHealthScore:92,riskLevel:"low",keyFindings:["æœåŠ¡å“åº”æ—¶é—´ä¼˜ç§€ï¼Œå¹³å‡85msè¿œä½äº200msé˜ˆå€¼","å¯ç”¨æ€§è¾¾åˆ°99.8%ï¼Œæ¥è¿‘ä¼˜ç§€æ°´å¹³","CPUå’Œå†…å­˜ä½¿ç”¨ç‡åˆç†ï¼Œç³»ç»Ÿè´Ÿè½½å¥åº·","ååé‡ç¨³å®šåœ¨320 req/sï¼Œæ»¡è¶³ä¸šåŠ¡éœ€æ±‚"],performanceSummary:"ç”¨æˆ·æœåŠ¡æ€§èƒ½è¡¨ç°ä¼˜ç§€ï¼Œå“åº”æ—¶é—´å¿«ï¼Œååé‡ç¨³å®šã€‚CPUä½¿ç”¨ç‡45%ï¼Œå†…å­˜ä½¿ç”¨ç‡60%ï¼Œå‡åœ¨å¥åº·èŒƒå›´å†…ã€‚å»ºè®®ç»§ç»­ä¿æŒå½“å‰é…ç½®ã€‚",securitySummary:"åŸºç¡€å¥åº·æ£€æŸ¥é€šè¿‡ï¼ŒæœåŠ¡å¯ç”¨æ€§é«˜ã€‚å»ºè®®å®šæœŸè¿›è¡Œå®‰å…¨æ‰«æä»¥ç¡®ä¿ç³»ç»Ÿå®‰å…¨æ€§ã€‚",recommendations:[{priority:"low",category:"maintenance",title:"å®šæœŸæ¸…ç†æ—¥å¿—æ–‡ä»¶",description:"å»ºè®®æ¯å‘¨æ¸…ç†ä¸€æ¬¡åº”ç”¨æ—¥å¿—ï¼Œé¿å…ç£ç›˜ç©ºé—´ä¸è¶³",estimatedImpact:"é¢„é˜²ç£ç›˜ç©ºé—´é—®é¢˜ï¼Œæå‡ç³»ç»Ÿç¨³å®šæ€§"},{priority:"medium",category:"performance",title:"ç›‘æ§å†…å­˜ä½¿ç”¨è¶‹åŠ¿",description:"å†…å­˜ä½¿ç”¨ç‡å‘ˆä¸Šå‡è¶‹åŠ¿ï¼Œå»ºè®®åŠ å¼ºç›‘æ§",estimatedImpact:"åŠæ—©å‘ç°å†…å­˜æ³„æ¼ï¼Œé¿å…æœåŠ¡å¼‚å¸¸"}]},lastUpdated:"2024-06-24 13:02:30"},{nodeId:"node_2",nodeName:"è®¢å•æœåŠ¡",nodeType:"entity",status:"failed",executionTime:{startTime:"2024-06-24 13:00:00",endTime:"2024-06-24 13:03:00",totalDuration:180},actions:[{id:"health_check_2",name:"å¥åº·æ£€æŸ¥",description:"æ£€æŸ¥è®¢å•æœåŠ¡åŸºç¡€å¥åº·çŠ¶æ€",type:"health_check",status:"error",startTime:"2024-06-24 13:00:00",endTime:"2024-06-24 13:01:30",duration:90,overallScore:25,summary:"æœåŠ¡å¥åº·æ£€æŸ¥å¤±è´¥ï¼Œå¤šé¡¹å…³é”®æŒ‡æ ‡å¼‚å¸¸",metrics:[{id:"response_time",name:"å“åº”æ—¶é—´",description:"APIå¹³å‡å“åº”æ—¶é—´",unit:"ms",healthyRange:{max:200,optimal:100,description:"< 200ms æ­£å¸¸, < 100ms ä¼˜ç§€"},actualValue:5e3,health:"critical",healthScore:10,timestamp:"2024-06-24 13:01:30",trend:"up",previousValue:3e3},{id:"availability",name:"å¯ç”¨æ€§",description:"æœåŠ¡å¯ç”¨æ€§ç™¾åˆ†æ¯”",unit:"%",healthyRange:{min:99,optimal:99.9,description:"> 99% æ­£å¸¸, > 99.9% ä¼˜ç§€"},actualValue:85,health:"critical",healthScore:20,timestamp:"2024-06-24 13:01:30",trend:"down",previousValue:95},{id:"error_rate",name:"é”™è¯¯ç‡",description:"è¯·æ±‚é”™è¯¯ç‡",unit:"%",healthyRange:{max:1,optimal:.1,description:"< 1% æ­£å¸¸, < 0.1% ä¼˜ç§€"},actualValue:15,health:"critical",healthScore:5,timestamp:"2024-06-24 13:01:30",trend:"up",previousValue:8}]},{id:"fault_analysis_2",name:"æ•…éšœåˆ†æ",description:"åˆ†ææœåŠ¡æ•…éšœåŸå› å’Œå½±å“èŒƒå›´",type:"fault_analysis",status:"warning",startTime:"2024-06-24 13:01:30",endTime:"2024-06-24 13:03:00",duration:90,overallScore:45,summary:"æ£€æµ‹åˆ°å†…å­˜æ³„æ¼å’Œæ•°æ®åº“è¿æ¥æ± è€—å°½é—®é¢˜",metrics:[{id:"memory_leak",name:"å†…å­˜æ³„æ¼æ£€æµ‹",description:"æ£€æµ‹å†…å­˜ä½¿ç”¨å¢é•¿è¶‹åŠ¿",unit:"MB/h",healthyRange:{max:10,optimal:0,description:"< 10MB/h æ­£å¸¸, 0MB/h ä¼˜ç§€"},actualValue:150,health:"critical",healthScore:15,timestamp:"2024-06-24 13:03:00",trend:"up",previousValue:120},{id:"db_connections",name:"æ•°æ®åº“è¿æ¥æ•°",description:"æ´»è·ƒæ•°æ®åº“è¿æ¥æ•°é‡",unit:"ä¸ª",healthyRange:{max:100,optimal:50,description:"< 100ä¸ª æ­£å¸¸, < 50ä¸ª ä¼˜ç§€"},actualValue:150,health:"warning",healthScore:40,timestamp:"2024-06-24 13:03:00",trend:"up",previousValue:120},{id:"gc_frequency",name:"GCé¢‘ç‡",description:"åƒåœ¾å›æ”¶æ‰§è¡Œé¢‘ç‡",unit:"æ¬¡/min",healthyRange:{max:5,optimal:2,description:"< 5æ¬¡/min æ­£å¸¸, < 2æ¬¡/min ä¼˜ç§€"},actualValue:12,health:"warning",healthScore:30,timestamp:"2024-06-24 13:03:00",trend:"up",previousValue:8}]}],analysis:{overallHealthScore:35,riskLevel:"critical",keyFindings:["æœåŠ¡å“åº”æ—¶é—´ä¸¥é‡è¶…æ ‡ï¼Œè¾¾åˆ°5000ms","å¯ç”¨æ€§ä¸‹é™è‡³85%ï¼Œè¿œä½äº99%çš„æ ‡å‡†","é”™è¯¯ç‡é«˜è¾¾15%ï¼Œä¸¥é‡å½±å“ç”¨æˆ·ä½“éªŒ","æ£€æµ‹åˆ°ä¸¥é‡å†…å­˜æ³„æ¼ï¼Œå¢é•¿ç‡150MB/h","æ•°æ®åº“è¿æ¥æ± æ¥è¿‘è€—å°½ï¼Œè¿æ¥æ•°è¾¾åˆ°150ä¸ª"],performanceSummary:"è®¢å•æœåŠ¡æ€§èƒ½ä¸¥é‡ä¸‹é™ï¼Œå“åº”æ—¶é—´è¶…æ ‡25å€ï¼Œå¯ç”¨æ€§å’Œé”™è¯¯ç‡å‡ä¸è¾¾æ ‡ã€‚ç³»ç»Ÿè´Ÿè½½è¿‡é«˜ï¼Œéœ€è¦ç«‹å³å¤„ç†ã€‚",securitySummary:"æœåŠ¡ç¨³å®šæ€§å­˜åœ¨ä¸¥é‡é—®é¢˜ï¼Œå¯èƒ½å½±å“æ•°æ®ä¸€è‡´æ€§å’Œä¸šåŠ¡è¿ç»­æ€§ã€‚å»ºè®®ç«‹å³é‡‡å–åº”æ€¥æªæ–½ã€‚",recommendations:[{priority:"high",category:"reliability",title:"ç«‹å³é‡å¯æœåŠ¡å®ä¾‹",description:"æœåŠ¡çŠ¶æ€å¼‚å¸¸ï¼Œå»ºè®®ç«‹å³é‡å¯ä»¥æ¢å¤æ­£å¸¸çŠ¶æ€",estimatedImpact:"å¿«é€Ÿæ¢å¤æœåŠ¡å¯ç”¨æ€§ï¼Œå‡å°‘ä¸šåŠ¡å½±å“"},{priority:"high",category:"performance",title:"ä¿®å¤å†…å­˜æ³„æ¼é—®é¢˜",description:"æ£€æŸ¥ä»£ç ä¸­çš„å†…å­˜æ³„æ¼ç‚¹ï¼Œä¼˜åŒ–å†…å­˜ä½¿ç”¨",estimatedImpact:"è§£å†³æ ¹æœ¬é—®é¢˜ï¼Œé˜²æ­¢æœåŠ¡å†æ¬¡å¼‚å¸¸"},{priority:"high",category:"performance",title:"ä¼˜åŒ–æ•°æ®åº“è¿æ¥æ± é…ç½®",description:"å¢åŠ è¿æ¥æ± å¤§å°æˆ–ä¼˜åŒ–è¿æ¥ä½¿ç”¨ç­–ç•¥",estimatedImpact:"æå‡æ•°æ®åº“è®¿é—®æ€§èƒ½ï¼Œå‡å°‘è¿æ¥ç­‰å¾…"},{priority:"medium",category:"maintenance",title:"å¢åŠ ç›‘æ§å‘Šè­¦",description:"ä¸ºå…³é”®æŒ‡æ ‡è®¾ç½®å‘Šè­¦é˜ˆå€¼ï¼ŒåŠæ—¶å‘ç°é—®é¢˜",estimatedImpact:"æå‰é¢„è­¦ï¼Œé¿å…é—®é¢˜æ‰©å¤§"}]},lastUpdated:"2024-06-24 13:03:00"},{nodeId:"node_4",nodeName:"ç”¨æˆ·ç™»å½•æµç¨‹",nodeType:"sequence",status:"completed",executionTime:{startTime:"2024-06-24 13:00:30",endTime:"2024-06-24 13:01:45",totalDuration:75},actions:[{id:"health_check_4",name:"æµç¨‹å¥åº·æ£€æŸ¥",description:"æ£€æŸ¥ç”¨æˆ·ç™»å½•æµç¨‹çš„å®Œæ•´æ€§å’Œæ€§èƒ½",type:"health_check",status:"success",startTime:"2024-06-24 13:00:30",endTime:"2024-06-24 13:01:45",duration:75,overallScore:88,summary:"ç™»å½•æµç¨‹è¿è¡Œæ­£å¸¸ï¼Œå„ç¯èŠ‚å“åº”æ—¶é—´åˆç†",metrics:[{id:"login_success_rate",name:"ç™»å½•æˆåŠŸç‡",description:"ç”¨æˆ·ç™»å½•æˆåŠŸçš„æ¯”ä¾‹",unit:"%",healthyRange:{min:95,optimal:99,description:"> 95% æ­£å¸¸, > 99% ä¼˜ç§€"},actualValue:98.5,health:"healthy",healthScore:95,timestamp:"2024-06-24 13:01:45",trend:"stable",previousValue:98.2},{id:"avg_login_time",name:"å¹³å‡ç™»å½•æ—¶é—´",description:"ç”¨æˆ·å®Œæˆç™»å½•çš„å¹³å‡æ—¶é—´",unit:"s",healthyRange:{max:3,optimal:1.5,description:"< 3s æ­£å¸¸, < 1.5s ä¼˜ç§€"},actualValue:2.3,health:"healthy",healthScore:80,timestamp:"2024-06-24 13:01:45",trend:"stable",previousValue:2.4},{id:"auth_failures",name:"è®¤è¯å¤±è´¥ç‡",description:"è®¤è¯ç¯èŠ‚å¤±è´¥çš„æ¯”ä¾‹",unit:"%",healthyRange:{max:2,optimal:.5,description:"< 2% æ­£å¸¸, < 0.5% ä¼˜ç§€"},actualValue:1.5,health:"healthy",healthScore:85,timestamp:"2024-06-24 13:01:45",trend:"down",previousValue:1.8}]}],analysis:{overallHealthScore:88,riskLevel:"low",keyFindings:["ç™»å½•æˆåŠŸç‡è¾¾åˆ°98.5%ï¼Œæ¥è¿‘ä¼˜ç§€æ°´å¹³","å¹³å‡ç™»å½•æ—¶é—´2.3ç§’ï¼Œåœ¨åˆç†èŒƒå›´å†…","è®¤è¯å¤±è´¥ç‡å‘ˆä¸‹é™è¶‹åŠ¿ï¼Œç³»ç»Ÿç¨³å®šæ€§è‰¯å¥½"],performanceSummary:"ç”¨æˆ·ç™»å½•æµç¨‹è¿è¡Œç¨³å®šï¼ŒæˆåŠŸç‡é«˜ï¼Œå“åº”æ—¶é—´åˆç†ã€‚æ•´ä½“æ€§èƒ½è¡¨ç°è‰¯å¥½ã€‚",securitySummary:"è®¤è¯ç¯èŠ‚å·¥ä½œæ­£å¸¸ï¼Œå¤±è´¥ç‡åœ¨å¯æ¥å—èŒƒå›´å†…ã€‚å»ºè®®ç»§ç»­ç›‘æ§å¼‚å¸¸ç™»å½•è¡Œä¸ºã€‚",recommendations:[{priority:"low",category:"performance",title:"ä¼˜åŒ–ç™»å½•å“åº”æ—¶é—´",description:"å¯è€ƒè™‘ä¼˜åŒ–è®¤è¯æµç¨‹ï¼Œè¿›ä¸€æ­¥ç¼©çŸ­ç™»å½•æ—¶é—´",estimatedImpact:"æå‡ç”¨æˆ·ä½“éªŒï¼Œå‡å°‘ç™»å½•ç­‰å¾…æ—¶é—´"},{priority:"medium",category:"security",title:"åŠ å¼ºå¼‚å¸¸ç™»å½•ç›‘æ§",description:"å¢åŠ å¯¹å¼‚å¸¸ç™»å½•è¡Œä¸ºçš„æ£€æµ‹å’Œå‘Šè­¦",estimatedImpact:"æé«˜ç³»ç»Ÿå®‰å…¨æ€§ï¼ŒåŠæ—¶å‘ç°å®‰å…¨å¨èƒ"}]},lastUpdated:"2024-06-24 13:01:45"}],$e={healthy:{color:"#52c41a",label:"å¥åº·",description:"æŒ‡æ ‡åœ¨æ­£å¸¸èŒƒå›´å†…"},warning:{color:"#faad14",label:"è­¦å‘Š",description:"æŒ‡æ ‡æ¥è¿‘é˜ˆå€¼ï¼Œéœ€è¦å…³æ³¨"},critical:{color:"#ff4d4f",label:"ä¸¥é‡",description:"æŒ‡æ ‡è¶…å‡ºé˜ˆå€¼ï¼Œéœ€è¦ç«‹å³å¤„ç†"},unknown:{color:"#d9d9d9",label:"æœªçŸ¥",description:"æ— æ³•è·å–æŒ‡æ ‡æ•°æ®"}},Ve={health_check:{name:"å¥åº·æ£€æŸ¥",icon:"heart",color:"#52c41a",description:"æ£€æŸ¥æœåŠ¡åŸºç¡€å¥åº·çŠ¶æ€"},performance_analysis:{name:"æ€§èƒ½åˆ†æ",icon:"bar-chart",color:"#1890ff",description:"åˆ†ææ€§èƒ½æŒ‡æ ‡å’Œèµ„æºä½¿ç”¨"},fault_analysis:{name:"æ•…éšœåˆ†æ",icon:"bug",color:"#ff4d4f",description:"åˆ†ææ•…éšœåŸå› å’Œå½±å“"},security_scan:{name:"å®‰å…¨æ‰«æ",icon:"safety-certificate",color:"#faad14",description:"æ‰«æå®‰å…¨æ¼æ´å’Œé£é™©"}},Be={low:{color:"#52c41a",label:"ä½é£é™©",description:"ç³»ç»Ÿè¿è¡Œæ­£å¸¸ï¼Œé£é™©è¾ƒä½"},medium:{color:"#faad14",label:"ä¸­ç­‰é£é™©",description:"å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œéœ€è¦å…³æ³¨"},high:{color:"#ff7a45",label:"é«˜é£é™©",description:"å­˜åœ¨ä¸¥é‡é—®é¢˜ï¼Œéœ€è¦åŠæ—¶å¤„ç†"},critical:{color:"#ff4d4f",label:"ä¸¥é‡é£é™©",description:"ç³»ç»Ÿå¼‚å¸¸ï¼Œéœ€è¦ç«‹å³å¤„ç†"}},z={diagnosticReports:Ne,metricHealthLevels:$e,actionTypes:Ve,riskLevels:Be},{Title:$,Text:m,Paragraph:Q}=M,Pe=C(f)`
  margin-bottom: 16px;
  
  .ant-card-head {
    padding: 12px 16px;
    min-height: auto;
  }
  
  .ant-card-body {
    padding: 16px;
  }
`,He=C(f)`
  margin-bottom: 12px;
  border: 1px solid #f0f0f0;
  
  .ant-card-body {
    padding: 12px;
  }
`,Le=C.div`
  padding: 16px;
  border-radius: 8px;
  background: ${c=>c.score>=90?"linear-gradient(135deg, #f6ffed 0%, #d9f7be 100%)":c.score>=70?"linear-gradient(135deg, #fffbe6 0%, #fff1b8 100%)":"linear-gradient(135deg, #fff2f0 0%, #ffccc7 100%)"};
  border: 1px solid ${c=>c.score>=90?"#b7eb8f":c.score>=70?"#ffe58f":"#ffa39e"};
`,Ae=({nodeIds:c})=>{const[r,_]=p.useState([]),[j,a]=p.useState(!0),y=p.useMemo(()=>c,[JSON.stringify(c)]),I=p.useCallback(async()=>{a(!0);try{await new Promise(n=>setTimeout(n,300));let t=z.diagnosticReports;y&&y.length>0&&(t=z.diagnosticReports.filter(n=>y.includes(n.nodeId))),_(t)}catch(t){console.error("åŠ è½½è¯Šæ–­æŠ¥å‘Šå¤±è´¥:",t)}finally{a(!1)}},[y]);p.useEffect(()=>{I()},[I]);const k=t=>{var n;return((n=z.metricHealthLevels[t])==null?void 0:n.color)||"#d9d9d9"},i=t=>{const n=k(t);switch(t){case"healthy":return e.jsx(L,{style:{color:n}});case"warning":return e.jsx(ie,{style:{color:n}});case"critical":return e.jsx(E,{style:{color:n}});default:return e.jsx(ae,{style:{color:n}})}},d=t=>{const n=z.actionTypes[t],s=(n==null?void 0:n.color)||"#666";switch(t){case"health_check":return e.jsx(se,{style:{color:s}});case"performance_analysis":return e.jsx(te,{style:{color:s}});case"fault_analysis":return e.jsx(ee,{style:{color:s}});case"security_scan":return e.jsx(Z,{style:{color:s}});default:return e.jsx(U,{style:{color:s}})}},x=t=>{switch(t){case"up":return e.jsx(ye,{style:{color:"#ff4d4f"}});case"down":return e.jsx(pe,{style:{color:"#52c41a"}});case"stable":return e.jsx(ue,{style:{color:"#1890ff"}});default:return null}},v=t=>z.riskLevels[t]||{color:"#d9d9d9",label:"æœªçŸ¥",description:"æœªçŸ¥é£é™©ç­‰çº§"},S=t=>{var n;return e.jsxs(He,{size:"small",children:[e.jsxs(N,{gutter:16,align:"middle",children:[e.jsx(o,{span:8,children:e.jsxs("div",{children:[e.jsx(m,{strong:!0,children:t.name}),e.jsx("br",{}),e.jsx(m,{type:"secondary",style:{fontSize:12},children:t.description})]})}),e.jsx(o,{span:4,children:e.jsx(T,{title:"å®é™…å€¼",value:t.actualValue,suffix:t.unit,valueStyle:{fontSize:16}})}),e.jsx(o,{span:6,children:e.jsxs("div",{children:[e.jsx(m,{type:"secondary",style:{fontSize:12},children:"å¥åº·èŒƒå›´"}),e.jsx("br",{}),e.jsx(m,{style:{fontSize:12},children:t.healthyRange.description})]})}),e.jsx(o,{span:3,children:e.jsxs("div",{style:{textAlign:"center"},children:[i(t.health),e.jsx("br",{}),e.jsx(m,{style:{fontSize:12,color:k(t.health)},children:((n=z.metricHealthLevels[t.health])==null?void 0:n.label)||"æœªçŸ¥"})]})}),e.jsx(o,{span:3,children:e.jsx(D,{type:"circle",size:40,percent:t.healthScore,strokeColor:k(t.health),format:()=>`${t.healthScore}`})})]}),t.trend&&e.jsxs("div",{style:{marginTop:8,fontSize:12,color:"#666",display:"flex",alignItems:"center",gap:4},children:[e.jsx("span",{children:"è¶‹åŠ¿:"}),x(t.trend),e.jsx("span",{children:t.trend==="up"?"ä¸Šå‡":t.trend==="down"?"ä¸‹é™":"ç¨³å®š"}),t.previousValue&&e.jsxs("span",{children:["(ä¸Šæ¬¡: ",t.previousValue,t.unit,")"]})]})]},t.id)},g=t=>e.jsxs(f,{size:"small",style:{marginBottom:16},children:[e.jsxs(N,{gutter:16,align:"middle",style:{marginBottom:16},children:[e.jsx(o,{span:2,children:d(t.type)}),e.jsxs(o,{span:10,children:[e.jsx($,{level:5,style:{margin:0},children:t.name}),e.jsx(m,{type:"secondary",children:t.description})]}),e.jsx(o,{span:4,children:e.jsx(T,{title:"æ‰§è¡Œæ—¶é•¿",value:t.duration,suffix:"ç§’",valueStyle:{fontSize:14}})}),e.jsx(o,{span:4,children:e.jsx(T,{title:"æŒ‡æ ‡æ•°é‡",value:t.metrics.length,suffix:"é¡¹",valueStyle:{fontSize:14}})}),e.jsx(o,{span:4,children:e.jsx(D,{type:"circle",size:50,percent:t.overallScore,strokeColor:t.overallScore>=90?"#52c41a":t.overallScore>=70?"#faad14":"#ff4d4f",format:()=>`${t.overallScore}`})})]}),e.jsx(Y,{style:{margin:"12px 0"}}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(m,{strong:!0,children:"æ‰§è¡Œæ‘˜è¦: "}),e.jsx(m,{children:t.summary})]}),e.jsx($,{level:5,children:"æŒ‡æ ‡æ£€æŸ¥è¯¦æƒ…"}),t.metrics.map(S)]},t.id),h=t=>e.jsx(B,{dataSource:t,renderItem:n=>e.jsx(B.Item,{children:e.jsx(f,{size:"small",style:{width:"100%"},children:e.jsxs(N,{gutter:16,align:"top",children:[e.jsx(o,{span:2,children:e.jsx(w,{color:n.priority==="high"?"red":n.priority==="medium"?"orange":"blue",children:n.priority==="high"?"é«˜":n.priority==="medium"?"ä¸­":"ä½"})}),e.jsx(o,{span:3,children:e.jsx(w,{color:"purple",children:n.category==="performance"?"æ€§èƒ½":n.category==="security"?"å®‰å…¨":n.category==="reliability"?"å¯é æ€§":"ç»´æŠ¤"})}),e.jsx(o,{span:19,children:e.jsxs("div",{children:[e.jsx(m,{strong:!0,children:n.title}),e.jsx("br",{}),e.jsx(m,{type:"secondary",style:{fontSize:12},children:n.description}),e.jsx("br",{}),e.jsxs(m,{style:{fontSize:12,color:"#1890ff"},children:["é¢„æœŸå½±å“: ",n.estimatedImpact]})]})})]})})})});if(j)return e.jsx(q,{message:"æ­£åœ¨åŠ è½½è¯Šæ–­æŠ¥å‘Š...",type:"info",showIcon:!0});if(!r||r.length===0)return e.jsx(q,{message:"æš‚æ— è¯Šæ–­æŠ¥å‘Š",description:"èŠ‚ç‚¹æ‰§è¡Œå®Œæˆåå°†ç”Ÿæˆè¯¦ç»†çš„è¯Šæ–­æŠ¥å‘Š",type:"info",showIcon:!0});const R=r.map((t,n)=>{const s=v(t.analysis.riskLevel);return{key:n.toString(),label:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx(H,{status:t.status==="completed"?"success":t.status==="running"?"processing":t.status==="failed"?"error":"default"}),e.jsx("span",{style:{fontWeight:"bold"},children:t.nodeName}),e.jsx(w,{color:t.nodeType==="entity"?"blue":"green",children:t.nodeType==="entity"?"å®ä½“":"æ—¶åº"}),e.jsx(w,{color:s.color,children:s.label})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx(he,{title:"æ•´ä½“å¥åº·è¯„åˆ†",children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx(X,{style:{color:"#faad14"}}),e.jsxs("span",{style:{fontSize:14,fontWeight:"bold"},children:[t.analysis.overallHealthScore,"/100"]})]})}),e.jsxs("span",{style:{fontSize:12,color:"#666"},children:["åŠ¨ä½œ: ",t.actions.length,"é¡¹"]}),e.jsxs("span",{style:{fontSize:12,color:"#666"},children:["å»ºè®®: ",t.analysis.recommendations.length,"æ¡"]})]})]}),children:e.jsxs(Pe,{children:[e.jsx(Le,{score:t.analysis.overallHealthScore,children:e.jsxs(N,{gutter:16,align:"middle",children:[e.jsx(o,{span:8,children:e.jsx(T,{title:"æ•´ä½“å¥åº·è¯„åˆ†",value:t.analysis.overallHealthScore,suffix:"/100",valueStyle:{fontSize:32,fontWeight:"bold",color:t.analysis.overallHealthScore>=90?"#52c41a":t.analysis.overallHealthScore>=70?"#faad14":"#ff4d4f"},prefix:e.jsx(X,{})})}),e.jsxs(o,{span:8,children:[e.jsxs("div",{children:[e.jsx(m,{strong:!0,children:"é£é™©ç­‰çº§: "}),e.jsx(w,{color:s.color,style:{fontSize:14},children:s.label})]}),e.jsxs("div",{style:{marginTop:8},children:[e.jsx(m,{strong:!0,children:"æ‰§è¡Œæ—¶é•¿: "}),e.jsxs(m,{children:[t.executionTime.totalDuration||0,"ç§’"]})]})]}),e.jsx(o,{span:8,children:e.jsxs("div",{children:[e.jsx(m,{strong:!0,children:"æœ€åæ›´æ–°: "}),e.jsx(m,{type:"secondary",children:t.lastUpdated})]})})]})}),e.jsx(Y,{}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs($,{level:5,children:[e.jsx(de,{style:{color:"#faad14",marginRight:8}}),"å…³é”®å‘ç°"]}),e.jsx(B,{size:"small",dataSource:t.analysis.keyFindings,renderItem:l=>e.jsx(B.Item,{children:e.jsxs(m,{children:["â€¢ ",l]})})})]}),e.jsxs(N,{gutter:16,style:{marginBottom:24},children:[e.jsx(o,{span:12,children:e.jsx(f,{size:"small",title:"æ€§èƒ½æ‘˜è¦",children:e.jsx(Q,{style:{fontSize:13,margin:0},children:t.analysis.performanceSummary})})}),e.jsx(o,{span:12,children:e.jsx(f,{size:"small",title:"å®‰å…¨æ‘˜è¦",children:e.jsx(Q,{style:{fontSize:13,margin:0},children:t.analysis.securitySummary})})})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsx($,{level:5,children:"è¯Šæ–­åŠ¨ä½œè¯¦æƒ…"}),t.actions.map(g)]}),e.jsxs("div",{children:[e.jsx($,{level:5,children:"ä¼˜åŒ–å»ºè®®"}),h(t.analysis.recommendations)]})]})}});return e.jsx(me,{defaultActiveKey:["0"],ghost:!0,items:R})},qe=C.div`
  width: 100%;
  height: 700px;
  border: 1px solid #d9d9d9;
  border-radius: 6px;
  background: #fafafa;
  position: relative;
  overflow: hidden;
  
  svg {
    width: 100%;
    height: 100%;
  }
`,De=({nodes:c,panels:r,onNodeClick:_})=>{const j=p.useRef(null),a=p.useMemo(()=>c,[JSON.stringify(c)]),y=p.useMemo(()=>r,[JSON.stringify(r)]),I=(i,d,x,v)=>{if(d.filter(t=>t.panel===i.id).length===0)return null;const g=40,h=(v-g*4)/3,R=g+(i.level-1)*(h+g);return{x:g,y:R,width:x-g*2,height:h,rx:8,ry:8}},k=()=>{if(!a||a.length===0||!j.current)return;const i=ke(j.current);i.selectAll("*").remove();const d=800,x=700,v=a.map(s=>({...s})),S=i.append("g");y.forEach(s=>{const l=I(s,v,d,x);if(!l)return;const b=S.append("g").attr("class",`panel-${s.id}`);b.append("rect").attr("x",l.x).attr("y",l.y).attr("width",l.width).attr("height",l.height).attr("rx",l.rx).attr("ry",l.ry).attr("fill",s.color).attr("stroke",s.borderColor).attr("stroke-width",2).attr("stroke-dasharray","5,5").attr("opacity",.8),b.append("text").attr("x",l.x+20).attr("y",l.y+25).attr("font-size","16px").attr("font-weight","bold").attr("fill",s.borderColor).text(s.name),b.append("text").attr("x",l.x+20).attr("y",l.y+45).attr("font-size","12px").attr("fill","#666").text(s.description)});const g=[];v.forEach(s=>{s.dependencies&&s.dependencies.forEach(l=>{g.push({source:l,target:s.id})})});const h=Se(v).force("link",Ie(g).id(s=>s.id).distance(120)).force("charge",we().strength(-200)).force("collision",Te().radius(35)).force("panel",()=>{v.forEach(s=>{const l=y.find(ne=>ne.id===s.panel);if(!l)return;const b=I(l,v,d,x);if(!b)return;const V=50,W=b.x+V,F=b.x+b.width-V,J=b.y+V+50,O=b.y+b.height-V;s.x<W&&(s.x=W),s.x>F&&(s.x=F),s.y<J&&(s.y=J),s.y>O&&(s.y=O)})});i.append("defs").append("marker").attr("id","arrowhead").attr("viewBox","0 -5 10 10").attr("refX",35).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("fill","#999");const R=S.append("g").selectAll("line").data(g).enter().append("line").attr("stroke","#999").attr("stroke-opacity",.6).attr("stroke-width",2).attr("marker-end","url(#arrowhead)"),t=s=>{switch(s){case"completed":return"#52c41a";case"running":return"#1890ff";case"failed":return"#ff4d4f";case"pending":return"#d9d9d9";case"skipped":return"#faad14";default:return"#d9d9d9"}},n=S.append("g").selectAll("g").data(v).enter().append("g").attr("class","node").style("cursor","pointer").call(Re().on("start",(s,l)=>{s.active||h.alphaTarget(.3).restart(),l.fx=l.x,l.fy=l.y}).on("drag",(s,l)=>{l.fx=s.x,l.fy=s.y}).on("end",(s,l)=>{s.active||h.alphaTarget(0),l.fx=null,l.fy=null}));n.append("circle").attr("r",30).attr("fill",s=>t(s.status)).attr("stroke","#fff").attr("stroke-width",3),n.append("text").attr("text-anchor","middle").attr("dy","0.35em").attr("font-size","16px").attr("fill","white").text(s=>s.type==="entity"?"ğŸ”§":"âš¡"),n.append("text").attr("text-anchor","middle").attr("dy","3.8em").attr("font-size","12px").attr("fill","#333").text(s=>s.name),n.append("text").attr("text-anchor","middle").attr("dy","5.2em").attr("font-size","10px").attr("fill","#666").text(s=>{switch(s.status){case"completed":return"å·²å®Œæˆ";case"running":return"è¿è¡Œä¸­";case"failed":return"å¤±è´¥";case"pending":return"ç­‰å¾…ä¸­";case"skipped":return"å·²è·³è¿‡";default:return""}}),n.on("click",(s,l)=>{_&&_(l)}),h.on("tick",()=>{R.attr("x1",s=>s.source.x).attr("y1",s=>s.source.y).attr("x2",s=>s.target.x).attr("y2",s=>s.target.y),n.attr("transform",s=>`translate(${s.x},${s.y})`)})};return p.useEffect(()=>{k()},[a,y]),e.jsxs("div",{children:[e.jsx(q,{message:"æ“ä½œæç¤º",description:"ç‚¹å‡»èŠ‚ç‚¹æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼Œæ‹–æ‹½èŠ‚ç‚¹è°ƒæ•´ä½ç½®ã€‚èŠ‚ç‚¹æŒ‰é¢æ¿åˆ†å±‚å±•ç¤ºï¼Œä¸åŒé¢œè‰²ä»£è¡¨ä¸åŒçš„æ‰§è¡ŒçŠ¶æ€ã€‚",type:"info",showIcon:!0,style:{marginBottom:16}}),e.jsxs(qe,{children:[e.jsx("svg",{ref:j}),e.jsxs("div",{style:{position:"absolute",top:16,right:16,background:"white",padding:12,borderRadius:6,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{fontSize:12,marginBottom:8,fontWeight:"bold"},children:"çŠ¶æ€å›¾ä¾‹"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:"#52c41a"}}),e.jsx("span",{style:{fontSize:11},children:"å·²å®Œæˆ"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:"#1890ff"}}),e.jsx("span",{style:{fontSize:11},children:"è¿è¡Œä¸­"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:"#d9d9d9"}}),e.jsx("span",{style:{fontSize:11},children:"ç­‰å¾…ä¸­"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:"#ff4d4f"}}),e.jsx("span",{style:{fontSize:11},children:"å¤±è´¥"})]})]})]}),e.jsxs("div",{style:{position:"absolute",bottom:16,right:16,background:"white",padding:12,borderRadius:6,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{fontSize:12,marginBottom:8,fontWeight:"bold"},children:"é¢æ¿å›¾ä¾‹"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4},children:y.map(i=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:12,height:12,background:i.color,border:`1px solid ${i.borderColor}`,borderRadius:2}}),e.jsx("span",{style:{fontSize:11},children:i.name})]},i.id))})]})]})]})},{Text:Ke}=M,Me=({visible:c,node:r,panels:_,allNodes:j,onClose:a})=>{var k;const y=i=>{switch(i){case"success":return e.jsx(L,{style:{color:"#52c41a"}});case"warning":return e.jsx(ie,{style:{color:"#faad14"}});case"error":return e.jsx(E,{style:{color:"#ff4d4f"}});default:return e.jsx(ae,{style:{color:"#1890ff"}})}},I=i=>{switch(i){case"health_check":return e.jsx(se,{style:{color:"#52c41a"}});case"performance_analysis":return e.jsx(te,{style:{color:"#1890ff"}});case"fault_analysis":return e.jsx(ee,{style:{color:"#ff4d4f"}});case"security_scan":return e.jsx(Z,{style:{color:"#faad14"}});default:return e.jsx(U,{style:{color:"#666"}})}};return r?e.jsx(xe,{title:`${r.name} - è¯¦ç»†ä¿¡æ¯`,placement:"right",width:600,open:c,onClose:a,children:e.jsxs("div",{children:[e.jsx(f,{title:"åŸºæœ¬ä¿¡æ¯",size:"small",style:{marginBottom:16},children:e.jsxs(u,{column:1,size:"small",children:[e.jsx(u.Item,{label:"èŠ‚ç‚¹åç§°",children:r.name}),e.jsx(u.Item,{label:"èŠ‚ç‚¹ç±»å‹",children:e.jsx(w,{color:r.type==="entity"?"blue":"green",children:r.type==="entity"?"å®ä½“":"æ—¶åº"})}),e.jsx(u.Item,{label:"åˆ†ç±»",children:r.category}),e.jsx(u.Item,{label:"æ‰€å±é¢æ¿",children:e.jsx(w,{color:"purple",children:(k=_.find(i=>i.id===r.panel))==null?void 0:k.name})}),e.jsx(u.Item,{label:"æ‰§è¡ŒçŠ¶æ€",children:e.jsx(H,{status:r.status==="completed"?"success":r.status==="running"?"processing":r.status==="failed"?"error":"default",text:r.status==="completed"?"å·²å®Œæˆ":r.status==="running"?"è¿è¡Œä¸­":r.status==="failed"?"å¤±è´¥":r.status==="pending"?"ç­‰å¾…ä¸­":"æœªçŸ¥"})}),e.jsx(u.Item,{label:"å¼€å§‹æ—¶é—´",children:r.startTime||"æœªå¼€å§‹"}),e.jsx(u.Item,{label:"ç»“æŸæ—¶é—´",children:r.endTime||"æœªç»“æŸ"}),e.jsx(u.Item,{label:"æ‰§è¡Œæ—¶é•¿",children:r.duration?`${r.duration}ç§’`:"æœªå®Œæˆ"})]})}),e.jsx(f,{title:"æ£€æŸ¥åŠ¨ä½œ",size:"small",style:{marginBottom:16},children:e.jsx(A,{wrap:!0,children:r.actions.map(i=>e.jsx(w,{color:"blue",icon:I(i),children:i==="health_check"?"å¥åº·æ£€æŸ¥":i==="performance_analysis"?"æ€§èƒ½åˆ†æ":i==="fault_analysis"?"æ•…éšœåˆ†æ":i==="security_scan"?"å®‰å…¨æ‰«æ":i},i))})}),r.results&&r.results.length>0&&e.jsx(f,{title:"æ‰§è¡Œç»“æœ",size:"small",children:e.jsx(G,{children:r.results.map((i,d)=>e.jsx(G.Item,{dot:y(i.status),children:e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:4},children:i.actionName}),e.jsx("div",{style:{color:"#666",marginBottom:4},children:i.message}),e.jsx("div",{style:{fontSize:12,color:"#999"},children:i.timestamp})]})},d))})}),r.dependencies&&r.dependencies.length>0&&e.jsx(f,{title:"ä¾èµ–èŠ‚ç‚¹",size:"small",style:{marginTop:16},children:e.jsx(A,{wrap:!0,children:r.dependencies.map(i=>{const d=j.find(x=>x.id===i);return e.jsx(w,{color:(d==null?void 0:d.status)==="completed"?"green":"default",children:(d==null?void 0:d.name)||i},i)})})})]})}):null},{Title:Ue,Text:Ee}=M,We=C.div`
  padding: 24px;
`,P=C(f)`
  .ant-card-body {
    padding: 16px;
  }
  
  .ant-statistic {
    .ant-statistic-title {
      font-size: 12px;
      color: #666;
      margin-bottom: 8px;
    }
    
    .ant-statistic-content {
      font-size: 20px;
      font-weight: 600;
    }
  }
`,Qe=()=>{const{runId:c}=le(),{t:r}=oe(["tasks","common"]),[_,j]=p.useState(!1),[a,y]=p.useState(null),[I,k]=p.useState(null),[i,d]=p.useState(!1),[x,v]=p.useState(!0);p.useEffect(()=>{_e("ä»»åŠ¡é›†åˆè¿è¡Œè¯¦æƒ…"),S()},[c]),p.useEffect(()=>{let h;return x&&(a==null?void 0:a.status)==="running"&&(h=setInterval(()=>{S()},5e3)),()=>{h&&clearInterval(h)}},[x,a==null?void 0:a.status]);const S=async()=>{j(!0);try{await new Promise(R=>setTimeout(R,500)),y({id:c||"1",collectionId:"1",collectionName:"æ ¸å¿ƒæœåŠ¡ç›‘æ§ä»»åŠ¡",status:"running",startTime:"2024-06-24 13:00:00",totalNodes:8,completedNodes:5,failedNodes:1,successRate:75,createdBy:"è¿ç»´å·¥ç¨‹å¸ˆ",panels:[{id:"application_layer",name:"åº”ç”¨å±‚",level:1,color:"rgba(24, 144, 255, 0.1)",borderColor:"#1890ff",description:"åº”ç”¨æœåŠ¡å’Œä¸šåŠ¡é€»è¾‘å±‚"},{id:"service_layer",name:"æœåŠ¡å±‚",level:2,color:"rgba(82, 196, 26, 0.1)",borderColor:"#52c41a",description:"å¾®æœåŠ¡å’ŒAPIå±‚"},{id:"data_layer",name:"æ•°æ®å±‚",level:3,color:"rgba(250, 173, 20, 0.1)",borderColor:"#faad14",description:"æ•°æ®å­˜å‚¨å’Œç¼“å­˜å±‚"}],nodes:[{id:"node_1",name:"ç”¨æˆ·æœåŠ¡",type:"entity",category:"å¾®æœåŠ¡",panel:"service_layer",status:"completed",actions:["health_check","performance_analysis"],startTime:"2024-06-24 13:00:00",endTime:"2024-06-24 13:02:30",duration:150,dependencies:[],results:[{actionId:"health_check",actionName:"å¥åº·æ£€æŸ¥",status:"success",message:"æœåŠ¡è¿è¡Œæ­£å¸¸ï¼Œå“åº”æ—¶é—´ < 100ms",timestamp:"2024-06-24 13:01:00"},{actionId:"performance_analysis",actionName:"æ€§èƒ½åˆ†æ",status:"success",message:"CPUä½¿ç”¨ç‡: 45%, å†…å­˜ä½¿ç”¨ç‡: 60%",timestamp:"2024-06-24 13:02:30"}]},{id:"node_2",name:"è®¢å•æœåŠ¡",type:"entity",category:"å¾®æœåŠ¡",panel:"service_layer",status:"failed",actions:["health_check","fault_analysis"],startTime:"2024-06-24 13:00:00",endTime:"2024-06-24 13:03:00",duration:180,dependencies:["node_1"],results:[{actionId:"health_check",actionName:"å¥åº·æ£€æŸ¥",status:"error",message:"æœåŠ¡å“åº”è¶…æ—¶ï¼Œè¿æ¥å¤±è´¥",timestamp:"2024-06-24 13:01:30"},{actionId:"fault_analysis",actionName:"æ•…éšœåˆ†æ",status:"warning",message:"æ£€æµ‹åˆ°å†…å­˜æ³„æ¼é£é™©",timestamp:"2024-06-24 13:03:00"}]},{id:"node_3",name:"æ”¯ä»˜æœåŠ¡",type:"entity",category:"å¾®æœåŠ¡",panel:"service_layer",status:"running",actions:["health_check","security_scan"],startTime:"2024-06-24 13:02:00",dependencies:["node_1"]},{id:"node_4",name:"ç”¨æˆ·ç™»å½•æµç¨‹",type:"sequence",category:"è®¤è¯æ—¶åº",panel:"application_layer",status:"completed",actions:["health_check"],startTime:"2024-06-24 13:00:30",endTime:"2024-06-24 13:01:45",duration:75,dependencies:[],results:[{actionId:"health_check",actionName:"å¥åº·æ£€æŸ¥",status:"success",message:"ç™»å½•æµç¨‹æ­£å¸¸ï¼Œå¹³å‡å“åº”æ—¶é—´ 2.3s",timestamp:"2024-06-24 13:01:45"}]},{id:"node_5",name:"è®¢å•åˆ›å»ºæµç¨‹",type:"sequence",category:"ä¸šåŠ¡æ—¶åº",panel:"application_layer",status:"completed",actions:["health_check","performance_analysis"],startTime:"2024-06-24 13:01:00",endTime:"2024-06-24 13:03:30",duration:150,dependencies:["node_1","node_2"],results:[{actionId:"health_check",actionName:"å¥åº·æ£€æŸ¥",status:"warning",message:"æµç¨‹æ‰§è¡ŒæˆåŠŸï¼Œä½†å“åº”æ—¶é—´è¾ƒæ…¢",timestamp:"2024-06-24 13:02:15"},{actionId:"performance_analysis",actionName:"æ€§èƒ½åˆ†æ",status:"success",message:"å¹³å‡å¤„ç†æ—¶é—´: 3.2sï¼ŒæˆåŠŸç‡: 98%",timestamp:"2024-06-24 13:03:30"}]},{id:"node_6",name:"æ•°æ®åº“è¿æ¥æ± ",type:"entity",category:"æ•°æ®åº“",panel:"data_layer",status:"pending",actions:["health_check"],dependencies:["node_3"]},{id:"node_7",name:"ç¼“å­˜é›†ç¾¤",type:"entity",category:"ç¼“å­˜",panel:"data_layer",status:"pending",actions:["health_check","performance_analysis"],dependencies:["node_3"]},{id:"node_8",name:"æ”¯ä»˜æµç¨‹",type:"sequence",category:"æ”¯ä»˜æ—¶åº",panel:"application_layer",status:"pending",actions:["health_check","security_scan"],dependencies:["node_3","node_6"]}],diagnosticReports:[{nodeId:"node_1",nodeName:"ç”¨æˆ·æœåŠ¡",nodeType:"entity",status:"completed",summary:{totalChecks:2,passedChecks:2,warningChecks:0,failedChecks:0},checks:[{id:"health_check",name:"å¥åº·æ£€æŸ¥",status:"success",message:"æœåŠ¡è¿è¡Œæ­£å¸¸ï¼Œå“åº”æ—¶é—´ < 100ms",timestamp:"2024-06-24 13:01:00",duration:60},{id:"performance_analysis",name:"æ€§èƒ½åˆ†æ",status:"success",message:"CPUä½¿ç”¨ç‡: 45%, å†…å­˜ä½¿ç”¨ç‡: 60%",timestamp:"2024-06-24 13:02:30",duration:90}],recommendations:["ç»§ç»­ä¿æŒå½“å‰é…ç½®","å»ºè®®å®šæœŸæ¸…ç†æ—¥å¿—æ–‡ä»¶"]},{nodeId:"node_2",nodeName:"è®¢å•æœåŠ¡",nodeType:"entity",status:"failed",summary:{totalChecks:2,passedChecks:0,warningChecks:1,failedChecks:1},checks:[{id:"health_check",name:"å¥åº·æ£€æŸ¥",status:"error",message:"æœåŠ¡å“åº”è¶…æ—¶ï¼Œè¿æ¥å¤±è´¥",timestamp:"2024-06-24 13:01:30",duration:30},{id:"fault_analysis",name:"æ•…éšœåˆ†æ",status:"warning",message:"æ£€æµ‹åˆ°å†…å­˜æ³„æ¼é£é™©",timestamp:"2024-06-24 13:03:00",duration:150}],recommendations:["ç«‹å³é‡å¯æœåŠ¡å®ä¾‹","æ£€æŸ¥ç½‘ç»œè¿æ¥é…ç½®","å¢åŠ å†…å­˜ç›‘æ§å‘Šè­¦","ä¼˜åŒ–å†…å­˜ä½¿ç”¨ç­–ç•¥"]},{nodeId:"node_4",nodeName:"ç”¨æˆ·ç™»å½•æµç¨‹",nodeType:"sequence",status:"completed",summary:{totalChecks:1,passedChecks:1,warningChecks:0,failedChecks:0},checks:[{id:"health_check",name:"å¥åº·æ£€æŸ¥",status:"success",message:"ç™»å½•æµç¨‹æ­£å¸¸ï¼Œå¹³å‡å“åº”æ—¶é—´ 2.3s",timestamp:"2024-06-24 13:01:45",duration:75}],recommendations:["æµç¨‹è¿è¡Œæ­£å¸¸ï¼Œæ— éœ€è°ƒæ•´"]},{nodeId:"node_5",nodeName:"è®¢å•åˆ›å»ºæµç¨‹",nodeType:"sequence",status:"completed",summary:{totalChecks:2,passedChecks:1,warningChecks:1,failedChecks:0},checks:[{id:"health_check",name:"å¥åº·æ£€æŸ¥",status:"warning",message:"æµç¨‹æ‰§è¡ŒæˆåŠŸï¼Œä½†å“åº”æ—¶é—´è¾ƒæ…¢",timestamp:"2024-06-24 13:02:15",duration:135},{id:"performance_analysis",name:"æ€§èƒ½åˆ†æ",status:"success",message:"å¹³å‡å¤„ç†æ—¶é—´: 3.2sï¼ŒæˆåŠŸç‡: 98%",timestamp:"2024-06-24 13:03:30",duration:15}],recommendations:["ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½","è€ƒè™‘å¢åŠ ç¼“å­˜æœºåˆ¶","ç›‘æ§ç¬¬ä¸‰æ–¹APIå“åº”æ—¶é—´"]}]})}catch{fe.error("åŠ è½½è¿è¡Œè¯¦æƒ…å¤±è´¥")}finally{j(!1)}},g=h=>{k(h),d(!0)};return e.jsxs(We,{children:[e.jsx(ze,{items:[{title:"é¦–é¡µ",path:"/dashboard",icon:e.jsx(ge,{})},{title:"ä»»åŠ¡é›†åˆ",path:"/task-management/task-collections",icon:e.jsx(je,{})},{title:`${(a==null?void 0:a.collectionName)||"è¿è¡Œè¯¦æƒ…"}`,icon:e.jsx(U,{})}]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:24},children:[e.jsxs("div",{children:[e.jsxs(Ue,{level:2,style:{margin:0},children:[a==null?void 0:a.collectionName," - è¿è¡Œè¯¦æƒ…"]}),e.jsx("div",{style:{marginTop:8},children:e.jsxs(A,{children:[e.jsx(H,{status:(a==null?void 0:a.status)==="running"?"processing":"success",text:(a==null?void 0:a.status)==="running"?"è¿è¡Œä¸­":"å·²å®Œæˆ"}),e.jsxs(Ee,{type:"secondary",children:["è¿è¡ŒID: ",c]})]})})]}),e.jsxs(A,{children:[e.jsx(K,{icon:e.jsx(ve,{}),onClick:S,loading:_,children:"åˆ·æ–°"}),e.jsx(K,{type:x?"primary":"default",onClick:()=>v(!x),children:x?"åœæ­¢è‡ªåŠ¨åˆ·æ–°":"å¼€å¯è‡ªåŠ¨åˆ·æ–°"})]})]}),a&&e.jsxs(e.Fragment,{children:[e.jsxs(N,{gutter:[16,16],style:{marginBottom:24},children:[e.jsx(o,{xs:12,sm:6,md:6,lg:6,xl:6,children:e.jsx(P,{children:e.jsx(T,{title:"æ€»èŠ‚ç‚¹æ•°",value:a.totalNodes,prefix:e.jsx(be,{}),valueStyle:{color:"#1890ff"}})})}),e.jsx(o,{xs:12,sm:6,md:6,lg:6,xl:6,children:e.jsx(P,{children:e.jsx(T,{title:"å·²å®Œæˆ",value:a.completedNodes,prefix:e.jsx(L,{}),valueStyle:{color:"#52c41a"}})})}),e.jsx(o,{xs:12,sm:6,md:6,lg:6,xl:6,children:e.jsx(P,{children:e.jsx(T,{title:"å¤±è´¥èŠ‚ç‚¹",value:a.failedNodes,prefix:e.jsx(E,{}),valueStyle:{color:"#ff4d4f"}})})}),e.jsx(o,{xs:12,sm:6,md:6,lg:6,xl:6,children:e.jsx(P,{children:e.jsx(T,{title:"æˆåŠŸç‡",value:a.successRate,suffix:"%",prefix:e.jsx(L,{}),valueStyle:{color:a.successRate>80?"#52c41a":"#faad14"}})})})]}),e.jsx(f,{title:"è¿è¡Œä¿¡æ¯",style:{marginBottom:24},children:e.jsxs(u,{column:3,children:[e.jsx(u.Item,{label:"å¼€å§‹æ—¶é—´",children:a.startTime}),e.jsx(u.Item,{label:"ç»“æŸæ—¶é—´",children:a.endTime||"è¿è¡Œä¸­..."}),e.jsx(u.Item,{label:"è¿è¡Œæ—¶é•¿",children:a.duration?`${a.duration}ç§’`:"è®¡ç®—ä¸­..."}),e.jsx(u.Item,{label:"åˆ›å»ºè€…",children:a.createdBy}),e.jsx(u.Item,{label:"è¿è¡ŒçŠ¶æ€",children:e.jsx(H,{status:a.status==="running"?"processing":"success",text:a.status==="running"?"è¿è¡Œä¸­":"å·²å®Œæˆ"})}),e.jsx(u.Item,{label:"è¿›åº¦",children:e.jsx(D,{percent:Math.round(a.completedNodes/a.totalNodes*100),size:"small"})})]})}),e.jsx(f,{title:"èŠ‚ç‚¹è¯Šæ–­æŠ¥å‘Š",style:{marginBottom:24},children:e.jsx(Ae,{nodeIds:a.nodes.map(h=>h.id)})}),e.jsx(f,{title:"èŠ‚ç‚¹æ‹“æ‰‘å…³ç³»",style:{marginBottom:24},children:e.jsx(De,{nodes:a.nodes,panels:a.panels,onNodeClick:g})}),e.jsx(Me,{visible:i,node:I,panels:a.panels,allNodes:a.nodes,onClose:()=>d(!1)})]})]})};export{Qe as default};
